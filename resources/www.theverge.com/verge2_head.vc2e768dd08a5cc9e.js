function BrightcoveWrapper(e,t,n){var i=this,r=function(){},o="4063572901001";this.$el=jQuery("#"+e),this.elementId=e,this.meta=t,this.meta.type="brightcove",this.options=n=jQuery.extend({autoplay:!1,account_id:o,callback:r,onAdsPlayed:r,onCreate:r,onPlay:r},window.brightcove_options||{},n||{}),this.insertVideoTag.call(this,this.$el),this.perfMark("brightcoveInitializeStart"),yepnope({load:i.getPlayerUrl(n),complete:function(){i.setupPlayer(n),i.options.callback()}})}function OoyalaWrapper(e,t,n){function i(e){var t=e.mb,i=!1,o=function(i){t.unsubscribe("initialPlay","basePlaying"),t.unsubscribe("playing","basePlaying"),r.perfMark("ooyalaUserPlay"),r.pub("ooyalaVideoPlay"),r.markAsViewed(!0),Chorus.Analytics.event(r.formatEvent("play")),n.onPlay(e,!1),t.subscribe("disablePlaybackControls","basePlaying",function(e){t.unsubscribe("disablePlaybackControls","basePlaying"),r.perfMark("ooyalaFirstFrame"),r.perfMeasure("ttff","ooyalaUserPlay","ooyalaFirstFrame")})};t.subscribe("initialPlay","basePlaying",o),t.subscribe("playing","basePlaying",o),t.subscribe("downloading","basePlaying",function(e,n){t.unsubscribe("downloading","basePlaying"),i=!0}),t.subscribe("embedCodeChanged","discovery",function(e,n){i&&t.subscribe("contentTreeFetched","discovery",function(e,n){t.unsubscribe("contentTreeFetched","discovery");var i=n.title+" | discovery",o=r.formatEvent("play");o.eventLabel=i,Chorus.Analytics.event(o)}),i=!0}),t.subscribe("adsPlayed","taprAdsPlayed",function(e){t.unsubscribe("adsPlayed","taprAdsPlayed"),r.perfMark("ooyalaVideoStart"),t.subscribe("playing","taprPlaying",function(e){t.unsubscribe("playing","taprPlaying"),r.perfMark("ooyalaVideoPlay"),r.perfMeasure("tapr","ooyalaVideoStart","ooyalaVideoPlay")})}),t.subscribe("error","baseError",function(e){Chorus.Analytics.event(r.formatEvent("error"))}),t.subscribe("adsPlayed","baseAdsPlayed",function(i){t.unsubscribe("adsPlayed","baseAdsPlayed"),n.onAdsPlayed(e)}),t.subscribe(window[n.namespace].EVENTS.PLAYBACK_READY,"basePlayer",function(e){t.unsubscribe(window[n.namespace].EVENTS.PLAYBACK_READY,"basePlayer"),r.pub("ooyalaVideoReady"),r.perfMark("ooyalaVideoReady"),r.perfMeasure("loadtime","ooyalaInitializeStart","ooyalaVideoReady"),r.perfLoadComplete()})}var r=this,o=function(){};t.type=t.type||"ooyala",this.$el=jQuery("#"+e),this.elementId=e,this.meta=t,this.options=n=jQuery.extend({autoplay:!1,namespace:"OO",platform:"html5-fallback",player_id:window.ooyala_player_id||"",callback:o,onAdsPlayed:o,onCreate:o,onPlay:o,initialTime:n&&n.hasOwnProperty("volumeStartTime")?n.volumeStartTime:0},window.ooyala_options||{},n||{}),r.perfMark("ooyalaInitializeStart"),yepnope({test:window[n.namespace],nope:r.getOoyalaParams(n),complete:function(){var o=window[n.namespace];o.ready(function(){r.perfLoadStart(),r.player=o.Player.create(e,t.ooyala_id||t.provider_video_id,n),i(r.player),n.callback(r.player)})}})}function YoutubeWrapper(e,t,n){function i(e){e.data===YT.PlayerState.PLAYING?(n.onPlay(r.player),o||(Chorus.Analytics.event(r.formatEvent("play")),r.pub("youtubeVideoPlay"),o=!0)):e.data===YT.PlayerState.PAUSED&&n.onPause(r.player)}var r=this,o=!1,a=function(){};t.type=t.type||"youtube";var s=jQuery("<div>").attr("id","youtube-video-inside-wrapper-"+e);jQuery("#"+e).html(s),e=s.attr("id"),this.$el=jQuery("#"+e),this.elementId=e,this.meta=t,this.options=n=jQuery.extend({autoplay:!1,controls:1,modestbranding:1,rel:0,showInfo:0,onAdsPlayed:a,onCreate:a,onPause:a,onPlay:a,onPlayerReady:a,onPreRollEnd:a,timedEvents:{},start:n.hasOwnProperty("volumeStartTime")?n.volumeStartTime:0},n||{}),n.autoplay=n.autoplay?1:0,Chorus.Video.youtubeApiLoaded||Chorus.Video.loadYoutubeApi(),this.init=function(){r.player=new YT.Player(e,{videoId:t.youtube_id||t.provider_video_id,playerVars:n,events:{onReady:n.onCreate,onStateChange:i},width:"100%",height:"100%"})},"undefined"!=typeof YT&&YT.Player?r.init():(YoutubeWrapper.initQueue.push(r),window.onYouTubeIframeAPIReady=function(){for(var e=0;e<YoutubeWrapper.initQueue.length;e++)YoutubeWrapper.initQueue[e].init()})}function EmbedWrapper(e,t,n){this.$el=jQuery("#"+e),this.elementId=e,this.meta=t,this.options=n=n||this.options;var i=t.provider_video_id;n.autoplay&&(i=Util.addQueryParam("autoplay","1",i));this.$el.html(i).find("iframe")}window.Modernizr=function(e,t,n){function i(e){g.cssText=e}function r(e,t){return typeof e===t}function o(e,t){return!!~(""+e).indexOf(t)}function a(e,t){for(var i in e){var r=e[i];if(!o(r,"-")&&g[r]!==n)return"pfx"==t?r:!0}return!1}function s(e,t,i){for(var o in e){var a=t[e[o]];if(a!==n)return i===!1?e[o]:r(a,"function")?a.bind(i||t):a}return!1}function l(e,t,n){var i=e.charAt(0).toUpperCase()+e.slice(1),o=(e+" "+C.join(i+" ")+i).split(" ");return r(t,"string")||r(t,"undefined")?a(o,t):(o=(e+" "+k.join(i+" ")+i).split(" "),s(o,t,n))}function d(){f.input=function(n){for(var i=0,r=n.length;r>i;i++)A[n[i]]=n[i]in b;return A.list&&(A.list=!!t.createElement("datalist")&&!!e.HTMLDataListElement),A}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" "))}var c,u,p="2.7.1",f={},m=!0,h=t.documentElement,v="modernizr",y=t.createElement(v),g=y.style,b=t.createElement("input"),w=({}.toString," -webkit- -moz- -o- -ms- ".split(" ")),_="Webkit Moz O ms",C=_.split(" "),k=_.toLowerCase().split(" "),S={},A={},P=[],T=P.slice,x=function(e,n,i,r){var o,a,s,l,d=t.createElement("div"),c=t.body,u=c||t.createElement("body");if(parseInt(i,10))for(;i--;)s=t.createElement("div"),s.id=r?r[i]:v+(i+1),d.appendChild(s);return o=["&#173;",'<style id="s',v,'">',e,"</style>"].join(""),d.id=v,(c?d:u).innerHTML+=o,u.appendChild(d),c||(u.style.background="",u.style.overflow="hidden",l=h.style.overflow,h.style.overflow="hidden",h.appendChild(u)),a=n(d,e),c?d.parentNode.removeChild(d):(u.parentNode.removeChild(u),h.style.overflow=l),!!a},E={}.hasOwnProperty;u=r(E,"undefined")||r(E.call,"undefined")?function(e,t){return t in e&&r(e.constructor.prototype[t],"undefined")}:function(e,t){return E.call(e,t)},Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if("function"!=typeof t)throw new TypeError;var n=T.call(arguments,1),i=function(){if(this instanceof i){var r=function(){};r.prototype=t.prototype;var o=new r,a=t.apply(o,n.concat(T.call(arguments)));return Object(a)===a?a:o}return t.apply(e,n.concat(T.call(arguments)))};return i}),S.touch=function(){var n;return"ontouchstart"in e||e.DocumentTouch&&t instanceof DocumentTouch?n=!0:x(["@media (",w.join("touch-enabled),("),v,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(e){n=9===e.offsetTop}),n},S.history=function(){return!!e.history&&!!history.pushState},S.backgroundsize=function(){return l("backgroundSize")},S.cssanimations=function(){return l("animationName")},S.csstransforms3d=function(){var e=!!l("perspective");return e&&"webkitPerspective"in h.style&&x("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(t,n){e=9===t.offsetLeft&&3===t.offsetHeight}),e},S.csstransitions=function(){return l("transition")},S.localstorage=function(){try{return localStorage.setItem(v,v),localStorage.removeItem(v),!0}catch(e){return!1}};for(var V in S)u(S,V)&&(c=V.toLowerCase(),f[c]=S[V](),P.push((f[c]?"":"no-")+c));return f.input||d(),f.addTest=function(e,t){if("object"==typeof e)for(var i in e)u(e,i)&&f.addTest(i,e[i]);else{if(e=e.toLowerCase(),f[e]!==n)return f;t="function"==typeof t?t():t,"undefined"!=typeof m&&m&&(h.className+=" "+(t?"":"no-")+e),f[e]=t}return f},i(""),y=b=null,function(e,t){function n(e,t){var n=e.createElement("p"),i=e.getElementsByTagName("head")[0]||e.documentElement;return n.innerHTML="x<style>"+t+"</style>",i.insertBefore(n.lastChild,i.firstChild)}function i(){var e=g.elements;return"string"==typeof e?e.split(" "):e}function r(e){var t=y[e[h]];return t||(t={},v++,e[h]=v,y[v]=t),t}function o(e,n,i){if(n||(n=t),c)return n.createElement(e);i||(i=r(n));var o;return o=i.cache[e]?i.cache[e].cloneNode():m.test(e)?(i.cache[e]=i.createElem(e)).cloneNode():i.createElem(e),!o.canHaveChildren||f.test(e)||o.tagUrn?o:i.frag.appendChild(o)}function a(e,n){if(e||(e=t),c)return e.createDocumentFragment();n=n||r(e);for(var o=n.frag.cloneNode(),a=0,s=i(),l=s.length;l>a;a++)o.createElement(s[a]);return o}function s(e,t){t.cache||(t.cache={},t.createElem=e.createElement,t.createFrag=e.createDocumentFragment,t.frag=t.createFrag()),e.createElement=function(n){return g.shivMethods?o(n,e,t):t.createElem(n)},e.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+i().join().replace(/[\w\-]+/g,function(e){return t.createElem(e),t.frag.createElement(e),'c("'+e+'")'})+");return n}")(g,t.frag)}function l(e){e||(e=t);var i=r(e);return g.shivCSS&&!d&&!i.hasCSS&&(i.hasCSS=!!n(e,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),c||s(e,i),e}var d,c,u="3.7.0",p=e.html5||{},f=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,m=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,h="_html5shiv",v=0,y={};!function(){try{var e=t.createElement("a");e.innerHTML="<xyz></xyz>",d="hidden"in e,c=1==e.childNodes.length||function(){t.createElement("a");var e=t.createDocumentFragment();return"undefined"==typeof e.cloneNode||"undefined"==typeof e.createDocumentFragment||"undefined"==typeof e.createElement}()}catch(n){d=!0,c=!0}}();var g={elements:p.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",version:u,shivCSS:p.shivCSS!==!1,supportsUnknownElements:c,shivMethods:p.shivMethods!==!1,type:"default",shivDocument:l,createElement:o,createDocumentFragment:a};e.html5=g,l(t)}(this,t),f._version=p,f._prefixes=w,f._domPrefixes=k,f._cssomPrefixes=C,f.testProp=function(e){return a([e])},f.testAllProps=l,f.testStyles=x,f.prefixed=function(e,t,n){return t?l(e,t,n):l(e,"pfx")},h.className=h.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(m?" js "+P.join(" "):""),f}(this,this.document),function(e,t,n){function i(e){return"[object Function]"==v.call(e)}function r(e){return"string"==typeof e}function o(){}function a(e){return!e||"loaded"==e||"complete"==e||"uninitialized"==e}function s(){var e=y.shift();g=1,e?e.t?m(function(){("c"==e.t?p.injectCss:p.injectJs)(e.s,0,e.a,e.x,e.e,1)},0):(e(),s()):g=0}function l(e,n,i,r,o,l,d){function c(t){if(!f&&a(u.readyState)&&(b.r=f=1,!g&&s(),u.onload=u.onreadystatechange=null,t)){"img"!=e&&m(function(){_.removeChild(u)},50);for(var i in P[n])P[n].hasOwnProperty(i)&&P[n][i].onload()}}var d=d||p.errorTimeout,u=t.createElement(e),f=0,v=0,b={t:i,s:n,e:o,a:l,x:d};1===P[n]&&(v=1,P[n]=[]),"object"==e?u.data=n:(u.src=n,u.type=e),u.width=u.height="0",u.onerror=u.onload=u.onreadystatechange=function(){c.call(this,v)},y.splice(r,0,b),"img"!=e&&(v||2===P[n]?(_.insertBefore(u,w?null:h),m(c,d)):P[n].push(u))}function d(e,t,n,i,o){return g=0,t=t||"j",r(e)?l("c"==t?k:C,e,t,this.i++,n,i,o):(y.splice(this.i++,0,e),1==y.length&&s()),this}function c(){var e=p;return e.loader={load:d,i:0},e}var u,p,f=t.documentElement,m=e.setTimeout,h=t.getElementsByTagName("script")[0],v={}.toString,y=[],g=0,b="MozAppearance"in f.style,w=b&&!!t.createRange().compareNode,_=w?f:h.parentNode,f=e.opera&&"[object Opera]"==v.call(e.opera),f=!!t.attachEvent&&!f,C=b?"object":f?"script":"img",k=f?"script":C,S=Array.isArray||function(e){return"[object Array]"==v.call(e)},A=[],P={},T={timeout:function(e,t){return t.length&&(e.timeout=t[0]),e}};p=function(e){function t(e){var t,n,i,e=e.split("!"),r=A.length,o=e.pop(),a=e.length,o={url:o,origUrl:o,prefixes:e};for(n=0;a>n;n++)i=e[n].split("="),(t=T[i.shift()])&&(o=t(o,i));for(n=0;r>n;n++)o=A[n](o);return o}function a(e,r,o,a,s){var l=t(e),d=l.autoCallback;l.url.split(".").pop().split("?").shift(),l.bypass||(r&&(r=i(r)?r:r[e]||r[a]||r[e.split("/").pop().split("?")[0]]),l.instead?l.instead(e,r,o,a,s):(P[l.url]?l.noexec=!0:P[l.url]=1,o.load(l.url,l.forceCSS||!l.forceJS&&"css"==l.url.split(".").pop().split("?").shift()?"c":n,l.noexec,l.attrs,l.timeout),(i(r)||i(d))&&o.load(function(){c(),r&&r(l.origUrl,s,a),d&&d(l.origUrl,s,a),P[l.url]=2})))}function s(e,t){function n(e,n){if(e){if(r(e))n||(u=function(){var e=[].slice.call(arguments);p.apply(this,e),f()}),a(e,u,t,0,d);else if(Object(e)===e)for(l in s=function(){var t,n=0;for(t in e)e.hasOwnProperty(t)&&n++;return n}(),e)e.hasOwnProperty(l)&&(!n&&!--s&&(i(u)?u=function(){var e=[].slice.call(arguments);p.apply(this,e),f()}:u[l]=function(e){return function(){var t=[].slice.call(arguments);e&&e.apply(this,t),f()}}(p[l])),a(e[l],u,t,l,d))}else!n&&f()}var s,l,d=!!e.test,c=e.load||e.both,u=e.callback||o,p=u,f=e.complete||o;n(d?e.yep:e.nope,!!c),c&&n(c)}var l,d,u=this.yepnope.loader;if(r(e))a(e,0,u,0);else if(S(e))for(l=0;l<e.length;l++)d=e[l],r(d)?a(d,0,u,0):S(d)?p(d):Object(d)===d&&s(d,u);else Object(e)===e&&s(e,u)},p.addPrefix=function(e,t){T[e]=t},p.addFilter=function(e){A.push(e)},p.errorTimeout=1e4,null==t.readyState&&t.addEventListener&&(t.readyState="loading",t.addEventListener("DOMContentLoaded",u=function(){t.removeEventListener("DOMContentLoaded",u,0),t.readyState="complete"},0)),e.yepnope=c(),e.yepnope.executeStack=s,e.yepnope.injectJs=function(e,n,i,r,l,d){var c,u,f=t.createElement("script"),r=r||p.errorTimeout;f.src=e;for(u in i)f.setAttribute(u,i[u]);n=d?s:n||o,f.onreadystatechange=f.onload=function(){!c&&a(f.readyState)&&(c=1,n(),f.onload=f.onreadystatechange=null)},m(function(){c||(c=1,n(1))},r),l?f.onload():h.parentNode.insertBefore(f,h)},e.yepnope.injectCss=function(e,n,i,r,a,l){var d,r=t.createElement("link"),n=l?s:n||o;r.href=e,r.rel="stylesheet",r.type="text/css";for(d in i)r.setAttribute(d,i[d]);a||(h.parentNode.insertBefore(r,h),m(n,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))},window.Chorus=window.Chorus||{},Chorus.Modernizr=window.Modernizr;var AH=function(e){function t(e,t){this._firstAdRendered||(this._firstAdRendered=!0,n("first_ad_rendered"),Chorus.EventDispatcher.publish("first_ad_rendered",t,!0)),n("rendering_complete"),"undefined"!=typeof Chorus&&Chorus.EventDispatcher&&Chorus.EventDispatcher.publish(e,t,!0)}function n(e){"object"==typeof performance&&"function"==typeof performance.mark&&performance.mark("ad_"+e)}this._adPayloadHasBeenFetched=!1,this._customVariables={},this._adSlots={},this._adUnitsToShow=null,this._pageScope=null,this._adUnitScopes=null,this._debugging=!1,this._fetchDisabled=!1,this._skippedAdSlots=[],this._definedSlots={},this._useAsync=!1,this._firstAdRendered=!1,this._servicesEnabled=!1,this._deferredAdsEnabled=!1,this._adUnitsLoading=0,this._adsLoadedQueue=[],this.log_to_console=function(e){if("undefined"!=typeof SBN&&SBN.Campaigns&&SBN.Campaigns.log(e),Chorus&&Chorus.Context){var t=Chorus.Context.current_env;("staging"===t||"development"===t)&&console.log(e)}},this.disableFetch=function(){this._fetchDisabled=!0},this.enableDeferredAds=function(){this._deferredAdsEnabled=!0},this.enableSmartwrapper=function(){this._smartwrapperEnabled=!0},this.useAsync=function(){this._useAsync=!0},this.addVariable=function(t,n){this._customVariables[t]=n,e.cmd.push(function(){e.pubads().setTargeting(t,n)})},this.removeVariable=function(t){delete this._customVariables[t],e.cmd.push(function(){e.pubads().setTargeting(t,null)})},this.customVariables=function(){return this._customVariables},this.setAdUnitScopes=function(e){this._adUnitScopes=e},this.setPageScope=function(e){this._pageScope=e;for(var t in e)this.addVariable(t,e[t])},this.getPageScope=function(e){return null===this._pageScope?null:this._pageScope[e]},this.detectWebview=function(){var e=window.navigator.userAgent;e.match(/Twitter/)?this.addVariable("webview","twitter"):e.search("FBAN")>=0?this.addVariable("webview","facebook"):e.match(/Pinterest/)?this.addVariable("webview","pinterest"):e.match(/AppleWebKit/)&&!e.match(/Safari/)&&this.addVariable("webview","undetermined")},this.setAdUnitsOnPage=function(e){this._adUnitsOnPage=e},this.addAdUnitToPage=function(e){for(var t=this._adUnitsOnPage.concat(e),n=[],i=0;i<t.length;i++){var r=t[i];-1===n.indexOf(r)&&n.push(r)}this._adUnitsOnPage=n},this.isAdUnitInScope=function(e){if(!this.isUsingScope())return!0;var t=this._adUnitScopes[e];if(!t)return!0;for(var n in this._pageScope)if(this._pageScope.hasOwnProperty(n)){var i=this._pageScope[n],r=t[n];if(r&&!this.arrayInclude(r,i)){this._skippedAdSlots.push(e);var o="Ad unit "+e+' skipped for scope "'+i+'". Available values are: '+r.join(", ")+".";return this.log_to_console(o),jQuery("#ads_info_ad_units_skipped").append(" "+e),!1}}return!0},this.isUsingScope=function(){return null!==this._pageScope&&null!==this._adUnitScopes},this.getActiveAdUnits=function(){var e=[];if("undefined"!=typeof this._adUnitsOnPage){for(var t=0;t<this._adUnitsOnPage.length;++t){var n=this._adUnitsOnPage[t];this.isAdUnitInScope(n)&&e.push(n)}return e}},this.queueAd=function(e){var t=this;this._servicesEnabled?this.showAd(e):(this._pendingSlots=this._pendingSlots||[],this._pendingSlots.push(function(){t.showAd(e)}))},this.showAd=function(t){function n(){e.display("div-gpt-ad-"+t),r._definedSlots[t].loadStart=Date.now()}function i(){e.pubads().refresh([r._definedSlots[t].slot]),r._definedSlots[t].refreshed=!0}var r=this;return this._adUnitsToShow&&!this.arrayInclude(this._adUnitsToShow,t)?(this.log_to_console("Skipping",t),!1):(e.cmd.push(n),(!this._smartwrapperEnabled||this._deferredAdsEnabled&&"complete"===document.readyState)&&e.cmd.push(i),void(this._adPayloadHasBeenFetched||(this._adPayloadHasBeenFetched=!0,this._recordDFPRequestParameters())))},this.recordSlot=function(e,t,n,i){var r={};if(i)for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o]);r.slug=e,r.sizes=n,this._adSlots[t]=r},this.defineSlots=function(){var e=this;this._adUnitsToShow.forEach(function(t){try{e._defineSlot(t)}catch(n){e.log_to_console(n)}})},this._defineSlot=function(t){var n=this._adSlots[t],i="div-gpt-ad-"+t,r=n.targeting,o=n.sonobi_id,a=e.defineSlot(n.slug,n.sizes,i).set("slot_name",t);if(a.addService(e.pubads()),a.setTargeting("position",t),o&&"undefined"!=typeof sbi_morpheus&&sbi_morpheus.register(i,o),r)for(var s=0;s<r.length;++s)a.setTargeting(r[s][0],r[s][1]);if(this._definedSlots[t]={slot:a,refreshed:!1,loaded:!1,hymnal:!1},this._smartwrapperEnabled)try{TN8.SmartWrapper.attachSlot(t,a)}catch(l){this.log_to_console(l)}return!0},this.initTechnorati=function(){try{TN8.SmartWrapper.setTargeting()}catch(e){this.log_to_console(e)}},this.testTechnorati=function(){return!!("TN8"in window&&TN8.SmartWrapper)},this.setCreativeId=function(){e.pubads().addEventListener("slotRenderEnded",function(e){if(e.slot&&null!==e.slot.get("slot_name")&&e.creativeId){var t=document.getElementById(e.slot.l.m),n=t.getElementsByClassName("creative-id")[0];n.value=e.creativeId}})},this.fetchAds=function(){SBN.adStart=Date.now();var t=this;this.addVariable("async",this._useAsync.toString());var i=this.getActiveAdUnits();i.slice(0);if(this._fetchDisabled)return!1;if(this._smartwrapperEnabled=this._smartwrapperEnabled&&this.testTechnorati(),this._adUnitsToShow=i,this.defineSlots(),n("slots_defined"),this._smartwrapperEnabled)this.initTechnorati();else if("undefined"!=typeof sbi_morpheus)try{sbi_morpheus.callOperator()}catch(r){this.log_to_console("Oops Sonobi had a problem",r)}e.cmd.push(function(){e.pubads().addEventListener("slotRenderEnded",t._slotRenderHandler.bind(t)),"undefined"!=typeof Krux&&(e.pubads().setTargeting("ksg",Krux.segments),e.pubads().setTargeting("kuid",Krux.user)),n("requested_from_server"),e.enableServices(),t._servicesEnabled=!0,t._deferredAdsEnabled&&t._pendingSlots&&t._clearFnQueue(t._pendingSlots)}),KxVox={};for(var o in this._customVariables)KxVox[o]=this._customVariables[o];this._adsLoadedQueue.push(this._recordAdsLoaded.bind(this)),this._deferredAdsEnabled&&Promise?this._adLoadingPromise().then(this._onLoadHandler.bind(t)).then(void 0,function(e){t.log_to_console(e)}):(this._onLoadHandler(),this._removeUnfetchedAdSlots())},this._adLoadingPromise=function(){return this._loadPromise||(this._loadPromise=new Promise(function(e,t){return"complete"===document.readyState?e():window.addEventListener("load",function(){return e()})})),this._loadPromise},this._slotRenderHandler=function(e){if(e.slot&&null!==e.slot.get("slot_name")){var n={lineItem:e.lineItemId,size:e.size,isEmpty:e.isEmpty};-1!==e.slot.get("slot_name").indexOf("native")||e.isEmpty||this._listenForSlotLoad(e);var i="dfp:adRendered:"+e.slot.get("slot_name");t(i,n)}},this._listenForSlotLoad=function(e){var t=e.slot.get("slot_name"),n="div-gpt-ad-"+t,i=document.getElementById(n).getElementsByTagName("iframe")[0],r=-1===i.contentWindow.document.children[0].innerHTML.indexOf("hymnal"),o=t.indexOf("native")>-1;this._definedSlots[t].hymnal=!r,i&&r&&!o&&(this._adUnitsLoading++,i.addEventListener("load",function(){this._handleSlotLoad(t)}.bind(this)))},this._handleSlotLoad=function(e){this._adUnitsLoading--,this._definedSlots[e].loadEnd=Date.now(),this._definedSlots[e].loadTime=this._definedSlots[e].loadEnd-this._definedSlots[e].loadStart,this._definedSlots[e].loaded=!0,this._adLoadedEventTimeout=this._adLoadedEventTimeout||setTimeout(this._adUnitsLoadedEvent,2e4,!0),0===this._adUnitsLoading&&this._adsLoadedHandler()},this._adsLoadedHandler=function(e){clearTimeout(this._adLoadedEventTimeout),this._adsLoadedQueue.length>0&&(this._adsLoadedQueue=this._clearFnQueue(this._adsLoadedQueue))},this._recordAdsLoaded=function(){if(window.webpagetest&&window.webpagetest.done(),n("third_pary_ads_loaded"),SBN.adStart){var e=(Date.now()-SBN.adStart).toString();SBN.adLoadTime=e+"ms",this.log_to_console("Ad loading took "+e+"ms to finish.")}},this._onLoadHandler=function(){if(!this._smartwrapperEnabled){e.cmd.push(function(){e.pubads().refresh()});for(var t in this._definedSlots)this._definedSlots[t].refreshed=!0}this._removeUnfetchedAdSlots()},this._clearFnQueue=function(e,t){for(var n=e;n.length>0;){var i=n.shift();t?i.call(t):i()}return n},this._removeUnfetchedAdSlots=function(){for(var e=this._skippedAdSlots,t=0;t<e.length;t++){var n=e[t],i=jQuery("#div-gpt-ad-"+n),r=i.parent(".m-ad");i.remove(),0===r.children().size()&&r.remove()}},this._recordDFPRequestParameters=function(){var e=jQuery('script[src*="gampad/ads"]'),t=e.length?e.attr("src"):"",n=t.indexOf("&trunc=1")>0;"undefined"!=typeof dataLayer&&dataLayer.push&&dataLayer.push({"DFP Targeting Truncated":n,"DFP Targeting Length":t.length})},this.arraySubtract=function(e,t){for(var n=[],i=0;i<e.length;++i){for(var r=!1,o=0;o<t.length;++o)if(e[i]===t[o]){r=!0;break}r||n.push(e[i])}return n},this.arrayIntersection=function(e,t){for(var n=[],i=0;i<e.length;++i)for(var r=0;r<t.length;++r)if(e[i]===t[r]&&!this.arrayInclude(n,e[i])){n.push(e[i]);break}return n},this.arrayIndexOf=function(e,t){for(var n=0,i=e.length;i>n;n++)if(e[n]===t)return n;return-1},this.arrayInclude=function(e,t){return-1!==this.arrayIndexOf(e,t)}};jQuery(function(){var e=location.search.match(/hymnal_id=([^&#]+)/);if(e){var t=document.createElement("script");t.src="http://hymnal.voxmedia.com/ads/"+e[1]+"/design_script",document.body.appendChild(t)}});var Chorus=Chorus||{};Chorus.Environment=function(e){var t,n=[{index:0,name:"bp-xx-small",min:0,max:399},{index:1,name:"bp-x-small",min:400,max:499},{index:2,name:"bp-x-small-small",min:500,max:599},{index:3,name:"bp-small",min:600,max:699},{index:4,name:"bp-small-medium",min:700,max:799},{index:5,name:"bp-medium",min:800,max:899},{index:6,name:"bp-medium-large",min:900,max:1024},{index:7,name:"bp-large",min:1025,max:1199},{index:8,name:"bp-x-large",min:1200,max:1440},{index:9,name:"bp-xx-large",min:1441,max:99999}],i=null,r=e(window),o="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch||navigator.msMaxTouchPoints>0||navigator.maxTouchPoints>0,a=null,s=function(){t=window.innerWidth>window.innerHeight?"landscape":"portrait";for(var i=n[8],o=r.width(),s=n.length-1;s>-1;s--){var l=n[s];if(o>=l.min&&o<=l.max)return void((null===a||a.index!==l.index)&&(a=JSON.parse(JSON.stringify(l)),r.trigger(new e.Event("breakpointchange",{currentBreakpoint:a}))))}(null===a||a.index!==i.index)&&(a=JSON.parse(JSON.stringify(i)),r.trigger(new e.Event("breakpointchange",{currentBreakpoint:a})))};r.bind("resize orientationchange",function(){clearTimeout(i),i=setTimeout(function(){clearTimeout(i),s()},20)});var l=window.matchMedia("(max-width: "+n[3].min+"px)"),d=window.matchMedia("(min-width: "+n[7].min+"px)");return{currentBreakpoint:function(){return null==a&&s(),a},touch:function(){return o},orientation:function(){return t},setBreakpoints:function(t){"array"===e.type(t)&&(n=t,s())},largeBreakpoint:d,smallBreakpoint:l}}(jQuery);var NativeAds=NativeAds||{};!function(e){NativeAds.Util={toPositionInteger:function(e,t){var n=parseInt(e,10);return isNaN(n)?t:n},insertBefore:function(t,n,i){var r=e(t).get(i);r?e(r).before(n):e(t).last().after(n)},appendStyle:function(t,n){e(t).append("<style>"+n+"</style>")},colorize:function(t,n,i){i=i||"color",e(t).css(i,n)},assignOddEven:function(t){e(t).each(function(t){t%2===0?(e(this).removeClass("odd"),e(this).addClass("even")):(e(this).addClass("odd"),e(this).removeClass("even"))})},nativeAdPlacement:function(t){var n=function(){return[].map.call(arguments,function(e){return'[data-native-ad-id="'+e+'"]'}).join(", ")},i=e(t._element).parents(n("container")),r=t.fields;i.find(n("preamble_bg")).css({"background-color":r.brand_color}),i.find(n("preamble_text")).css({color:r.brand_color,"border-color":r.brand_color}),i.find("a").attr("href",t.clickThroughUrl),r.byline||(r.byline="Our Partner"),r.preamble?r.byline=r.preamble+" "+r.byline:r.byline="Powered by "+r.byline;var o={body_text:r.description||r.pull_quote||"",headline:r.title||"",byline:r.byline||"",pull_quote:r.pull_quote||"",eyebrow:r.eyebrow||"From Our Sponsor"};e.each(o,function(e,t){i.find(n(e)).text(t)}),r.description&&i.find(n("description")).text(r.description);var a=i.find(n("thumbnail")),s=a[0].className,l=!a.is("img")&&!a.children("img").length,d={src:r.thumbnail,"data-original":r.thumbnail,alt:r.description};l?(a=e("<img />").attr(d).appendTo(i.find(n("thumbnail"))),a[0].className=a[0].className+s,a[0].classList.remove("vox-lazy-load","lazy-loaded"),a[0].removeAttribute("data-imgkey")):(a=a.is("img")?a:a.find("img"),a.attr(d)),i.find(n("thumbnail")).removeClass("vox-lazy-load lazy-loaded").css("background-image","none"),i.find(n("logo")).attr({src:r.logo,alt:r.description}),e(document).trigger("hymnal:nativeAdPlaced",t)},createVideoIframeFromEmbedCodeAndPlaceIn:function(t,n){var i=document.createElement("IFRAME");i.style.width="100%",i.style.height="100%",i.style.border="0";var r='<script>var e = document.getElementsByTagName("div");for(var i = 0; i < e.length; i++){e[i].style.width = "auto"; e[i].style.height="auto";}</script>',o="<html><head><style>body{margin:0;} .OoyalaVideoPlayer {width:100%; height:100%;}</style></head>"+t+r+"<body></body></html>";e(n).empty().append(i),i.contentWindow.document.open(),i.contentWindow.document.write(o),i.contentWindow.document.close()},waitForLazyContent:function(t,n){var i=!1,r=function(){!i&&e(t).length&&(i=!0,n())};r(),Chorus.EventDispatcher.subscribe("moduleInserted",r)},limitCharacterCount:function(e,t){var n=e.indexOf(" ",t);if(-1==n)return e;var i=e.substring(0,n),r=/[A-Za-z0-9]/;return r.test(i.slice(-1))&&(i+="\u2026"),i},declobberBackground:function(t){var n=e(t),i=n.css("background-image");n.attr("style",""),n.css("background-image",i)},makeSponsorClickable:function(t,n){n=n||".native-ad-sponsorship,.native-ad-byline",e(t._element).find(n).css("cursor","pointer").click(function(){window.location=t.clickThroughUrl})}}}(jQuery),function(e){var t={LatestTreatment:function(e){NativeAds.Util.colorize(".native-ad-latest .native-ad-sponsorship",e.fields.brand_color);var t=NativeAds.Util.toPositionInteger(e.fields.position,4);NativeAds.Util.insertBefore(".p-rock__basic-article-list li",e._element,t)},VideoTreatment:function(t){var n=e("#video-hero-player"),i=function(){NativeAds.Util.createVideoIframeFromEmbedCodeAndPlaceIn(t.fields.video_embed_code,n)},r=e("<li></li>").addClass("m-video-hero__playlist-entry is-not-playing native-ad-video");r.html(e(t._element).html()),$thumb=r.find(".native-ad-thumbnail"),$thumb.addClass("p-dynamic-image"),$thumb.append('<div class="play-icon"></div>'),r.on("click",function(e){return i(),e.stopImmediatePropagation(),e.stopPropagation(),!1}),NativeAds.Util.colorize(".native-ad-video .native-ad-preamble",t.fields.brand_color),e(t._element).remove();var o=NativeAds.Util.toPositionInteger(t.fields.position,2);NativeAds.Util.insertBefore(".m-video-hero__playlist ul li",r,o)},MobileTreatment:function(e){NativeAds.Util.colorize(".native-ad-mobile .native-ad-sponsorship",e.fields.brand_color),NativeAds.Util.colorize(".native-ad-mobile .native-ad-title",e.fields.brand_color)},SponsoredLinkTreatment:function(t,n){var i=e(t._element),r=i.find("a.native-ad-title").attr("href"),o=80,a=210,s=i.parents(".placeable-ad-unit");s.empty(),s.addClass("native-ad-sponsored-link");var l=e('<ul class="m-entry-slot__labels"><li><a>'+t.fields.preamble+"</a></li></ul>");NativeAds.Util.colorize(".native-ad-sponsored-link .m-entry-slot__labels",t.fields.brand_color,"background-color");var d=e('<h3><a href="'+r+'">'+t.fields.title+"</a></h3>"),c=e('<div class="m-entry-slot__meta"><strong>'+t.fields.byline+"</strong></div>"),u=e('<a href="'+r+'"><div class="p-dynamic-image" style="background-image: url('+t.fields.thumbnail+');"></div></a>'),p=e('<img class="native-ad-logo" src="'+t.fields.logo+'" alt="Supported By Our Sponsor">'),f=NativeAds.Util.limitCharacterCount(t.fields.description,a),m=e('<div class="m-entry-slot__blurb"><p>'+f+"</p></div>");if(c.append(p),s.append(l).append(d).append(c).append(u).append(m),"undefined"!=typeof t.fields.pullquote&&t.fields.pullquote.length){var h=NativeAds.Util.limitCharacterCount(t.fields.pullquote,o),v=e('<q><a href="'+r+'">'+h+"</a></q>");s.addClass("-has-pull-quote"),s.append(v)}var y=e(".m-entry-slot__mobile-list .proxy-container-native_ad_content_link");if(y.length){var g=e('<div class="m-entry-slot__image"><a href="'+r+'"><div class="p-dynamic-image" style="background-image:url('+t.fields.thumbnail+');"></a></div>'),b=e('<div class="m-entry-slot__content"></div>'),d=e('<h3><a href="'+r+'">'+t.fields.title+"</a></h3>"),c=e('<div class="m-entry-slot__meta"></div>'),w=e("<strong>"+t.fields.byline+"</strong>"),_=e('<span class="native-ad-preamble">'+t.fields.preamble+"</span>"),p=e('<img class="native-ad-logo" src="'+t.fields.logo+'"/>');c.append(w).append(_).append(p),b.append(d).append(c),y.append(g).append(b),y.addClass("native-ad-sponsored-link")}},ContentLinkTreatment:function(t){var n=e(t._element).parents('[data-native-ad-id="container"]');n.find('[data-native-ad-id="byline"]').parent("strong").addClass("m-entry-slot__meta--borderless"),n.find('[data-native-ad-id="thumbnail"] img').addClass("p-dynamic-image")},LinksetLinkTreatment:function(e){NativeAds.Util.colorize(".native-ad-linkset-link .native-ad-sponsorship",e.fields.brand_color);var t=NativeAds.Util.toPositionInteger(e.fields.position,4);NativeAds.Util.insertBefore(".m-linkset__entries-item",e._element,t)}},n=function(e){if("Native Ad"===e.type)switch(e.design_template){case"Native Ad Latest":t.LatestTreatment(e);break;case"Native Ad Video":t.VideoTreatment(e);break;case"Native Ad Mobile":t.MobileTreatment(e);break;case"Native Ad Sponsored Link":t.SponsoredLinkTreatment(e,".native-ad-sponsored-link");break;case"Native Ad Content Link":NativeAds.Util.nativeAdPlacement(e);break;case"Native Ad Linkset Link":t.LinksetLinkTreatment(e,".native-ad-linkset-link")}NativeAds.Util.makeSponsorClickable(e)};e(document).on("hymnal:render",function(e,t){n(t.ad)}),e(document).on("hymnal:nativeAdPlaced",function(e,n){t.ContentLinkTreatment(n)})}(jQuery),window.$j=window.$;var Chorus=Chorus||{},CA=Chorus.Analytics=CA||{};!function(){function e(){return window.innerHeight||p&&p.clientHeight||document.body.clientHeight}function t(){return window.innerWidth||p&&p.clientWidth||document.body.clientWidth}function n(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])}return e}function i(e,t){var n=null,i=!1,r=function(){return n?void(i=!0):(e(),void(n=setTimeout(function(){var e=i;n=null,i=!1,e&&r()},t)))};return r}function r(e,t){var n;if(u)return u(e).each(t);if("string"==typeof e?n=document.querySelectorAll(e):e instanceof NodeList?n=e:e instanceof Element&&(n=[e]),
n)for(var i=0;i<n.length;i++)t.call(n[i])}function o(e,t,n){u?u(e).on(t,n):e.addEventListener?e.addEventListener(t,n):e.attachEvent&&e.attachEvent("on"+t,n)}function a(e,t,n){return n=n||{},function(){for(var i=arguments[0]instanceof Array?arguments[0]:arguments,r=0,o={},a=0;a<i.length||r<t.length;a++){var s=i[a];if("function"==typeof s)o.eventCallback=s;else if("boolean"==typeof s)s&&(o.eventNonInt=s);else if("object"==typeof s)for(var l in s)s.hasOwnProperty(l)&&(o[n[l]||l]=s[l]);else if(t[r]){var d=t[r++];o.hasOwnProperty(d)||(o[d]=s)}}return o.event=e,o}}function s(e,t){return function(){var n=arguments[0]instanceof Array?arguments[0]:Array.prototype.slice.call(arguments);n.length&&(n[0].match&&n[0].match(/send|_track/)&&n.shift(),n[0]===e.toLowerCase()&&n.shift(),CA.push(t(n)))}}function l(n){var i=n&&n.getBoundingClientRect();return i&&i.bottom>0&&i.right>0&&i.top<e()&&i.left<t()}var d=[25,50,75,90],c=[],u=window.jQuery,p=document.documentElement,f=u||function(){var e,t=[],n=document,i=n.documentElement.doScroll,r="DOMContentLoaded",o=(i?/^loaded|^c/:/^loaded|^i|^c/).test(n.readyState);return o||n.addEventListener(r,e=function(){for(n.removeEventListener(r,e),o=1;e=t.shift();)e()}),function(e){o?e():t.push(e)}}(),m=a("analyticsEvent",["eventCategory","eventAction","eventLabel","eventValue","eventNonInt"],{nonInteraction:"eventNonInt",hitCallback:"eventCallback"}),h=a("social",["socialNetwork","socialAction","socialTarget","socialPagePath"],{page:"socialPagePath",hitCallback:"eventCallback"}),v=a("virtualPageView",["virtualPagePath","virtualPageTitle"],{page:"virtualPagePath",title:"virtualPageTitle",hitCallback:"eventCallback"});n(CA,{_dataLayer:CA.dataLayer||"dataLayer",dataLayer:function(){var e=this._dataLayer;return"object"==typeof e&&e.push?e:"string"==typeof e&&window[e]&&window[e].push?this._dataLayer=window[e]:[]},event:s("Event",m),social:s("Social",h),pageview:s("Pageview",v),push:function(e){this.dataLayer().push(e)},eventAutoFormat:function(e,t,n){var i=[e,t].join(":"),r=[e,this.contentType(),t].join(":");this.event(e,i,r,n)},trackElementView:function(e){var t=m(Array.prototype.slice.call(arguments,1));r(e,function(){c.push({el:this,data:n({},t)})}),g()},onElementView:function(e,t){r(e,function(){c.push({el:this,data:t})}),g()},disableScrollDepth:function(){d=[]},getVariable:function(e,t){for(var n=this.dataLayer(),i=n.length-1;i>=0;i--){var r=n[i][e];if(r)return r}return t},isMobile:function(){return t()<=600},contentDisplay:function(){return this.isMobile()?"mobile":"desktop"},contentType:function(){return this.getVariable("Content Type","other")},pageTitle:function(){return document.title.replace(/\s*(-|\|)\s*(Curbed|Eater|Polygon|Racked|SBNation|The Verge|Vox( Media)?)(.com)?$/,"")},crossDomains:function(){return"undefined"!=typeof __xdomains__?__xdomains__:document.domain.replace("www.","")},placement:function(e){for(var t=e;t&&t.getAttribute;){var n=t.getAttribute("data-analytics-placement");if(n)return":"+n;t=t.parentNode}return""},socialAction:function(e){for(var t=e;t&&t.getAttribute;){var n=t.getAttribute("data-analytics-action");if(n)return n;t=t.parentNode}return"share"},socialPlacement:function(e){for(var t=e;t&&t.getAttribute;){var n=t.getAttribute("data-analytics-placement");if(n)return n;t=t.parentNode}return"main"},headerText:function(e){var t=e,n=t.querySelectorAll("h1,h2,h3,h4,h5,h6");return n.length?(n=Array.prototype.slice.call(n),n.sort(function(e,t){return e.tagName.localeCompare(t.tagName)}),n[0].innerText):t.innerText},siblingText:function(e){for(var t=e,n=t.getAttribute("data-analytics-link").replace(/([^:]+).*/,"$1"),i='[data-analytics-link="'+n+'"]';(t=t.parentNode)&&t.querySelector;){var r=t.querySelector(i);if(r)return r.innerText}return e.getAttribute("href")},isOutboundLink:function(e,t){var n=e.hostname||"";if(!n||n==document.domain)return!1;for(var i=t.split(","),r=0;r<i.length;r++)if(n.indexOf(i[r])>=0)return!1;return!0}});var y=function(t){for(var n=window.pageYOffset||p&&p.scrollTop||document.body.scrollTop,i=document.body.scrollHeight,r=n/i*100,o=(n+e())/i*100,a=d.length-1;a>=0;a--){var s=d[a];if((s>r&&o>s||t&&o>s)&&(CA.eventAutoFormat("interaction",s,!0),d.splice(a,1),t))return}},g=i(function(){for(var e=c.length-1;e>=0;e--){var t=c[e].el;if(l(t)){var n=c[e].data;if(c.splice(e,1),"function"==typeof n)return n();n.eventCategory=n.eventCategory||t.getAttribute("data-analytics-category")||t.getAttribute("data-analytics-viewport")||"interaction",n.eventAction=n.eventAction||t.getAttribute("data-analytics-action")||n.eventCategory+":view",n.eventLabel=n.eventLabel||t.getAttribute("data-analytics-label")||t.innerText,n.eventNonInt=!0,CA.event(n)}}},300);f(function(){if(CA._q)for(;CA._q.length;){var e=CA._q.pop();CA[e[0]].apply(CA,e[1])}o(window,"scroll",i(function(){d.length&&y(),c.length&&g()},50)),CA.trackElementView("[data-analytics-viewport]"),y(!0)})}();var Util=Util||{};Util.UserAgentProfiler=function(){var e="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch||navigator.msMaxTouchPoints>0,t=window.innerWidth,n=window.navigator.userAgent,i=e&&728>t||window.location.href.indexOf("mobile=true")>0,r=e&&t>=728,o=!i&&!r,a=/(iPad|iPhone|iPod)/g.test(n),s=a&&/OS\s(7|6_1_4)/g.test(n),l=/Android/g.test(n),d=!1,c=i?"mobile":r?"tablet":"desktop";if(n.indexOf("Android")>0)for(var u=n.split(";"),p=0,f=u.length;f>p;p++)if(u[p].indexOf("Android")>0){var m=u[p].split(" ");if(parseInt(m[m.length-1].split(".")[0])<3){d=!0;break}}return{screenWidth:function(){return t},profile:function(){return c},isTablet:function(){return r},isMobile:function(){return i},isDesktop:function(){return o},isAndroid:function(){return l},isAndroidLt3:function(){return d},isIOS:function(){return a},isIOS7:function(){return s},deviceTypeForAds:function(){return this.profile()},browserWidthForAds:function(){return Chorus.Environment.currentBreakpoint().name},doNotTrack:function(){var e;if(void 0!==navigator.doNotTrack)e=navigator.doNotTrack;else if(void 0!==window.doNotTrack)e=window.doNotTrack;else{if(void 0===navigator.msDoNotTrack)return"unsupported";e=navigator.msDoNotTrack}return/1|yes|true/.test(e)?"1":"0"}}}();var SBN=SBN||{};SBN.Campaigns=SBN.Campaigns||{},SBN.Campaigns.log=function(e){"undefined"!=typeof console&&"function"==typeof console.log&&0!==jQuery("#ads_info_content").length&&console.log("[Ads]: "+e)},SBN.Campaigns.Components={clickUrls:{},activatedComponents:Array(),componentProperties:["campaign_id","component_name","component_id","component_type"],callbacks:{},config:{},renderedComponent:null,componentClickUrls:{},recordClickUrl:function(e,t){this.componentClickUrls[e]=t},click:function(e,t){url=this.componentClickUrls[e];var n;n="undefined"==typeof jQuery?Object.extend:jQuery.extend,t=n({newWindowName:null},t||{}),url&&(null!==t.newWindowName?window.open(url,t.newWindowName):window.location=url)},logActivation:function(e,t,n,i){this.activatedComponents.push({component_name:e,component_id:t,campaign_id:n,component_type:i})},activeComponentContext:function(){for(var e={},t=0;t<this.componentProperties.length;++t)for(var n=this.componentProperties[t],i=0;i<this.activatedComponents.length;++i){var r=this.activatedComponents[i],o=r[n];o&&(e[n]||(e[n]=[]),e[n].push(o))}return e},setCustomVarsFromActiveComponents:function(){var e=this.activeComponentContext();for(var t in e)SBN.Ads.addVariable(t,e[t])}},SBN.Campaigns.trackingImageProxy=function(){return{callbacks:[],images:[],loaded:!1,registerCallback:function(e){this.callbacks.push(e),this.createImages()},registerImage:function(e){this.images.push(e),this.createImages()},createImages:function(e){if(e||this.loaded){for(var t;t=this.images.pop();){var n=document.createElement("img");n.src=t.replace(/%%/g,""),n.height=1,n.width=1,document.body.appendChild(n)}for(var i;i=this.callbacks.pop();)i.call(window)}},load:function(){this.loaded=!0,this.createImages(!0)}}}(),"undefined"!=typeof jQuery&&jQuery(function(){SBN.Campaigns.trackingImageProxy.load()}),SBN.Campaigns.renderComponent=function(e){switch(e.type){case"clientReskin":case"headerReskin":SBN.Campaigns.renderReskin(e);break;default:SBN.Campaigns.log("Component type not recognized: "+e.type)}},SBN.Campaigns.renderReskin=function(reskin){var head=document.getElementsByTagName("head")[0],style=document.createElement("style"),rules=document.createTextNode(reskin.style);style.type="text/css",style.styleSheet?style.styleSheet.cssText=rules.nodeValue:style.appendChild(rules),reskin&&reskin.component&&reskin.component.componentId&&(style.id="stylesheet_component_"+reskin.component.componentId,jQuery("body").addClass("body_component_"+reskin.component.componentId),reskin.component.secondary_tracker_url&&SBN.Campaigns.trackingImageProxy.registerImage(reskin.component.secondary_tracker_url),SBN.Campaigns.Components.renderedComponent=reskin),head.appendChild(style),eval(reskin.js),SBN.Campaigns.Components.renderedComponent&&SBN.Campaigns.log("SBN.Campaigns.Components.renderedComponent is now: "+SBN.Campaigns.Components.renderedComponent.component.componentId)},SBN.Campaigns.renderAdServedReskin=function(e){jQuery(function(){jQuery.browser&&jQuery.browser.msie&&jQuery.browser.version<9||(SBN.Campaigns.renderComponent(e),Chorus&&Chorus.EventDispatcher&&Chorus.EventDispatcher.publish&&"undefined"!=typeof e.component.data.useLightLogo&&Chorus.EventDispatcher.publish("campaignReskinApplied",{useLightLogo:e.component.data.useLightLogo,useThirdLogo:e.component.data.useThirdLogo,useSolidBackground:e.component.data.useSolidBackground,useAlternateSocialIcons:e.component.data.useAlternateSocialIcons},!0))})},SBN.Campaigns.getComponentInfoList=function(){var e=jQuery("#ads_info_content");if(0===e.length)return null;var t=jQuery("#component-ads-info");return 0===t.length&&(e.append('<p class="toggler"><a onclick="SBN.Ads.toggleSection(this, \'#component-ads-info\')">+</a></p>').append("<h3>Results of Component Geotargeting</h3>").append('<p id="component-ads-geo-info" style="font-style:italic; font-size:11px; margin-top:-20px;">'),t=jQuery('<ul id="component-ads-info" style="display:none" />').appendTo(e)),t},SBN.Campaigns.updateComponentStatusInInfoPane=function(e,t){var n=SBN.Campaigns.getComponentInfoList();if(n){var i,r,o="";"string"==typeof e?i=e:(i=e.component.trackerId,e.component.data.geotargeted&&(o="(GEO)&nbsp;")),r=jQuery("#component-ads-info-"+i);var a={headerReskin:"Header Reskin",clientReskin:"Reskin",topHat:"Top Hat",fishtank:"Fishtank"};0===r.length&&(r=jQuery("<li />").attr("id","component-ads-info-"+e.component.trackerId).html(a[e.type]+" "+e.component.trackerId+"&nbsp;"+o).append('<span class="status" />').appendTo(n));var s=t?"("+t+")":"";r.find(".status").text(s),"Rendered"===t&&r.css("font-weight","bold")}},SBN.Campaigns.belowNavAdMarkup=null,SBN.Campaigns.renderBelowNavAdMarkupIfApplicable=function(){if("undefined"!==SBN.Campaigns.belowNavAdMarkup&&SBN.Campaigns.belowNavAdMarkup){var e=document.getElementById("leaderboard_ad");e&&(e.style.display="none"),"complete"!==document.readyState&&document.write($("<div/>").html(SBN.Campaigns.belowNavAdMarkup).text())}};var Util=Util||{};Util.getUrlVars=function(){for(var e,t={},n=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),i=0;i<n.length;i++){var e=n[i].split("=");val=e[1],retVal="true"==val?!0:"false"==val?!1:null,null==retVal&&(retVal=0==isNaN(parseInt(val))?parseInt(val):0==isNaN(parseFloat(val))?parseFloat(val):val),t[e[0]]=retVal}return t},Util.inViewport=function(e){var t,n;return e&&1===e.nodeType?(n=document.documentElement,t=e.getBoundingClientRect(),!!t&&t.bottom>0&&t.right>0&&t.top<n.clientHeight&&t.left<n.clientWidth):!1},Util.detectCSSFeature=function(e){var t=["Webkit","Moz","ms","O"],n=document.createElement("div"),i=null,e=e.toLowerCase();if(n.style[e])return!0;i=e.charAt(0).toUpperCase()+e.substr(1);for(var r=t.length-1;r>-1;r--)if(void 0!==n.style[t[r]+i])return!0;return!1},Util.getReferrerDomain=function(){return document.referrer.split("/")[2]},Util.socialReferrer=function(){var e=Util.getUrlVars().debugReferrer,t=e||this.getReferrerDomain();if(t){if(t=t.replace(/^www\./i,""),["twitter.com","t.co"].indexOf(t)>-1)return"twitter";if(["facebook.com","fb.me"].indexOf(t)>-1)return"facebook";if("plus.google.com"===t)return"google-plus";if("sports.yahoo.com"===t)return"yahoo sports";if("yahoo.com"===t)return"yahoo"}return null},Util.isReferrerSocialDomain=function(e){var t=this.socialReferrer();if(e)return e===t;var n=["twitter","facebook","google-plus","yahoo","yahoo sports"],i=jQuery.inArray(t,n);return i>-1},Util.isReferrerCurrentDomain=function(){var e=this.getReferrerDomain(),t=location.href.split("/")[2];return e===t},Util.isReferrerCurrentNetwork=function(){var e=this.getReferrerDomain(),t=location.href;if(!e)return!1;var n=/eater|polygon|racked|sbnation|vox|voxmedia|voxcreative|theverge/;return t.match(n)+""==e.match(n)+""},Util.isReferrerVoxMediaNetwork=function(){var e=this.getReferrerDomain();if(!e)return!1;var t=/eater|polygon|racked|sbnation|vox|voxmedia|voxcreative|theverge/,n=e.match(t);return n&&n.length>0},Util.loadScriptAsync=function(e,t){var n=document.createElement("SCRIPT"),i=document.getElementsByTagName("SCRIPT")[0];n.type="text/javascript",n.async=!0,n.src=e,t&&(n.onload=t),i.parentNode.insertBefore(n,i)},Util.characterCountdown=function(e,t,n){var i=e.attr("maxlength");t.text(i-e.val().length);var r=jQuery("<div class='error' style='display:none'>Some of your text was cut off because it exceeded the limit</div>");e.before(r),e.removeAttr("maxlength"),e.keyup(function(){var o=e.val().length;o>i?n||(e.val(e.val().substr(0,i)),r.show(),o=e.val().length):r.hide(),t.text(i-o)})},Util.addQueryParam=function(e,t,n){var i=new RegExp("([?|&])"+e+"=.*?(&|#|$)","gi");if(n.match(i))return t?n.replace(i,"$1"+e+"="+t+"$2"):n.replace(i,"$2");if(t){var r=-1!==n.indexOf("?")?"&":"?",o=n.split("#");return n=o[0]+r+e+"="+t,o[1]&&(n+="#"+o[1]),n}return n},Util.trackFacebook=function(e){return e?void(window.fbAsyncInit=function(){FB.init({version:"v2.0",appId:e,status:!0,cookie:!0,xfbml:!0});var t=Chorus.Analytics;FB.Event.subscribe("edge.create",function(e){t.event("social","facebook:like",e),t.social("facebook","like",e),e.match(/facebook\.com\/verge/i)&&t.event("follow-bar","facebook:like",e)}),FB.Event.subscribe("edge.remove",function(e){t.event("social","facebook:unlike",e),t.social("facebook","unlike",e),e.match(/facebook\.com\/verge/i)&&t.event("follow-bar","facebook:unlike",e)})}):console.log("[Util.trackFacebook]: Specify a Facebook App ID")},Util.trackTwitter=function(){window.twttr=window.twttr||(t={_e:[],ready:function(e){t._e.push(e)}});var e=Chorus.Analytics;twttr.ready(function(t){t.events.bind("tweet",function(t){e.event("social","twitter:tweet",location.href),e.social("twitter","tweet",location.href)}),t.events.bind("follow",function(t){e.event("social","twitter:follow","@"+t.data.screen_name),e.social("twitter","follow","@"+t.data.screen_name),jQuery(t.target).parent().hasClass("follow-the-verge")&&e.event("follow-bar","twitter:follow","@"+t.data.screen_name)}),t.events.bind("retweet",function(t){e.event("social","twitter:retweet",t.data.source_tweet_id),e.social("twitter","retweet",t.data.source_tweet_id)}),t.events.bind("favorite",function(t){e.event("social","twitter:favorite",t.data.tweet_id),e.social("twitter","favorite",t.data.tweet_id)})})},Util.stringToTitleCase=function(e){return e.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})},/*! usertiming v0.1.6 */
!function(e){"use strict";"undefined"==typeof e&&(e={}),"undefined"==typeof e.performance&&(e.performance={}),e._perfRefForUserTimingPolyfill=e.performance,e.performance.userTimingJsNow=!1,e.performance.userTimingJsNowPrefixed=!1,e.performance.userTimingJsUserTiming=!1,e.performance.userTimingJsUserTimingPrefixed=!1,e.performance.userTimingJsPerformanceTimeline=!1,e.performance.userTimingJsPerformanceTimelinePrefixed=!1;var t,n,i=[],r=[],o=null;if("function"!=typeof e.performance.now){for(e.performance.userTimingJsNow=!0,r=["webkitNow","msNow","mozNow"],t=0;t<r.length;t++)if("function"==typeof e.performance[r[t]]){e.performance.now=e.performance[r[t]],e.performance.userTimingJsNowPrefixed=!0;break}var a=+new Date;e.performance.timing&&e.performance.timing.navigationStart&&(a=e.performance.timing.navigationStart),"function"!=typeof e.performance.now&&(e.performance.now=Date.now?function(){return Date.now()-a}:function(){return+new Date-a})}var s=function(){},l=function(){},d=[],c=!1,u=!1;if("function"!=typeof e.performance.getEntries||"function"!=typeof e.performance.mark){for("function"==typeof e.performance.getEntries&&"function"!=typeof e.performance.mark&&(u=!0),e.performance.userTimingJsPerformanceTimeline=!0,i=["webkit","moz"],r=["getEntries","getEntriesByName","getEntriesByType"],t=0;t<r.length;t++)for(n=0;n<i.length;n++)o=i[n]+r[t].substr(0,1).toUpperCase()+r[t].substr(1),"function"==typeof e.performance[o]&&(e.performance[r[t]]=e.performance[o],e.performance.userTimingJsPerformanceTimelinePrefixed=!0);s=function(e){d.push(e),"measure"===e.entryType&&(c=!0)};var p=function(){c&&(d.sort(function(e,t){return e.startTime-t.startTime}),c=!1)};if(l=function(e,n){for(t=0;t<d.length;)d[t].entryType!==e||"undefined"!=typeof n&&d[t].name!==n?t++:d.splice(t,1)},"function"!=typeof e.performance.getEntries||u){var f=e.performance.getEntries;e.performance.getEntries=function(){p();var t=d.slice(0);return u&&f&&(Array.prototype.push.apply(t,f.call(e.performance)),t.sort(function(e,t){return e.startTime-t.startTime})),t}}if("function"!=typeof e.performance.getEntriesByType||u){var m=e.performance.getEntriesByType;e.performance.getEntriesByType=function(n){if("undefined"==typeof n||"mark"!==n&&"measure"!==n)return u&&m?m.call(e.performance,n):[];"measure"===n&&p();var i=[];for(t=0;t<d.length;t++)d[t].entryType===n&&i.push(d[t]);return i}}if("function"!=typeof e.performance.getEntriesByName||u){var h=e.performance.getEntriesByName;e.performance.getEntriesByName=function(n,i){if(i&&"mark"!==i&&"measure"!==i)return u&&h?h.call(e.performance,n,i):[];"undefined"!=typeof i&&"measure"===i&&p();var r=[];for(t=0;t<d.length;t++)("undefined"==typeof i||d[t].entryType===i)&&d[t].name===n&&r.push(d[t]);return u&&h&&(Array.prototype.push.apply(r,h.call(e.performance,n,i)),r.sort(function(e,t){return e.startTime-t.startTime})),r}}}if("function"!=typeof e.performance.mark){for(e.performance.userTimingJsUserTiming=!0,i=["webkit","moz","ms"],r=["mark","measure","clearMarks","clearMeasures"],t=0;t<r.length;t++)for(n=0;n<i.length;n++)o=i[n]+r[t].substr(0,1).toUpperCase()+r[t].substr(1),"function"==typeof e.performance[o]&&(e.performance[r[t]]=e.performance[o],e.performance.userTimingJsUserTimingPrefixed=!0);var v={};"function"!=typeof e.performance.mark&&(e.performance.mark=function(t){var n=e.performance.now();if("undefined"==typeof t)throw new SyntaxError("Mark name must be specified");if(e.performance.timing&&t in e.performance.timing)throw new SyntaxError("Mark name is not allowed");v[t]||(v[t]=[]),v[t].push(n),s({entryType:"mark",name:t,startTime:n,duration:0})}),"function"!=typeof e.performance.clearMarks&&(e.performance.clearMarks=function(e){e?v[e]=[]:v={},l("mark",e)}),"function"!=typeof e.performance.measure&&(e.performance.measure=function(t,n,i){var r=e.performance.now();if("undefined"==typeof t)throw new SyntaxError("Measure must be specified");if(!n)return void s({entryType:"measure",name:t,startTime:0,duration:r});var o=0;if(e.performance.timing&&n in e.performance.timing){if("navigationStart"!==n&&0===e.performance.timing[n])throw new Error(n+" has a timing of 0");o=e.performance.timing[n]-e.performance.timing.navigationStart}else{if(!(n in v))throw new Error(n+" mark not found");o=v[n][v[n].length-1]}var a=r;if(i)if(a=0,e.performance.timing&&i in e.performance.timing){if("navigationStart"!==i&&0===e.performance.timing[i])throw new Error(i+" has a timing of 0");a=e.performance.timing[i]-e.performance.timing.navigationStart}else{if(!(i in v))throw new Error(i+" mark not found");a=v[i][v[i].length-1]}var l=a-o;s({entryType:"measure",name:t,startTime:o,duration:l})}),"function"!=typeof e.performance.clearMeasures&&(e.performance.clearMeasures=function(e){l("measure",e)})}"undefined"!=typeof define&&define.amd?define([],function(){return e.performance}):"undefined"!=typeof module&&"undefined"!=typeof module.exports&&(module.exports=e.performance)}("undefined"!=typeof window?window:void 0),/*!
 * IframeClient v0.0.5
 * Copyright 2015, Vox Media
 * Released under MIT license
 */
function(e,t){var n={debug:!1,create:function(n,i){return t(this,n,i,e)},isInIframe:function(){try{return e.parent&&e.self!==e.top}catch(t){return!0}},error:function(e){if(this.debug)throw e}};"object"==typeof module&&module.exports?module.exports=n:e.IframeClient=n}(window,function(e,t,n,i){function r(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}var o=r()+r()+"-"+r()+"-"+r()+"-"+r()+"-"+r()+r()+r(),a="@app",s=t||"xframe",l="@res",d=200,c=[],u={},p={},f=0,m=null,h=null;return{host:n||"*",get id(){return o},src:function(e){return"string"==typeof e&&(e=document.querySelector(e)),e&&e instanceof Element&&e.contentWindow&&(e=e.contentWindow),e&&"function"==typeof e.postMessage?e:null},post:function(t,n,i){if(t=this.src(t),!t||!n)return e.error("invalid post");var r="string"==typeof n?{message:n}:n;if(void 0!==i&&(r.value=i),r.message){r[a]=s;try{t.postMessage(JSON.stringify(r),this.host)}catch(o){e.error(o)}}},request:function(t,n,i,r,a){function s(){var e=!1;for(var t in u)if(u.hasOwnProperty(t)){var n=u[t];n.attempts++<n.timeout/d?(l.post(n.src,n.data),e=!0):l.end(t,new Error("request timeout"))}m=e?setTimeout(s,d):null}if(t=this.src(t),!t||!n)return e.error("invalid request");var l=this,c=o+"-"+("0000"+f++).slice(-4),p=u[c]={timeout:a||15e3,attempts:0,src:t,cb:r,data:{message:n,value:i,id:c}};return m?this.post(t,p.data):s(),c},end:function(e,t){var n=e.id||e,i=t&&t.abort;if(u.hasOwnProperty(n)){var r=u[n];delete u[n],i||"function"!=typeof r.cb||r.cb(t||null,e.value)}},on:function(e,t,n){return c.push({message:e,fn:t,ctx:n}),this},listen:function(){function e(e,t){for(var n,i=0;i<c.length;i++){var r=c[i];r.message===t.message&&(n=r.fn.call(r.ctx,e,t.value))}return n}if(!h){var t=this;h=function(n){var i,r="*"===t.host||String(n.origin).indexOf(t.host)>=0;if(r&&/^\{.*\}$/.test(n.data))try{i=JSON.parse(n.data)}catch(o){i=null}if(r&&i&&i[a]===s)if(i.id){var d=i.message===l;d&&u.hasOwnProperty(i.id)?t.end(i):d||p.hasOwnProperty(i.id)||(p[i.id]=!0,t.post(n.source,{message:l,value:e(n,i)||"success",id:i.id}))}else e(n,i)},i.addEventListener("message",h)}return this},stopListening:function(){return h&&(i.removeEventListener("message",h),h=null),this},dispose:function(){clearInterval(m),this.stopListening()}}}),function(e){function t(e){return new n(e)}function n(e){if(!i)throw"volume is not installed";this.el=i.src(e)}var i,r={production:"http://volume.vox-cdn.com",sandbox:"http://volume-staging.vox-cdn.com",development:"http://localhost:4000"};t.embedHost=r[Chorus.Context.environment],t.selectAllEmbeds=function(){return document.querySelectorAll('iframe[src^="'+this.embedHost+'/embed"]')},t.install=function(e){e&&(this.embedHost=e);var n,r=(this.selectAllEmbeds(),document.querySelectorAll(".volume-video"));for(i?i.host=this.embedHost:i=IframeClient.create("volume",this.embedHost).on("analytics",function(e,n){t.reportEvent(n)}).on("pauseOthers",function(e,n){t.postToAll("pause",null,e.source)}).on("host",function(e,t){return{url:location.href,origin:location.origin,title:document.title,api:!0}}).listen(),n=0;n<r.length;n+=1)this.embedVideo(r[n]);return this},t.uninstall=function(){i&&(i.dispose(),i=null)},t.reportEvent=function(e){Chorus.Analytics.event(e)},t.embedVideo=function(e){var t=e.getAttribute("data-volume-uuid");if(t){var n={placement:e.getAttribute("data-volume-placement"),tracking:e.getAttribute("data-analytics-placement"),player_type:e.getAttribute("data-volume-player-choice"),start_time:e.getAttribute("data-volume-start-time")},i=String(e.getAttribute("data-volume-autoplay"));("1"===i||"true"===i)&&(n.autoplay=!0);var r=Object.keys(n).filter(function(e){return void 0!==n[e]}).map(function(e){return e+"="+encodeURIComponent(n[e])});e.className=e.className.replace(/volume-video|p-scalable-video/g,"")+" p-scalable-video",e.innerHTML='<iframe src="'+this.embedHost+"/embed/"+t+"?"+r.join("&")+'" frameborder="0" allowfullscreen></iframe>'}},t.postToAll=function(e,t,n){for(var r=this.selectAllEmbeds(),o=0;o<r.length;o++){var a=i.src(r[o]);a!==n&&i.post(a,e,t)}},n.prototype={play:function(e){var t="play";return e&&e.request?this.request(t):this.post(t)},pause:function(e){var t="pause";return e&&e.request?this.request(t):this.post(t)},post:function(e,t){return i&&i.post(this.el,e,t),this},request:function(e,t,n){return i&&i.request(this.el,e,t,n),this}},jQuery(document).ready(function(){e.volume=t.install()})}(this);var Volume=Volume||{};Volume.Config=function(e){function t(e){if(0!==Object.keys(e).length){l=e.configs;var t=Util.UserAgentProfiler;if(t.isMobile())var n="mobile";else if(t.isTablet())var n="tablet";else var n="desktop";var i=e.device[n];i&&(s=i)}}function n(e){return"undefined"!=typeof s&&s.hasOwnProperty(e)?s[e]:void 0}function i(e){var t=n(e);if("undefined"!=typeof t)return t.preferred}function r(e,t){var i=n(e);if("undefined"!=typeof i){var r=t||i.preferred,o=i[r];return o?l[o]:void 0}}function o(e){"function"==typeof e?d=e:"undefined"==typeof e&&d()}function a(e){"undefined"!=typeof e&&(t(e),Volume.Config.ready())}var s,l,d=function(){};return{init:a,ready:o,placementConfig:r,preferredPlacementPlayer:i}}(jQuery),jQuery(function(){Volume.Config.init(window.volume_profile)});var Volume=Volume||{};Volume.Player=function(e){function t(){var t=e(i);t.each(function(t,i){var r=e(i),o=r.attr("id");"undefined"==typeof r.data("volume-uuid")&&n(o)})}function n(t){var n=e("#"+t),i=n.data("volume-id"),r=(n.data("volume-placement"),n.data());"undefined"!=typeof r&&(r.autoplay=r.volumeAutoplay),"undefined"!=typeof t&&"undefined"!=typeof i&&Chorus&&Chorus.VideoContext&&Chorus.VideoContext.createVolumePlayer(t,i,r)}var i=".volume-video:not(.prevent-init)";return{init:t,create:n}}(jQuery),Volume.Config.ready(function(){Volume.Player.init()});var Chorus=Chorus||{};!function(e){function t(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];o[n]=function(){return console.log('[VideoContext]: The "'+n+'" method is deprecated. Please use "'+e+'" instead.'),o[e].apply(o,arguments)}}}function n(){function e(e){return function(){for(var t in o.players)"function"==typeof o.players[t][e]&&o.players[t][e]()}}n.init||(n.init=!0,jQuery(document).on("pause",e("suspend")).on("resume",e("resume")).find("head").append('<script src="https://resources.amazonwebapps.com/v1/latest/Amazon-Web-App-API.min.js" async></script>'))}var i="viewedVideos",r=1e5,o=Chorus.VideoContext={videos:{},players:{},getVideo:function(e){return this.videos[e]||null},getVideoById:function(e){for(var t in this.videos)if(this.videos[t].id===e)return this.videos[t]},addPlacementForId:function(t,n){var i=this.getVideoById(t);i&&(i=e.extend({},i),i.placement=n,this.addVideo(i))},addVideo:function(e){e instanceof Array==0&&(e=[e]);for(var t=0;t<e.length;t++){var n=e[t];n.preview_urls=n.preview_urls||{},n.provider_video_data=n.provider_video_data||{},n.provider_video_id=n.provider_video_id||"",n.placement=n.placement||null,n.type=n.provider_video_type=n.provider_video_type||"other",n.title=n.title||"No Title",delete n.hasViewport,this.videos[n.placement||n.id]=n}return this},addVolumeVideo:function(e){e instanceof Array==0&&(e=[e]);for(var t=0;t<e.length;t++){var n=e[t];this.videos[n.id]=n}return this},createVolumePlayer:function(t,i,r){var o=this.getVideo(i);if(o){for(var a=e("#"+t),s=a.data("volume-placement"),l=r.volumePlayerChoice,d=Volume.Config.preferredPlacementPlayer(s),c=["ooyala","youtube","brightcove"],u=l||d,p=o[u+"_id"],f=0;null==p&&f<c.length;f++)u=c[f],p=o[u+"_id"];if(null!=p){var r=e.extend(Volume.Config.placementConfig(s,u),r),m={ooyala:OoyalaWrapper,youtube:YoutubeWrapper,brightcove:BrightcoveWrapper,embed:EmbedWrapper}[u];if(m){var h,v=a.attr("id");m!==BrightcoveWrapper&&(v=a.attr("id")+"-target",h='<div id="'+v+'"></div>'),this.destroyPlacement(v),a.addClass("p-scalable-video"),a.append(h),this.players[i]=new m(v,o,r),this.createViewport(v,i,r)}n()}}},addOoyalaVideo:function(e,t,n){var i={id:"ooyala"+Object.keys(this.videos).length,provider_video_id:e,provider_video_type:"ooyala",placement:n,title:t};return this.addVideo(i),i.id},destroyPlayer:function(e){var t=this.players[e];t&&"function"==typeof t.destroy&&t.destroy(),delete this.players[e]},destroyAllPlayers:function(){for(var e in this.players)this.destroyPlayer(e)},destroyPlacement:function(e){for(var t in this.players){var n=this.players[t];if(n.elementId===e)return this.destroyPlayer(t)}},createPlayer:function(e,t,i){i=i||{};var r=this.getVideo(t);if(r){var o={brightcove:BrightcoveWrapper,ooyala:OoyalaWrapper,youtube:YoutubeWrapper,embed:EmbedWrapper}[r.type];o&&(this.destroyPlacement(e),this.players[t]=new o(e,r,i),this.createViewport(e,t,i)),n()}},createViewport:function(t,n,i){if(i=i||{},!i.disableViewport){var r=this.getVideo(n),o=this;if(r&&!r.hasViewport){r.hasViewport=!0,"string"==typeof t&&(t=e("#"+t));var a=this.formatVideoEvent("view",r,t,function(){"ooyala"===r.type&&o.addViewedVideo(r)});Chorus.Analytics.trackElementView(t,a)}}},createViewportProxy:function(t,n,i){var r="data-analytics-placement",o=e(n).attr(r,e(t).attr(r));return this.createViewport(o,i)},createViewportGroup:function(t,n,i){"function"==typeof n&&(i=n,n=null),n=n||"data-placement",e(t).each(function(){var t=e(this);Chorus.Analytics.onElementView(t,function(){var e=t.find("["+n+"]").map(function(){return this.getAttribute(n)});o.trackPlacementsInViewport(e),"function"==typeof i&&i()})})},trackPlacementsInViewport:function(e){for(var t=0;t<e.length;t++){var n=this.getVideo(e[t]);n&&!n.hasViewport&&(n.hasViewport=!0,Chorus.Analytics.event(this.formatVideoEvent("view",n)))}},formatVideoEvent:function(t,n,i,r){var o=n.placement;!o&&i&&(o="data-analytics-placement",i=e("string"==typeof i?"#"+i:i),o=i.closest("["+o+"]").attr(o));var a="embed"===n.type,s=a?n.provider_video_id.replace(/.*embed\/([^"']+).*/,"$1"):n.id;return{eventCategory:a?"videotemp":"video",eventAction:[n.type||"volume",t,o||"other"].join(":"),eventLabel:[n.title,s].join(" | "),nonInteraction:"view"===t,eventCallback:r}},getViewedVideos:function(){return Chorus.Modernizr.localstorage?JSON.parse(localStorage.getItem(i)||"[]"):[]},addViewedVideo:function(e){var t=this.getViewedVideos();t.unshift(e),Chorus.Modernizr.localstorage&&localStorage.setItem(i,JSON.stringify(t.slice(0,6)))},findUnviewedVideo:function(e,t){var n=this.getViewedVideos(),i={};n.push(t||{}),n.forEach(function(e){e.id&&(i[e.id]=1),e.provider_video_id&&(i[e.provider_video_id]=1)});for(var r=0;r<e.length;r++){var o=e[r];if(!i[o.id]&&!i[o.provider_video_id])return o}return e[0]}};t("addVideo","addVideos","addChorusVideos"),t("addOoyalaVideo","addCustomVideo","addVideoFromOoyalaIdWithTitle"),o.Wrapper={$el:null,elementId:"",meta:{},options:{},player:null,played:!1,destroy:function(){},suspend:function(){},resume:function(){},pub:function(e,t){var n=Chorus.EventDispatcher;n&&n.publish(e,t||{player:this.player})},perfMark:function(){var e=window.performance;e&&e.mark&&e.mark.apply(e,arguments)},perfMeasure:function(e){var t=window.performance;if(t&&t.measure){t.measure.apply(t,arguments);var n=t.getEntriesByName(e),i=n[n.length-1],o=Math.floor(i.duration);if(o>r)return;var a=[this.meta.type,e].join(":"),s=[this.meta.title,this.meta.id].join(" | ");Chorus.Analytics.event("video",a,s,o,!0)}},perfLoadStart:function(){"undefined"==typeof BOOMR||this._timer||(this._timer=BOOMR.requestStart("tag"))},perfLoadComplete:function(){this._timer&&(this._timer.loaded(),delete this._timer)},markAsViewed:function(e){(!e||this.options.setPlayedVideos)&&o.addViewedVideo(this.meta)},formatEvent:function(e,t){return o.formatVideoEvent(e,this.meta,this.$el,t)}}}(jQuery),BrightcoveWrapper.prototype=jQuery.extend({},Chorus.VideoContext.Wrapper,{THUMB_FALLBACK:"http://assets.volume.voxmedia.com/static-images/default-thumb.jpg",insertVideoTag:function(e){var t=this.getVideoClass(),n='<video class="video-js '+t+'"';n+=' id="brightcove_'+this.meta.id+'"',n+=' data-player="'+this.options.player_id+'"',n+=' data-account="'+this.options.account_id+'"',n+=' data-embed="default"',n+="></video>",jQuery(n).appendTo(e)},getVideoClass:function(){var e=[Chorus.Context.network_slug];return"true"===this.options.hideAdOverlay&&e.push("hide-ad-overlay"),"true"===this.options.hideAdCountdown&&e.push("hide-ad-countdown"),e.join(" ")},setupPlayer:function(e){var t=this;videojs("brightcove_"+t.meta.id).ready(function(){var n=this,i=t.getEmbedCode(),r=function(){this.currentTime()>0&&(this.off("timeupdate",r),t.perfMark("playbackStart"),t.perfMeasure("ttff","playbackRequest","playbackStart"))};t.player=n,t.options.onCreate(),"true"==t.options.enableSocialSharing&&"function"==typeof this.social&&n.social({title:t.meta.title,displayAfterVideo:!0,description:t.meta.description,services:{facebook:!0,twitter:!0,pinterest:!1,tumblr:!1,linkedin:!1,google:!1}}),n.preload("metadata"),e.autoplay?n.autoplay(!0):null!=t.meta.brightcove_thumbnail?n.poster(t.meta.brightcove_thumbnail):n.poster(t.THUMB_FALLBACK),this.one("loadedmetadata",function(e){t.perfMark("brightcoveReady"),t.perfMeasure("loadtime","brightcoveInitializeStart","brightcoveReady")}),this.one("firstplay",function(e){t.perfMark("playbackRequest"),t.options.onPlay(),Chorus.Analytics.event(t.formatEvent("play")),this.on("timeupdate",r)}),this.one("error",function(e){console.log("Brightcove: error"),console.log(e),Chorus.Analytics.event(t.formatEvent("error"))}),i.indexOf("onceux.unicornmedia.com")>=0?n.onceux({metadataUri:i,contentHeaders:!0}):n.src({src:i})})},getEmbedCode:function(){var e=this.options,t=this.meta;if(null!==e.applicationId&&null!==e.deliveryType&&null!==e.fileType&&null!==e.extension){var n="0c2129c5-42b8-49e0-aa4c-f560c7bc0ba7",i="",r=["http://onceux.unicornmedia.com/now/ads/vmap",e.deliveryType,e.fileType,n,e.applicationId,t.brightcove_uuid,"content."+e.extension].join("/");return null!==t.brightcove_query_params&&null!==e.umoprofiles?i=t.brightcove_query_params+"&umoprofiles="+e.umoprofiles:null!==e.umoprofiles?i="?umoprofiles="+e.umoprofiles:null!==t.brightcove_query_params&&(i=t.brightcove_query_params),r+i}return t.brightcove_id},destroy:function(){this.player&&this.player.dispose()},getPlayerUrl:function(e){var t=["//players.brightcove.net",e.account_id,e.player_id+"_default","index.min.js"];return t.join("/")}}),OoyalaWrapper.prototype=jQuery.extend({},Chorus.VideoContext.Wrapper,{destroy:function(){this.player&&this.player.destroy()},suspend:function(){this.player&&(this.suspendState=this.player.getState(),this.player.pause())},resume:function(){var e=this.suspendState;!this.player||"playing"!==e&&"buffering"!==e||(this.player.play(),this.suspendState=null)},getOoyalaParams:function(e){for(var t=["//player.ooyala.com/v3/",e.player_id,"?"],n=["namespace","platform","version","tweaks"],i=0;i<n.length;i++){var r=n[i];e.hasOwnProperty(r)&&t.push(r,"=",e[r],"&")}return t.join("")}}),YoutubeWrapper.initQueue=[],YoutubeWrapper.prototype=jQuery.extend({},Chorus.VideoContext.Wrapper,{destroy:function(){this.player&&this.player.destroy()},suspend:function(){this.player&&(this.suspendState=this.player.getPlayerState(),this.player.stopVideo())},resume:function(){var e=this.suspendState;!this.player||e!==YT.PlayerState.PLAYING&&e!==YT.PlayerState.BUFFERING||(this.player.playVideo(),this.suspendState=null)}}),EmbedWrapper.prototype=jQuery.extend({},Chorus.VideoContext.Wrapper,{destroy:function(){this.$el.empty()}});var Chorus=Chorus||{};Chorus.Video=Chorus.Video||{},Chorus.Video.youtubeApiLoaded=!1,Chorus.Video.loadYoutubeApi=function(){jQuery.getScript("//www.youtube.com/iframe_api"),Chorus.Video.youtubeApiLoaded=!0},Chorus.Video.wrapVideoIframe=function(){var e=jQuery,t=e(this),n="",i=t.attr("src");if(!t.parent().hasClass("chorus-video-embed")&&!t.parent().attr("data-volume-uuid")){if(!i||!/youtube|livestream|vimeo|vine|hulu|dailymotion|instagram/.test(i))return!0;/hulu\.com/.test(i)?(t.attr("width","100%"),t.attr("height","100%")):/instagram\.com/.test(i)?n=" instagram":/vine\.co/.test(i)&&(n=" vine"),t.attr("src",i),t.wrap('<div class="video-wrap'+n+'"></div>')}},Chorus.Video.fixLegacyOoyalaPlayer=function(){var e=jQuery;e("div[id*=ooyalaPlayer]").each(function(){e(this).css({height:"100%",width:"100%"})})},Chorus.Video.playInViewport=function(e){var t=500,n=[],i=[];e.each(function(){this.pause(),n.push(this)});var r=function(){for(var e,o=[];e=n.pop();)Util.inViewport(e)?(e.play(),i.push(e)):o.push(e);for(n=o,o=[];e=i.pop();)Util.inViewport(e)?o.push(e):(e.pause(),n.push(e));i=o,setTimeout(r,t)};r()},Chorus.Video.autoplay=!1,Chorus.Video.checkForAutoplay=function(){return window.history.length<=1?!1:Chorus.Video.autoplay?!0:Util.isReferrerCurrentDomain()&&jQuery("body").hasClass("video-entry")&&Util.UserAgentProfiler.isDesktop()},Chorus.Video.init=function(e){e=e||{};var t=jQuery,n=e.callback;e=t.extend({checkForExistingPlayer:!1},e),Chorus.Video.fixLegacyOoyalaPlayer(),t(".chorus-video-embed").each(function(i,r){if(!e.checkForExistingPlayer||!t(r).hasClass("chorus-video-player-loaded")){var o=t.extend({},e,{autoplay:0===i?Chorus.Video.checkForAutoplay():!1,callback:function(e){Chorus.VideoContext.ooyalaPlayer=e,t(r).addClass("chorus-video-player-loaded"),Chorus.EventDispatcher.publish("ooyalaPlayerLoaded",{ooyalaPlayer:e}),"function"==typeof n&&n.call(r,e)}});Chorus.VideoContext.createPlayer(r.id,t(r).data("chorus-video-id"),o)}})},window.jQuery&&jQuery(function(){Chorus.Video.init()});