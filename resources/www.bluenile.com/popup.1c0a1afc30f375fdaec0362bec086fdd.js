webpackJsonp([97],{0:function(e,t,a){"use strict";function u(e){return e&&e.__esModule?e:{"default":e}}function o(){C["default"].show((0,f["default"])("#popup")),(0,f["default"])("#popup .non-email-section").hide(),n()}function l(){var e,t;for(t=1;31>=t;t++)e=10>t?"0"+t:t,(0,f["default"])("#popup .day").append((0,f["default"])("<option></option>").attr("value",t).text(t)),(0,f["default"])("#voluntaryPopup .day").append((0,f["default"])("<option></option>").attr("value",t).text(t));for(t=1996;t>=1894;t--)(0,f["default"])('#popup [name="birthYear"]').append((0,f["default"])("<option></option>").attr("value",t).text(t)),(0,f["default"])('#voluntaryPopup [name="birthYear"]').append((0,f["default"])("<option></option>").attr("value",t).text(t));var a=(0,f["default"])('[name="weddingYear"]');for(t=2024;t>=1914;t--)a.append((0,f["default"])("<option></option>").attr("value",t).text(t));(0,f["default"])(".non-email-section").show(),(0,f["default"])(".popup-agree").show(),(0,f["default"])(".popup-submit").show(),(0,f["default"])(".sweepstakes-footer").show()}function n(){(0,f["default"])("#popup").hasClass("sweepsPopup")||(0,f["default"])("#popup").hasClass("webroomPopup")?(h["default"].incrementSweepsCount(),h["default"].setSweepLastShownToNow(),b["default"].sawSweepstakesPopUp()):(0,f["default"])("#voluntaryPopup").length?(h["default"].incrementSweepsCount(),h["default"].setSweepLastShownToNow(),b["default"].sawSweepstakesPopUp()):(0,f["default"])("#popup").hasClass("uaePopup")?h["default"].setUAEPopup():(0,f["default"])("#popup").hasClass("chinaPopup")?h["default"].setChinesePopupShown():(0,f["default"])("#popup").hasClass("mexicoPopup")?h["default"].setMEXPopupShown():(0,f["default"])("#popup").hasClass("emailPopup")&&h["default"].setEmailPopupShown()}function r(){h["default"].killSweeps()}function d(){return g["default"].emailCaptured(),C["default"].show((0,f["default"])("#popup-thank-you"))}function p(){var e=(0,f["default"])("#popup .email").val(),t=(0,f["default"])("#popup .gender").val(),a=(0,f["default"])('#popup [name="birthMonth"]').val(),u=(0,f["default"])('#popup [name="birthDay"]').val(),o=(0,f["default"])('#popup [name="birthYear"]').val(),l=(0,f["default"])("#popup .marital-status").val(),n=(0,f["default"])('#popup [name="weddingMonth"]').val(),r=(0,f["default"])('#popup [name="weddingDay"]').val(),d=(0,f["default"])('#popup [name="weddingYear"]').val(),p=(0,f["default"])("#popup .zip").val(),i=!0,s=(0,f["default"])("#popup .product-set-code").val(),c=(0,f["default"])("#popup .language-code").val(),h=(0,f["default"])("#popup .country-code").val(),v=(0,f["default"])("#popup .currency-code").val();return _["default"].Email.isValid(e)?U.removeErrorField((0,f["default"])(".email-section")):(i=!1,U.setErrorField((0,f["default"])(".email-section"))),(0,f["default"])("#popup .gender-section.required").length&&""==t?(U.setErrorField((0,f["default"])(".gender-section")),i=!1):U.removeErrorField((0,f["default"])(".gender-section")),!(0,f["default"])("#popup .birthday-section.required").length||0!==a.length&&0!==u.length&&0!==o.length?U.removeErrorField((0,f["default"])(".birthday-section")):(U.setErrorField((0,f["default"])(".birthday-section")),i=!1),(0,f["default"])("#popup .marital-status-section.required").length&&""==l?(U.setErrorField((0,f["default"])(".marital-status-section")),i=!1):U.removeErrorField((0,f["default"])(".marital-status-section")),(0,f["default"])("#popup #agree-box").is(":checked")?(0,f["default"])("#popup #agree-label").removeClass("error-message-color"):((0,f["default"])("#popup #agree-label").addClass("error-message-color"),i=!1),0===s.length?(U.setErrorField((0,f["default"])(".product-set-code")),i=!1):U.removeErrorField((0,f["default"])(".product-set-code")),0===c.length?(U.setErrorField((0,f["default"])(".language-code")),i=!1):U.removeErrorField((0,f["default"])(".language-code")),0===h.length?(U.setErrorField((0,f["default"])(".country-code")),i=!1):U.removeErrorField((0,f["default"])(".country-code")),0===v.length?(U.setErrorField((0,f["default"])(".currency-code")),i=!1):U.removeErrorField((0,f["default"])(".currency-code")),(0,f["default"])("#popup .zip-section.required").length&&0===p.length?(i=!1,U.setErrorField((0,f["default"])(".zip-section"))):U.removeErrorField((0,f["default"])(".zip-section")),("Engaged"===l||"Married"===l)&&(!(0,f["default"])('#popup [name="weddingMonth"]').length||0!==n.length&&0!==r.length&&0!==d.length?U.removeErrorField((0,f["default"])(".wedding-date-section")):(U.setErrorField((0,f["default"])(".wedding-date-section")),i=!1)),i}function i(){return C["default"].show((0,f["default"])("#popup-submit-error"))}Object.defineProperty(t,"__esModule",{value:!0});var s=a(7),f=u(s),c=a(55),h=u(c),v=a(47),g=u(v),m=a(3),w=u(m),y=a(325),b=u(y),P=a(44),E=u(P),S=a(30),C=u(S),k=a(31),_=u(k),T=a(49),F=u(T),V=a(2),O=u(V),M=null,N=function(e){f["default"].ajax({type:"POST",url:O["default"].buildServiceEndpointUrl("enter-sweepstakes/jewelry"),data:M+"&entryType="+e})};(0,f["default"])(window).load(function(){(0,f["default"])("#voluntaryPopup").length?((0,f["default"])("#voluntaryPopup").appendTo(document.body),(0,f["default"])("#voluntaryPopup").slideToggle(),h["default"].setSweepLastShownToNow(),h["default"].setPopoverTrack((0,f["default"])("#voluntaryPopup").data("popover-track"))):(0,f["default"])("#popup").length&&((0,f["default"])(".bigGamePopup").length||(0,f["default"])(".luna-sweeps").length?F["default"].isLargeBreakpoint()&&setTimeout(o,3e3):o())}),(0,f["default"])(".webroomPopup").length&&n(),(0,f["default"])(".email-section input").on("focus",function(e){l(),(0,f["default"])(".email-section input").off("focus")}),(0,f["default"])(".tabs > [data-tabname]").on("click",function(e){e.preventDefault();var t,a=(0,f["default"])(this);a.hasClass("active")||(t=(0,f["default"])(this).data("tabname"),(0,f["default"])("#popup").find("li[data-tabname]").removeClass("active").filter("[data-tabname="+t+"]").addClass("active"))}),(0,f["default"])("#popup .product-set-code").val(w["default"].productSet),(0,f["default"])("#popup .language-code").val(w["default"].languageCode),(0,f["default"])("#popup .country-code").val(w["default"].countryCode),(0,f["default"])("#popup .currency-code").val(w["default"].currencyCode),(0,f["default"])("#voluntaryPopup .product-set-code").val(w["default"].productSet),(0,f["default"])("#voluntaryPopup .language-code").val(w["default"].languageCode),(0,f["default"])("#voluntaryPopup .country-code").val(w["default"].countryCode),(0,f["default"])("#voluntaryPopup .currency-code").val(w["default"].currencyCode),(0,f["default"])(".bn-modal").on("click",".close",function(e){return e.preventDefault(),C["default"].hide((0,f["default"])(this).closest(".bn-modal"))}),(0,f["default"])(".bn-select.marital-status").on("change",function(){var e=(0,f["default"])(this).val();"Engaged"===e||"Married"===e?(0,f["default"])(".wedding-date-section").show():(0,f["default"])(".wedding-date-section").hide()}),(0,f["default"])("#sweepstakes-submit-error").on("click",".close",function(e){return e.preventDefault(),C["default"].hide((0,f["default"])("#sweepstakes-submit-error"))});var x=(0,f["default"])("#sweepstakes-thank-you");x.on("click",".close",function(e){return e.preventDefault(),C["default"].hide((0,f["default"])("#sweepstakes-thank-you"))}),x.on("click",".facebook-entry",function(e){return N("FACEBOOK"),window.open(this.href)}),x.on("click",".pinterest-entry",function(e){return N("PINTEREST"),window.open(this.href)}),x.on("click",".twitter-entry",function(e){return e.preventDefault(),N("TWITTER"),window.open(this.href)}),x.on("click",".google-plus-entry",function(e){return e.preventDefault(),N("GOOGLE"),window.open(this.href)});var L=function(e){e.find(".error").css("display","inline-block"),e.find(".field").removeClass("field").addClass("error-field")},j=function(e){e.find(".error").css("display","none"),e.find(".error-field").removeClass("error-field").addClass("field")};(0,f["default"])("#popup-customer-acquisition").submit(function(){var e=p();return e&&(M=(0,f["default"])(this).serialize(),"1"==(0,f["default"])('#popup [name="subscribe_only"]').val()?E["default"].subscribe((0,f["default"])(this),d,i):f["default"].ajax({type:"POST",url:O["default"].buildServiceEndpointUrl("customer-acquisition"),data:M,dataType:"text",error:function(e,t,a){return C["default"].show((0,f["default"])("#popup-submit-error"))},success:function(e,t,a){return"hasSubscribed"==e?C["default"].show((0,f["default"])("#popup-has-subscribed")):C["default"].show((0,f["default"])("#popup-thank-you"))}}),C["default"].hide((0,f["default"])("#popup"))),!1}),(0,f["default"])("#popup-form").submit(function(){var e=p();return e&&(M=(0,f["default"])(this).serialize(),"1"==(0,f["default"])('#popup [name="subscribe_only"]').val()?E["default"].subscribe((0,f["default"])(this),d,i):f["default"].ajax({type:"POST",url:O["default"].buildServiceEndpointUrl("enter-sweepstakes/jewelry"),data:M,error:function(e,t,a){return C["default"].show((0,f["default"])("#popup-submit-error"))},success:function(e,t,a){return g["default"].emailCaptured(),r(),C["default"].show((0,f["default"])("#popup-thank-you"))}}),C["default"].hide((0,f["default"])("#popup"))),!1});var U={setErrorField:L,removeErrorField:j};(0,f["default"])("#voluntaryPopup .top-content").on("click",function(){(0,f["default"])("#voluntaryPopup .hiddenContent").show()}),(0,f["default"])("#voluntaryPopup .top-content .close").on("click",function(){(0,f["default"])("#voluntaryPopup").slideToggle(),n(),h["default"].setSweepLastClosedToNow()}),(0,f["default"])("#voluntaryPopup .thanks").hide();var D="";(0,f["default"])("#voluntaryPopup .popup-submit").on("click",function(){D=(0,f["default"])(this).data("gender")}),(0,f["default"])("#voluntary-popup-form").submit(function(){var e=(0,f["default"])("#voluntary-popup-form .email").val(),t=!0,a=(0,f["default"])("#voluntary-popup-form .product-set-code").val(),u=(0,f["default"])("#voluntary-popup-form .language-code").val(),o=(0,f["default"])("#voluntary-popup-form .country-code").val(),l=(0,f["default"])("#voluntary-popup-form .currency-code").val();return _["default"].Email.isValid(e)?(0,f["default"])("#voluntary-popup-form .email").removeClass("error"):(t=!1,(0,f["default"])("#voluntary-popup-form .email").addClass("error"),(0,f["default"])(".popup-description").html("Email is invalid. Please re-enter.").addClass("error")),0===a.length&&(t=!1),0===u.length&&(t=!1),0===o.length&&(t=!1),0===l.length&&(t=!1),t&&(M=(0,f["default"])(this).serialize(),"1"==(0,f["default"])('#voluntary-popup-form [name="subscribe_only"]').val()?E["default"].subscribe((0,f["default"])(this),function(){(0,f["default"])(".initial").hide(),(0,f["default"])(".thanks").show(),g["default"].pushValues({event:"popup-form-submited"}),r()},i):(f["default"].ajax({type:"POST",url:O["default"].buildServiceEndpointUrl("customer-acquisition"),data:M,error:function(e,t,a){return(0,f["default"])("#voluntaryPopup").hide()},success:function(e,t,a){return(0,f["default"])(".initial").hide(),"hasSubscribed"==e?(0,f["default"])(".hasSubscribed").show():(0,f["default"])(".thanks").show(),g["default"].emailCaptured(),r(),!0}}),C["default"].hide((0,f["default"])("#popup")))),!1}),t["default"]=U},30:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={show:function(e,t){var a;if(e&&e.hasOwnProperty("length")&&!(e.length<1))return"body"!==e[0].tagName.toLowerCase()&&e.parent().length>0&&"body"!==e.parent()[0].tagName.toLowerCase()&&e.appendTo("body"),a=$(window).scrollTop()+.1*$(window).height()+"px",e.css("top",a),t=$.extend({},{backdrop:!0},t),e.modal(t),e.modal("show")},hide:function(e){return e.modal("hide")}}},47:function(e,t,a){"use strict";function u(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(2),l=u(o),n=a(46),r=u(n),d="__googleTagManager",p={pushValues:function(e){window[d]||(window[d]=[]),window[d].push(e)},getWeakCopyOfData:function(){return JSON.parse(JSON.stringify(window[d])||"{}")},addVariable:function(e,t){try{var a=a||[];a.push(["_setCustomVar",1,e,t,3])}catch(u){}},emailCaptured:function(){this.pushValues({event:"email-captured"})}},i=JSON.parse(document.body.getAttribute("data-google-tag-manager")||"{}");p.pushValues(i);var s=l["default"].getQuerystringParameter("gtm");s=s||"yes";var f=new r["default"]("nogtm",864e5);if("no"==s?f.setValue("gtm","no"):s=f.getValue("gtm")||"yes","no"!=s){var c="GTM-SFQJ";l["default"].getBaseUrl().indexOf("dev3")>-1&&(c="GTM-K65G9F"),function(e,t,a,u,o){e[u]=e[u]||[],e[u].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var l=t.getElementsByTagName(a)[0],n=t.createElement(a),r="dataLayer"!=u?"&l="+u:"";n.async=!0,n.src="//www.googletagmanager.com/gtm.js?id="+o+r,l.parentNode.insertBefore(n,l)}(window,document,"script",d,c)}t["default"]=p},55:function(e,t,a){"use strict";function u(e){return e&&e.__esModule?e:{"default":e}}function o(){return parseInt(r.getValue("sweeps_count"),10)||0}Object.defineProperty(t,"__esModule",{value:!0});var l=a(46),n=u(l),r=new n["default"]("pop",1296e7);t["default"]={setChinesePopupShown:function(){r.setValue("china","true")},setUAEPopup:function(e){void 0===e&&(e=!0),r.setValue("uae",e)},setMEXPopupShown:function(){r.setValue("mexpop","true")},setEmailPopupShown:function(){r.setValue("emailpop","true")},incrementSweepsCount:function(){var e=o();r.setValue("sweeps_count",e+1)},killSweeps:function(){var e=o();r.setValue("sweeps_count",e+10)},setSweepLastShownToNow:function(){var e=new Date,t=e.toISOString().slice(0,10).replace(/-/g,"");r.setValue("sweeps_date",t)},setSweepLastClosedToNow:function(){var e=new Date,t=e.toISOString().slice(0,10).replace(/-/g,"");r.setValue("sweeps_closed_date",t)},setPopoverTrack:function(e){r.setValue("popover_track",e)},getLegalNoticeEUCount:function(){return parseInt(r.getValue("legal_notice_eu_count"),10)||0},incrementLegalNoticeEUCount:function(){var e=this.getLegalNoticeEUCount();r.setValue("legal_notice_eu_count",e+1)}}},325:function(e,t,a){"use strict";function u(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(46),l=u(o),n=new l["default"]("bnses");t["default"]={isFirstVisit:function(){var e=n.getValue("new");return void 0===e||"true"===e},sawSweepstakesPopUp:function(){n.setValue("sswpu","true")}}}});
//# sourceMappingURL=popup.js.map