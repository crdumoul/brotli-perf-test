$(function(){$('#CatalogQuickOrder input[type="text"]').autotab({format:"alphanumeric"}).click(function(){$(this).select();});$("#egcAssociate, #searchOrderNumber, #egcAssociate").autotab({format:"alphanumeric"});$("#searchOrderNumber").autotab({format:"numeric"});if($("body").hasClass("customer-service-egc")||$("body").hasClass("customer-service-gc")){$("#message").keyup(function(n){var m=$(this).val();if(m.length>=80){$(this).val($(this).val().substr(0,80));if(n.keyCode!=8&&n.keyCode!=46){return false;}}});}$("#headSearchSubmit").click(function(m){$(".alt-error-tooltip").remove();if($.trim($("#searchText").val())==""){m.preventDefault();showSearchError($("#searchText"),"Please enter a keyword to search");}});$("#headSearchForm").on("click","#headSearchTypeAheadHolder a",function(o){o.preventDefault();var m=$.trim($("#searchText").val());var n=$(this).attr("href")+"&pSrch="+escape(m);location.href=n;});if(typeof searchSuggestObject!="undefined"){$("#searchText").endecaSearchSuggest(searchSuggestObject);}if(typeof snapDefaultConfig!="undefined"){$("#searchText").snapAutoSuggest(snapDefaultConfig);}if($("#kiosk").length&&$("#kiosk").is(":visible")){kioskSession();}$.fn.preload=function(){this.each(function(){$("<img/>")[0].src=this;});};$("body").on("gestureend",function(m){if($(".overlay-modal").length){repositionModalForIpad();}});$("#deptMFT").keyup(function(n){if(n.keyCode==9||n.keyCode==16){return false;}var m=$(this).val();if(m.length>2){$("#effortMFT").focus().select();}});$("#effortMFT").keyup(function(n){if(n.keyCode==9||n.keyCode==16){return false;}var m=$(this).val();if(m.length>2){$("#itemMFT").focus().select();}});$("body").on("key-up","input[data-amount]",function(){var m=$(this),o=isNaN(m.val())?0:m.val(),n=isNaN(m.data("amount"))?0:m.data("amount");if(o>n){m.val(n);}});$(".mainFooter").on("click",".shopping a",function(n){var m=$(this);if(m.attr("href")==""){n.preventDefault();window.location="/gone-fishing.jsp";}});$(".site-map-group").on("click","a",function(n){var m=$(this);if(m.attr("href")==""){n.preventDefault();window.location="/gone-fishing.jsp";}});$('input[type="text"]').focus(function(){$(this).removeClass("error-field");$(this).parent().find(".error-tooltip").remove();$(this).parent().find(".alt-error-tooltip").remove();});$(document).on("click",".alt-tip-trigger",function(n){n.preventDefault();var m="/checkout/includes/fifty-one-list-items.jsp";openFBModal(m,"type:ajax; width:300; height:170;");});var g=$(".error-field");showFormErrors(g);$(document).on("blur","form .required",function(){check($(this),true);});$(document).on("focus","input, select, textarea",function(){var m=$(this);m.removeClass("error-field");if(m.hasClass("alt-error")){m.siblings().remove(".alt-error-tooltip");}else{m.siblings().remove(".error-tooltip");}if($("body").hasClass("custserv-email-us")){}else{m.data("error","");}});if($("body").hasClass("proDeal")){$("#proDeal").submit(function(m){$this=$(this);if(!$this.hasClass("skip-validation")){validateProDealsAddress($this,m,"billing");}});$("#shipToBill").click(function(){if($(this).prop("checked")){$("#shipAddress1").val($("#billAddress1").val());$("#shipAddress2").val($("#billAddress2").val());$("#shipCity").val($("#billCity").val());$("#shipState").val($("#billState").val());$("#shipZipCode").val($("#billZipCode").val());$("#shipCountry").val($("#billCountry").val());}else{$("#shipAddress1").val("");$("#shipAddress2").val("");$("#shipCity").val("");$("#shipState").val("");$("#shipZipCode").val("");$("#shipCountry").val("");}});$("#empToBill").click(function(){if($("#empToShip").prop("checked")){$("#empToShip").prop("checked",false);}if($(this).prop("checked")){$("#empAddress1").val($("#billAddress1").val());$("#empAddress2").val($("#billAddress2").val());$("#empCity").val($("#billCity").val());$("#empState").val($("#billState").val());$("#empZipCode").val($("#billZipCode").val());$("#empCountry").val($("#billCountry").val());}else{$("#empAddress1").val("");$("#empAddress2").val("");$("#empCity").val("");$("#empState").val("");$("#empZipCode").val("");$("#empCountry").val("");}});$("#empToShip").click(function(){if($("#empToBill").prop("checked")){$("#empToBill").prop("checked",false);}if($(this).prop("checked")){$("#empAddress1").val($("#shipAddress1").val());$("#empAddress2").val($("#shipAddress2").val());$("#empCity").val($("#shipCity").val());$("#empState").val($("#shipState").val());$("#empZipCode").val($("#shipZipCode").val());$("#empCountry").val($("#shipCountry").val());}else{$("#empAddress1").val("");$("#empAddress2").val("");$("#empCity").val("");$("#empState").val("");$("#empZipCode").val("");$("#empCountry").val("");}});}if($("body").hasClass("user-subscriptions")){$(".subscribe-email-link").click(function(m){m.preventDefault();showEmailSubscriptionModal($(this).data("email"));});}if($("body").hasClass("user-address-book")){$("#addresses").on("click",".delete-address",function(m){m.preventDefault();$this=$(this);var n=function(){$($this.data("addressidsubmit")).click();};showModal(null,n,"/modals/confirmation/remove-address.jsp",null,300,true,"center",null,null,null,null,null,true);});}if($("body").hasClass("user-add-address")||$("body").hasClass("checkout")){$("#addNewAddress, #bill-ship-address-checkout").submit(function(p){$this=$(this);if(!$this.hasClass("skip-validation")){var r=$.trim($("#addNewCity").val());var o=$.trim($("#addNewState").val());var m=$.trim($("#addNewZip").val());var q=$.trim($("#addNewCountry").val());if(r!=""&&o!=""&&m!=""&&q!=""){$("#av-city").val(r);$("#av-state").val(o);$("#av-zip").val(m);$("#av-country").val(q);var n=function(s){if($.trim(s)!="valid"){p.preventDefault();var u=function(){if(!$("#continueWithoutSuggestion").prop("checked")&&$("#addressSelect").val()==""){$(".address-validation-error").show();$("#addressSelect").addClass("error-field");return false;}else{$(".address-validation-error").hide();$("#addressSelect").removeClass("error-field");}if(!$("#continueWithoutSuggestion").prop("checked")){$("#addNewCity").val($("#addressSelect option:selected").attr("data-city"));$("#addNewState").val($("#addressSelect option:selected").attr("data-state"));$("#addNewZip").val($("#addressSelect option:selected").attr("data-zip"));}$this.addClass("skip-validation");$this.find('input[type="image"]').click();$this.removeClass("skip-validation");};var t=function(){$("#addressSelect").change(function(){if($("#addressSelect").val()!=""){$("#addressSelect").removeClass("error-field");$(".address-validation-error").hide();}});};showModal(null,u,null,null,500,true,"20%",t,null,s);}else{if(($("#regPwd").val()!=""||$("#regConfirmPwd").val()!="")&&$("#create-user-billing").length&&$("#addEmail").val()!=""&&!$this.hasClass("skip-createuser")){createUserFromBilling(p,$this);}}};addressValidationSubmit($("#address-validation-form"),null,n,null,null);}}else{if($("#regPwd").val()!=""&&$("#create-user-billing").length&&$("#addEmail").val()!=""&&!$this.hasClass("skip-createuser")){createUserFromBilling(p,$this);}}});}productDetailPageFunctions();$(".wishlist-item-container, #sbWishlistHolder").on("click",".share-wishlist-link",function(n){n.preventDefault();var m=shareWishlistEvents;showModal(null,null,"/modals/share/wish-list-share-form.jsp",null,610,true,"5%",m,null);});if($("body").hasClass("user-add-subscriptions")){var l=$(".print-cat");if($("#ebPrintCatalog").is(":checked")){$("#subPrintCatalog").show();l.addClass("required");}$(document).on("click","#ebPrintCatalog",function(n){var m=$(this);if(m.is(":checked")){$("#subPrintCatalog").show();l.addClass("required");showFormErrors(g);}else{$("#subPrintCatalog").hide();l.removeClass("required");showFormErrors(g);}});}if($("body").hasClass("user-login")||$("body").hasClass("user-logout")){$("form#loginForm").enableButtonCheck();}if($(".state-dropdown").length){$(".state-dropdown").on("change",function(){var m=$(this);updateCountrySelect(m);checkRegionInput();});}if($(".country-dropdown").length){$(".country-dropdown").on("change",function(){var m=$(this);
var n=m.val();if(!isCAorUS()){$(".state-dropdown").val("C6");}checkRegionInput();if(isCAorUS()||zipRequired()){$("span.zip-required").show();}else{$("span.zip-required").hide();}});}if($("body").hasClass("user-wishlist")){$(".wishlist-item-container").on("click",".error-tooltip-alt",function(m){m.preventDefault();$(this).remove();});$(".wishlist-item-container").on("click","#print-wishlist",function(m){m.preventDefault();window.print();});$(".wishlist-item-container").on("change",".wl-item-quantity",function(o){o.preventDefault();if($(".sb-loading-overlay").length){return false;}showLoadingOverlay($(".wishlist-item-container"));var n=$(this);var p=n.data("qtyid");$("#"+p).val(n.val());var m=function(){reloadWishlistItems();};submitWishlist(n,m);});$(".wishlist-item-container").on("click",".remove-item-from-wl",function(p){p.preventDefault();var o=$(this);var n=function(){o.closest("div.wishlist-item").fadeOut("slow");var q=parseInt($("span.wl-item-count").text());q--;$("span.wl-item-count").text(q);$.get("/user/gadgets/wishlist-warnings.jsp?_="+Math.random(),function(r){$(".wl-error-message-container").replaceWith(r);});};var m=function(){submitWishlist(o,n);};showModal(null,m,"/modals/confirmation/remove-item-wishlist.jsp",null,300,true,"center",null,null,null,null,null,true);});$(".wishlist-item-container").on("click","#delete-wishlist",function(p){p.preventDefault();var o=$(this);var n=function(){$(".wishlist-item-container").load("/user/gadgets/wishlist-items.jsp?_="+Math.random());};var m=function(){submitWishlist(o,n);};showModal(null,m,"/modals/confirmation/remove-item-wishlist.jsp?all=true",null,300,true,"center",null,null,null,null,null,true);});$(".wishlist-item-container").on("click",".add-item-from-wl",function(o){o.preventDefault();var n=$(this);if(n.hasClass("active-loading")){return false;}n.addClass("active-loading");var m=function(){location.href="/checkout/bag.jsp";};submitWishlist(n,m);});$(".wishlist-item-container").on("click","#add-wishlist-to-cart",function(q){q.preventDefault();var p=$(this);if(p.hasClass("active-loading")){return false;}p.addClass("active-loading");var m=p.data("formid");var n=$("#"+m);$("input.wl-sku-qty").remove();$("div.wishlist-item").each(function(){var r=$(this).find("select.wl-item-quantity").data("giftitemid");var s=$(this).find("select.wl-item-quantity").val();n.append('<input class="wl-sku-qty" type="hidden" name="'+r+'" value="'+s+'"/>');});var o=function(){location.href="/checkout/bag.jsp";};submitWishlist(p,o);});$(".wishlist-item-container").on("click",".wishlist-edit",function(m){m.preventDefault();showProductModal($(this));});$(".wishlist-item-container").on("click","#share-wishlist",function(n){n.preventDefault();var m=$(this);});}if($("body").hasClass("user-order-history")){$(".orders").load("/user/gadgets/order-history-orders.jsp");}var h=$("#mainNav"),d=$("#navFlyouts"),a={closeFlyout:function(){if(d.find('[aria-expanded="true"]').length<1){return;}h.find('a[aria-expanded="true"]').attr("aria-expanded","false");d.find('[aria-expanded="true"]').hide().attr({"aria-expanded":"false","aria-hidden":"true"});},openFlyout:function(m){if(m.attr("aria-expanded")==="true"){return;}var n=$("#"+m.attr("id").replace("nav","flyout"));a.closeFlyout();h.find("a.hovered").removeClass("hovered");if(m.hasClass("active")){m.addClass("hovered");}a.positionFlyouts(m,n);m.attr("aria-expanded","true");n.attr({"aria-expanded":"true","aria-hidden":"false"}).show();},positionFlyouts:function(s,o){var u=o.find(".f-arrow"),n=h.offset().left,t=Math.abs(n-s.offset().left),p=s.width()/2,v=s.outerWidth(),r=p-8,q=t,w=o.outerWidth();if(w+t>=n+995){r=(w-parseInt(p))-10;q=t+v-w;if(o.css("left")<0+"px"){var m=o.css("left").replace("px","");r=(w-parseInt(p))-Math.abs(m)-8;q=0;}}o.css("left",q+"px");u.css("left",r+"px");}};h.on("mouseenter","a",function(){a.openFlyout($(this));});$("#mainNav a").focus(function(){a.openFlyout($(this));}).blur(function(){a.closeFlyout();});$("#headerMid, #headerTop, #headerRail, .breadcrumbs").on("mouseenter",function(m){a.closeFlyout();});$(".nav-flyout").on("mouseleave",function(m){a.closeFlyout();});$(".ut-trigger").on("click",function(m){openUtNavWidget($(this));m.preventDefault();});$("#nav-shopby").on("hover",function(m){$("#nav-shopby").css("cursor","default");m.preventDefault();});$("#nav-shopby").on("click",function(m){m.preventDefault();});$("#nav-blog").on("click",function(n){var m=$(this).attr("href");window.open(m,"_blank");n.preventDefault();});$(".expandable h3").click(function(m){toggleAccordion(m);m.preventDefault();});$(".collapse-link").click(function(m){collapseAccordionAll();$.ajax({type:"get",url:"/xhr/set-facets-accordion.jsp?expand=false",cache:false,dataType:"text",success:function(n){}});m.preventDefault();});$(".expand-link").click(function(m){expandAccordionAll();$.ajax({type:"get",url:"/xhr/set-facets-accordion.jsp?expand=true",cache:false,dataType:"text",success:function(n){}});m.preventDefault();});if($("body").hasClass("category-page")){if($("#results-list-prd-holder").data("expandallfacets")){expandAccordionAll();}}$(".facet-select input:checkbox").on("change",function(){facetCheck($(this));});$(".customer-service-egc").on("click","#egcAssocLinks a",function(m){egcAssociateToggle(this);m.preventDefault();});if($("#egcAssociate").length&&$("#egcAssociate").val()!=""){$("#egcAssocLinks .egc-associate-num").click();}$(".order-summary-container").on("click","#btnProceedToCheckout",function(n){n.preventDefault();if($("body").hasClass("checkout-review")){var m=$(this);if(m.hasClass("active-loading")){return false;}else{m.addClass("active-loading");$(".checkout-form-submit").trigger("click");}}else{$(".checkout-form-submit").trigger("click");}});$("#checkoutHolder").on("click",".checkout-form-submit",function(m){if($("body").hasClass("checkout-review")){if($(this).hasClass("active-loading")||$(".sb-loading-overlay").length){m.preventDefault();return false;}else{if($("body").hasClass("containsCustomItems")&&!$("#customReviewCheckBox").is(":checked")){$("#customReviewCheckBox-error").show();$(this).addClass("active-loading");$("#btnProceedToCheckout").addClass("active-loading");m.preventDefault();return false;}else{$(this).addClass("active-loading");$("#btnProceedToCheckout").addClass("active-loading");}}}});$(".order-summary-container").on("click",".calculate-shipping-link",function(m){EBGLOBAL.sessionTimeout.resetTimeout();m.preventDefault();$("#calcShipTaxHolder").slideToggle("fast");});$(".order-summary-container").on("click",".os-cancel-btn",function(q){EBGLOBAL.sessionTimeout.resetTimeout();q.preventDefault();if($(".sb-loading-overlay").length){return false;}var p=$(this);var r="#shippingestimatorform234";var n=function(){reloadOrderSummary(false);};var s=function(){};var m=function(){$(".error-tooltip-alt").remove();showLoadingOverlay($(".order-summary-container"));};var o=function(t){cartError(p,t.errors[0].message);removeLoadingOverlay($(".order-summary-container"));};ajaxFormSubmit($(r),m,n,o,s);});$(".order-summary-container").on("keypress","#osZipcode",function(m){if(m.keyCode==13){m.preventDefault();$("#taxEstimatorSubmit").click();}});$(".order-summary-container").on("click","#taxEstimatorSubmit",function(r){r.preventDefault();if($(".sb-loading-overlay").length){return false;}var q=$(this);var n=validateShippingFields();if(n){$("#postal-validate-state").val($("#osStateSelect").val());$("#postal-validate-zip").val($("#osZipcode").val());var o=function(){populateEstimateShipTax();var u=function(){reloadOrderSummary(false);};var y=function(){};var t=function(){$(".error-tooltip-alt").remove();showLoadingOverlay($(".order-summary-container"));};var v=function(z){cartError(q,z.errors[0].message);removeLoadingOverlay($(".order-summary-container"));};var w="#"+q.data("formid");ajaxFormSubmit($(w),t,u,v,y);};var s=function(){};var p=function(){$(".error-tooltip-alt").remove();};var m=function(t){$("#osZipcode").addClass("error-field");showErrorToolTip($("#osZipcode"),t.errors[0].message);
};ajaxFormSubmit($("#postal-validate"),p,o,m,s,true);}});$(".order-summary-container").on("change","#osShipResult",function(q){q.preventDefault();var m=$("#osStateSelect").data("state");var n=$("#osZipcode").attr("data-zip");$("#osStateSelect").val(m);$("#osZipcode").val(n);populateEstimateShipTax();if($(".sb-loading-overlay").length){return false;}var s=$(this);var p=function(){reloadOrderSummary(false);};var o=function(){};var t=function(){$(".error-tooltip-alt").remove();showLoadingOverlay($(".order-summary-container"));};var r=function(v){cartError(s,v.errors[0].message);removeLoadingOverlay($(".order-summary-container"));};var u="#"+s.data("formid");ajaxFormSubmit($(u),t,p,r,o);});$(".order-summary-container").on("click",".os-result-edit",function(m){$("#calcShipTaxHolder").show();$("#resultShipTaxHolder").hide();m.preventDefault();});$(".chkEBFriendsHolder").on("click",".friends-info-link",function(m){m.preventDefault();showModal(null,null,"/modals/informational-guides/eb-friends-info.jsp",null,500,true,"10%",null,null);});showModal($(".msku-about-gb"),null,"/modals/pdp/pdp-about-gift-boxes.jsp",null,600,false,"10%",null,null);showModal($(".msku-about-monogram"),null,"/modals/pdp/pdp-about-monograms.jsp",null,551,false,"10%",null,null);showModal($(".gc-additional-link"),null,"/modals/informational-guides/gc-additional-info.jsp",null,680,false,"10%",null,null);$(".order-summary-container").on("click",".donation-info",function(m){m.preventDefault();showModal(null,null,"/modals/informational-guides/donation-info.jsp?skuId="+$(this).attr("data-skuid"),null,500,true,"20%",null,null);});showModal($(".egc-additional-link"),null,"/modals/informational-guides/egc-additional-info.jsp",null,680,false,"10%",null,null);$(".gc-see-larger-link").click(function(m){m.preventDefault();showModal(null,null,"/modals/informational-guides/gc-view-larger-card.jsp?skuId="+$(this).attr("data-skuid"),null,460,true,"10%",null,null);});$(".order-summary-container").on("click",".oversized-shipping",function(m){m.preventDefault();showModal(null,null,"/modals/informational-guides/oversized-shipping.jsp",null,500,true,"30%",null,null);});$(".order-summary-container").on("click",".custom-shipping",function(m){m.preventDefault();showModal(null,null,"/modals/informational-guides/custom-shipping.jsp",null,500,true,"30%",null,null);});$(".sb-item").on("click",".custom-arrives-by",function(m){m.preventDefault();showModal(null,null,"/modals/informational-guides/custom-arrives-by.jsp",null,500,true,"30%",null,null);});showModal($(".fifty-one-terms"),null,"/modals/informational-guides/fifty-one-terms.jsp",null,600,false,"15%",null,null);showModal($(".sold-out-trigger"),null,"/modals/pdp/sold-out.jsp",null,500,false,"10%",multiSkuInit,null);showModal($(".user-benefits-modal"),null,"/modals/informational-guides/user-benefits.jsp",null,500,false,"10%",null,null);showModal($(".chk-example-holder a"),null,"/modals/errors/gift-box-shipping.jsp",null,500,false,"10%",null,null);showModal($(".international-giftcard-modal-link"),null,"/modals/errors/international-giftcard-disclaimer.jsp",null,500,false,"10%",null,null);$(document).on("click",".shipping-rate-link-cart, .shipping-methods-details-link",function(p){p.preventDefault();var m="/checkout/gadgets/bag/modal-shipping-rates-us.jsp";var n=$(this).html();var o=$("#mainContentHolder").attr("class");if(o!==undefined&&(o.indexOf("International")!=-1||o.indexOf("international")!=-1)){m="/checkout/gadgets/bag/modal-shipping-rates-int.jsp?tabid=1";openFBModal(m,"type:ajax; width:580; height:600; afterItemStart: modalInit();");}else{m="/checkout/gadgets/bag/modal-shipping-rates-us.jsp?tabid=0";openFBModal(m,"type:ajax; width:560; height:575; afterItemStart: modalInit();");}});$(".cart-items-container, .checkout-review-container").on("click",".factory-shipped-modal-link",function(m){m.preventDefault();showModal(null,null,"/modals/informational-guides/factory-shipped.jsp",null,500,true,"20%",null,null);});$("#reviewInformation").on("click",".factory-shipped-modal-link",function(m){m.preventDefault();showModal(null,null,"/modals/informational-guides/factory-shipped.jsp",null,500,true,"10%",null,null);});showModal($(".shipping-modal-link"),null,"/modals/informational-guides/when-will-order-ship.jsp",null,500,false,"10%",null,null);showModal($(".privacy-modal-link"),null,"/modals/informational-guides/privacy.jsp",null,500,false,"10%",null,null);showModal($(".security-modal-link"),null,"/modals/informational-guides/security.jsp",null,500,false,"10%",null,null);showModal($(".easy-returns-modal-link"),null,"/modals/informational-guides/easy-returns.jsp",null,500,false,"20%",null,null);$(document).on("click",".estimated-tax-link",function(p){p.preventDefault();var m="/checkout/gadgets/bag/modal-taxes-us.jsp?tabid=0";var o="";var n="";o=$(".shipping-rate-link-cart").html();n=$(".shipping-methods-details-link").html();if((o!=""&&o!="null"&&o!=null&&o.toLowerCase().indexOf("international")!=-1)||(n!=""&&n!="null"&&n!=null&&n.toLowerCase().indexOf("international")!=-1)){m="/checkout/gadgets/bag/modal-taxes-int.jsp?tabid=1";openFBModal(m,"type:ajax; width:580; height:250; afterItemStart: modalInit();");}else{openFBModal(m,"type:ajax; width:560; height:350; afterItemStart: modalInit();");}});$(".order-summary-container").on("click",".country-not-listed-link",function(m){m.preventDefault();showModal(null,null,"/modals/informational-guides/tax-country-not-listed.jsp",null,700,true,"30%",null,null,null,null,null);});if(jQuery("body.category-page").index()!=-1){var j="";j+='<div id="tooltips" class="tooltip" aria-hidden="true" aria-expanded="false" aria-flowto="clear-all-link" style="display:none;position:absolute;">\n';j+='<img alt="Tooltip Arrow" src="/static/img/tip-trigger-arrow.png" class="tt-arrow">\n';j+='<ul style="padding:0 0 0 20px !important;">\n';j+='<li style="margin-bottom:15px;">Use filters to refine any assortment to meet your needs.<br></li>\n';j+='<li style="margin-bottom:15px;">Select Size Type first, then choose one or more sizes. Assortment will update after each selection.<br></li>\n';j+='<li style="margin-bottom:15px;">Click on expand or collapse to view or hide all filters; click on minus or plus signs to collapse or expand individual filters.<br></li>\n';j+="<li>Reselect filters when you begin a new search in another category.<br></li>\n";j+="</ul>\n";j+="</div>\n";jQuery("#siteContainer").append(j);jQuery("head").append('<style type="text/css">.selected{display:block !important;}.tooltip{color:#333 !important;}</style>');}$("#about-refinements").focus(function(){$("#tooltips").toggleClass("selected");var n=jQuery(this).position();var o=n.left;var m=n.top;$("#tooltips").css({left:o-100,top:m-240});$("#tooltips").attr({"aria-expanded":"true","aria-hidden":"false"});}).blur(function(){$("#tooltips").toggleClass("selected");$("#tooltips").attr({"aria-expanded":"false","aria-hidden":"true"});});startHeroSlideshow();$(".tip-trigger[title]").tooltip({"layout":'<div><img class="tt-arrow" src="/static/img/tip-trigger-arrow.png" alt="Tooltip Arrow" /></div>'});$(".tip-trigger-top[title]").tooltip({"layout":'<div id="tooltip" aria-flowto="clear-all-link"><img class="tt-arrow" src="/static/img/tip-trigger-arrow.png" alt="Tooltip Arrow" /></div>',position:"top center",offset:[-10,0]});$(".tip-trigger-bottom[title]").tooltip({"layout":'<div><img class="tt-arrow-bottom" src="/static/img/tip-trigger-arrow-top.png" alt="Tooltip Arrow" /></div>',position:"bottom center",offset:[10,0]});$("body").on("click",".size-chart-link",function(m){getSizeChartRequest(this);m.preventDefault();});$("#searchZip").on("focus",function(){$(".ut-flyout").hide();$(".ut-trigger").parent().removeClass("ut-active");$("#headSearchTypeAheadHolder .ut-flyout").show();});$(".verisign-modal-link").on("click",function(m){window.open("https://sealinfo.verisign.com/splash?form_file=fdf/splash.fdf&dn=www.eddiebauer.com&lang=en","_blank","width=515, height=515");m.preventDefault();});$("#wishlistHolder, .cart-items-container, #sbWishlistHolder, .checkout-review-container").on("mouseenter",".wl-item-zoom",function(){var n=$(this);
var m=n.data("img-zoom");wlZoomMouseenter(n,m);});$(document).click(function(n){var m=n.target;closeUtNavWidget(m,n);});$("#mainContentHolder").on("click",".back-link",function(m){window.history.back();m.preventDefault();});$("#siteContainer").on("click",".video-link",function(p){var o=$(this);var m=o.data("video");var n=o.data("fa");openYouTubeVideoModal(m,n);p.preventDefault();});initStoreLocator();$("#emailSignupForm").on("click","#emailSignupSubmit",function(m){signupEmailValidate();m.preventDefault();});if($("body").hasClass("checkout-bag")){fireUtag=false;$("#sbWishlistHolder").on("click","#print-wishlist",function(m){m.preventDefault();window.print();});$.receiveMessage(function(m){if(m.data=="loginSuccessFromCart"){addToWishlistFromLoginCart();}});if($(".scroll-to-wl").length){scrollToElement($("#sbWishlistHolder"));}$("#sbWishlistHolder").on("change",".wl-item-quantity",function(p){p.preventDefault();if($(".sb-loading-overlay").length){return false;}var o=$(this);var r=o.data("qtyid");$("#"+r).val(o.val());var n=function(){reloadBagWishList();};var q=function(){};var m=function(){$(".error-tooltip-alt").remove();showLoadingOverlay($("#sbWishlistHolder"));};submitWishlistFromCart(o,n,q,m);});$("#sbWishlistHolder").on("click",".remove-item-from-wl",function(q){q.preventDefault();if($(".sb-loading-overlay").length){return false;}var p=$(this);var o=function(){reloadBagWishList();};var r=function(){};var n=function(){$(".error-tooltip-alt").remove();showLoadingOverlay($("#sbWishlistHolder"));};var m=function(){submitWishlistFromCart(p,o,r,n);};showModal(null,m,"/modals/confirmation/remove-item-wishlist.jsp",null,300,true,"center",null,null,null,null,null,true);});$("#sbWishlistHolder").on("click","#delete-wishlist",function(q){q.preventDefault();if($(".sb-loading-overlay").length){return false;}var p=$(this);var o=function(){reloadBagWishList();};var r=function(){};var n=function(){$(".error-tooltip-alt").remove();showLoadingOverlay($("#sbWishlistHolder"));};var m=function(){submitWishlistFromCart(p,o,r,n);};showModal(null,m,"/modals/confirmation/remove-item-wishlist.jsp?all=true",null,300,true,"center",null,null,null,null,null,true);});$("#sbWishlistHolder").on("click",".add-item-from-wl",function(p){p.preventDefault();if($(".sb-loading-overlay").length){return false;}var o=$(this);var n=function(){fireUtag=true;reloadBagWishList();reloadOrderSummary(true);scrollToElement($("#sbShoppingBagHolder"));};var q=function(){};var m=function(){$(".error-tooltip-alt").remove();showLoadingOverlay($("#sbWishlistHolder"));};submitWishlistFromCart(o,n,q,m);setTimeout(function(){$("#srMessage").load("/shoprunner/srIneligibleMessage.jsp");},2000);setTimeout(function(){$("#bag-order-summary").load("/checkout/gadgets/bag/bag-order-summary.jsp");},2000);});$("#sbWishlistHolder").on("click","#add-wishlist-to-cart",function(p){p.preventDefault();if($(".sb-loading-overlay").length){return false;}var o=$(this);var n=function(){fireUtag=true;reloadBagWishList();reloadOrderSummary(true);scrollToElement($("#sbShoppingBagHolder"));};var q=function(){};var m=function(){$(".error-tooltip-alt").remove();showLoadingOverlay($("#sbWishlistHolder"));};submitWishlistFromCart(o,n,q,m);setTimeout(function(){$("#srMessage").load("/shoprunner/srIneligibleMessage.jsp");},2000);setTimeout(function(){$("#bag-order-summary").load("/checkout/gadgets/bag/bag-order-summary.jsp");},2000);});$(".empty-entire-bag").click(function(o){o.preventDefault();if($(".sb-loading-overlay").length){return false;}var n=$(this);var m=function(){var q=function(){reloadOrderSummary(true);};var t=function(){scrollToElement($("body"));};var p=function(){$(".error-tooltip-alt").remove();showLoadingOverlay($(".sb-item-container"));showLoadingOverlay($(".order-summary-container"));};var r=function(u){cartErrorRight(n,u.errors[0].message);removeLoadingOverlay($(".sb-item-container"));removeLoadingOverlay($(".order-summary-container"));};var s="#"+n.data("formid");ajaxFormSubmit($(s),p,q,r,t);};showModal(null,m,"/modals/confirmation/remove-item-bag.jsp?all=true",null,300,true,"center",null,null,null,null,null,true);});$(".cart-items-container").on("change",".sb-quantity-select",function(p){EBGLOBAL.sessionTimeout.resetTimeout();if($(".sb-loading-overlay").length){return false;}var r=$(this);var s=r.data("originalqty");var o=r.data("itemindex");var u="#"+r.data("formid");$(".qty-value_"+o).val(r.val());buildCommerceItemInputs($(u),o);var n=function(){fireUtag=true;reloadOrderSummary(true);};var m=function(){$(".created-commerce-inputs").remove();};var t=function(){$(".error-tooltip-alt").remove();showLoadingOverlay($(".sb-item-container"));showLoadingOverlay($(".order-summary-container"));};var q=function(v){if(v.maxCartItems!=null&&v.maxCartItems){showModal(null,null,"/modals/pdp/pdp-shopping-bag-full.jsp",null,500,true,"30%",null,null);}else{cartError(r,v.errors[0].message);}r.val(s);removeLoadingOverlay($(".sb-item-container"));removeLoadingOverlay($(".order-summary-container"));};ajaxFormSubmit($(u),t,n,q,m);});$(".cart-items-container").on("click",".remove-item-from-cart",function(o){EBGLOBAL.sessionTimeout.resetTimeout();o.preventDefault();if($(".sb-loading-overlay").length){return false;}var n=$(this);var p="#"+n.data("formid");if(p.indexOf("gift")==-1){}var m=function(){var r=function(){reloadOrderSummary(true);};var t=function(){};var q=function(){$(".error-tooltip-alt").remove();showLoadingOverlay($(".sb-item-container"));showLoadingOverlay($(".order-summary-container"));};var s=function(u){cartError(n,u.errors[0].message);removeLoadingOverlay($(".sb-item-container"));removeLoadingOverlay($(".order-summary-container"));};ajaxFormSubmit($(p),q,r,s,t);setTimeout(function(){$("#srMessage").load("/shoprunner/srIneligibleMessage.jsp");},2000);setTimeout(function(){$("#bag-order-summary").load("/checkout/gadgets/bag/bag-order-summary.jsp");},2000);};showModal(null,m,"/modals/confirmation/remove-item-bag.jsp",null,300,true,"center",null,null,null,null,null,true);});$(".cart-items-container").on("click",".move-item-to-wishlist",function(q){EBGLOBAL.sessionTimeout.resetTimeout();q.preventDefault();if($(".sb-loading-overlay").length){return false;}var p=$(this);var r="#"+p.data("formid");if(p.hasClass("notLoggedIn")){p.addClass("selected-bag-item-wishlist");showModal(null,null,"/modals/account/pdp-wishlist-login.jsp?commerceId="+p.attr("data-commerceid")+"&fromCart=true&parentUrl="+encodeURIComponent(location.href),null,950,true,"10%",null,null);return false;}var n=function(){scrollToWishList=true;reloadOrderSummary(true);reloadBagWishList();};var s=function(){};var m=function(){$(".error-tooltip-alt").remove();showLoadingOverlay($(".sb-item-container"));showLoadingOverlay($(".order-summary-container"));};var o=function(t){if(t.maxWlItems!=null&&t.maxWlItems){showModal(null,null,"/modals/pdp/pdp-wishlist-bag-full.jsp",null,500,true,"30%",null,null);}else{cartError(p,t.errors[0].message);}removeLoadingOverlay($(".sb-item-container"));removeLoadingOverlay($(".order-summary-container"));};ajaxFormSubmit($(r),m,n,o,s);setTimeout(function(){$("#srMessage").load("/shoprunner/srIneligibleMessage.jsp");},2000);setTimeout(function(){$("#bag-order-summary").load("/checkout/gadgets/bag/bag-order-summary.jsp");},2000);});$(".cart-items-container").on("click",".add-monogram",function(o){o.preventDefault();if($(".sb-loading-overlay").length){return false;}var n=$(this);var m=function(){monogramEventsCart(n,false);};showModal(null,null,"/modals/pdp/pdp-add-monogram.jsp?productId="+n.attr("data-productid")+"&skuid="+$(this).attr("data-skuid"),null,619,true,"15%",m,null);});$(".cart-items-container").on("click",".add-gift-box",function(o){o.preventDefault();if($(".sb-loading-overlay").length){return false;}var n=$(this);var m=function(){giftBoxEventsCart(n,false);};showModal(null,null,"/modals/pdp/pdp-add-gift-box.jsp",null,580,true,"20%",m,null);});$(".cart-items-container").on("click",".edit-gift-box",function(o){o.preventDefault();
if($(".sb-loading-overlay").length){return false;}var n=$(this);var m=function(){giftBoxEventsCart(n,true);};showModal(null,null,"/modals/pdp/pdp-add-gift-box.jsp",null,580,true,"20%",m,null);});$(".cart-items-container").on("click",".edit-monogram",function(o){o.preventDefault();if($(".sb-loading-overlay").length){return false;}var n=$(this);var m=function(){monogramEventsCart(n,true);};showModal(null,null,"/modals/pdp/pdp-add-monogram.jsp?productId="+n.attr("data-productid")+"&skuid="+$(this).attr("data-skuid"),null,619,true,"15%",m,null);});$(".cart-items-container").on("click",".edit-bag-item",function(m){if($(this).hasClass("is-gc")){return;}m.preventDefault();if($(this).hasClass("is-custom")){showCustomProductModal($(this));}else{showProductModal($(this));}});$(".cart-items-container").on("click",".wl-prod-thumb, .product-title",function(m){if($(this).hasClass("is-gc")){return;}m.preventDefault();$(this).closest(".sb-item").find(".buy-another-item").click();});$(".cart-items-container").on("click",".buy-another-item",function(m){if($(this).hasClass("is-gc")){return;}m.preventDefault();if($(this).hasClass("is-custom")){showCustomProductModal($(this));}else{showProductModal($(this));}});$("#sbWishlistHolder").on("click",".bag-wishlist-edit",function(m){m.preventDefault();showProductModal($(this));});$("#sbWishlistHolder").on("click",".wish-list-login",function(m){m.preventDefault();showModal(null,null,"/modals/account/pdp-wishlist-login.jsp?fromCart=true&parentUrl="+encodeURIComponent(location.href),null,950,true,"10%",null,null);});}$(document).on("focus",'.ie7 .add-gb-modal input[type="text"]',function(){$(this).css({"background-color":"#FFFF99"});}).on("blur",'.ie7 .add-gb-modal input[type="text"]',function(){$(this).css({"background-color":"#FFFFFF"});});if($("body").hasClass("multi-product")){try{var k=$(".valid-products").attr("data-productids");if(k!=""){var i=k.split(",");var f=$(".gtl-thumbs li").size();var c=1;var b=1;$(".gtl-thumbs li").each(function(){$this=$(this);var m=$this.attr("data-productid");if($.inArray(m,i)>=0){$this.show();if(b>=2){$this.prev(".ampersand-product").show();}b++;}c++;});}else{$("#msku-head").hide();$("#mskuTopHolder").hide();$(".mskuSubmitHolder").hide();}}catch(e){}try{getTheLookMap=null;if($(".getTheLookMap").length){getTheLookMap=$.parseJSON($(".getTheLookMap").text());}styleColors=new Array();styleSizes=new Array();styleColorDriver=new Array();styleSizeDriver=new Array();styleHemInseam=new Array();stylesMap=new Array();hemStyles=new Array();colorImageMap=new Array();priceMap=new Array();jQuery(".msku-item").each(function(m,n){var o=$(this);styleColors[m]=$.parseJSON(o.find(".styleColors").text());styleSizes[m]=$.parseJSON(o.find(".styleSizes").text());styleColorDriver[m]=$.parseJSON(o.find(".styleColorDriver").text());styleSizeDriver[m]=$.parseJSON(o.find(".styleSizeDriver").text());styleHemInseam[m]=$.parseJSON(o.find(".styleHemInseam").text());stylesMap[m]=$.parseJSON(o.find(".stylesMap").text());hemStyles[m]=$.parseJSON(o.find(".hemStyles").text());colorImageMap[m]=$.parseJSON(o.find(".colorImageMap").text());priceMap[m]=$.parseJSON(o.find(".priceMap").text());if(o.find(".hemstyle-selection").length){populateHemStyle(o.find(".style-selection:checked").val(),styleHemInseam[m],hemStyles[m],o.find(".hemstyle-selection"));}enableSizeChart(o.find(".main-size-chart-link"));checkAddToBag(o);});}catch(e){if(window.console){console.log(e);}}$("#mskuDetailsHolder").on("click",".multi-sku-details-trigger",function(o){o.preventDefault();$this=$(this);var n=$this.closest(".msku-item");var p=n.find(".msku-img-holder img").attr("src");var m=function(){multiSkuInit($this);};$;showModal(null,null,"/modals/pdp/multi-sku-product-details.jsp?productId="+$(this).attr("data-productid")+"&imgUrl="+encodeURIComponent(p),null,500,true,"10%",m,null);});$("#mskuDetailsHolder").on("mouseenter",".swatch-holder a",function(){$(this).addClass("temp-selected");});$("#mskuDetailsHolder").on("mouseleave",".swatch-holder a",function(){$(this).removeClass("temp-selected");});$(".style-selection").click(function(q){var p=$(this);var m=p.val();var o=p.closest(".msku-item");var n=o.data("index");removeAllPdpErrors();o.find(".msku-item-color").text("");populateColorSwatches(m,styleColors[n],o.find(".msku-swatches"));populateSizes(m,styleSizes[n],styleColorDriver[n],null,o.find(".size-selection").val(),false,o.find(".size-selection"));if(o.find(".hemstyle-selection").length){populateHemStyle(m,styleHemInseam[n],hemStyles[n],o.find(".hemstyle-selection"));populateInseam(null,null,styleHemInseam[n],o.find(".inseam-selection"),o.find(".inseam-length-container"));}populateColors(m,styleColors[n],styleSizeDriver[n],null,o.find(".color-selection").val(),false,o.find(".color-selection"));if(o.find(".size-selection").val()==""&&o.find(".size-selection option").size()==2){o.find(".size-selection").val(o.find(".size-selection option").eq(1).val());o.find(".size-selection").change();}if(o.find(".color-selection").val()==""&&o.find(".color-selection option").size()==2){o.find(".color-selection").val(o.find(".color-selection option").eq(1).val());o.find(".color-selection").change();}else{if(o.find(".color-selection").val()!=""){o.find(".color-selection").change();}}var r=o.find(".color-selection").val();if(r==""){r=o.find(".color-selection option").eq(1).val();}populateMultiProductImg(r,o,colorImageMap[n],styleColors[n],false);checkAddToBag(o);});$(".hemstyle-selection").change(function(p){var o=$(this);var n=o.closest(".msku-item");var m=n.data("index");if(o.val()!=""){removePdpError(o);}populateInseam(n.find(".style-selection:checked").val(),o.val(),styleHemInseam[m],n.find(".inseam-selection"),n.find(".inseam-length-container"));checkAddToBag(n);});$(".inseam-selection").change(function(m){if($(this).val()!=""){removePdpError($(this));}checkAddToBag($(this).closest(".msku-item"));});$(".size-selection").change(function(p){var o=$(this);var n=o.closest(".msku-item");var m=n.data("index");if(o.val()==""){checkAddToBag();populateColors(n.find(".style-selection:checked").val(),styleColors[m],styleSizeDriver[m],o.val(),n.find(".color-selection").val(),true,n.find(".color-selection"));return false;}if(o.val()!=""&&!n.find(".size-selected option:selected").hasClass("text-light")){removePdpError(o);removePdpError(n.find(".color-selection"));}populateColors(n.find(".style-selection:checked").val(),styleColors[m],styleSizeDriver[m],o.val(),n.find(".color-selection").val(),true,n.find(".color-selection"));if(n.find(".color-selection").val()==""&&n.find(".color-selection option").size()==2){n.find(".color-selection").val(n.find(".color-selection option").eq(1).val());n.find(".color-selection").change();}checkAddToBag(n);});$(".color-selection").change(function(p){var o=$(this);var n=o.closest(".msku-item");var m=n.data("index");if(o.val()==""){checkAddToBag();n.find(".swatch-holder a").removeClass("selected");populateSizes(n.find(".style-selection:checked").val(),styleSizes[m],styleColorDriver[m],o.val(),n.find(".size-selection").val(),true,n.find(".size-selection"));return false;}if(o.val()!=""&&!n.find(".size-selected option:selected").hasClass("text-light")){removePdpError(o);removePdpError(n.find(".size-selection"));}populateColorTextMulti(o.val(),n.find(".style-selection:checked").val(),styleColors[m],n);populateSizes(n.find(".style-selection:checked").val(),styleSizes[m],styleColorDriver[m],o.val(),n.find(".size-selection").val(),true,n.find(".size-selection"));populateMultiProductPrice(styleColors[m],priceMap[m],n);if(n.find(".size-selection").val()==""&&n.find(".size-selection option").size()==2){n.find(".size-selection").val(n.find(".size-selection option").eq(1).val());n.find(".size-selection").change();}var q=n.find(".color-selection").val();if(q==""){q=n.find(".color-selection option").eq(1).val();}populateMultiProductImg(q,n,colorImageMap[m],styleColors[m],false);checkAddToBag(n);});$(".msku-item").on("click",".swatch-holder a",function(p){p.preventDefault();
var o=$(this);var n=o.closest(".msku-item");var m=n.data("index");populateColorTextMulti(o.attr("data-colorid"),n.find(".style-selection:checked").val(),styleColors[m],n);populateSizes(n.find(".style-selection:checked").val(),styleSizes[m],styleColorDriver[m],o.attr("data-colorid"),n.find(".size-selection").val(),true,n.find(".size-selection"));populateMultiProductPrice(styleColors[m],priceMap[m],n);populateColors(n.find(".style-selection:checked").val(),styleColors[m],styleSizeDriver[m],n.find(".size-selection").val(),o.attr("data-colorid"),true,n.find(".color-selection"));if(n.find(".size-selection option").size()==2){n.find(".size-selection").val(n.find(".size-selection option").eq(1).val());n.find(".size-selection").change();}var q=n.find(".color-selection").val();if(q==""){q=n.find(".color-selection option").eq(1).val();}populateMultiProductImg(q,n,colorImageMap[m],styleColors[m],false);checkAddToBag(n);});$("#mskuSubmit").click(function(s){s.preventDefault();var r=$(this);if(r.hasClass("active-loading")||r.hasClass("disabled")){return false;}var q=validateMultiProducts(r);if(q){var m=false;m=buildCartFormValuesMulti(styleSizeDriver);if(m){var p=function(u){location.href="/checkout/bag.jsp";};var t=function(u){if(u.maxCartItems!=null&&u.maxCartItems){showModal(null,null,"/modals/pdp/pdp-shopping-bag-full.jsp",null,500,true,"30%",null,null);}else{showPdpError($(".add-multi-sku-cart"),u.errors[0].message);}};var o=function(){r.addClass("active-loading");};var n=function(){r.removeClass("active-loading");};ajaxFormSubmit($("#add-to-bag-form"),o,p,t,n);}}});$("#mskuSubmitTop").click(function(m){m.preventDefault();$("#mskuSubmit").click();});jQuery(".msku-item").each(function(r,w){var u=$(this);if(u.find(".size-selection option").size()==2){u.find(".size-selection").val(u.find(".size-selection option").eq(1).val());u.find(".size-selection").change();}if(u.find(".color-selection option").size()==2){u.find(".color-selection").val(u.find(".color-selection option").eq(1).val());u.find(".color-selection").change();}var q=u.attr("data-productid");var v="";var t="";try{if(getTheLookMap!=null&&getTheLookMap[q]!=null){t=getTheLookMap[q]["sizeId"];v=getTheLookMap[q]["colorId"];}}catch(o){}var n=$(".valid-styles-"+r).attr("data-styleids");if(n!=""){var s="";var m=n.split(",");jQuery.each(m,function(A,z){s=z;var y="";$.each(styleColors[r][s],function(C,B){if(B.colorId==v){y=s;$('.style-selection[value="'+s+'"]').prop("checked",true);$('.style-selection[value="'+s+'"]').click();return false;}});if(y!=""){return false;}});}u.find(".size-selection").val(t);if(u.find(".size-selection").val()!=""){if(v==""){u.find(".size-selection").change();}}if(v==""){}else{if(u.find(".color-selection option").size()>2){u.find(".color-selection").val(v);if(u.find(".color-selection").val()!=""){u.find(".color-selection").change();}}}if(u.find(".color-selection").val()==""){var p=u.find(".color-selection").val();if(p==""){p=u.find(".color-selection").attr("data-defaultcolor");if($.trim(p)==""){p=u.find(".color-selection option").eq(1).val();}}populateMultiProductImg(p,u,colorImageMap[r],styleColors[r],true);populateMultiProductPrice(styleColors[r],priceMap[r],u);}});}$(".gcSku").on("click",function(){$("#gcSkuId").val($(this).val());});$("#egcAssociate").on("blur",function(){var m=$(this),n=m.parents("fieldset.formItem");$.ajax({type:"post",url:"/catalog/submit/apply-coupon-code.jsp",data:n.serialize(),async:false});});$(window).load(function(){$('.results-list input[checked="checked"]').attr("checked","checked");$('.results-list input[checked="checked"]').parents("ul").siblings("h3").addClass("open");});if($(".toggleCategoryImage").length){$([$(".toggleCategoryImage").data("product-image")]).preload();}$("#resultsListHolder").on("click",".toggleCategoryImage",function(){var o=$(this),p={imageurl:o.data("product-image"),productlink:o.data("product-url")},n={image:o.parents(".prd-preview").find(".preview-thumb img.prd-image"),imagelink:o.parents(".prd-preview").find(".preview-thumb a.prd-name"),textlink:o.parents(".prd-preview").find(".preview-details a.prd-name")};for(var m in n){if(m=="image"){n[m].attr("src",p.imageurl);}else{n[m].attr("href",p.productlink);}}o.parents(".swatch-holder").find(".selected-swatch").removeClass("selected-swatch");o.addClass("selected-swatch");return false;});});function validateProDealsAddress(l,c,m){var d="/xhr/address-validation.jsp";if(m=="billing"){var n=$("#billCity");var b=$("#billState");var f=$("#billZipCode");var k=$("#billCountry");$("#whichAddressType").val("billing");$("#address-validation-form").prop("action",d+"?whichType=billing");}else{if(m=="shipping"){var n=$("#shipCity");var b=$("#shipState");var f=$("#shipZipCode");var k=$("#shipCountry");$("#whichAddressType").val("shipping");$("#address-validation-form").prop("action",d+"?whichType=shipping");}else{var n=$("#empCity");var b=$("#empState");var f=$("#empZipCode");var k=$("#empCountry");$("#whichAddressType").val("employer");$("#address-validation-form").prop("action",d+"?whichType=employer");}}var i=$.trim(n.val());var a=$.trim(b.val());var e=$.trim(f.val());var g=$.trim(k.val());if(i!=""&&a!=""&&e!=""&&g!=""){$("#address-validation-form #av-city").val(i);$("#address-validation-form #av-state").val(a);$("#address-validation-form #av-zip").val(e);$("#address-validation-form #av-country").val(g);var j=function(p){if($.trim(p)!="valid"){c.preventDefault();var r=function(){if(!$("#continueWithoutSuggestion").prop("checked")&&$("#addressSelect").val()==""){$(".address-validation-error").show();$("#addressSelect").addClass("error-field");return false;}else{$(".address-validation-error").hide();$("#addressSelect").removeClass("error-field");}if(!$("#continueWithoutSuggestion").prop("checked")){n.val($("#addressSelect option:selected").attr("data-city"));b.val($("#addressSelect option:selected").attr("data-state"));f.val($("#addressSelect option:selected").attr("data-zip"));}var s=$("#whichAddressType").val();if(s=="billing"){validateProDealsAddress(l,c,"shipping");}else{if(s=="shipping"){validateProDealsAddress(l,c,"employer");}else{l.addClass("skip-validation");l.find("#proDealsSubmitBtn").click();l.removeClass("skip-validation");}}};var q=function(){$("#addressSelect").change(function(){if($("#addressSelect").val()!=""){$("#addressSelect").removeClass("error-field");$(".address-validation-error").hide();}});};showModal(null,r,null,null,500,true,"20%",q,null,p);}else{var o=$("#whichAddressType").val();if(o=="billing"){validateProDealsAddress(l,c,"shipping");}else{if(o=="shipping"){validateProDealsAddress(l,c,"employer");}else{l.addClass("skip-validation");l.find("#proDealsSubmitBtn").click();l.removeClass("skip-validation");}}}};addressValidationSubmit($("#address-validation-form"),null,j,null,null);}else{var h=$("#whichAddressType").val();if(h=="billing"){validateProDealsAddress(l,c,"shipping");}else{if(h=="shipping"){validateProDealsAddress(l,c,"employer");}else{l.addClass("skip-validation");l.find("#proDealsSubmitBtn").click();l.removeClass("skip-validation");}}}}function kioskSession(){setTimeout(function(){location.href=$("#endKioskSession").attr("href");},300000);}function productDetailPageFunctions(){$("#pdpAlsoLike a").click(function(d){var c=$(this).attr("title")+"("+$(this).data("prdid")+")";cmCreateElementTag(c,"PDP YMAL");});$(".tabs li a").click(function(g){var h=$(this).text();var c=$("#product-display-name").text();var d=$("#product-id-value").attr("data-realprdid");try{cmCreateElementTag(h,"PDP Tabs");}catch(f){if(window.console){console.log(f);}}});if(jQuery("body.pdp").length>0){var a="";jQuery("#detailsModule #pdpTabHolder .tab-content a.viewer").attr("data-selected","viewer");jQuery('a[href*="youtu.be"]').attr("data-selected","youtube");jQuery("#detailsModule #pdpTabHolder .tab-content a.viewer").on("click",function(){a=jQuery(this).data("selected");b(a);});jQuery('a[href*="youtu.be"]').on("click",function(){a=jQuery(this).data("selected");b(a);});document.onreadystatechange=function(){if(document.readyState=="complete"){$(".srd_logo").attr("title","Shoprunner. Free 2-day shipping.");
if($("#BVRRDisplayContentTitleID").length>0){this.wrapInner("<h2 class='productReviewTitle'></h2>");}}};function b(c){switch(c){case"viewer":jQuery("#youtube").remove();var d=document.createElement("style");d.id="viewer";d.innerHTML="#fbBox #fbContent {width: 850px !important;}";document.body.appendChild(d);break;case"youtube":jQuery("#viewer").remove();var d=document.createElement("style");d.id="youtube";d.innerHTML="#fbBox #fbContent {width: 664px !important;}";document.body.appendChild(d);break;}}}$(".tabs").tabs(".tab-content > div");$(".tab-content").find(".no-display").removeClass("no-display");$("#productDetailsHolder").on("click",".pdp-email-share",function(f){f.preventDefault();if($(".wishlist-share").length){return false;}var g=$("#pdpSelectColor").val();var c="";if(g==""){g=$("#pdpSelectColor").attr("data-defaultcolor");}if(g!=""){c=getSkuFromColorDriverObj($(".style-selection:checked").val(),null,g,styleColorDriver);}var d=sharePdpEvents;showModal(null,null,"/modals/share/pdp-share-form.jsp?productId="+$("#productDetailsHolder").attr("data-productid")+"&skuId="+c,null,610,true,"5%",d,null,null,null,true);});}function showSoldOutState(e){$(".col-2.left").addClass("sold-out-exp");$(".col-3.left").hide();$("#pdpTabHolder").hide();$("#pdpShare").hide();$("#zoomThumbHolder").hide();$(".pdpSwatches").hide();$("#zoom").removeClass("MagicZoomPlus");$(".MagicZoomLoading").hide();$(".zoom-look").hide();$("#bazaarVoiceContainer").hide();$("#BVRRRatingSummarySourceID").hide();$('<div class="sold-out-message"><h5>SOLD OUT</h5><span>We are sorry, this item has sold out and is no longer available</span></div>').insertAfter("#pdpPriceHolder");try{var d=e.img;var h=e.s7;var a=e.colorName;$(".med-zoom-img").attr("src",h+d);$("#zoom").show();$(".pdp-item-color").text(a);$("#imageZoom #zoom img").one("load",function(){$("#imageZoom").removeClass("pdp-image-holder");});if(e.listPrice!=""){$("#pdpPriceHolder").html('<span class="regular-price">'+e.listPrice+'</span><span aria-label="Sale Price" class="sale-price">'+e.ebPrice+"</span>");}else{$("#pdpPriceHolder").html("<span>"+e.ebPrice+"</span>");}}catch(g){}var c="";$(".breadcrumbs li").each(function(i,j){var k=$(this);if(i!=0&&k.find("a").length){c+='<li><a href="'+k.find("a").attr("href")+'">'+k.find("a").text()+"</a></li>";}});var b="";$("#pdpAlsoLike li").each(function(j,l){var n=$(this);var k=n.find("a").attr("href");var m=n.find("img").data("imgurl");var i=n.find("img").attr("alt");b+='<li><a title="'+i+'" href="'+k+'"><img src="'+m+'" alt="'+i+'"/></a><p>'+i+"</p></li>";});var f='<div id="sold-out-experience">'+"<span><strong>SHOP FOR SIMILAR ITEMS IN:</strong></span>"+'<ul class="nav-list related-categories">'+c+"</ul>"+"<br>"+"<span><strong>OR YOU MAY ALSO LIKE:</strong></span>"+'<ul class="nav-list ymal-sold-out">'+b+"</ul>"+"</div>";$("#detailsModule").append(f);}function initializePdp(h){$("#pdpAddCartForm").on("contextmenu","a, input",function(){return false;});$("#pdpSelectColor").attr("data-selectedcolor",h);$("#pdpSelectColor").attr("data-selectedcolor",h);enableSizeChart($(".main-size-chart-link"));try{productDisplayName=$("<div/>").text($("#product-display-name").text()).html().replace('"',"&quot;");wishlistErrorMsg=$.trim($(".wishlist-all-selections-error").text());pdpErrorMsg=$.trim($(".bag-all-selections-error").text());styleColors=$.parseJSON($(".styleColors").text());styleSizes=$.parseJSON($(".styleSizes").text());styleColorDriver=$.parseJSON($(".styleColorDriver").text());styleSizeDriver=$.parseJSON($(".styleSizeDriver").text());styleHemInseam=$.parseJSON($(".styleHemInseam").text());stylesMap=$.parseJSON($(".stylesMap").text());hemStyles=$.parseJSON($(".hemStyles").text());colorImageMap=$.parseJSON($(".colorImageMap").text());colorImageAltMap=$.parseJSON($(".colorImageAltMap").text());clearanceColors=$.parseJSON($(".clearanceColors").text());allColorsMap=$.parseJSON($(".allColorsMap").text());priceMap=$.parseJSON($(".priceMap").text());if($("#pdpSelectHemStyle").length){populateHemStyle($(".style-selection:checked").val(),styleHemInseam,hemStyles,$("#pdpSelectHemStyle"));}if(clearanceColors!=null){populateColorSwatchesWithClearance($(".style-selection:checked").val(),styleColors,$(".pdpSwatches .swatch-holder"),clearanceColors);}else{populateColorSwatches($(".style-selection:checked").val(),styleColors,$(".pdpSwatches .swatch-holder"));}if($("#styleCutHolder").data("iseobonlyclearance")){$('<div class="clearance-text">CLEARANCE</div>').insertBefore(".pdpSwatches");}populatePdpPrice(priceMap,"all",styleColors);populateSkuId($(".style-selection:checked").val(),stylesMap);}catch(d){if(window.console){console.log(d);}}$(document).ready(function(){$(".tip-trigger[title]").tooltip({"layout":'<div><img class="tt-arrow" src="/static/img/tip-trigger-arrow.png" alt="" /></div>'});$.receiveMessage(function(k){if(k.data=="loginSuccess"){addToWishlistFromLogin(styleSizeDriver);}});$(".parent-window").click(function(k){k.preventDefault();parent.location.href=$(this).attr("href");});$("#productDetailsHolder").on("click",".thumb-enlarge-text",function(k){k.preventDefault();showPdpZoom();});$("#eb-write-review").click(function(k){$(this).attr("href",$("#bv-write-review-link div.BVRRRatingSummaryLink").eq(1).find("a").attr("href"));});if(jQuery("body").hasClass("pdp")){var i=jQuery(".sku-id").html();var j=i.substring(0,3);if(j=="i87"){jQuery("#imageZoom").append("<span id='mountainGuideText'>Mountain Guide In Training&trade;</span>");}}jQuery("body.pdp a.toolTip").bind("click",function(k){k.preventDefault();});});showModal($(".pdp-about-gb"),null,"/modals/pdp/pdp-about-gift-boxes.jsp",null,600,false,"20%",null,null,null,null,true);showModal($(".pdp-about-monogram"),null,"/modals/pdp/pdp-about-monograms.jsp",null,580,false,"20%",null,null,null,null,true);$(".style-selection").click(function(k){var j=$(this).val();var i=$(this).attr("data-stylename");if(i==="Regular"){$("#customizeItDiv").show();}else{$("#customizeItDiv").hide();}removeAllPdpErrors();$(".pdp-color-text").text("");if(clearanceColors!=null){populateColorSwatchesWithClearance($(".style-selection:checked").val(),styleColors,$(".pdpSwatches .swatch-holder"),clearanceColors);}else{populateColorSwatches($(".style-selection:checked").val(),styleColors,$(".pdpSwatches .swatch-holder"));}populateSizes(j,styleSizes,styleColorDriver,null,$("#pdpSelectSize").val(),false,$("#pdpSelectSize"));if($("#pdpSelectHemStyle").length){populateHemStyle(j,styleHemInseam,hemStyles,$("#pdpSelectHemStyle"));populateInseam(null,null,styleHemInseam,$("#pdpSelectHemLength"),$(".inseam-length-container"));}populateColors(j,styleColors,styleSizeDriver,null,$("#pdpSelectColor").val(),false,$("#pdpSelectColor"));populatePdpPrice(priceMap,"style",styleColors);populateSkuId(j,stylesMap);if($("#pdpSelectSize").val()==""&&$("#pdpSelectSize option").size()==2){$("#pdpSelectSize").val($("#pdpSelectSize option").eq(1).val());$("#pdpSelectSize").change();}if($("#pdpSelectColor").val()==""&&$("#pdpSelectColor option").size()==2){$("#pdpSelectColor").val($("#pdpSelectColor option").eq(1).val());$("#pdpSelectColor").change();}else{if($("#pdpSelectColor").val()!=""){$("#pdpSelectColor").change();}else{if($("#pdpSelectColor").val()==""){var l=$("#pdpSelectColor").attr("data-defaultcolor");if(l!=""&&colorImageMap[l]!=null&&(l in colorImageMap)){populateCanvasImage(l,colorImageMap,colorImageAltMap);}else{populateCanvasImage($("#pdpSelectColor option").eq(1).val(),colorImageMap,colorImageAltMap);}}}}});$("#pdpSelectHemStyle").change(function(i){if($(this).val()!=""){removePdpError($(this));}populateInseam($(".style-selection:checked").val(),$(this).val(),styleHemInseam,$("#pdpSelectHemLength"),$(".inseam-length-container"));});$("#pdpSelectHemLength").change(function(i){if($(this).val()!=""){removePdpError($(this));}});$("#pdpSelectQuantity").change(function(i){removePdpError($("#pdpAddCartFormSubmit"));});$("#pdpSelectSize").change(function(i){if($(this).val()==""){populateColors($(".style-selection:checked").val(),styleColors,styleSizeDriver,$(this).val(),$("#pdpSelectColor").val(),true,$("#pdpSelectColor"));
return false;}if($(this).val()!=""&&!$("#pdpSelectSize option:selected").hasClass("text-light")){removePdpError($(this));removePdpError($("#pdpAddCartFormSubmit"));removePdpError($("#pdpSelectColor"));}populateColors($(".style-selection:checked").val(),styleColors,styleSizeDriver,$(this).val(),$("#pdpSelectColor").val(),true,$("#pdpSelectColor"));if($("#pdpSelectColor").val()==""&&$("#pdpSelectColor option").size()==2){$("#pdpSelectColor").val($("#pdpSelectColor option").eq(1).val());$("#pdpSelectColor").change();}});$("#pdpSelectColor").change(function(j){if($(this).val()==""){$(".swatch-holder a").removeClass("selected");var k=$(this).val(),i=$(".style-selection:checked").val();populateSizes(i,styleSizes,styleColorDriver,k,$("#pdpSelectSize").val(),true,$("#pdpSelectSize"));return false;}if($(this).val()!=""&&!$("#pdpSelectColor option:selected").hasClass("text-light")){removePdpError($(this));removePdpError($("#pdpAddCartFormSubmit"));removePdpError($("#pdpSelectSize"));}var k=$(this).val(),i=$(".style-selection:checked").val();populateColorText($(this).val(),$(".style-selection:checked").val(),styleColors);populateSizes(i,styleSizes,styleColorDriver,k,$("#pdpSelectSize").val(),true,$("#pdpSelectSize"));populatePdpPrice(priceMap,"color",styleColors);populateCanvasImage(k,colorImageMap,colorImageAltMap);if($("#pdpSelectSize").val()==""&&$("#pdpSelectSize option").size()==2){$("#pdpSelectSize").val($("#pdpSelectSize option").eq(1).val());$("#pdpSelectSize").change();}if($(".pdp-clearance-container").length&&$(".pdp-clearance-container").is(":visible")){populateSkuId($(".style-selection:checked").val(),stylesMap);}});$(".pdpSwatches, .pdp-swatches-clearance").on("click",".swatch-holder a, .swatch-holder-clearance a",function(m){m.preventDefault();var n=$(this).attr("data-colorid"),j=$(".style-selection:checked").val();removePdpError($("#pdpSelectColor"));removePdpError($("#pdpAddCartFormSubmit"));removePdpError($("#pdpSelectSize"));populateColorText(n,$(".style-selection:checked").val(),styleColors);populateSizes(j,styleSizes,styleColorDriver,n,$("#pdpSelectSize").val(),true,$("#pdpSelectSize"));var l=colorImageMap[n].defaultCanvasImage;var i=null;for(var k in styleColors[j]){if(styleColors[j][k].colorId==n){i=styleColors[j][k].colorName;}}populateColors($(".style-selection:checked").val(),styleColors,styleSizeDriver,$("#pdpSelectSize").val(),n,true,$("#pdpSelectColor"));populatePdpPrice(priceMap,"color",styleColors);populateCanvasImage(n,colorImageMap,colorImageAltMap);if($("#pdpSelectSize").val()==""&&$("#pdpSelectSize option").size()==2){$("#pdpSelectSize").val($("#pdpSelectSize option").eq(1).val());$("#pdpSelectSize").change();}if($(".pdp-clearance-container").length&&$(".pdp-clearance-container").is(":visible")){populateSkuId($(".style-selection:checked").val(),stylesMap);}});$(".pdpSwatches, .pdp-swatches-clearance").on("mouseenter",".swatch-holder a, .swatch-holder-clearance a",function(j){var k=$(this).attr("data-colorid"),i=$(".style-selection:checked").val();populateColorTextHover(k,$(".style-selection:checked").val(),styleColors);});$(".pdpSwatches, .pdp-swatches-clearance").on("mouseleave",".swatch-holder a, .swatch-holder-clearance a",function(i){resetColorText();});$("#pdpAddCartFormSubmit, #buyBagItem, #editBagItem").hover(function(){var i=pdpErrorMsg;checkAddToBagHoverError($(this),i);},function(){removePdpErrorHover($(this));});$("#pdpAddCartForm").on("mouseenter","#pdpAddToWishlist, #editWishlistItem, #editBagWishlistItem",function(){var i=wishlistErrorMsg;checkAddToBagHoverError($(this),i);});$("#pdpAddCartForm").on("mouseleave","#pdpAddToWishlist, #editWishlistItem, #editBagWishlistItem",function(){removePdpErrorHover($(this));});$("#pdpAddCartFormSubmit").click(function(m){m.preventDefault();var o=$("#hideMiniCartEligible").html();var n=$(this);if(n.hasClass("active-loading")){return false;}n.addClass("active-loading");var l=pdpErrorMsg;var q=validatePdpDropdowns(n,l);if(q){var r=false;r=buildCartFormValues(styleSizeDriver);if(r){if($("#pdp-gift-box-option").prop("checked")&&$("#pdp-monogram-option").prop("checked")){var j=function(){giftBoxEvents(true);};showModal(null,null,"/modals/pdp/pdp-add-gift-box.jsp",null,580,true,"20%",j,null);n.removeClass("active-loading");}else{if($("#pdp-gift-box-option").prop("checked")){var j=function(){giftBoxEvents(false);};showModal(null,null,"/modals/pdp/pdp-add-gift-box.jsp",null,580,true,"20%",j,null);n.removeClass("active-loading");}else{if($("#pdp-monogram-option").prop("checked")){var j=monogramEvents;showModal(null,null,"/modals/pdp/pdp-add-monogram.jsp?productId="+$("#bag-product-id").val()+"&skuid="+$("#bag-skuId").val(),null,619,true,"15%",j,null);n.removeClass("active-loading");}else{var k=function(t){var s=t.commerceId;var u=addToBagModalLoad;showModal(null,null,"/modals/pdp/pdp-shopping-bag-added.jsp?commerceId="+s,null,600,true,"15%",u,null);updateShoppingBagCount();};var p=function(s){if(s.maxCartItems!=null&&s.maxCartItems){showModal(null,null,"/modals/pdp/pdp-shopping-bag-full.jsp",null,500,true,"30%",null,null);}else{showPdpError(n,s.errors[0].message);}};var i=function(){n.removeClass("active-loading");};ajaxFormSubmit($("#add-to-bag-form"),null,k,p,i);setTimeout(function(){$("#srMiniCartEligible").html(o);},2000);}}}}}else{n.removeClass("active-loading");}});$("#editBagItem").click(function(m){m.preventDefault();var n=$(this);if(n.hasClass("active-loading")){return false;}n.addClass("active-loading");var l=pdpErrorMsg;var p=validatePdpDropdowns(n,l);if(p){var q=false;q=buildCartFormValues(styleSizeDriver);if(q){if($("#pdp-gift-box-option").prop("checked")&&$("#pdp-monogram-option").prop("checked")){var j=function(){giftBoxEvents(true,true);};showModal(null,null,"/modals/pdp/pdp-add-gift-box.jsp",null,580,true,"20%",j,null,null,null,true);n.removeClass("active-loading");}else{if($("#pdp-gift-box-option").prop("checked")){var j=function(){giftBoxEvents(false,true);};showModal(null,null,"/modals/pdp/pdp-add-gift-box.jsp",null,580,true,"20%",j,null,null,null,true);n.removeClass("active-loading");}else{if($("#pdp-monogram-option").prop("checked")){var j=function(){monogramEvents(true);};showModal(null,null,"/modals/pdp/pdp-add-monogram.jsp?productId="+$("#bag-product-id").val()+"&skuid="+$("#bag-skuId").val(),null,619,true,"15%",j,null,null,null,true);n.removeClass("active-loading");}else{var k=function(y){try{var z=$("#selected-edit-values");var r=$.trim(z.attr("data-style"));var v=$.trim(z.attr("data-color"));var C=$.trim(z.attr("data-size"));var u=$.trim(z.attr("data-quantity"));var A=$(".style-selection:checked").val();var B=$("#pdpSelectColor").val();var w=$("#pdpSelectSize").val();var s=$("#pdpSelectQuantity").val();if((A!=""&&A!=r)||(B!=""&&B!=v)||(w!=""&&w!=C)||(s!=""&&s!=u)){fireUtag=true;}}catch(t){}if(n.hasClass("is-checkout")){if(y.redirectPayment){location.href="/checkout/payment.jsp";}else{reloadCheckoutOrderSummary(false,false,true);$(".close.ir").click();}}else{$(".close.ir").click();reloadOrderSummary(true);}};var o=function(r){if(r.maxCartItems!=null&&r.maxCartItems){showModal(null,null,"/modals/pdp/pdp-shopping-bag-full.jsp",null,500,true,"30%",null,null,null,null,true);}else{showPdpError(n,r.errors[0].message);}};var i=function(){n.removeClass("active-loading");};ajaxFormSubmit($("#add-to-bag-form"),null,k,o,i);setTimeout(function(){$("#srMessage").load("/shoprunner/srIneligibleMessage.jsp");},2000);setTimeout(function(){$("#bag-order-summary").load("/checkout/gadgets/bag/bag-order-summary.jsp");},2000);}}}}}else{n.removeClass("active-loading");}});$("#buyBagItem").click(function(m){m.preventDefault();var n=$(this);if(n.hasClass("active-loading")){return false;}n.addClass("active-loading");var l=pdpErrorMsg;var p=validatePdpDropdowns(n,l);if(p){var q=false;q=buildCartFormValues(styleSizeDriver);if(q){if($("#pdp-gift-box-option").prop("checked")&&$("#pdp-monogram-option").prop("checked")){var j=function(){giftBoxEvents(true,true);};showModal(null,null,"/modals/pdp/pdp-add-gift-box.jsp",null,580,true,"20%",j,null,null,null,true);
n.removeClass("active-loading");}else{if($("#pdp-gift-box-option").prop("checked")){var j=function(){giftBoxEvents(false,true);};showModal(null,null,"/modals/pdp/pdp-add-gift-box.jsp",null,580,true,"20%",j,null,null,null,true);n.removeClass("active-loading");}else{if($("#pdp-monogram-option").prop("checked")){var j=function(){monogramEvents(true);};showModal(null,null,"/modals/pdp/pdp-add-monogram.jsp?productId="+$("#bag-product-id").val()+"&skuid="+$("#bag-skuId").val(),null,619,true,"15%",j,null,null,null,true);n.removeClass("active-loading");}else{var k=function(r){fireUtag=true;$(".close.ir").click();reloadOrderSummary(true);};var o=function(r){if(r.maxCartItems!=null&&r.maxCartItems){showModal(null,null,"/modals/pdp/pdp-shopping-bag-full.jsp",null,500,true,"30%",null,null,null,null,true);}else{showPdpError(n,r.errors[0].message);}};var i=function(){n.removeClass("active-loading");};ajaxFormSubmit($("#add-to-bag-form"),null,k,o,i);}}}}}else{n.removeClass("active-loading");}setTimeout(function(){$("#srMessage").load("/shoprunner/srIneligibleMessage.jsp");},2000);setTimeout(function(){$("#bag-order-summary").load("/checkout/gadgets/bag/bag-order-summary.jsp");},2000);});$("#pdpAddCartForm").on("click","#pdpAddToWishlist",function(m){m.preventDefault();var n=$(this),r=validatePdpDropdowns(n,wishlistErrorMsg),j="active-loading";var l=document.getElementById("headShoppingHolder").hasAttribute("data-is-logged-in");if(n.hasClass(j)){return;}if(!r){return;}n.addClass(j);if(l==true){var k=function(){n.removeClass(j);},o=function(s){if(s.maxWlItems!=null&&s.maxWlItems){showModal(null,null,"/modals/pdp/pdp-wishlist-bag-full.jsp",null,500,true,"30%",null,null);}else{showPdpError(n,s.errors[0].message);}},q=function(s){showModal(null,null,"/modals/pdp/pdp-wishlist-added.jsp?giftId="+s.giftItemId,null,600,true,"20%",null,null);};buildWishlistFormValues(styleSizeDriver);ajaxFormSubmit($("#add-to-wishlist-form"),null,q,o,k);}else{var p=window.location,i=function(){if(window.localStorage){var s=$("#pdpAddCartForm");localStorage.setItem("wishListProduct",JSON.stringify({color:s.find("#pdpSelectColor").val(),giftBox:s.find("#pdp-gift-box-option").prop("checked"),hemLength:s.find("#pdpSelectHemLength").val(),hemStyle:s.find("#pdpSelectHemStyle").val(),monogram:s.find("#pdp-monogram-option").prop("checked"),pathname:p.pathname,quantity:s.find("#pdpSelectQuantity").val(),size:s.find("#pdpSelectSize").val(),style:s.find('[name="styleradiobutton"]:checked').val()}));}};i();p.href=n.attr("href")+"?successUrl="+p.pathname+p.search;}});if(window.localStorage&&window.location.search.indexOf("loginSuccess=true")>0){var e=JSON.parse(localStorage.getItem("wishListProduct")),b=$("#pdpAddCartForm"),f=function(){b.find("#pdpSelectColor").val(e.color).change();if(e.giftBox){b.find("#pdp-gift-box-option").prop("checked",true);}b.find("#pdpSelectHemStyle").val(e.hemStyle).change();b.find("#pdpSelectHemLength").val(e.hemLength);if(e.monogram){b.find("#pdp-monogram-option").prop("checked",true);}b.find("#pdpSelectQuantity").val(e.quantity);b.find("#pdpSelectSize").val(e.size);b.find('[name="styleradiobutton"][value="'+e.style+'"]').prop("checked",true);};if(!e){return;}if(e.pathname!==window.location.pathname){return;}f();localStorage.removeItem("wishListProduct");$("#pdpAddToWishlist").trigger("click");}$("#pdpAddCartForm").on("click","#editWishlistItem",function(o){o.preventDefault();var n=$(this);if(n.hasClass("active-loading")){return false;}n.addClass("active-loading");var k=wishlistErrorMsg;var m=validatePdpDropdowns(n,k);if(m){var i=false;i=buildWishlistFormValues(styleSizeDriver);if(i){var l=function(q){$(".close.ir").click();reloadWishlistItems();};var p=function(q){if(q.maxWlItems!=null&&q.maxWlItems){showModal(null,null,"/modals/pdp/pdp-wishlist-bag-full.jsp",null,500,true,"30%",null,null,null,null,true);}else{showPdpError(n,q.errors[0].message);}};var j=function(){n.removeClass("active-loading");};ajaxFormSubmit($("#edit-wishlist-form"),null,l,p,j);}}n.removeClass("active-loading");});$("#pdpAddCartForm").on("click","#editBagWishlistItem",function(o){o.preventDefault();var n=$(this);if(n.hasClass("active-loading")){return false;}n.addClass("active-loading");var k=wishlistErrorMsg;var m=validatePdpDropdowns(n,k);if(m){var i=false;i=buildWishlistFormValues(styleSizeDriver);if(i){var l=function(q){$(".close.ir").click();reloadBagWishList();};var p=function(q){if(q.maxWlItems!=null&&q.maxWlItems){showModal(null,null,"/modals/pdp/pdp-wishlist-bag-full.jsp",null,500,true,"30%",null,null,null,null,true);}else{showPdpError(n,q.errors[0].message);}};var j=function(){n.removeClass("active-loading");};ajaxFormSubmit($("#edit-wishlist-form"),null,l,p,j);}}n.removeClass("active-loading");});if($("#selected-edit-values").length){prePopulateProductInfo($("#selected-edit-values"));}else{if($("#pdpSelectColor").attr("data-selectedcolor")!=""){populateSelectedColor($("#pdpSelectColor").attr("data-selectedcolor"),styleColors);}else{if($("#eob-selected-style").length){var c=$("#eob-selected-style").attr("data-style");$('.style-selection[value="'+c+'"]').prop("checked",true);$('.style-selection[value="'+c+'"]').click();}}}if($("#pdpSelectSize option").size()==2){$("#pdpSelectSize").val($("#pdpSelectSize option").eq(1).val());$("#pdpSelectSize").change();}if($("#pdpSelectColor option").size()==2){$("#pdpSelectColor").val($("#pdpSelectColor option").eq(1).val());$("#pdpSelectColor").change();}if($("#pdpSelectColor").val()==""&&$("#pdpSelectColor").attr("data-selectedcolor")==""){var g=$("#pdpSelectColor").attr("data-defaultcolor");var a=$("#pdpSelectColor").attr("data-defaultcolorname");if(colorImageMap[g]==null){g=$("#pdpSelectColor option").eq(1).val();}if($.trim(g)==""){g=$("#pdpSelectColor option").eq(1).val();}if($.trim(a)==""){a=allColorsMap[g];if(a==""){a=$("#pdpSelectColor option").eq(1).text();}}populateCanvasImage(g,colorImageMap,colorImageAltMap);$(".zoom-color .pdp-item-color").text(a);}showIconsEOB();}function showIconsEOB(){if($(".icon-container-eob").length){if($("#styleCutHolder").data("iseobonlyclearance")){$(".icon-container-eob li").each(function(){var b=$(this).find("span");if(typeof b!="undefined"&&b!=""){var a=b.text();a=a.toUpperCase();if(a.indexOf("SALE")>-1){$(this).remove();}}});}$(".icon-container-eob").removeClass("no-display");}}function updateCanvasColor(a){$(".pdp-item-color").text(getAltImgColorTitle(a,true));}function getAltImgColorTitle(h,g){try{var f=styleColors;var a=h.split("EddieBauer/");var d=a[1].split("?");var b=d[0].split("_");var e=b[1];var i="";$.each(allColorsMap,function(k,j){if(e.indexOf(k)>=0){i=j;return false;}});if(i==""){if(typeof g!="undefined"&&g){i="";}else{i=productDisplayName;}}return i;}catch(c){if(typeof g!="undefined"&&g){return"";}else{return productDisplayName;}}}function populateSelectedColor(c,b){$("#pdpSelectColor").val(c);if($("#pdpSelectColor").val()==""){var a="";$(".style-item").each(function(){var d=$(this).attr("data-styleid");if(b[d]!=null){$.each(b[d],function(f,e){if(e.colorId==c){a=d;return false;}});}if(a!=""){return false;}});$('.style-selection[value="'+a+'"]').prop("checked",true);$('.style-selection[value="'+a+'"]').click();$("#pdpSelectColor").val(c);}if($("#pdpSelectColor").val()!=""){$("#pdpSelectColor").change();}}function showFormErrors(a){a.each(function(){check($(this));});}function isCAorUS(){if($("#addNewCountry").val()==""||$("#addNewCountry").val().toUpperCase()=="CAN"||$("#addNewCountry").val().toUpperCase()=="CA"||$("#addNewCountry").val().toUpperCase()=="US"||$("#addNewCountry").val().toUpperCase()=="USA"){return true;}else{return false;}}function zipRequired(){var a="ARG,AUS,AUT,BGD,BEL,BRA,BRN,BGR,CAN,CHN,CYP,CZE,DNK,EST,FIN,FRA,GUF,DEU,GRC,GLP,GGY,HUN,ISL,IND,IDN,ISR,ITA,JPN,JEY,LVA,LIE,LTU,LUX,MDV,MTQ,MEX,MCO,NLD,NZL,NOR,PAK,PHL,POL,PRT,REU,ROU,RUS,SGP,SVK,SVN,ZAF,KOR,ESP,SWZ,SWE,TWN,THA,TUR,GBR";var b=a.split(",");var c=$("#addNewCountry").val();if(c!=""){c=c.toUpperCase();}if($.inArray(c,b)>=0){return true;
}else{return false;}}function check(c,b){if((c.val()==""&&c.hasClass("required"))||c.data("error")!=""){var a="This field is required";if(c.data("error")!=""){a=c.data("error");}if(c.attr("id")=="addNewZip"&&!isCAorUS()&&typeof b!="undefined"&&b){}else{showErrorToolTip(c,a);}}c.parents("form").enableButtonCheck();}function showErrorToolTip(b,a){b.addClass("error-field");if(b.hasClass("alt-error")){b.parent().append('<div class="alt-error-tooltip">'+'<img class="right" src="/static/img/tooltip-arrow-left.png" alt="" />'+'<p class="right">'+a+"</p>"+'<span class="clear-break"></span>'+"</div>");}else{if(b.hasClass("textarea-error")){b.parent().append('<div class="textarea-error-tooltip">'+'<img class="left" src="/static/img/tooltip-arrow.png" alt="" />'+'<p class="left">'+a+"</p>"+'<span class="clear-break"></span>'+"</div>");}else{b.parent().append('<div class="error-tooltip">'+'<img class="left" src="/static/img/tooltip-arrow.png" alt="" />'+'<p class="left">'+a+"</p>"+'<span class="clear-break"></span>'+"</div>");}}}$.fn.enableButtonCheck=function(){var a=false;this.children(".required").each(function(){if($(this).val()==""){a=true;}});if(this.children(".error-field").length){a=true;}if(a){}else{}};function showProductModal(b){var a=function(){productDetailPageFunctions();};showModal(null,null,b.attr("href"),null,970,true,"15%",null,null,null,null,null,null,null,a);}function showCustomProductModal(a){var b={showOuterClose:true,showClose:false,outsideClickCloses:false,width:1070,contentScroll:true,boxScroll:false};fb.start(a.attr("href"),b);}function reloadWishlistItems(){showLoadingOverlay($(".wishlist-item-container"));$(".wishlist-item-container").load("/user/gadgets/wishlist-items.jsp?_="+Math.random(),function(){removeLoadingOverlay($(".wishlist-item-container"));});}function showModal(g,i,e,o,b,n,m,f,d,j,l,k,c,h,a){EBGLOBAL.sessionTimeout.resetTimeout();if(!n){g.click(function(p){p.preventDefault();showModalExecute(null,i,e,o,b,true,m,f,d,j,l,k,c,h,a);});}else{showModalExecute(null,i,e,o,b,true,m,f,d,j,l,k,c,h,a);}}function showModalExecute(e,d,r,n,p,h,m,s,u,q,c,k,g,a,v){var t=(typeof k!="undefined"&&k!=null&&k!="")?k:false;if(!t){$(".dummy-modal").remove();$(".overlay-modal").remove();}var b=Math.floor(Math.random()*1000);$("body").append('<div id="event_'+b+'" class="dummy-modal"></div>');var e=$("div#event_"+b);var f="overlay_"+Math.floor(Math.random()*1000);var w=(typeof c!="undefined"&&c!=null&&c!="")?c:"#"+f;$(".thumb-enlarge-text").data("target","#"+f);if(!$(w).length){$("body").append('<div id="'+f+'" class="overlay-modal" data-top="'+m+'"><a href="JavaScript:void(0)" id="fbOuterClose" class="close ir">close</a><div class="overlay-modal-container"></div></div>');}var o=n;var l=(typeof g!="undefined"&&g!=null&&g!="")?g:false;var i=(typeof a!="undefined"&&a!=null&&a!="")?a:"center";if(typeof r!="undefined"&&r!=null&&r.indexOf("pdp-shopping-bag-added.jsp")>=0){var j="";$(".ymal-thumb-link").each(function(){j+=$(this).attr("data-prdid")+",";});r=r+"&ymalIds="+j;}e.overlay({target:w,top:m,left:i,closeOnEsc:true,closeOnClick:true,close:$(".close.ir"),load:h,fixed:l,oneInstance:false,onBeforeLoad:function(){if(o==null||o==""){var y="auto";}else{var y=o+"px";}if(p!=null&&p.toString().indexOf("%")>-1){$(w).css("height",y).css("width",p);}else{$(w).css("height",y).css("width",p+"px");}$(w).find(".overlay-modal-container").html("");if(r!=null&&r!=""){$.ajax({type:"get",url:r,cache:false,async:false,dataType:"text",success:function(z){$(w).find(".overlay-modal-container").html(z);},complete:function(){$(w).find(".overlay-modal-container .close").click(function(z){z.preventDefault();e.overlay().close();});$(".confirm-modal").click(function(z){z.preventDefault();e.overlay().close();if(d!=null&&d!=""){d();}});}});}else{$(w).find(".overlay-modal-container").html(q);$(w).find(".overlay-modal-container .close").click(function(z){z.preventDefault();e.overlay().close();});$(".confirm-modal").click(function(z){z.preventDefault();if(d!=null&&d!=""){d();}});}if(typeof v!="undefined"&&v!=null&&v!=""){v();}loadExposeMask();},onLoad:function(y){if(s!=null&&s!=""){s();}reSizeMask();},onClose:function(y){if(u!=null&&u!=""){u();}e.remove();$(w).remove();removeExposeMask();reSizeMask();}});}function openFBModal(b,a){if(b!=""){EBGLOBAL.sessionTimeout.resetTimeout();if(a!=""){fb.start(b,a);}else{fb.start(b,"framed:true;");}}}function FBModalTab(a){jQuery(".anchor").live("click",function(f){var d=jQuery(this).attr("data-top");var b=jQuery(this).attr("data-tab-id");var c=jQuery(this).attr("href");if(d!=""){jQuery(window).scrollTop(d);}else{jQuery(window).scrollTop(0);}if(c!=""){jQuery(c).show();}if(b!=""){$(".tabs").tabs(".ui-tabs-panel",{initialIndex:parseInt(b)});}});if(a!=""){$(".tabs").tabs(".ui-tabs-panel",{initialIndex:a});}}function FBModalScroll(a){}function reSizeMask(){try{var d=0;$(".overlay-modal").each(function(){if($(this).is(":visible")){var e=$(this).position().top+$(this).outerHeight(true);if(e>d){d=e;}}});var b=$("body").position().top+$("body").outerHeight(true);if(d>b){var a=(d+50)/b*100;$("#exposeMask").css("height",a+"%");}else{$("#exposeMask").css("height","100%");}}catch(c){}}function loadExposeMask(){if(!$("#exposeMask").length){$("body").append('<div id="exposeMask"></div>');$("#exposeMask").fadeTo(300,0.4);$("#exposeMask").click(function(){removeExposeMask();$(".close.ir").click();});}}function removeExposeMask(){if(!$(".overlay-modal").length){$("#exposeMask").fadeOut("100",function(){$("#exposeMask").remove();});}}function addToBagCustomProduct(c,a,b,d){if(window.console){console.debug("addToBagCustomProduct");console.debug("productId: "+c);console.debug("skuId: "+a);console.debug("recipeId: "+b);console.debug("quantity: "+d);}$.ajax({url:"/rest/bean/atg/commerce/order/purchase/CartModifierFormHandler/addCustomItemToOrder",type:"POST",dataType:"json",data:{"atg-rest-http-method":"POST","atg-rest-depth":"2","productId":c,"skuId":a,"recipeId":b,"quantity":d},success:function(e){if(window.console){console.debug("commerceItemId: "+e.component.ciAdded);}var f=(window.location!=window.parent.location)?document.referrer:document.location.href;if(f.indexOf("checkout/bag.jsp")>-1){window.top.location.reload(true);return;}if(e.component&&e.component.ciAdded&&e.component.ciAdded.length>0){showModal(null,null,"/modals/pdp/custom-product-added.jsp?commerceId="+e.component.ciAdded,null,600,true,"15%",null,null);addToBagModalLoad();updateShoppingBagCount();}else{if(e.formExceptions&&e.formExceptions.length>0){alert(e.formExceptions);}}}});}function triggerEvent(c,a){var d=c;if(document.createEvent){var b=document.createEvent("MouseEvents");b.initEvent(a,true,false);d.dispatchEvent(b);}else{if(document.createEventObject){var b=document.createEventObject();d.fireEvent("on"+a,b);}}}function testFulfillCustomOrder(){$.ajax({url:"/rest/bean/com/eb/commerce/order/formhandler/EBFulfillmentFormHandler/fulfillCustomOrder",type:"POST",dataType:"json",data:{"atg-rest-http-method":"POST","atg-rest-depth":"2","orderId":"o35660002","commerceItemIds":"ci1336000001","shippingAddressLine1":"876 jgjgfffff","shippingAddressLine2":"apt 555","shippingAddressCity":"Westmont","shippingAddressState":"IL","shippingAddressZipcode":"60559"},success:function(a){}});}function reviewYourSelectionsModal(a){showModal(null,null,"/modals/pdp/custom-product-added.jsp?fromCheckout=true&commerceId="+a,null,600,true,"15%",null,null);}function launchItemAddedModalFromCommerceItemId(a){showModal(null,null,"/modals/pdp/custom-product-added.jsp?commerceId="+a,null,600,true,"15%",null,null);addToBagModalLoad();}function addToWishlistCustomProduct(d,a,b,e){var g=document.getElementById("headShoppingHolder").hasAttribute("data-is-logged-in");if(g){$.ajax({url:"/rest/bean/atg/commerce/gifts/GiftlistFormHandler/addCustomItemToGiftlist",type:"POST",dataType:"json",data:{"atg-rest-http-method":"POST","atg-rest-depth":"2","productId":d,"skuId":a,"recipeId":b,"quantity":e},success:function(h){showModal(null,null,"/modals/pdp/custom-wishlist-added.jsp?giftId="+h.component.giftItemId,null,600,true,"20%",null,null);
updateShoppingBagCount();}});}else{var f="/user/wishlist-login.jsp";var c=window.location.pathname;window.location.assign(f+"?successUrl="+c+"?mtocLoadRecipeId="+b+"&wishProductId="+d+"&wishSkuId="+a+"&wishQuantity="+e);}}function ajaxFormSubmit(j,i,e,h,b,d){var a=j.prop("action"),f=false,g=((f=(typeof arguments[6]!="undefined")?true:false)==true)?arguments[6]:"json";if(a.indexOf("?")>=0){a+="&_="+Math.random();}else{a+="?_="+Math.random();}var c=true;if(d){c=false;}$.ajax({type:"post",url:a,data:j.serialize(),dataType:g,async:c,beforeSend:function(){if(i!=null&&i!=""){i();}},success:function(l,k,m){if(l.success||(f&&l=="")){if(e!=null&&e!=""){e(l,k,m);}}else{if(h!=null&&h!=""){h(l);}}},complete:function(){if(b!=null&&b!=""){b();}},error:function(m,l,k){if(m.status=="409"){location.href="/index.jsp";}else{location.reload(true);}}});}function addressValidationSubmit(e,b,d,g,a,c){var f=e.prop("action");if(f.indexOf("?")>=0){f+="&_="+Math.random();}else{f+="?_="+Math.random();}$.ajax({type:"post",url:f,data:e.serialize(),dataType:"html",async:false,context:c,beforeSend:function(){if(b!=null&&b!=""){b();}},success:function(h){d(h);},complete:function(){if(a!=null&&a!=""){a();}},error:function(j,i,h){if(j.status=="409"){location.href="/index.jsp";}else{location.reload();}}});}function createUserFromBilling(d,c){$("#create-email").val($("#addEmail").val());$("#create-password").val($("#regPwd").val());$("#create-confirm-password").val($("#regConfirmPwd").val());var f=function(h){var e=$("#errorURL").val();if(e.indexOf("?")>=0){e+="&newUser=true";}else{e+="?newUser=true";}$("#errorURL").val(e);var g=$("#successUrl").val();if(g.indexOf("?")>=0){g+="&newUser=true";}else{g+="?newUser=true";}$("#successUrl").val(g);};var b=function(e){d.preventDefault();if(e.email!=""){showErrorToolTip($("#addEmail"),e.email);}if(e.password!=""){showErrorToolTip($("#regPwd"),e.password);}if(e.confirmPassword!=""){showErrorToolTip($("#regConfirmPwd"),e.confirmPassword);}scrollToElement($(".error-field").eq(0),30);$(".response-bg.bag-response").remove();$(".col-1.left").prepend('<div class="response-bg bag-response"> <img alt="" src="/static/img/error-icon.png" class="response-icon"><p class="response-text">'+e.generalMsg+"</p></div>");};var a=function(){try{$(".dummy-modal").overlay().close();}catch(e){}};ajaxFormSubmit($("#create-user-billing"),null,f,b,a,true);}function checkRegionInput(){if($(".state-dropdown").val()=="C6"){$(".region-input").show();}else{$(".region-input input").val("");$(".region-input").hide();}}function updateCountrySelect(e){var b=e;var c=$("option:selected",b);var a=c.parent().prop("label");var d=b.parent(".formItem").siblings().find(".country-dropdown");switch(a){case"--------------Canada--------------":d.val("CAN");break;case"--------------International--------------":d.val("");break;default:d.val("US");}d.change();d.removeClass("error-field");d.closest(".formItem").find(".error-tooltip").remove();}function shareWishlistEvents(){$("#wsPreviewEmailBtn").click(function(f){f.preventDefault();var b=$(".overlay-modal").filter(":visible").eq(0);var g=b.offset().top;if(validateShareFields("wl")){populateShareValues("wl");var d=function(h){b.css("visibility","hidden");scrollToElement(b,20,function(){b.hide();$(".overlay-modal").filter(":visible").eq(0).css("position","absolute").css("top",g+"px");reSizeMask();});previewWishlistEvents();};var c=function(){if($("#exposeMask").is(":visible")&&!$("#exposeMask").is(":animated")){b.css("visibility","visible");b.fadeIn(150,function(){scrollToElement(b);});}};var a="";$("#wlShareItemsHolder .ws-select-item").each(function(){if($(this).prop("checked")){a+=$(this).val()+",";}});showModal(null,null,"/modals/share/wish-list-share-preview.jsp?wlItems="+escape(a),null,660,true,"5%",d,c,null,null,true,true);}});$("#wsSubmitEmailBtn").click(function(d){d.preventDefault();$this=$(this);if($this.hasClass("active-loading")){return false;}if(validateShareFields("wl")){populateShareValues("wl");var c=function(e){var g=function(){$(".close.ir").click();};showModal(null,g,"/modals/confirmation/email-sent.jsp?type=wl",null,370,true,"30%",null,null,null,null,null,true);};var f=function(e){showPdpError($("#wsSubmitEmailBtn"),e.errors[0].message);};var b=function(){$this.addClass("active-loading");};var a=function(){$this.removeClass("active-loading");};ajaxFormSubmit($("#share-wishlist-form"),b,c,f,a);}});}function previewWishlistEvents(){$("#wsEditEmailBtn").click(function(h){h.preventDefault();var g=$(this).closest(".overlay-modal");g.find(".close.ir").click();});$("#wsPreviewSubmitEmailBtn").click(function(j){j.preventDefault();$this=$(this);if($this.hasClass("active-loading")){return false;}var i=function(l){var m=function(){$(".close.ir").click();};showModal(null,m,"/modals/confirmation/email-sent.jsp?type=wl",null,370,true,"30%",null,null,null,null,null,true);};var k=function(l){showPdpError($("#wsPreviewSubmitEmailBtn"),l.errors[0].message);};var h=function(){$this.addClass("active-loading");};var g=function(){$this.removeClass("active-loading");};ajaxFormSubmit($("#share-wishlist-form"),h,i,k,g);});var e=$.trim($("#wishlistShareFName").val());var f=$.trim($("#wishlistShareLName").val());var c=$.trim($("#senderEmail").val());var d=$.trim($("#receiverEmails").val());var b=$("#emailSubject option:selected").text();var a=$.trim($("#emailMsg").val());$("#toEmailPreview").text(d);$("#fromEmailPreview").text(c);$("#subjectPreview").text(b);$("#toNameShare").text(e);$("#fromName").text(e+" "+f);if(a!=""){$("<p><strong>Personal Message:</strong><br /><span>"+a+"</span>").insertAfter("span.personal-message");}}function sharePdpEvents(){$("#wsPreviewEmailBtn").click(function(d){d.preventDefault();if($(".pdp-email-share").hasClass("mini-pdp-opened")){var a=$(this).closest(".overlay-modal");}else{var a=$(".overlay-modal").filter(":visible").eq(0);}var f=a.offset().top;if(validateShareFields("pdp")){populateShareValues("pdp");var c=function(g){a.css("visibility","hidden");scrollToElement(a,20,function(){a.hide();$("#wsEditEmailBtn").closest(".overlay-modal").filter(":visible").eq(0).css("position","absolute").css("top",f+"px");reSizeMask();});previewPdpEvents();};var b=function(){if($("#exposeMask").is(":visible")&&!$("#exposeMask").is(":animated")){a.css("visibility","visible");a.fadeIn(150,function(){scrollToElement(a);});}};showModal(null,null,"/modals/share/pdp-share-preview.jsp?productId="+$(".ws-btns-holder").attr("data-productid")+"&skuId="+$(".ws-btns-holder").attr("data-skuid"),null,660,true,"5%",c,b,null,null,true,true);}});$("#wsSubmitEmailBtn").click(function(d){d.preventDefault();$this=$(this);if($this.hasClass("active-loading")){return false;}if(validateShareFields("pdp")){populateShareValues("pdp");var c=function(e){var g=function(){$(".close.ir").click();};showModal(null,g,"/modals/confirmation/email-sent.jsp?type=pdp",null,370,true,"30%",null,null,null,null,null,true);};var f=function(e){showPdpError($("#wsSubmitEmailBtn"),e.errors[0].message);};var b=function(){$this.addClass("active-loading");};var a=function(){$this.removeClass("active-loading");};ajaxFormSubmit($("#share-pdp-form"),b,c,f,a);}});}function emailUsClean(){var b=document.emailUsForm.elements.length;for(x=0;x<b;x++){var a=window.document.emailUsForm.elements[x];a.value=a.value.replace(/\'/g,"&#39;");a.value=a.value.replace(/\"/g,"&#34;");}return true;}function previewPdpEvents(){$("#wsEditEmailBtn").click(function(h){h.preventDefault();var g=$(this).closest(".overlay-modal");g.find(".close.ir").click();});$("#wsPreviewSubmitEmailBtn").click(function(j){j.preventDefault();$this=$(this);if($this.hasClass("active-loading")){return false;}var i=function(l){var m=function(){$(".close.ir").click();};showModal(null,m,"/modals/confirmation/email-sent.jsp?type=pdp",null,370,true,"30%",null,null,null,null,null,true);};var k=function(l){showPdpError($("#wsPreviewSubmitEmailBtn"),l.errors[0].message);};var h=function(){$this.addClass("active-loading");};var g=function(){$this.removeClass("active-loading");
};ajaxFormSubmit($("#share-pdp-form"),h,i,k,g);});var e=$.trim($("#wishlistShareFName").val());var f=$.trim($("#wishlistShareLName").val());var c=$.trim($("#senderEmail").val());var d=$.trim($("#receiverEmails").val());var b=$("#emailSubject option:selected").text();var a=$.trim($("#emailMsg").val());$("#toEmailPreview").text(d);$("#fromEmailPreview").text(c);$("#subjectPreview").text(b);$("#fromName").text(e+" "+f);if(a!=""){$("<p><strong>Personal Message:</strong><br /><span>"+a+"</span>").insertAfter("span.personal-message");}}function populateShareValues(f){var c=$.trim($("#wishlistShareFName").val());var a=$.trim($("#wishlistShareLName").val());var e=$.trim($("#senderEmail").val());var b=$.trim($("#receiverEmails").val());var g=$("#emailSubject option:selected").text();var h=$.trim($("#emailMsg").val());var d="";var i="";if(f=="wl"){$("#wlShareItemsHolder .ws-select-item").each(function(){if($(this).prop("checked")){d+=$(this).val()+",";i+=getIconText($(this).closest(".ws-item").find(".prd-icons"))+"|";}});}if(f=="pdp"){d=$(".ws-btns-holder").attr("data-productid")+","+$(".ws-btns-holder").attr("data-skuid");$("#sharePdpType").val($("#styleCutHolder").attr("data-pdptype"));if(!$(".pdp-email-share").hasClass("mini-pdp-opened")){$("#sharePdpUrl").val(location.href);}i=getIconText($("#emailShareItemsHolder ul.prd-icons"));}$("#shareFirstName").val(c);$("#shareLastName").val(a);$("#shareFromEmail").val(e);$("#shareToEmails").val(b);$("#shareSubject").val(g);$("#shareItems").val(d);$("#shareMessage").val(h);$("#shareIcons").val(i);}function getIconText(b){if(b==null||!b.length||typeof b=="undefined"){return" ";}else{var d="[";var a=b.find("li").size();var c=1;b.find("li").each(function(){if(c==a){d+=$.trim($(this).text());}else{d+=$.trim($(this).text())+"_";}c++;});d+="]";return d;}}function validateShareFields(h){$(".error-tooltip").remove();$(".alt-error-tooltip").remove();$(".error-field").removeClass("error-field");var f=$("#wishlistShareFName");var a=$("#wishlistShareLName");var g=$("#senderEmail");var e=$("#receiverEmails");var b=/^[\w\.-]+@[\w\.-]+\.[a-zA-Z]+$/;if($.trim(f.val())==""){f.addClass("error-field");showPdpError(f,"Please enter your first name");}if($.trim(a.val())==""){a.addClass("error-field");showErrorToolTip(a,"Please enter your last name");}if($.trim(g.val())==""){g.addClass("error-field");showErrorToolTip(g,"Please enter your email address");}else{if(!b.test(g.val())){g.addClass("error-field");showErrorToolTip(g,"Please enter a valid email address");}}if($.trim(e.val())==""){e.addClass("error-field");showErrorToolTip(e,"Please enter recipient email address(es)");}var d=e.val().split(",");var i;var c=true;$.each(d,function(l,k){var j=$.trim(k);if(j!=""){if(!b.test(j)){c=false;return false;}}});if(!c){e.addClass("error-field");showErrorToolTip(e,"Please enter a valid email address(es)");}if(h=="wl"){if(!$(".ws-select-item:checked").length){$("#wlShareItemsHolder").addClass("error-field");if($(".out-of-stock").length){showShareItemError($(".ws-info"),"To share your wish list at least one item must be in stock");}else{showShareItemError($(".ws-info"),"Please select at least 1 item");}}}if($(".error-field").length){scrollToElement($(".error-field").eq(0),30);return false;}else{return true;}}function showShareItemError(a,b){a.prepend('<div class="error-tooltip">'+'<img class="left" src="/static/img/tooltip-arrow.png" alt="" />'+'<p class="left">'+b+"</p>"+'<span class="clear-break"></span>'+"</div>");}function submitWishlist(d,a){var f="#"+d.data("formid");var e=function(){$(".error-tooltip-alt").remove();};var c=function(g){if(g.maxCartItems!=null&&g.maxCartItems){showModal(null,null,"/modals/pdp/pdp-shopping-bag-full.jsp",null,500,true,"30%",null,null);}else{if(g.maxWlItems!=null&&g.maxWlItems){showModal(null,null,"/modals/pdp/pdp-wishlist-bag-full.jsp",null,500,true,"30%",null,null);}else{wishlistError(d,g.errors[0].message);}}if(d.hasClass("wl-item-quantity")){d.val(d.find("option[selected]").val());}};var b=function(){d.removeClass("active-loading");removeLoadingOverlay($(".wishlist-item-container"));};ajaxFormSubmit($(f),e,a,c,b);}function submitWishlistFromCart(d,a,b,e){var f="#"+d.data("formid");var c=function(g){if(g.maxCartItems!=null&&g.maxCartItems){showModal(null,null,"/modals/pdp/pdp-shopping-bag-full.jsp",null,500,true,"30%",null,null);}else{if(g.maxWlItems!=null&&g.maxWlItems){showModal(null,null,"/modals/pdp/pdp-wishlist-bag-full.jsp",null,500,true,"30%",null,null);}else{wishlistError(d,g.errors[0].message);}}if(d.hasClass("wl-item-quantity")){d.val(d.find("option[selected]").val());}removeLoadingOverlay($("#sbWishlistHolder"));};ajaxFormSubmit($(f),e,a,c,b);}function wishlistError(a,b){a.closest("li").append('<div class="error-tooltip-alt">'+'<p class="left">'+b+"</p>"+'<img class="left" src="/static/img/tooltip-arrow-left.png" alt="" />'+'<span class="clear-break"></span>'+"</div>");}function showPdpError(a,b){a.closest(".formItem").append('<div class="alt-error-tooltip hide">'+'<img class="right" src="/static/img/tooltip-arrow-left.png" alt="" />'+'<p class="right">'+b+"</p>"+'<span class="clear-break"></span>'+"</div>");$(".alt-error-tooltip").fadeIn(300);}function showPdpError(a,b){a.closest(".formItem").append('<div class="alt-error-tooltip hide">'+'<img class="right" src="/static/img/tooltip-arrow-left.png" alt="" />'+'<p class="right">'+b+"</p>"+'<span class="clear-break"></span>'+"</div>");$(".alt-error-tooltip").fadeIn(300);}function showSearchError(a,b){a.closest(".form-item").append('<div class="alt-error-tooltip hide">'+'<img class="right" src="/static/img/tooltip-arrow-left.png" alt="" />'+'<p class="right">'+b+"</p>"+'<span class="clear-break"></span>'+"</div>");$(".alt-error-tooltip").fadeIn(300);}function scrollToElement(a,d,b){var c=0;if(typeof d!="undefined"&&d!=null&&d!=""){c+=d;}$("html, body").animate({scrollTop:a.offset().top-c},800,function(){if(typeof b!="undefined"&&b!=null&&b!=""){b();}});}function updateShoppingBagCount(){$.ajax({type:"get",url:"/xhr/bag-header.jsp",cache:false,dataType:"html",success:function(a){$("#headShoppingHolder").html(a);}});}function setMainNavActive(a){$(".f-arrow").hide();$("#mainNav a").removeClass();$("#"+a).addClass("active");}function closeUtNavWidget(b,a){if(!$(b).is(".ut-flyout")&&!$(b).parents().is(".ut-active")||$(b).is(".ut-close-btn")||$(b).is(".ut-close-btn span")){$(".ut-flyout").hide();$("#utilityNav li").not($(b).parent()).removeClass("ut-active");$(".ut-trigger .downArrow").html("&nbsp;&#9660;");$("#headSearchCategoryHolder").removeClass("ut-active");if($(b).is(".ut-close-btn")){a.preventDefault();}}}function openUtNavWidget(a){$(".ut-trigger .downArrow").html("&nbsp;&#9660;");$("#utilityNav li").not(a.parent()).removeClass("ut-active");$(".ut-flyout").not(a).hide();a.parent().toggleClass("ut-active",function(){if(a.parent().hasClass("ut-active")){a.next("div").show();a.find(".downArrow").html("&nbsp;&#9650;");}else{a.next("div").hide();a.find(".downArrow").html("&nbsp;&#9660;");}});if($("#headSearchCats").attr("style")=="display: none;"){a.next("div").show();$("#headSearchCategoryHolder").addClass("ut-active");a.find(".downArrow").html("&nbsp;&#9650;");}}function startHeroSlideshow(){$(".hero #slideshow").css("overflow","hidden");$(".hero ul#slides").cycle({fx:"fade",pause:1,prev:".prev-btn",next:".next-btn"});}function thumbnailSliderInit(){var e=$(".thumbnail-gallery li").size(),c=$(".thumbnail-gallery > li:first").outerWidth(true),a=c*e;if($("#mainContentHolder.mini-pdp").length){var b=4;}else{var b=5;}var d=b*c;var f=(d-a);$(".thumbnail-gallery").width(a);if(e<=b){$(".t-gal-prev").hide();$(".t-gal-next").hide();}else{$(".t-gal-prev").on("click",function(g){if($(".thumbnail-gallery").position().left<0&&!$(".thumbnail-gallery").is(":animated")){$(".thumbnail-gallery").animate({left:"+="+c*b+"px"});}g.preventDefault();});$(".t-gal-next").on("click",function(g){if($(".thumbnail-gallery").position().left>f&&!$(".thumbnail-gallery").is(":animated")){$(".thumbnail-gallery").animate({left:"-="+c*b+"px"});
}g.preventDefault();});}}function toggleAccordion(a){$(a.target).next("ul").siblings("ul").slideUp("fast");$(a.target).next("ul").slideToggle("fast");$(a.target).toggleClass("open");}function expandAccordionAll(){$(".expandable ul").slideDown("fast");$(".expandable h3").addClass("open");}function collapseAccordionAll(){$(".expandable ul").slideUp("fast");$(".expandable h3").removeClass("open");}function facetCheck(a){window.location.href=a.siblings("a").attr("href");}function enableSizeChart(a){var c=a.attr("data-dept");try{c=c.replace(/\D/g,"");c=Number(c);}catch(b){c="";}if(c=="6"||c=="8"||c=="9"||c=="06"||c=="08"||c=="09"||c=="10"||c=="11"||c=="17"||c=="31"||c=="45"||c=="16"||c=="20"||c=="1"||c=="4"||c=="01"||c=="04"||c=="15"||c=="29"||c=="33"||c=="34"||c=="38"||c=="14"||c=="19"||c=="3"||c=="87"||c=="88"||c=="89"||c=="41"||c=="4000"||c=="4001"||c=="4002"||c=="12"||c=="3412"||c=="3415"){a.show();}}function getSizeChartRequest(g){var f=$(g);var d=f.attr("data-dept");if(d=="i03"){d=1;}else{try{d=d.replace(/\D/g,"");d=Number(d);}catch(c){d="";}}var b="";var a=0;if(d==""){showModal(null,null,"/modals/informational-guides/no-size-chart-available.jsp",null,500,true,"40%",null,null,null,null,true);}else{if(d=="6"||d=="8"||d=="9"||d=="06"||d=="08"||d=="09"||d=="10"||d=="11"||d=="17"||d=="31"||d=="45"){b="womens-size-chart.jsp";a=0;}if(d=="16"){b="womens-size-chart.jsp";a=1;}if(d=="20"){b="womens-size-chart.jsp";a=2;}if(d=="1"||d=="4"||d=="01"||d=="04"||d=="15"||d=="29"||d=="33"||d=="34"||d=="38"){b="mens-size-chart.jsp";a=0;}if(d=="14"){b="mens-size-chart.jsp";a=1;}if(d=="19"){b="mens-size-chart.jsp";a=2;}if(d=="3"){b="mens-size-chart.jsp";a=3;}if(d=="88"){b="fa-size-chart.jsp";a=0;}if(d=="89"){b="fa-size-chart.jsp";a=1;}if(d=="41"){b="fa-size-chart.jsp";a=2;}if(d=="4000"){b="kids-size-chart.jsp";a=0;}if(d=="4001"||d=="87"){b="kids-size-chart.jsp";a=1;}if(d=="4002"){b="kids-size-chart.jsp";a=2;}if(d=="12"){b="swim-size-chart.jsp";a=0;}if(d=="3412"){b="swim-miraclesuit-size-chart.jsp";a=0;}if(d=="3415"){b="swim-athena-size-chart.jsp";a=0;}if(b==""){showModal(null,null,"/modals/informational-guides/no-size-chart-available.jsp",null,500,true,"40%",null,null,null,null,true);}else{openSizeChartModal(b,a);}}}var bool_RunOnce=false;function openSizeChartModal(b,a){if(bool_RunOnce==true){return;}showModal(null,null,"/modals/informational-guides/"+b,null,992,true,"15%",sizeChartInit,sizeChartOff,null,null,true);$(".size-chart .tabs").tabs(".tab-content > div",{initialIndex:a});$(".size-chart .tab-content").fadeTo(300,1);bool_RunOnce=true;}function sizeChartInit(){$(".sc-trigger").on("click",function(c){bool_RunOnce=false;var b=$(this);swapSizeChart(b);c.preventDefault();});var a=$(".size-chart-holder").parent().parent().parent().parent();$(window).on("resize",function(){var c=($(document).width()/2)-(a.width()/2);a.css({top:"15%",left:c+"px"});var b=a.offset();if(b.left<0){a.css({top:"15%",left:"0"});}});}function sizeChartOff(){$(window).off("resize");}function swapSizeChart(c){var g=$(c).parent();var b=$(c).attr("data-in");var a=$(c).attr("data-cm");var f=$(c).parent().siblings("img");var e=f.attr("data-insrc");var d=f.attr("data-cmsrc");if($(c).hasClass("sc-in")){$(c).removeClass("sc-in");$(c).addClass("sc-cm");f.attr("src",d);$(c).attr("coords",a);if($(c).hasClass("mc-trigger")){$(".mc-info").attr("src",$(".mc-info").attr("data-cmsrc"));}}else{$(c).removeClass("sc-cm");$(c).addClass("sc-in");f.attr("src",e);$(c).attr("coords",b);if($(c).hasClass("mc-trigger")){$(".mc-info").attr("src",$(".mc-info").attr("data-insrc"));}}}function pdpTabContentCheck(){if($("#pdpTabHolder .tab-content").children().length<2){$("#pdpTabHolder .tabs").remove();$("#pdpTabHolder .tab-content").css({"border":"none","padding-top":0});$(".swatch-holder").css({"margin-bottom":"10px"});}}function showMonogramError(a,c,b){a.closest(".show-the-error").append('<div class="error-tooltip '+b+'">'+'<img class="left" src="/static/img/tooltip-arrow.png" alt="" />'+'<p class="left">'+c+"</p>"+'<span class="clear-break"></span>'+"</div>");}function initMonogram(b,j){var f="/static/img/monogramming/";$(".overlay-modal #monogramStyle").on("change",function(){$this=$(this);var l=$this.val();c(l,j);k();});$(".overlay-modal #monogramColor").on("change",function(l){k();a();});$(".overlay-modal #monogramFont").on("change",function(l){k();a();});$(".overlay-modal #monoFirstInitial").on("keyup",function(l){if($(this).val()!=""){$(".error-tooltip").remove();$(this).removeClass("error-field");}h();});$(".overlay-modal #monoLastInitial").on("keyup",function(l){if($(this).val()!=""){$(".error-tooltip").remove();$(this).removeClass("error-field");}h();});$(".overlay-modal #monoMiddleInitial").on("keyup",function(l){if($(this).val()!=""){$(".error-tooltip").remove();$(this).removeClass("error-field");}h();});$(".overlay-modal #monogramNameWord").on("keyup",g);$("#enterInitials input").focus(function(l){$(this).select();});if($("#monogramStyle option").size()==2&&!b){$("#monogramStyle").val($("#monogramStyle option").eq(1).val()).change();}function c(p,o){var m=$("#monogramColor").val();$(".mono-style-color-options").remove();var l="";var n=o[p];if(n!=null){$.each(n,function(q,r){l+='<option data-displayname="'+r.colorName+'" class="mono-style-color-options" value="'+r.colorId+'">'+r.colorName+"</option>";});$("#monogramColor").append(l);}$("#monogramColor").val(m).change();}function k(){var l=$("#monogramStyle option:selected").val();var n=$("#monogramColor option:selected").val();var m=$("#monogramFont option:selected").val();if(l==="3"&&n!="-1"&&m!="-1"){d();e();$(".monogram-3").show();$("#monogramPreview").show().append('<img src="/static/img/monogramming/blank.gif" id="mgmFirstInitial" class="mgmInitialImage" alt="" /><img src="/static/img/monogramming/blank.gif" id="mgmLastInitial" class="mgmInitialImageLg" alt="" /><img src="/static/img/monogramming/blank.gif" id="mgmMiddleInitial" class="mgmInitialImage" alt="" />');}else{if(l==="5"&&n!="-1"&&m!="-1"){i();e();$(".monogram-9").show();$("#monogramPreview").show();}else{i();d();e();}}}function i(){$("#monoFirstInitial").val("");$("#monoLastInitial").val("");$("#monoMiddleInitial").val("");}function d(){$("#monogramNameWord").val("");}function e(){$(".monogram-3").hide();$(".monogram-9").hide();$("#monogramPreview").empty().hide();}function a(){var l=$("#monogramStyle option:selected").val();if(l==="3"){h();}else{if(l==="5"){g();}}}function h(){var s=$("#monoFirstInitial");var t=$("#monoMiddleInitial");var o=$("#monoLastInitial");var n=$("#monoFirstInitial").val().toUpperCase();var u=$("#monoMiddleInitial").val().toUpperCase();var r=$("#monoLastInitial").val().toUpperCase();var l=$("#monogramColor option:selected").val();var p;var m=false;var q=false;if(s.is(":focus")){p=o;m=true;}else{if(o.is(":focus")){p=t;q=true;}}if(n.match(/[a-zA-Z]/g)){$("#mgmFirstInitial").attr("src",f+l+"/"+n+"_gb_uc.gif");if(m){p.focus().select().focus();}}else{$("#mgmFirstInitial").attr("src",f+"blank.gif");s.val(n.slice(0,-1));}if(u.match(/[a-zA-Z]/g)){$("#mgmMiddleInitial").attr("src",f+l+"/"+u+"_gb_uc.gif");}else{$("#mgmMiddleInitial").attr("src",f+"blank.gif");t.val(u.slice(0,-1));}if(r.match(/[a-zA-Z]/g)){$("#mgmLastInitial").attr("src",f+l+"/"+r+"_gb_uc.gif");if(q){p.focus().select().focus();}}else{$("#mgmLastInitial").attr("src",f+"blank.gif");o.val(r.slice(0,-1));}}function g(){$(".error-tooltip").remove();$(".error-field").removeClass("error-field");var t=$("#monogramNameWord");var l=t.val();l=l.charAt(0).toUpperCase()+l.slice(1).toLowerCase();var v=l.length;var p=$("#monogramColor option:selected").val();var m=$("#monogramPreview");t.val(l);m.empty();for(var r=0;r<v;r++){var u=l.charAt(r);var n=u.match(/[a-zA-Z]/g);var q=u.match(/[a-z]/g)?"lc":"uc";var o=u.match(/[0-9]/g);var s=u.match(/[^\w]/g);if(u===" "){m.append('<img src="'+f+'blank.gif" class="mgmWord" alt="'+u+'" />');}else{if(o){m.append('<img src="'+f+p+"/"+u+'_gb.gif" class="mgmWord" alt="'+u+'" />');}else{if(s){switch(u){case"&":m.append('<img src="'+f+p+'/ampersand_gb.gif" class="mgmWord" alt="'+u+'" />');
break;case",":m.append('<img src="'+f+p+'/comma_gb.gif" class="mgmWord" alt="'+u+'" />');break;case"'":m.append('<img src="'+f+p+'/apostrophe_gb.gif" class="mgmWord" alt="'+u+'" />');break;case"-":m.append('<img src="'+f+p+'/hyphen_gb.gif" class="mgmWord" alt="'+u+'" />');break;case".":m.append('<img src="'+f+p+'/period_gb.gif" class="mgmWord" alt="'+u+'" />');break;case"#":m.append('<img src="'+f+p+'/pound_gb.gif" class="mgmWord" alt="'+u+'" />');break;case'"':m.append('<img src="'+f+p+'/quote_gb.gif" class="mgmWord" alt="'+u+'" />');break;case"/":m.append('<img src="'+f+p+'/slash_gb.gif" class="mgmWord" alt="'+u+'" />');break;case"@":m.append('<img src="'+f+p+'/atsign_gb.gif" class="mgmWord" alt="'+u+'" />');break;case"*":m.append('<img src="'+f+p+'/asterisk_gb.gif" class="mgmWord" alt="'+u+'" />');break;default:t.val(l.slice(0,-1));return;}}else{if(n){m.append('<img src="'+f+p+"/"+u+"_gb_"+q+'.gif" class="mgmWord" alt="'+u+'" />');}else{t.val(l.slice(0,-1));return;}}}}}}}function validateMonogramInputs(){$(".error-tooltip").remove();$(".error-field").removeClass("error-field");var a=true;if($("#monogramStyle").val()==""||$("#monogramStyle").val()==-1){a=false;$("#monogramStyle").addClass("error-field");}if($("#monogramColor").val()==""||$("#monogramColor").val()==-1){a=false;$("#monogramColor").addClass("error-field");}if($("#monogramFont").val()==""||$("#monogramFont").val()==-1){a=false;$("#monogramFont").addClass("error-field");}if(!a){showMonogramError($("#monogramFont"),"Please select all fields","monogram-error");}var b=true;if($("#enterInitials").is(":visible")){if($.trim($("#monoFirstInitial").val())==""){b=false;$("#monoFirstInitial").addClass("error-field");}if($.trim($("#monoLastInitial").val())==""){b=false;$("#monoLastInitial").addClass("error-field");}if($.trim($("#monoMiddleInitial").val())==""){b=false;$("#monoMiddleInitial").addClass("error-field");}if(!b){a=false;showMonogramError($("#monoMiddleInitial"),"Please enter all initials","monogram-input-error");}}else{if($.trim($("#monogramNameWord").val())==""){$("#monogramNameWord").addClass("error-field");showMonogramError($("#monogramNameWord"),"Please enter a valid monogram","monogram-input-error-word");a=false;}}return a;}function getMonogramInputText(a){var b="";if($("#enterInitials").is(":visible")){b=$("#monoFirstInitial").val()+" "+$("#monoLastInitial").val()+" "+$("#monoMiddleInitial").val();b=b.toUpperCase();}else{b=$("#monogramNameWord").val();}return b;}function wlZoomMouseenter(b,a){if(a!=undefined){b.parent().append('<img class="wl-item-zoom-img" src="'+a+'" alt="" />');if($(".wl-item-zoom-img").not(":animated")){$(".wl-item-zoom-img").animate({width:183+"px",opacity:1},300);wlZoomMouseleave();}}else{b.parent().append('<img class="wl-item-zoom-img" src="/static/img/photo-unavailable.png" alt="" />');if($(".wl-item-zoom-img").not(":animated")){$(".wl-item-zoom-img").animate({width:100+"px",opacity:1},300);wlZoomMouseleave();}}}function wlZoomMouseleave(){$(".wl-item-zoom-img").off().mouseleave(function(){$(".wl-item-zoom-img").animate({width:0,opacity:0},300,function(){$(".wl-item-zoom-img").remove();});});}function prePopulateProductInfo(d){var e=$.trim(d.attr("data-style"));var b=$.trim(d.attr("data-color"));var c=$.trim(d.attr("data-size"));var f=$.trim(d.attr("data-hemstyle"));var a=$.trim(d.attr("data-inseam"));var g=$.trim(d.attr("data-quantity"));if(!$('.style-selection[value="'+e+'"]').prop("checked")){$('.style-selection[value="'+e+'"]').prop("checked",true);$('.style-selection[value="'+e+'"]').click();}$("#pdpSelectColor").val(b);if($("#pdpSelectColor").val()==""){$("#pdpSelectColor").val($("#pdpSelectColor").attr("data-defaultcolor"));}$("#pdpSelectColor").change();$("#pdpSelectSize").val(c).change();$("#pdpSelectHemStyle").val($('#pdpSelectHemStyle option[data-hemstyle="'+f+'"]').val()).change();$("#pdpSelectHemLength").val(a);$("#pdpSelectQuantity").val(g);if($("#edit-item-monogram").data("ismonogram")){$("#pdp-monogram-option").prop("checked",true);}if($("#edit-item-giftbox").data("isgiftbox")){$("#pdp-gift-box-option").prop("checked",true);}}function getMonogramSku(e){try{var d=$("#monogramStyle").val();var b=$("#monogramColor").val();var c=e[d];var a="";if(c!=null){$.each(c,function(g,h){if(b==h.colorId){a=h.skuId;}});}return a;}catch(f){return"";}}function monogramEvents(c){var b=false;if(typeof c!="undefined"&&c!=null){b=c;}var i=null;try{i=$.parseJSON($("#monogramColorMap").text());}catch(d){}initMonogram(false,i);if(b&&$("#edit-item-monogram").data("ismonogram")){var g=$("#edit-item-monogram");var h=""+g.attr("data-stylekey");var a=""+g.attr("data-colorkey");var f=""+g.attr("data-fontkey");var e=""+g.data("inputtext");$("#monogramStyle").val($('option[data-displayname="'+h+'"]').val());$("#monogramStyle").change();$("#monogramColor").val($('option[data-displayname="'+a+'"]').val());$("#monogramColor").change();$("#monogramFont").val($('option[data-displayname="'+f+'"]').val());if(h.indexOf("3")>=0){$("#monoFirstInitial").val(e.charAt(0));$("#monoLastInitial").val(e.charAt(2));$("#monoMiddleInitial").val(e.charAt(4)).keyup();}else{$("#monogramNameWord").val(e).keyup();}}$(".continue-with-monogram").click(function(m){m.preventDefault();var o=$(this);if(o.hasClass("active-loading")){return false;}var r=validateMonogramInputs();if(r){var k=getMonogramSku(i);if(k==null||k==""){showPdpError($(".continue-with-monogram"),"Error adding monogram to your bag.");return false;}$("#bag-monogram-style").val($("#monogramStyle option:selected").text());$("#bag-monogram-style-key").val($("#monogramStyle").val());$("#bag-monogram-text-color").val($("#monogramColor  option:selected").text());$("#bag-monogram-text-style").val($("#monogramFont option:selected").text());$("#bag-monogram-sku").val(k);var n=getMonogramInputText();$("#bag-monogram-input-text").val(n);if(b){var l=function(s){if($("body").hasClass("checkout-review")){if(s.redirectPayment){location.href="/checkout/payment.jsp";}else{reloadCheckoutOrderSummary(false,false,true);$(".close.ir").click();}}else{$(".close.ir").click();reloadOrderSummary(true);}};var q=function(s){if(s.maxCartItems!=null&&s.maxCartItems){showModal(null,null,"/modals/pdp/pdp-shopping-bag-full.jsp",null,500,true,"30%",null,null,null,null,true);}else{showPdpError(o,s.errors[0].message);}};var j=function(){o.removeClass("active-loading");};var p=function(){o.addClass("active-loading");};}else{var l=function(t){var s=t.commerceId;var u=addToBagModalLoad;showModal(null,null,"/modals/pdp/pdp-shopping-bag-added.jsp?commerceId="+s,null,600,true,"15%",u,null);updateShoppingBagCount();};var q=function(s){if(s.maxCartItems!=null&&s.maxCartItems){showModal(null,null,"/modals/pdp/pdp-shopping-bag-full.jsp",null,500,true,"30%",null,null);}else{showPdpError($(".continue-with-monogram"),s.errors[0].message);}};var j=function(){o.removeClass("active-loading");};var p=function(){o.addClass("active-loading");};}ajaxFormSubmit($("#add-to-bag-form"),p,l,q,j);}else{o.removeClass("active-loading");}});$(".continue-without-monogram").click(function(n){n.preventDefault();var m=$(this);if(m.hasClass("active-loading")){return false;}$("#bag-is-monogram").val("false");if(b){var l=function(p){if($("body").hasClass("checkout-review")){if(p.redirectPayment){location.href="/checkout/payment.jsp";}else{reloadCheckoutOrderSummary(false,false,true);$(".close.ir").click();}}else{$(".close.ir").click();reloadOrderSummary(true);}};var o=function(p){if(p.maxCartItems!=null&&p.maxCartItems){showModal(null,null,"/modals/pdp/pdp-shopping-bag-full.jsp",null,500,true,"30%",null,null,null,null,true);}else{showPdpError(m,p.errors[0].message);}};var j=function(){m.removeClass("active-loading");};var k=function(){m.addClass("active-loading");};}else{var l=function(q){var p=q.commerceId;var r=addToBagModalLoad;showModal(null,null,"/modals/pdp/pdp-shopping-bag-added.jsp?commerceId="+p,null,600,true,"15%",r,null);updateShoppingBagCount();};var o=function(p){if(p.maxCartItems!=null&&p.maxCartItems){showModal(null,null,"/modals/pdp/pdp-shopping-bag-full.jsp",null,500,true,"30%",null,null);
}else{$("a.close.ir").click();showPdpError($("#pdpAddCartFormSubmit"),p.errors[0].message);}};var j=function(){m.removeClass("active-loading");};var k=function(){m.addClass("active-loading");};}ajaxFormSubmit($("#add-to-bag-form"),k,l,o,j);});}function addToWishlistFromLogin(b){var c=$(".pdp-wishlist-link.formItem").attr("data-effort"),a=$(".pdp-wishlist-link.formItem").attr("data-iseob"),d=$(".pdp-wishlist-link.formItem").attr("data-issale");$(".pdp-wishlist-link.formItem").load("/xhr/pdp-wishlist-form.jsp?effort="+c+"&isEOB="+a+"&isSale="+d+"&_="+Math.random(),function(){var f=false;$("#wishlist-product-id").val($("#bag-product-id").val());f=buildWishlistFormValues(b);if(f){var e=function(){location.reload(true);},g=function(){$("#pdpAddToWishlist").removeClass("active-loading");},i=function(j){if(j.maxWlItems!=null&&j.maxWlItems){showModal(null,null,"/modals/pdp/pdp-wishlist-bag-full.jsp",null,500,true,"30%",null,e);}else{showPdpError($("#pdpAddToWishlist"),j.errors[0].message);}},h=function(j){showModal(null,null,"/modals/pdp/pdp-wishlist-added.jsp?giftId="+j.giftItemId,null,600,true,"20%",null,e);};ajaxFormSubmit($("#add-to-wishlist-form"),null,h,i,g);}});}function populateSkuId(c,b){try{if($("#product-display-name").text().toUpperCase()==b[c][0].toUpperCase()){$(".pdp-item-id .style-name").text("");}else{$(".pdp-item-id .style-name").text(b[c][0]);}}catch(d){}var e="";if($(".pdp-clearance-container").length&&$(".pdp-clearance-container").is(":visible")){var a=b[c][1].split(" ");if($.inArray($("#pdpSelectColor").val(),clearanceColors[$(".style-selection:checked").val()])<0){e=a[0]+" "+"792"+" "+a[2];}else{e=a[0]+" "+"709"+" "+a[2];}}else{e=b[c][1];}if(e==""){e=b[c][1];}$(".pdp-item-id .sku-id").text(e);}function giftBoxEvents(c,a){var d=false;if(typeof a!="undefined"&&a!=null){d=a;}if(d&&$("#edit-item-giftbox").data("isgiftbox")){var b=$("#edit-item-giftbox");$("#gift-box-to").val(b.data("giftboxto"));$("#gift-box-from").val(b.data("giftboxfrom"));$("#gift-box-message").val(b.data("giftboxmessage"));}$("#submit-gift-box").click(function(k){k.preventDefault();var j=$(this);if(j.hasClass("active-loading")){return false;}if($.trim($("#gift-box-to").val())==""){$("#gift-box-to").addClass("error-field");showErrorToolTip($("#gift-box-to"),"This field is required");return false;}if($.trim($("#gift-box-from").val())==""){$("#gift-box-from").addClass("error-field");showErrorToolTip($("#gift-box-from"),"This field is required");return false;}$("#bag-giftbox-to").val($("#gift-box-to").val());$("#bag-giftbox-from").val($("#gift-box-from").val());$("#bag-giftbox-message").val($("#gift-box-message").val());if(c){if(d){$(".add-gb-modal").closest(".overlay-modal").find(".close.ir").click();var i=function(){monogramEvents(d);};showModal(null,null,"/modals/pdp/pdp-add-monogram.jsp?productId="+$("#bag-product-id").val()+"&skuid="+$("#bag-skuId").val(),null,619,true,"15%",i,null,null,null,true);}else{var i=function(){monogramEvents(d);};showModal(null,null,"/modals/pdp/pdp-add-monogram.jsp?productId="+$("#bag-product-id").val()+"&skuid="+$("#bag-skuId").val(),null,619,true,"15%",i,null);}}else{if(d){var h=function(e){if($("body").hasClass("checkout-review")){if(e.redirectPayment){location.href="/checkout/payment.jsp";}else{reloadCheckoutOrderSummary(false,false,true);$(".close.ir").click();}}else{$(".close.ir").click();reloadOrderSummary(true);}};var l=function(e){if(e.maxCartItems!=null&&e.maxCartItems){showModal(null,null,"/modals/pdp/pdp-shopping-bag-full.jsp",null,500,true,"30%",null,null,null,null,true);}else{showPdpError(j,e.errors[0].message);}};var f=function(){j.removeClass("active-loading");};var g=function(){j.addClass("active-loading");};}else{var h=function(m){var e=m.commerceId;var n=addToBagModalLoad;showModal(null,null,"/modals/pdp/pdp-shopping-bag-added.jsp?commerceId="+e,null,600,true,"15%",n,null);updateShoppingBagCount();};var l=function(e){if(e.maxCartItems!=null&&e.maxCartItems){showModal(null,null,"/modals/pdp/pdp-shopping-bag-full.jsp",null,500,true,"30%",null,null);}else{$("a.close.ir").click();showPdpError($("#pdpAddCartFormSubmit"),e.errors[0].message);}};var f=function(){j.removeClass("active-loading");};var g=function(){j.addClass("active-loading");};}ajaxFormSubmit($("#add-to-bag-form"),g,h,l,f);}});$(".no-gift-box").click(function(k){k.preventDefault();var j=$(this);if(j.hasClass("active-loading")){return false;}$("#bag-is-giftbox").val("false");if(c){if(d){$(".add-gb-modal").closest(".overlay-modal").find(".close.ir").click();var i=function(){monogramEvents(d);};showModal(null,null,"/modals/pdp/pdp-add-monogram.jsp?productId="+$("#bag-product-id").val()+"&skuid="+$("#bag-skuId").val(),null,619,true,"15%",i,null,null,null,true);}else{var i=function(){monogramEvents(d);};showModal(null,null,"/modals/pdp/pdp-add-monogram.jsp?productId="+$("#bag-product-id").val()+"&skuid="+$("#bag-skuId").val(),null,619,true,"15%",i,null);}}else{if(d){var h=function(e){if($("body").hasClass("checkout-review")){if(e.redirectPayment){location.href="/checkout/payment.jsp";}else{reloadCheckoutOrderSummary(false,false,true);$(".close.ir").click();}}else{$(".close.ir").click();reloadOrderSummary(true);}};var l=function(e){if(e.maxCartItems!=null&&e.maxCartItems){showModal(null,null,"/modals/pdp/pdp-shopping-bag-full.jsp",null,500,true,"30%",null,null,null,null,true);}else{showPdpError(j,e.errors[0].message);}};var f=function(){j.removeClass("active-loading");};var g=function(){j.addClass("active-loading");};}else{var h=function(m){var e=m.commerceId;var n=addToBagModalLoad;showModal(null,null,"/modals/pdp/pdp-shopping-bag-added.jsp?commerceId="+e,null,600,true,"15%",n,null);updateShoppingBagCount();};var l=function(e){if(e.maxCartItems!=null&&e.maxCartItems){showModal(null,null,"/modals/pdp/pdp-shopping-bag-full.jsp",null,500,true,"30%",null,null);}else{$("a.close.ir").click();showPdpError($("#pdpAddCartFormSubmit"),e.errors[0].message);}};var g=function(){j.addClass("active-loading");};var f=function(){j.removeClass("active-loading");};}ajaxFormSubmit($("#add-to-bag-form"),g,h,l,f);}});}function addToBagModalLoad(){var b=$("#productDetailsHolder").data("referer");var a=$("#productDetailsHolder").data("catname");a=a.replace("_","&");if($.trim(b)!=""){$(".back-to-category-link").attr("href",b);$(".back-to-category-link").removeClass("close").off();$(".back-to-category").text(decodeURIComponent(a));$(".back-to-category-link").click(function(c){c.preventDefault();if(window.history.length<=1){location.href=$(".back-to-category-link").attr("href");}else{window.history.back();}});}else{$(".back-to-category").text("Previous Page");}$(".ymal-look-tab").click(function(f){f.preventDefault();var d=$(this);var c=d.index();if(d.hasClass("active")){return false;}$(".ymal-look-tab").removeClass("active");d.addClass("active");$(".ymal-looks-content").hide();$(".ymal-looks-content").eq(c).fadeIn("fast");});}function populatePdpPrice(a,b,c){if(clearanceColors!=null){if(b=="style"){var d=$("#pdpSelectColor").val();if($.inArray(d,clearanceColors[$(".style-selection:checked").val()])<0){populateMainPrice(a,true);populateMainClearancePrice(false,a);}else{populateMainClearancePrice(false,a);}}else{if(b=="color"){var d=$("#pdpSelectColor").val();if($.inArray(d,clearanceColors[$(".style-selection:checked").val()])<0){populateSideBarPrice(a,c,false);populateMainPrice(a,true);}else{populateSideBarPrice(a,c,true);populateMainClearancePrice(false,a);}}else{populateSideBarPrice(a,c,false);populateMainPrice(a,true);populateMainClearancePrice(true,a);}}}else{if(b=="style"){populateMainPrice(a,false);}else{if(b=="color"){populateSideBarPrice(a,c,false);populateMainPrice(a,false);}else{populateSideBarPrice(a,c,false);populateMainPrice(a,false);}}}}function populateSideBarPrice(a,b,c){$("#styleCutHolder .style-item").each(function(){$this=$(this);var e=$this.find(".style-selection").val();var d=$("#pdpSelectColor").val();if(d==""){if(clearanceColors!=null){$.each(b[e],function(j,i){if($.inArray(i.colorId,clearanceColors[e])<0){d=i.colorId;
return false;}});if(d==""){d=b[e][0].colorId;}}else{d=b[e][0].colorId;}}var f=a[d][e];var g=getPriceHtml(f);if(g==""){if(c){var h=b[e][0].colorId;if(clearanceColors!=null){$.each(b[e],function(j,i){if($.inArray(i.colorId,clearanceColors[e])>-1){h=i.colorId;return false;}});}f=a[h][e];g=getPriceHtml(f);}else{var h=b[e][0].colorId;if(clearanceColors!=null){$.each(b[e],function(j,i){if($.inArray(i.colorId,clearanceColors[e])<0){h=i.colorId;return false;}});}f=a[h][e];g=getPriceHtml(f);}}if(g!=""){$this.find(".pdp-style-price").html(g);}});}function populateClearancePriceInMain(b){var a=$(".style-selection:checked").val();var e=$("#pdpSelectColor").val();if(e==""){e=$(".swatch-holder-clearance a").eq(0).attr("data-colorid");}var c=b[e][a];var d=getPriceHtml(c);if(d!=""){$(".clearance-text").remove();$('<div class="clearance-text">CLEARANCE</div>').insertBefore(".pdpSwatches");copyClearanceSwatchesToMain();$("#pdpPriceHolder").html(d);$(".pdp-clearance-container").hide();}}function copyClearanceSwatchesToMain(){$(".swatch-holder").html($(".swatch-holder-clearance").html());}function populateMainPrice(c,a){if(a){$("#pdpPriceHolder").next(".clearance-text").remove();var b=$(".style-selection:checked").val();if($(".swatch-holder a").eq(0).attr("data-colorid")==null||$(".swatch-holder a").eq(0).attr("data-colorid")==""){populateClearancePriceInMain(c);return;}var g=$("#pdpSelectColor").val();if(g==""){g=$(".swatch-holder a").eq(0).attr("data-colorid");}var e=c[g][b];var f=getPriceHtml(e);if(f!=""){$("#pdpPriceHolder").html(f);}}else{var d=$(".style-selection:checked").closest(".formItem").find(".pdp-style-price").html();$("#pdpPriceHolder").html(d);}}function populateMainClearancePrice(d,c){if(d){var b=$(".swatch-holder-clearance a").eq(0).attr("data-colorid");if(b!=null&&b!=""){var a=$(".style-selection:checked").val();var e=c[b][a];var f=getPriceHtml(e);if(f!=""){f+='<div class="clearance-text">CLEARANCE</div>';$("#pdpPriceHolderClearance").html(f);}}}else{if($(".pdp-clearance-container").length&&!$(".pdp-clearance-container").is(":visible")){populateMainPrice(c,true);}else{var a=$(".style-selection:checked").val();var g=$("#pdpSelectColor").val();if(g==""){g=$(".swatch-holder-clearance a").eq(0).attr("data-colorid");if(g==null||g==""){return;}}var e=c[g][a];var f=getPriceHtml(e);if(f!=""){f+='<div class="clearance-text">CLEARANCE</div>';$("#pdpPriceHolderClearance").html(f);}}}}function getPriceHtml(a){if(a!=null){if(a.isSaleOrClearance&&a.listPrice!=null&&a.listPrice>0){priceHtml='<span class="regular-price">$'+a.listPrice+'</span><span aria-label="Sale Price" class="sale-price">$'+a.realPrice+"</span>";}else{priceHtml="<span>$"+a.realPrice+"</span>";}return priceHtml;}else{return"";}}function buildCartFormValues(b){$(".bag-giftbox-values").val("");$(".bag-monogram-values").val("");$("#bag-quantity").val($("#pdpSelectQuantity").val());var a=getSkuFromSizeDriverObj($(".style-selection:checked").val(),$("#pdpSelectSize").val(),$("#pdpSelectColor").val(),b);$("#bag-skuId").val(a);if($("#pdpSelectHemStyle").length){$("#bag-hemstyle").val($.trim($("#pdpSelectHemStyle option:selected").attr("data-hemstyle")));$("#bag-inseam").val($("#pdpSelectHemLength").val());}if($("#pdp-gift-box-option").length){$("#bag-is-giftbox").val($("#pdp-gift-box-option").prop("checked"));}if($("#pdp-monogram-option").length){$("#bag-is-monogram").val($("#pdp-monogram-option").prop("checked"));}return true;}function buildWishlistFormValues(b){var a=getSkuFromSizeDriverObj($(".style-selection:checked").val(),$("#pdpSelectSize").val(),$("#pdpSelectColor").val(),b);$("#wishlist-skuId").val(a);$("#wishlist-quantity").val($("#pdpSelectQuantity").val());if($("#pdpSelectHemStyle").length){$("#wishlist-hemstyle").val($.trim($("#pdpSelectHemStyle option:selected").text()));$("#wishlist-inseam").val($("#pdpSelectHemLength").val());}return true;}function getSkuFromSizeDriverObj(d,c,b,a){var e="";if(c!=null&&c!=""&&b!=null&&b!=""){if(a[d][c]!=null&&a[d][c]!=""){$.each(a[d][c],function(g,f){if(b==f.colorId){e=f.skuId;}});}}else{if((c!=null&&c!="")&&(b==null||b=="")){if(a[d][c]!=null&&a[d][c]!=""){$.each(a[d][c],function(g,f){e=f.skuId;return false;});}}}return e;}function getSkuFromColorDriverObj(d,c,b,a){var e="";if(b!=null&&b!=""&&c!=null&&c!=""){if(a[d][c]!=null&&a[d][c]!=""){$.each(a[d][c],function(g,f){if(b==f.colorId){e=f.skuId;}});}}else{if((b!=null&&b!="")&&(c==null||c=="")){if(a[d][b]!=null&&a[d][b]!=""){$.each(a[d][b],function(g,f){e=f.skuId;return false;});}}}return e;}function removeAllPdpErrors(){$(".error-tooltip").remove();$(".alt-error-tooltip").remove();$("select").removeClass("error-field");}function validatePdpDropdowns(d,e){removeAllPdpErrors();checkAddToBagHoverError(d,e);var f=true;if($("#pdpSelectSize").val()==""){var g="Please select a size";showPdpError($("#pdpSelectSize"),g);$("#pdpSelectSize").addClass("error-field");f=false;}else{if($("#pdpSelectSize option:selected").hasClass("text-light")){var c=$("#pdpSelectSize option:selected").text();var b=c.split("-");c=b[0];var a=$("#pdpSelectColor option:selected").text();var b=a.split("-");a=b[0];var g=a+"in Size "+c+" is no longer available. Please try a different color or size.";showPdpError($("#pdpSelectColor"),g);$("#pdpSelectSize").addClass("error-field");$("#pdpSelectColor").addClass("error-field");f=false;}}if($("#pdpSelectHemStyle").length&&$("#pdpSelectHemStyle").is(":visible")&&$("#pdpSelectHemStyle").val()==""){var g="Please select a hem style";showPdpError($("#pdpSelectHemStyle"),g);$("#pdpSelectHemStyle").addClass("error-field");f=false;}if($("#pdpSelectHemStyle").length&&$("#pdpSelectHemStyle").is(":visible")&&($("#pdpSelectHemStyle").val().indexOf("Cuff")>-1&&$("#pdpSelectHemLength").val()=="")){var g="Please select a inseam length";showPdpError($("#pdpSelectHemLength"),g);$("#pdpSelectHemLength").addClass("error-field");f=false;}if($("#pdpSelectColor").val()==""){var g="Please select a color";showPdpError($("#pdpSelectColor"),g);$("#pdpSelectColor").addClass("error-field");f=false;}return f;}function checkAddToBagHoverError(a,b){if($("#pdpSelectSize").val()==""||$("#pdpSelectSize option:selected").hasClass("text-light")){if($(a).closest(".formItem").find(".alt-error-tooltip").length){$(a).closest(".formItem").find(".alt-error-tooltip").remove();}showPdpError(a,b);}else{if($("#pdpSelectHemStyle").length&&$("#pdpSelectHemStyle").is(":visible")&&$("#pdpSelectHemStyle").val()==""){if($(a).closest(".formItem").find(".alt-error-tooltip").length){$(a).closest(".formItem").find(".alt-error-tooltip").remove();}showPdpError(a,b);}else{if($("#pdpSelectHemStyle").length&&($("#pdpSelectHemStyle").val().indexOf("Cuff")>-1&&$("#pdpSelectHemLength").val()=="")){if($(a).closest(".formItem").find(".alt-error-tooltip").length){$(a).closest(".formItem").find(".alt-error-tooltip").remove();}showPdpError(a,b);}else{if($("#pdpSelectColor").val()==""||$("#pdpSelectColor option:selected").hasClass("text-light")){if($(a).closest(".formItem").find(".alt-error-tooltip").length){$(a).closest(".formItem").find(".alt-error-tooltip").remove();}showPdpError(a,b);}}}}}function removePdpError(a){a.removeClass("error-field");a.closest(".formItem").find(".error-tooltip").fadeOut(300,function(){$(this).remove();});a.closest(".formItem").find(".alt-error-tooltip").fadeOut(300,function(){$(this).remove();});}function removePdpErrorHover(a){a.removeClass("error-field");if(a.closest(".formItem").find(".alt-error-tooltip").find("p").text()==wishlistErrorMsg||a.closest(".formItem").find(".alt-error-tooltip").find("p").text()==pdpErrorMsg){a.closest(".formItem").find(".alt-error-tooltip").fadeOut(300,function(){$(this).remove();});}}function populateColorText(b,c,d,a){var a=a||$("body");a.find(".pdpSwatches .swatch-holder a, .swatch-holder-clearance a").removeClass("selected");a.find(".pdp-color-text").text("");a.find('#detailsModule a[data-colorid="'+b+'"]').addClass("selected");if(d[c]!=null&&b!=""){$.each(d[c],function(e,f){if(b==f.colorId){a.find(".pdp-color-text").text(f.colorName);
a.find(".zoom-color .pdp-item-color").text(f.colorName);}});}a.find("#pdpSelectColor").val(b);}function populateColorTextHover(b,c,d,a){var a=a||$("body");a.find(".pdp-color-text").text("");a.find('#detailsModule a[data-colorid="'+b+'"]').addClass("selected");if(d[c]!=null&&b!=""){$.each(d[c],function(e,f){if(b==f.colorId){a.find(".pdp-color-text").text(f.colorName);}});}}function resetColorText(b){var b=b||$("body"),d=$("#pdpSelectColor"),f=d.val(),c=b.find(".pdp-color-text"),e=f?d.find("option:selected").text():"",a=b.find(".pdpSwatches .swatch-holder, .swatch-holder-clearance").find("a");a.removeClass("selected");c.text(e);if(f){a.filter('[data-colorid="'+f+'"]').addClass("selected");}}function populateColorTextMulti(a,c,d,b){b.find(".swatch-holder a").removeClass("selected");b.find(".msku-item-color").text("");b.find('.swatch-holder a[data-colorid="'+a+'"]').addClass("selected");if(d[c]!=null&&a!=""){$.each(d[c],function(e,f){if(a==f.colorId){b.find(".msku-item-color").text(f.colorName);}});}b.find(".color-selection").val(a);}function populateColorSwatchesWithClearance(b,e,a,d){var f="";var c="";if(e[b]!=null&&e[b]!=""){$.each(e[b],function(g,h){if(d[b]!=null&&$.inArray(h.colorId,d[b])>-1){c+='<a href="#" title="'+h.colorName+'" data-colorid="'+h.colorId+'"><img src="'+h.colorUrl+'" alt="'+h.colorName+'" /></a>';}else{f+='<a href="#" title="'+h.colorName+'" data-colorid="'+h.colorId+'"><img src="'+h.colorUrl+'" alt="'+h.colorName+'" /></a>';}});}a.html(f);if(c!=""){$(".pdp-clearance-container").show();}else{$(".pdp-clearance-container").hide();}$(".swatch-holder-clearance").html(c);}function populateColorSwatches(b,c,a){var d="";if(c[b]!=null&&c[b]!=""){$.each(c[b],function(e,f){d+='<a href="#" title="'+f.colorName+'" data-colorid="'+f.colorId+'" data-color="'+f.colorName+'"><img src="'+f.colorUrl+'" alt="'+f.colorName+'" /></a>';});}a.html(d);}function showPdpZoom(){var a=$(window).width()-40;if(a<685){a=750;}var b=$(window).height()-40;if(b<250){b=250;}var c=function(){initializeZoomHtml();};showModal(null,null,"/modals/pdp/pdp-smoothzoom.jsp",b,a,true,"center",c,null,null,null,true);}function smoothZoomInit(b){$(".zoom_thumbnails").find("li a").each(function(){$(this).bind("click",{src:$(this).attr("href")},function(f){f.preventDefault();var c=$(window).width()-60;if(c<685){c=730;}$("#modalContent .zoom_thumbnails a").removeClass("selected");$(this).addClass("selected");var d=$("#zoom_container").closest(".overlay-modal").height()-$(".zoom-details").height()-40;$("#zoom_container").smoothZoom("destroy").css("background-image","url(/static/img/preloader.gif)");$("#zoom_container").html('<div class="zoomInstructions initial-load">'+"Click or use scroll wheel to zoom.<br> "+"Drag the image to move around. "+"</div> "+'<div class="zoom-item-color">'+'<div><span>Shown in: </span><span class="modal-item-color">'+$.trim($(".zoom-swatches .modal-item-color").text())+"</span></div>"+"</div>");$(".zoomInstructions").addClass("initial-load");$(".zoomInstructions").stop().fadeIn("fast");$("#zoom_container").smoothZoom({image_url:f.data.src,width:c,height:d+"px",responsive:false,responsive_maintain_ratio:true,max_WIDTH:"",zoom_MAX:100,max_HEIGHT:"",animation_SMOOTHNESS:4,animation_SPEED_ZOOM:5.5,animation_SPEED_PAN:5.5,mouse_DOUBLE_CLICK:false,on_ZOOM_PAN_COMPLETE:function(){if(!$(".zoomInstructions").hasClass("initial-load")){$(".zoomInstructions").stop().fadeOut("medium");}$(".zoomInstructions").removeClass("initial-load");updateZoomButtons();}});});});if(b){var a=$(".thumbnail-gallery a.selected").data("index");if(a<1||a==null||a==""){$(".zoom_thumbnails li a").last().click();}else{$('.zoom_thumbnails li a[data-index="'+a+'"]').click();}$("#zoom_container").off().click(function(){$("#zoom-in-button").click();});$("#zoom-in-button").off().click(function(c){c.preventDefault();$("#_zinorm").trigger("mousedown").trigger("mouseup");});$("#zoom-out-button").off().click(function(c){c.preventDefault();$("#_zonorm").trigger("mousedown").trigger("mouseup");});$("#zoom-reset-button").off().click(function(c){c.preventDefault();$("#_rsnorm").trigger("mousedown").trigger("mouseup");});}else{$(".zoom_thumbnails li a").last().click();}}function updateZoomButtons(){if($("#_zinorm").parent().css("opacity")<0.5){$("#zoom-in-button").removeClass("zoomIn").addClass("zoomInOff");}else{$("#zoom-in-button").removeClass("zoomInOff").addClass("zoomIn");}if($("#_zonorm").parent().css("opacity")<0.5){$("#zoom-out-button").removeClass("zoomOut").addClass("zoomOutOff");}else{$("#zoom-out-button").removeClass("zoomOutOff").addClass("zoomOut");}if($("#_rsnorm").parent().css("opacity")<0.5){$("#zoom-reset-button").removeClass("fitImage").addClass("fitImageOff");}else{$("#zoom-reset-button").removeClass("fitImageOff").addClass("fitImage");}}function populateZoomImageHtml(e,d){if(e==null||e==""){var e=$("#pdpSelectColor").val();if(e==""){e=$("#pdpSelectColor").attr("data-selectedcolor");if(e==""){e=$("#pdpSelectColor").attr("data-defaultcolor");if(e==""){e=$("#pdpSelectColor option").eq(1).val();}}}}if(d){populateColorSwatches($(".style-selection:checked").val(),styleColors,$("#modalContent .swatch-holder.modal-swatches"));$('#modalContent .swatch-holder.modal-swatches a[data-colorid="'+e+'"]').addClass("selected");$("#modalContent .modal-item-color").html($('#modalContent .swatch-holder.modal-swatches a[data-colorid="'+e+'"]').data("color"));}var j=colorImageMap[e],b=colorImageAltMap;if(d){if(b!=null){var f="";if(j!=null){var i=j.defaultCanvasImage,a="",g="";if(i!=""){var c=i.split("?");a=c[0]+"?$pdp-thumbnail$";g=c[0]+"?$xlarge$";}}f='<li id="first-alternate-image-zoom">'+'<a title="'+getAltImgColorTitle(i)+'" class="selected" data-size="500,400" href="'+g+'" data-index="'+1+'">'+'<img src="'+a+'" alt="">'+"</a>"+"</li>";$(f).prependTo($("ul.zoom_thumbnails"));if(b!=null){var h=2;$.each(b,function(m,n){var p=n.thumb,k=n.main,l=k.split("?"),o=l[0]+"?$xlarge$";f="<li>"+'<a title="'+getAltImgColorTitle(k)+'" href="'+o+'" data-size="500,400" data-index="'+h+'">'+'<img src="'+p+'" alt="">'+"</a>"+"</li>";$(f).prependTo($("ul.zoom_thumbnails"));h++;});}}}else{if(j!=null){var i=j.defaultCanvasImage,a="",g="";if(i!=""){var c=i.split("?");a=c[0]+"?$pdp-thumbnail$";g=c[0]+"?$xlarge$";}var f='<a title="'+getAltImgColorTitle(i)+'" class="selected" data-size="500,400" href="'+g+'" data-index="'+1+'">'+'<img src="'+a+'" alt="">'+"</a>";$("ul.zoom_thumbnails li a").removeClass("selected");$("#first-alternate-image-zoom").empty().html(f);}}$("ul.zoom_thumbnails li a").off();if(d){smoothZoomInit(true);}else{smoothZoomInit(false);}}function initializeZoomHtml(){populateZoomImageHtml(null,true);$("#modalContent.pdp-smoothzoom").on("click",".swatch-holder.modal-swatches a",function(c){c.preventDefault();var b=$(this),a=b.data("color"),d=b.attr("data-colorid");$("#modalContent .swatch-holder.modal-swatches a").removeClass("selected");b.addClass("selected");$("#modalContent .modal-item-color").text(a);populateZoomImageHtml(d,false);});$("#modalContent .swatch-holder.modal-swatches a").hover(function(b){var a=$(this);a.addClass("temp-selected");$("#modalContent .zoom-swatches .modal-item-color").text(a.data("color"));},function(){var a=$(this);a.removeClass("temp-selected");$("#modalContent .zoom-swatches .modal-item-color").text($("#modalContent .swatch-holder.modal-swatches a.selected").data("color"));});}function populateCanvasImage(g,k,l,c){var h="",o=k[g],b=l,d=$("#pdpThumbSlider .thumbnail-gallery li").size(),n=$("#product-display-name").text();if(d<1){if(o!=null){var m=o.defaultCanvasImage,a="",i="";if(m!=""){var f=m.split("?");a=f[0]+"?$pdp-thumbnail$";i=f[0]+"?$xlarge$";}}h='<li id="first-alternate-image">'+'<a title="Thumbnail View '+1+" "+n+": "+getAltImgColorTitle(m)+'" class="selected" href="'+i+'" rel="zoom-id: zoom; selectors-class: selected" rev="'+m+'" data-index="'+1+'">'+'<img src="'+a+'" alt="Thumbnail View '+1+" - "+n+": "+getAltImgColorTitle(m)+'">'+ +"</a>"+"</li>";if(b!=null){var j=2;
$.each(b,function(r,s){var u=s.thumb,p=s.main,q=p.split("?"),t=q[0]+"?$xlarge$";h+="<li>"+'<a title="Thumbnail View '+j+" - "+n+": "+getAltImgColorTitle(m)+'" href="'+t+'" rel="zoom-id: zoom; selectors-class: selected" rev="'+p+'" data-index="'+j+'">'+'<img src="'+u+'" alt="Thumbnail View '+j+" - "+n+": "+getAltImgColorTitle(m)+'">'+"</a>"+"</li>";j++;});}$("#imageZoom #zoom").attr("href",i);$("#imageZoom #zoom img").attr("src",m);$("ul.thumbnail-gallery").html(h);$("ul.thumbnail-gallery li a img").off().click(function(){updateCanvasColor($(this).prop("src"));});$("#pdpThumbSlider .thumbnail-gallery li a").off();thumbnailSliderInit();$("#zoom").css("height","auto").off().click(function(p){p.preventDefault();showPdpZoom();});if($("#zoom").hasClass("MagicZoomPlus")){MagicZoomPlus.refresh();}else{$("#imageZoom #zoom img").one("load",function(){$("#imageZoom").removeClass("pdp-image-holder");$("#zoom").addClass("MagicZoomPlus");MagicZoomPlus.start();});}}else{if(o!=null){var m=o.defaultCanvasImage,a="",i="";if(m!=""){var f=m.split("?");a=f[0]+"?$pdp-thumbnail$";i=f[0]+"?$xlarge$";}}if(c&&c.is(".pdp-find-modal")){c.find(".pdp-find-item-overview img").attr("src",a);}else{var e=$("#first-alternate-image");e.find("a").attr({"href":i,"rev":m,"title":n+" "+allColorsMap[g]});e.find("a img").attr("src",a);$("#imageZoom #zoom").attr("href",i);$("#imageZoom #zoom img").attr("src",m);MagicZoomPlus.refresh();$("ul.thumbnail-gallery a").removeClass("selected");e.find("a").addClass("selected");}}$("ul.thumbnail-gallery li a img").off().click(function(){updateCanvasColor($(this).prop("src"));});}function populateSizes(e,g,a,b,f,h,d){var c='<option value="">Select Size</option>';if(g[e]!=null&&g[e]!=""){$.each(g[e],function(i,k){var j="";if(k.sizeId==f){j='selected="selected"';}if(h&&b!=""&&b!=null){if(a[e][b]!=null){var l=false;$.each(a[e][b],function(m,n){if(k.sizeId==n.sizeId){if(n.isPurchasable){if(n.stockMessage!=""){c+="<option "+j+' value="'+k.sizeId+'">'+k.sizeName+" - "+n.stockMessage+"</option>";}else{c+="<option "+j+' value="'+k.sizeId+'">'+k.sizeName+"</option>";}}else{}l=true;}});if(!l){}}}else{c+="<option "+j+' value="'+k.sizeId+'">'+k.sizeName+"</option>";}});}d.html(c);}function populateHemStyle(d,b,e,c){var a='<option value="">Select Hem Style</option>';var f=0;if(e!=null&&e!=""){$.each(e,function(g,h){if(b[d]!=null&&b[d]!=""){if(b[d][g]!=null&&b[d][g]!=""){f++;a+='<option value="'+g+'" data-hemstyle="'+e[g]+'">'+e[g]+"</option>";}}});}if(f<2){c.closest(".hemstyle-container").hide();}else{c.closest(".hemstyle-container").show();}c.html(a);if(f<2){c.val(c.find("option").eq(1).val());c.find("option").eq(1).attr("data-hemstyle","");}}function populateInseam(d,e,b,c,a){c.prop("disabled",false);a.show();var f=false;if((d==null||d=="")&&(e==null||e=="")){c.html('<option value="">Select Inseam Length</option>');c.val("");c.prop("disabled",true);}else{var g='<option value="">Select Inseam Length</option>';if(b[d][e]!=null&&b[d][e]!=""){$.each(b[d][e],function(h,i){if(i=="hideInseam"){f=true;}else{g+='<option value="'+i+'">'+i+"</option>";}});}c.html(g);if(f){a.hide();}if(e==""){c.prop("disabled",true);}}}function populateColors(e,g,c,f,b,h,d){var a='<option value="">Select Color</option>';if(g[e]!=null&&g[e]!=""){$.each(g[e],function(j,i){var k="";if(i.colorId==b){k='selected="selected"';}if(h&&f!=null&&f!=""){if(c[e][f]!=null){var l=false;$.each(c[e][f],function(m,n){if(i.colorId==n.colorId){if(n.isPurchasable){if(n.stockMessage!=""){a+="<option "+k+' value="'+i.colorId+'">'+i.colorName+" - "+n.stockMessage+"</option>";}else{a+="<option "+k+' value="'+i.colorId+'">'+i.colorName+"</option>";}}else{}l=true;}});if(!l){}}}else{a+="<option "+k+' value="'+i.colorId+'">'+i.colorName+"</option>";}});}d.html(a);}function validateShippingFields(){$(".alt-error-tooltip").remove();$(".error-field").removeClass("error-field");var b=$("#osStateSelect");var a=$("#osZipcode");var c=true;if(b.val()===""){c=false;b.addClass("error-field");showErrorToolTip(b,"Please select a state");}if(a.val()===""||!/^\d{5}(-\d{4})?$/.test(a.val())){c=false;a.addClass("error-field");showErrorToolTip(a,"Please enter a valid zip code");}return c;}function populateEstimateShipTax(){$("#estimate-state-val").val($("#osStateSelect").val());$("#estimate-zip-val").val($("#osZipcode").val());$("#estimate-country-val").val("US");$("#estimate-method-val").val($("#osShipResult").val());}function giftBoxEventsCart(a,b){if(b){$("#gift-box-to").val(a.data("giftboxto"));$("#gift-box-from").val(a.data("giftboxfrom"));$("#gift-box-message").val(a.data("giftboxmessage"));}$("#submit-gift-box").click(function(i){i.preventDefault();var h=$(this);if(h.hasClass("active-loading")){return false;}if($.trim($("#gift-box-to").val())==""){$("#gift-box-to").addClass("error-field");showErrorToolTip($("#gift-box-to"),"This field is required");return false;}if($.trim($("#gift-box-from").val())==""){$("#gift-box-from").addClass("error-field");showErrorToolTip($("#gift-box-from"),"This field is required");return false;}var j="#"+a.data("formid");var c=a.data("index");if(b){$("#bag-giftbox-to-edit_"+c).val($("#gift-box-to").val());$("#bag-giftbox-from-edit_"+c).val($("#gift-box-from").val());$("#bag-giftbox-message-edit_"+c).val($("#gift-box-message").val());}else{$("#bag-giftbox-to_"+c).val($("#gift-box-to").val());$("#bag-giftbox-from_"+c).val($("#gift-box-from").val());$("#bag-giftbox-message_"+c).val($("#gift-box-message").val());}var g=function(e){$(".dummy-modal").overlay().close();reloadOrderSummary(true);};var k=function(e){if(e.maxCartItems!=null&&e.maxCartItems){showModal(null,null,"/modals/pdp/pdp-shopping-bag-full.jsp",null,500,true,"30%",null,null);}else{showPdpError(h,e.errors[0].message);}};var f=function(){h.addClass("active-loading");};var d=function(){h.removeClass("active-loading");};ajaxFormSubmit($(j),f,g,k,d);});$(".no-gift-box").click(function(c){c.preventDefault();$(".dummy-modal").overlay().close();});}function monogramEventsCart(b,f){var c=null;try{c=$.parseJSON($("#monogramColorMap").text());}catch(d){}initMonogram(f,c);if(f){var a=""+b.attr("data-stylekey");var h=""+b.attr("data-colorkey");var e=""+b.attr("data-fontkey");var g=""+b.data("inputtext");$("#monogramStyle").val($('option[data-displayname="'+a+'"]').val());$("#monogramStyle").change();$("#monogramColor").val($('option[data-displayname="'+h+'"]').val());$("#monogramColor").change();$("#monogramFont").val($('option[data-displayname="'+e+'"]').val());if(a.indexOf("3")>=0){$("#monoFirstInitial").val(g.charAt(0));$("#monoLastInitial").val(g.charAt(2));$("#monoMiddleInitial").val(g.charAt(4)).keyup();}else{$("#monogramNameWord").val(g).keyup();}}$(".continue-with-monogram").click(function(m){m.preventDefault();var o=$(this);if(o.hasClass("active-loading")){return false;}var r="#"+b.data("formid");var l=b.data("index");var s=validateMonogramInputs();if(s){var j=getMonogramSku(c);if(j==null||j==""){showPdpError($(".continue-with-monogram"),"Error adding monogram to your bag.");return false;}if(f){$("#bag-monogram-style-edit_"+l).val($("#monogramStyle option:selected").text());$("#bag-monogram-style-key-edit_"+l).val($("#monogramStyle").val());$("#bag-monogram-text-color-edit_"+l).val($("#monogramColor option:selected").text());$("#bag-monogram-text-style-edit_"+l).val($("#monogramFont option:selected").text());$("#bag-monogram-sku-edit_"+l).val(j);var n=getMonogramInputText();$("#bag-monogram-input-text-edit_"+l).val(n);}else{$("#bag-monogram-style_"+l).val($("#monogramStyle option:selected").text());$("#bag-monogram-style-key_"+l).val($("#monogramStyle").val());$("#bag-monogram-text-color_"+l).val($("#monogramColor option:selected").text());$("#bag-monogram-text-style_"+l).val($("#monogramFont option:selected").text());$("#bag-monogram-sku_"+l).val(j);var n=getMonogramInputText();$("#bag-monogram-input-text_"+l).val(n);}var k=function(t){$(".dummy-modal").overlay().close();reloadOrderSummary(true);};var q=function(t){if(t.maxCartItems!=null&&t.maxCartItems){showModal(null,null,"/modals/pdp/pdp-shopping-bag-full.jsp",null,500,true,"30%",null,null);
}else{showPdpError(o,t.errors[0].message);}};var p=function(){o.addClass("active-loading");};var i=function(){o.removeClass("active-loading");};ajaxFormSubmit($(r),p,k,q,i);}else{o.removeClass("active-loading");}});$(".continue-without-monogram").click(function(i){i.preventDefault();$(".dummy-modal").overlay().close();});}function addToWishlistFromLoginCart(){if(!$(".selected-bag-item-wishlist").length){location.reload(true);}else{$(".no-display.wishlist-login-form").load("/xhr/pdp-wishlist-form.jsp?_="+Math.random(),function(){var b=false;var e=$(".selected-bag-item-wishlist");$("#wishlist-product-id").val(e.attr("data-productid"));$("#wishlist-skuId").val(e.attr("data-skuid"));$("#wishlist-hemstyle").val(e.attr("data-hemstyle"));$("#wishlist-inseam").val(e.attr("data-inseam"));var a=function(){location.reload(true);};var d=function(g){location.reload(true);};var f=function(g){if(g.maxWlItems!=null&&g.maxWlItems){showModal(null,null,"/modals/pdp/pdp-wishlist-bag-full.jsp",null,500,true,"30%",null,a);}else{showPdpError(e,g.errors[0].message);}};var c=function(){$(".move-item-to-wishlist").removeClass("selected-bag-item-wishlist");};ajaxFormSubmit($("#add-to-wishlist-form"),null,d,f,c);});}}function buildCommerceItemInputs(a,b){$(".commerce-item-qty").each(function(){var c=$(this).data("itemindex");if(c!=b){var e=$(this).data("qty");var d=$(this).data("cid");a.append('<input class="created-commerce-inputs" type="hidden" name="'+d+'" value="'+e+'"/>');}});}function cartError(a,b){a.closest("li").append('<div class="error-tooltip-alt">'+'<p class="left">'+b+"</p>"+'<img class="left" src="/static/img/tooltip-arrow-left.png" alt="" />'+'<span class="clear-break"></span>'+"</div>");}function cartErrorRight(a,b){a.closest("li").append('<div class="error-tooltip">'+'<p class="right">'+b+"</p>"+'<img class="left" src="/static/img/tooltip-arrow.png" alt="" />'+'<span class="clear-break"></span>'+"</div>");a.parent().parent().find(".error-tooltip").css({left:($(".empty-entire-bag").width()+5)+"px",top:"-3px"}).find("img").css({"margin-top":"0"});}function showLoadingOverlay(a){if(!a.hasClass("sb-loading-overlay")){a.addClass("sb-loading-overlay");a.append('<div class="sb-loading-overlay-container">&nbsp;</div><img class="loading-spinner" src="/static/img/ajax-loader.gif" />');}}function removeLoadingOverlay(a){a.find(".loading-spinner").remove();a.find(".sb-loading-overlay-container").fadeTo("slow",1).remove();a.removeClass("sb-loading-overlay");}function reloadBagWishList(){showLoadingOverlay($("#sbWishlistHolder"));$("#sbWishlistHolder").load("/checkout/gadgets/bag/bag-wishlist.jsp?_="+Math.random(),function(){removeLoadingOverlay($("#sbWishlistHolder"));});}function reloadCartItems(){showLoadingOverlay($(".sb-item-container"));$(".cart-items-container").load("/checkout/gadgets/bag/bag-items.jsp?_="+Math.random(),function(){if(typeof scrollToWishList!="undefined"&&scrollToWishList){scrollToElement($("#sbWishlistHolder"));scrollToWishList=false;}removeLoadingOverlay($(".sb-item-container"));removeLoadingOverlay($(".order-summary-container"));updateBagUtagData();if($(".sb-item-container").hasClass("no-items")){$(".empty-entire-bag").hide();}else{$(".empty-entire-bag").show();}});$(".qualifier-container").load("/checkout/gadgets/bag/closeness-qualifier.jsp?_="+Math.random());}function updateBagUtagData(){var b=$("#tealProdId").val();if(typeof b!="undefined"&&b!=""&&fireUtag){try{utag.link(utag_data);}catch(a){}fireUtag=false;}}function reloadOrderSummary(a){showLoadingOverlay($(".order-summary-container"));if($(".checkout").length){$(".order-summary-container").load("/checkout/gadgets/checkout-order-summary.jsp?_="+Math.random(),function(){if(!a){removeLoadingOverlay($(".order-summary-container"));}if(a){reloadCartItems();updateShoppingBagCount();}});}else{$(".order-summary-container").load("/checkout/gadgets/bag/bag-order-summary.jsp?_="+Math.random(),function(){if(!a){removeLoadingOverlay($(".order-summary-container"));}if(a){reloadCartItems();updateShoppingBagCount();}});}}function reloadGiftCertificate(){showLoadingOverlay($(".gift-certificate-container"));$(".gift-certificate-container").load("/checkout/gadgets/payment-gift-certificate.jsp?_="+Math.random(),function(){removeLoadingOverlay($(".gift-certificate-container"));removeLoadingOverlay($(".order-summary-container"));$("#paymentGCNumber").on("input",function(){var a=this.value;if(a.indexOf("e")==0||a.indexOf("E")==0){$("#gcOldNewType").text("Amount");$("#noPin").text("");$("#paymentGCApply.chk-apply-btn").css("margin-top","21px");$(".gcOldType").css("visibility","hidden");}else{$("#gcOldNewType").text("PIN");$("#noPin").text("No PIN on Gift Card?");$("#paymentGCApply.chk-apply-btn").css("margin-top","5px");$(".gcOldType").css("visibility","hidden");}});});}function reloadCheckoutOrderSummary(e,c,b,a,f){showLoadingOverlay($(".order-summary-container"));var d="";if(a&&$("#mainContentHolder").hasClass("is-international")){d="isIntl=true&";}if($("body").hasClass("checkout-review")){d="reviewPage=true&";}if(e){d="reloadGc=true&";}$(".order-summary-container").load("/checkout/gadgets/checkout-order-summary.jsp?"+d+"_="+Math.random(),function(){if(!e&&!c&&!b){removeLoadingOverlay($(".order-summary-container"));}if(b){reloadReviewPage();updateShoppingBagCount();}if(e){reloadGiftCertificate();}if(c){reloadPromoCode();}if(f){reloadDeliveryOptions();}});}function multiSkuInit(a){var b=a.closest(".msku-item").find(".style-selection:checked").closest(".formItem").find(".style-price").html();$(".multi-sku-modal-price").html(b);$(".tabs").tabs(".tab-content > div");$(".tip-trigger[title]").tooltip({"layout":'<div><img class="tt-arrow" src="/static/img/tip-trigger-arrow.png" alt="" /></div>'});}function populateMultiProductImg(e,a,d,c,b){if(d[e]!=null){a.find(".msku-img-holder img").attr("src",d[e].defaultCanvasImage);}if(b){a.find(".msku-item-color").text(a.find('.color-selection option[value="'+e+'"]').text());}}function populateMultiProductPrice(a,c,b){b.find(".style-item").each(function(g,f){var d=$(this).attr("data-styleid");var h="";if($(this).find(".style-selection").is(":checked")){h=b.find(".color-selection").val();}if(h==""){h=a[d][0].colorId;}var e=c[h][d];priceHtml=getPriceHtml(e);$(this).find(".style-price").html(priceHtml);});}function checkAddToBag(a){removePdpError($(".add-multi-sku-cart"));if(isItemValid(a,false)&&a.find(".quantity-selection").val()=="0"){a.find(".quantity-selection").val("1");}}function isItemValid(e,c,b){var a=true;if(typeof c=="undefined"||c==null){a=true;}else{a=c;}var g=true;if(typeof b=="undefined"||b==null){g=false;}else{g=b;}var d=true;if(e.find(".size-selection").val()==""){if(g&&e.find(".quantity-selection").val()>0){var f="Please select a size";showErrorToolTip(e.find(".size-selection"),f);e.find(".size-selection").addClass("error-field");d=false;}if(!g){d=false;}}if(e.find(".hemstyle-selection").length&&e.find(".hemstyle-selection").val()==""){if(g&&e.find(".quantity-selection").val()>0){var f="Please select a hem style";showErrorToolTip(e.find(".hemstyle-selection"),f);e.find(".hemstyle-selection").addClass("error-field");d=false;}if(!g){d=false;}}if(e.find(".inseam-selection").length&&e.find(".hemstyle-selection").val().indexOf("Cuff")>-1&&e.find(".inseam-selection").val()==""){if(g&&e.find(".quantity-selection").val()>0){var f="Please select a inseam length";showErrorToolTip(e.find(".inseam-selection"),f);e.find(".inseam-selection").addClass("error-field");d=false;}if(!g){d=false;}}if(e.find(".color-selection").val()==""){if(g&&e.find(".quantity-selection").val()>0){var f="Please select a color";showErrorToolTip(e.find(".color-selection"),f);e.find(".color-selection").addClass("error-field");d=false;}if(!g){d=false;}}if(e.find(".quantity-selection").val()==0&&a&&!g){d=false;}return d;}function validateMultiProducts(a){removeAllPdpErrors();var b=true;jQuery(".msku-item").each(function(c,d){$this=$(this);if(!isItemValid($this,true,true)){b=false;}});if(!b&&$(".error-field").length){scrollToElement($(".error-field").eq(0).closest(".msku-item"),15);
}return b;}function buildCartFormValuesMulti(b){var a="";var d="";var e="";var f="";var c="";jQuery(".msku-item").each(function(h,i){$this=$(this);if(isItemValid($this,true)){var g=getSkuFromSizeDriverObj($this.find(".style-selection:checked").val(),$this.find(".size-selection").val(),$this.find(".color-selection").val(),b[h]);a+=$this.attr("data-productid")+",";d+=g+",";e+=$this.find(".quantity-selection").val()+",";if($this.find(".hemstyle-selection").length){f+=$this.find(".hemstyle-selection option:selected").attr("data-hemstyle")+",";if($this.find(".inseam-selection").length){c+=$this.find(".inseam-selection").val()+",";}}else{f+=" ,";c+=" ,";}}});$("#multi-productId").val(a);$("#multi-skuId").val(d);$("#multi-quantity").val(e);$("#multi-hemstyle").val(f);$("#multi-inseam").val(c);return true;}function initStoreLocator(){$("#headLocator input, #headLocator select").on("focus",function(){StoreLocator.RemoveErrorTooltips();});$("#utilityNav .button, #footLocatorHolder .button").on("click",function(a){a.preventDefault();StoreLocator.RemoveErrorTooltips();LocatorCheck.getInfo(this);});$("#storeLocatorZipSubmit").on("click",function(a){a.preventDefault();StoreLocator.RemoveErrorTooltips();StoreLocator.SearchByZip();});$("#storeLocatorCitySubmit").on("click",function(a){a.preventDefault();StoreLocator.RemoveErrorTooltips();StoreLocator.SearchByCity();});$("#Radius").on("change",function(a){a.preventDefault();StoreLocator.RadiusChanged();});$("#State_Province").on("change",function(a){a.preventDefault();StoreLocator.RemoveErrorTooltips();});}var LocatorCheck={$btnClicked:"",$btnClickedId:"",$formItem:"",$inputField:"",$inputVal:"",$inputErrMsg:"",$selected:"",$selectId:"",$selectVal:"",$selectErrMsg:"",$searchType:"",getInfo:function(a){LocatorCheck.$btnClicked=$(a);LocatorCheck.$btnClickedId=LocatorCheck.$btnClicked.attr("id");LocatorCheck.$inputField=LocatorCheck.$btnClicked.siblings("input");LocatorCheck.$inputVal=LocatorCheck.$inputField.val();LocatorCheck.$formItem=LocatorCheck.$btnClicked.parent();LocatorCheck.$inputErrMsg=LocatorCheck.$inputField.attr("data-error");LocatorCheck.$selected=LocatorCheck.$btnClicked.siblings("select");LocatorCheck.$selectId=LocatorCheck.$selected.attr("id");LocatorCheck.$selectVal=$("#"+LocatorCheck.$selectId+" :selected").val();LocatorCheck.$selectErrMsg=LocatorCheck.$selected.attr("data-error");LocatorCheck.validateLocatorForm();},validateLocatorForm:function(){if(LocatorCheck.$btnClickedId==="headLocatorZipSubmit"||LocatorCheck.$btnClickedId==="locatorSubmit"){LocatorCheck.checkZipValidation();}else{LocatorCheck.checkStateValidation();}},checkZipValidation:function(){var b=/[^0-9]/g,a=/[a-z][0-9][a-z](-| |)[0-9][a-z][0-9]/gi;console.log(LocatorCheck.$btnClicked);console.log(LocatorCheck.$inputVal);if(LocatorCheck.$inputVal==""||LocatorCheck.$inputVal.toLowerCase()=="enter zip code"||(b.test(LocatorCheck.$inputVal)&&!a.test(LocatorCheck.$inputVal))){LocatorCheck.$inputField.addClass("error-field");LocatorCheck.$formItem.append('<div class="error-tooltip">'+'<img class="left" src="/static/img/tooltip-arrow.png" alt="">'+'<p class="left">'+LocatorCheck.$inputErrMsg+"</p>"+'<span class="clear-break"></span>'+"</div>");}else{window.location="/storelocator/store_locator.jsp?PostalCode="+LocatorCheck.$inputVal;}},checkStateValidation:function(){if(LocatorCheck.$selectVal.toLowerCase()=="select one"&&$("#headLocatorCity").val()==""){LocatorCheck.$selected.addClass("error-field");$("#headLocatorCity").addClass("error-field");$("#headLocatorCity").parent().append('<div class="error-tooltip">'+'<img class="left" src="/static/img/tooltip-arrow.png" alt="" />'+'<p class="left">'+LocatorCheck.$selectErrMsg+"</p>"+'<span class="clear-break"></span>'+"</div>");}else{if(LocatorCheck.$selectVal.toLowerCase()=="select one"&&$("#headLocatorCity").val()!=""){LocatorCheck.$selected.addClass("error-field");LocatorCheck.$formItem.append('<div class="error-tooltip">'+'<img class="left" src="/static/img/tooltip-arrow.png" alt="" />'+'<p class="left">Please select a State or Province.</p>'+'<span class="clear-break"></span>'+"</div>");}else{if(LocatorCheck.$selectVal.toLowerCase()!="select one"&&$("#headLocatorCity").val()==""){$("#headLocatorCity").addClass("error-field");$("#headLocatorCity").parent().append('<div class="error-tooltip">'+'<img class="left" src="/static/img/tooltip-arrow.png" alt="" />'+'<p class="left">Please enter a city.</p>'+'<span class="clear-break"></span>'+"</div>");}else{window.location="/storelocator/store_locator.jsp?FooterTxtCity="+$("#headLocatorCity").val()+"&FooterState_Province="+LocatorCheck.$selectVal;}}}}};function signupEmailValidate(){var a=$("#signupEmail").val().toLowerCase();var b="[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?";if(a==""||!a.match(b)){$("#signupEmail").addClass("error-field");$("#signupEmail").parent().append('<div class="error-tooltip clearfix">'+'<img class="left" src="/static/img/tooltip-arrow.png" alt="" />'+'<p class="left">Please enter a valid email.</p></div>');}else{showEmailSubscriptionModal(a);}}function submitEmailSignup(){var a=$("#signupEmailAddress");var c=$("#signupEmailVerifyEmail");var b=$("#emailSubscribeForm");var d=function(){if($(".overlay-modal").is(":visible")){$(".close.ir").click();}showModal(null,null,"/modals/email-signup/email-signup-thanks.jsp",null,740,true,"10%",null,null);};if(c.val()!=""&&c.val()!=a.val()){$("#matchEmailMsg").removeClass("no-display");}else{if(c.val()===""||a.val()===""){$("#matchEmailMsg").addClass("no-display");return;}else{ajaxFormSubmit(b,null,null,null,d,true);}}}function showEmailSubscriptionModal(a){var b='<iframe width="663" scrolling="auto" height="425" frameborder="0" align="middle" name="fbContent" src="//pages.em.eddiebauer.com/WS_SignUp1_NEW?AFFILIATE_ID=225355676&amp;emailInputID='+a+"&amp;email="+a+'" title=""></iframe>';showModal(null,null,null,null,663,true,"15%",null,null,b);}function createCookie(c,d,e){if(e){var b=new Date();b.setTime(b.getTime()+(e*24*60*60*1000));var a="; expires="+b.toGMTString();}else{var a="";}document.cookie=c+"="+d+a+"; path=/";}function readCookie(b){var e=b+"=";var a=document.cookie.split(";");for(var d=0;d<a.length;d++){var f=a[d];while(f.charAt(0)==" "){f=f.substring(1,f.length);}if(f.indexOf(e)==0){return f.substring(e.length,f.length);}}return null;}function eraseCookie(a){createCookie(a,"",-1);}function openYouTubeVideoModal(b,c){var a=function(){getModalVideo(b,c);};showModal(null,null,"/modals/video/youtube-base-video.jsp",null,700,true,"10%",a,null);}function getModalVideo(a,b){if(b==true){$(".vid-logo img").attr("src","/static/img/logo-video-fa.png");$(".vid-logo img").show();}else{$(".vid-logo img").show();}$("#videoHolder").addClass("loading-icon");$("#videoHolder").html('<object width="640" height="385">'+'<param name="movie" value="http://www.youtube.com/v/'+a+'?hl=en_US&amp;version=3"></param>'+'<param name="allowFullScreen" value="true"></param>'+'<param name="allowscriptaccess" value="always"></param>'+'<embed src="http://www.youtube.com/v/'+a+'?hl=en_US&amp;version=3" type="application/x-shockwave-flash" width="640" height="385" allowscriptaccess="always" allowfullscreen="true"></embed>'+"</object>");if($("#videoHolder").html()!=""){$("#videoHolder").removeClass("loading-icon");}}function egcAssociateToggle(a){$(".egc-associate-content").slideToggle("fast");$(a).parent().removeClass("egc-active").siblings().addClass("egc-active");}function repositionModalForIpad(){try{$(".overlay-modal").each(function(){var i=$(this);var h=i.data("top").replace(/\D/g,"");var d=0;var b=i.width();var g=$(window).width();if(b>g){d=10;}else{d=(g-b)/2;if(d<10){d=10;}}var c=0;var f=$(window).height()*(h/100);var e=$("html").offset().top*-1;c=f+e;i.css("left",d+"px").css("top",c+"px");});}catch(a){}}function activeLink(){var a=$(".side-nav #refineHolder .main .nav-list a");$(".side-nav #refineHolder .main .nav-list").on("click","a",function(){for(var c=0;
c<a.length;c++){var d=a[c];$(d).removeClass("active");}$(this).addClass("active");});if($(".current-cat").length>0){var b=$(".current-cat").text();$(".side-nav #refineHolder .main .nav-list li").each(function(){if($(this).find(".category").text()==b){$(this).find("a").addClass("active");}});}}activeLink();$("#flyout-sportshop").css({"right":"200px"});$("#returnGuaranteeHolder").on("click","a.tip-trigger",function(b){var a=$(this).attr("href");if((a==="/custserv/customer-service-our-guarantee.jsp")||(a==="/custserv/customer-service-returns-and-exchanges.jsp")){b.preventDefault();}});function modalInit(){jQuery(".Tooltip").mouseenter(function(){var h=jQuery(this);var i=h.position();var c=h.find(".link").width();var d=h.find(".link").height();var f=h.attr("data-country");var e="/static/img/customer-service/shipping/"+f+".png";var g=0;var b="<div class='countryList' style='position:absolute; z-index:99999; top:"+parseInt(i.top+d+3)+"px; left:"+parseInt(g)+"px;'><img src='"+e+"' class='countries'/></div>";jQuery(b).appendTo(h);h.addClass("hover");}).mouseleave(function(){var b=jQuery(this);b.removeClass("hover");jQuery(".countryList").remove();});jQuery(".customerService .tabs ul.ui-tabs-nav li a.current").attr("aria-label","U.S. SHIPPING INFORMATION Tab Is Selected.");jQuery(".customerService .tabs ul.ui-tabs-nav li a").on("click",function(){var b=jQuery(".customerService .tabs ul.ui-tabs-nav li a.current");var c=jQuery(".customerService .tabs ul.ui-tabs-nav li a");if(b.parent().hasClass("int")){c.removeAttr("aria-label");b.attr("aria-label","INTERNATIONAL SHIPPING INFORMATION Tab Is Selected.");}else{if(b.parent().hasClass("us")){c.removeAttr("aria-label");b.attr("aria-label","U.S. SHIPPING INFORMATION Tab Is Selected.");}}});jQuery(".email").live("click",function(b){b.preventDefault();url="/custserv/ask-eddie-email.jsp";window.location=url;});function a(){url="/custserv/ask-eddie-email.jsp";window.location=url;}}if(typeof String.prototype.trimLeft!=="function"){String.prototype.trimLeft=function(){return this.replace(/^\s+/,"");};}if(typeof String.prototype.trimRight!=="function"){String.prototype.trimRight=function(){return this.replace(/\s+$/,"");};}if(typeof Array.prototype.map!=="function"){Array.prototype.map=function(f,c){for(var d=0,e=this.length,b=[];d<e;d++){if(d in this){b[d]=f.call(c,this[d]);}}return b;};}function getCookies(){var d=document.cookie,a=0,b={};if(document.cookie.match(/^\s*\$Version=(?:"1"|1);\s*(.*)/)){d=RegExp.$1;a=1;}if(a===0){d.split(/[,;]/).map(function(e){var g=e.split(/=/,2),c=decodeURIComponent(g[0].trimLeft()),f=g.length>1?decodeURIComponent(g[1].trimRight()):null;b[c]=f;});}else{d.match(/(?:^|\s+)([!#$%&'*+\-.0-9A-Z^`a-z|~]+)=([!#$%&'*+\-.0-9A-Z^`a-z|~]*|"(?:[\x20-\x7E\x80\xFF]|\\[\x00-\x7F])*")(?=\s*[,;]|$)/g).map(function(e,c){var f=e,g=c.charAt(0)==='"'?c.substr(1,-1).replace(/\\(.)/g,"$1"):c;b[f]=g;});}return b;}function getCookie(a){return getCookies()[a];}function formatTwoDigits(a){return a>9?""+a:"0"+a;}function GetQueryString(b){b=b.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var a="[\\?&]"+b+"=([^&#]*)",d=new RegExp(a),c=d.exec(window.location.href);if(c==null){return"";}else{return decodeURIComponent(c[1].replace(/\+/g," "));}}function getDate(b){var g=b.substr(0,4),a=b.substr(4,2),f=b.substr(6,2),c=b.substr(8,2),e=b.substr(10,2);return new Date(g,a,f,c,e);}function GetURLParameter(a){var d=window.location.search.substring(1);var c=d.split("&");for(var b=0;b<c.length;b++){var e=c[b].split("=");if(e[0]==a){return e[1];}}}$(".checkGiftCardBalance").click(function(c){c.preventDefault();var a="/modals/giftcard/check-balance.jsp";var b=$(this).html();openFBModal(a,"type:ajax; width:650; doAnimations:false; afterItemStart: modalInit();");});$("#paymentGCNumber").on("input",function(){var a=this.value;if(a.indexOf("e")==0||a.indexOf("E")==0){$("#gcOldNewType").text("Amount");$("#noPin").text("");$("#paymentGCApply.chk-apply-btn").css("margin-top","21px");$(".gcOldType").css("visibility","visible");}else{$("#gcOldNewType").text("PIN");$("#noPin").text("No PIN on Gift Card?");$("#paymentGCApply.chk-apply-btn").css("margin-top","5px");$(".gcOldType").css("visibility","hidden");}});$("#chkVisaReviewForm").submit(function(a){$this=$(this);if(($("#regPwd").val()!=""||$("#regConfirmPwd").val()!="")){createUserFromVisa(a,$this);}});function createUserFromVisa(d,c){$("#create-email").val($("#addEmail").val());$("#create-password").val($("#regPwd").val());$("#create-confirm-password").val($("#regConfirmPwd").val());$("#create-first-name").val($("#vpfirstName").val());$("#create-last-name").val($("#vplastName").val());var f=function(h){var e=$("#errorURL").val();if(e.indexOf("?")>=0){e+="&newUser=true";}else{e+="?newUser=true";}$("#errorURL").val(e);var g=$("#successUrl").val();if(g.indexOf("?")>=0){g+="&newUser=true";}else{g+="?newUser=true";}$("#successUrl").val(g);};var b=function(e){d.preventDefault();if(e.email!=""){showErrorToolTip($("#addEmail"),e.email);}if(e.password!=""){showErrorToolTip($("#regPwd"),e.password);}if(e.confirmPassword!=""){showErrorToolTip($("#regConfirmPwd"),e.confirmPassword);}scrollToElement($(".error-field").eq(0),30);};var a=function(){try{$(".dummy-modal").overlay().close();}catch(e){}};ajaxFormSubmit($("#create-user-billing"),null,f,b,a,true);}$(document).on("click",".visa-checkout-discount-link",function(b){b.preventDefault();var a="/checkout/gadgets/bag/visa-discount-disclaimer.jsp?tabid=0";openFBModal(a,"type:ajax; width:560; height:350; afterItemStart: modalInit();");});$(document).on("click",".best-price-details-link",function(b){b.preventDefault();var a="/checkout/gadgets/bag/best-price-details.jsp?tabid=0";openFBModal(a,"type:ajax; width:560; height:320; autoFit:true contentScroll:false afterItemStart: modalInit();");});$(document).on("click",".you-saved",function(b){b.preventDefault();var a="/modals/informational-guides/cart-you-saved-message.jsp";openFBModal(a,"type:ajax; width:300; boxTop:50% boxLeft:60% afterItemStart: modalInit();");});$(document).on("click",".coupon-disclaimer-link",function(a){a.preventDefault();showModal(null,null,"/modals/errors/promo-details.jsp?promoId="+$(this).data("promoId"),null,550,true,"30%",null,null);});