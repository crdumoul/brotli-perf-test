                                                                                                                   
                              
   
  
                                                     
                 
	                                                                                                                  
	      
	  
	  
	                
		
	 
	 
		var Clock={minutes:["00","30"],format:function(b,g){return str=1==b.toString().length?"0"+b+":"+g:b+":"+g},drawTime:function(b,g){var e=(!b?"10:00":b).split(":",2),f=e[0],f=parseInt(f,10),e=e[1],a="",d;if(g)for(d=0;24>d;d++)for(var c=0;2>c;c++)b=this.format(d,this.minutes[c]),a=f===d&&e===this.minutes[c]?a+('<option selected="selected" value="'+b+'">'+b+"</option>"):a+('<option value="'+b+'">'+b+"</option>");else{a=0===f&&"00"===e?a+'<option selected="selected" value="00:00">12:00 Midnight</option>':
a+'<option value="00:00">12:00 Midnight</option>';a=0===f&&"30"===e?a+'<option selected="selected" value="00:30">12:30 AM</option>':a+'<option value="00:30">12:30 AM</option>';for(d=1;12>d;d++)for(c=0;2>c;c++)b=this.format(d,this.minutes[c]),a=f===d&&Number(e)==this.minutes[c]?a+('<option selected="selected" value="'+b+'">'+b+" AM</option>"):a+('<option value="'+b+'">'+b+" AM</option>");for(var a=12===f&&"00"===e?a+'<option selected="selected" value="12:00">12:00 Noon</option>':a+'<option value="12:00">12:00 Noon</option>',
a=12===f&&"30"===e?a+'<option selected="selected" value="00:30">12:30 PM</option>':a+'<option value="12:30">12:30 PM</option>',h=1;12>h;h++)for(var i=h+12,c=0;2>c;c++)b=this.format(h,this.minutes[c]),d=this.format(i,this.minutes[c]),a=f==i&&e==this.minutes[c]?a+('<option selected="selected" value="'+d+'">'+b+" PM</option>"):a+('<option value="'+d+'">'+b+" PM</option>")}return"<select>"+a+"</select>"}};"function"==typeof define&&define.amd&&define("tools/timelist",[],function(){return Clock});            
var Calendar=function(a){this.params=_.extend({euro:!1,increment:1,mode:1,expandable:!0},a);this.init()};
Calendar.prototype={header:function(a,b){return'<header><span class="prev arrow"><span class="icons-arrow_black_left"></span></span><span class="next arrow"><span class="icons-arrow_black_right"></span></span><h1 data-automation-id = "'+(a+1)+'">'+this.params.monthNames[a]+" "+b+"</h1></header>"},daysHeader:function(){for(var a="<tr>",b=0;b<this.params.headers.length;b++)a+="<th>"+this.params.headers[b]+"</th>";return a+"</tr>"},drawMonth:function(a,b){var c=new Date(b,a,1),d=c.getDay(),i=(new Date(b,
a+1,0)).getDate();(new Date(b,a,0)).getDate();for(var f=0-d,j=0===this.params.start.val().length?null:this.createDate(this.params.start.val()),h=this.params.end?0===this.params.end.val().length?null:this.createDate(this.params.end.val()):null,n=2===this.params.mode?"dual":"",e='<table class="body" cellpadding="0" cellspacing="0" border="0">'+this.daysHeader(),g=0;6>g;g++){for(var e=e+"<tr>",k=0;7>k;k++){f++;var l="",m="";0>=f||f>i?l="empty":m=f;e+='<td class="'+l+'">'+m+"</td>"}e+="</tr>"}e+="</table>";
if(this.today.getMonth()===a&&this.today.getFullYear()===b){f=this.today.getDate()+d-1;e=this.highlight(e,f,"today");for(g=f-1;g>=d;g--)e=this.highlight(e,g,"past")}j&&(j.getMonth()===a&&j.getFullYear()===b)&&(f=j.getDate()+d-1,e=this.highlight(e,f,"start"));h&&(h.getMonth()===a&&h.getFullYear()===b)&&(f=h.getDate()+d-1,e=this.highlight(e,f,"end"));j&&h&&(e=$("<div>"+e+"</div>"),f=parseInt(e.find("td.start").text()),g=parseInt(e.find("td.end").text()),startIndex=f?f+d-1:d,endIndex=g?g+d-1:i+d,f||
g?e.find("td").slice(startIndex,endIndex).addClass("selected"):j.getTime()<c.getTime()&&h.getTime()>c.getTime()&&e.find("td").slice(startIndex,endIndex).addClass("selected"),e=e.html());return'<div class="month '+n+'"><div class="wrapper">'+this.header(a,b)+e+"</div></div>"},highlight:function(a,b,c){a=$("<div>"+a+"</div>");$(a).find("td:eq("+b+")").addClass(c);return a.html()},footer:function(a){return'<footer class="clearfix"><span class="area"><span class="close">'+a+'</span><span class="icons-close_sm"></span></span></footer>'},
maxDate:function(){var a=new Date(this.today.getTime());a.setFullYear(a.getFullYear()+1);a.setMonth(a.getMonth()+4);a.setDate(0);return a},calendarMonths:function(){if(this.params.content){var a=this.params.content.homePage.calendarContent;return[a.calMonthJan,a.calMonthFeb,a.calMonthMar,a.calMonthApr,a.calMonthMay,a.calMonthJun,a.calMonthJul,a.calMonthAug,a.calMonthSep,a.calMonthOct,a.calMonthNov,a.calMonthDec]}return htz.calendar.monthNames},calendarDays:function(){if(this.params.content){var a=
this.params.content.homePage.calendarContent;return[a.calDaySun,a.calDayMon,a.calDayTues,a.calDayWed,a.calDayThur,a.calDayFri,a.calDaySat]}return htz.calendar.dayHeaders},init:function(){var a=this,b=a.params.start,c=a.params.end,d=a.params.startText||null,i=a.params.endText||null,f=function(){};a.params.syncPickupAndDropoff&&(f=a.params.syncPickupAndDropoff);a.params.monthNames=a.calendarMonths();a.params.headers=a.calendarDays();this.params.content?(a.params.returnBeforePickup=a.params.content.homePage.jsErrorContent.invalidDateError,
a.params.closeButton=a.params.content.links.closeButton):(a.params.returnBeforePickup=htz.calendar.content.returnBeforePickup,a.params.closeButton=htz.calendar.content.closeText);a.params.mode=a.params.target?1:a.params.mode;a.params.expandable=a.params.target?!1:a.params.expandable;a.calendar=$('<div class="calendar"></div>');b&&d&&d.click(function(){if(a.active)a.close();else{a.today=a.createDate();a.input=b;a.inputText=d.find(".value");a.dropoff=!1;var c=a.maxDate();a.currentDate=a.createDate(b.val());
a.currentDate.setDate(1);2===a.params.mode&&(c.getMonth()===a.currentDate.getMonth()&&c.getFullYear()===a.currentDate.getFullYear())&&a.currentDate.setMonth(a.currentDate.getMonth()-1);a.show(this);return!1}});c&&i&&i.click(function(){if(a.active)a.close();else{a.today=a.createDate();a.input=c;a.inputText=i.find(".value");a.dropoff=!0;var f=a.maxDate();if(0===c.val().length&&0!==b.val().length){var h=a.createDate(b.val()),d=(new Date(h.getFullYear(),h.getMonth()+1,0)).getDate();a.currentDate=a.createDate(b.val());
a.params.expandable&&7>d-h.getDate()&&(a.params.mode=2,htz.helpers.SessionHelper.setItem("calendarMode",2))}else 0!==b.val().length?(h=a.createDate(b.val()),d=a.createDate(c.val()),d.setDate(1),d.setMonth(d.getMonth()-1),a.currentDate=2===a.params.mode&&h.getMonth()===d.getMonth()&&h.getFullYear()===d.getFullYear()?h:a.createDate(c.val())):a.currentDate=a.createDate(c.val());a.currentDate.setDate(1);2===a.params.mode&&(f.getMonth()===a.currentDate.getMonth()&&f.getFullYear()===a.currentDate.getFullYear())&&
a.currentDate.setMonth(a.currentDate.getMonth()-1);a.show(this)}});a.calendar.delegate("span.next","click",function(){a.shuffle(1)});a.calendar.delegate("span.prev","click",function(){a.shuffle(-1)});a.calendar.delegate("td","click",function(){if(!$(this).hasClass("empty")&&!$(this).hasClass("past")){var b=a.inputStr(this),c=a.createDate(b),d=a.dropoff?a.createDate(a.params.start.val()):c,e=a.params.end?a.dropoff?c:a.createDate(a.params.end.val()):null;if(a.dropoff&&e.getTime()<d.getTime())$(this).mouseout(),
alert(a.params.returnBeforePickup);else{if(a.params.end&&0!==a.params.end.val().length&&d.getTime()>=e.getTime()){var g=a.maxDate(),g=g.getFullYear()===d.getFullYear()&&g.getMonth()===d.getMonth()&&g.getDate()===d.getDate()?0:a.params.increment,c=new Date(c.getTime()+864E5*g),c=a.dateToStr(c);a.params.end.val(c);a.params.end.change();a.params.endText.find(".value").text(c)}f(b,a.input.selector,g,a);a.input.val(b);a.input.change();a.inputText.text(b);a.close()}}});a.calendar.delegate("td","mouseover",
function(){!$(this).hasClass("past")&&!$(this).hasClass("empty")&&$(this).addClass("hover")});a.calendar.delegate("td","mouseout",function(){$(this).removeClass("hover")});a.calendar.delegate("footer span","click",function(){a.close()});a.calendar.append(a.footer(a.params.closeButton));this.params.calledWithinOverlay||$("body").find(".calendar").remove();a.params.target?(a.calendar.addClass("elastic"),$(a.params.target).wrapInner("<div>"),$(a.params.target).append(a.calendar)):($("body").append(a.calendar),
$("body").hasClass("lt-ie7")&&(a.iframe=$('<iframe class="calendar">'),$("body").append(a.iframe)))},close:function(){this.calendar.hide();this.params.target?this.calendar.siblings().show():this.iframe&&this.iframe.hide();this.active=!1},dateToStr:function(a){var b=parseInt(a.getMonth()+1),c=parseInt(a.getDate()),c=10>c?"0"+c:c,b=10>b?"0"+b:b;return this.params.euro?c+"/"+b+"/"+a.getFullYear():b+"/"+c+"/"+a.getFullYear()},inputStr:function(a){var b=$(a).text(),a=$(a).closest(".month").index(),c=new Date(this.currentDate.getTime());
c.setMonth(c.getMonth()+a);c.setDate(b);return this.dateToStr(c)},resize:function(){!this.params.target&&$("body").hasClass("lt-ie8")&&(1===this.params.mode?this.calendar.width(230):2===this.params.mode&&this.calendar.width(460),this.iframe&&(this.iframe.show(),this.iframe.css({height:this.calendar.outerHeight(),width:this.calendar.outerWidth(),top:this.calendar.position().top,left:this.calendar.position().left})))},show:function(a){this.create();this.calendar.show();if(this.params.target)this.calendar.siblings().hide();
else{var b=$("#container").width(),c=this.calendar.width(),d=$(a).offset().left;c+d>b?this.calendar.css({top:$(a).offset().top+$(a).outerHeight(),right:$(window).width()-d-$(a).outerWidth(),left:""}):this.calendar.css({top:$(a).offset().top+$(a).outerHeight(),left:d,right:""});this.resize()}this.active=!0},create:function(){var a=this.calendar.find("footer"),b=this.maxDate();this.calendar.find(".month").remove();a.before(this.drawMonth(this.currentDate.getMonth(),this.currentDate.getFullYear()));
if(2===this.params.mode){var c=new Date(this.currentDate.getTime());c.setMonth(c.getMonth()+1);a.before(this.drawMonth(c.getMonth(),c.getFullYear()));this.calendar.find("span.next:first").hide();this.calendar.find("span.prev:last").hide();b.setDate(0)}this.currentDate.getMonth()===this.today.getMonth()&&this.currentDate.getFullYear()===this.today.getFullYear()&&this.calendar.find("span.prev").hide();this.currentDate.getMonth()===b.getMonth()&&this.currentDate.getFullYear()===b.getFullYear()&&this.calendar.find("span.next").hide()},
shuffle:function(a){1===this.params.mode&&this.params.expandable&&(this.params.mode=2,htz.helpers.SessionHelper.setItem("calendarMode",2),a=0<a?a-1:a);this.currentDate.setMonth(this.currentDate.getMonth()+a);this.create();this.resize()},createDate:function(a){if(!a||0===a.length)return a=new Date,new Date(a.getFullYear(),a.getMonth(),a.getDate());a=a.split("/");return newDate=this.params.euro?new Date(a[2],a[1]-1,a[0]):new Date(a[2],a[0]-1,a[1])}};
"function"==typeof define&&define.amd&&define("tools/calendar",[],function(){return Calendar});
var WordwheelModel=Backbone.Model.extend({});
var WordwheelCollection=Backbone.Collection.extend({model:WordwheelModel,url:(htz.homepage&&htz.homepage.json?htz.homepage.json.data.model.metaData.wordWheelUrl:"undefined"!=typeof htz.wordwheel?htz.wordwheel.url:"")+"?callback=?&dialect="+htz.config.dialect+"&systemId="+htz.config.systemId+"&subSystemId="+htz.config.subSystemId,sync:function(b,c,a){a.timeout=1E4;a.dataType="jsonp";a.cache=!0;a.jsonpCallback="parse";return Backbone.sync(b,c,a)},parse:function(b){$(b.locationList).each(function(c,
a){a.searchText=b.searchText;a.showMap=b.showMap});return b.locationList}}),WordwheelMultiLocationCollection=Backbone.Collection.extend({model:WordwheelModel,sync:function(b,c,a){a.timeout=1E4;a.dataType="jsonp";a.cache=!0;a.jsonpCallback="parse";return Backbone.sync(b,c,a)},parse:function(b){if(b.data.locations)return $(b.data.locations).each(function(b,a){a.displayText=a.locationName;a.locationTitle="";a.address2=a.streetAddressLine1;a.address3=a.streetAddressLine2;a.stateCode=a.stateProvinceCode;
a.phone=a.phoneNumber;a.hoursOfOperation=a.hoursOfOperation1;a.preferredOag=a.extendedOAGCode;delete a.locationName;delete a.stateProvinceCode;delete a.streetAddressLine1;delete a.streetAddressLine2;delete a.phoneNumber;delete a.hoursOfOperation1;delete a.extendedOAGCode}),b.data.locations;if(b.data.ftsResults.zipCodeMatches)return $(b.data.ftsResults.zipCodeMatches).each(function(b,a){a.displayText=a.locationName;a.locationTitle="";a.address2=a.streetAddressLine1;a.address3=a.streetAddressLine2;
a.stateCode=a.stateProvinceCode;a.phone=a.phoneNumber;a.hoursOfOperation=a.hoursOfOperation1;a.preferredOag=a.extendedOAGCode;delete a.locationName;delete a.stateProvinceCode;delete a.streetAddressLine1;delete a.streetAddressLine2;delete a.phoneNumber;delete a.hoursOfOperation1;delete a.extendedOAGCode}),b.data.ftsResults.zipCodeMatches}});    
var userInputText="",Wordwheel={model:null,init:function(){for(var a=0;a<localStorage.length;a++){var b=localStorage.key(a);if(b.match("^ww-")&&b.match("-"+htz.config.dialect+"$")){var c=$.parseJSON(unescape(HStorage.getItem(b)));"86400000"<(new Date).getTime().toString()-c.timestamp&&localStorage.removeItem(b)}}Wordwheel.loadMapQuestAPI()},loadMapQuestAPI:function(){var a={cache:!0,dataType:"script",url:htz.config.protocol+"://www.mapquestapi.com/sdk/js/v7.0.s/mqa.toolkit.js",data:{key:decodeURIComponent("Gmjtd%7Cluuan107n9%2C75%3Do5-lz8w0")},
success:function(){Wordwheel.mapquestLibLoaded=!0},error:function(){Wordwheel.mapquestLibLoaded=!1}};LazyLoad.queueJS(a,"low")},trigWW:function(a){var b=this,c;b.model=null;b.el=c=$(a.target);"undefined"===typeof b.input||null===b.input||b.input.$el.attr("id")!==$(a.target).attr("id")?b.input=new WWInputView({el:c}):b.input.$el=c;$("body").on("click",function(a){0<$(".ww-results").length&&!$.contains($(".ww-results").get(0),a.target)&&(b.wwView.hide(),b.model=null)});38!=a.keyCode&&40!=a.keyCode&&
13!=a.keyCode?(a=c.val(),2<a.length?(""==HStorage.getItem("ww-"+c.val()+"-"+htz.config.dialect)||null==HStorage.getItem("ww-"+a+"-"+htz.config.dialect)?(b.fetch(),userInputText=a):(b.ajx&&(b.ajx.abort(),delete b.ajx),locList.reset($.parseJSON(unescape(HStorage.getItem("ww-"+a+"-"+htz.config.dialect))).locationList)),"undefined"==typeof b.wwView&&(b.wwView=new WWListView({collection:locList,parent:b})),Wordwheel.getWWResultContainer(c).append(b.wwView.$el)):"undefined"!=typeof b.wwView&&b.wwView.hide()):
"undefined"!=typeof b.wwView&&b.wwView.move(a.which)},getWWResultContainer:function(a){return a.parent()},hide:function(){"undefined"!==typeof this.wwView&&(this.wwView.hide(),this.input=null)},fetch:function(){var a=this,b=a.input.$el.val();a.ajx&&(a.ajx.abort(),delete a.ajx);a.ajx=locList.fetch({data:{searchText:encodeURIComponent(b)},success:function(c,d){delete a.ajx;d.timestamp=(new Date).getTime().toString();d.locationList&&0<d.locationList.length&&(htz.config.isApp||!htz.config.isCountryinEuropeUnion||
htz.config.isCountryinEuropeUnion&&-1!=$.cookie("cookie_pref").indexOf("3"))&&HStorage.setItem("ww-"+b+"-"+htz.config.dialect,escape(JSON.stringify(d)))}},this)}};
WWInputView=Backbone.View.extend({initialize:function(){_.bindAll(this,"keydownEv","blurHandler")},events:{keydown:"keydownEv",blur:"blurHandler"},keydownEv:function(a){"9"==a.keyCode&&Wordwheel.hide()},blurHandler:function(){if(Wordwheel.keepFocus)this.$el.focus();else if(!Wordwheel.mouseinside){var a=new WordwheelModel;a.set({locType:Wordwheel.input.$el.attr("id")},{silent:!0});"undefined"!==typeof Wordwheel.selectFunc&&Wordwheel.selectFunc(a)}}});
MoreLinkView=Backbone.View.extend({className:"ww-morelink",events:{click:"showMoreInfo"},initialize:function(){this.$el.html('<span class="icons-ft_arrow_right" style="display: block;"></span>')},showMoreInfo:function(a){a.stopPropagation();this.options.model.set({selected:"true"});$(".ww-results .wL").addClass("showDetails");$(".ww-results .ww-moreinfo-container").show();$(".ww-results .ww-moreinfo-container").animate({left:"0px"},"1000",function(){$("html, body").css("scrollTop",$(".ww-results .ww-moreinfo-container").offset().top)})}});
MoreInfoView=Backbone.View.extend({className:"ww-moreinfo-container bl",events:{"click .sel-location":"selectloc","click .backlink":"backtoloc","click .ww-gld-ovrly-btn":"showGoldAnytimeOverlay"},initialize:function(a){this.parent=a;this.lightBox=new LightBox;_.bindAll(this,"render","backtoloc","selectloc")},render:function(){var a,b=this.$el.find(".fts input"),c=this.model.toJSON()||{};this.selLocHtml=Wordwheel.wwView.$el.find(".selected");c.fullHodImage=""!==c.hodImage?"https://images.hertz.com/"+
c.hodImage:"https://images.hertz.com/rentacar/misc/refresh09/Hertz-24-7_logo_wordwheel.png";this.tpl=_.template($("#ww-moreinfo-container").html(),c);this.$el.is(":empty")&&this.$el.html(this.tpl);var d=new Date(htz.locationPage?htz.locationPage.pickupDate:window.HomeModel.get("formData").get("pickupDay")),f=new Date(htz.locationPage?htz.locationPage.dropoffDate:window.HomeModel.get("formData").get("dropoffDay")),h=(htz.locationPage?htz.locationPage.pickupTime:window.HomeModel.get("formData").get("pickupTime")).replace(":",
"-"),j=(htz.locationPage?htz.locationPage.dropOffTime:window.HomeModel.get("formData").get("dropoffTime")).replace(":","-"),d=isNaN(d.getFullYear())?"":d.getFullYear()+"-"+("0"+(d.getMonth()+1)).slice(-2)+"-"+("0"+d.getDate()).slice(-2),f=isNaN(f.getFullYear())?"":f.getFullYear()+"-"+("0"+(f.getMonth()+1)).slice(-2)+"-"+("0"+f.getDate()).slice(-2);this.$el.find(".hod-url").attr("href",(htz.homepage&&htz.homepage.json?htz.homepage.json.data.model.metaData.urlHod:htz.locationPage.hodUrl+"Reservation/Index/")+
this.model.get("hodLocId")+"?pickupDate="+d+"&pickupTime="+h+"&dropoffDate="+f+"&dropoffTime="+j+"&linkID=HertzCom");this.$el.show();this.$el.css("left",this.options.parent.$el.find(".wL").width()+1+"px");"3"==this.model.get("categoryCode")?this.parent.parent.$el.hasClass("hide-moreinfo")||this.parent.parent.$el.addClass("hide-moreinfo"):($(this.parent.parent.el).removeClass("hide-moreinfo"),-1===this.model.get("displayText").indexOf("locations)")?(this.$el.find(".ww-moreinfo").empty().html(_.template($("#ww-moreinfo").html(),
{data:this.model.attributes})),"phone"!=htz.config.deviceGroup&&"iOSPhone"!=htz.config.deviceGroup&&(this.model.get("optHod")?this.$el.addClass("show-hod"):this.$el.removeClass("show-hod"))):(a=b.attr("id"),"pickup-location"===a?a="pUp":"dropoff-location"===a&&(a="dOff"),this.$el.find(".ww-moreinfo").empty().html(_.template($("#ww-moreinfo-more-loc").html(),{data:c,locType:function(){return a&&""!==a?"&locType="+a:""},getCountryCode:function(){return c.countryCode&&""!==c.countryCode?"&isAutoFill=Y&stateCode="+
c.stateCode+"&countryCode="+c.countryCode+"&searchType="+c.searchType:""}})),this.$el.removeClass("show-hod")));if(!this.map||$.browser.msie)$("#map").empty(),this.map=new MapView(this.model);(0==this.model.get("latitude")||null==this.model.get("latitude")||""==this.model.get("latitude")||0==this.model.get("longitude")||null==this.model.get("longitude")||""==this.model.get("longitude"))&&-1===this.model.get("displayText").indexOf("locations)")?this.$el.addClass("show-disabled-map"):this.$el.removeClass("show-disabled-map");
this.delegateEvents();this.map.mapLoaded&&(-1===this.model.get("displayText").indexOf("locations)")?(this.map.setSize("320","250"),MQA.withModule("smallzoom",this.map.addZoomControl),this.map.model=this.model,this.map.setLatLong()):(this.map.model=this.model,this.map.setSize("320","460"),this.map.removeZoomControl(),this.map.getLatLongByLoc()))},showGoldAnytimeOverlay:function(a){a.preventDefault();var b=this;require([htz.config.apiDomain+"/rest/content/"+htz.config.systemId+"/"+htz.config.dialect+
"/all/reservation/common/gold-anytime-overlay?callback=define","reservation/common/gold-anytime-overlay/core/view/gold-anytime-overlay-view"],function(a,d){b.lightBox.overlay({title:a.reservationGlobals.goldAnytime.gaOverlayTitle,width:"625"},(new d({template:"#gold-anytime-overlay-tpl",content:a})).render().el)})},selectloc:function(){$(this.selLocHtml).trigger("click","mouseSelect");return!1},backtoloc:function(a){a.stopPropagation();$(".ww-results .wL").removeClass("showDetails");$(".ww-results .ww-moreinfo-container").animate({left:$(".ww-results").css("width")},
"1000",function(){$("html, body").css("scrollTop",$(".ww-results").offset().top);$(this).hide()})}});
var MapView=Backbone.View.extend({el:"#map",initialize:function(a){_.bindAll(this,"setLatLong","addZoomControl","getIcon","getLatLongByLoc");this.model=a;Wordwheel.mapquestLibLoaded&&this.model.get("showMap")?(this.map=new MQA.TileMap({elt:document.getElementById("map"),zoom:13,mtype:"map",bestFitMargin:0,zoomOnDoubleClick:!1}),this.mapLoaded=!0):(this.$el.hide(),this.mapLoaded=!1)},setLatLong:function(){"0.0"!=this.latitude&&(this.map.addShape(this.getIcon()),this.map.setCenter(this.locIcon.latLng))},
addZoomControl:function(){0>=$(this.map.controls).length&&this.map.addControl(new MQA.SmallZoom,new MQA.MapCornerPlacement(MQA.MapCorner.TOP_LEFT,new MQA.Size(3,3)))},removeZoomControl:function(){_.each(this.map.controls,function(a){this.map.removeControl(a)},this)},getIcon:function(){this.locIcon=new MQA.Poi({lat:this.model.get("latitude"),lng:this.model.get("longitude")});var a=new MQA.Icon(htz.config.rootContext+"/assets/images/icons/map_marker.png",33,34);this.locIcon.setIcon(a);return this.locIcon},
getLatLongByLoc:function(){var a=this;$.ajax({url:"//www.mapquestapi.com/geocoding/v1/address",dataType:"jsonp",crossDomain:!0,data:{city:this.model.get("city"),state:this.model.get("stateCode"),postalCode:this.model.get("zip")||"",country:this.model.get("countryCode"),key:decodeURIComponent("Gmjtd%7Cluuan107n9%2C75%3Do5-lz8w0")},success:function(b){a.latitude=b.results[0].locations[0].latLng.lat;a.longitude=b.results[0].locations[0].latLng.lng;a.map.setCenter({lat:a.latitude,lng:a.longitude},10)}})},
setSize:function(a,b){this.map.removeAllShapes();this.map.setSize(new MQA.Size(a,b))}});
WWListView=Backbone.View.extend({locItems:[],className:"ww-results hide-moreinfo",events:{mouseenter:"mouseEnterHandler",mouseleave:"mouseLeaveHandler",mousedown:"mouseDownHandler",mousemove:"mouseMoveHandler"},mouseDownHandler:function(){Wordwheel.keepFocus=!1},mouseEnterHandler:function(){Wordwheel.mouseinside=!0},mouseLeaveHandler:function(){Wordwheel.mouseinside=!1;Wordwheel.keepFocus=!1},mouseMoveHandler:function(){"undefined"==typeof this.locItems[0].getLocName().$el.data("events")&&$(this.locItems).each(function(a,
b){b.getLocName().delegateEvents();b.getLocName().$el.on("mouseenter",this.highlight).on("mouseleave",this.remHighlight)})},initialize:function(){_.bindAll(this,"render");this.input=this.options.parent.input.$el;Modernizr&&Modernizr.touch&&this.$el.addClass("touch");this.moreInfo=new MoreInfoView({parent:this});0<this.collection.length&&this.render();this.collection.on("reset",this.render)},render:function(){var a=this,b="",c,d='<div class="ww-item"><div class="ww-name"><span class="airplane-space"></span><b>'+
htz.wordwheel.noLocationsFound+"</b></div></div>";a.prevCat="";a.prevSearchType;this.moreInfo.$el.css("left",this.$el.find(".wL").width()+1+"px");this.$el.html("");this.moreInfo.$el.hide();this.moreInfo.$el.appendTo(this.$el);this.sltdIndx=0;$(this.collection.models).each(function(a,b){b.set({selected:""})});this.$el.hasClass("hide-moreinfo")||this.$el.addClass("hide-moreinfo");var f=$("<div>").attr("class","wL");if(0<this.collection.length){$(this.collection.models).each(function(h,i){var e=i.get("searchType"),
g="";if("3"==e||"5"==e||"20"==e)g=htz.wordwheel.airportList;else if("25"==e)g=htz.wordwheel.railList;else if("30"==e||"40"==e||"60"==e||"70"==e)g=htz.wordwheel.cityList;else if("75"==e)g=htz.wordwheel.nearbyLocations+" - "+i.get("nearby");else if("80"==e||"90"==e)g=htz.wordwheel.stateCountryList;c=g;htz.config.isApp&&c===htz.wordwheel.stateCountryList||(b!==c&&""!==c&&("75"===i.get("searchType")&&0===h&&f.append($(d)),f.append('<label class="divider">'+c+"</label>")),b=c,e=new locItem({model:i,input:a.options.parent.$el,
parent:a}),a.locItems.push(e),f.append(e.el))});this.$el.append(f).show();var h=parseInt($(this.options.parent.el).css("padding-bottom"))+parseInt($(this.options.parent.el).css("margin-bottom"));this.$el.css("margin-top","-"+h+"px")}else this.$el.hide();return this},move:function(a){var b=this;b.type=a;sltdIndx=-2;$(this.collection.models).each(function(a,b){"true"==b.get("selected")&&(sltdIndx=a)});Wordwheel.mouseinside&&$(b.locItems).each(function(a,b){b.getLocName().undelegateEvents();b.getLocName().$el.off("mouseenter mouseleave")});
"40"==a?"undefined"==typeof sltdIndx||sltdIndx==this.collection.length-1?(this.collection.at(this.collection.length-1).set({selected:""}),this.collection.at(0).set({selected:"true"}),this.$el.find(".wL").scrollTop("-1")):"-2"==sltdIndx?(this.collection.at(0).set({selected:"true"}),this.$el.find(".wL").scrollTop("-1")):(this.collection.at(sltdIndx).set({selected:""}),this.collection.at(sltdIndx+1).set({selected:"true"}),270<this.$el.find(".selected").position().top?this.$el.find(".wL").scrollTop(this.$el.find(".wL").scrollTop()+
this.$el.find(".selected").position().top-270):0>this.$el.position().top&&this.$el.find(".wL").scrollTop(this.$el.find(".wL").scrollTop()+this.$el.find(".selected").position().top-4)):"38"==a?"undefined"==typeof sltdIndx||0==sltdIndx?(this.collection.at(0).set({selected:""}),this.collection.at(this.collection.length-1).set({selected:"true"}),this.$el.find(".wL").scrollTop(this.$el.find(".wL").attr("scrollHeight"))):"-2"==sltdIndx?(this.collection.at(this.collection.length-1).set({selected:"true"}),
this.$el.find(".wL").scrollTop(this.$el.find(".wL").attr("scrollHeight"))):(this.collection.at(sltdIndx).set({selected:""}),this.collection.at(sltdIndx-1).set({selected:"true"}),270<this.$el.find(".selected").position().top?this.$el.find(".wL").scrollTop(this.$el.find(".wL").scrollTop()+this.$el.find(".selected").position().top-270):0>this.$el.find(".selected").position().top&&this.$el.find(".wL").scrollTop(this.$el.find(".wL").scrollTop()+this.$el.find(".selected").position().top-4)):"13"==a&&(a=
this.$el.find(".selected"),a.length&&a.click(),(a=$(this.input).val())&&2<a.length&&setTimeout(function(){$.publish("location.search",$(b.input).val())},10),this.hide())},hide:function(){this.$el.hide()}});
locItem=Backbone.View.extend({className:"ww-item",initialize:function(){this.render()},render:function(){this.locNameEl=new LocName({model:this.options.model,input:this.options.input,parent:this.options.parent});this.$el.append(this.locNameEl.render().el);""!=this.model.get("preferredOag")&&this.$el.append((new MoreLinkView({model:this.options.model,parent:this.options.parent})).el);return this.$el},getLocName:function(){return this.locNameEl}});
LocName=Backbone.View.extend({className:"ww-name",initialize:function(){this.input=this.options.input;this.parent=this.options.parent;_.bindAll(this,"render","highlight","remHighlight");this.model.on("change:selected",this.render);Modernizr&&!Modernizr.touch&&(this.$el.on("mouseenter",this.highlight),this.$el.on("mouseleave",this.remHighlight))},events:{click:"select"},render:function(){var a,b=this.model.get("searchType");"true"===this.model.get("selected")?(this.$el.addClass("selected"),this.parent.moreInfo.model=
this.model,this.parent.moreInfo.render()):(delete this.parent.moreInfo.model,this.$el.removeClass("selected"));this.$el.empty();a=$("<span/>").attr("class","airplane-space");"25"==b?a.addClass("icons-rail_icon"):"3"==b||"5"==b||"20"==b?a.addClass("icons-airplane_icon"):("30"==b||"40"==b||"60"==b||"70"==b)&&a.addClass("icons-city-icon");"1"==this.options.model.get("categoryCode")&&("25"==this.options.model.get("searchType")?a.addClass("icons-rail_icon"):a.addClass("icons-airplane_icon"));this.$el.append(a);
this.$el.append(this.formattedDisplay());return this},formattedDisplay:function(){return"-1"!=this.model.get("displayText").toLowerCase().indexOf($(Wordwheel.el).val().toLowerCase())?(this.srchText=this.model.get("displayText").substr(this.model.get("displayText").toLowerCase().indexOf($(Wordwheel.el).val().toLowerCase()),$(Wordwheel.el).val().length),this.model.get("displayText").replace(RegExp(this.srchText,"g"),"<b>"+this.srchText+"</b>").replace("(","<span>(").replace(")",")</span>")):this.model.get("displayText").replace("(",
"<span>(").replace(")",")</span>")},highlight:function(){this.model.set({selected:"true"})},remHighlight:function(){$(this.parent.collection.models).each(function(a,b){b.set({selected:""})})},select:function(a,b){a.preventDefault();this.parent.hide();this.model.get("locationTitle")?Wordwheel.input.$el.val(this.model.get("locationTitle")):Wordwheel.input.$el.val(this.model.get("displayText"));this.model.set({locType:Wordwheel.input.$el.attr("id")},{silent:!0});Wordwheel.model=this.model;"undefined"!==
typeof Wordwheel.selectFunc&&Wordwheel.selectFunc(this.model);try{"undefined"!=typeof _gaq&&_gaq.push(["_trackEvent","WordWheel","UserSelectedLocation",userInputText+" -> "+Wordwheel.input.$el.val()])}catch(c){}"keySelect"===b&&(Wordwheel.mouseinside=!0,Wordwheel.input.$el.blur())}});
if(htz.config.isApp){Wordwheel.loadMapQuestAPI=$.noop;Wordwheel.getWWResultContainer=function(a){return a.closest("#kendo-ww").find(".ww-result-container")};var orginalRender=WWListView.prototype.render;WWListView.prototype.render=function(){return orginalRender.apply(this,arguments)};MoreLinkView.prototype.initialize=function(){this.$el.html('<span class="icons-ft_arrow_right" style="display: block;"></span>').addClass("km-listview-link")};MapView.prototype.initialize=function(){this.mapLoaded=!1};
LocName=LocName.extend({events:{click:"decideAction"},decideAction:function(a){$(".ww-results").appendTo($(".ww-result-container"));1<this.model.get("locationCount")?(a.stopPropagation(),this.showMultiLocation()):this.select(a)},showMultiLocation:function(){if("33"==this.model.get("searchType"))var a=htz.config.apiDomain+"/rest/location/search/"+this.model.get("searchText")+"/latitude/0/longitude/0?zip="+this.model.get("zip")+"&requestPos="+htz.config.pos;else var a=htz.config.apiDomain+"/rest/location{countryUrlPart}{stateUrlPart}{cityUrlPart}?dialect={dialect}",
b=$.trim(this.model.get("countryCode")),c=$.trim(this.model.get("stateCode")),d=$.trim(this.model.get("city")),a=a.replace("{countryUrlPart}",b?"/country/"+b:"").replace("{stateUrlPart}",c?"/state/"+c:"").replace("{cityUrlPart}",d?"/city/"+d:"").replace("{dialect}",htz.config.dialect);this.prepareWWList();this.fetchMultiLocList(a)},prepareWWList:function(){$(".ww-item").empty();$(".wL label").empty();$("#kendo-ww").data("kendoMobileModalView").scroller.scrollTo(0,0);kendo.fx($(".ww-results")).slideIn("down").duration(1E3).play();
$(".spinner").remove();$("body").append('<div class="spinner">Loading...</div>')},fetchMultiLocList:function(a){var b=this;multiLocList.fetch({url:a,success:function(a,d){d.timestamp=(new Date).getTime().toString();a&&a.models&&(b.parent.collection.models=a.models,b.parent.render());$(".spinner").remove()}})},select:function(a,b){a.preventDefault();this.parent.hide();this.model.get("locationTitle")?Wordwheel.input.$el.val(this.model.get("locationTitle")):Wordwheel.input.$el.val(this.model.get("displayText"));
this.model.set({locType:Wordwheel.input.$el.attr("id")},{silent:!0});Wordwheel.model=this.model;"undefined"!==typeof Wordwheel.selectFunc&&Wordwheel.selectFunc(this.model);try{"undefined"!=typeof _gaq&&_gaq.push(["_trackEvent","WordWheel","UserSelectedLocation",userInputText+" -> "+Wordwheel.input.$el.val()])}catch(c){}"keySelect"===b&&(Wordwheel.mouseinside=!0,Wordwheel.input.$el.blur());Wordwheel.input.$el.trigger("change");var d=$(".km-root #kendo-ww").data("kendoMobileModalView");void 0!=d&&d.close();
$(".ww-results").appendTo($(".ww-result-container"))}});var isWWInputChanged=function(){var a=$(".ww-input:visible").attr("name");return 0<$("input[name="+a+"]").length&&$("input[name="+a+"]")[0].value!==$("input[name="+a+"]")[1].value?!0:!1},originalBlurHandler=WWInputView.prototype.blurHandler;WWInputView.prototype.blurHandler=function(){!Wordwheel.keepFocus&&isWWInputChanged()&&originalBlurHandler.apply(this,arguments)}}var multiLocList=new WordwheelMultiLocationCollection,locList=new WordwheelCollection;
$(document).ready(Wordwheel.init); 
var appCore=htz.config.isApp?"app":"core";addDependencies("reservation/itinerary/core/view/itinerary-view","jquery underscore json framework/view/abstract-view config/app-config utils/sessionhelper utils/utils utils/utils-proxy reservation/itinerary/core/view/itinerary-form-view reservation/process-info/core/model/process-model reservation/config reservation/process-config/core/reservation-constants".split(" "));addDependencies("reservation/itinerary/core/view/itinerary-form-view","jquery underscore backbone utils/utils utils/utils-proxy framework/view/abstract-view config/app-config utils/sessionhelper reservation/itinerary/core/view/itinerary-ta-country-view reservation/itinerary/core/view/itinerary-location-view reservation/itinerary/core/view/itinerary-date-time-view reservation/itinerary/core/view/itinerary-age-view reservation/itinerary/core/view/itinerary-arrival-info-view reservation/itinerary/core/view/itinerary-redeem-view reservation/itinerary/core/view/itinerary-vehicle-type-view reservation/itinerary/core/view/itinerary-ta-member-view reservation/itinerary/core/view/itinerary-discounts-view reservation/itinerary/core/view/location-closed-overlay-view reservation/itinerary/core/view/helper/view-helper reservation/process-info/core/model/process-model reservation/reservation-info/core/model/reservation-info-model reservation/common/retry/core/view/retry-view reservation/process-config/core/reservation-constants reservation/utils/core/reservation-utils".split(" "));
addDependencies("reservation/itinerary/core/presenter/itinerary-presenter",["jquery","utils/sessionhelper","json","utils/domhelper","config/utilconfig","utils/utils","config/app-config","reservation/itinerary/core/model/itinerary-model","reservation/itinerary/"+appCore+"/view/itinerary-view","reservation/itinerary/core/view/helper/view-helper","reservation/process-info/core/model/process-model","reservation/config","utils/utils-proxy","reservation/process-config/core/reservation-constants"]);
define("reservation/process-monitor/core/monitor","jquery config/app-info config/app-config utils/tracker utils/utils-proxy reservation/process-info/core/model/process-model utils/utils reservation/process-config/core/reservation-constants reservation/utils/core/reservation-utils reservation/utils/core/test-and-target".split(" "),function(e,j,k,l,i,f,m,d,h,n){var g={monitorStep:function(a){var b=a.page,c=a.step;c&&this.handleTestTarget(c,a.isModify);b&&this.updatePage(b);c&&this.updateProcessFlow(c);
b&&(this.handleNav(b),this.handleEstara(c),this.handleHomepageBackground(c),this.handleSeo(b));b&&c&&l.track({process:"res",step:c,targetPage:b});c&&(htz.res.utils.ResourceLazyLoader.trigger(c,0,a.content),htz.res.utils.ResourceMonitor.trigger(c,1500),htz.res.utils.DOMMonitor.monitor(c));h.rqrOverlay();h.checkForReferrerUrl()},prepare:function(a){f.checkAndStartProcess();a&&f.setModify(!!a.isModify);if((a=i.getAciveLightboxes())&&0<a.length)for(var b=null,c=0;c<a.length;c++)b=a[c],null!=b&&b.closeOverlay&&
b.closeOverlay();window.scrollTo(0,0)},prepareNavigate:function(){i.getSpinner().stop()},updatePage:function(a){a&&(k.config.legacyPage=a)},handleNav:function(a){if(a){var b=j.getHeader();b&&(a===d.LEGACY_ITINERARY?(b.showPosFeature(),b.showMemberFeature(),b.showSearchMini()):(b.hidePosFeature(),a===d.LEGACY_VEHICLES||a===d.LEGACY_EXTRAS||a===d.LEGACY_REVIEW_AND_BOOK?b.hideMemberFeature():b.showMemberFeature(),b.showSearchFull()))}},handleTestTarget:function(a,b){n.handleTestTarget(a,b)},handleEstara:function(a){a&&
a!==d.REVIEW_AND_BOOK&&"undefined"!=typeof wv_vars&&htz.utils.Global.removeEstara()},handleHomepageBackground:function(a){a&&(a===d.ITINERARY?e("#container").addClass("animated-background"):e("#container").removeClass("animated-background"))},trackError:function(a){if(WebTracking){var b=f.getStep();WebTracking.setError("debug-runtime-error-"+b+"-"+a+"-"+m.browserDeviceType(),b)}},handleSeo:function(a){a&&a!==d.LEGACY_ITINERARY&&e("#footer-container #seo-content").empty().hide()},updateProcessFlow:function(a){f.addToFlow(a)}};
e.subscribe(d.RENDER_PREPARE_PRESENTER,function(a,b){g.prepare(b)});e.subscribe(d.NAVIGATE_PREPARE_PRESENTER,function(){g.prepareNavigate()});e.subscribe(d.RENDER_DONE_PRESENTER,function(a,b){g.monitorStep(b)});e.subscribe(d.HANDLE_RENDER_FAIL,function(a,b){h.handleRenderFail(b)});return g});require(["reservation/process-monitor/core/monitor"],function(){});
define("reservation/itinerary/core/model/itinerary-model","backbone json utils/restmodel utils/utils reservation/itinerary/core/model/itinerary-form-model utils/sessionhelper config/app-config".split(" "),function(f,i,h,j,g,k,e){return h.extend({initialize:function(){this.constructor.__super__.initialize.apply(this,arguments);var c=this.get("formData"),d=this.get("metaData"),b,a;c&&(b=new g(c),this.set("formData",b));d&&(a=new f.Model(d),this.set("metaData",a));b&&a&&(a.set({blockAds:e.config.isApp},
{silent:!0}),b.metaData=a,this.prepareCarType())},prepareCarType:function(){var c=this.get("metaData"),d=this.get("formData"),b=c.get("nvpVehicleGroupSipps");if(b&&0<b.length)for(var a=0;a<b.length;a++)if(b[a].value===d.get("selectedCarType")){c.set({selectedCarLabel:b[a].name},{silent:!0});break}},parseModel:function(c){var d=c.formData,c=c.metaData,b,a;d&&(b=new g(d),this.set("formData",b));c&&(a=new f.Model(c),this.set("metaData",a));b&&a&&(a.set({blockAds:e.config.isApp},{silent:!0}),b.metaData=
a,this.prepareCarType())},url:e.config.rootContext+"/rest/hertz/v2/reservations/itinerary"})});
define("reservation/itinerary/core/view/itinerary-view",getDependencies("reservation/itinerary/core/view/itinerary-view"),function(b,f,j,g,k,l,m,n,h,o,p,i){return g.extend({events:{"click .gaq-rmc-tabs":"toggleTabs","click .back-button":"showStepOne"},initialize:function(){this.preInitialize();this.content=this.options.content;this.template=b("#home-page-tpl").html();this.viewHelper=this.options.viewHelper;this.isRMCExists=!1;this.isSearch=this.options.isSearch;this.prepareModel();this.postInitialize()},
loadBanners:function(){var a=this.formData.get("maskedDiscountCode");try{a&&(""!==a&&localStorage.getItem("htzDVal")!==a)&&localStorage.setItem("htzDVal",a)}catch(b){}this.viewHelper.loadMisc(this.metaData.get("blockAds"),this.metaData.get("enableRightBannerAds"),this.metaData.get("enablePickupDropdown"))},bindWindowEvents:function(){b(window).bind("resize.setFooterPadding",this.viewHelper.setFooterPadding);b(window).bind("orientationchange.setFooterPadding",this.viewHelper.setFooterPadding)},prepareModel:function(){this.metaData=
this.model.get("metaData");this.formData=this.model.get("formData")},openWindow:function(a,b,d){return window.open(a,b,d)},toggleTabs:function(a){var a=b(a.target),c=b(".res-form");a.parent().hasClass("selected")||(c.find("td").each(function(){b(this).toggleClass("selected")}),c.find(".section").each(function(){b(this).toggleClass("hidden")}),this.$("#error-list").children().length&&this.$("#error-list").toggle(),"rmc-tab"===a.parent().attr("id")&&this.renderLookup())},showTab:function(a){var c=b(".res-form");
b("#"+a).hasClass("selected")||(c.find("td").each(function(){b(this).toggleClass("selected")}),c.find(".section").each(function(){b(this).toggleClass("hidden")}),b("#error-list").children().length&&b("#error-list").toggle(),"rmc-tab"===a&&this.renderLookup())},renderForm:function(){this.bindWindowEvents();this.formView&&this.formView.undelegateEvents();this.formView=new h({el:"#gaq-section",template:"#res-itinerary-tpl",content:this.content,model:this.model,referrer:this.$el,isResWidget:!1,hertzGoldPlusImage:htz.localLoyaltyLogo.hertzGoldPlusImage,
isResFlowEdit:!1,isSearch:this.isSearch})},renderLookup:function(){var a=this;a.isRMCExists||require(["reservation/lookup/core/presenter/lookup-presenter"],function(c){var d=b.extend(a.metaData.toJSON(),{target:"#rmc-section",referrer:a.$el});d.formData={confirmationNumber:a.formData.get("confirmationNumber"),lastName:a.formData.get("lastName"),arrivingUpdate:a.formData.get("arrivingUpdate")};var e=b("#res-lookup-template");0<e.length&&(d.template=e.html(),d.content=a.content);a.lookuppresenter=c;
a.isRMCExists=!0;c.show(d)})},render:function(){try{return this.preRender(),this.$el.append(f.template(this.template,{metaData:this.metaData.attributes,content:this.content})),this.renderForm(),this.loadBanners(),this.postRender(),this}catch(a){b.publish(i.HANDLE_RENDER_FAIL,a.message)}},refresh:function(){this.preRender();this.prepareModel();this.formView||this.renderForm();this.lookuppresenter||this.renderLookup();this.formData.off("change",this.renderForm(),this);this.formData.on("change",this.renderForm(),
this);this.postRender()},arrivalRadioButton:function(){b("#arriving-info").prop("checked",!0)},showStepOne:function(){this.$el.find(".home").removeClass("step-discount")},doCleanup:function(){this.viewHelper.doCleanup&&this.viewHelper.doCleanup();this.redeemViewRef&&this.redeemViewRef.doCleanup&&this.redeemViewRef.doCleanup();this.lookuppresenter&&this.lookuppresenter.doCleanup&&this.lookuppresenter.doCleanup();this.template=this.content=this.metaData=this.formData=this.redeemViewRef=this.viewHelper=
this.lookuppresenter=null}})});
define("reservation/itinerary/core/model/itinerary-form-model",["utils/restmodel","config/app-config","reservation/utils/core/reservation-utils"],function(c,f,d){return c.extend({initialize:function(){this.constructor.__super__.initialize.apply(this,arguments)},validate:function(a,b){if(this.metaData.get("enablePickupDropdown")){if(!this.get("pickupCountry")||""===this.get("pickupCountry"))return"pickupCountry";if(!this.get("pickupHiddenEOAG")||""===this.get("pickupHiddenEOAG"))return"pickupLocation";
if("on"===this.get("returnAtDifferentLocationCheckbox")&&(!this.get("dropoffCountry")||""===this.get("dropoffCountry")))return"dropoffCountry";if("on"===this.get("returnAtDifferentLocationCheckbox")&&(!this.get("dropoffHiddenEOAG")||""===this.get("dropoffHiddenEOAG")))return"dropoffLocation"}if(!this.get("pickupDay")||""===this.get("pickupDay"))return"pickupDay";if(!this.get("dropoffDay")||""===this.get("dropoffDay"))return"dropoffDay";if(!this.metaData.get("bookAsMember")&&this.metaData.get("showAgeDropdown")&&
(!this.get("ageSelector")||""===this.get("ageSelector")||"0"===this.get("ageSelector")))return"ageSelector";if(b&&b.stepValidation)return!1;if(this.metaData.get("isIncludeCDPOptions")&&!this.metaData.get("applicant")&&this.metaData.get("isIncludeDiscountSection")&&("L"!==this.metaData.get("travelType")&&"B"!==this.metaData.get("travelType")||"B"==this.metaData.get("travelType")&&this.metaData.get("allowContractRate")&&"yes"!==this.get("corp-rate")&&"no"!==this.get("corp-rate"))&&(""!==this.get("cdpField")||
""!==this.get("memberOtherCdpField")&&"otherCdpIndicator"===this.get("cdpRadioButton")||this.get("memberSelectedCdp")&&""!==this.get("memberSelectedCdp")&&"profileCdpIndicator"===this.get("cdpRadioButton")))return"cdpDiscounts";if(!this.metaData.get("enablePickupDropdown")&&(""!==this.get("pickupHiddenEOAG")||""!==this.get("dropoffHiddenEOAG"))){if(("Y"===this.get("inpPickupIsServedBy")||"Y"===this.get("inpPickupHasSpecialInstruction"))&&!0!==this.metaData.get("pickupLocPopup"))return"pickupHasSpecialInstruction";
if(this.get("pickupHiddenEOAG")!==this.get("dropoffHiddenEOAG")&&"on"===this.get("returnAtDifferentLocationCheckbox")&&("Y"===this.get("inpDropoffHasSpecialInstruction")||"Y"===this.get("inpDropoffIsServedBy"))&&!0!==this.metaData.get("dropoffLocPopup"))return"dropoffHasSpecialInstruction"}},url:function(){var a=this.get("href");return a&&0<=a.indexOf("/rest/home")?(a=a.split("/rest/home"),a[0]+"/rest/home/v2"+a[1]):a},set:function(a,b,e){a=c.prototype.set.call(this,a,b,e);b=this.get("militaryClock");
this.changed.pickupDay&&(this.attributes.pickupDayStandard=d.standardizeDate(this.attributes.pickupDay,b));this.changed.dropoffDay&&(this.attributes.dropoffDayStandard=d.standardizeDate(this.attributes.dropoffDay,b));return a}})});
define("reservation/itinerary/core/view/itinerary-form-view",getDependencies("reservation/itinerary/core/view/itinerary-form-view"),function(f,o,p,l,k,r,h,g,s,t,u,v,w,x,y,z,A,B,m,q,C,D,e,j){function i(a){null===n?n=k.getLightbox():a&&(n=k.getLightbox());return n}var n=null;return r.extend({events:{"keyup input":"eventHandler","change input":"eventHandler","change select":"eventHandler","click .res-submit":"bookAsGuestSubmitRes","click .res-flow-submit":"resEditSubmit","click .login-submit":"memberSubmit"},
initialize:function(){this.template=this.options.template;this.content=this.options.content;this.referrer=this.options.referrer;this.isResWidget=this.options.isResWidget;this.hertzGoldPlusImage=this.options.hertzGoldPlusImage;this.viewHelper=m;this.prepareModel();this.isSearch=this.options.isSearch;this.isResWidget=this.options.isResWidget;this.isResFlowEdit=this.options.isResFlowEdit;this.prepareItineraryInfo();this.subscribe();this.render();this.bindDataEvents()},render:function(){this.preRender();
this.$el.empty();this.$el.append(o.template(f(this.template).html()));this.renderTaCountry();this.renderLocation();this.renderDateTime();this.renderAge();this.renderArrivalInfo();this.renderVehicleType();this.renderTaMember();this.renderRedeemPoints();this.renderDiscounts();this.renderButtons();this.renderModify();this.renderErrors();this.redeemViewRef&&"on"==this.formData.get("redeemPoints")&&this.redeemViewRef.redeemPoints();this.handleErrorData(g.getItem(e.ERRORS),!1);this.postRender();return this},
prepareModel:function(){this.metaData=this.model.get("metaData");this.formData=this.model.get("formData")},handlePopupSubmit:function(a){this.metaData.set(a,!0,{silent:!0});!this.metaData.get("loggedIn")&&this.metaData.get("bookAsMember")?this.submitResMemberLogin():this.submitRes()},renderAdditionMemberOverlay:function(){var a=this;require(["reservation/itinerary/core/view/member-info-view"],function(b){i().overlay({title:a.content.homePage.homePageContent.memberIdOverlayTitle,width:584,center:!0,
dismiss:!1},(new b({template:f("#member-info-tpl").html(),model:a.model,content:a.content,referrer:h.homepage.resData})).render().el)})},renderTaCountry:function(){this.metaData.get("enableTA")?(new s({el:this.$el.find("#itn-ta-country"),template:f("#itinerary-ta-country-list-tpl").html(),model:this.model,content:this.content})).render():this.$el.find("#itn-ta-country").remove()},renderLocation:function(){var a;a=this.metaData.get("enablePickupDropdown")?f("#itinerary-dropdown-location-tpl").html():
f("#itinerary-fts-location-tpl").html();a=(new t({el:this.$el.find("#itn-location"),template:a,model:this.model,viewHelper:this.viewHelper,content:this.content,isResFlowEdit:this.isResFlowEdit})).render();this.metaData.get("enablePickupDropdown")&&a.renderDropDownLocations();window.itineraryLocationView=a},renderDateTime:function(){(new u({el:this.$el.find("#itn-date-time"),template:f("#itinerary-date-time-tpl").html(),model:this.model,content:this.content})).render()},renderAge:function(){this.metaData.get("showAgeDropdown")&&
!this.isResFlowEdit?(new v({el:this.$el.find("#itn-age-info"),template:f("#itinerary-age-tpl").html(),model:this.model,content:this.content})).render():this.$el.find("#itn-age").remove()},renderArrivalInfo:function(){this.metaData.get("enableArrivalOptions")?(new w({el:this.$el.find("#itn-arrival-info"),template:f("#itinerary-arrival-info-tpl").html(),model:this.model,content:this.content})).render():this.$el.find("#itn-arrival-info").remove()},renderVehicleType:function(){this.metaData.set("isResWidget",
this.isResWidget);this.metaData.get("enableCarDropDown")&&this.metaData.get("vehicleGroupSippsAvailable")&&!this.isResFlowEdit?(new y({el:this.$el.find("#itn-vehicle-type"),template:f("#itinerary-vehicle-type-tpl").html(),model:this.model,content:this.content})).render():this.$el.find("#itn-vehicle-type").remove()},renderTaMember:function(){this.metaData.get("enableTA")?(new z({el:this.$el.find("#itn-ta-member-info"),template:f("#itinerary-ta-member-info-tpl").html(),model:this.model,content:this.content})).render():
this.$el.find("#itn-ta-member-info").remove()},renderRedeemPoints:function(){this.metaData.get("showRedeemPoints")&&!this.isResFlowEdit?this.redeemViewRef=(new x({el:this.$el.find("#redeem-section"),template:f("#itinerary-redeem-point-tpl").html(),model:this.model,content:this.content})).render():this.$el.find("#redeem-section").remove()},renderDiscounts:function(){this.metaData.get("isIncludeDiscountSection")&&!this.metaData.get("applicant")?(new A({el:this.$el.find("#itn-discounts"),template:f("#itinerary-discounts-tpl").html(),
model:this.model,metaData:this.metaData,formData:this.formData,viewHelper:this.viewHelper,content:this.content})).render():this.$el.find("#itn-discounts").remove()},renderModify:function(){this.metaData.get("resRmcProcess")&&!this.isResFlowEdit?(this.metaData.get("prepaidModify")&&"on"!==this.formData.get("originalRqCheckBox")&&this.formData.set("originalRqCheckBox","on"),this.$el.find("#itn-modify-keep-rate").append(o.template(f("#itinerary-modify-keep-rate-tpl").html(),{metaData:this.metaData.attributes,
formData:this.formData.attributes,content:this.content}))):this.$el.find("#itn-modify-keep-rate").remove()},renderErrors:function(){var a=g.getItem(e.ITINERARY_ERROR_DATA);if(a){var b=JSON.parse(a);if(b&&b.systemErrors&&0<b.systemErrors.length)b=b.systemErrors[0],0<=b.indexOf("NRX196")&&this.renderAdditionMemberOverlay();else if(b&&(b.messages&&0<b.messages.length)&&(b=b.messages[0],0<=b.indexOf("NZX305")&&(b=g.getItem(e.REFERRER_URL))))window.location.href="https://"+b;a=JSON.parse(a);l.displayAllErrors(a,
this.referrer.find("#error-list"));g.removeItem(e.ITINERARY_ERROR_DATA);g.removeItem(e.REFERRER_URL)}},renderButtons:function(){this.$el.find("#res-submit-btns").append(o.template(f("#itinerary-buttons-tpl").html(),{metaData:this.metaData.attributes,content:this.content,isResFlowEdit:this.isResFlowEdit}))},bindDataEvents:function(){this.formData.off("error",this.handleFormError,this);this.formData.off("fieldError",this.displayError,this);this.formData.off("ageChanged",this.ageChanged,this);this.formData.off("systemErrors",
this.handleSystemErrors,this);this.formData.on("error",this.handleFormError,this);this.formData.on("fieldError",this.displayError,this);this.formData.on("ageChanged",this.ageChanged,this)},showAgeOverlay:function(){var a=this;require(["reservation/itinerary/core/view/age-view"],function(b){i().overlay({title:a.content.homePage.homePageContent.ageSelectOverlayTitle,width:584,center:!0},(new b({model:a.model,content:a.content,referrer:a})).render().el)})},displayError:function(a,b,c){l.displayFieldErrors(b,
c);window.scrollTo(0,0)},handleSystemErrors:function(){},handleFormError:function(a,b){var c=this.content,d=k.getNotifier().alert;if("string"===typeof b)switch(b){case "pickupCountry":d(c.homePage.jsErrorContent.selectCountry);this.$el.find("#pickup-country").focus();break;case "pickupLocation":d(c.homePage.jsErrorContent.selectPickupLocation);this.$el.find("#pickup-location").focus();break;case "dropoffCountry":d("Please select a Dropoff Country");this.$el.find("#dropoff-country").focus();break;
case "dropoffLocation":d(c.homePage.jsErrorContent.selectDropoffLocation);this.$el.find("#dropoff-location").focus();break;case "pickupDay":d(c.homePage.jsErrorContent.validPickupDate);break;case "dropoffDay":d(c.homePage.jsErrorContent.validDropoffDate);break;case "ageSelector":this.handleAgeError();break;case "cdpDiscounts":this.displayCDPNotification();break;case "pickupHasSpecialInstruction":this.locationPopupMessage("pickupLocPopup",a.get("pickupHiddenEOAG"));break;case "dropoffHasSpecialInstruction":this.locationPopupMessage("dropoffLocPopup",
a.get("dropoffHiddenEOAG"))}else!h.config.isApp&&"phone"!==h.config.deviceGroup&&this.render(),this.handleErrorData(b.responseText,!0)},locationPopupMessage:function(a,b){this.viewHelper.locationPopupMessage(this.content.locationDetailsView.locationDetails.locTitle,a,b,this)},eventHandler:function(a){var a=f(a.target),b=f.trim(a.val());a.is(":checkbox")&&(b=a.is(":checked")?b:"");this.formData.set(a.attr("name"),b,{silent:!0})},handleAgeError:function(){this.showAgeOverlay(this.formData);var a=i();
a.inUse&&a.closeOverlay()},ageChanged:function(a){this.$el.find("#ageSelector option").each(function(){this.value===a&&(f(this).prop("selected",!0),f(this).parent().change())})},displayLocationClosedError:function(a,b){i().inUse&&!this.isResFlowEdit&&i().closeOverlay();m.trackLocationClosedOverlay("DisplayLocationClosedOverlay");i(this.isResFlowEdit?!0:!1).overlay({title:this.content.homePage.locationClosedProcess.locationClosed,width:584,center:!0,close:function(){m.trackLocationClosedOverlay("Close")}},
(new B({formData:this.formData,metaData:this.metaData,content:this.content,locations:a,template:"#location-closed-overlay-tpl",callback:b,model:this.model})).render().el)},memberSubmit:function(){this.metaData.get("loggedIn")?this.bookAsGuestSubmitRes():(this.trackMemberRes(),this.metaData.set({bookAsMember:1},{silent:!0}),this.submitRes())},resEditSubmit:function(){this.metaData.get("loggedIn")?this.memberSubmit():this.bookAsGuestSubmitRes()},handleClosedLocation:function(){this.viewHelper.pickupAndDropoffTimesAreValid(this.formData.attributes,
this.metaData.attributes,function(a){this.displayLocationClosedError(a,this.bookAsGuestSubmitRes.bind(this))}.bind(this))},preSubmitCheck:function(a){var b=this.handleClosedLocation.bind(this);if(this.viewHelper.isEligibleMemberLevel(this.metaData)){var c=f.Deferred(),d=!1,e=this;c.done(function(c){if(c&&!c.isOneWay&&c.pickup&&c.pickup.optGoldAnytime){var c={destinationCountryCode:c.pickup.countryCode},f=e.formData.get("no1ClubNumber");e.metaData.get("enableTA")&&f&&(c.memberNumber=f);(c=e.viewHelper.getMemberPreferences(c))?
(e.viewHelper.storeMemberPrefs(c),c.get("goldAnytimeEligible")&&(a&&"function"===typeof a)&&(a(),d=!0)):a&&"function"===typeof a&&(a(),d=!0)}d||e.viewHelper.checkLocationsAndSubmit(e.formData,e.metaData,a,b)});c.fail(function(){a&&"function"===typeof a&&a()});this.viewHelper.getDestinationData(this.formData,c)}else this.viewHelper.checkLocationsAndSubmit(this.formData,this.metaData,a,b)},bookAsGuestSubmitRes:function(){this.metaData.get("isRedeemPoints")?this.formData.set({redeemPoints:"on"},{silent:!0}):
this.formData.set({redeemPoints:""},{silent:!0});this.metaData.get("isRedeemPoints")&&!this.metaData.get("loggedIn")?this.memberSubmit():(this.metaData.set({bookAsMember:0}),this.trackGuestRes(),this.preSubmitCheck(this.submitRes.bind(this)))},bookAsMemberSubmitRes:function(){var a=this,b=a.formData.toJSON(),c=a.metaData.changedAttributes();a.model.fetch({success:function(){a.prepareModel();a.bindDataEvents();a.metaData.set({bookAsMember:1},{silent:!0});c&&a.metaData.set(c,{silent:!0});var d=b.cdpField,
e=b.selectedCarType,f=a.formData.get("selectedCarType"),g=a.formData.get("memberSelectedCdp");b.militaryClock!==a.formData.get("militaryClock")&&(b.militaryClock=a.formData.get("militaryClock"),b.pickupDay=a.flipDate(b.pickupDay),b.dropoffDay=a.flipDate(b.dropoffDay));a.formData.set(b,{silent:!0});d&&""!==d?(d={cdpRadioButton:"otherCdpIndicator",memberOtherCdpField:d,checkDiscount:"on"},a.formData.set(d,{silent:!0})):g&&(d={cdpRadioButton:"profileCdpIndicator",memberSelectedCdp:g,checkDiscount:"on"},
a.formData.set(d,{silent:!0}));(!e||"ACAR"===e)&&a.formData.set({selectedCarType:f},{silent:!0});a.preSubmitCheck(a.submit.bind(a))}})},submitResMemberLogin:function(){var a=this;if(a.formData.isValid()){var b=function(){a.metaData.set({bookAsMember:0},{silent:!0})};a.model.set("metaData",a.metaData);f.ajax({url:h.config.rootContext+"/member/login/overlay",cache:!1,dataType:"html",success:function(c){f("#hp-overlays").append(c);window.scrollTo(0,0);i().overlay({title:"<img src="+a.hertzGoldPlusImage+
" alt='' />",close:b,dismiss:!1},f("#homePageloginBox"));c=new loginModel;new loginView({el:"#homePageloginBox",model:c,isRes:!0,metaModel:a.model.get("metaData")})}})}else a.formData.trigger("error",a.formData,a.formData.validate())},flipDate:function(a){a=a.split("/");return a[1]+"/"+a[0]+"/"+a[2]},trackGuestRes:function(){"undefined"!==typeof WebTracking&&WebTracking.trackData({eVar37:"guest",events:"event7"})},trackMemberRes:function(){"undefined"!==typeof WebTracking&&WebTracking.trackData({eVar37:"member",
events:"event7"})},submitRes:function(){var a=this;a.isResWidget&&a.viewHelper.specialOffersExtrasCheck();"profileCdpIndicator"===a.formData.get("cdpRadioButton")&&a.metaData.get("loggedIn")?a.submit():a.viewHelper.validateCdp(a.getCdpfield()).done(function(){a.metaData.get("bookAsMember")?a.submitResMemberLogin():a.submit()}).fail(function(b){a.formData.trigger("error",null,b,a.referrer.find("#error-list"))})},submit:function(){var a=this;a.setDiscounts();if(this.preSubmit()){a.resetErrors();a.removeGeoPrefIndicator();
g.setItem(e.HOD_VEHICLES,"");var b,c=null,d=a.formData.toJSON();if(this.isResFlowEdit)if(a.formData.isValid()){if(q.isModify()){var f=g.getItem(e.CONFIRMATION_NUMBER);b=h.config.rootContext+"/rest/hertz/v2/reservations/"+f+"/makeReservation"}else b=h.config.rootContext+"/rest/hertz/v2/reservations/makeReservation";c="POST";require(["reservation/res-flow/core/view/helper/view-helper"],function(e){e=e.prepareDataToSubmit(a.formData.toJSON());e=new p.Model(e);a.submitResData(b,c,e,a,d)})}else a.formData.trigger("error",
a.formData,a.formData.validate());else q.isModify()?(f=g.getItem(e.CONFIRMATION_NUMBER),b=h.config.rootContext+"/rest/hertz/v2/itinerary/vehicles/"+f):b=h.config.rootContext+"/rest/hertz/v2/itinerary/vehicles",c="POST",a.submitResData(b,c,a.formData,a,d)}},submitResData:function(a,b,c,d,f){D.saveWithRetry(c,{},{url:a,type:b,beforeSend:function(){h.config.isApp?htz.utils.Spinner.spin():k.getSpinner().spin()},error:function(a,b,c){"cdpDiscounts"==b?(h.config.isApp?htz.utils.Spinner.stop():k.getSpinner().stop(),
d.displayCDPNotification()):(d.isResFlowEdit||d.model.set("formData",a),d.handleRateFailure(a,b,d.referrer.find("#error-list"),c),h.config.isApp?htz.utils.Spinner.stop():k.getSpinner().stop())},success:function(a,b){if(!d.metaData.get("enableDNC"))try{d.storeResInfoInLocalStorage(f,a.get("itinerary"),d.getPrevResStorageKey())}catch(c){}if(b&&b.data&&b.data.href){var h=b.data.href.split("/"),h=h[h.length-1];g.setItem(e.QUOTE_ID,h);C.setReservationId(h)}d.formData.clear({silent:!0});d.formData.set(f,
{silent:!0});d.handleRateSuccess(d.metaData,d.formData,d.model,b)},complete:function(){d.$el.find(".home").removeClass("step-discount");i().inUse&&!d.isResFlowEdit&&i().closeOverlay()}})},getCdpfield:function(){return this.metaData.get("loggedIn")&&this.formData.get("memberOtherCdpField")?this.formData.get("memberOtherCdpField"):this.formData.get("cdpField")},prepareItineraryInfo:function(){var a=this.getLatestPrevSearch(this.getPrevResStorageKey());if(this.isFormDataEmpty()&&!this.isSearch){var b=
this.viewHelper.getUpdatedTime();this.formData.set({pickupTime:b,dropoffTime:b},{silent:!0});a&&this.loadLocalStorageResInfo(a)}this.storeDialect()},storeDialect:function(){j.updateReservationInfo({dialect:h.config.dialect})},isFormDataEmpty:function(){var a=this.formData.attributes;return""===a.pickupDay&&""===a.dropoffDay&&"10:00"===a.pickupTime&&"10:00"===a.dropoffTime&&""===a.cdpField&&""===a.memberOtherCdpField&&""===a.corporateRate&&""===a.officialTravel&&""===a.pcNumber&&""===a.cvNumber&&""===
a.itNumber&&""===a.typeInRateQuote},getLatestPrevSearch:function(a){try{if(this.itnInfo=localStorage.getItem(a))return this.itnInfo=JSON.parse(this.itnInfo),h.config.isApp||this.metaData.set({isOldResInfo:!0}),this.itnInfo.prevResData[this.itnInfo.prevResData.length-1].resFormData}catch(b){}},getPrevResStorageKey:function(){return this.metaData.get("loggedIn")?e.MEMBER_SEARCH_DATA:e.NON_MEMBER_SEARCH_DATA},storeResInfoInLocalStorage:function(a,b,c){if(b){var d={},e={},f;if(this.metaData.get("loggedIn")){e.resFormData=
{};var g="pickupLocation pickupHiddenEOAG dropoffLocation dropoffHiddenEOAG returnAtDifferentLocationCheckbox pickupDay pickupDayStandard dropoffDayStandard dropoffDay pickupTime dropoffTime militaryClock selectedCarType inpPickupAutoFill inpPickupStateCode inpPickupCountryCode inpPickupSearchType inpDropoffAutoFill inpDropoffStateCode inpDropoffCountryCode inpDropoffSearchType".split(" ");for(f=0;f<g.length;f++)e.resFormData[g[f]]=a[g[f]]}else e.resFormData=a;a=["age","arrivalInfo","discounts","pickupDate",
"dropoffDate"];for(f=0;f<a.length;f++)d[a[f]]=b[a[f]];(this.itnInfo=localStorage.getItem(c))?this.itnInfo=JSON.parse(this.itnInfo):(this.itnInfo={},this.itnInfo.prevResData=[]);e.itnData=d;if(this.checkResExistsInPrevRental(e.resFormData)){5<=this.itnInfo.prevResData.length&&this.itnInfo.prevResData.splice(0,1);this.itnInfo.prevResData.push(e);try{localStorage.setItem(c,JSON.stringify(this.itnInfo))}catch(h){}}}},loadLocalStorageResInfo:function(a){a=this.formatRecentSearchData(a,!0);this.formData.set(a,
{silent:!0})},loadPreviousSearch:function(a){this.prepareModel();a=this.formatRecentSearchData(a,!1);this.formData.set(a,{silent:!0});this.metaData.set({isOldResInfo:!0});this.render()},formatRecentSearchData:function(a,b){if(a){var c=this.formData.attributes;b&&(a.pickupLocation!=c.pickupLocation&&c.pickupLocation&&(a.pickupLocation=c.pickupLocation,a.pickupHiddenEOAG=c.pickupHiddenEOAG),a.dropoffLocation!=c.dropoffLocation&&c.dropoffLocation&&(a.dropoffLocation=c.dropoffLocation,a.dropoffHiddenEOAG=
c.dropoffHiddenEOAG));""===a.returnAtDifferentLocationCheckbox&&(a.dropoffLocation=a.dropoffHiddenEOAG="");a.inpPickupCountryCode=c.inpPickupCountryCode;a.pickupDay=j.formatDate(this.oldDateCheck(a.pickupDayStandard,!1),this.formData.get("militaryClock"));a.dropoffDay=j.formatDate(this.oldDateCheck(a.dropoffDayStandard,!0),this.formData.get("militaryClock"));a.militaryClock=this.formData.get("militaryClock");this.metaData.get("loggedIn")||(a.ageSelector&&!this.metaData.get("ageDropdownOptions")&&
(a.ageSelector=""),a.selectedCarType&&this.metaData.get("nvpVehicleGroupSipps")&&this.metaData.set("selectedCarLabel",this.viewHelper.findCarTypeLabel(a.selectedCarType,this.metaData.get("nvpVehicleGroupSipps"))),""===a.cdpField&&(a.checkDiscount="",this.metaData.set({discountExists:!1},{silent:!0})),"on"===a.checkDiscount&&(this.metaData.set({discountExists:!0},{silent:!0}),a.memberSelectedCdp="",a.memberOtherCdpField="",""!==a.cdpField?(""==a.corporateRate,""==a.officialTravel,this.metaData.set({isShowCDPOptions:!0},
{silent:!0})):this.metaData.set({isShowCDPOptions:!1},{silent:!0})),a.originalRqCheckBox="")}return a},checkResExistsInPrevRental:function(a){if(this.itnInfo){var b=!1,c=this.itnInfo.prevResData;this.objectKeysPolyfill();if(c)for(var d=0;d<c.length;d++)if(JSON.stringify(c[d].resFormData,Object.keys(c[d].resFormData).sort())===JSON.stringify(a,Object.keys(a).sort())){b=!0;break}return b?!1:!0}},objectKeysPolyfill:function(){Object.keys||(Object.keys=function(a){var b=[],c;for(c in a)a.hasOwnProperty(c)&&
b.push(c);return b})},oldDateCheck:function(a,b){var c=new Date,d=new Date(a);if(isNaN(d.getMonth())||d<c)d=b?new Date(c.getTime()+864E5):c;return d},subscribe:function(){var a=this;f.subscribe(e.RECENT_SEARCH_DATA,function(b,c){a.loadPreviousSearch(c)})},setDiscounts:function(){try{localStorage.getItem("htzDVal")&&this.formData.set({maskedDiscountCode:localStorage.getItem("htzDVal")},{silent:!0})}catch(a){}this.metaData.get("isRedeemPoints")&&this.formData.set({cvNumber:"",pcNumber:"",typeInRateQuote:"",
itNumber:""},{silent:!0});"on"!=this.formData.get("checkDiscount")&&this.formData.set({memberSelectedCdp:"",memberOtherCdpField:"",cdpRadioButton:""},{silent:!0});this.metaData.get("loggedIn")&&(""!==this.formData.get("memberSelectedCdp")||""!==this.formData.get("memberOtherCdpField"))||!this.metaData.get("loggedIn")&&""!==this.formData.get("cdpField")||""!==this.formData.get("pcNumber")||this.formData.get("cvNumber")||this.formData.get("itNumber")||this.formData.get("typeInRateQuote")?this.metaData.set({discountExists:1},
{silent:!0}):this.metaData.set({discountExists:0},{silent:!0})},resetErrors:function(){l.clearErrorMessage(this.referrer.find("#error-list"))},trackRetryErrorInfo:function(a,b){try{0<=b&&0<a.responseText.indexOf("RE100")&&(j.updateReservationInfo({pickupLocationCode:this.formData.get("pickupHiddenEOAG"),pickupDate:this.formData.get("pickupDay"),pickupTime:this.formData.get("pickupTime"),returnDate:this.formData.get("dropoffDay"),returnTime:this.formData.get("dropoffTime")}),j.trackWarning({warning:"RE100-Itn-"+
b}))}catch(c){}},handleRateFailure:function(a,b,c,d){this.bindDataEvents();this.trackLocationInfo();if(this.metaData.get("bookAsMember")){var f;try{f=JSON.parse(b.responseText).message,l.trackError(f),g.setItem(e.ERRORS,JSON.stringify(f))}catch(h){}l.isUseStoragePolyfill()&&l.storeItemIE("ieErrors",f);this.metaData.set({bookAsMember:0},{silent:!0});window.location.reload()}else this.formData.trigger("error",a,b,c);this.isResFlowEdit&&(g.setItem(e.ITINERARY_DATA,JSON.stringify(this.model.toJSON())),
a=new p.Model(b.responseJSON),j.goToPageFromResData(a));this.trackRetryErrorInfo(b,d)},handleRateSuccess:function(a,b,c,d){this.metaData=a;this.formData=b;this.model=c;this.metaData.get("discountExists")||this.formData.set({cdpField:"",checkDiscount:"",corporateRate:"",cvNumber:"",pcNumber:"",typeInRateQuote:"",itNumber:"",officialTravel:""},{silent:!0});this.model.set({formData:this.formData,metaData:this.metaData});if(d&&d.resultInfo)if(g.setItem(e.ITINERARY_DATA,JSON.stringify(this.model.toJSON())),
"fts"===d.resultInfo.result)this.handleFTSRedirect(d.resultInfo.url);else if("geo"===d.resultInfo.result)this.handleMemberGeographyPref(d.resultInfo.url);else{this.formData.set({dropoffDay:d.data.itinerary.dropoffDateValue,dropoffTime:d.data.itinerary.dropoffTimeValue});this.model.set("formData",this.formData);if(d&&d.data&&d.data.meta&&d.data.meta.target===e.VEHICLES||!this.isResFlowEdit)if(g.setItem(e.VEHICLES_DATA,JSON.stringify(d.data.model)),d.message)try{g.setItem(e.VEHICLES_ERROR_DATA,JSON.stringify(d.message))}catch(f){}g.setItem(e.ITINERARY_INFO_DATA,
JSON.stringify(d.data.itinerary));d.data.rateDetails&&g.setItem(e.RATE_DETAILS_DATA,JSON.stringify(d.data.rateDetails));this.navigateToVehiclePage(d)}else WebTracking&&WebTracking.setError("debug-itinerary-submit-failure-"+j.getResponseText(d)+"-"+l.browserDeviceType(),"itinerary"),h.config.isApp?htz.utils.Spinner.stop():k.getSpinner().stop()},navigateToVehiclePage:function(a){this.isResFlowEdit?(j.clearSessionStorage([e.VEHICLES_DATA,e.EXTRAS_DATA,e.ITINERARY_INFO_DATA,e.RATE_DETAILS_DATA]),a=new p.Model(a),
j.goToPageFromResData(a)):this.isResWidget?window.location.href=h.config.rootContext+"/reservation/vehicles":require(["reservation/config"],function(a){var c="vehicles";q.isModify()&&(c="modify/"+c);a.getRotar().rotate(c)})},handleFTSRedirect:function(a){window.location.href=a},handleMemberGeographyPref:function(){var a=this;a.geoPrefLocationFound()?m.geoPreferencesSubmitWithItnInfo(a,i()):require(["reservation/itinerary/core/view/itinerary-geo-preferences-overlay-view"],function(b){i(a.isResFlowEdit?
!0:!1).overlay({title:a.content.ememberGlobals.geoPreferencesForResModalTitle},(new b({content:a.content,template:"#geo-preferences-overlay-tpl",referrer:a,lBoxRef:i(),viewHelper:m})).render().el);k.getSpinner().stop()})},geoPrefLocationFound:function(){return this.metaData.get("loggedIn")?j.checkIfGeoPrefLocation(this.formData.get("pickupHiddenEOAG")||this.formData.get("pickupLocation")):!1},keepTrackOfGeoPrefLocation:function(){j.keepTrackOfGeoPrefLocation(this.formData.get("pickupHiddenEOAG")||
this.formData.get("pickupLocation"))},removeGeoPrefIndicator:function(){"Y"==this.formData.get("fromProfileForGoldService")&&this.formData.set({fromProfileForGoldService:""},{silent:!0})},handleErrorData:function(a,b){if(a){var c=this.viewHelper.parseErrorObject(a,b);this.handleLocationErrors(c);g.removeItem(e.ERRORS)}},handleLocationErrors:function(a){if(a){l.clearErrorMessage();for(var b=0;b<a.length;b++)if(a[b].informationForRedirection)switch(a[b].informationForRedirection.functionality){case "proximitySearch":this.showNearbyLocations(a[b]);
break;case "hod":this.showHODLocations(a[b]);break;case "hod24X7":this.handleHOD24X7(a[b]);break;case "dtg":this.isDtgProximity(a)&&delete a[b].message,this.showDTGLocations(a[b])}}},showNearbyLocations:function(a){this.createErrorListContainer();var b=this.referrer.find("#error-list ul").append(o.template(f("#nearby-locations-tpl").html()));b.find("li:last .nearby-message").append(a.message);for(var b=b.find("li:last .proximity-search"),a=a.informationForRedirection.linkInformation,c=0;c<a.length;c++)b.attr("href",
a[c].linkUrl),b.append(a[c].linkContent);this.referrer.find("#error-list").show()},showHODLocations:function(a){var b=this;b.createErrorListContainer();b.referrer.find("#error-list ul").append("<li>"+a.message+"</li>");a.informationForRedirection&&a.informationForRedirection.linkInformation&&require(["reservation/itinerary/core/view/hod-link-view"],function(c){new c({collection:a.informationForRedirection.linkInformation});b.referrer.find("#error-list").show()})},isDtgProximity:function(a){return 1<
a.length&&"dtg"==a[0].informationForRedirection.functionality&&"proximitySearch"==a[1].informationForRedirection.functionality},showDTGLocations:function(a){var b=this;a.message&&(this.createErrorListContainer(),this.referrer.find("#error-list ul").append("<li>"+a.message+"</li>"),this.referrer.find("#error-list").show());a.informationForRedirection&&a.informationForRedirection.linkInformation&&require(["reservation/dollar-thrifty-redirect/core/presenter/dtg-presenter"],function(c){c.showDtgRedirect(b.content.reservationGlobals.dtgRedirection.dtgHeader,
a.informationForRedirection.linkInformation)})},createErrorListContainer:function(){this.referrer.find("#error-list li").length||this.referrer.find("#error-list").append("<ul></ul>")},handleHOD24X7:function(a){k.getSpinner().spin();var b,c,d=a.informationForRedirection.linkInformation;j.clearSessionStorage([e.ITINERARY_DATA,e.ITINERARY_INFO_DATA,e.RATE_DETAILS_DATA,e.VEHICLES_DATA]);0<d.length&&(d[0].hod24X7VehicleAvailabilityServiceLink?(c="vehicleAvailability",b=d[0].hod24X7VehicleAvailabilityServiceLink):
d[0].proximitySearchServiceLink&&(c="proximitySearch",b=d[0].proximitySearchServiceLink));b?this.callHodWebService(b,c,a):(g.setItem(e.HOD_VEHICLES,""),k.getSpinner().stop(),this.navigateToVehiclePage())},callHodWebService:function(a,b,c){var d=this;f.ajax({url:a,dataType:"jsonp",jsonpCallback:"callback",contentType:"application/json",timeout:1E4,success:function(a){"vehicleAvailability"===b&&"true"===a?(g.setItem(e.HOD_VEHICLES,"true"),d.navigateToVehiclePage()):"proximitySearch"===b&&a.locationsAvailable?
d.navigateToVehiclePage():("vehicleAvailability"===b&&g.setItem(e.HOD_VEHICLES,"false"),d.showNearbyLocations(c))},error:function(){g.setItem(e.HOD_VEHICLES,"");d.showNearbyLocations(c)},complete:function(){k.getSpinner().stop()}})},setHodSessionStorage:function(a){l.storeItemIE("ieHodLocationInfo",a,{async:!1,timeout:3E3})},trackLocationInfo:function(){var a=this.formData.get("pickupHiddenEOAG"),b=this.formData.get("dropoffHiddenEOAG");""===b&&(b=a);a={linkTrackVars:"eVar3,eVar4",eVar3:a,eVar4:b};
"undefined"!==typeof WebTracking&&WebTracking.sendTrackingData("Pickup and Dropoff Locations",a,!0)},displayCDPNotification:function(){var a=i();a.inUse&&!this.isResFlowEdit&&a.closeOverlay();var b=this,c=function(){b.viewHelper.trackCdpOptions("close")};require(["reservation/itinerary/core/view/itinerary-cdp-view"],function(a){i(b.isResFlowEdit?!0:!1).overlay({title:b.content.homePage.homePageContent.cdpOverlayTitle,dismiss:!1,close:c},(new a({model:b.model,metaData:b.metaData,formData:b.formData,
content:b.content,referrer:b,lBoxRef:i()})).render().el)})},doCleanup:function(){this.redeemViewRef&&this.redeemViewRef.doCleanup&&this.redeemViewRef.doCleanup();this.template=this.content=this.metaData=this.formData=this.redeemViewRef=this.viewHelper=n=null}})});
define("reservation/itinerary/core/view/itinerary-ta-country-view",["jquery","underscore","backbone"],function(c,d,e){return e.View.extend({events:{"keyup select":"eventHandler"},initialize:function(){this.template=this.options.template;this.content=this.options.content;this.metaData=this.model.get("metaData");this.formData=this.model.get("formData")},eventHandler:function(a){var a=c(a.target),b=a.val();a.is(":checkbox")&&(b=a.is(":checked")?b:"");this.formData.set(a.attr("name"),b,{silent:!0})},
render:function(){this.$el.append(d.template(this.template,{metaData:this.metaData.attributes,formData:this.formData.attributes,content:this.content}));return this},doCleanup:function(){this.template=this.content=this.metaData=this.formData=null}})});
define("reservation/itinerary/core/view/itinerary-location-view","jquery underscore backbone config/app-config utils/utils-proxy reservation/process-config/core/reservation-constants reservation/itinerary/core/view/helper/view-helper".split(" "),function(d,j,m,f,n,g,k){var i=null;return m.View.extend({events:{"keyup .ww-input":"triggerWordwheel","keyup input":"eventHandler","change input":"eventHandler","change select":"eventHandler","click #one-way":"showOneWay","click .find-location":"findLocations",
"click #one-way-info":"displayOneWayOverlay","click .icons-location":"setGeoLocation","click #previous-rentals":"previousRentals","click #previous-search":"previousSearch","keydown #pickup-location":"setDandCChangedValue","change #pickup-location":"setDandCChangedValue","keydown #dropoff-location":"setDandCChangedValue","change #dropoff-location":"setDandCChangedValue","click .dnc-button":"showDncOverlay","click .dnc-link":"showDandCLocationLink","change #pickup-location":"trackReservationStart"},
triggerWordwheel:function(a){"9"!=a.keyCode&&Wordwheel.trigWW(a)},initialize:function(){var a=this;this.template=this.options.template;this.content=this.options.content;this.viewHelper=this.options.viewHelper;this.isResFlowEdit=this.options.isResFlowEdit;this.metaData=this.model.get("metaData");this.formData=this.model.get("formData");this.subscribe();Wordwheel.input=null;Wordwheel.selectFunc=function(b){a.setLocation(b);a.saveLocationInSession(b)}},setPickupLocation:function(a){this.formData.set(a,
{silent:!0});this.$el.find("#pickup-location").val(a.pickupLocation)},setDeliveryPickupLocation:function(a){this.formData.set(a.formData,{silent:!0});this.metaData.set(a.metaData,{silent:!0});this.setPickupLocationField(a.formData.pickupLocation);this.$el.find("#delivery-infolink").show()},setCollectionDropoffLocation:function(a){this.formData.set(a.formData,{silent:!0});this.metaData.set(a.metaData,{silent:!0});this.setDropoffLocationField(a.formData.dropoffLocation);this.$el.find("#collection-infolink").show()},
setPickupLocationField:function(a){this.$el.find("#pickup-location").val(a)},setDropoffLocationField:function(a){this.$el.find("#dropoff-location").val(a)},subscribe:function(){var a=this;d.subscribe(g.LOCATION_PICKUP,function(b,c){a.setPickupLocation(c)});a.deliveryAndCollectionSubscribe()},deliveryAndCollectionSubscribe:function(){var a=this;d.unsubscribe(g.LOCATION_DELIVERY_PICKUP);d.unsubscribe(g.LOCATION_COLLECTION_DROPOFF);d.subscribe(g.LOCATION_DELIVERY_PICKUP,function(b,c){a.setDeliveryPickupLocation(c)});
d.subscribe(g.LOCATION_COLLECTION_DROPOFF,function(b,c){a.setCollectionDropoffLocation(c)})},resetLocations:function(a){"pickup-country"===a?(this.pickupLocationList.resetting=!0,this.pickupLocationList.model.reset()):"dropoff-country"===a&&(this.dropoffLocationList.resetting=!0,this.dropoffLocationList.model.reset())},resetLocationValues:function(a,b){this.formData.set(a,b,{silent:!0})},renderDropDownLocations:function(){var a=this;require(["reservation/common/location-list/core/presenter/location-presenter"],
function(b){a.pickupLocationList=null;a.dropoffLocationList=null;b.buildCountryLists([a.formData.get("pickupCountry"),a.formData.get("dropoffCountry")],["#pickup-country","#dropoff-country"],a);a.formData.get("pickupCountry")&&(a.pickupLocationList=b.buildLocationsList(a.content,a.formData.get("pickupCountry"),a.formData.get("pickupHiddenEOAG"),"#pickup-location",a));a.formData.get("dropoffCountry")&&(a.dropoffLocationList=b.buildLocationsList(a.content,a.formData.get("dropoffCountry"),a.formData.get("dropoffHiddenEOAG"),
"#dropoff-location",a))})},getLocationsForCountry:function(a,b){var c=this;require(["reservation/common/location-list/core/presenter/location-presenter"],function(d){"pickup-country"===b.attr("id")?c.pickupLocationList=d.buildLocationsList(c.content,a,c.formData.get("pickupHiddenEOAG"),"#pickup-location",c):c.dropoffLocationList=d.buildLocationsList(c.content,a,c.formData.get("dropoffHiddenEOAG"),"#dropoff-location",c)})},refreshBanner:function(a,b,c){this.viewHelper.refreshBanner(a,b,c)},setGeoLocation:function(a){this.viewHelper.setGeoLocation(d(a.target).attr("id"),
["#pickup-location","#dropoff-location"],this.content)},eventHandler:function(a){var a=d(a.target),b=a.val();a.is(":checkbox")&&(b=a.is(":checked")?b:"");this.formData.set(a.attr("name"),b,{silent:!0})},findLocations:function(a){var b,c,h,e,l=0,g=0;c=d("#pickup-location").val();h=d("#dropoff-location").val();b=f.config.rootContext+"/location?search=";"return-loc"===d(a.target).parent().attr("id")?(b+=h+"&triggerSearch=true&searchFrom=Homepage&locType=dOff",e=h):(b+=c+"&triggerSearch=true&searchFrom=Homepage&locType=pUp",
e=c);void 0!=typeof locList&&""!=locList&&j.each(locList.models,function(a){a.get("searchTerm")===e&&(30==a.get("searchType")&&(l=a.get("latitude"),g=a.get("longitude"),b+="&lat="+l+"&lng="+g),3==a.get("categoryCode")&&(HStorage.setItem("cCodeHomepage",a.get("countryCode"),"","s"),HStorage.setItem("cNameHomepage",a.get("countryName"),"","s"),HStorage.setItem("sCodeHomepage",a.get("stateCode"),"","s"),HStorage.setItem("sNameHomepage",a.get("stateName"),"","s"),HStorage.setItem("cityHomepage",a.get("city"),
"","s"),b+="&locTab=2"))});window.location.href=b;return!1},displayOneWayOverlay:function(){null==i&&(i=n.getLightbox());i.overlay({url:"one-way-overlay",title:this.content.homePage.homePageContent.oneWayOverlayTitle,width:584,center:!0},j.template(d("#one-way-tpl").html(),{content:this.content}));return!1},showOneWay:function(a){var b=this.$el.find("#return-loc");d(a.target).prop("checked")?b.show():b.hide();this.viewHelper.setFooterPadding()},setValue:function(a,b,c){b[c]=a?a:""},setLocation:function(a){var b=
"pickup-location"===a.get("locType")?"inpPickup":"inpDropoff",c="",d=a.get("searchType")?a.get("searchType").toString():a.get("searchType"),c=!a.get("locationTitle")&&!a.get("displayText")?this.$el.find("#"+a.get("locType")).val():a.get("locationTitle")||a.get("displayText"),e={},f="inpPickup"===b?"pickup":"dropoff";this.setValue(c,e,f+"Location");this.setValue(a.get("preferredOag"),e,f+"HiddenEOAG");a.get("hasSpecialInstruction")?this.setValue("Y",e,b+"HasSpecialInstruction"):this.setValue("N",e,
b+"HasSpecialInstruction");this.setValue(a.get("isServedBy"),e,b+"IsServedBy");this.setValue(a.get("stateCode"),e,b+"StateCode");this.setValue(a.get("countryCode"),e,b+"CountryCode");this.setValue(d,e,b+"SearchType");this.setValue(a.get("displayText")?"Y":"",e,b+"AutoFill");this.setValue(a.get("optGoldAnytime"),e,b+"OptGoldAnytime");33==a.get("searchType")&&this.setValue(a.get("zip"),e,f+"ZipCode");this.formData.set(e,{silent:!0});this.metaData.set(f+"LocPopup",!1,{silent:!1});a.get("preferredOag")&&
("pickup-location"===a.get("locType")?this.refreshBanner(!this.metaData.get("blockAds"),a.get("preferredOag")):this.refreshBanner(!1,a.get("preferredOag")));this.metaData.get("enableDNC")&&("inpPickup"===b&&this.metaData.get("deliveryLocation")?this.metaData.unset("deliveryLocation"):"inpDropoff"===b&&this.metaData.get("collectionLocation")&&this.metaData.unset("collectionLocation"))},getLocationHours:function(a){a&&k.getRentalLocationDetails(a,function(){k.storeLocationOag()})},saveLocationInSession:function(a,
b){var b=a.get("locType"),c=this.formData.get("pickupHiddenEOAG"),h=this.formData.get("dropoffHiddenEOAG");if(""!==c&&"pickup-location"===b){var e={pickupLocation:a.get("locationTitle")||a.get("displayText"),inpPickupStateCode:a.get("stateCode"),inpPickupCountryCode:a.get("countryCode"),inpPickupSearchType:a.get("searchType"),inpPickupAutoFill:this.formData.get("inpPickupAutoFill"),pickupOptGoldAnytime:a.get("optGoldAnytime"),pickupHiddenEOAG:c};d.ajax({url:f.config.rootContext+"/handlers/SaveSessionInformationHandler",
data:e});this.getLocationHours(c)}""===c&&"pickup-location"===b&&(e={pickupLocation:this.formData.get("pickupLocation")},d.ajax({url:f.config.rootContext+"/handlers/SaveSessionInformationHandler",data:e}));""!==h&&"dropoff-location"===b&&(e={dropoffLocation:a.get("locationTitle")||a.get("displayText"),inpDropoffStateCode:a.get("stateCode"),inpDropoffCountryCode:a.get("countryCode"),inpDropoffSearchType:a.get("searchType"),inpDropoffAutofill:this.formData.get("inpDropoffAutoFill"),dropoffOptGoldAnytime:a.get("optGoldAnytime"),
dropoffHiddenEOAG:h,returnAtDifferentLocationCheckbox:"on"},d.ajax({url:f.config.rootContext+"/handlers/SaveSessionInformationHandler",data:e}),this.getLocationHours(h));""===h&&"dropoff-location"===b&&(e={dropoffLocation:this.formData.get("dropoffLocation")},d.ajax({url:f.config.rootContext+"/handlers/SaveSessionInformationHandler",data:e}))},previousSearch:function(){var a=this;a.trackPreviousRentals();require(["reservation/previous-itinerary/core/presenter/previous-itinerary-presenter"],function(b){b.show(a.content,
a.metaData.get("loggedIn"),a.metaData.get("nvpVehicleGroupSipps"),a.viewHelper)});return!1},previousRentals:function(){var a=this;require(["reservation/previous-rentals/core/presenter/previous-rentals-presenter"],function(b){b.show(a.content.homePage.dandCHomePageContent.previousRentals)});return!1},trackPreviousRentals:function(){"undefined"!==typeof WebTracking&&WebTracking.trackPage("previous-searches-link")},openWindow:function(a,b,c){return window.open(a,b,c)},showDncOverlay:function(a){var b,
c,f=this.metaData.get("loginRequired");"delivery"===d(a.currentTarget).attr("id")?(b=this.metaData.get("urlDeliverVehicle"),c="D"):"collection"===d(a.currentTarget).attr("id")&&(b=this.metaData.get("urlCollectVehicle"),c="C");f?document.location.href=b:this.displayDeliveryAndCollectionOptions(c)},displayDeliveryAndCollectionOptions:function(a){var b=this;require(["reservation/delivery-and-collection/core/presenter/delivery-and-collection-presenter","text!"+f.config.rootContext+"/assets/"+f.config.buildId+
"/html/all/reservation/delivery-and-collection/delivery-and-collection.html"],function(c,f){d("body").append(f);c.showCountriesView(a,d("#dandc-tpl"),b.content.DandCView.DandC.locationSearch)})},showDandCLocationLink:function(a){var a=d(a.target).parent().attr("id"),b;"delivery-infolink"===a?b=this.formData.get("pickupHiddenEOAG"):"collection-infolink"===a&&(b=this.formData.get("dropoffHiddenEOAG"));require(["reservation/delivery-and-collection/core/presenter/delivery-and-collection-presenter"],function(a){a.showLocationInfo(b)})},
setDandCChangedValue:function(a){if(this.metaData.get("enableDNC"))if(a=d(a.target),"pickup-location"===a.attr("id")){var b=this.model.get("formData").previous("pickupLocation");b&&a[0].value!=b&&this.formData.set({isDeliveryChanged:"Y"},{silent:!0})}else"dropoff-location"===a.attr("id")&&(b=this.model.get("formData").previous("dropoffLocation"))&&a[0].value!=b&&this.formData.set({isCollectChanged:"Y"},{silent:!0})},setAutoFocus:function(){"desktop"!==f.config.deviceGroup&&("tablet"!==f.config.deviceGroup&&
"phone"!==f.config.deviceGroup)&&this.$el.find("#pickup-location").focus()},render:function(){this.$el.append(j.template(this.template,{metaData:this.metaData.attributes,formData:this.formData.attributes,content:this.content,isResFlowEdit:this.isResFlowEdit}));this.setAutoFocus();return this},trackReservationStart:function(){"undefined"!==typeof WebTracking&&WebTracking.trackData({events:"event23"})},doCleanup:function(){this.viewHelper.doCleanup&&this.viewHelper.doCleanup();this.pickupLocationList&&
(this.pickupLocationList=null);this.dropoffLocationList&&(this.dropoffLocationList=null);this.template=this.content=this.metaData=this.formData=this.viewHelper=i=null}})});
define("reservation/itinerary/core/view/itinerary-date-time-view","jquery underscore backbone config/app-config utils/sessionhelper tools/calendar tools/timelist reservation/process-config/core/reservation-constants reservation/process-info/core/model/process-model".split(" "),function(c,g,h,d,e,i,f){return h.View.extend({initialize:function(){this.content=this.options.content;this.template=this.options.template;this.metaData=this.model.get("metaData");this.formData=this.model.get("formData")},render:function(){this.$el.append(g.template(this.template,
{metaData:this.metaData.attributes,formData:this.formData.attributes,content:this.content}));this.renderDates();this.renderTimes();return this},renderDates:function(){var a="phone"===d.config.deviceGroup?this.$el:null,b=e.getItem(htz.res.config.ReservationConstants.CALENDAR_MODE)&&"phone"!==d.config.deviceGroup?parseInt(e.getItem(htz.res.config.ReservationConstants.CALENDAR_MODE)):2;new i({mode:b,euro:this.formData.get("militaryClock"),start:this.$el.find("#pickup-date"),end:this.$el.find("#dropoff-date"),
startText:this.$el.find("#pickup-date-box"),endText:this.$el.find("#dropoff-date-box"),target:a,content:this.content})},renderTimes:function(){var a=c(f.drawTime(this.formData.get("pickupTime"),this.formData.get("militaryClock"))).attr("name","pickupTime"),b=c(f.drawTime(this.formData.get("dropoffTime"),this.formData.get("militaryClock"))).attr("name","dropoffTime");this.$el.find("#pickup-time").append(a);this.$el.find("#dropoff-time").append(b)},doCleanup:function(){this.template=this.content=this.metaData=
this.formData=null}})});
define("reservation/itinerary/core/view/itinerary-age-view",["jquery","underscore","backbone","utils/utils-proxy"],function(c,d,e,f){var a=null;return e.View.extend({events:{"change select":"eventHandler","click #age-info-link":"displayAgeInfo"},initialize:function(){this.template=this.options.template;this.content=this.options.content;this.metaData=this.model.get("metaData");this.formData=this.model.get("formData")},eventHandler:function(b){var b=c(b.target),a=b.val();b.is(":checkbox")&&(a=b.is(":checked")?
a:"");this.formData.set(b.attr("name"),a,{silent:!0})},displayAgeInfo:function(){null==a&&(a=f.getLightbox());a.overlay({url:"age-info-overlay",title:this.content.homePage.homePageContent.ageSelectOverlayTitle,width:584,center:!0},d.template(c("#age-info-tpl").html(),{content:this.content}))},render:function(){this.$el.append(d.template(this.template,{ageDropdownOptions:this.metaData.get("ageDropdownOptions"),ageSelector:this.formData.get("ageSelector"),content:this.content}));return this},doCleanup:function(){this.template=
this.content=this.metaData=this.formData=a=null}})});
define("reservation/itinerary/core/view/itinerary-arrival-info-view",["jquery","underscore","backbone"],function(c,d,e){return e.View.extend({events:{"keyup input":"eventHandler","change input":"eventHandler","change select":"eventHandler"},initialize:function(){this.template=this.options.template;this.content=this.options.content;this.metaData=this.model.get("metaData");this.formData=this.model.get("formData")},eventHandler:function(a){var a=c(a.target),b=a.val();a.is(":checkbox")&&(b=a.is(":checked")?
b:"");this.formData.set(a.attr("name"),b,{silent:!0})},arrivalRadioButton:function(){c("#arriving-info").prop("checked",!0)},render:function(){this.$el.append(d.template(this.template,{metaData:this.metaData.attributes,formData:this.formData.attributes,content:this.content}));return this},doCleanup:function(){this.template=this.content=this.metaData=this.formData=null}})});
define("reservation/itinerary/core/view/itinerary-redeem-view",["jquery","underscore","backbone","utils/utils-proxy"],function(c,f,e,g){var d=null;return e.View.extend({events:{"keyup input":"eventHandler","change input":"eventHandler","change select":"eventHandler","click #redeem-info":"showRedeemInfo","click #redeem":"redeemPoints"},initialize:function(){this.template=this.options.template;this.content=this.options.content;this.metaData=this.model.get("metaData");this.formData=this.model.get("formData")},
eventHandler:function(a){var a=c(a.target),b=a.val();a.is(":checkbox")&&(b=a.is(":checked")?b:"");this.formData.set(a.attr("name"),b,{silent:!0})},showRedeemInfo:function(){var a=this,b=a.content.homePage.homePageContent.redeemOverlayTitle;require(["reservation/itinerary/core/view/content-overlay-view"],function(c){null==d&&(d=g.getLightbox());d.overlay({title:b,width:584,center:!0},(new c({model:new e.Model({url:"redeem-tpl"}),content:a.content})).render().el)});return!1},redeemPoints:function(){if(this.$el.find("#redeem").prop("checked"))this.metaData.set({isRedeemPoints:!0}),
c("#non-cdp-discounts input").attr("disabled",!0),c("input:disabled").closest("div").removeClass("highlight");else{if(0<c("#non-cdp-discounts input").length)for(var a=c("#non-cdp-discounts input"),b=0;b<a.length;b++)""!==a[b].value&&c(a[b]).closest(".discount-row").addClass("highlight");this.metaData.set({isRedeemPoints:!1});c("#non-cdp-discounts input").attr("disabled",!1)}},render:function(){this.$el.append(f.template(this.template,{metaData:this.metaData.attributes,formData:this.formData.attributes,
content:this.content}));return this},doCleanup:function(){this.template=this.content=this.metaData=this.formData=d=null}})});
define("reservation/itinerary/core/view/itinerary-vehicle-type-view",["jquery","underscore","backbone","utils/utils-proxy"],function(f,g,e,h){function d(){null==c&&(c=h.getLightbox());return c}var c=null;return e.View.extend({events:{"keyup input":"eventHandler","change input":"eventHandler","change select":"eventHandler","click #car-type-display":"showCarTypeOverlay","click #fleet-info":"showFleetInfo"},initialize:function(){this.template=this.options.template;this.content=this.options.content;this.metaData=
this.model.get("metaData");this.formData=this.model.get("formData")},eventHandler:function(a){var a=f(a.target),b=a.val();a.is(":checkbox")&&(b=a.is(":checked")?b:"");this.formData.set(a.attr("name"),b,{silent:!0})},showCarTypeOverlay:function(){var a=this;require(["reservation/car-types/core/presenter/car-types-presenter"],function(b){b.showFleet(a)})},selectCarType:function(a,b){var c=this.$el.find("#car-type");this.$el.find("#car-type-display .value").text(a.get("label"));c.get(0).selectedIndex=
b;c.change();d().closeOverlay()},showCartype:function(a){var b=this.$("#car-type-display"),b={width:600,center:!1,plain:!0,darkness:0,hCenter:!1,top:b.offset().top+30,left:b.offset().left};d().overlay(b,a)},showFleetInfo:function(){var a=this,b=a.content.reservationPopups.carTypeDetailsPopupContent.popupHeaderText;require(["reservation/itinerary/core/view/content-overlay-view"],function(c){d().overlay({title:b,width:584,center:!0},(new c({model:new e.Model({url:"fleet-tpl"}),content:a.content})).render().el)})},
render:function(){this.$el.append(g.template(this.template,{selectedCarLabel:this.metaData.get("selectedCarLabel"),nvpVehicleGroupSipps:this.metaData.get("nvpVehicleGroupSipps"),selectedCarType:this.formData.get("selectedCarType"),isResWidget:this.metaData.get("isResWidget"),content:this.content}));return this},doCleanup:function(){this.template=this.content=this.metaData=this.formData=c=null}})});
define("reservation/itinerary/core/view/itinerary-ta-member-view",["jquery","underscore","backbone"],function(c,d,e){return e.View.extend({events:{"keyup input":"eventHandler","change input":"eventHandler"},initialize:function(){this.template=this.options.template;this.content=this.options.content;this.metaData=this.model.get("metaData");this.formData=this.model.get("formData")},eventHandler:function(a){var a=c(a.target),b=a.val();a.is(":checkbox")&&(b=a.is(":checked")?b:"");this.formData.set(a.attr("name"),
b,{silent:!0})},render:function(){this.$el.append(d.template(this.template,{metaData:this.metaData.attributes,formData:this.formData.attributes,content:this.content}));return this},doCleanup:function(){this.template=this.content=this.metaData=this.formData=null}})});
define("reservation/itinerary/core/view/itinerary-discounts-view","jquery underscore backbone config/app-config utils/utils utils/utils-proxy reservation/itinerary/core/view/helper/view-helper".split(" "),function(c,j,g,h,k,i,f){var d=null;return g.View.extend({events:{"keyup input":"eventHandler","change input":"eventHandler","change select":"eventHandler","click #discount-info":"showDiscountDetails","click #discounts":"toggleDiscounts","blur #cdp-textfield":"handleCdp","change #member-selected-cdp":"handleMemberCdp",
"keyup #member-selected-cdp":"handleMemberCdp","click #profile-cdp-indicator":"setProfileCdpIndicator","blur #member-other-cdp":"handleOtherCdp","keyup .discount-row input":"highlightDiscount","keyup #cdp-textfield":"showCDPOptions","click #corp-cust":"toggleCorpDependentFields","keyup #type-in-rq":"showCdpRqWarning","click #discount-slideout":"displayMobileDiscounts","click #corp-rate":"showCdpRqWarning","click #other-cdp-indicator":"setOtherCdpIndicator","keyup #member-other-cdp":"setOtherCdpIndicator",
"click input[name=trip-type]":"toggleTripType","click input[name=corp-rate]":"toggleCorpRate","click #app-cdp-buttons":"handleCdpLinks"},initialize:function(){this.template=this.options.template;this.content=this.options.content;this.viewHelper=this.options.viewHelper;this.metaData=this.options.metaData;this.formData=this.options.formData},toggleTripType:function(a){"business-cdp-indicator"===a.currentTarget.id?(f.trackCdpOptions("cdp-options-business-radio"),this.setBusinessFormData()):(f.trackCdpOptions("cdp-options-leisure-radio"),
this.setLeisureFormData())},toggleCorpRate:function(a){"corp-rate-yes"===a.currentTarget.id?(f.trackCdpOptions("cdp-options-corp-rate-yes-radio"),this.setCorpRateFormData(!0)):(f.trackCdpOptions("cdp-options-corp-rate-no-radio"),this.setCorpRateFormData(!1))},setCorporateRateData:function(){var a="on"==this.formData.get("corporateRate")?"yes":"no";this.formData.set({"corp-rate":a},{silent:!0})},setBusinessFormData:function(){var a="";this.$el.find("#business-cdp-indicator").prop("checked",!0);this.metaData.get("allowContractRate")?
(this.$el.find("#corp-rate-yes").prop("disabled",!1),this.$el.find("#corp-rate-no").prop("disabled",!1),this.$el.find("#cdp-options").removeClass("disabled-label")):a="on";this.$el.find("#official-travel").prop("checked",!0);this.showCdpRqWarning();this.formData.set({corporateRate:a,officialTravel:"on"},{silent:!0});this.metaData.set({travelType:"B"},{silent:!0})},setLeisureFormData:function(){this.$el.find("#leisure-cdp-indicator").prop("checked",!0);this.metaData.set({travelType:"L"},{silent:!0});
this.resetCorpFormFields()},setCorpRateFormData:function(a){this.formData.set({corporateRate:a?"on":""},{silent:!0})},clearBusinessLeisureFormData:function(){this.$el.find('input[name="trip-type"]').prop("checked",!1);this.metaData.set({travelType:""},{silent:!0});this.formData.get("trip-type")&&this.formData.unset("trip-type",{silent:!0});this.resetCorpFormFields()},clearDiscountFields:function(){this.formData.get("cdpField")&&(this.$el.find("#cdp-textfield").val("").keyup(),this.formData.set({cdpField:""},
{silent:!0}),this.$el.find("#cdp-options-business").hide(),this.clearBusinessLeisureFormData());if(this.formData.get("memberSelectedCdp")||this.formData.get("memberOtherCdpField"))this.$el.find("#member-selected-cdp").val(""),this.$el.find("#member-other-cdp").val(""),this.$el.find("#profile-cdp-indicator").prop("checked",!0),this.formData.set({memberSelectedCdp:"",memberOtherCdpField:"",cdpRadioButton:""},{silent:!0}),this.$el.find("#cdp-options-business").hide(),this.clearBusinessLeisureFormData();
if(this.formData.get("pcNumber")||this.formData.get("typeInRateQuote")||this.formData.get("cvNumber")||this.formData.get("itNumber"))this.$el.find("input[name=pcNumber]").val("").keyup(),this.$el.find("input[name=cvNumber]").val("").keyup(),this.$el.find("input[name=itNumber]").val("").keyup(),this.$el.find("input[name=typeInRateQuote]").val("").keyup(),this.formData.set({cvNumber:"",pcNumber:"",typeInRateQuote:"",itNumber:""},{silent:!0})},resetCorpFormFields:function(){this.$el.find("#official-travel").prop("checked",
!1);this.metaData.get("allowContractRate")&&(h.config.isApp||(this.$el.find('input[name="corp-rate"]').prop({disabled:!0,checked:!1}),this.$el.find("#cdp-options").addClass("disabled-label")),this.formData.get("corp-rate")&&this.formData.unset("corp-rate",{silent:!0}));this.formData.set({corporateRate:"",officialTravel:""},{silent:!0})},eventHandler:function(a){var a=c(a.target),b=c.trim(a.val());a.is(":checkbox")&&(b=a.is(":checked")?b:"");this.formData.set(a.attr("name"),b,{silent:!0})},resetCdpCorpFields:function(a){var a=
c(a.target),b=a.val();this.clearBusinessLeisureFormData();"memberSelectedCdp"===a.attr("name")&&""==b?this.$el.find("#cdp-options-business").hide():(this.$el.find("#member-other-cdp").val(""),this.$el.find("#cdp-options-business").show())},showDiscountDetails:function(){var a=this,b=a.content.homePage.homePageContent.discountOverlayTitle;require(["reservation/itinerary/core/view/content-overlay-view"],function(c){null==d&&(d=i.getLightbox());d.overlay({title:b,width:584,center:!0},(new c({model:new g.Model({url:"discount-tpl"}),
content:a.content})).render().el)});return!1},toggleDiscounts:function(){this.resetToDefaultProfileCdp();this.setDiscountDisplay()},resetToDefaultProfileCdp:function(){this.metaData.get("loggedIn")&&this.metaData.get("cdpList")&&(this.$el.find("#member-selected-cdp").val(this.metaData.get("cdpList")[0].name),this.$el.find("#profile-cdp-indicator").prop("checked",!0),this.metaData.set("discountExists",!0),this.formData.set({memberSelectedCdp:this.metaData.get("cdpList")[0].name,cdpRadioButton:"profileCdpIndicator"},
{silent:!0}))},setDiscountDisplay:function(){this.$el.find("#discounts").prop("checked")?(this.$el.find("#affiliations").show(),this.metaData.set({discountExists:1},{silent:!0}),this.metaData.get("allowContractRate")&&"B"==this.metaData.get("travelType")&&this.setCorporateRateData()):(this.$el.find("#affiliations").hide(),this.metaData.set({discountExists:0},{silent:!0}),this.clearDiscountFields());this.viewHelper.setFooterPadding()},handleOtherCdp:function(a){this.saveCDPInSession(c(a.target).val(),
this.$el.find("#other-cdp-indicator").val())},handleCdp:function(a){this.saveCDPInSession(c(a.target).val())},handleMemberCdp:function(a){var b=this.$el.find("#profile-cdp-indicator");b.click();this.saveCDPInSession(c(a.target).val(),b.val());this.resetCdpCorpFields(a)},saveCDPInSession:function(a,b){c.ajax({url:h.config.rootContext+"/handlers/SaveSessionInformationHandler",data:{cdpField:a,cdpRadioButton:b,checkDiscount:"on"}})},highlightDiscount:function(a){var b=c(a.target),e=b.closest(".discount-row");
"member-other-cdp"!==c(a.currentTarget).attr("id")&&(0===c.trim(b.val()).length?e.removeClass("highlight"):e.addClass("highlight"))},showCDPOptions:function(){if(this.metaData.get("isIncludeCDPOptions")){var a=this.$el.find("#cdp-options-business"),b=this.$el.find("#cdp-textfield"),e=this.$el.find("#corp-cust");0<c.trim(b.val()).length?this.metaData.get("isIncludeCorpCustomer")?e.is(":checked")&&(a.show(),this.setBusinessFormData(),this.metaData.set({isShowCDPOptions:1},{silent:!0})):(a.show(),this.metaData.set({isShowCDPOptions:1},
{silent:!0})):(a.hide(),this.clearBusinessLeisureFormData(),this.metaData.set({isShowCDPOptions:0},{silent:!0}))}},toggleCorpDependentFields:function(a){var a=c(a.target),b=this.$el.find("#pc"),e=this.$el.find("#rq-cv-it"),f=this.$el.find("#cdp-textfield"),d=this.$el.find("#cdp-options-business");a.is(":checked")?(e.hide(),this.metaData.set({isShowRQCVITSection:0},{silent:!0}),this.metaData.get("isShowPCField")||(b.hide(),this.metaData.set({isShowPCSection:0},{silent:!0})),0<c.trim(f.val()).length&&
this.metaData.get("isIncludeCDPOptions")&&(this.setBusinessFormData(),d.show(),this.metaData.set({isShowCDPOptions:1},{silent:!0}))):(e.show(),b.show(),this.metaData.set({isShowRQCVITSection:1},{silent:!0}),this.metaData.set({isShowPCSection:1},{silent:!0}),this.metaData.get("isIncludeCorpCustomer")&&(this.resetCorpFormFields(),d.hide(),this.metaData.set({isShowCDPOptions:0},{silent:!0})))},showCdpRqWarning:function(){var a=this.$el.find("#corp-rate"),b=this.$el.find("#type-in-rq"),c=this.$el.find("#corp-cust");
a.is(":checked")&&""!==b.val()&&(c&&!c.is(":checked"))&&i.getNotifier().alert(this.content.homePage.jsErrorContent.displayCDPrqAlertError)},displayMobileDiscounts:function(){var a=this.formData.validate(this.formData,{stepValidation:!0});a?this.formData.trigger("error",this.formData,a):(k.clearErrorMessage(),this.$el.find("#discounts-section").toggle(),this.$el.find("#expand_collapse_discounts").hasClass("icons-expand_icon")?this.$el.find("#expand_collapse_discounts").removeClass("icons-expand_icon").addClass("icons-collapse_icon"):
this.$el.find("#expand_collapse_discounts").removeClass("icons-collapse_icon").addClass("icons-expand_icon"),this.$el.find("#affiliations").show())},setProfileCdpIndicator:function(){""==c("#member-selected-cdp").val()?(this.$el.find("#cdp-options-business").hide(),this.clearBusinessLeisureFormData()):this.$el.find("#cdp-options-business").show()},setOtherCdpIndicator:function(){var a=c("#member-other-cdp");this.$el.find("#other-cdp-indicator").prop("checked",!0).change();0===c.trim(a.val()).length?
this.$el.find("#cdp-options-business").hide():this.$el.find("#cdp-options-business").show()},render:function(){this.$el.append(j.template(this.template,{metaData:this.metaData.attributes,formData:this.formData.attributes,content:this.content}));this.setDiscountDisplay();return this},handleCdpLinks:function(){},doCleanup:function(){this.viewHelper.doCleanup&&this.viewHelper.doCleanup();this.template=this.content=this.metaData=this.formData=this.viewHelper=d=null}})});
define("reservation/itinerary/core/view/itinerary-cdp-view",["jquery","underscore","backbone","reservation/itinerary/core/view/helper/view-helper"],function(b,c,d,a){return d.View.extend({initialize:function(a){this.referrer=this.options.referrer;this.content=this.options.content;this.model=this.options.model;this.metaData=this.options.metaData;this.formData=this.options.formData;this.content=a.content;this.lBoxRef=this.options.lBoxRef},events:{"click #businessBtn":"businessHandler","click #leisureBtn":"leisureHandler",
"click #contract-rate-yes-btn":"contractRateYesHandler","click #contract-rate-no-btn":"contractRateNoHandler"},render:function(){this.$el.html(c.template(b("#cdp-business-leisure-tpl").html(),{content:this.content}));return this},businessHandler:function(){this.referrer.$el.find("#business-cdp-indicator").prop("checked",!0).change();this.referrer.$el.find("#official-travel").prop("checked",!0).change();this.metaData.set({travelType:"B"},{silent:!0});a.trackCdpOptions("business-overlay-button");this.metaData.get("allowContractRate")?
(this.referrer.$el.find("#corp-rate-yes").prop("disabled",!1),this.referrer.$el.find("#corp-rate-no").prop("disabled",!1),this.referrer.$el.find("#cdp-options").removeClass("disabled-label"),this.formData.set({corporateRate:"",officialTravel:"on",checkDiscount:"on"},{silent:!0}),1>this.$el.find("#cdp-overlay").length&&this.$el.find(".first .wrapper").append(c.template(b("#cdp-contract-rate-tpl").html(),{content:this.content}))):(this.referrer.$el.find("#corp-rate").prop("checked",!0).change(),this.formData.set({corporateRate:"on",
officialTravel:"on",checkDiscount:"on"},{silent:!0}),this.submitRes())},leisureHandler:function(){this.referrer.$el.find("#leisure-cdp-indicator").prop("checked",!0);this.referrer.$el.find("#corp-rate").prop("checked",!1).change();this.referrer.$el.find("#official-travel").prop("checked",!1).change();this.formData.set({corporateRate:"",officialTravel:""},{silent:!0});this.metaData.set({travelType:"L"},{silent:!0});a.trackCdpOptions("leisure-overlay-button");this.submitRes()},contractRateYesHandler:function(){this.referrer.$el.find("#corp-rate-yes").prop("checked",
!0).change();this.formData.set({corporateRate:"on","corp-rate":"yes"},{silent:!0});a.trackCdpOptions("corp-rate-yes-overlay-button");this.submitRes()},contractRateNoHandler:function(){this.referrer.$el.find("#corp-rate-no").prop("checked",!0).change();this.formData.set({corporateRate:"","corp-rate":"no"},{silent:!0});a.trackCdpOptions("corp-rate-no-overlay-button");this.submitRes()},submitRes:function(){this.closeOverlay();this.metaData.get("bookAsMember")?this.referrer.memberSubmit():!this.metaData.get("loggedIn")&&
this.formData.get("memberSelectedCdp")&&""!==this.formData.get("memberSelectedCdp")?this.referrer.bookAsMemberSubmitRes():this.referrer.bookAsGuestSubmitRes()},closeOverlay:function(){this.lBoxRef.inUse&&this.lBoxRef.closeOverlay()},doCleanup:function(){this.template=this.content=this.referrer=this.model=this.lBoxRef=null}})});
define("reservation/itinerary/core/view/itinerary-geo-preferences-overlay-view","jquery underscore backbone utils/utils-proxy config/app-config utils/sessionhelper reservation/config reservation/process-info/core/model/process-model reservation/common/retry/core/view/retry-view reservation/process-config/core/reservation-constants".split(" "),function(a,b,c){return c.View.extend({initialize:function(){this.content=this.options.content;this.template=this.options.template;this.referrer=this.options.referrer;
this.lBoxRef=this.options.lBoxRef;this.viewHelper=this.options.viewHelper},events:{"click #geo-preferences-btn":"submitResWithItnInfo"},submitResWithItnInfo:function(){this.viewHelper.geoPreferencesSubmitWithItnInfo(this.referrer,this.lBoxRef)},render:function(){this.$el.append(b.template(a(this.template).html(),{content:this.content}));return this}})});
define("reservation/itinerary/core/view/member-info-view","jquery underscore backbone reservation/common/retry/core/view/retry-view reservation/itinerary/core/model/member-info-model utils/utils-proxy config/app-config utils/sessionhelper reservation/config reservation/process-config/core/reservation-constants reservation/utils/core/reservation-utils utils/utils reservation/process-info/core/model/process-model".split(" "),function(f,l,h,n,p,i,g,j,q,e,k,m,o){return h.View.extend({initialize:function(){this.referrer=
this.options.referrer;this.content=this.options.content;this.template=this.options.template;this.formData=this.model.get("formData");this.attemptCount=0},events:{"click #member-info-submit":"submitMemberNumber","click #member-info-continue":"submitMemberNumber","keyup #member-number":"enableButton"},render:function(){this.$el.append(l.template(this.template,{content:this.content}));return this},enableButton:function(){""!=f.trim(this.$el.find("#member-number").val())?this.$el.find("#member-info-submit").removeAttr("disabled",
"disabled"):this.$el.find("#member-info-submit").attr("disabled","disabled")},submitMemberNumber:function(){var a=this;a.$el.find(".invalidText").hide();if(3<=a.attemptCount)a.referrer.itinerary.memberNumber="",a.formData.set("no1ClubNumber","");else{var c=f.trim(this.$el.find("#member-number").val());a.referrer.itinerary.memberNumber=c;a.formData.set("no1ClubNumber",c)}c=new h.Model(a.referrer);m.clearErrorMessage(a.$el.find("#error-list"));n.saveWithRetry(c,{},{url:g.config.rootContext+"/rest/hertz/v2/reservations/makeReservation",
type:"POST",beforeSend:function(){g.config.isApp?htz.utils.Spinner.spin():i.getSpinner().spin()},success:function(c){g.config.isApp?htz.utils.Spinner.stop():i.getSpinner().stop();j.setItem(e.ITINERARY_DATA,JSON.stringify(a.model));j.setItem(e.SELECTED_VEHICLE_INFO,JSON.stringify(a.referrer.vehicle));k.goToPageFromResData(c)},error:function(c,b){var d,f={messages:[a.content.reservationErrors.genericErrorContent.technicalDifficulties]};g.config.isApp?htz.utils.Spinner.stop():i.getSpinner().stop();try{b=
JSON.parse(b.responseText)}catch(j){}if(b&&b.data&&b.data.meta&&b.data.meta.target!==o.getStep())k.clearSessionStorage([e.VEHICLES_DATA,e.EXTRAS_DATA,e.ITINERARY_INFO_DATA,e.RATE_DETAILS_DATA]),d=new h.Model(b),k.goToPageFromResData(d);else{d=b.message;if(!d||l.isEmpty(d))d=f;a.attemptCount++;3<=a.attemptCount?(a.$el.find(".invalidMember").hide(),a.$el.find(".exceed").show()):m.displayAllErrors(d,a.$el.find("#error-list"))}}})},doCleanup:function(){this.template=this.content=this.referrer=null}})});
define("reservation/itinerary/core/view/location-closed-overlay-view","jquery underscore backbone utils/utils-proxy reservation/itinerary/core/view/helper/view-helper tools/calendar config/app-config utils/sessionhelper".split(" "),function(b,j,p,u,e,q,k,m){var n=function(a){var a=a.split(":").join(""),b=4>a.length?1:2,d=parseInt(a.substring(0,b),10),l=(d+11)%12+1,d=11<d?"PM":"AM",a=a.substring(b);""===a&&(a="00");return l+":"+a+" "+d},r=function(){var a="phone"===k.config.deviceGroup?b("#itn-date-time-overlay"):
null,f=m.getItem(htz.res.config.ReservationConstants.CALENDAR_MODE)&&"phone"!==k.config.deviceGroup?parseInt(m.getItem(htz.res.config.ReservationConstants.CALENDAR_MODE)):2;new q({mode:f,euro:this.formData.get("militaryClock"),start:this.$el.find("#pickup-date-overlay"),end:this.$el.find("#dropoff-date-overlay"),startText:this.$el.find("#pickup-date-box-overlay"),endText:this.$el.find("#dropoff-date-box-overlay"),target:a,content:this.content,calledWithinOverlay:!0,syncPickupAndDropoff:function(a,
f,c,i){window.cal=i;"#pickup-date-overlay"===f?(c&&1===c&&(b("#pickup-date-overlay").val(a).change(),b("#pickup-date-box-overlay .value").text(a),b("#dropoff-date").attr("value",b("#dropoff-date-overlay").val()).change(),b("#dropoff-date-box .value").html(b("#dropoff-date-overlay").val())),b("#pickup-date").attr("value",a).change(),b("#pickup-date-box .value").html(a)):"#dropoff-date-overlay"===f&&(b("#dropoff-date").attr("value",a).change(),b("#dropoff-date-box .value").html(a));i.calendar.remove()}});
a=f=null},o=function(a,b,d,l){var c=[],i,g,e;j.each(a,function(a){"30"==(a.openTime+"").slice(-2)&&(a.openTime+=20);2400>a.closeTime&&(a.closeTime+=50);for(i=a.openTime;i<a.closeTime;i+=50){var d;d=i;"80"===(i+"").slice(-2)&&(d+=20);e=(d+"").slice(-2);"50"===e?e="30":"0"===e&&(e="00");g=d+"";g=g.substring(0,g.length-2);1===g.length?g="0"+g:""===g&&(g="00");d=1!==l?n(g+":"+e):g+":"+e;c.push([g+":"+e,d])}});return[["",d.homePage.locationClosedProcess.selectTime]].concat(c)},h=function(a,b,d,e){var c=
d.homePage.monthDayContent,d=[c.shortFormJan,c.shortFormFeb,c.shortFormMar,c.shortFormApr,c.shortFormMay,c.shortFormJun,c.shortFormJul,c.shortFormAug,c.shortFormSep,c.shortFormOct,c.shortFormNov,c.shortFormDec],c=[c.shortFormSun,c.shortFormMon,c.shortFormTue,c.shortFormWed,c.shortFormThu,c.shortFormFri,c.shortFormSat],a=new Date(a),b=1===e?b:n(b);return c[a.getDay()]+" "+d[a.getMonth()]+" "+a.getDate()+", "+a.getFullYear()+" - "+b},s=function(a){var b=[];a.pickupLocation.isOpen||b.push(function(a){return a.homePage.locationClosedProcess.locationClosedAtPickup});
a.dropoffLocation.isOpen||b.push(function(a){return a.homePage.locationClosedProcess.locationClosedAtReturn});return b},t=function(a){var f="pickupDay",d="pickupTime";this.locations.pickupLocation.isOpen&&(f="dropoffDay",d="dropoffTime");this.availableLocations=function(a,d,b){var g=new Date(d),f=parseInt(b.split(":").join(""),10),h=[],k;j.every(a,function(a){"undefined"!==typeof a.gddHours&&0<a.gddHours.elements.length?"undefined"!==typeof a.privateFlightOnly&&!a.privateFlightOnly&&(k=e.availableHoursOfDay(a.gddHours.elements,
g),e.locationOpenAtRequestedTime(k,f,a.kind)&&h.push(a)):h.push(a);return 12>h.length}.bind(this));return h}(a.data.model,this.formData.get(f),this.formData.get(d));b(".lb-header section").html(this.options.content.homePage.locationClosedProcess.chooseOpenLocation);a=b("#change-location-overlay-tpl").html();this.$el.find(".location-content").html(j.template(a,{content:this.content,formData:this.formData.attributes,pickupLocation:this.locations.pickupLocation.details,dropoffTime:h(this.formData.attributes.dropoffDay,
this.formData.attributes.dropoffTime,this.content,this.formData.attributes.militaryClock),pickupTime:h(this.formData.attributes.pickupDay,this.formData.attributes.pickupTime,this.content,this.formData.attributes.militaryClock),dropoffLocation:this.locations.dropoffLocation.details,closedLocations:function(a,d){var b=[];a.pickupLocation.isOpen||b.push(d.homePage.locationClosedProcess.changePickupLocation);a.dropoffLocation.isOpen||b.push(d.homePage.locationClosedProcess.changeReturnLocation);return b.join(" <br/> ")}(this.locations,
this.content),locations:this.locations,results:this.availableLocations,minLocations:3}))};return p.View.extend({initialize:function(){this.content=this.options.content;this.metaData=this.options.metaData;this.formData=this.options.formData;this.locations=this.options.locations;this.template=b("#location-closed-overlay-tpl").html();this.submitRes=this.options.callback},events:{"click #change-my-time-submit":"changeMyTime","click #choose-another-location-submit":"chooseAnotherLocation","click .chooseAnotherLocation":"locationSelected",
"click #change-my-time":"changeMyTime","click #load-more":"loadMoreLocations"},chooseAnotherLocation:function(a){e.trackLocationClosedOverlay("ChooseAnOpenLocationSelected");a.preventDefault();a=this.locations.pickupLocation.details.extendedOAGCode;this.locations.dropoffLocation.isOpen||(a=this.locations.dropoffLocation.details.extendedOAGCode);"undefined"!==typeof a&&e.getLocationsNearBy(a,t.bind(this),{fields:"gddHours privateFlightOnly locationName hours extendedOAGCode city state country_name".split(" ")})},
locationSelected:function(a){a.preventDefault();a=b(a.target).attr("data-index");a=this.availableLocations[a];this.locations.dropoffLocation.details.extendedOAGCode===this.locations.pickupLocation.details.extendedOAGCode?(this.formData.set("pickupHiddenEOAG",a.extendedOAGCode,{silent:!0}),b("#pickup-location").attr("value",a.locationName),this.formData.set("pickupLocation",a.locationName,{silent:!0})):this.locations.dropoffLocation.isOpen?(this.formData.set("pickupHiddenEOAG",a.extendedOAGCode,{silent:!0}),
b("#pickup-location").attr("value",a.locationName),this.formData.set("pickupLocation",a.locationName,{silent:!0})):(this.formData.set("dropoffHiddenEOAG",a.extendedOAGCode,{silent:!0}),b("#dropoff-location").attr("value",a.locationName),this.formData.set("dropoffLocation",a.locationName,{silent:!0}));e.trackLocationClosedOverlay("NewLocationSelected");this.submitRes(this.formData)},loadMoreLocations:function(a){a.preventDefault();this.$el.find(".location-result").show();b(a.target).hide()},changeMyTime:function(a){"undefined"!==
typeof a&&a.preventDefault();e.trackLocationClosedOverlay("ChangeMyTimeSelected");var f=function(a,b){e.pickupAndDropoffTimesAreValid(a.attributes,b.attributes,function(a){this.locations=a;this.changeMyTime()}.bind(this))},a=b("#change-my-time-overlay-tpl").html();b(".lb-header section").html(this.content.homePage.locationClosedProcess.changeDateTime);this.$el.find(".location-content").html(j.template(a,{content:this.content,formData:this.formData.attributes,locations:this.locations,pickupLocation:this.options.locations.pickupLocation.details,
pickupHours:o(this.locations.pickupLocation.hours,"pickup",this.content,this.formData.attributes.militaryClock),dropoffHours:o(this.locations.dropoffLocation.hours,"dropoff",this.content,this.formData.attributes.militaryClock),dropoffTime:h(this.formData.attributes.dropoffDayStandard,this.formData.attributes.dropoffTime,this.content,this.formData.attributes.militaryClock),pickupTime:h(this.formData.attributes.pickupDayStandard,this.formData.attributes.pickupTime,this.content,this.formData.attributes.militaryClock),
dropoffLocation:this.options.locations.dropoffLocation.details}));r.bind(this)();e.pickupAndDropoffTimesAreValid(this.formData.attributes,this.metaData.attributes,function(a){var b=this.$el.find("#change-my-time-submit");e.locationsOKToSubmit(a)?b.addClass("primary").removeClass("disabled"):b.addClass("disabled").removeClass("primary")}.bind(this));this.$el.find("#pickup_time_overlay").change(function(a){a=b(a.target).val();""!==a&&(b('#pickup-time option[value="'+a+'"]').prop("selected",!0),this.formData.set("pickupTime",
a,{silent:!0}),f.bind(this)(this.formData,this.metaData))}.bind(this));this.$el.find("#dropoff_time_overlay").change(function(a){a=b(a.target).val();""!==a&&(b('#dropoff-time option[value="'+a+'"]').prop("selected",!0),this.formData.set("dropoffTime",a,{silent:!0}),f.bind(this)(this.formData,this.metaData))}.bind(this));b("#pickup-date-overlay").change(function(a){a=b(a.target).val();""!==a&&(this.formData.set("pickupDay",a,{silent:!0}),this.formData.set("pickupDayStandard",a,{silent:!0}),f.bind(this)(this.formData,
this.metaData))}.bind(this));b("#dropoff-date-overlay").change(function(a){a=b(a.target).val();""!==a&&(this.formData.set("dropoffDay",a,{silent:!0}),this.formData.set("dropoffDayStandard",a,{silent:!0}),f.bind(this)(this.formData,this.metaData))}.bind(this));this.$el.find(".location-selection-details .show-pickup-times").click(function(){this.$el.find("#date-time-selection-pickup").show();this.$el.find("#itn-date-time-overlay .date-time").show();this.$el.find(".location-selection-details .show-pickup-times").hide()}.bind(this));
this.$el.find(".location-selection-details .show-dropoff-times").click(function(){this.$el.find("#date-time-selection-dropoff").show();this.$el.find(".location-selection-details .show-dropoff-times").hide()}.bind(this));this.$el.find("#date-time-selection-dropoff .value, #date-time-selection-dropoff .date-cal").click(function(){this.$el.find("#date-time-selection-pickup").show();this.$el.find("#itn-date-time-overlay .date-time").hide();this.$el.find(".calendar").show()}.bind(this));a=b("#pickup-time select").val();
this.$el.find("#pickup_time_overlay").val(a);a=b("#dropoff-time select").val();this.$el.find("#dropoff_time_overlay").val(a);this.$el.find("#change-my-time-submit").click(function(a){a.preventDefault();e.pickupAndDropoffTimesAreValid(this.formData.attributes,this.metaData.attributes,function(a){e.locationsOKToSubmit(a)&&this.submitRes(this.formData)}.bind(this))}.bind(this));this.locations.pickupLocation.isOpen&&this.$el.find("#date-time-selection-pickup").hide();this.locations.dropoffLocation.isOpen&&
this.$el.find("#date-time-selection-dropoff").hide()},render:function(){this.$el.append(j.template(this.template,{content:this.content,formData:this.formData.attributes,pickupLocation:this.locations.pickupLocation.details,dropoffTime:h(this.formData.attributes.dropoffDayStandard,this.formData.attributes.dropoffTime,this.content,this.formData.attributes.militaryClock),pickupTime:h(this.formData.attributes.pickupDayStandard,this.formData.attributes.pickupTime,this.content,this.formData.attributes.militaryClock),
dropoffLocation:this.locations.dropoffLocation.details,closedLocationMessages:s(this.locations)}));return this},doCleanup:function(){this.template=this.content=null}})});
define("reservation/itinerary/core/model/member-info-model",["jquery","underscore","backbone"],function(c,d,b){return b.Model.extend({defaults:{memberId:""},initialize:function(){this.constructor.__super__.initialize.apply(this,arguments)},parseModel:function(a){a.itinerary&&this.set("itinerary",a.itinerary);a.vehicle&&this.set("vehicle",a.vehicle)},url:"/rentacar/rest/hertz/v2/reservations/makeReservation"})});
define("reservation/itinerary/core/model/member-preferences-model",["backbone"],function(b){return b.Model.extend({parse:function(a){a&&a.data&&("undefined"!==a.data.geoPreferencesSet&&this.set("geoPreferencesSet",a.data.geoPreferencesSet),"undefined"!==a.data.goldAnytimeEligible&&this.set("goldAnytimeEligible",a.data.goldAnytimeEligible))},url:"/rentacar/rest/hertz/v2/member/preferences"})});
define("reservation/process-info/core/model/process-model",["jquery","reservation/process-config/core/reservation-constants"],function(f,b){var e="",c="",d=isInProcess=!1,g="itinerary vehicles extras review-and-book non-bookable confirmation review cancel-confirmation search online-checkin-confirmation counter-bypass-confirmation reservation-list".split(" ");return{setStep:function(a){0<=f.inArray(a,g)&&(e=a)},getStep:function(){return e},setModify:function(a){d=a},isModify:function(){return d},checkAndStartProcess:function(){var a=
isInProcess;isInProcess=!0;return a},hasProcessStarted:function(){return isInProcess},addToFlow:function(a){if(a){switch(a){case b.ITINERARY:a="I";break;case b.VEHICLES:a="V";break;case b.EXTRAS:a="E";break;case b.REVIEW_AND_BOOK:a="B";break;case b.CONFIRMATION:a="C";break;case b.REVIEW:a="R";break;case b.CANCEL_CONFIRMATION:a="D"}a&&(d&&(a="M"+a),c+=a)}},getFlow:function(){return c}}});
define("reservation/itinerary/core/view/helper/view-helper","jquery underscore backbone config/app-config utils/utils-proxy utils/sessionhelper helpers/resource-loader reservation/process-config/core/reservation-constants reservation/process-info/core/model/process-model reservation/common/retry/core/view/retry-view reservation/config reservation/itinerary/core/model/member-preferences-model".split(" "),function(d,h,x,f,k,j,t,i,q,u,v,w){function o(){null===p&&(p=k.getLightbox());return p}var p=null,
r,s={};r={retrieve:function(a){var b=a.countryCode;a.memberNumber&&(b+="_"+a.memberNumber);return s[b]||null},store:function(a){var b=a.get("destinationCountryCode"),c=a.get("memberNumber");c&&(b+="_"+c);s[b]=a}};return{getDestinationData:function(a,b){var c=a.attributes||a,e="on"===c.returnAtDifferentLocationCheckbox&&c.dropoffHiddenEOAG&&c.pickupHiddenEOAG&&c.dropoffHiddenEOAG!==c.pickupHiddenEOAG;if(!c||!c.pickupHiddenEOAG)b.reject();else{var g=function(a,b){this.getRentalLocationDetails(a,function(a){b.resolve(a.data)},
function(){b.resolve()})}.bind(this),n=d.Deferred();e?(e=d.Deferred(),d.when(n,e).done(function(a,c){!a||!c?b.reject():b.resolve({isOneWay:!0,pickup:a,dropoff:c})}),g(c.dropoffHiddenEOAG,e)):n.done(function(a){a?b.resolve({isOneWay:!1,pickup:a,dropoff:null}):b.reject()});g(c.pickupHiddenEOAG,n)}},getMemberPreferences:function(a){if(a&&a.destinationCountryCode){var b=r.retrieve(a);if(b)return b;var c=new w;k.getSpinner().spin();c.save(a,{async:!1,error:function(a,b){if(b&&b.responseText){var n;try{n=
JSON.parse(b.responseText)}catch(d){}n&&n.resultInfo&&400==n.resultInfo.resultCode?c.set({goldAnytimeEligible:!1},{silent:!0}):c=null}else c=null}});return c}return null},storeMemberPrefs:function(a){r.store(a)},isEligibleMemberLevel:function(a){return!(!a.attributes.loggedIn||!a.attributes.enableTA&&a.attributes.applicant)},checkLocationsAndSubmit:function(a,b,c,e){var g=this;this.pickupAndDropoffTimesAreValid(a.attributes,b.attributes,function(a){g.locationsOKToSubmit(a)?c&&"function"===typeof c&&
c():e&&"function"===typeof e&&e()})},parseErrorObject:function(a,b){var c=null;if(a){var e=JSON.parse(a);b&&e&&d.isArray(e.message.errorData)?c=e.message.errorData:!b&&(e&&d.isArray(e.errorData))&&(c=e.errorData)}return c},locationPopupMessage:function(a,b,c,e){htz.popup={oag:c,locType:b};t.load({content:htz.config.apiDomain+"/rest/content/subSystemId/"+htz.config.subSystemId+"/dialect/"+htz.config.dialect+"/deviceGroup/all/section/integrated/subSection/location/folder/popup/file/popupPage",callback:function(b){require(["reservation/special-instructions/core/presenter/special-instructions-presenter"],
function(c){c.showSpecialInsPopup(a,b.content,e)})}})},closeLightBox:function(){var a=o();a&&a.closeOverlay()},storeLocationOag:function(a,b){var c=j.getItem("oagCodes"),c="undefined"!==typeof c?JSON.parse(c):[];"undefined"!==typeof a&&(-1===h.indexOf(c,a)&&c.push(a),5<c.length&&j.removeItem(c.shift()),j.setItem("oagCodes",JSON.stringify(c)),j.setItem(a,JSON.stringify(b)))},getRentalLocationDetails:function(a,b,c){var e=this,g=j.getItem(a);"undefined"!==typeof g&&"undefined"!==typeof b?b(JSON.parse(g)):
d.ajax({async:!0,dataType:"jsonp",cache:!1,url:f.config.apiDomain+"/rest/location/oag/"+a,timeout:5E3,success:function(c){c.data&&e.storeLocationOag(a,c);b&&b(c)},error:function(){c&&c({data:{}})}})},getLocationsNearBy:function(a,b,c){c=h.extend({getCount:125,fields:[]},c||{});c.fields=c.fields.join(",");k.getSpinner().spin();d.ajax({async:!0,dataType:"jsonp",cache:!1,data:c,url:f.config.apiDomain+"/rest/location/nearBy/oag/"+a,error:function(){b({data:{model:[]}})},success:function(a){b(a)},complete:function(){k.getSpinner().stop()}})},
availableHoursOfDay:function(a,b){var c="SUNDAY MONDAY TUESDAY WEDNESDAY THURSDAY FRIDAY SATURDAY".split(" "),e=[].concat(a),g=function(a){var b=a.substr(5,2);try{b=parseInt(b),b-=1,0>b&&(b=0)}catch(c){}return new Date(a.substr(0,4),b,a.substr(8,2),a.substr(11,2),a.substr(14,2),a.substr(17,2))};h.each(e,function(a){a.effectiveDate=g(a.effectiveDate);a.expiryDate=g(a.expiryDate)});return e=h.filter(e,function(a){return a.effectiveDate<=b&&b<=a.expiryDate&&c[b.getDay()]===a.dayOfWeek.toUpperCase()})},
locationOpenAtRequestedTime:function(a,b,c,e){return e&&("pickup"===c&&!0===e.afterHoursPickup||"dropoff"===c&&!0===e.afterHoursDrop)?!0:void 0!==h.find(a,function(a){return b>=a.openTime&&b<=a.closeTime})},rentalLocationIsOpen:function(a,b,c,e,g,d){var f=new Date(b),l=!0,j=parseInt(c.split(":").join(""),10),m={},i=[];k.getSpinner().spin();b=function(a){"undefined"===typeof a||a.message||(m=a.data,g&&m.optGoldAnytime?l=!0:m&&"undefined"!==typeof m.gddHours&&0<m.gddHours.elements.length?(i=this.availableHoursOfDay(m.gddHours.elements,
f),l=this.locationOpenAtRequestedTime(i,j,e,m)):l=!0);k.getSpinner().stop();d({isOpen:l,details:m,hours:i,kind:e})};this.getRentalLocationDetails(a,b.bind(this),b.bind(this))},pickupAndDropoffTimesAreValid:function(a,b,c){var e=function(b){return 1===a.militaryClock?(b=b.split("/"),b[1]+"/"+b[0]+"/"+b[2]):b},g={isOpen:!0,kind:"pickup",details:{},inProgress:!0},d={isOpen:!0,kind:"dropoff",details:{},inProgress:!0},f,l,i=!1,m=!1,j=!1,h=!1,k=b?!!b.bookAsMember:!1;"undefined"!==typeof b&&"undefined"!==
typeof b.deliveryLocation&&(j=b.deliveryLocation,"on"!==a.returnAtDifferentLocationCheckbox&&(h=b.deliveryLocation));"undefined"!==typeof b&&"undefined"!==typeof b.collectionLocation&&(h=b.collectionLocation);a&&"undefined"!==typeof a.inpPickupOptGoldAnytime&&(i=a.inpPickupOptGoldAnytime);a&&"undefined"!==typeof a.inpDropoffOptGoldAnytime&&(m=a.inpDropoffOptGoldAnytime);a&&(a.dropoffHiddenEOAG&&""!==a.dropoffHiddenEOAG)&&(f=a.dropoffHiddenEOAG);a&&(a.pickupHiddenEOAG&&""!==a.pickupHiddenEOAG)&&(l=
a.pickupHiddenEOAG);l&&(!f&&"on"!==a.returnAtDifferentLocationCheckbox)&&(f=l);i&&k?g.inProgress=!1:l&&!j?this.rentalLocationIsOpen(l,e(a.pickupDay),a.pickupTime,g.kind,k,function(a){g=a;g.inProgress=!1}.bind(this)):g.inProgress=!1;m&&k?d.inProgress=!1:f&&!h?this.rentalLocationIsOpen(f,e(a.dropoffDay),a.dropoffTime,d.kind,k,function(a){d=a;d.inProgress=!1}.bind(this)):d.inProgress=!1;if(""===a.pickupDay||""===a.dropoffDay||"on"===a.returnAtDifferentLocationCheckbox&&(""===a.dropoffHiddenEOAG||""===
a.pickupHiddenEOAG))d.isOpen=!0,d.inProgress=!1,g.isOpen=!0,g.inProgress=!1;g.inProgress||d.inProgress?setTimeout(function(){c({dropoffLocation:d,pickupLocation:g})}.bind(this),2E3):c({dropoffLocation:d,pickupLocation:g})},locationsOKToSubmit:function(a){return a.dropoffLocation.isOpen&&a.pickupLocation.isOpen||a.dropoffLocation.details.extendedOAGCode!==a.pickupLocation.details.extendedOAGCode&&!a.dropoffLocation.isOpen&&!a.pickupLocation.isOpen?!0:!1},trackLocationClosedOverlay:function(a){"undefined"!==
typeof WebTracking&&WebTracking.trackPage("location-closed-overlay-"+a)},setGeoLocation:function(a,b,c){navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(e){d.ajax({url:"//www.mapquestapi.com/geocoding/v1/reverse",dataType:"jsonp",crossDomain:!0,data:{key:decodeURIComponent("Gmjtd%7Cluuan107n9%2C75%3Do5-lz8w0"),lat:e.coords.latitude,lng:e.coords.longitude},success:function(c){var c=c.results[0].locations[0],c=c.adminArea5+", "+c.adminArea3+", "+c.adminArea1,e=d(b[0]),f=d(b[1]);
"pickup-geo-loc"===a?(e.val(c),e.trigger("keyup")):(f.val(c),f.trigger("keyup"))},error:function(){k.getNotifier().alert(c.homePage.geoLocationContent.unknownError)}})},function(a){switch(a.code){case a.TIMEOUT:o().overlay({url:"timeout-overlay",title:c.homePage.geoLocationContent.timeOutTitle,width:300,center:!0},h.template(d("#timeout-tpl").html(),{content:c}));break;case a.POSITION_UNAVAILABLE:o().overlay({url:"position-unavailable-overlay",title:c.homePage.geoLocationContent.positionUnavailableTitle,
width:300,center:!0},h.template(d("#position-unavailable-tpl").html(),{content:c}));break;case a.PERMISSION_DENIED:o().overlay({url:"permission-denied-overlay",title:c.homePage.geoLocationContent.permissionDeniedTitle,width:300,center:!0},h.template(d("#permission-denied-tpl").html(),{content:c}));break;case a.UNKNOWN_ERROR:o().overlay({url:"unknown-error-overlay",title:c.homePage.geoLocationContent.unknownError,width:300,center:!0},h.template(d("#unknown-error-tpl").html(),{content:c}))}})},setFooterPadding:function(){if("phone"!==
f.config.deviceGroup){var a=d(".footer-desk");if(0===a.length||!a.is(":visible"))if(a=d(".footer-tab"),0===a.length||!a.is(":visible"))return;var b=d(".res-form").height()+10,c=d(".home").height();b>c?a.css("padding-top",b-c+"px"):a.css("padding-top","10px")}},fetchBanner:function(a,b){d.ajax({url:f.config.rootContext+"/handlers/LocationChangeAJAXHandler",type:"GET",data:{eoag:b,loadBanner:a},dataType:"json",cache:!1,success:function(b){a&&!0===b.DoubleClickBanner&&d("#hp-banner-container").load(f.config.rootContext+
"/templates/reservation/home/homeAds.jsp?bannerOnly=Y&_="+(new Date).getTime())}})},refreshBanner:function(a,b,c){c&&(3===b.length||6===b.length)?this.fetchBanner(a,b):0<b.length&&this.fetchBanner(a,b)},loadMisc:function(a,b,c){!a&&b&&(a="phone"!==f.config.deviceGroup?"":"?bannerOnly=Y",a=""===a?"?_="+(new Date).getTime():a+("&_="+(new Date).getTime()),d("#hp-banner-container").empty().load(f.config.rootContext+"/templates/reservation/home/homeAds.jsp"+a),this.setFooterPadding());c||d("#hp-ww-info").empty().load(f.config.rootContext+
"/templates/integrated/locations/wordwheelMoreInfo.jsp")},findCarTypeLabel:function(a,b){var c=b[0].name;h.each(b,function(b){a==b.value&&(c=b.name)});return c},validateCdp:function(a){var b=d.Deferred(),c=/^([0-9]*)$/;a?(a=d.trim(a),c.test(a)?d.ajax({cache:!1,url:f.config.apiDomain+"/rest/customer/cdp/"+f.config.dialect+"/"+a,dataType:"jsonp",success:function(a){"invalid"===a.data.result?(delete a.message.systemErrors,b.reject({responseText:JSON.stringify(a)})):b.resolve()}}):b.resolve()):b.resolve();
return b.promise()},specialOffersExtrasCheck:function(){var a=j.getItem(i.SPECIAL_OFFERS_DATA);if(a)try{var b=JSON.parse(a);b&&b.extNL&&d.ajax({url:f.config.rootContext+"/rest/hertz/v2/itinerary/vehicles/specialoffers",type:"POST",headers:{"cache-control":"no-cache"},data:JSON.stringify(b),dataType:"json",contentType:"application/json"})}catch(c){}},trackCdpOptions:function(a){"undefined"!==typeof WebTracking&&WebTracking.trackPage("cdp-options-"+a)},getUpdatedTime:function(){var a=new Date,b=parseInt(a.getHours()),
a=0<parseInt(a.getMinutes())?b+2:b+1;10>a?a="0"+a:24==a?a="00":24<a&&(a="0"+(a-24));return a+":00"},updateGeoLocationInfo:function(a){a.formData.set("fromProfileForGoldService","Y",{silent:!0});a.keepTrackOfGeoPrefLocation&&a.keepTrackOfGeoPrefLocation()},geoPreferencesSubmitWithItnInfo:function(a,b){var c,e=this,d=a.isResFlowEdit,h=a.isResWidget;e.updateGeoLocationInfo(a);q.isModify()?(c=j.getItem(i.CONFIRMATION_NUMBER),c=f.config.rootContext+"/rest/hertz/v2/itinerary/vehicles/"+c):c=f.config.rootContext+
"/rest/hertz/v2/itinerary/vehicles";u.saveWithRetry(a.formData,{},{url:c,type:"POST",beforeSend:function(){f.config.isApp?htz.utils.Spinner.spin():k.getSpinner().spin()},error:function(c,l){var h=q.isModify()?i.MODIFY_ITINERARY:i.ITINERARY;b.inUse&&b.closeOverlay();if(l&&l.responseText){try{var m=JSON.parse(l.responseText).message;a.formData.trigger("error",c,l);Utils.trackError(m);j.setItem(i.ITINERARY_ERROR_DATA,JSON.stringify(m));j.setItem(i.ERRORS,JSON.stringify(m))}catch(n){}e.handleGeoPrefNavigation(h,
d)}f.config.isApp?htz.utils.Spinner.stop():k.getSpinner().stop()},success:function(a,b){var c=q.isModify()?i.MODIFY_VEHICLES:i.VEHICLES;if(b&&b.resultInfo){j.setItem(i.VEHICLES_DATA,JSON.stringify(b.data.model));if(b.message)try{j.setItem(i.VEHICLES_ERROR_DATA,JSON.stringify(b.message))}catch(h){}j.setItem(i.ITINERARY_INFO_DATA,JSON.stringify(b.data.itinerary));b.data.rateDetails&&j.setItem(i.RATE_DETAILS_DATA,JSON.stringify(b.data.rateDetails));e.handleGeoPrefNavigation(c,d)}else window.location.reload();
f.config.isApp?htz.utils.Spinner.stop():k.getSpinner().stop()},complete:function(){(!d||!h)&&a.$el.find(".home").removeClass("step-discount");b.inUse&&b.closeOverlay()}})},handleGeoPrefNavigation:function(a,b){b?window.location.href=f.config.rootContext+"/reservation/#"+a:v.getRotar().rotate(a)},doCleanup:function(){p=null}}});
define("reservation/lookup/core/presenter/lookup-presenter","backbone config/app-config utils/domhelper config/utilconfig utils/utils-proxy reservation/lookup/core/model/lookup-form-model reservation/lookup/core/model/lookup-model reservation/lookup/core/view/lookup-view utils/utils reservation/process-info/core/model/process-model reservation/common/retry/core/view/retry-view".split(" "),function(k,s,h,l,j,m,n,o,p,d,q){var c,b,i=htz.res.config.ReservationConstants.RESERVATION_LIST;return{show:function(a){if(a&&
a.template&&a.content){var r=a.template,e=a.content;a.content=null;a.template=null;var f=a.referrer,g=a&&a.target;this.prepareData(a);var a=g,g=h.getPageId(i),d=!1;a||(h.isPageAdded(i)||h.addPage(i,"page"),a="#"+g,d=!0,"undefined"==typeof f&&(f=$(a)));c||(c=new o({target:a,model:b,template:r,content:e,referrer:f}));c.render();d&&($("#container").removeClass("animated-background"),l.getNavigator().navigate("#"+g))}},prepareData:function(a){var c={};a&&a.formData&&(c=a.formData,a.formData=null);if(!a)try{var e=
htz.homepage.json.data.model.metaData,a={loggedIn:e.loggedIn,enableTA:e.enableTA,applicant:e.applicant}}catch(f){a={}}b?(b.get("formData").set(c),b.get("metaData").set(a)):(b=new n,b.set("formData",new m(c)),b.set("metaData",new k.Model(a?a:{})));(a=this.fetchMemberResList(a,b))&&b.get("metaData").set(a,{silent:!0})},fetchMemberResList:function(a,c){if(a&&a.loggedIn&&!a.enableTA&&!a.applicant){var b={};j.getSpinner().spin();q.fetchWithRetry(c,{cache:!1,async:!1,success:function(a){a.data&&(b.reservationList=
a.data.reservationList);if(a.message||!a.data)b.reservationListErrors=a.message||"use_default",a.message?p.trackError(a.message,d.getStep()):WebTracking.trackErrors("unknown-error-fetching-reservation-list",{pageName:d.getStep()})},error:function(){b.reservationListErrors="use_default";WebTracking&&WebTracking.trackErrors("unknown-error-fetching-reservation-list",{pageName:d.getStep()})},complete:function(){j.getSpinner().stop()}});return b}return null},doCleanup:function(){c&&c.doCleanup&&c.doCleanup();
b&&b.doCleanup&&c.doCleanup();c=b=null}}});
define("reservation/lookup/core/model/lookup-form-model",["config/app-config","utils/restmodel"],function(a,b){return b.extend({defaults:{confirmationNumber:"",lastName:"",quickReservationConfirmationNumber:"-1",arrivingUpdate:""},initialize:function(){this.constructor.__super__.initialize.apply(this,arguments)},url:function(){return a.config.rootContext+"/rest/review/v2/rmc"}})});
define("reservation/lookup/core/model/lookup-model",["config/app-config","utils/restmodel"],function(b,c){return c.extend({initialize:function(){this.constructor.__super__.initialize.apply(this,arguments)},parseModel:function(a){a&&this.get("metaData").set(a)},url:function(){return b.config.rootContext+"/rest/hertz/v2/reservations/member/upcoming-reservations"}})}); 
define("reservation/lookup/core/view/lookup-view","jquery underscore json config/app-config utils/utils-proxy utils/utils utils/sessionhelper framework/view/abstract-view reservation/config reservation/reservation-info/core/model/reservation-info-model reservation/common/retry/core/view/retry-view".split(" "),function(d,f,k,l,g,h,i,m,n,o,p){return m.extend({events:{"keyup input":"eventHandler","change input":"eventHandler","click .res-search":"searchReservation","click .member-res-search":"searchMemberReservation"},
initialize:function(){this.preInitialize();this.formData=this.model.get("formData");this.metaData=this.model.get("metaData");this.content=this.options.content;this.template=this.options.template;this.target=this.options.target;this.referrer=this.options.referrer;this.bindEvents();this.postInitialize()},bindEvents:function(){this.formData.on("fieldError",this.displayError,this);this.metaData.on("change:reservationList",this.render,this);this.metaData.on("change:target",this.render,this)},displayError:function(a,
b){h.displayFieldErrors(b);window.scrollTo(0,0)},render:function(){this.preRender();var a,b=this.metaData.get("reservationList"),c=this.metaData.get("reservationListErrors"),j=!1;if(this.metaData.get("loggedIn")&&!this.metaData.get("enableTA")&&!this.metaData.get("applicant"))if(b&&(!c||f.isEmpty(c)))a=0===b.length?this.content.homePage.homePageContent.resListEmpty:this.content.homePage.homePageContent.viewModifyCancel;else if(j=!0,!c||"use_default"==c||f.isEmpty(c))c={messages:[this.content.reservationErrors.advisoryContent.unableToAccessResList]};
this.$el.empty().append(f.template(this.template,{metaData:this.metaData.attributes,formData:this.formData.attributes,content:this.content}));this.validateFields();this.target&&d(this.target).empty().append(this.el);j&&h.displayAllErrors(c);this.renderMessage(a);this.postRender();return this},renderMessage:function(a){var b=this.$el.find("#res-message");a&&d(b).empty().html(a).show()},eventHandler:function(a){var b=d(a.target),c=b.val();b.is(":checkbox")?c=b.is(":checked")?c:"":"keyup"==a.type&&this.validateFields();
this.formData.set(b.attr("name"),c,{silent:!0})},validateFields:function(){var a=this.$el.find("#conf-last-name").val(),b=this.$el.find("#conf-num").val();this.button=this.button||this.$el.find(".res-search");b&&(a||this.model.attributes.metaData.attributes.loggedIn)?this.button.prop("disabled",!1):this.button.prop("disabled",!0)},searchMemberReservation:function(a){a=d(a.target).attr("rel")||d(a.currentTarget).attr("rel");a=this.metaData.get("reservationList")[a];this.formData.set({confirmationNumber:a.confirmationNumber},
{silent:!0});this.searchReservation()},trackResLookup:function(){"undefined"!==typeof WebTracking&&WebTracking.trackPage("lookup-reservation")},searchReservation:function(){if(this.preSubmit()){var a=this;g.getSpinner().spin();var b=l.config.rootContext+"/rest/hertz/v2/reservations/reservation",c=a.formData.toJSON();p.saveWithRetry(a.formData,{},{url:b,success:function(b,e){o.setReservationId(e.data.confirmationSummaryInfo.confirmationNumber);i.setItem(htz.res.config.ReservationConstants.CONFIRMATION_NUMBER_INFO,
e.data.confirmationSummaryInfo.confirmationNumber);a.formData.trigger("sync",b,e);if(e&&e.resultInfo)a.formData.clear({silent:!0}),a.formData.set(c,{silent:!0}),i.setItem(htz.res.config.ReservationConstants.REVIEW_DATA,k.stringify(e)),n.getRotar().rotate("review");else try{WebTracking.setError("debug-search-success-error","search")}catch(d){}},error:function(b,c){a.formData.trigger("error",b,c,a.referrer.find("#error-list"))},complete:function(){g.getSpinner().stop()}});a.trackResLookup()}}})});
define("reservation/itinerary/core/presenter/itinerary-presenter",getDependencies("reservation/itinerary/core/presenter/itinerary-presenter"),function(j,e,h,l,x,G,p,v,y,z,A,E,w,b){function B(){try{e.setItem(b.RESERVATION_CONFIRMED,""),htz.res.pages.PageHelper.resetReservation()}catch(a){}}function C(){try{e.setItem(b.APP_CONFIG,h.stringify(p.config))}catch(a){}}function D(){try{htz.homepage.json.data.model.metaData.startRes&&(B(),C()),htz.homepage.json.data.model.metaData.startRes=!1}catch(a){}}function s(a,
r){var c=new v,f;w.getSpinner().spin();c.fetch({cache:!1,success:function(a,c){c&&c.data&&(e.setItem(b.ITINERARY_DATA,h.stringify(c.data)),f=c.data)},complete:function(){w.getSpinner().stop();a&&r&&j.publish(b.VALIDATE_ITINERARY,[f,a,r])}})}function t(a){if(a&&a.message)try{e.setItem(b.ITINERARY_ERROR_DATA,h.stringify(a.message))}catch(r){}}function u(a){a&&(a.isLoggedIn||a.appConfig||a.message)?e.setItem(b.RESERVATION_PRESERVED_DATA,h.stringify(a)):e.removeItem(b.RESERVATION_PRESERVED_DATA)}function F(){var a=
e.getItem(b.RESERVATION_PRESERVED_DATA);if(!a)return!0;try{a=h.parse(a);if(a.appConfig&&a.appConfig.isApp){var r=a.appConfig.orgDeviceGroup;a.appConfig=null;u(a);var c=window.location.href;window.location.hash&&(c=c.substring(0,c.indexOf("#")));c=0<c.indexOf("?")?c+"&":c+"?";window.location.href=c+("deviceGroup="+r+"&edge=Y");return!1}if(a.isLoggedIn){if(a.isLoggedIn=!1,u(a),window.plugins.remoteToLocal)try{return window.plugins.remoteToLocal.execInVC({vcIndex:hzm.constants.VC_HOME_MEMBER,js:"hzm.member.autoLogin();"}),
!1}catch(f){}}else a.message&&(t({message:a.message}),a.message=null,u(a));return!0}catch(d){return!0}}var i,d,n=b.ITINERARY;j.subscribe(b.VALIDATE_ITINERARY,function(a,e,c,f){F()&&(j.publish(b.RENDER_PREPARE_PRESENTER,f),A.setStep(n),a=l.getPageId(n),l.isPageAdded(n)?(i.clear({silent:!0}),i.parseModel(e),d.refresh()):(l.addPage(n,"page"),i=new v(e),d=new y({viewHelper:z,el:"#"+a,model:i,content:c,isSearch:f.isSearch}),d.render()),f.isSearch?d.showTab("rmc-tab"):d.showTab("gaq-tab"),j.publish(b.NAVIGATE_PREPARE_PRESENTER),
x.getNavigator().navigate("#"+a),window.HomeModel=d.model,window.HomePage=d.formView,j.publish(b.RENDER_DONE_PRESENTER,{step:n,page:b.LEGACY_ITINERARY,content:c}))});return{show:function(a,d){var c=a.content,f=!1;!d||!d.isSearch?(f=window.location,f=!f.hash&&0<f.href.indexOf("confirmationNumber=")?!0:!1):f=d.isSearch;var i;if(i=!f){var m;a:{if(!window.location.hash)try{var g=htz.homepage.json.data.model.metaData.targetStep;htz.homepage.json.data.model.metaData.targetStep=null;if(g){E.getRotar().rotate(g);
m=!1;break a}}catch(n){}m=!0}i=!m}if(!i){d||(d={});d.isSearch=f;a:{var l=d;m="Y"===e.getItem(b.RESERVATION_CONFIRMED);if(!m){g=e.getItem(b.ITINERARY_DATA);try{g&&(g=h.parse(g))}catch(u){g=null}if(g&&g.metaData)try{f=0,f=p.config.isApp?h.parse(e.getItem(b.APP_MEMBER_INFO)).isLoggedIn:htz.homepage.json.data.model.metaData.loggedIn,g.metaData.loggedIn!==f&&(m=!0)}catch(v){}}if(!e.getItem(b.RESERVATION_PRESERVED_DATA))try{var o=h.parse(e.getItem(b.APP_CONFIG));if(o&&o.isApp){var k=htz.homepage.json.message;
if(k&&(k=h.stringify(k))&&0<k.indexOf("[NZX305]")){k={};k.appConfig=o;k.message=htz.homepage.json.message;htz.homepage.json.message=null;try{var q=e.getItem(b.ITINERARY_DATA);q&&(q=h.parse(q),k.isLoggedIn=q&&q.metaData&&q.metaData.loggedIn)}catch(w){}e.setItem(b.RESERVATION_PRESERVED_DATA,h.stringify(k))}}}catch(x){}if(m)D(),j.ajax({cache:!1,type:"POST",url:p.config.rootContext+"/rest/hertz/v2/reservations/startres",complete:function(){B();C();s(c,l);t(htz.homepage.json)}});else{if(o=e.getItem(b.APP_CONFIG))try{if(o=
h.parse(o),o.pos!==p.config.pos){e.setItem(b.APP_CONFIG,h.stringify(p.config));s(c,l);t(htz.homepage.json);break a}}catch(y){}D();p.config.isApp&&window.plugins.remoteToLocal.readFromSharedStorage("login_status_change",function(a){var b,c;"undefined"!==typeof a&&!0==a.isLoggedIn?a=j.Deferred().resolve().promise():(a=hzm.constants.URL.CONFIG,b=htz.config.dialect.substring(0,2),c=htz.config.dialect.substring(2,4),a=j.ajax({url:a+("/"+c+"/"+b),dataType:"json",type:"POST"}));a.then(function(){s()})});
g=e.getItem(b.ITINERARY_DATA);try{g=A.hasProcessStarted()&&g?h.parse(g):htz.homepage.json.data.model,t(htz.homepage.json),htz.homepage.json.message=null}catch(z){}j.publish(b.VALIDATE_ITINERARY,[g,c,l])}}}},refresh:function(){i&&d&&(applyCrossSavedData(i),d.refresh())},updateData:function(){s()},doCleanup:function(){i&&i.doCleanup&&i.doCleanup();d&&d.doCleanup&&d.doCleanup();l.removePage(n);i=d=window.HomeModel=window.HomePage=window.HomeViewHelper=null}}});
define("reservation/delivery-and-collection/core/model/location-details-model",["backbone","utils/restmodel","config/app-config"],function(a,d,b){return a.Model.extend({initialize:function(a,c){this.url=b.config.apiDomain+"/rest/location/oag/"+c.eoag+"?dialect="+b.config.dialect}})});
define("reservation/delivery-and-collection/core/model/dandc-location-model",["backbone","config/app-config","utils/utils"],function(b,c,d){var e=b.Model.extend({});return b.Collection.extend({initialize:function(a){this.url=c.config.rootContext+"/rest/hertz/v2/reservations/deliveryAndCollect/site/"+a.options.locType+"/"+a.options.countryCode+"/"+a.options.city},model:e,parse:function(a,b){if(!d.sessionTimedOut(b))return a.data.deliveryAndCollectionLocationList}})});
define("reservation/delivery-and-collection/core/model/dandc-city-model",["backbone","config/app-config","utils/utils"],function(c,e,f){var g=c.Model.extend({defaults:{cityName:""}});return c.Collection.extend({initialize:function(a){this.url=e.config.rootContext+"/rest/hertz/v2/reservations/deliveryAndCollect/site/"+a.options.locType+"/"+a.options.countryCode},model:g,parse:function(a,c){if(!f.sessionTimedOut(c)){var b=a.data.deliveryAndCollectionCountryList;a:{for(var d=0;d<b.length;d++)if(b[d].countryCode==
a.data.countryCode){b=b[d].showOffsite;break a}b=void 0}this.countryOffsiteFlag=b;return _.map(a.data.deliveryAndCollectionCityList,function(a){return{cityName:a}})}}})});
define("reservation/delivery-and-collection/core/model/dandc-offsite-model",["backbone","utils/restmodel","config/app-config"],function(d,b,c){return b.extend({initialize:function(a){this.url=c.config.rootContext+"/rest/hertz/v2/reservations/deliveryAndCollect/offsite/"+a.options.locType+"/"+a.options.countryCode+"/"+a.options.countryName}})});
define("reservation/delivery-and-collection/core/model/delivery-and-collection-model",["backbone","config/app-config","utils/utils"],function(a,c,d){var e=a.Model.extend({});return a.Collection.extend({initialize:function(b){this.url=c.config.rootContext+"/rest/hertz/v2/reservations/deliveryAndCollect/site/"+b.locType},model:e,parse:function(b,a){if(!d.sessionTimedOut(a))return b.data.deliveryAndCollectionCountryList}})});
define("reservation/delivery-and-collection/core/view/location-details-view",["jquery","underscore","backbone"],function(b,a,c){return c.View.extend({initialize:function(){this.content=this.options.content;this.template=this.options.template.html();this.data=this.model.get("data")},render:function(){this.$el.append(a.template(this.template,{data:this.data,content:this.content}));this.$("#address-content").append(a.template(b("#address-tpl").html(),{data:this.data,content:this.content}));this.$("#phone-content").append(a.template(b("#phone-tpl").html(),
{data:this.data,content:this.content}));this.$("#rentals-content").append(a.template(b("#rentals-tpl").html(),{data:this.data,content:this.content}));this.$("#notes-content").append(a.template(b("#notes-tpl").html(),{data:this.data,content:this.content}));this.$("#service-content").append(a.template(b("#service-tpl").html(),{data:this.data,content:this.content}));return this}})});
define("reservation/delivery-and-collection/core/view/delivery-and-collection-location-view","jquery underscore backbone reservation/delivery-and-collection/core/view/delivery-and-collection-view config/app-config reservation/common/retry/core/view/retry-view".split(" "),function(b,h,c,i,d,e){return c.View.extend({initialize:function(){this.presenter=this.options.presenter;this.dandcView=this.options.dandcView},tagName:"li",events:{click:"selectLocation"},selectLocation:function(){var a=this,c={siteID:a.model.get("siteID"),
cdp:a.model.get("cdpNumber"),countryCode:a.model.get("countryCode"),cityName:a.model.get("cityName"),locationName:a.model.get("locationName"),eoagCode:a.model.get("eoagCode"),deliverOrCollectFlag:a.model.get("locType")},f=d.config.rootContext+"/rest/hertz/v2/itinerary/vehicles/deliveryAndCollect/site";e.ajaxWithRetry({type:"POST",headers:{"cache-control":"no-cache"},data:JSON.stringify(c),dataType:"json",contentType:"application/json",url:f,success:function(g){g&&("D"==a.model.get("locType")?b.publish(htz.res.config.ReservationConstants.LOCATION_DELIVERY_PICKUP,
{formData:{pickupLocation:"Deliver to: "+a.model.get("locationName"),pickupHiddenEOAG:a.model.get("eoagCode"),isDeliveryChanged:""},metaData:{deliveryLocation:a.model.toJSON()}}):"C"==a.model.get("locType")&&b.publish(htz.res.config.ReservationConstants.LOCATION_COLLECTION_DROPOFF,{formData:{dropoffLocation:"Collect from: "+a.model.get("locationName"),dropoffHiddenEOAG:a.model.get("eoagCode"),isCollectChanged:""},metaData:{collectionLocation:a.model.toJSON()}}),a.closeOverlay())},error:function(a){a&&
a.responseText&&(a=JSON.parse(a.responseText).message,utils.displayAllErrors(a,"#dnc-error-list"))}});a.cleanupResults();a.closeOverlay()},render:function(){b(this.el).html(this.model.get("locationName"));return this},cleanupResults:function(){b("#dandc-locations-section").remove()},closeOverlay:function(){this.dandcView.closeOverlay()}})});
define("reservation/delivery-and-collection/core/view/delivery-and-collection-location-list-view",["jquery","underscore","backbone","reservation/delivery-and-collection/core/view/delivery-and-collection-location-view"],function(c,b,d,e){return d.View.extend({initialize:function(){this.content=this.options.content;this.template=this.options.template.html();this.locType=this.options.locType;this.presenter=this.options.presenter;this.dandcView=this.options.dandcView},render:function(){var a=this;c("#dandc-cities-section").length?
c("#dandc-cities-section").after(b.template(a.template,{content:a.content})):c("#dandc-overlay").append(b.template(a.template,{content:a.content}));b.each(a.collection.models,function(b){b.set("locType",a.locType);c(a.el).find("#dandc-locations").append((new e({model:b,presenter:a.presenter,dandcView:a.dandcView})).render().el)});a.postRender();return a},postRender:function(){}})});
define("reservation/delivery-and-collection/core/view/delivery-and-collection-city-list-view",["jquery","underscore","backbone","utils/utils","reservation/delivery-and-collection/core/view/delivery-and-collection-city-view"],function(c,b,d,e,f){return d.View.extend({events:{"change #dandc-cities":"selectCity","click #dandc-offsite-select":"getOffsiteInfo"},initialize:function(){this.content=this.options.content;this.template=this.options.template.html();this.locType=this.options.locType;this.countryCode=
this.options.countryCode;this.countryName=this.options.countryName;this.presenter=this.options.presenter;this.dandcView=this.options.dandcView;this.showOffsite=this.options.showOffsite},getOffsiteInfo:function(){this.presenter.showOffsite(this.locType,this.countryCode,this.countryName,this.content,this.dandcView)},selectCity:function(a){a=c(a.target).val();this.cleanupResults();this.clearErrorMessage();a&&""!=a&&this.presenter.getLocations(this.locType,this.countryCode,a,this.content,this.dandcView,
this.$el)},cleanupResults:function(){c(this.el).find("#dandc-locations-section").remove()},clearErrorMessage:function(){e.clearErrorMessage("#dnc-error-list")},render:function(){var a=this;c(a.el).append(b.template(this.template,{content:this.content}));b.each(a.collection.models,function(b){b.set({locType:a.locType,countryCode:a.countryCode,content:a.content,deliverOrCollectFlag:a.locType});c(a.el).find("#dandc-cities").append((new f({model:b})).render().el)});this.showOffsite&&a.$el.append(b.template(c("#dnc-offsite-button-tpl").html(),
{locType:a.locType,content:a.content}));a.postRender();return a},postRender:function(){},stopListening:function(){this.$el.off()}})});
define("reservation/delivery-and-collection/core/view/delivery-and-collection-city-view",["jquery","underscore","backbone","utils/utils"],function(a,d,b,c){return b.View.extend({tagName:"option",clearErrorMessage:function(){c.clearErrorMessage("#dnc-error-list")},render:function(){a(this.el).attr("value",this.model.get("cityName")).html(this.model.get("cityName"));return this}})});
define("reservation/delivery-and-collection/core/view/delivery-and-collection-country-view",["jquery","underscore","backbone","utils/utils"],function(a,d,b,c){return b.View.extend({tagName:"option",initialize:function(){this.locType=this.options.locType;this.presenter=this.options.presenter;this.content=this.options.content},cleanupResults:function(){a("#dandc-countries-section").remove()},clearErrorMessage:function(){c.clearErrorMessage("#dnc-error-list")},render:function(){a(this.el).attr("value",
this.model.get("countryCode")).html(this.model.get("countryName"));return this}})});
define("reservation/delivery-and-collection/core/view/delivery-and-collection-country-list-view","jquery underscore backbone config/app-config utils/utils-proxy utils/utils reservation/delivery-and-collection/core/view/delivery-and-collection-country-view".split(" "),function(b,d,e,h,i,f,g){return e.View.extend({events:{"change #dandc-country":"selectCountry"},initialize:function(){this.content=this.options.content;this.locType=this.options.locType;this.presenter=this.options.presenter;this.dandcView=
this.options.dandcView;this.render();this.postRender()},selectCountry:function(a){var c=b(a.target).val(),a=b(a.target).find(":selected").text();this.cleanupResults();this.clearErrorMessage();c&&""!=c&&this.presenter.getCities(this.locType,c,a,this.content,this.dandcView,this.$el.find("#dandc-overlay"))},cleanupResults:function(){b(this.el).find("#dandc-cities-section").remove();b(this.el).find("#dandc-locations-section").remove();b(this.el).find("#dandc-offsite-select").remove()},clearErrorMessage:function(){f.clearErrorMessage("#dnc-error-list")},
render:function(){var a=this;d.each(a.collection.models,function(c){c.set({locType:a.locType,content:a.content});b(a.el).find("#dandc-country").append((new g({model:c})).render().el)});return a},postRender:function(){}})});
define("reservation/delivery-and-collection/core/view/delivery-and-collection-offsite-view","jquery underscore backbone config/app-config utils/utils-proxy utils/utils reservation/common/retry/core/view/retry-view".split(" "),function(b,e,f,g,j,h,i){return f.View.extend({events:{"click #dandc-profile-link":"useProfileAddress","click #dandc-offsite-submit":"submitOffsiteAddress","click .site":"displaySite"},initialize:function(){this.content=this.options.content;this.countryName=this.options.countryName;
this.template=this.options.template.html();this.dandcView=this.options.dandcView;this.model.set({content:this.content,countryName:this.countryName,template:this.template});window.OffsiteModel=this.model},useProfileAddress:function(){var a=this.model.get("addressInfo");this.$el.find("#address1").val(a.address1);this.$el.find("#address2").val(a.address2);this.$el.find("#city-name").val(a.city);this.$el.find("#postal-code").val(a.zip);this.$el.find("#country-code").val(a.country);this.$el.find("#country-name").val(this.model.get("countryNameForAddressInfo"))},
displaySite:function(a){var c;"site-delivery"===b(a.currentTarget).attr("id")?c="D":"site-collection"===b(a.currentTarget).attr("id")&&(c="C");require(["reservation/delivery-and-collection/core/presenter/delivery-and-collection-presenter"],function(a){a.showCountriesView(c,b("#dandc-tpl"),window.OffsiteModel.get("content").DandCView.DandC.locationSearch)});this.postDisplaySite()},postDisplaySite:function(){},submitOffsiteAddress:function(){var a=this,c={address1:this.$el.find("#address1").val(),address2:this.$el.find("#address2").val(),
cityName:this.$el.find("#city-name").val(),postalCode:this.$el.find("#postal-code").val(),countryCode:this.$el.find("#country-code").val(),deliverOrCollectFlag:this.model.get("deliverOrCollectFlag")},e=g.config.rootContext+"/rest/hertz/v2/itinerary/vehicles/deliveryAndCollect/offsite";i.ajaxWithRetry({type:"POST",headers:{"cache-control":"no-cache"},data:JSON.stringify(c),dataType:"json",contentType:"application/json",url:e,success:function(d){if(d&&d.data){var c=a.model.get("deliverOrCollectFlag");
"D"==c?b.publish(htz.res.config.ReservationConstants.LOCATION_DELIVERY_PICKUP,{formData:{pickupLocation:"Deliver to: "+d.data.locationName,pickupHiddenEOAG:d.data.eoagCode,isDeliveryChanged:""},metaData:{deliveryLocation:d.data}}):"C"==c&&b.publish(htz.res.config.ReservationConstants.LOCATION_COLLECTION_DROPOFF,{formData:{dropoffLocation:"Collect from: "+d.data.locationName,dropoffHiddenEOAG:d.data.eoagCode,isCollectChanged:""},metaData:{collectionLocation:d.data}});a.closeOverlay()}},error:function(a){a&&
a.responseText&&(a=JSON.parse(a.responseText).message,h.displayAllErrors(a,"#dnc-error-list"))}})},render:function(){b("#dandc-offsite-select").remove();b("#dandc-overlay").empty();var a=window.OffsiteModel;b("#dandc-overlay").append(e.template(a.get("template"),{model:a.attributes,countryName:a.get("countryName"),content:a.get("content")}))},closeOverlay:function(){this.dandcView.closeOverlay()}})});
define("reservation/delivery-and-collection/core/view/delivery-and-collection-view","jquery underscore backbone config/app-config utils/utils-proxy reservation/delivery-and-collection/core/view/delivery-and-collection-country-list-view".split(" "),function(a,g,h,e,c,i){function f(b){null===d?d=c.getLightbox():b&&(d=c.getLightbox());return d}var d=null;return h.View.extend({initialize:function(){this.template=this.options.template.html();this.locType=this.options.locType;this.presenter=this.options.presenter;
this.title=this.options.title},retrieveContent:function(){return e.config.apiDomain+"/rest/content/"+e.config.subSystemId+"/"+e.config.dialect+"/all/reservation/delivery-and-collection/delivery-and-collection?callback=define"},displayDeliveryAndCollection:function(b){this.$el.append(g.template(this.template,{content:b}));this.displayCountryListView(b)},displayCountryListView:function(b){new i({collection:this.collection,content:b,el:this.$el,presenter:this.presenter,locType:this.locType,dandcView:this});
f(!0).overlay({title:this.title,width:500,center:!0,dismiss:!1},a(this.el))},cleanupPreviousResults:function(){a("#dandc-countries-section").remove();a("#dandc-cities-section").remove();a("#dandc-locations-section").remove();a("#dandc-offsite-select").remove()},render:function(){var b=this,a=this.retrieveContent();c.getSpinner().spin();require([a],function(a){b.displayDeliveryAndCollection(a)});this.cleanupPreviousResults();c.getSpinner().stop();return this},closeOverlay:function(){f().closeOverlay()}})});
define("reservation/delivery-and-collection/core/presenter/delivery-and-collection-presenter","config/app-config utils/utils utils/utils-proxy reservation/delivery-and-collection/core/model/delivery-and-collection-model reservation/delivery-and-collection/core/model/dandc-city-model reservation/delivery-and-collection/core/model/dandc-location-model reservation/delivery-and-collection/core/model/dandc-offsite-model reservation/delivery-and-collection/core/view/delivery-and-collection-view reservation/delivery-and-collection/core/view/delivery-and-collection-city-list-view reservation/delivery-and-collection/core/view/delivery-and-collection-location-list-view reservation/delivery-and-collection/core/view/delivery-and-collection-offsite-view reservation/delivery-and-collection/core/model/location-details-model reservation/delivery-and-collection/core/view/location-details-view backbone".split(" "),
function(e,k,m,n,o,p,q,r,s,t,u,v,w){function l(){null==g&&(g=m.getLightbox());return g}var g=null,j=null,h={showCountriesView:function(a,b,c){var d=new n({locType:a});d.fetch({async:!1});this.dandcViewRef=(new r({collection:d,template:b,locType:a,presenter:h,title:c})).render()},getCities:function(a,b,c,d,i,e){var f=new o({options:{locType:a,countryCode:b}});f.fetch({async:!1,success:function(g){0<f.length&&(j&&j.stopListening(),j=new s({el:e,collection:f,template:$("#dandc-cities-tpl"),content:d,
presenter:h,locType:a,countryCode:b,countryName:c,dandcView:i,showOffsite:g.countryOffsiteFlag}),j.render())},error:function(a,b){if(b&&b.responseText){var c=JSON.parse(b.responseText).message;k.displayAllErrors(c,"#dnc-error-list")}}})},showOffsite:function(a,b,c,d,i){a=new q({options:{locType:a,countryCode:b,countryName:c}});a.fetch({async:!1});(new u({el:$("#dandc-overlay"),model:a,template:$("#dnc-offsite-form-tpl"),content:d,presenter:h,countryName:c,dandcView:i})).render()},getLocations:function(a,
b,c,d,i,e){var f=new p({options:{locType:a,countryCode:b,city:c}});f.fetch({async:!1,success:function(){(new t({el:e,collection:f,template:$("#dandc-locations-tpl"),content:d,presenter:h,locType:a,dandcView:i})).render()},error:function(a,b){if(b&&b.responseText){var c=JSON.parse(b.responseText).message;k.displayAllErrors(c,"#dnc-error-list")}}})},showLocationInfo:function(a){require([e.config.apiDomain+"/rest/content/"+e.config.subSystemId+"/"+e.config.dialect+"/all/reservation/delivery-and-collection/dnc-location-details?callback=define"],
function(b){var c=b.locationResultsGlobalView.locationResultsGlobal.locations,d=new v({eoag:a},{eoag:a});htz.utils.config.UtilConfig.getSpinner().spin();d.fetch({cache:!1,dataType:"jsonp",success:function(a){htz.utils.config.UtilConfig.getSpinner().stop();a=(new w({model:a,content:b,template:$("#location-details-tpl")})).render();l().overlay({title:c,width:500,center:!0},a.el)}})})},closeOverlay:function(){l().closeOverlay()}};return h});
define("reservation/reservation-info/core/model/reservation-info-model",["backbone","utils/utils"],function(){var a=null;return{getReservationId:function(){return a},setReservationId:function(b){a=b},hasReservationId:function(){return null!=a},getSafeReservationId:function(){var b;b=a&&null!=a?a:1;return b}}});
window.checkHertzNameSpace("htz.res.common");
var retryView=function(){return{submit:function(b,a,c,d,h){var e=!1,f=0,i=this;$.ajax({url:a,type:"POST",headers:{"cache-control":"no-cache"},data:JSON.stringify(c),dataType:"json",contentType:"application/json",success:function(g){g&&g.resultInfo?"retry"===g.resultInfo.result?(0===b?c={qpRetryFail:!0}:(--b,f=g.data.retryInterval),setTimeout(function(){i.submit(b,a,c,d,h)},f)):process.getStep()===htz.res.config.ReservationConstants.VEHICLES||process.getStep()===htz.res.config.ReservationConstants.EXTRAS?
h.setSessionData(g,d):e=!0:e=!0},error:function(){e=!0},complete:function(){e&&utilProxy.getSpinner().stop()}})},handleRetryResponse:function(b,a,c){b&&b.resultInfo?"retry"===b.resultInfo.result?(a.firstRetry&&(0<b.data.maxRetries?(a.maxRetries=b.data.maxRetries-1,a.retryInterval=b.data.retryInterval):(a.maxRetries=0,data={qpRetryFail:!0}),a.firstRetry=!1,a.retryCount=0),a.maxRetries-=1,a.retryInterval=b.data.retryInterval,a.retryCount++,setTimeout(function(){c.retry(a)},a.retryInterval)):c.success():
c.success()},saveWithRetry:function(b,a,c){var d=this,h=c.success,e=b.toJSON(),f=function(g){g?(newOptions=_.extend(c,{data:JSON.stringify({retryCount:g.retryCount}),contentType:"application/json"}),b.save({},newOptions)):b.save(a,c)},i={maxRetries:null,retryInterval:0,firstRetry:!0};c.success=function(b,a){d.handleRetryResponse(a,i,{retry:function(a){d.restorePrevData(b,e);f(a)},success:function(){h(b,a)},error:function(){d.restorePrevData(b,e);c.error(b,a,i.retryCount)}})};f()},ajaxWithRetry:function(b){var a=
this,c=b.success,d=function(a){a&&(b.data=JSON.stringify({retryCount:a.retryCount}));$.ajax(b)},h={maxRetries:null,retryInterval:0,firstRetry:!0};b.success=function(e,f,i){Utils.sessionTimedOut(i)||a.handleRetryResponse(e,h,{retry:function(a){d(a)},success:function(){c(e)},error:function(){b.error(e)}})};d()},fetchWithRetry:function(b,a){var c=this,d=a.success,h={maxRetries:null,retryInterval:0,firstRetry:!0};a.success=function(e,f){c.handleRetryResponse(f,h,{retry:function(){b.fetch(a)},success:function(){d(f)},
error:function(){a.error(f)}})};b.fetch(a)},saveChangedWithRetry:function(b,a,c){var d=this,h=c.success,e=b.toJSON(),f=function(g){g?(newOptions=_.extend(c,{data:JSON.stringify({retryCount:g.retryCount}),contentType:"application/json"}),b.save({},newOptions)):b.saveChanged(a,c)},i={maxRetries:null,retryInterval:null,firstRetry:!0};c.success=function(a,b){d.handleRetryResponse(b,i,{retry:function(b){d.restorePrevData(a,e);f(b)},success:function(){h(a,b)},error:function(){d.restorePrevData(a,e);c.error(a,
b)}})};f()},restorePrevData:function(b,a){b.clear({silent:!0});b.set(a,{silent:!0})}}}();"function"==typeof define&&define.amd&&define("reservation/common/retry/core/view/retry-view",["jquery","json","utils/utils-proxy","utils/utils","reservation/process-info/core/model/process-model"],function(){return retryView});htz.res.common.RetryView=retryView;
define("reservation/utils/core/reservation-utils","jquery json reservation/process-info/core/model/process-model utils/utils config/app-config utils/sessionhelper reservation/config utils/utils-proxy utils/domhelper reservation/process-config/core/reservation-constants res/res-resource-config-manager".split(" "),function(h,f,k,m,i,e,g,o,s,d,t){function p(){null==n&&(n=o.getLightbox());return n}var n=null,l={},j;return{getResponseText:function(a){var b="",a=a.responseText;try{f.parse(a)}catch(c){a&&
(0<a.length&&(a=a.replace(/(\r\n|\n|\r)/gm,""),100<a.length&&(a=a.substring(0,100))),b+=a)}return b},trackError:function(a,b){try{if("undefined"!==typeof WebTracking){var c=k.getStep(),b=this.getErrorType(c,a),d=k.getFlow();b||(b="error");WebTracking.setError("debug-runtime-"+b+""+(d?"-"+d:"")+"-"+c+"-"+a+"-"+b+"-"+i.config.dialect+"-"+i.config.pos+"-"+m.browserDeviceType(),c)}}catch(e){}},handleRenderFail:function(a){try{if(o.getSpinner().stop(),!i.config.isApp){var b=k.getStep(),c=this.getErrorType(b,
a);this.showResubmitOverlay(b,a,c)}}catch(d){alert(htz.homepage.content.reservationErrors.genericErrorContent.technicalDifficulties)}},getResubmitCount:function(a){return!h.isEmptyObject(l)&&l[a]?l[a]:0},resetResubmitCount:function(a){a&&(l[j]=0)},incrementResubmitCount:function(a){if(a){var b=this.getResubmitCount(a);l[a]=0<b?b+1:1}},resetPrevStep:function(a){j&&j!==a&&this.resetResubmitCount(j)},updatePrevState:function(a){a&&(j=a)},getErrorType:function(a,b){var c="";-1<(""+b).indexOf("content.")?
c="CONTENT-ERROR":(c=t.getPageInfo(a).checkElmId||"undefined",c="TEMPLATE-ERROR-"+c+"-"+(h("#"+c).length?"exists":"missing"));return c},showResubmitOverlay:function(a,b,c){var d,e,f,g=!1;e=this.getResubmitCount(a);var k="text!"+i.config.rootContext+"/assets/"+i.config.buildId+"/html/all/reservation/common/resubmit-overlay.html",l=i.config.apiDomain+"/rest/content/"+htz.config.subSystemId+"/"+htz.config.dialect+"/all/reservation/common/resubmit-overlay?callback=define",j=p();j.inUse&&j.closeOverlay();
1>e?(f="#resubmit-overlay-tpl",e="resubmit-"+e,this.resetPrevStep(a),this.incrementResubmitCount(a),this.updatePrevState(a)):(f="#contact-us-overlay-tpl",e="contact-us",g=!0);d=m.getUniqueErrorKey();require(["reservation/page-resubmit/core/view/page-resubmit-view",k,l],function(b,e,r){e&&s.addTemplate("resubmit",e);p().overlay({title:r.reservationPopups.resubmitOverlay.resubmitOverlayTitle,dismiss:!1},(new b({errorKey:d,step:a,template:h(f).html(),errorType:c,lBoxRef:j,content:r,isContactUs:g})).render().el)});
this.trackRuntimeError(b,a,c,e,d)},trackRuntimeError:function(a,b,c,d,e){if("undefined"!==typeof WebTracking){var f=k.getFlow(),f=f?"-"+f:"",g=this.getPickupLocationCode(),g=g?"-"+g:"",h=m.isPrivateMode();WebTracking.setError("debug-runtime-error-"+e+f+"-"+b+"-"+a+"-"+c+"-"+d+"-"+i.config.dialect+"-"+i.config.pos+g+(h?"-"+h:"")+"-"+m.browserDeviceType(),b)}},trackWarning:function(a){if(a&&"undefined"!==typeof WebTracking){var b=[];b.push("debug-runtime-warning");var c=k.getFlow();c&&b.push(c);(c=
k.getStep())&&b.push(c);a.warning&&b.push(a.warning);b.push(i.config.dialect);b.push(i.config.pos);(a=this.getPickupLocationCode())&&b.push(a);(a=this.getResData("pickupDate"))&&b.push(a);(a=this.getResData("pickupTime"))&&b.push(a);(a=this.getResData("returnDate"))&&b.push(a);(a=this.getResData("returnTime"))&&b.push(a);b.push(m.browserDeviceType());WebTracking.setError(b.join("-"),c)}},buildErrorMessage:function(a,b){if(!b)return"";var c=e.getItem(d.RESERVATION_ERROR_LIST);if(c)c=f.parse(c);else if(a){for(var c=
{},q,g=0;g<a.length;g++)if(q=a[g].errorCode)c[h.trim(q)]=a[g].errorMessage;e.setItem(d.RESERVATION_ERROR_LIST,f.stringify(c))}b=h.trim(b);return c[b]+" ["+b+"]"},rqrOverlay:function(){var a=Modernizr&&Modernizr.touch?"touchstart":"click",b=this;h(document).off(a,".rqr-policy").on(a,".rqr-policy",function(a){b.openRQRLink(a);return!1})},openRQRLink:function(a){require(["reservation/policy-details-overlay/core/presenter/policy-details-overlay-presenter"],function(b){b.showOverlayPopUp(a)})},checkForReferrerUrl:function(){var a=
e.getItem(d.ITINERARY_DATA),b;if(a)try{a=f.parse(a),b=a.metaData.referrerUrl}catch(c){b=htz.homepage.json.data.model.metaData.referrerUrl}else b=htz.homepage.json.data.model.metaData.referrerUrl;b&&e.setItem(d.REFERRER_URL,b)},keepTrackOfGeoPrefLocation:function(a){try{if(a){var b=e.getItem(d.ITINERARY_SC_DATA);if(b)if(b=f.parse(b),h.isArray(b)&&0<b.length){if(0<=h.inArray(a,b))return;b.push(a)}else b=[a];else b=[a];e.setItem(d.ITINERARY_SC_DATA,f.stringify(b))}}catch(c){}},checkIfGeoPrefLocation:function(a){try{if(a){var b=
e.getItem(d.ITINERARY_SC_DATA);if(b&&(b=f.parse(b),h.isArray(b)&&0<b.length))return 0<=h.inArray(a,b)}}catch(c){}return!1},getResData:function(a){if(!a)return null;try{var b=e.getItem(d.RESERVATION_INFORMATION_DATA);if(b)return b=f.parse(b),b[a]}catch(c){}return null},getPickupLocationCode:function(){try{var a=e.getItem(d.RESERVATION_INFORMATION_DATA);if(a)return a=f.parse(a),a.pickupLocationCode}catch(b){}return null},getCurrency:function(){try{var a=e.getItem(d.RESERVATION_INFORMATION_DATA);if(a)return a=
f.parse(a),a.currency}catch(b){}return null},getAlternateCurrency:function(){try{var a=e.getItem(d.RESERVATION_INFORMATION_DATA);if(a)return a=f.parse(a),a.alternateCurrency}catch(b){}return null},getApproxTotal:function(){try{var a=e.getItem(d.RESERVATION_INFORMATION_DATA);if(a)return a=f.parse(a),a.approxTotal}catch(b){}return null},updateReservationInfo:function(a){try{if(a){var b=e.getItem(d.RESERVATION_INFORMATION_DATA),b=b?f.parse(b):{},c=!1;a.dialect&&(b.dialect=a.dialect,c=!0);a.pickupLocationCode&&
(b.pickupLocationCode=a.pickupLocationCode,c=!0);a.currency?(b.currency=a.currency,c=!0):delete b.currency;a.alternateCurrency?(b.alternateCurrency=a.alternateCurrency,c=!0):delete b.alternateCurrency;a.approxTotal?(b.approxTotal=a.approxTotal,c=!0):delete b.approxTotal;a.pickupDate&&(b.pickupDate=a.pickupDate,c=!0);a.pickupTime&&(b.pickupTime=a.pickupTime,c=!0);a.returnDate&&(b.returnDate=a.returnDate,c=!0);a.returnTime&&(b.returnTime=a.returnTime,c=!0);c&&e.setItem(d.RESERVATION_INFORMATION_DATA,
f.stringify(b))}}catch(g){}},approxRateDecider:function(a){if(a.isPrepay&&a.currency&&a.alternateCurrency&&0<a.payLater){var b=a.currency===a.alternateCurrency,c=0<a.payLater?!0:!1;return a.isPrepay&&!b&&c}return!1},formatDate:function(a,b){isNaN(a.getDate())&&(a=new Date);var c=a.getDate(),d=a.getMonth()+1,c=10>c?"0"+c:c,d=10>d?"0"+d:d,e=a.getFullYear();return b?[c,d,e].join("/"):[d,c,e].join("/")},standardizeDate:function(a,b){var c=a.split("/"),d=c[2],e;b?(e=c[1],c=c[0]):(e=c[0],c=c[1]);return[d,
e,c].join("/")},goToPageFromResData:function(a){if(a){var b=a.get("data"),a=a.get("message"),c=k.isModify();if(b)if(b.model&&b.model.categories){e.setItem(d.EXTRAS_DATA,f.stringify(b.model));e.setItem(d.ITINERARY_INFO_DATA,f.stringify(b.itinerary));e.setItem(d.RATE_DETAILS_DATA,f.stringify(b.rateDetails));if(a)try{e.setItem(d.EXTRAS_ERROR_DATA,f.stringify(a))}catch(h){}c?g.getRotar().rotate(d.MODIFY_EXTRAS):g.getRotar().rotate(d.EXTRAS)}else if(b.model&&b.model.vehicles){if(a)try{e.setItem(d.VEHICLES_ERROR_DATA,
f.stringify(a))}catch(i){}e.setItem(d.VEHICLES_DATA,f.stringify(b.model));e.setItem(d.ITINERARY_INFO_DATA,f.stringify(b.itinerary));e.setItem(d.RATE_DETAILS_DATA,f.stringify(b.rateDetails));c?g.getRotar().rotate(d.MODIFY_VEHICLES):g.getRotar().rotate(d.VEHICLES)}else if(b.model&&b.itinerary&&b.rateDetails){if(a)try{e.setItem(d.REVIEW_AND_BOOK_ERROR_DATA,f.stringify(a))}catch(j){}e.setItem(d.REVIEW_AND_BOOK_DATA,f.stringify(b.model));e.setItem(d.ITINERARY_INFO_DATA,f.stringify(b.itinerary));e.setItem(d.RATE_DETAILS_DATA,
f.stringify(b.rateDetails));c?g.getRotar().rotate(d.MODIFY_REVIEW_AND_BOOK):g.getRotar().rotate(d.REVIEW_AND_BOOK)}else if(b.model){if(a)try{e.setItem(d.ITINERARY_ERROR_DATA,f.stringify(a)),e.setItem(d.ERRORS,f.stringify(a))}catch(l){}c?(e.getItem(d.CONFIRMATION_NUMBER)&&e.setItem(d.ITINERARY_DATA,f.stringify(b.model)),g.getRotar().rotate(d.MODIFY_ITINERARY)):(e.setItem(d.ITINERARY_DATA,f.stringify(b.model)),g.getRotar().rotate(d.ITINERARY))}else this.goToItineraryPage(c);else this.goToItineraryPage(c)}},
goToItineraryPage:function(a){a?g.getRotar().rotate(d.MODIFY_ITINERARY):g.getRotar().rotate(d.ITINERARY)},generateVehicleDetailTitle:function(a,b){var c=a.get("carGroup"),d=b.orSimilar||b.orSimilarText||"or similar",e=b.groupText||"Group",d=a.get("unique")?"":" <small>"+d+"</small>";return(c?"("+e+" "+c+") ":"")+a.get("name")+d},getShowMeLinkIndex:function(a){var b=0;h.each(a.reservationPopups.carTypeDetailsPopupContent.carTypeDetails,function(a,d){"ACAR"==d.carSipp&&(b=a)});return b},clearSessionStorage:function(a){for(var b=
0;b<a.length;b++)e.removeItem(a[b])}}});require(["reservation/utils/core/reservation-utils"],function(){});
define("reservation/utils/core/test-and-target",["config/app-config","json","utils/sessionhelper","utils/domhelper","reservation/process-config/core/reservation-constants"],function(f,h,g,i,c){return{handleTestTarget:function(a){f.config.isApp?this.resetConfirmationBackupData():c.CONFIRMATION===a&&(a=this.getConfirmationData(),this.triggerConfirmationTestAndTarget(a),this.resetConfirmationBackupData())},triggerConfirmationTestAndTarget:function(a){if(a)try{mboxDefine(i.getPageId(c.CONFIRMATION),"HorderConfirmPage");
var b="productPurchasedId="+a.vehicleSipp+"&orderId="+a.confirmationNumber,b=b+("&orderTotal="+a.rentalTotal+"&locationCode="+a.pickupLocationCode),b=b+("&resCompleteLocationCode="+a.pickupLocationCode+"&resCompletePickupDate="+a.pickupDate),b=b+("&resCompleteReturnDate="+a.returnDate);mboxTrack("HorderConfirmPage",b)}catch(d){}},getConfirmationData:function(){var a=g.getItem(c.CONFIRMATION_BACKUP_DATA);try{var a=h.parse(a),b={};a.data&&(a=a.data);var d=a.rateDetails;b.vehicleSipp=d.vehInfo.sipp;
b.rentalTotal=d.approxTotal;b.confirmationNumber=a.confirmationSummaryInfo.confirmationNumber;var e=a.itinerary;b.pickupLocationCode=e.pickupLocation.locationOAGCode;b.pickupDate=e.pickupDateStandard;b.returnDate=e.dropoffDateStandard;return b}catch(f){return null}},resetConfirmationBackupData:function(){g.removeItem(c.CONFIRMATION_BACKUP_DATA)}}});
define("reservation/common/gold-anytime-overlay/core/view/gold-anytime-overlay-view",["jquery","underscore","backbone"],function(a,b,c){return c.View.extend({initialize:function(){this.template=this.options.template;this.content=this.options.content},render:function(){this.$el.append(b.template(a(this.template).html(),{content:this.content}));return this}})});
define("reservation/policy-details-overlay/core/view/policy-details-overlay-view",["jquery","underscore","utils/utils","backbone"],function(a,b,d,c){return c.View.extend({initialize:function(){this.template=this.options.template;this.policyDesc=this.options.policyDesc},render:function(){this.$el.append(b.template(a(this.template).html(),{policyDesc:this.policyDesc}));return this}})});
define("reservation/policy-details-overlay/core/presenter/policy-details-overlay-presenter","jquery config/app-config backbone utils/utils-proxy utils/domhelper reservation/policy-details-overlay/core/view/policy-details-overlay-view utils/sessionhelper reservation/process-config/core/reservation-constants helpers/resource-loader".split(" "),function(g,c,i,j,k,l,m,n,h){function d(){null==a&&(a=j.getLightbox());return a}var a=null;return{showOverlayPopUp:function(f){var o=i.Model.extend({}),b=g(f.currentTarget),
a=b.attr("data-key")||b.attr("lang"),b=m.getItem(n.RESERVATION_INFORMATION_DATA),e=this;b&&(b=JSON.parse(b));a=c.config.apiDomain+"/rest/hertz/v2/rental-policy/policyDetail/systemId/"+c.config.systemId+"/subsystemId/"+c.config.subSystemId+"/dialect/"+b.dialect+"/eoagCode/"+b.pickupLocationCode+"/policyType/"+a;d().overlay({title:g(f.currentTarget).text(),width:700});d().showProgress();!b.dialect||!b.pickupLocationCode?e.loadPolicyErrorMsg(!0):(new o).fetch({dataType:"jsonp",url:a,cache:!0,type:"GET",
success:function(b){var a=b.get("data");a.policyDescription?h.load({template:c.config.rootContext+"/assets/"+c.config.buildId+"/html/all/reservation/rate-details-overlay/rate-details-overlay.html",callback:function(b){k.addTemplate("rate-details-overlay",b.template);d().overlay({title:a.policyTitle,width:700},(new l({template:"#rate-details-overlay-tpl",policyDesc:a.policyDescription})).render().el)}}):e.loadPolicyErrorMsg(!1)},error:function(b,a){try{var c=JSON.parse(a.responseText);"fail"===c.resultInfo.result?
d().showContent(c.message.messages):e.loadPolicyErrorMsg(!0)}catch(f){e.loadPolicyErrorMsg(!0)}}})},loadPolicyErrorMsg:function(a){h.load({content:c.config.apiDomain+"/rest/content/"+c.config.systemId+"/"+c.config.dialect+"/all/reservation/rate-details-overlay/rate-details-overlay",callback:function(c){a?d().showContent(c.content.reservationGlobals.rentalTerms.policyInfoError):d().showContent(c.content.reservationGlobals.rateIncludes.rateIncludesDetailsNotAvailable)}})}}});
define("reservation/special-instructions/core/presenter/special-instructions-presenter",["jquery","utils/utils-proxy","config/app-config","reservation/special-instructions/core/model/special-instructions-model","reservation/special-instructions/core/view/special-instructions-view"],function(k,a,d,f,g){function c(){null==b&&(b=a.getLightbox());return b}var b=null;return{showSpecialInsPopup:function(b,h,i){var j=new f,e=c();e.inUse&&e.closeOverlay();j.fetch({cache:!1,dataType:"jsonp",beforeSend:function(){d.config.isApp?
htz.utils.Spinner.spin():a.getSpinner().spin()},success:function(a){c().overlay({title:b,width:584,center:!0},(new g({template:"#location-popup-tpl",content:h,model:a,lBoxRef:c(),referrer:i})).render().el)},complete:function(){d.config.isApp?htz.utils.Spinner.stop():a.getSpinner().stop()}})}}});
define("reservation/special-instructions/core/model/special-instructions-model",["utils/restmodel","config/app-config","jquery","underscore","backbone"],function(a,b){return a.extend({url:function(){var a=b.config.apiDomain+"/rest/location/specialInsData/oag/",c=b.popup.oag;return a+(void 0!=typeof c&&""!=c?c:"")+"?dialect="+b.config.dialect}})});
define("reservation/special-instructions/core/view/special-instructions-view",["backbone","utils/utils-proxy"],function(a){return a.View.extend({initialize:function(){this.template=this.options.template;this.content=this.options.content;this.lBoxRef=this.options.lBoxRef;this.referrer=this.options.referrer},events:{"click #ok-btn":"acceptInstructions"},acceptInstructions:function(){this.closeOverlay();("Y"==this.model.get("served_by")||this.model.get("specialInstruction")&&this.model.get("bookable"))&&
this.referrer.handlePopupSubmit(htz.popup.locType)},closeOverlay:function(){this.lBoxRef.inUse&&this.lBoxRef.closeOverlay()},render:function(){this.$el.append(_.template($(this.template).html(),{content:this.content,data:this.model.attributes}));return this}})});

      		                  
	    window.checkHertzNameSpace("htz.res.config");
htz.res.config.ReservationConstants=function(){return{ITINERARY:"itinerary",VEHICLES:"vehicles",EXTRAS:"extras",REVIEW_AND_BOOK:"review-and-book",NON_BOOKABLE:"non-bookable",CONFIRMATION:"confirmation",REVIEW:"review",CANCEL_CONFIRMATION:"cancel-confirmation",RESERVATION_LIST:"reservation-list",SEARCH:"search",ERRORS:"errors",MODIFY_ITINERARY:"modify/itinerary",MODIFY_VEHICLES:"modify/vehicles",MODIFY_EXTRAS:"modify/extras",MODIFY_CONFIRMATION:"modify/confirmation",MODIFY_REVIEW_AND_BOOK:"modify/review-and-book",
MODIFY_NON_BOOKABLE:"modify/non-bookable",MEMBER_REVIEW:"memberReview",ITINERARY_LAZY:"itinerary-lazy",VEHICLES_LAZY:"vehicles-lazy",REVIEW_AND_BOOK_LAZY:"review-and-book-lazy",LEGACY_ITINERARY:"reservationOnHomepage.jsp",LEGACY_VEHICLES:"whatView.jsp",LEGACY_EXTRAS:"extrasView.jsp",LEGACY_REVIEW_AND_BOOK:"bookableQuoteView.jsp",LEGACY_CONFIRMATION:"confirmationView.jsp",LEGACY_REVIEW:"reviewReservationView.jsp",LEGACY_CANCEL_CONFIRMATION:"cancelConfirmationView.jsp",COUNTER_BYPASS_CONFIRMATION:"counter-bypass-confirmation",
ONLINE_CHECKIN_CONFIRMATION:"online-checkin-confirmation",ITINERARY_DATA:"res-home-data",ITINERARY_SC_DATA:"res-itinerary-sc-data",VEHICLES_DATA:"res-vehicles-data",EXTRAS_DATA:"res-extras-data",REVIEW_AND_BOOK_DATA:"res-review-and-book-data",NON_BOOKABLE_DATA:"res-non-bookable-data",CONFIRMATION_DATA:"res-confirmation-data",CONFIRMATION_BACKUP_DATA:"res-confirmation-backup-data",REVIEW_DATA:"res-review-data",CANCEL_CONFIRMATION_DATA:"res-cancel-confirmation-data",RATE_DETAILS_DATA:"res-rate-details-data",
ITINERARY_INFO_DATA:"res-itinerary-info-data",RESERVATION_DATA:"res-data",RESERVATION_CONFIRMED:"res-confirmed",RESERVATION_PRESERVED_DATA:"res-preserved-state-data",RESERVATION_INFORMATION_DATA:"res-information",SELECTED_VEHICLE_INFO:"res-selected-vehicle-info",SELECTED_EXTRAS_INFO:"res-selected-extras-info",MEMBER_SEARCH_DATA:"htz.res.member.searchList",NON_MEMBER_SEARCH_DATA:"htz.res.nonmember.searchList",UPSELL_LIST_DATA:"res-upsell-list-data",REDEEM_POINTS_DATA:"res-redeem-points-data",CONFIRMATION_NUMBER:"res-confirmation-number",
CONFIRMATION_NUMBER_INFO:"res-info-confirmation-number",RENTAL_LINKS_DATA:"res-rental-links-data",SPECIAL_OFFERS_DATA:"special-offers-data",APP_CONFIG:"app-config",APP_MEMBER_INFO:"app-member-info",APP_RESERVATION_FORM:"app-res-form",QUOTE_ID:"res-quote-id",VEHICLE_ID:"res-vehicle-id",ITINERARY_LOCATION_INFO:"res_itinerary_location_info",ITINERARY_DISCOUNT_INFO:"res_itinerary_discount_info",CALENDAR_MODE:"calendarMode",RESERVATION_ERROR_LIST:"res-error-list",HOD_VEHICLES:"hod-vehicle-available",ITINERARY_ERROR_DATA:"res-home-error-data",
VEHICLES_ERROR_DATA:"res-vehicles-error-data",EXTRAS_ERROR_DATA:"res-extras-error-data",REVIEW_AND_BOOK_ERROR_DATA:"res-review-and-book-error-data",NON_BOOKABLE_ERROR_DATA:"res-non-bookable-error-data",CONFIRMATION_ERROR_DATA:"res-confirmation-error-data",REVIEW_ERROR_DATA:"res-review-error-data",CANCEL_CONFIRMATION_ERROR_DATA:"res-cancel-confirmation-error-data",VEHICLES_FALLBACK_ERROR_DATA:"res-vehicles-fallback-error-data",RENDER_PREPARE_PRESENTER:"prepare-render.res.presenter",RENDER_FAILED_PRESENTER:"render-failed.res.presenter",
RENDER_DONE_PRESENTER:"render-done.res.presenter",NAVIGATE_PREPARE_PRESENTER:"prepare-navigate.res.presenter",VALIDATE_ITINERARY:"validate-state.res.itinerary",CHANGE_VEHICLE_IN_REVIEW_BOOK:"vehicle-change.res.review-book",CHANGE_RATE_IN_REVIEW_BOOK:"rate-change.res.review-book",VALIDATE_CONFIRMATION:"validate-state.res.confirmation",ERROR_EXTRAS:"extras-errors.res.extras",RESET_ERRORS_EXTRAS:"extras-reset-errors.res.extras",SUCCESS_EXTRAS:"extras-add-remove-success.res.extras",REMOVE_EXTRAS:"extras-removed.res.rates",
LOCATION_DELIVERY_PICKUP:"set-delivery-pickup-location.res.itinerary",LOCATION_COLLECTION_DROPOFF:"set-collection-dropoff-location.res.itinerary",LOCATION_PICKUP:"set-pickup-location.res.itinerary",RECENT_SEARCH_DATA:"set-itinerary-data.res.itinerary",TRACK_ERROR:"track-error",HANDLE_RENDER_FAIL:"handle-render-fail",CURRENCY_CONVERTER:"currency-converter",REFERRER_URL:"referrer-url",ITINERARY_TEMPLATE:"home-page-tpl",VEHICLES_TEMPLATE:"vehicle-page-tpl",EXTRAS_TEMPLATE:"extras-page-tpl",REVIEW_AND_BOOK_TEMPLATE:"bookable-page-tpl",
CONFIRMATION_TEMPLATE:"counter-bypass-summary-tpl",REVIEW_TEMPLATE:"res-update-cancel-prompt-tpl",CANCEL_TEMPLATE:"cancel-confirmation-tpl"}}();"function"==typeof define&&define.amd&&define("reservation/process-config/core/reservation-constants",[],function(){return htz.res.config.ReservationConstants});
window.checkHertzNameSpace("htz.res.config");htz.res.config.ReservationConfig=function(){var b,c;return{configure:function(a){a.rotar&&(b=a.rotar);a.resourceConfig&&(c=a.resourceConfig)},getRotar:function(){return b},getResourceConfig:function(){return c}}}();"function"==typeof define&&define.amd&&define("reservation/config",[],function(){return htz.res.config.ReservationConfig});
window.checkHertzNameSpace("htz.res.config");
htz.res.config.ResourceConfigManager=function(e,f,d,a){return{getPageInfo:function(a){return d.getResourceConfig().getPageInfo(a)},getLazyPage:function(c){var b=null;switch(c){case a.ITINERARY:b=a.ITINERARY_LAZY;break;case a.VEHICLES:b=a.VEHICLES_LAZY;break;case a.REVIEW_AND_BOOK:b=a.REVIEW_AND_BOOK_LAZY}return b},getNextPage:function(c){var b=null;switch(c){case a.ITINERARY:b=a.VEHICLES;break;case a.VEHICLES:b=a.EXTRAS;break;case a.EXTRAS:b=a.REVIEW_AND_BOOK;break;case a.REVIEW_AND_BOOK:b=a.CONFIRMATION;
break;case a.SEARCH:b=a.REVIEW}return b},getPages:function(){return[a.ITINERARY,a.VEHICLES,a.EXTRAS,a.REVIEW_AND_BOOK,a.CONFIRMATION,a.REVIEW,a.CANCEL_CONFIRMATION,a.RESERVATION_LIST]}}}(htz,$,htz.res.config.ReservationConfig,htz.res.config.ReservationConstants);"function"==typeof define&&define.amd&&define("res/res-resource-config-manager",[],function(){return htz.res.config.ResourceConfigManager});
window.checkHertzNameSpace("htz.res.config");
htz.res.config.RouteConfig={routes:{"":"showItinerary",itinerary:"showItinerary","modify/itinerary":"showItineraryModify",vehicles:"showVehicles","vehicles/sort/:by/:dir":"showVehicles","vehicles/sort/:by":"showVehicles","vehicles/display/:number":"showVehiclesOnly","modify/vehicles":"showVehiclesModify","modify/vehicles/sort/:by/:dir":"showVehiclesModify","modify/vehicles/sort/:by":"showVehiclesModify","modify/vehicles/display/:number":"showVehiclesOnlyModify",extras:"showExtras","modify/extras":"showExtrasModify",
"review-and-book":"showReviewandBook","modify/review-and-book":"showReviewandBookModify","non-bookable":"showNonBookable","modify/non-bookable":"showNonBookableModify",confirmation:"showConfirmation","modify/confirmation":"showConfirmation",review:"showReview",search:"showSearch","reservation-list":"showReservationList","cancel-confirmation":"showCancelConfirmation","online-checkin-confirmation":"showOCIConfirmation","counter-bypass-confirmation":"showCBPConfirmation","*path":"handleUnknown"},showItinerary:function(){htz.res.pages.PageHelper.show(htz.res.config.ReservationConstants.ITINERARY)},
showItineraryModify:function(){htz.res.pages.PageHelper.show(htz.res.config.ReservationConstants.ITINERARY,{isModify:!0})},showVehicles:function(a,b){htz.res.pages.PageHelper.show(htz.res.config.ReservationConstants.VEHICLES,{sortBy:a,sortDir:b})},showVehiclesModify:function(a,b){htz.res.pages.PageHelper.show(htz.res.config.ReservationConstants.VEHICLES,{sortBy:a,sortDir:b,isModify:!0})},showVehiclesOnly:function(a){htz.res.pages.PageHelper.show(htz.res.config.ReservationConstants.VEHICLES,{number:a})},
showVehiclesOnlyModify:function(a){htz.res.pages.PageHelper.show(htz.res.config.ReservationConstants.VEHICLES,{number:a,isModify:!0})},showExtras:function(){htz.res.pages.PageHelper.show(htz.res.config.ReservationConstants.EXTRAS)},showExtrasModify:function(){htz.res.pages.PageHelper.show(htz.res.config.ReservationConstants.EXTRAS,{isModify:!0})},showReviewandBook:function(){htz.res.pages.PageHelper.show(htz.res.config.ReservationConstants.REVIEW_AND_BOOK)},showReviewandBookModify:function(){htz.res.pages.PageHelper.show(htz.res.config.ReservationConstants.REVIEW_AND_BOOK,
{isModify:!0})},showNonBookable:function(){htz.res.pages.PageHelper.show(htz.res.config.ReservationConstants.NON_BOOKABLE)},showNonBookableModify:function(){htz.res.pages.PageHelper.show(htz.res.config.ReservationConstants.NON_BOOKABLE,{isModify:!0})},showConfirmation:function(){htz.res.pages.PageHelper.show(htz.res.config.ReservationConstants.CONFIRMATION)},showReview:function(){htz.res.pages.PageHelper.show(htz.res.config.ReservationConstants.REVIEW)},showSearch:function(){htz.res.pages.PageHelper.show(htz.res.config.ReservationConstants.SEARCH)},
showCancelConfirmation:function(){htz.res.pages.PageHelper.show(htz.res.config.ReservationConstants.CANCEL_CONFIRMATION)},showReservationList:function(){htz.res.pages.PageHelper.show(htz.res.config.ReservationConstants.RESERVATION_LIST)},showOCIConfirmation:function(){htz.res.pages.PageHelper.show(htz.res.config.ReservationConstants.ONLINE_CHECKIN_CONFIRMATION)},showCBPConfirmation:function(){htz.res.pages.PageHelper.show(htz.res.config.ReservationConstants.COUNTER_BYPASS_CONFIRMATION)},handleUnknown:function(){htz.res.pages.PageHelper.show("unknown")},
getRoot:function(){return"/reservation"}};  
window.checkHertzNameSpace("htz.res.utils");
htz.res.utils.DOMHelper=function(b,f,d,e){return{addTemplate:function(a,c){if(!a||!c)return!1;var b=d.createElm("res-"+a+"-page-templates","div",!0);return b?(b.html(c),!0):!1},removeTemplate:function(a){if(!a)return!1;a=b("#res-"+a+"-page-templates");return 0<a.length?(a.eq(0).remove(),!0):!1},getTemplatesId:function(a){return!a?"":"res-"+a+"-page-templates"},addPage:function(a,b){return!a?!1:e.getDomHelper().createPageElm(a,"res",b)?!0:!1},removePage:function(a){if(!a)return!1;a=b("#res-"+a+"-page-container");
return 0<a.length?(a.eq(0).remove(),!0):!1},removeTemplateAndPage:function(a){this.removeTemplate(a);this.removePage(a)},getPageId:function(a){return!a?"":"res-"+a+"-page-container"},isPageAdded:function(a){return!a?!1:0<b("#"+this.getPageId(a)).length}}}($,htz,htz.utils.Utils,htz.utils.config.UtilConfig);"function"==typeof define&&define.amd&&define("utils/domhelper",[],function(){return htz.res.utils.DOMHelper});
window.checkHertzNameSpace("htz.res.utils");
htz.res.utils.ReservationLoader=function(j,k,d,l,f,e,g){function h(c,a){var b=a.checkElmId;b&&0<j("#"+b).length&&(a.template=null);if(c===g.ITINERARY&&a.content)try{if(e.getItem(a.content))htz.homepage.content=null;else{var i=htz.homepage.content;i&&(e.setItem(a.content,k.stringify(i)),htz.homepage.content=null)}}catch(d){}else c===g.RESERVATION_LIST&&a.content&&(b=localStorage.getItem("res-lookup-content"))&&e.setItem(a.content,b)}return{loadResourceByPage:function(c,a){var b=l.getPageInfo(c);null!=
b?(h(c,b),b.callback=function(b){b.template&&f.addTemplate(c,b.template);a&&"function"===typeof a&&a(b)},b.page=c,d.load(b)):a&&"function"===typeof a&&a()},loadResources:function(c,a,b){null!=c?(b&&(h(b,c),c.page=b),c.callback=function(c){c.template&&b&&f.addTemplate(b,c.template);a&&"function"===typeof a&&a(c)},d.load(c)):a&&"function"===typeof a&&a()}}}($,JSON,htz.helpers.ResourceLoader,htz.res.config.ResourceConfigManager,htz.res.utils.DOMHelper,htz.helpers.SessionHelper,htz.res.config.ReservationConstants);
window.checkHertzNameSpace("htz.res.utils");
htz.res.utils.DOMMonitor=function(i,h,e){function c(a){f(a);g(a)}function f(a){e.removeTemplate(a);(a=h.getLazyPage(a))&&e.removeTemplate(a)}function g(a){e.removePage(a);var b=h.getLazyPage(a);b&&e.removePage(b);if(null!=d&&(b=d[a])&&"function"===typeof b.doCleanup)try{b.doCleanup(),d[a]=null}catch(c){}}var d=null;return{monitor:function(a){if(a){var b=h.getPages(),a=i.inArray(a,b);0<a?(2<=a&&(g(b[0]),g(b[1])),3<=a&&g(b[2]),4===a&&(c(b[3]),c(b[5]),f(b[0]),f(b[1]),f(b[2])),5===a&&c(b[4]),6===a&&c(b[5])):
0===a&&(c(b[4]),c(b[5]),c(b[6]))}},addPresenter:function(a,b){null==d&&(d=[]);d[a]=b},cleanupPage:function(a){c(a)},doCleanup:function(){d=null}}}($,htz.res.config.ResourceConfigManager,htz.res.utils.DOMHelper);
window.checkHertzNameSpace("htz.res.config");
htz.res.config.PageValidator=function(d,e,a){var c=[a.ITINERARY,a.VEHICLES,a.EXTRAS,a.REVIEW_AND_BOOK,a.NON_BOOKABLE,a.CONFIRMATION,a.REVIEW,a.CANCEL_CONFIRMATION,a.SEARCH,a.ONLINE_CHECKIN_CONFIRMATION,a.COUNTER_BYPASS_CONFIRMATION,a.RESERVATION_LIST];return{getValidPage:function(b){if(this.isValidPage(b))return b;a:{for(b=0;b<c.length;b++)if(e.isPageAdded(c[b])){b=!0;break a}b=!1}return b?null:this.getDefaultPage()},getDefaultPage:function(){return a.ITINERARY},isValidPage:function(b){return 0<=
d.inArray(b,c)},isPartOfSPP:function(b){var a;a:{if(b)try{if(0<=b.indexOf(htz.config.rootContext+"/reservation"))b.split(htz.config.rootContext+"/reservation");else{a=!1;break a}}catch(c){}a=!0}return a}}}($,htz.res.utils.DOMHelper,htz.res.config.ReservationConstants);
window.checkHertzNameSpace("htz.res.pages");var appCore=htz.config.isApp?"app":"core";
htz.res.pages.PageHelper=function(e,m,h,f,i,r,s,a){function n(a,b){var c=e.Deferred();window.plugins.remoteToLocal.readFromSharedStorage(a,function(a){a&&h.setItem(b,JSON.stringify(a));c.resolve()});return c.promise()}var c=[];c[a.ITINERARY]="reservation/itinerary/core/presenter/itinerary-presenter";c[a.VEHICLES]="reservation/vehicle/core/presenter/vehicle-presenter";c[a.EXTRAS]="reservation/extras/core/presenter/extras-presenter";c[a.REVIEW_AND_BOOK]="reservation/review-and-book/core/presenter/bookable-presenter";
c[a.NON_BOOKABLE]="reservation/non-bookable/core/presenter/non-bookable-presenter";c[a.CONFIRMATION]="reservation/confirmation/core/presenter/confirmation-presenter";c[a.SEARCH]="reservation/itinerary/core/presenter/itinerary-presenter";c[a.REVIEW]="reservation/confirmation/core/presenter/confirmation-presenter";c[a.CANCEL_CONFIRMATION]="reservation/cancel-confirmation/core/presenter/cancel-confirmation-presenter";c[a.RESERVATION_LIST]="reservation/lookup/"+appCore+"/presenter/lookup-presenter";c[a.ONLINE_CHECKIN_CONFIRMATION]=
"reservation/confirmation/core/presenter/confirmation-presenter";c[a.COUNTER_BYPASS_CONFIRMATION]="reservation/confirmation/core/presenter/confirmation-presenter";var p=[a.CONFIRMATION_DATA,a.CANCEL_CONFIRMATION_DATA,a.REVIEW_DATA,a.ITINERARY_DATA,a.VEHICLES_DATA,a.EXTRAS_DATA,a.REVIEW_AND_BOOK_DATA,a.NON_BOOKABLE_DATA,a.ITINERARY_INFO_DATA,a.RATE_DETAILS_DATA,a.UPSELL_LIST_DATA,a.REDEEM_POINTS_DATA,a.APP_RESERVATION_FORM,a.ITINERARY_SC_DATA,a.RENTAL_LINKS_DATA,a.SELECTED_VEHICLE_INFO,a.SELECTED_EXTRAS_INFO],
q={show:function(a,b){var c=this,e=i.getValidPage(a);e&&(e!=a?f.getRotar().rotate(e):r.loadResourceByPage(a,function(a){c.showPage(a,b)}))},showPage:function(l,b){function o(){var a=l;try{var d=a.content;(!d||e.isEmptyObject(d))&&WebTracking.setError("debug-content-error-"+a.page+"-content-missing",a.page)}catch(f){}require([c[k]],function(a){a.show(l,b);s.addPresenter(k,a)})}var j=e.Deferred(),f=this,k=l.page,b=f.getPageType(k,b);if(m.config.isApp){if(k==a.ITINERARY){var d;b:{d=window.location.search.substring(1).split("&");
for(var g=0;g<d.length;g++){var i=d[g].split("=");if("appversion"==i[0]){d=i[1];break b}}d=!1}m.config.isApp&&(d&&"250"!=d?n("res_location_info",a.ITINERARY_LOCATION_INFO).then(function(){n("res_discount_info",a.ITINERARY_DISCOUNT_INFO).then(function(){j.resolve();setTimeout(function(){window.plugins.remoteToLocal.clearFromSharedStorage("res_location_info");window.plugins.remoteToLocal.clearFromSharedStorage("res_discount_info")},0)})}):(d=window.localStorage.getItem("res_location_info"),g=window.localStorage.getItem("res_discount_info"),
d&&h.setItem(a.ITINERARY_LOCATION_INFO,d),g&&h.setItem(a.ITINERARY_DISCOUNT_INFO,g),window.localStorage.removeItem("res_location_info"),window.localStorage.removeItem("res_discount_info"),j.resolve()))}else j.resolve();j.promise().then(function(){o.call(f)})}else o()},showDefault:function(){f.getRotar().rotate(i.getDefaultPage())},resetReservation:function(){h.removeListedItems(p)},resetReservationBut:function(a){if(a&&0!=a.length){var b=e.merge([],p),b=e.grep(b,function(b){return 0>e.inArray(b,a)});
0<b.length&&h.removeListedItems(b)}},getPageType:function(c,b){b||(b={});c==a.REVIEW?b.isReview=!0:c==a.ONLINE_CHECKIN_CONFIRMATION?b.isOCI=!0:c==a.COUNTER_BYPASS_CONFIRMATION?b.isCBP=!0:c==a.SEARCH&&(b.isSearch=!0);return b},getPresenter:function(a){return c[a]}};e.unsubscribe(a.RENDER_FAILED_PRESENTER);e.subscribe(a.RENDER_FAILED_PRESENTER,function(c,b){b&&b.isReview?f.getRotar().rotate(a.SEARCH):q.showDefault()});return q}($,htz,htz.helpers.SessionHelper,htz.res.config.ReservationConfig,htz.res.config.PageValidator,
htz.res.utils.ReservationLoader,htz.res.utils.DOMMonitor,htz.res.config.ReservationConstants);
window.checkHertzNameSpace("htz.res.utils");
htz.res.utils.ResourceMonitor=function(f,d,c,e){return{trigger:function(a,b){var c=this;b&&0<b?setTimeout(function(){c.process(a)},b):c.process(a)},process:function(a){a=c.getNextPage(a);if(null!=a){var b=c.getPageInfo(a);b&&(b.callback=htz.res.utils.ResourceMonitor.action,b.page=a,d.load(b))}},action:function(a){a.template&&e.addTemplate(a.page,a.template)},fetchResource:function(a){return c.getPageInfo(a)}}}($,htz.helpers.ResourceLoader,htz.res.config.ResourceConfigManager,htz.res.utils.DOMHelper);
window.checkHertzNameSpace("htz.res.utils");
htz.res.utils.ResourceLazyLoader=function(f,g,d,h){var c=null;return{trigger:function(a,b,d){var e=this;c=d;b&&0<b?setTimeout(function(){e.load(a)},b):e.load(a)},load:function(a){if(a=d.getLazyPage(a)){var b=d.getPageInfo(a);b?(b.callback=htz.res.utils.ResourceLazyLoader.action,b.page=a,g.load(b)):c=null}else c=null},action:function(a){a.template&&h.addTemplate(a.page,a.template);c&&a.content&&f.extend(!0,c,a.content);c=null}}}($,htz.helpers.ResourceLoader,htz.res.config.ResourceConfigManager,htz.res.utils.DOMHelper);
window.checkHertzNameSpace("htz.routers.res");
htz.routers.res.ReservationRotar=function(g,d,a){return{rotate:function(h,e){var b=null;switch(h){case a.ITINERARY:b="#"+a.ITINERARY;break;case a.VEHICLES:b="#"+a.VEHICLES;break;case a.EXTRAS:b="#"+a.EXTRAS;break;case a.REVIEW_AND_BOOK:b="#"+a.REVIEW_AND_BOOK;break;case a.NON_BOOKABLE:b="#"+a.NON_BOOKABLE;break;case a.CONFIRMATION:b="#"+a.CONFIRMATION;break;case a.REVIEW:b="#"+a.REVIEW;break;case a.SEARCH:b="#"+a.SEARCH;break;case a.RESERVATION_LIST:b="#"+a.RESERVATION_LIST;break;case a.CANCEL_CONFIRMATION:b=
"#"+a.CANCEL_CONFIRMATION;break;case a.MODIFY_ITINERARY:b="#"+a.MODIFY_ITINERARY;break;case a.MODIFY_VEHICLES:b="#"+a.MODIFY_VEHICLES;break;case a.MODIFY_EXTRAS:b="#"+a.MODIFY_EXTRAS;break;case a.MODIFY_REVIEW_AND_BOOK:b="#"+a.MODIFY_REVIEW_AND_BOOK;break;case a.MODIFY_NON_BOOKABLE:b="#"+a.MODIFY_NON_BOOKABLE;break;case a.MODIFY_CONFIRMATION:b="#"+a.MODIFY_CONFIRMATION}if(b){e&&(b+="/"+e);try{if(!g.config.isApp&&window.location.hash===b){var c=b,c=c.substring(1),f=htz.res.config.RouteConfig;f[f.routes[c]]()}else d.getRotar().rotateTo(b)}catch(i){d.getRotar().rotateTo(b)}}}}}(htz,
htz.utils.config.UtilConfig,htz.res.config.ReservationConstants);"function"==typeof define&&define.amd&&define("routers/res-rotar",[],function(){return htz.routers.res.ReservationRotar});
window.checkHertzNameSpace("htz.web.res.config");
htz.web.res.config.ResourceConfig=function(j,k,c){var i=k.browser.msie&&8>=parseInt(k.browser.version,10),d,a=j.config.buildId,l=j.config.subSystemId,m=j.config.dialect,e=j.config.orgDeviceGroup,b=j.config.rootContext,n=j.config.apiDomain,o=j.config.pos,h=n+"/rest/content/"+a+"/"+l+"/"+m+"/all/reservation",g=b+"/assets/"+a+"/html/all/reservation";return{getPageInfo:function(j){var f=null;switch(j){case c.ITINERARY:f={template:g+"/home/homePage.html",content:h+"/home/homePage",checkElmId:c.ITINERARY_TEMPLATE};
break;case c.ITINERARY_LAZY:f={template:g+"/home/homeOverlays.html",content:h+"/home/homeOverlays"};break;case c.VEHICLES:d=i?b+"/assets/"+a+"/all/reservation/vehicle/ie_style.css":b+"/assets/"+a+"/"+e+"/reservation/vehicle/style.css";f={css:d,js:b+"/assets/"+a+"/"+e+"/reservation/vehicle.js",template:g+"/vehicle/vehiclePage.html",content:h+"/vehicle/vehiclePage",checkElmId:c.VEHICLES_TEMPLATE};break;case c.VEHICLES_LAZY:f={template:g+"/vehicle/vehicleOverlays.html",content:h+"/vehicle/vehicleOverlays"};
break;case c.EXTRAS:d=i?b+"/assets/"+a+"/all/reservation/extras/ie_style.css":b+"/assets/"+a+"/"+e+"/reservation/extras/style.css";f={css:d,js:b+"/assets/"+a+"/"+e+"/reservation/extras.js",template:g+"/extras/extrasPage.html",content:h+"/extras/extrasPage",checkElmId:c.EXTRAS_TEMPLATE};break;case c.REVIEW_AND_BOOK:d=i?b+"/assets/"+a+"/all/reservation/bookable/ie_style.css":b+"/assets/"+a+"/"+e+"/reservation/bookable/style.css";f={css:d,js:b+"/assets/"+a+"/"+e+"/reservation/bookable.js",template:g+
"/review-and-book/review-and-book.html",content:h+"/review-and-book/review-and-book",checkElmId:c.REVIEW_AND_BOOK_TEMPLATE};break;case c.REVIEW_AND_BOOK_LAZY:f={template:g+"/review-and-book/review-and-book-overlays.html",content:h+"/review-and-book/review-and-book-overlays"};break;case c.NON_BOOKABLE:d=i?b+"/assets/"+a+"/all/reservation/bookable/ie_style.css":b+"/assets/"+a+"/"+e+"/reservation/bookable/style.css";f={css:d,js:b+"/assets/"+a+"/"+e+"/reservation/nonbookable.js",template:g+"/non-bookable/non-bookable.html",
content:n+"/rest/content/"+l+"/"+m+"/"+o+"/all/reservation/non-bookable/non-bookable/contexts;howToReachUs=HTRU"};break;case c.CONFIRMATION:d=i?b+"/assets/"+a+"/all/reservation/confirmation/ie_style.css":b+"/assets/"+a+"/"+e+"/reservation/confirmation/style.css";f={css:d,js:b+"/assets/"+a+"/"+e+"/reservation/confirmation.js",template:g+"/confirmation/confirmation.html",content:h+"/confirmation/confirmation",checkElmId:c.CONFIRMATION_TEMPLATE};break;case c.ONLINE_CHECKIN_CONFIRMATION:d=i?b+"/assets/"+
a+"/all/reservation/confirmation/ie_style.css":b+"/assets/"+a+"/"+e+"/reservation/confirmation/style.css";f={css:d,js:b+"/assets/"+a+"/"+e+"/reservation/confirmation.js",template:g+"/confirmation/confirmation.html",content:h+"/confirmation/confirmation"};break;case c.COUNTER_BYPASS_CONFIRMATION:d=i?b+"/assets/"+a+"/all/reservation/confirmation/ie_style.css":b+"/assets/"+a+"/"+e+"/reservation/confirmation/style.css";f={css:d,js:b+"/assets/"+a+"/"+e+"/reservation/confirmation.js",template:g+"/confirmation/confirmation.html",
content:h+"/confirmation/confirmation"};break;case c.REVIEW:d=i?b+"/assets/"+a+"/all/reservation/confirmation/ie_style.css":b+"/assets/"+a+"/"+e+"/reservation/confirmation/style.css";f={css:d,js:b+"/assets/"+a+"/"+e+"/reservation/confirmation.js",template:g+"/review/reviewPage.html",content:h+"/review/reviewPage",checkElmId:c.REVIEW_TEMPLATE};break;case c.SEARCH:f={template:g+"/home/homePage.html",content:h+"/home/homePage",checkElmId:c.ITINERARY_TEMPLATE};break;case c.RESERVATION_LIST:d=i?b+"/assets/"+
a+"/all/reservation/home/ie_style.css":b+"/assets/"+a+"/"+e+"/reservation/home/style.css";f={css:d,template:g+"/lookup/res-lookup.html",content:h+"/lookup/res-lookup"};break;case c.CANCEL_CONFIRMATION:d=i?b+"/assets/"+a+"/all/reservation/cancellation/ie_style.css":b+"/assets/"+a+"/"+e+"/reservation/cancellation/style.css";f={css:d,js:b+"/assets/"+a+"/"+e+"/reservation/cancelConfirmation.js",template:g+"/cancel-confirmation/cancel-confirmation.html",content:h+"/cancel-confirmation/cancel-confirmation",
checkElmId:c.CANCEL_TEMPLATE};break;case c.CURRENCY_CONVERTER:f={css:b+"/assets/"+a+"/all/reservation/currency-converter/style.css",js:b+"/assets/"+a+"/reservation/currency-converter.js",template:g+"/currency-converter/currency-converter.html",content:h+"/currency-converter/currency-converter"}}return f}}}(htz,$,htz.res.config.ReservationConstants);"function"==typeof define&&define.amd&&define("res/res-resource-config",[],function(){return htz.web.res.config.ResourceConfig});
window.checkHertzNameSpace("htz.web.res.initiator");htz.web.res.initiator.ResInitiator=function(a,b,c){return{initiate:function(){c.configure({rotar:htz.routers.res.ReservationRotar,resourceConfig:htz.web.res.config.ResourceConfig});var d=new (Backbone.Router.extend(a));Backbone.history.start({root:a.getRoot()});b.configure({router:d})}}}(htz.res.config.RouteConfig,htz.utils.config.UtilConfig,htz.res.config.ReservationConfig);htz.web.res.initiator.ResInitiator.initiate();	  	
	                                                  
	                          
	           
	     
	      
	           
	
	
	 
	 
	
	 
	
	
	
	
	
	
	
	
	
     

       

	
	

	             
	      
	      

	
	
	                                                                
	                                                        
	                                                        
	                 
	  
	
	
	                  
	
	      
	     
	
	
	
    
	
	
	
    
	

	
	
	   


/* EOF */
