function mydeltaLinksTracking(a){try{var b=$("title").text(),c=b+": "+$(a).attr("id");MyDeltaOmnitureTracking.trackClickedLinks(c)}catch(d){}}function setErrorDefinition(a,b){try{var c={errorCode:a,linkName:b};MyDeltaOmnitureTracking.trackErrors(c)}catch(d){}}function getMQMLevel(a){return 25e3>a?mqmtier=SkymilesLevel.silver.value:5e4>a?mqmtier=SkymilesLevel.gold.value:75e3>a?mqmtier=SkymilesLevel.platinum.value:125e3>a?mqmtier=SkymilesLevel.diamond.value:a>=125e3&&(mqmtier=SkymilesLevel.diamondUp.value),mqmtier}function getMQSLevel(a){return 30>a?mqstier=SkymilesLevel.silver.value:60>a?mqstier=SkymilesLevel.gold.value:100>a?mqstier=SkymilesLevel.platinum.value:140>a?mqstier=SkymilesLevel.diamond.value:a>=140&&(mqstier=SkymilesLevel.diamondUp.value),mqstier}function adjustMyDeltaSummaryWidgetHeight(a){a?delta.navwidget.isDockedState()||$("#widget-mydelta").css("height","285px"):$("#myDeltaSummary_trip").size()>0&&(delta.navwidget.isDockedState()?($("#widget-mydelta").css("height",""),$("#widget-mydelta").css("min-height","415px")):($("#widget-mydelta").css("height",""),$("#widget-mydelta").css("min-height","350px")))}function initializeMyDeltaWidgetEvents(){""!=$("#umnrTrackerLink").prop("title")&&$(".umnrTrackMinorLink").jtooltip()}function stripedRect(a,b,c,d,e,f){f=f||{};var g=a.rect(b,c,d,e);g.attr({"stroke-width":"0"});for(var h=f.lineSpacing||10,i=f.angle||45,j=(90-i)*(Math.PI/180),k=h/Math.tan(j),l=b,m=c,n=b+d,o=c+e,p=b,q=c,r=[];n>l;)l+=h,q+=k,q>o&&(p+=h,q=o),l>n&&(m+=k,l=n),r=r.concat(["M",l,m,"L",p,q]);for(;o>m&&(m+=k,p+=h,p>n&&(q+=k,p=n),p>b&&o>q&&(q+=k,p=b),q>o&&(q=o),r=r.concat(["M",l,m,"L",p,q]),!(m+k>o)););var s=a.path(r),t=a.set();return t.push(g,s),t}function setWidgetGraphFlags(){widgetGraphData.loyaltyAccount.membershipStatusInfo.spendReqApplicableForCurrentYear&&!widgetGraphData.loyaltyAccount.membershipStatusInfo.internationalCustomer&&(widgetGraphData.showSpendRequirement=!0),widgetGraphData.loyaltyAccount.membershipStatusInfo.satisfiedCurrYearMileageCriteria&&(widgetGraphData.mileageReqChecked=!0),widgetGraphData.loyaltyAccount.membershipStatusInfo.satisfiedCurrYearSpendCriteria&&(widgetGraphData.spendReqChecked=!0)}function generateCardSpendRange(a,b,c){var d="";if(!widgetGraphData.loyaltyAccount.membershipStatusInfo.enrolledForCoBrandCard&&!c)return d="--",d.toString();if(b&&0==a)d="0";else if(1e3>a)d="0-1";else if(b&&a>=25e3)d="24-25";else if(a>=25e3)d="25";else{var e=parseInt(a)/1e3,f=parseInt(e)+1;b&&parseInt(a)%1e3==0&&(e--,f--),d=parseInt(e)+"-"+parseInt(f)}return d+="K",a>=25e3&&!b&&!c&&(d+="+"),d}function displayWidgetTracker(a){null==widgetGraphData&&$.get("/acctactvty/getTrackerData.action",function(b){widgetGraphData=b,null!=widgetGraphData&&"SUCCESS"==widgetGraphData.faultDO.status?(setWidgetGraphFlags(),barGraph.render(),updateTrackerValues(widgetGraphData.loyaltyAccount.membershipStatusInfo.futureYearTierDesc,widgetGraphData.loyaltyAccount.membershipStatusInfo.futureProgramYear)):($("#skymilestracker-section").css({display:"none"}),$("#miles_message").show()),a&&a()}).error(function(){handleTrackerError(a)})}function handleTrackerError(a){var b={responseText:"We're sorry. We can't show your medallion tracker right now. Please try again later."};$("#skymilestracker-section").html($("#deltaSummaryErrorTemplate").render(b)),$("#skymilestracker-section").css("margin-left","0px"),$("#skymilestracker-section").show(),a&&a()}function display2014Banner(){var a=((new Date).getFullYear(),$("#banner-canvas")),b=!1;b||a.hide()}function updateTrackerValues(a,b){$("#nextTrackerYear").html(b+" Status: "),"FF"==widgetGraphData.loyaltyAccount.membershipStatusInfo.futureYearTierCode?(a="SkyMiles Member",$("#nextTrackerLevel").unwrap(),$("#nextTrackerLevel").css("color","#333333")):a+=" Medallion",$("#nextTrackerLevel").html(a)}function isSameProgramAndFutureYear(){return null!=widgetGraphData.loyaltyAccount.membershipStatusInfo.nextProgramYear?!0:!1}function isDiamond(){return"DM"==widgetGraphData.loyaltyAccount.membershipStatusInfo.futureYearTierCode?!0:!1}function Exception(){this.javaClassName=null,this.message=null,this.cause=null,this.stackTrace=[]}function hideAllHelpWidgetfields(){for(var a=allneedHelpContactInfo.allDivName,b=a.length,c=0;b>c;c++)$("#"+a[c].divname).hide()}function showNeedHelpContactInfromation(a){var b=needHelpcontactinformation[a],c=b[0].contactid;$("#contactnum").html(""),$("#contactnum").load("/content/dam/delta-applications/util/NeedHelp.html #"+c)}function resetNeedHelpRadio(){var a=document.getElementsByName("isSkyMilesMember");if(null!=a)for(var b=0;b<a.length;b++)a[b].checked=!1}function setNeedHelpListValue(a,b){var c=a.val(),d=["<option value='none'>Select</option>"],e=needHelpdropdownList[c];if(void 0!=e){$("#"+b).html(d.join(""));for(var f=0;f<e.length;f++)$("#"+b).append("<option value='"+e[f].optionvalue+"'>"+e[f].optionlist+"</option>")}}function setSearchString(a){var b={searchString:a};jQuery.ajax({url:"/utils/searchSession_setSearchStringData",type:"POST",data:b,dataType:"json",success:function(){}})}function OciConstants(){counts=0,getCounts=function(){return counts},addCounts=function(){counts++}}function isNotNumberAndValidLength(a){var b=!1;return(/[^0-9]/.test(a)||a.length<10||a.length>16)&&(b=!0),b}function getCreditCardType(a){$("#oci_checkinCreditcardType").val(null!=a&&null!=a.card_type?a.card_type.code:null)}var delta=window.delta||{};if(delta.navwidget=function(a){function b(b){switch(b){case"booking":a("#widget-booking").on("tabsactivate","#book-tabs",function(){a("#widget-booking #book-tabs div.ui-tabs-panel").find("a").filter(":visible:last").blur(function(){DeltaUtils.exists(a("#nav-widget section.active").next("section"))&&a("#nav-widget section.active").next("section").children("h3").children("button").focus()}),a("#widget-booking").find("input,a").filter(":visible:last").blur(function(){DeltaUtils.exists(a("#nav-widget section.active").next("section"))&&a("#nav-widget section.active").next("section").children("h3").children("button").focus()});var c=a("#book-tabs li.ui-state-active a").attr("id"),d=0;"book-air-content-trigger"===c.toLowerCase()?(a("#book-air-content").attr("tabindex","0"),d=resizeWidget.getWidgetHeight(),delta.widgetnav.vacations.closeVacationsWidget()):"book-hotel-content-trigger"===c.toLowerCase()?(A(),HotelWidget.init(),d=resizeHotelWidget.getWidgetHeight(),delta.widgetnav.vacations.closeVacationsWidget()):"book-car-content-trigger"===c.toLowerCase()?(A(),CarWidget.init(),d=resizeCarWidget.getWidgetHeight(),delta.widgetnav.vacations.closeVacationsWidget()):"book-delta-vacations-content-trigger"===c.toLowerCase()&&(delta.widgetnav.vacations.init(),d=resizeVacationsWidget.getWidgetHeight()),d>0?("book-air-content-trigger"===c.toLowerCase()&&(a("#book-air-content").attr("tabindex","0"),d="auto",a("#widget-booking").css("height","auto")),a("#widget-booking").animate({height:"auto"},P,Q)):delta.navwidget.adjustWidgetHeight(b)})}}function c(b){var c=a("#widget-"+b),d=a("#widget-"+b).children(),e=c.css("visibility"),f=c.css("display");c.css("display","none"),c.css("visibility","hidden"),c.css("display","block");var g=0;if("booking"===b.toLowerCase()&&!I){var h=a("#book-tabs li.ui-state-active a").attr("id");"book-air-content-trigger"===h.toLowerCase()?g=resizeWidget.getWidgetHeight():"book-hotel-content-trigger"===h.toLowerCase()?g=resizeHotelWidget.getWidgetHeight():"book-car-content-trigger"===h.toLowerCase()?g=resizeCarWidget.getWidgetHeight():"book-delta-vacations-content-trigger"===h.toLowerCase()&&(g=resizeVacationsWidget.getWidgetHeight()),g="auto"}if(0===g){for(i=0,j=d.length;i<j;i++)"block"===a(d[i]).css("display")&&(g+=a(d[i]).innerHeight());g="auto"}return c.css("visibility",e),c.css("display",f),"booking"===b.toLowerCase()&&(g="auto"),c.css("height",g),g}function d(){if(!J)return!1;J=!1;delta.navwidget.closeWidgets(),D.find("#nav-widget-expander .minimized").show(),D.find("#nav-widget-expander .maximized").hide(),D.find("#nav-widget-container").animate({height:"auto"},200),D.find("section").animate({height:"auto",paddingTop:"0.667em"},200),D.find("figure").animate({width:"0",marginTop:"0",marginRight:"0"},200),D.find("figure img").animate({left:"-42px"},200)}function e(){y();var b=a(".widget-container-docked:visible"),c=F.filter(".active");a("#nav-widget-container").removeClass("expanded"),b.fadeOut(R,delta.navwidget.close),c.removeClass("active"),T=!1,b.length&&a.event.trigger({type:U.events.close,openWidget:b})}function f(){y();var b=D.find(".widget-container:visible"),c=F.filter(".active");b.fadeOut(R),c.removeClass("active"),c.attr("aria-expanded","false"),c.children().find("button").attr("aria-expanded","false"),c.animate({width:"15.58333em"},N,O,function(){K=!1}),J=!1,b.length&&a.event.trigger({type:U.events.close,openWidget:b})}function g(){var b;try{DeltaUtils.exists(loginData)&&null!=loginData?b=loginData:DeltaUtils.exists(tmpLoginData)&&null!=tmpLoginData&&(b=tmpLoginData)}catch(c){try{DeltaUtils.exists(tmpLoginData)&&null!=tmpLoginData&&(b=tmpLoginData)}catch(c){b=null}}if(this.isOpenByDefault)try{switch(selectedWidget){case"mydelta":case"booking":case"status":case"checkin":default:null!=b?b.loggedIn?(CustomerInfo.addRaphaelScript(),a("#nav-widget-mydelta h3").html("My Delta"),a("#nav-widget-mydelta small").html("Trips, Skymiles, Profile &amp; Receipts"),a("#widget-mydelta.widget-container").show(),a("#widget-mydelta.widget-container").offset({left:a("#widget-mydelta.widget-container").offset().left}),a("#widget-mydelta.widget-container").css({height:"auto"}),a("#nav-widget-mydelta").addClass("active"),a("#nav-widget-mydelta").css({width:"25.000em"}),delta.navwidget.initializeWidget("mydelta"),delta.navwidget.isWidgetInitialized.mydelta=!0):(a("#loginwidget").removeClass("hideMe"),a("#widget-booking.widget-container").show(),a("#widget-booking.widget-container").offset({left:a("#nav-widget-booking").offset().left}),a("#widget-booking.widget-container").css({height:"auto"}),a("#nav-widget-booking").addClass("active").attr("aria-expanded","true"),a("#nav-widget-booking button.widgetButton").attr("aria-expanded","true"),a("#nav-widget-booking").css({width:"25.000em"}),delta.navwidget.initializeWidget("booking"),delta.navwidget.isWidgetInitialized.booking=!0):(a("#loginwidget").removeClass("hideMe"),a("#widget-booking.widget-container").show(),a("#widget-booking.widget-container").offset({left:a("#nav-widget-booking").offset().left}),a("#widget-booking.widget-container").css({height:"auto"}),a("#nav-widget-booking").addClass("active"),a("#nav-widget-booking").css({width:"25.000em"}),delta.navwidget.initializeWidget("booking"),delta.navwidget.isWidgetInitialized.booking=!0)}}catch(c){a("#loginwidget").removeClass("hideMe"),a("#widget-booking.widget-container").show(),a("#widget-booking.widget-container").offset({left:a("#nav-widget-booking").offset().left}),a("#widget-booking.widget-container").css({height:"auto"}),a("#nav-widget-booking").addClass("active"),a("#nav-widget-booking").css({width:"25.000em"}),delta.navwidget.initializeWidget("booking"),delta.navwidget.isWidgetInitialized.booking=!0}a("#widget-booking #book-tabs div.ui-tabs-panel").find("a").filter(":visible:last").blur(function(){DeltaUtils.exists(a("#nav-widget section.active").next("section"))&&a("#nav-widget section.active").next("section").children("h3").children("button").focus()}),a("#widget-booking").find("input,a").filter(":visible:last").blur(function(){DeltaUtils.exists(a("#nav-widget section.active").next("section"))&&a("#nav-widget section.active").next("section").children("h3").children("button").focus()})}function h(){a("#irop-indicator").hide()}function k(){try{(DeltaUtils.exists(loginData)&&loginData.loggedIn||DeltaUtils.exists(tmpLoginData)&&tmpLoginData.loggedIn)&&delta.navwidget.showMyDelta()}catch(b){}{var c=D.find("h3");c.length}c.each(function(){var b=a(this).height();return b>28?(D.addClass("expanded"),void(L=!0)):void 0}),a("#nav-widget-user figure").css("marginRight","0");var d=new htmlDefinition({tag:"div",id:"nav-widget-content",stub:!0}),e=new htmlDefinition({tag:"div",id:"nav-widget-container",stub:!0});D.wrapInner(HTMLModeler.createOpenElem(d)),D.wrapInner(HTMLModeler.createOpenElem(e)),a('<div id="nav-widget-topper" />').prependTo(D)}function l(){D.hoverIntent({over:function(){delta.navwidget.open(),clearInterval(C)},out:function(){C=T?null:setTimeout(function(){delta.navwidget.close()},50)},timeout:500}),D.find("#nav-widget-expander").click(function(){J?delta.navwidget.close():delta.navwidget.open()})}function m(){F.bind("click",function(b){var c=a(b.target).closest("section");delta.navwidget.openWidget(c.attr("id").replace(G,""))}),a(".widget-container-docked .close").on("click",function(){delta.navwidget.close()}),a(window).bind("resize",function(){u()})}function n(){F.attr("aria-expanded","false"),F.bind("click",function(c){b(c),F.attr("aria-expanded","false"),a("#nav-widget section button.widgetButton").attr("aria-expanded","false"),a(this).hasClass("active")&&(a(this).attr("aria-expanded","true"),a(this).children().find("button.widgetButton").attr("aria-expanded","true")),a("section").removeClass("activeWidget")}),a("#nav-widget section button.widgetButton").bind("focus",function(){a(this).parents("section").addClass("activeWidget")}),a("#nav-widget section button.widgetButton").bind("blur",function(){var b=a(this).width();300!==b&&a(this).parents("section").removeClass("activeWidget")}),a("#nav-widget button.widgetButton").keydown(function(b){a(this).parents("section#nav-widget-checkin").length>0&&300!=a(this).parents("section").width()&&9==b.keyCode&&!b.shiftKey?a("#advisory a.nav.prev").length>0?a("#advisory a.nav.prev").focus():a("div.policy1 a").focus():a(this).parents("section").hasClass("active")&&a("#"+a(this).parents("section").attr("id").substring(4,a(this).parents("section").attr("id").length)).find("input,select,li.ui-tabs-active").filter(":visible:first").focus()}),a("#widget-booking").find("input,a").filter(":visible:last").blur(function(){DeltaUtils.exists(a("#nav-widget section.active").next("section"))&&a("#nav-widget section.active").next("section").children("h3").children("button").focus()});var b=function(b){var c=a(b.target).closest("section");c.hasClass("active")?delta.navwidget.closeWidgets():delta.navwidget.openWidget(c.attr("id").replace(G,""))};try{isHomePage&&DeltaUtils.exists(isHomePage)&&isHomePage&&DeltaUtils.exists(darkSiteState)&&"dark-site-state1"!=darkSiteState&&DeltaUtils.exists(darkSiteState)&&"dark-site-state2"!=darkSiteState&&DeltaUtils.exists(darkSiteState)&&"dark-site-state3"!=darkSiteState&&(delta.navwidget.isOpenByDefault=!0)}catch(c){}}function o(c){if("booking"==c){a("#book-tabs").tabs();try{"book-vacation"==selectedWidget&&(a("#book-tabs").tabs({active:3}),delta.widgetnav.vacations.init())}catch(d){}b(c),SimpleSearchWidget.init()}else if("checkin"==c)try{CheckinWidget.initialize()}catch(e){}else"mydelta"==c?CustomerInfo.isAuthenticated()||CustomerInfo.isLoggedIn()?MyDeltaSummaryWidget.initMyDeltaSummaryJSON():myTripsWidget.init():"status"==c&&FlightStatusWidget.init();delta.navwidget.isWidgetInitialized[c]=!0}function p(){return I}function q(){if(J)return!1;J=!0;var b=L?"71px":"51px";D.find("#nav-widget-expander .maximized").css({display:"inline",marginTop:"10px"}),D.find("#nav-widget-expander .minimized").hide(),a("#nav-widget-container").addClass("expanded").attr("aria-expanded","true"),D.find("#nav-widget-container").animate({height:"auto"},200),D.find("section").animate({height:b,paddingTop:"16px"},200),D.find("figure").animate({width:"3.500em",marginTop:"-3px",marginRight:"10px"},200),D.find("figure img").animate({left:"0"},200)}function r(b,c){x();var d=b;if("need-help"==b)d=b,b="help";else if("mydelta"==b)try{DeltaUtils.exists(CustomerInfo)&&(CustomerInfo.isAuthenticated()||CustomerInfo.isLoggedIn()||(b="mytrips",d="mydelta",myTripsWidget.init()))}catch(e){b="mytrips",d="mydelta",myTripsWidget.init()}if(K)return!1;K=!0,J||delta.navwidget.open(),c=c||function(){return!0},T=!0;var f=a("#widget-"+b),g=a("#"+G+d),h=a(".widget-container-docked:visible");if(M[b]||(o(b),1==M[b]),f.attr("id")==h.attr("id"))return K=!1,!1;var i=F.filter(".active");i.removeClass("active"),g.addClass("active"),f.css("z-index",100),"mydelta"!=b&&f.height(delta.navwidget.adjustWidgetHeight(b)),h.css("z-index",50),h.fadeOut(R),t(f,a("#"+G+d)),h.length&&a.event.trigger({type:U.events.close,openWidget:h}),f.slideDown("75",function(){try{w(b)}catch(a){}K=!1,c()})}function s(b,c){x();var d=b;if("mydelta"==b)try{DeltaUtils.exists(CustomerInfo)&&(CustomerInfo.isAuthenticated()||CustomerInfo.isLoggedIn()||(b="mytrips",myTripsWidget.init()))}catch(e){b="mytrips",d="mydelta",myTripsWidget.init()}if(K)return!1;K=!0,c=c||function(){return!0};var f=a("#widget-"+b),g=a("#"+G+d),h=D.find(".widget-container:visible");M[b]||(o(b),1==M[b]),delta.advisorywidget&&delta.advisorywidget.close(),J=!0,h.length&&a.event.trigger({type:U.events.close,openWidget:h}),a.Deferred(function(d){d.pipe(function(){var b=F.filter(".active");return b.removeClass("active"),g.addClass("active"),h.fadeOut(R),a.when(b.animate({width:"15.58333em"},N,O),g.animate({width:"25.000em"},N,O))}).pipe(function(){var d=g.position();return f.css({left:d.left+1,height:"auto",display:"block"}),setTimeout(function(){f.find("input,select,li.ui-tabs-active").filter(":visible:first").focus()},10),f.find("input,select,li.ui-tabs-active").filter(":visible:first").keypress(function(b){b.shiftKey&&9==b.keyCode&&(b.preventDefault(),DeltaUtils.exists(a("#nav-widget section.active").next("section"))&&a("#nav-widget section.active").next("section").children("h3").children("button").focus())}),f.find("input,a").filter(":visible:last").blur(function(){DeltaUtils.exists(a("#nav-widget section.active").next("section"))&&a("#nav-widget section.active").next("section").children("h3").children("button").focus()}),a("#widget-checkin").find("a").filter(":visible:last").blur(function(){a("#advisory a.nav.prev").length>0?a("#advisory a.nav.prev").focus():a("div.policy1 a").focus(),a("#widget-checkin").hide(),a("#nav-widget-checkin").removeClass("active").animate({width:"15.58333em"})}),a(".helpIcon").on("keydown click",function(b){var c;c=a(this).attr("id"),(13===b.keyCode||"click"===b.type)&&a("#aToolTip").is(":visible")&&a("#aToolTipCloseBtn").on("keydown",function(b){13===b.keyCode?(a(this).parent().hide(),a("#"+c).focus()):9===b.keyCode&&b.preventDefault()})}),K?f.animate({height:delta.navwidget.adjustWidgetHeight(b)},P,Q,function(){w(b),K=!1,c()}):!1})}).resolve()}function t(a,b){var c=b.offset(),d=D.find("#nav-widget-content").offset().left+960;if(c.left+312<d)a.css("left",c.left);else{var e=D.width()-(c.left+b.outerWidth());a.css("right",e)}}function u(){for(var a in S)try{t(S[a].obj,S[a].target)}catch(b){}}function v(a){E=a}function w(a){DeltaUtils.setPredictiveTextDefinition("checkin"!==a?null:CheckinWidget.predictiveTextDefinition)}function x(){a("html").on("click.navWidgetShowHide",function(b){!a(b.target).hasClass("savedHeader")&&!a(b.target).hasClass("recentHeader")&&!a(b.target).is("td,li")&&!a(b.target).closest('nav, li a, .deltaToolTipTheme, .widget-container-docked, #airportlookup_dropdown, .delta2UpCal, #airportLookupContent, #LayoutContainer #ContentContainer button[data-icon-right="ui-icon-carat-1-e"]').length>0&&delta.navwidget.closeWidgets()})}function y(){a("html").off("click.navWidgetShowHide")}function z(){a("#irop-indicator").show()}function A(){DeltaUtils.exists("#airportlookup_dropdown")&&a("#airportlookup_dropdown").is(":visible")&&(a("#airportlookup_dropdown").hide(),a(".activeTarget").removeClass("activeTarget"))}function B(){a("#nav-widget-mydelta h3").html("My Delta"),a("#nav-widget-mydelta small").html("Trips, Skymiles, Profile &amp; Receipts"),v("mydelta")}var C,D=a("#nav-widget"),E="booking",F=a("#nav-widget-mydelta, #nav-widget-booking, #nav-widget-status, #nav-widget-checkin, #nav-widget-need-help"),G="nav-widget-",H=!1,I=D.hasClass("docked"),J=!1,K=!1,L=!1,M={mydelta:!1,mytrips:!1,booking:!1,status:!1,checkin:!1,help:!1},N="228",O="easeInQuint",P="600",Q="easeOutExpo",R="100",S=[],T=!1,U={};return U.events={close:"nav-widget-close-event",open:"nav-widget-open-event"},U.init=function(){I?(k(),l(),m()):n()},I?(U.open=q,U.close=d,U.openWidget=r,U.closeWidgets=e,U.showIropIndicator=z,U.hideIropIndicator=h,U.addHelpNumber=addHelpNumber):(U.openWidget=s,U.closeWidgets=f),x(),A(),U.showMyDelta=B,U.adjustWidgetHeight=c,U.isDockedState=p,U.isWidgetInitialized=M,U.initializeWidget=o,U.forceOpen=g,U.isOpenByDefault=H,U}(jQuery),delta.navwidget.init(),function(a){a.fn.jtooltip=function(b){var c={};return settings=a.extend({},c,b),this.each(function(){var b=a(this),c=function(b,c){var d=a("#tooltip-container").dialog("widget"),e=a(".help-tooltip-pointer");e.length<=0?(d.after("<div class='help-tooltip-pointer'></div>"),e=a(".help-tooltip-pointer")):e.show();var f={my:"top",at:"center bottom-2",of:d},g={my:"bottom",at:"center top+2",of:d};c.element.top>c.target.top?(e.position(g),e.addClass("help-tooltip-pointer-up").removeClass("help-tooltip-pointer-down")):(e.position(f),e.addClass("help-tooltip-pointer-down").removeClass("help-tooltip-pointer-up"))};b.click(function(d){"A"==b.get(0).nodeName&&"#"==b.attr("href")&&d.preventDefault();var e=a("#tooltip-container"),f=a(this),g=f.data("head")?f.data("head"):f.attr("head"),h=f.data("title")?f.data("title"):f.attr("title");if(e.length<=0){var i=a("<div id='tooltip-container'><div class='content'>"+h+"</div></div>");i.insertAfter(b),e=a("#tooltip-container"),e.dialog({dialogClass:"help-tooltip",title:g,resizable:!1,draggable:!1,position:{my:"bottom-5%",at:"top",of:b,using:function(b,d){a(this).css(b),c(b,d)}},collision:"flipfit",minHeight:"auto",open:function(){var b=a("#tooltip-container").dialog("widget");b.focus()},focus:function(){},create:function(){var c=a("#tooltip-container").dialog("widget"),d=a("#tooltip-container");c.attr("tabindex",0),c.find(".ui-button:first").addClass("dialogue-close-button"),a(".dialogue-close-button").keydown(function(a){(a.shiftKey&&9==a.keyCode||9==a.keyCode)&&(a.preventDefault(),c.focus())}),a("body").mousedown(function(a){c.is(a.target)||c.find("*").is(a.target)||!d.dialog("isOpen")||(a.preventDefault(),d.dialog("close"),b.focus())})},close:function(){var b=a(".help-tooltip-pointer");b.hide()}})}else e.find(".content").html(h),e.dialog("option","position",{my:"bottom-5%",at:"top",of:b,using:function(b,d){a(this).css(b),c(b,d)}}),e.dialog("open"),e.dialog("option","title",g)})})}}(jQuery),null==dwr)var dwr={};if(null==dwr.engine&&(dwr.engine={}),null==DWREngine)var DWREngine=dwr.engine;if(null==SavedSearchDWR)var SavedSearchDWR={};SavedSearchDWR._path="/air-shopping/dwr",SavedSearchDWR.getSavedSearchList=function(a,b){dwr.engine._execute(SavedSearchDWR._path,"SavedSearchDWR","getSavedSearchList",a,b)};var month_names=new Array("Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"),RecentSavedSearch={savedSearchList:"",getSavedSearches:function(a){var b="",c="",d="",e="",f="",g="",h=($("#recentSavedFlag").html(),"");null===CustomerInfo.custData||SimpleSearchWidget.hasSavedSearchesInit?arguments.length>0?a():"":"undefined"!=typeof CustomerInfo.custData.customerID&&""!=CustomerInfo.custData.customerID?(h=CustomerInfo.custData.customerID,$("#savedsearch_ul").html('<div class="search_loading"></div>'),SavedSearchDWR.getSavedSearchList(h,{async:!0,callback:function(h){RecentSavedSearch.savedSearchList=h,$.each(h,function(a,h){return null==h?(b+="<li></li><li></li><li>error occured during data fetch</li><li></li><li></li>",$(".search_loading").remove(),$("#savedsearch_ul").html(b),0):void(0==h.length||(SimpleSearchWidget.hasSavedSearches=!0,d=h.tripType,e=h.numberOfPassengers,isReqUpgradeEnabled&&(f=h.isUpgradeable),c=h.origDestInfos,g=h.isRedeemMiles,$.each(c,function(a,c){return null==c?0:void(b=isReqUpgradeEnabled?b+"<li style='display:none; '>"+c.originCityCd+"-"+c.destinationCityCd+"-"+c.departureTime+"-"+c.returnTime+"-"+d+"-"+e+"-"+f+"-"+g+"</li><li>"+h.alias+"</li>":b+"<li style='display:none; '>"+c.originCityCd+"-"+c.destinationCityCd+"-"+c.departureTime+"-"+c.returnTime+"-"+d+"-"+e+"--"+g+"</li><li>"+h.alias+"</li>")}),$("#savedSearch").show()))}),$(".search_loading").remove(),$("#savedsearch_ul").html(b),$("#scroll_saved").tinyscrollbar_update(),SimpleSearchWidget.hasSavedSearchesInit=!0,a()},errorHandler:function(){SimpleSearchWidget.hasSavedSearchesInit=!0,a()}})):arguments.length>0?a():""},saveRecentSearch:function(a){var b=searchWidgetUtils.convertTripTypeForBAU($("#pol_widget_tripType").val());if("oneway"==b)var c=$("#air-shopping-widget-mainContent #originCity").val()+"~"+$("#air-shopping-widget-mainContent #destinationCity").val()+"~"+$("#air-shopping-widget-mainContent #departureDate").val()+"~Return Date~"+b+"~"+$("#air-shopping-widget-mainContent #paxCount").val()+"~"+$("#air-shopping-widget-mainContent #is_Flex_Search").val()+"~"+$("#air-shopping-widget-mainContent #is_award_travel").val();else var c=$("#air-shopping-widget-mainContent #originCity").val()+"~"+$("#air-shopping-widget-mainContent #destinationCity").val()+"~"+$("#air-shopping-widget-mainContent #departureDate").val()+"~"+$("#air-shopping-widget-mainContent #returnDate").val()+"~"+b+"~"+$("#air-shopping-widget-mainContent #paxCount").val()+"~"+$("#air-shopping-widget-mainContent #is_Flex_Search").val()+"~"+$("#air-shopping-widget-mainContent #is_award_travel").val();isIamTravellingEnabled&&(c+="~"+$("#air-shopping-widget-mainContent #isTraveling").attr("checked")),isReqUpgradeEnabled&&(c+="~"+$("#air-shopping-widget-mainContent #pol_widget_isRequestUpgrade").attr("checked"));RecentSavedSearch.getCookieContent(function(b){var d=b.split("*"),e=!0,f="";for(d.length>4&&(d.pop(),d.pop(),d.push("")),i=d.length-2;i>-1;i--)d[i].toLowerCase()==c.toLowerCase()?e=!1:f=d[i]+"*"+f;if(e){var g=c+"*"+f;saveSingleAttributeValuePair("SimpleSearchWidgetRecentSearches",g),setTimeout(function(){a()},100)}else a()})},loadRecentSearch:function(){RecentSavedSearch.getCookieContent(function(a){var b=a.split("*"),c="";for(i=0;i<b.length-1;i++){var d=b[i],e=d.split("~")[0],f=d.split("~")[1],g=new Date(d.split("~")[2]),h=d.split("~")[3],j=month_names[g.getMonth()]+" "+g.getDate();if("Return Date"!=h){var k=new Date(h);h=" - "+month_names[k.getMonth()]+" "+k.getDate()}else h="";null!=e&&-1==e.indexOf("undefined")&&null!=f&&-1==f.indexOf("undefined")&&-1==j.indexOf("undefined")&&-1==h.indexOf("undefined")&&-1==j.indexOf("NaN")&&-1==h.indexOf("NaN")&&(c=c+"<li class='recentInput' id='"+d+"' > "+e+" to "+f+", "+j+h+"</li>")}$("ul#recentSearches").html(c)})},init:function(a){var b=!1,c="";RecentSavedSearch.getCookieContent(function(d,e){null!=d&&""!=d&&(b=!0,c+="Recent"),SimpleSearchWidget.hasSavedSearches&&(b=!0,c+="Saved"),a(b,c,e)})},getCookieContent:function(a){SimpleSearchWidget.hasRecentSearches?a(SimpleSearchWidget.recentSearchesData,"from simpleSearchWidget.hasRecentSearches"):SimpleSearchWidget.hasRecentSearchesInit||loadSingleAttributeWithCallback("SimpleSearchWidgetRecentSearches",function(b){SimpleSearchWidget.hasRecentSearchesInit=!0,null!=b&&(SimpleSearchWidget.recentSearchesData=b,SimpleSearchWidget.hasRecentSearches=!0),null===CustomerInfo.custData?setTimeout(function(){RecentSavedSearch.custDataTimeoutCounter<RecentSavedSearch.custDataTimeout?null!==CustomerInfo.custData?RecentSavedSearch.getSavedSearches(function(){a(SimpleSearchWidget.recentSearchesData,"from simpleSearchWidget.recentSearchesData inside setTimeout")}):(RecentSavedSearch.custDataTimeoutCounter++,setTimeout(arguments.callee,100)):(CustomerInfo.custData="",CustomerInfo.custData.customerID="",RecentSavedSearch.getSavedSearches(function(){a(SimpleSearchWidget.recentSearchesData,"from simpleSearchWidget.recentSearchesData")}))},100):RecentSavedSearch.getSavedSearches(function(){a(SimpleSearchWidget.recentSearchesData,"from simpleSearchWidget.recentSearchesData")})})},custDataTimeout:function(){return delta.navwidget.isDockedState()?3:25},custDataTimeoutCounter:0};ErrorMessages={eC101605:{errMsg:"We're sorry. The passenger count you've entered exceed the limit.",errCode:"101605"},eC20128:{errMsg:"Please select at least one passenger.",errCode:"20128"},eC7090:{errMsg:"The number of passengers requested is not supported. Please select between 1 and 9 passengers.",errCode:"7090"},eC7076:{errMsg:"You cannot have the same departure and arrival city.",errCode:"7076"},eC1605:{errMsg:"Sorry, you have too many passengers.",errCode:"1605"},noDate:{errMsg:"Please enter a valid "},invalidFormatDate:{errMsg:"Please enter date in mm/dd/yyyy format."},futureDate:{errMsg:"Please choose a date no more than 331 days from today."},sameAirport:{errMsg:"Please enter different arrival and departure cities."},wrongAirport:{errMsg:"We're sorry. No cities or airport codes matched that entry. Please try again."},blankAirports:{errMsg:"Please enter valid 'FROM' and 'TO' locations."},blankDates:{errMsg:"Please enter valid Departure and Return dates."},clearErrorMsg:function(a){$(a).removeClass("spc_err_msg")}},jQuery.validator.messages.requiredFromCity="",jQuery.validator.classRuleSettings.requiredFromCity={requiredFromCity:!0},jQuery.validator.addMethod("requiredFromCity",function(a,b,c){return AirportValidation.isBlank()?(jQuery.validator.messages.requiredFromCity=ErrorMessages.blankAirports.errMsg,!1):"City or Airport"!=a&&""!=$.trim(a)&&3==a.length&&/^[a-z]+$/i.test(a)?AirportValidation.sameValueOrBlank(a,$(c[0]).val())?(jQuery.validator.messages.requiredFromCity=ErrorMessages.blankAirports.errMsg,!1):(jQuery.validator.messages.requiredFromCity="",!0):(jQuery.validator.messages.requiredFromCity=ErrorMessages.noDate.errMsg+" 'FROM' City or Airport code.",!1)},jQuery.validator.messages.requiredFromCity),jQuery.validator.messages.requiredToCity="",jQuery.validator.classRuleSettings.requiredToCity={requiredToCity:!0},jQuery.validator.addMethod("requiredToCity",function(a,b,c){return AirportValidation.isBlank()?(jQuery.validator.messages.requiredToCity=ErrorMessages.blankAirports.errMsg,!1):"City or Airport"!=a&&""!=$.trim(a)&&3==a.length&&/^[a-z]+$/i.test(a)?AirportValidation.sameValueOrBlank(a,$(c[0]).val())?(jQuery.validator.messages.requiredToCity=ErrorMessages.sameAirport.errMsg,!1):(jQuery.validator.messages.requiredToCity="",!0):(jQuery.validator.messages.requiredToCity=ErrorMessages.noDate.errMsg+" 'TO' City or Airport code.",!1)},jQuery.validator.messages.requiredToCity),jQuery.validator.messages.requiredStartDate="",jQuery.validator.classRuleSettings.requiredStartDate={requiredStartDate:!0},jQuery.validator.addMethod("requiredStartDate",function(a,b){var c=DateValidation.formatCheck(a),d=DateValidation.maxRangeCheck(a),e=DateValidation.minRangeCheck(a),f=DateValidation.returnCheck();return DateValidation.blankDateCheck()&&"oneWayHidden"!=$("#air-shopping-widget-mainContent #roundtripDateWrap").attr("class")?(jQuery.validator.messages.requiredStartDate=ErrorMessages.blankDates.errMsg,!1):"Depart Date"==a||""==$.trim(a)?(jQuery.validator.messages.requiredStartDate=ErrorMessages.noDate.errMsg+" Departure Date.",!1):c?(jQuery.validator.messages.requiredStartDate=$("div[for=returnDate]").text()!=ErrorMessages.invalidFormatDate.errMsg||$("div[for=returnDate]").text()==ErrorMessages.invalidFormatDate.errMsg&&"none"==$("div[for=returnDate]").css("display")?ErrorMessages.invalidFormatDate.errMsg:"",!1):d?(jQuery.validator.messages.requiredStartDate=ErrorMessages.futureDate.errMsg,!1):e?(jQuery.validator.messages.requiredStartDate=ErrorMessages.noDate.errMsg+" Departure Date.",!1):f?(jQuery.validator.messages.requiredStartDate=ErrorMessages.noDate.errMsg+" Departure Date.",$("#"+b.id).val(""),!1):(jQuery.validator.messages.requiredStartDate="",!0)},jQuery.validator.messages.requiredStartDate),jQuery.validator.messages.requiredReturnDate="",jQuery.validator.classRuleSettings.requiredReturnDate={requiredReturnDate:!0
},jQuery.validator.addMethod("requiredReturnDate",function(a,b){var c=DateValidation.formatCheck(a),d=DateValidation.maxRangeCheck(a),e=DateValidation.minRangeCheck(a),f=DateValidation.returnCheck();return DateValidation.blankDateCheck()?(jQuery.validator.messages.requiredReturnDate=ErrorMessages.blankDates.errMsg,!1):"Return Date"==a||""==$.trim(a)?(jQuery.validator.messages.requiredReturnDate=ErrorMessages.noDate.errMsg+" Return Date.",!1):c?(jQuery.validator.messages.requiredReturnDate=$("div[for=departureDate]").text()!=ErrorMessages.invalidFormatDate.errMsg||$("div[for=departureDate]").text()==ErrorMessages.invalidFormatDate.errMsg&&"none"==$("div[for=departureDate]").css("display")?ErrorMessages.invalidFormatDate.errMsg:"",!1):d?(jQuery.validator.messages.requiredReturnDate=ErrorMessages.futureDate.errMsg,!1):e?(jQuery.validator.messages.requiredReturnDate=ErrorMessages.noDate.errMsg+" Return Date.",!1):f?(jQuery.validator.messages.requiredReturnDate=ErrorMessages.noDate.errMsg+" Return Date.",$("#"+b.id).val(""),!1):(jQuery.validator.messages.requiredReturnDate="",!0)},jQuery.validator.messages.requiredReturnDate),jQuery.validator.messages.requiredPassengerCount="",jQuery.validator.classRuleSettings.requiredPassengerCount={requiredPassenger:!0},jQuery.validator.addMethod("requiredPassengerCount",function(a,b){return ErrorMessages.clearErrorMsg(b),""==$.trim(a)||"0"==a?(jQuery.validator.messages.requiredPassengerCount=ErrorMessages.eC20128.errMsg,!1):isNaN(a)?(jQuery.validator.messages.requiredPassengerCount=ErrorMessages.eC7090.errMsg,!1):$.trim(a)>9?(jQuery.validator.messages.requiredPassengerCount=ErrorMessages.eC101605.errMsg,!1):(jQuery.validator.messages.requiredPassengerCount="",!0)},jQuery.validator.messages.requiredPassengerCount);var AirportValidation={sameValueOrBlank:function(a,b){return a.toUpperCase()==b.toUpperCase()?!0:!1},isBlank:function(){var a=$("#air-shopping-widget-mainContent #originCity").val(),b=$("#air-shopping-widget-mainContent #destinationCity").val();return"City or Airport"!=a&&""!=$.trim(a)&&3==a.length&&/^[a-z]+$/i.test(a)||"City or Airport"!=b&&""!=$.trim(b)&&3==b.length&&/^[a-z]+$/i.test(b)?!1:!0}},DateValidation={maxDaysinFuture:331,todayDate:function(){var a=$("#serverDate").html().split("-");return new Date(a[0],a[1],a[2])},minDate:function(){return new Date(DateValidation.todayDate().getFullYear(),DateValidation.todayDate().getMonth(),DateValidation.todayDate().getDate())},maxDate:function(){return new Date(DateValidation.minDate().getTime()+24*DateValidation.maxDaysinFuture*60*60*1e3)},formatCheck:function(a){var b=/^\d{1,2}\/\d{1,2}\/\d{4}$/;if(b.test(a)){var c=a.split("/"),d=parseInt(c[1],10),e=parseInt(c[0],10),f=parseInt(c[2],10),g=new Date(f,e-1,d);return g.getFullYear()==f&&g.getMonth()==e-1&&g.getDate()==d?!1:!0}return!0},rangeCheck:function(a){var b=a.split("/"),c=parseInt(b[1],10),d=parseInt(b[0],10),e=parseInt(b[2],10),f=new Date(e,d-1,c);return f.getTime()<DateValidation.minDate().getTime()||f.getTime()>DateValidation.maxDate().getTime()?!0:!1},maxRangeCheck:function(a){var b=a.split("/"),c=parseInt(b[1],10),d=parseInt(b[0],10),e=parseInt(b[2],10),f=new Date(e,d-1,c);return f.getTime()>DateValidation.maxDate().getTime()?!0:!1},minRangeCheck:function(a){var b=a.split("/"),c=parseInt(b[1],10),d=parseInt(b[0],10),e=parseInt(b[2],10),f=new Date(e,d-1,c);return f.getTime()<DateValidation.minDate().getTime()?!0:!1},returnCheck:function(){var a=$("#departureDate").val().split("/"),b=$("#returnDate").val().split("/");if(DateValidation.formatCheck($("#air-shopping-widget-mainContent #departureDate").val())||DateValidation.formatCheck($("#air-shopping-widget-mainContent #returnDate").val()))return!1;var c=parseInt(a[1],10),d=parseInt(a[0],10),e=parseInt(a[2],10),f=new Date(e,d-1,c),g=parseInt(b[1],10),h=parseInt(b[0],10),i=parseInt(b[2],10),j=new Date(i,h-1,g);return f.getTime()>j.getTime()?!0:!1},formatDate:function(a){if(!this.isValidateDate(a))return a;var b=this.formatYear(a);return b},isValidateDate:function(a){var b=/^\d{1,2}(\-|\/|\.)\d{1,2}\1\d{2,4}$/;return b.test(a)?!0:!1},formatYear:function(a){var b,c=a;return b=a.substr(a.lastIndexOf("/")+1),2==b.length&&(b=parseInt(b)+2e3,c=""+a.substring(0,a.lastIndexOf("/")+1)+b),c},blankDateCheck:function(){var a=$("#air-shopping-widget-mainContent #departureDate").val(),b=$("#air-shopping-widget-mainContent #returnDate").val();return"Depart Date"!=a&&""!=$.trim(a)||"Return Date"!=b&&""!=$.trim(b)?!1:!0}},validateFlightSearchForm={skipflex:!0,blockForm:!1,formValidate:function(){$("[validateThisField]").attr("validateThisField",!1),$("[validateThisField=false]").parent().not(":hidden").each(function(){$("[validateThisField=false]",$(this)).attr("validateThisField",!0)}),$("form#flightSearchForm").validate({errorClass:"spc_err_msg",errorElement:"div",onkeyup:function(a){if("departureDate"===a.id||"returnDate"===a.id){var b=a.value;null!=b&&null!==b.match(/^\d{2}\/$/)&&(b=a.value.split("/")[0],12>=b&&b>=1||($(a).valid(),a.value=""))}},onfocusout:!1,submitHandler:function(a){validateFlightSearchForm.blockForm||(searchWidgetUtils.setRecentSearch&&$("#findFlightsSubmit").attr("disabled","disabled"),$("#air-shopping-widget-mainContent #originCity").val($("#air-shopping-widget-mainContent #originCity").val().toUpperCase()),$("#air-shopping-widget-mainContent #destinationCity").val($("#air-shopping-widget-mainContent #destinationCity").val().toUpperCase()),"true"==$("#flightSearchForm #is_Flex_Search").val()&&$("#flightSearchForm #datesFlexible").val("true"),"true"==$("#flightSearchForm #is_award_travel").val()&&$("#flightSearchForm #awardTravel").val("true"),SimpleSearchWidget.isMoreOptionsSearch||("true"==$("#air-shopping-widget-mainContent #is_Flex_Search").val()?($("#flightSearchForm #datesFlexible").val("true"),$("#flightSearchForm").attr("action",airShoppingDefaultHost+"/air-shopping/flexDates.action")):"true"==$("#flightSearchForm #is_award_travel").val()&&AwardSearch.submitAwardSearch()),searchWidgetUtils.setRecentSearch&&!SimpleSearchWidget.isMoreOptionsSearch?RecentSavedSearch.saveRecentSearch(function(){a.submit(function(){validateFlightSearchForm.blockForm=!0}),$("#findFlightsSubmit").attr("disabled","disabled")}):a.submit(function(){validateFlightSearchForm.blockForm=!0}))},ignore:"[validateThisField!=true]:hidden",rules:{originCity:{requiredFromCity:['input[name="destinationCity"]']},destinationCity:{requiredToCity:['input[name="originCity"]']},departureDate:{requiredStartDate:!0,maxlength:!1},returnDate:{requiredReturnDate:!0,maxlength:!1},paxCount:{requiredPassengerCount:!0,maxlength:!1}}})}};$(document).ready(function(){$("#findFlightsSubmit").removeAttr("disabled"),$("#book-air-content-trigger, #book-hotel-content-trigger, #book-car-content-trigger, #book-delta-vacations-content-trigger").removeAttr("role")}),function(a){function b(b,c){function d(a){return o.ratio>=1||(v.now=Math.min(q[c.axis]-r[c.axis],Math.max(0,v.start+((s?a.pageX:a.pageY)-w.start))),k=v.now*p.ratio,o.obj.css(t,-k),r.obj.css(t,v.now)),!1}function e(){return a(document).unbind("mousemove",d),a(document).unbind("mouseup",e),r.obj.unbind("mouseup",e),document.ontouchmove=r.obj[0].ontouchend=document.ontouchend=null,!1}function f(b){if(!(o.ratio>=1)){var b=b||window.event,d=b.wheelDelta?b.wheelDelta/120:-b.detail/3;k-=d*c.wheel,k=Math.min(o[c.axis]-n[c.axis],Math.max(0,k)),r.obj.css(t,k/p.ratio),o.obj.css(t,-k),b=a.event.fix(b),b.preventDefault()}}function g(b){w.start=s?b.pageX:b.pageY;var c=parseInt(r.obj.css(t));return v.start="auto"==c?0:c,a(document).bind("mousemove",d),document.ontouchmove=function(b){a(document).unbind("mousemove"),d(b.touches[0])},a(document).bind("mouseup",e),r.obj.bind("mouseup",e),r.obj[0].ontouchend=document.ontouchend=function(b){a(document).unbind("mouseup"),r.obj.unbind("mouseup"),e(b.touches[0])},!1}function h(){r.obj.bind("mousedown",g),r.obj[0].ontouchstart=function(a){return a.preventDefault(),r.obj.unbind("mousedown"),g(a.touches[0]),!1},q.obj.bind("mouseup",d),c.scroll&&this.addEventListener?(m[0].addEventListener("DOMMouseScroll",f,!1),m[0].addEventListener("mousewheel",f,!1)):c.scroll&&(m[0].onmousewheel=f)}function i(){r.obj.css(t,k/p.ratio),o.obj.css(t,-k),w.start=r.obj.offset()[t];var a=u.toLowerCase();p.obj.css(a,q[c.axis]),q.obj.css(a,q[c.axis]),r.obj.css(a,r[c.axis])}function j(){return l.update(),h(),l}var k,l=this,m=b,n={obj:a(".viewport",b)},o={obj:a(".overview",b)},p={obj:a(".scrollbar",b)},q={obj:a(".track",p.obj)},r={obj:a(".thumb",p.obj)},s="x"==c.axis,t=s?"left":"top",u=s?"Width":"Height",v={start:0,now:0},w={};return this.update=function(a){n[c.axis]=n.obj[0]["offset"+u],o[c.axis]=o.obj[0]["scroll"+u],o.ratio=n[c.axis]/o[c.axis],p.obj.toggleClass("disable",o.ratio>=1),q[c.axis]="auto"==c.size?n[c.axis]:c.size,r[c.axis]=Math.min(q[c.axis],Math.max(0,"auto"==c.sizethumb?q[c.axis]*o.ratio:c.sizethumb)),p.ratio="auto"==c.sizethumb?o[c.axis]/q[c.axis]:(o[c.axis]-n[c.axis])/(q[c.axis]-r[c.axis]),k="relative"==a&&o.ratio<=1?Math.min(o[c.axis]-n[c.axis],Math.max(0,k)):0,k="bottom"==a&&o.ratio<=1?o[c.axis]-n[c.axis]:isNaN(parseInt(a))?k:parseInt(a),i()},j()}a.tiny=a.tiny||{},a.tiny.scrollbar={options:{axis:"y",wheel:40,scroll:!0,size:"auto",sizethumb:"auto"}},a.fn.tinyscrollbar=function(c){var c=a.extend({},a.tiny.scrollbar.options,c);return this.each(function(){a(this).data("tsb",new b(a(this),c))}),this},a.fn.tinyscrollbar_update=function(b){return a(this).data("tsb").update(b)}}(jQuery);var SimpleSearchWidget=window.SimpleSearchWidget||{};SimpleSearchWidget={init:function(){if(this.needsInit){this.needsInit=!1,$("#air-shopping-widget-mainContent #originCity").length>0&&$("#air-shopping-widget-mainContent #destinationCity").length>0&&(DeltaUtils.addAutocomplete("#air-shopping-widget-mainContent #originCity","airportCode"),DeltaUtils.addAutocomplete("#air-shopping-widget-mainContent #destinationCity","airportCode"),$("#widgetTripContainer").buttonset(),$("#widgetTravelDateContainer").buttonset(),$("#widgetPriceContainer").buttonset()),$(document).on("click.searchFlightResults","#air-shopping-widget-mainContent #depDateCalIcon",function(){$(a).trigger("focus")}),$(document).on("click.searchFlightResults","#air-shopping-widget-mainContent #retDateCalIcon",function(){$(b).trigger("focus")}),$("body").on("click",".ui-menu-item",function(){$("#lang_container").hide()}),$("#air-shopping-widget-mainContent #originCity, #air-shopping-widget-mainContent #destinationCity").on("focusout",function(){$("#lang_container").hide()});var a=$("#air-shopping-widget-mainContent #departureDate"),b=$("#air-shopping-widget-mainContent #returnDate"),c="en",d="US",e=CountryLanguageController.getLanguageCode(),f=CountryLanguageController.getCountryCode();DeltaUtils.exists(e)&&""!=e?c=e:"",DeltaUtils.exists(f)&&""!=f?d=f.toUpperCase():"";{var g=window.location;g.protocol,g.host}delta.calendar.globalConfiguration(),delta.calendar.create({calendarElement:$(".airShoppingDateFieldWrap"),daysInFutureToShow:331,daysInPastToShow:0,startDateTitle:"Depart Date",endDateTitle:"Return Date",showDropDown:!0}),SearchWidget.resetFields();var h=window.location.host;destAirportLookup=new AirportLookup({targetInp:"#air-shopping-widget-mainContent #destinationCity",trigger:"#air-shopping-widget-mainContent #destCityLookup",displayTitle:"Arriving Airport",serverUrl:h}),orgAirportLookup=new AirportLookup({targetInp:"#air-shopping-widget-mainContent #originCity",trigger:"#air-shopping-widget-mainContent #srcCityLookup",displayTitle:"Departing Airport",serverUrl:h}),this.getCustData(),SimpleSearchWidget.loginSessionDataFound&&1==SimpleSearchWidget.custData.loggedIn&&"1"==SimpleSearchWidget.custData.medallionMbrInd&&($("#pol_widget_isRequestUpgrade").attr("checked","checked"),$("#air-shopping-widget-mainContent .request-upgrade-content").removeClass("hideDisplay")),$(document).on("click.searchFlightResults","#book_award_checkbox",function(){SimpleSearchWidget.processFieldsForAwardCheckbox("true")}),isIamTravellingEnabled&&$("#isTraveling").on("click",function(){SimpleSearchWidget.checkedTravelling()});try{$(document).on("click.searchFlightResults","#air-shopping-widget button,#air-shopping-widget input, #air-shopping-widget #recentSavedCont, #air-shopping-widget #recentSavedBox",function(){resizeWidget.afterValidation()}),$(document).on("blur.searchFlightResults","#air-shopping-widget input",function(){resizeWidget.afterValidation()}),$(document).on("click.searchFlightResults","#air-shopping-widget #findFlightsSubmit",function(){resizeWidget.afterValidation(),searchWidgetUtils.setHiddenFields(),$("form#flightSearchForm").submit()}),$("#book-hotel-content-trigger, #book-car-content-trigger").on("click.searchFlightResults",function(){$("#recentSavedBox").is(":visible")&&($("#recentSavedBox").slideUp(50),$("#recentSearchArrow").css({"border-bottom-color":"#acadad","background-color":"transparent"}))}),$("#inputwarp_source_city,#inputwarp_destination_city, #paxCount, .pass-countArrow-wrap, #air-shopping-widget-mainContent input[type='checkbox'], #air-shopping-widget-mainContent #recentSearchArrow, #air-shopping-widget-mainContent #findFlightsSubmit").on("click.searchFlightResults",function(){$(".delta2UpCal").is(":visible")&&delta.calendar.calMgr.closeAll()})}catch(i){}DeltaUtils.setPlaceholderText("#air-shopping-widget-mainContent input[placeholder]"),validateFlightSearchForm.formValidate(),delta.navwidget.isDockedState()&&$("#pol_widget_checkbox_div").addClass("pad-top10"),RecentSavedSearch.init(function(a,b,c){var d=$.trim($("#recentSavedFlag").html());$("#recentSavedFlag").html(d),a?($("#recentSavedFlag").html(b),SimpleSearchWidget.recentSearchHeight=30,SearchWidget.showSearch("callback from "+c)):SimpleSearchWidget.recentSearchHeight=0,SimpleSearchWidget.processFieldsForAwardCheckbox("none")})}},needsInit:!0,custData:{},getCustData:function(){return"object"==typeof CustomerInfo&&null!==CustomerInfo.custData&&CustomerInfo.custData.loggedIn===!0?(SimpleSearchWidget.loginSessionDataFound=!0,SimpleSearchWidget.custData=CustomerInfo.custData,!0):"object"==typeof loginData&&null!==loginData&&loginData.loggedIn===!0?(SimpleSearchWidget.loginSessionDataFound=!0,SimpleSearchWidget.custData=loginData,!0):"object"==typeof tmpLoginData&&null!==tmpLoginData&&tmpLoginData.loggedIn===!0?(SimpleSearchWidget.loginSessionDataFound=!0,SimpleSearchWidget.custData=tmpLoginData,!0):!1},hasRecentSearches:!1,recentSearchHeight:30,hasRecentSearchesInit:!1,recentSearchesData:"",hasSavedSearches:!1,hasSavedSearchesInit:!1,savedSearchesData:"",documentReadyCalled:!1,currentCalendarFocus:"",isMoreOptionsSearch:!1,loginSessionDataFound:!1,processFieldsForAwardCheckbox:function(a){this.getCustData(),"true"==a?($("#cashBtn,#milesBtn").removeClass("trip-selected"),$("#air-shopping-widget-mainContent #is_award_travel").val("true"),$("#air-shopping-widget-mainContent #milesBtn").addClass("trip-selected"),$("#air-shopping-widget-mainContent #cashBtn").removeClass("ui-state-active"),$("#air-shopping-widget-mainContent #milesBtn").addClass("ui-state-active"),SimpleSearchWidget.loginSessionDataFound&&(1==SimpleSearchWidget.custData.loggedIn&&("FO"==SimpleSearchWidget.custData.membershipLevel&&"1"==SimpleSearchWidget.custData.medallionMbrInd||"FF"==SimpleSearchWidget.custData.membershipLevel)?(isIamTravellingEnabled&&($("#air-shopping-widget-mainContent #iam_travelling_index").show(),$("#air-shopping-widget-mainContent .imtraveling_search-left-cell").css({visibility:"visible"}),$("#air-shopping-widget-mainContent #isTraveling").prop("checked",!0)),isReqUpgradeEnabled&&($("#pol_widget_isRequestUpgrade").removeAttr("checked"),$("#air-shopping-widget-mainContent .request-upgrade-content").hide())):1==SimpleSearchWidget.custData.loggedIn&&("FO"!=SimpleSearchWidget.custData.membershipLevel&&"1"==SimpleSearchWidget.custData.medallionMbrInd||1==SimpleSearchWidget.custData.pwmMbr)&&(isIamTravellingEnabled&&($("#air-shopping-widget-mainContent #iam_travelling_index").show(),$("#air-shopping-widget-mainContent .imtraveling_search-left-cell").css({visibility:"visible"}),$("#air-shopping-widget-mainContent #isTraveling").prop("checked",!0)),SimpleSearchWidget.showRequestUpgrade(),delta.navwidget.adjustWidgetHeight("booking")))):"false"==a&&($("#cashBtn,#milesBtn").removeClass("trip-selected"),$("#air-shopping-widget-mainContent #is_award_travel").val("false"),$("#air-shopping-widget-mainContent #cashBtn").addClass("trip-selected"),$("#air-shopping-widget-mainContent #milesBtn").removeClass("ui-state-active"),$("#air-shopping-widget-mainContent #cashBtn").addClass("ui-state-active"),SimpleSearchWidget.loginSessionDataFound&&(isIamTravellingEnabled&&($("#air-shopping-widget-mainContent #isTraveling").prop("checked",!1),$("#air-shopping-widget-mainContent #iam_travelling_index").show(),$("#air-shopping-widget-mainContent .imtraveling_search-left-cell").css({visibility:"hidden"})),SimpleSearchWidget.showRequestUpgrade(),delta.navwidget.adjustWidgetHeight("booking")))},checkedTravelling:function(){this.getCustData(),1==SimpleSearchWidget.custData.loggedIn&&"FO"!=SimpleSearchWidget.custData.membershipLevel&&"1"==SimpleSearchWidget.custData.medallionMbrInd&&isReqUpgradeEnabled&&(SimpleSearchWidget.isCheckedTravelling()?($("#pol_widget_isRequestUpgrade").attr("checked","checked"),$("#air-shopping-widget-mainContent .request-upgrade-content").show()):($("#pol_widget_isRequestUpgrade").removeAttr("checked"),$("#air-shopping-widget-mainContent .request-upgrade-content").hide()),delta.navwidget.adjustWidgetHeight("booking"))},isCheckedTravelling:function(){return $("#air-shopping-widget-mainContent #isTraveling").is(":checked")},isRequestUpgradeShow:function(){return $("#air-shopping-widget-mainContent .request-upgrade-content").hasClass("hideDisplay")},showRequestUpgrade:function(){isReqUpgradeEnabled&&!SimpleSearchWidget.isRequestUpgradeShow()&&($("#air-shopping-widget-mainContent #iam_travelling_index").show(),$("#pol_widget_isRequestUpgrade").prop("checked",!0),$("#air-shopping-widget-mainContent .request-upgrade-content").show())}},$(function(){$("body").append($("#searchWidgetpopupContent").html()),$("#searchWidgetpopupContent").html(" ");$("#air-shopping-widget-mainContent #departureDate, #air-shopping-widget-mainContent #returnDate").on({"keyup.searchFlightResults":function(a){var b=$(this).val();a.keyCode>47&&a.keyCode<58||a.keyCode>95&&a.keyCode<106?null!==b.match(/^\d{2}$/)?$(this).val(b+"/"):(null!==b.match(/^\d{2}\/\d{2}$/)||null!==b.match(/^\d{1}\/\d{2}$/))&&$(this).val(b+"/"):191==a.keyCode?(b=b.replace("//","/"),$(this).val(b)):37==a.keyCode||39==a.keyCode||36==a.keyCode||35==a.keyCode||9==a.keyCode||8==a.keyCode||46==a.keyCode||16==a.keyCode||(b=b.replace(/[^0-9\/]/g,""),$(this).val(b))},"focusout.searchFlightResults":function(){var a=$(this).val();if(a=DateValidation.formatDate($(this).val()),$(this).val(a),!DateValidation.formatCheck(a)&&!DateValidation.rangeCheck(a)){var b=a.split("/"),c=2==b[0].length?b[0]:"0"+b[0],d=2==b[1].length?b[1]:"0"+b[1],e=b[2];a=c+"/"+d+"/"+e,$(this).val(c+"/"+d+"/"+e)}}}),$(document).off("click.searchFlightResults",".recent-search-arrow").on("click.searchFlightResults",".recent-search-arrow",function(){if("none"==$("#recentSavedBox").css("display")){RecentSavedSearch.loadRecentSearch(),null!==SimpleSearchWidget.custData&&null!==SimpleSearchWidget.custData.customerID&&""!=SimpleSearchWidget.custData.customerID&&"undefined"!==SimpleSearchWidget.custData.customerID&&RecentSavedSearch.getSavedSearches(),SearchWidget.hidePopups();var a=$(".recent-saved-search").offset();$("#recentSavedBox").css({left:a.left,top:a.top+24}),$("#recentSavedBox").slideDown(300,function(){$("#scroll_saved").tinyscrollbar_update()}),$("#recentSearchArrow").css({"border-bottom-color":"#fff","background-color":"#fff"}),$(window).scroll(function(){SearchWidget.hideSearchDiv()})}else $("#recentSavedBox").slideUp(300),$("#recentSearchArrow").css({"border-bottom-color":"#acadad","background-color":"transparent"})}),$("#savedsearch_ul").on("click.searchFlightResults","li",function(){var a=$(this).prev().text(),b=a.split("-")[0],c=a.split("-")[1],d=(a.split("-")[2],a.split("-")[3],a.split("-")[4]),e=a.split("-")[5],f=(a.split("-")[6],a.split("-")[7]),g=searchWidgetUtils.convertTripTypeForPol(d);if($("#air-shopping-widget-mainContent #returnDate").show(),SearchWidget.hideSearchDiv(),$("#air-shopping-widget-mainContent #originCity").val(b),$("#air-shopping-widget-mainContent #destinationCity").val(c),"null"!=e&&""!=e&&"undefined"!=e&&$("#air-shopping-widget-mainContent #paxCount").val(e),"null"!=g&&""!=g&&"undefined"!=g&&($("#pol_widget_tripType").val(g),"ROUND_TRIP"==g?($("#air-shopping-widget-mainContent #roundTripBtn,#air-shopping-widget-mainContent #oneWayBtn").removeClass("trip-selected"),$("#air-shopping-widget-mainContent #roundTripBtn").addClass("trip-selected"),$("#air-shopping-widget-mainContent #roundtripDateWrap").removeClass("oneWayHidden"),$("#air-shopping-widget-mainContent #retDateCalIcon").parent().show(),$("#air-shopping-widget-mainContent #lblRetDate").show()):"ONE_WAY"==g&&($("#air-shopping-widget-mainContent #roundTripBtn,#air-shopping-widget-mainContent #oneWayBtn").removeClass("trip-selected"),$("#air-shopping-widget-mainContent #oneWayBtn").addClass("trip-selected"),$("#air-shopping-widget-mainContent #returnDate").hide(),$("#air-shopping-widget-mainContent #roundtrip_cal_icon").hide(),$("#air-shopping-widget-mainContent #roundtripDateWrap").addClass("oneWayHidden"),$("#air-shopping-widget-mainContent #retDateCalIcon").parent().hide(),$("#air-shopping-widget-mainContent #lblRetDate").hide())),SimpleSearchWidget.processFieldsForAwardCheckbox("true"==f||"checked"==f?"true":"false"),!DeltaUtils.supportsPlaceholderAttr()){var h="#air-shopping-widget-mainContent input[placeholder]",i=$(h);i.each(function(){$(this).val()!=$(this).attr("placeholder")&&$(this).removeClass("placeholder")})}$("form#flightSearchForm").validate().resetForm(),resizeWidget.afterValidation()}),$("ul.selList").on("click.searchFlightResults","li",function(){$(this).parent().children().removeClass("clickedCountry"),$(this).addClass("clickedCountry")}),$(document).on("click.searchFlightResults","#baseContainer_Upper , body",function(a){"recentSearchArrow"==$(a.target).attr("id")||$("#recentSavedBox").is(":hidden")||"recentSavedBox"!=$(a.target).parents().filter("div#recentSavedBox").attr("id")&&SearchWidget.hideSearchDiv()}),$(document).on("keydown click","#air-shopping-widget-mainContent #roundTripRadioBtn,#air-shopping-widget-mainContent #oneWayRadioBtn, #air-shopping-widget-mainContent #roundTripBtn,#air-shopping-widget-mainContent #oneWayBtn",function(a){if(40===a.which||39===a.which||38===a.which||37===a.which||"click"===a.type){if($("#air-shopping-widget-mainContent #roundTripBtn,#air-shopping-widget-mainContent #oneWayBtn").removeClass("trip-selected"),$(this).addClass("trip-selected"),"oneWayBtn"==$(this).attr("id")||"oneWayRadioBtn"==$(this).attr("id")?($(".delta2UpCal").is(":visible")&&$("#air-shopping-widget-mainContent #returnDate").hasClass("selectedDateInput")&&delta.deltaPolCalendarMgr.closeAll(),$("#air-shopping-widget-mainContent #roundtripDateWrap").addClass("oneWayHidden"),$("#air-shopping-widget-mainContent #returnDate").hide(),$("#air-shopping-widget-mainContent #retDateCalIcon").parent().hide(),$("#air-shopping-widget-mainContent #lblRetDate").hide(),$("#pol_widget_tripType").val("ONE_WAY")):($("#air-shopping-widget-mainContent #roundtripDateWrap").removeClass("oneWayHidden"),$("#air-shopping-widget-mainContent #returnDate").show(),$("#air-shopping-widget-mainContent #retDateCalIcon").parent().show(),$("#air-shopping-widget-mainContent #lblRetDate").show(),$("#pol_widget_tripType").val("ROUND_TRIP")),!DeltaUtils.supportsPlaceholderAttr()){var b="#air-shopping-widget-mainContent input[placeholder]",c=$(b);c.each(function(){$(this).val()!=$(this).attr("placeholder")&&$(this).removeClass("placeholder")})}$("form#flightSearchForm").validate().resetForm()}}),$(document).on("keydown click","#air-shopping-widget-mainContent #cashRadioBtn,#air-shopping-widget-mainContent #milesRadinBtn,#air-shopping-widget-mainContent #cashBtn,#air-shopping-widget-mainContent #milesBtn",function(a){(40===a.which||39===a.which||38===a.which||37===a.which||"click"===a.type)&&SimpleSearchWidget.processFieldsForAwardCheckbox("cashBtn"==$(this).attr("id")||"cashRadioBtn"==$(this).attr("id")?"false":"true")}),$(document).on("keydown click","#air-shopping-widget-mainContent #exactDaysRadioBtn,#air-shopping-widget-mainContent #flexDaysRadioBtn, #air-shopping-widget-mainContent #exactDaysBtn, #air-shopping-widget-mainContent #flexDaysBtn",function(a){(40===a.which||39===a.which||38===a.which||37===a.which||"click"===a.type)&&($("#air-shopping-widget-mainContent #exactDaysBtn,#air-shopping-widget-mainContent #flexDaysBtn").removeClass("trip-selected"),$(this).addClass("trip-selected"),$("#is_Flex_Search").val("exactDaysBtn"==$(this).attr("id")||"exactDaysRadioBtn"==$(this).attr("id")?"false":"true"))}),$(document).on("click.searchFlightResults","#close_image",function(){$("#originCity").removeClass("inputWrap_blue_border"),$("#destinationCity").removeClass("inputWrap_blue_border")}),$("#scroll_country, #scroll_airport, #scroll_stateProvince, #scroll_stateProvinceAirport, #scroll_alphabaticalAirport, #scroll_saved").tinyscrollbar({sizethumb:17}),$(document).on("click.searchFlightResults","ul#recentSearches li",function(){resizeWidget.afterValidation()}),$(document).on("click.searchFlightResults","li.recentInput",function(){depDate=$(this).attr("id").split("~")[2],retDate=$(this).attr("id").split("~")[3],$("#air-shopping-widget-mainContent #originCity").val($(this).attr("id").split("~")[0]).removeClass("greyColorTxt"),$("#air-shopping-widget-mainContent #destinationCity").val($(this).attr("id").split("~")[1]).removeClass("greyColorTxt"),$("#air-shopping-widget-mainContent #departureDate").val($(this).attr("id").split("~")[2]).removeClass("greyColorTxt"),$("#air-shopping-widget-mainContent #returnDate").val($(this).attr("id").split("~")[3]).removeClass("greyColorTxt");var a=$(this).attr("id").split("~")[5];$("#air-shopping-widget-mainContent #paxCount").val(a);var b=$(this).attr("id").split("~")[4],c=searchWidgetUtils.convertTripTypeForPol(b);$("#pol_widget_tripType").val(c),"ROUND_TRIP"==c?($("#air-shopping-widget-mainContent #roundTripBtn,#air-shopping-widget-mainContent #oneWayBtn").removeClass("trip-selected"),$("#air-shopping-widget-mainContent #roundTripBtn").addClass("trip-selected"),$("#air-shopping-widget-mainContent #roundtripDateWrap").removeClass("oneWayHidden"),$("#air-shopping-widget-mainContent #returnDate").show(),$("#air-shopping-widget-mainContent #retDateCalIcon").parent().show()):"ONE_WAY"==c&&($("#air-shopping-widget-mainContent #roundTripBtn,#air-shopping-widget-mainContent #oneWayBtn").removeClass("trip-selected"),$("#air-shopping-widget-mainContent #oneWayBtn").addClass("trip-selected"),$("#air-shopping-widget-mainContent #roundtripDateWrap").addClass("oneWayHidden"),$("#air-shopping-widget-mainContent #returnDate").hide(),$("#air-shopping-widget-mainContent #retDateCalIcon").parent().hide()),$("#air-shopping-widget-mainContent #isDatesFlexible").attr("checked",!1);var d=$(this).attr("id").split("~")[6];$("#air-shopping-widget-mainContent #isDatesFlexible").val(d),$("#air-shopping-widget-mainContent #exactDaysBtn,#air-shopping-widget-mainContent #flexDaysBtn").removeClass("trip-selected"),"checked"==d||"true"==d?($("#air-shopping-widget-mainContent #flexDaysBtn").addClass("trip-selected"),$("#is_Flex_Search").val("true")):($("#air-shopping-widget-mainContent #exactDaysBtn").addClass("trip-selected"),$("#is_Flex_Search").val("false"));var e=$(this).attr("id").split("~")[7];if(SimpleSearchWidget.processFieldsForAwardCheckbox("checked"==e||"true"==e?"true":"false"),!DeltaUtils.supportsPlaceholderAttr()){var f="#air-shopping-widget-mainContent input[placeholder]",g=$(f);g.each(function(){$(this).val()!=$(this).attr("placeholder")&&$(this).removeClass("placeholder")})}SearchWidget.hideSearchDiv(),$("form#flightSearchForm").validate().resetForm()})});var SearchWidget={hideSearchDiv:function(){$("#recentSavedBox").slideUp(50),$("#air-shopping-widget-mainContent #recentSearchArrow").css({"border-bottom-color":"#acadad","background-color":"transparent"})},resetFields:function(){"City or Airport"!=$("#originCity").val()||""==$("#originCity").val(),"City or Airport"!=$("#destinationCity").val()||""==$("#destinationCity").val(),"Depart Date"!=$("#air-shopping-widget-mainContent #departureDate").val()||""==$("#destinationCity").val(),"Return Date"!=$("#air-shopping-widget-mainContent #returnDate").val()||""==$("#destinationCity").val()},checkPaxCount:function(a){2>a?($(".passCount-arrow-down").addClass("disabled"),$(".passCount-arrow-up").removeClass("disabled")):a>8?($(".passCount-arrow-up img").addClass("disabled"),$(".passCount-arrow-down img").removeClass("disabled")):isNaN(a)?($(".passCount-arrow-up").addClass("disabled"),$(".passCount-arrow-down").addClass("disabled")):($(".passCount-arrow-up").removeClass("disabled"),$(".passCount-arrow-down").removeClass("disabled"))},showSearch:function(){var a=$.trim($("#recentSavedFlag").html());"Recent"==a?($(".recent-saved-search").html("Recent Searches"),$("#recentSearch").show(),$("#recentSearch").css("border-bottom","none"),SearchWidget.preFillSearchData(),$("#recentSavedCont").show()):"Saved"==a?($(".recent-saved-search").html("Saved Searches"),$("#savedSearch").show(),$("#savedSearch").css("border-bottom","none"),$("#recentSavedCont").show()):"RecentSaved"==a&&($(".recent-saved-search").html("Recent and Saved Searches"),$("#recentSearch, #savedSearch").show(),SearchWidget.preFillSearchData(),$("#recentSavedCont").show()),setTimeout(function(){resizeWidget.afterValidation()},200)},preFillSearchData:function(){RecentSavedSearch.getCookieContent(function(a){var b=a.split("*"),c=b[0].split("~");if(null!=c[0]&&($("#air-shopping-widget-mainContent #originCity").val(c[0]),$("#air-shopping-widget-mainContent #originCity").removeClass("placeholder")),null!=c[1]&&($("#air-shopping-widget-mainContent #destinationCity").val(c[1]),$("#air-shopping-widget-mainContent #destinationCity").removeClass("placeholder")),null!=c[2]){var d=new Date(c[2]),e=d.getMonth()+1+"/"+d.getDate()+"/"+d.getFullYear();-1==e.indexOf("NaN")&&($("#air-shopping-widget-mainContent #departureDate").val(e),$("#air-shopping-widget-mainContent #departureDate").removeClass("placeholder"))}if(null!=c[3]&&""!=c[3]&&"Return Date"!=c[3]){var f=new Date(c[3]),g=f.getMonth()+1+"/"+f.getDate()+"/"+f.getFullYear();-1==g.indexOf("NaN")&&($("#air-shopping-widget-mainContent #returnDate").val(g),$("#air-shopping-widget-mainContent #returnDate").removeClass("placeholder"))}if(null!=c[4]){var h=c[4],i=searchWidgetUtils.convertTripTypeForPol(h);$("#pol_widget_tripType").val(i),"null"!=i&&""!=i&&"undefined"!=i&&($("#pol_widget_tripType").val(i),"round_trip"==i.toLowerCase()?($("#air-shopping-widget-mainContent #roundTripBtn,#air-shopping-widget-mainContent #oneWayBtn").removeClass("trip-selected"),$("#air-shopping-widget-mainContent #roundTripBtn").addClass("trip-selected"),$("#air-shopping-widget-mainContent #roundtripDateWrap").removeClass("oneWayHidden"),$("#air-shopping-widget-mainContent #retDateCalIcon").parent().show()):"one_way"==i.toLowerCase()&&($("#air-shopping-widget-mainContent #roundTripBtn,#air-shopping-widget-mainContent #oneWayBtn").removeClass("trip-selected"),$("#air-shopping-widget-mainContent #oneWayBtn").addClass("trip-selected"),$("#air-shopping-widget-mainContent #roundTripBtn").removeClass("ui-state-active"),$("#air-shopping-widget-mainContent #oneWayBtn").addClass("ui-state-active"),$("#air-shopping-widget-mainContent #returnDate").hide(),$("#air-shopping-widget-mainContent #roundtrip_cal_icon").hide(),$("#air-shopping-widget-mainContent #roundtripDateWrap").addClass("oneWayHidden"),
$("#air-shopping-widget-mainContent #retDateCalIcon").parent().hide(),$("#air-shopping-widget-mainContent #lblRetDate").hide()))}if(null!=c[5]&&$("#air-shopping-widget-mainContent #paxCount").val(c[5]),null!=c[6]){var j=c[6];$("#air-shopping-widget-mainContent #isDatesFlexible").val(j),$("#air-shopping-widget-mainContent #exactDaysBtn,#air-shopping-widget-mainContent #flexDaysBtn").removeClass("trip-selected"),"checked"==j||"true"==j?($("#air-shopping-widget-mainContent #flexDaysBtn").addClass("trip-selected"),$("#air-shopping-widget-mainContent #exactDaysBtn").removeClass("ui-state-active"),$("#air-shopping-widget-mainContent #flexDaysBtn").addClass("ui-state-active"),$("#is_Flex_Search").val("true")):($("#air-shopping-widget-mainContent #exactDaysBtn").addClass("trip-selected"),$("#air-shopping-widget-mainContent #flexDaysBtn").removeClass("ui-state-active"),$("#air-shopping-widget-mainContent #exactDaysBtn").addClass("ui-state-active"),$("#is_Flex_Search").val("false"))}if(null!=c[7]){var k=c[7];SimpleSearchWidget.processFieldsForAwardCheckbox("checked"==k||"true"==k?"true":"false")}})},hidePopups:function(){$("#recentSavedBox").slideUp(300),$("#recentSearchArrow").css({"border-bottom-color":"#acadad","background-color":"transparent"})}},searchWidgetUtils={setHiddenFields:function(){"true"==$("#air-shopping-widget-mainContent #is_award_travel").val()?("checked"==$("#pol_widget_isRequestUpgrade").attr("checked"),"true"==$("#air-shopping-widget-mainContent #is_Flex_Search").val()&&($("#pol_widget_awards_calendarSearch").val("true"),$("#air-shopping-widget-mainContent #flexMainRTRTravelDate").val("on"))):("checked"==$("#pol_widget_isRequestUpgrade").attr("checked"),"true"==$("#air-shopping-widget-mainContent #is_Flex_Search").val()&&$("#air-shopping-widget-mainContent #flexMainRTRTravelDate").val("on"))},cleanUpInputs:function(){3!=$("#air-shopping-widget-mainContent #originCity").val().length&&$("#air-shopping-widget-mainContent #originCity").val(""),3!=$("#air-shopping-widget-mainContent #destinationCity").val().length&&$("#air-shopping-widget-mainContent #destinationCity").val(""),3!=$("#air-shopping-widget-mainContent #departureDate").val().split("/").length&&$("#air-shopping-widget-mainContent #departureDate").val(""),3!=$("#air-shopping-widget-mainContent #returnDate").val().split("/").length&&$("#air-shopping-widget-mainContent #returnDate").val("")},setFormMultiCitySearch:function(){$("#pol_widget_tripType").val("MULTICITY"),SimpleSearchWidget.isMoreOptionsSearch=!0,$("#flightSearchForm").attr("action",airShoppingDefaultHost+"/air-shopping/searchFlights.action?tripType=MULTICITY"),$("#flightSearchForm").submit()},setMoreOptionsSearch:function(){var a=$("#pol_widget_tripType").val();SimpleSearchWidget.isMoreOptionsSearch=!0;var b=airShoppingDefaultHost+"/air-shopping/searchFlights.action?tripType="+a;$("#flightSearchForm").attr("action",b),$("#flightSearchForm").submit()},convertTripTypeForPol:function(a){return"oneway"===a?"ONE_WAY":"roundtrip"===a?"ROUND_TRIP":"multicity"===a?"MULTICITY":a},convertTripTypeForBAU:function(a){return"ONE_WAY"===a?"oneway":"ROUND_TRIP"===a?"roundtrip":"MULTICITY"===a?"multicity":a},setRecentSearch:!0},AwardSearch={submitAwardSearch:function(){return SimpleSearchWidget.getCustData(),SimpleSearchWidget.loginSessionDataFound?1==SimpleSearchWidget.custData.loggedIn&&"skymiles"==SimpleSearchWidget.custData.usernameType&&"1"==SimpleSearchWidget.custData.medallionMbrInd&&(isIamTravellingEnabled?$("#air-shopping-widget-mainContent #isTraveling").is(":checked")===!0&&$("#air-shopping-widget-mainContent #awards_medallionTraveler").val(SimpleSearchWidget.custData.medallionMbrInd):$("#air-shopping-widget-mainContent #awards_medallionTraveler").val(SimpleSearchWidget.custData.medallionMbrInd)):$("#air-shopping-widget-mainContent #awards_medallionTraveler").val("0"),$("#air-shopping-widget-mainContent #awardTravel").val("true"),!0}};$(document).on("keydown click","#air-shopping-widget-mainContent #air-shopping-multicity-link, #air-shopping-widget-mainContent #air-shopping-moreOptions-link",function(a){(13===a.which||"click"===a.type)&&(searchWidgetUtils.setRecentSearch=!1,$("#flightSearchForm").validate().cancelSubmit=!0,searchWidgetUtils.cleanUpInputs(),"air-shopping-multicity-link"==$(this).attr("id")?searchWidgetUtils.setFormMultiCitySearch():"air-shopping-moreOptions-link"==$(this).attr("id")&&searchWidgetUtils.setMoreOptionsSearch())}),$("#pol_widget_isRequestUpgrade").on("click",function(){"checked"!=$("#pol_widget_isRequestUpgrade").attr("checked")?($("#pol_widget_MUUpgrade").val("off"),$("#pol_widget_showMUUpgrade").val("off")):($("#pol_widget_MUUpgrade").val("on"),$("#pol_widget_showMUUpgrade").val("on"))}),$("#air-shopping-widget-mainContent #isTraveling").on("click",function(){$("#air-shopping-widget-mainContent #awards_iamtravelling").val($("#air-shopping-widget-mainContent #isTraveling").is(":checked")?"true":"false")});var resizeWidget={afterValidation:function(){if(!delta.navwidget.isDockedState()&&$("#air-shopping-widget").is(":visible"))setTimeout(function(){var a=$("#widget-booking");a.css("height",resizeWidget.getWidgetHeight())},10);else{var a=$("#widget-booking");a.css("height","")}},getWidgetHeight:function(){var a=$("#air-shopping-widget .widget-body");return a.height()+a.position().top+SimpleSearchWidget.recentSearchHeight+(delta.navwidget.isDockedState()?27:0)}},DeltaGraph={config:null,definition:null,graph:{},copy:function(a){if(null==a||"object"!=typeof a)return a;var b=a.constructor();for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b},drawBar:function(a,b,c,d,e,f,g,h,i){var j=a.set(),k=Math.round(.8*d),l=Math.round(.9*e),m=b+(d-k)/2,n=c+(e-l)/2,o=m,p=l/f,q=Math.round(k/h.length*.25),r=(a.rect(b,c,d,e).attr({fill:"#ffffff",stroke:"#cccccc"}),a.rect(m,n,k,l).attr({gradient:"270-#eeeeee-#cccccc",stroke:"#333333"}));j.push(r);for(var s=10*p;f*p>s;s+=10*p){j.push(a.path("M"+m+" "+(n+l-s)+"L"+(m+k)+" "+(n+l-s)).attr({stroke:"#999999"}));var t=a.text(m,n+l-s,s/p+"");t.translate(-(t.getBBox().width+.1*q),t.getBBox().height/5),j.push(t)}var u=function(b){var c=h[b],d=Math.round(k/h.length*.7),e=Math.round(p*c),f=o+q,m=Math.round(n+l-e);j.push(a.rect(f,m,d,e).attr({gradient:"0-#000000-#999999:20-#999999:80-#000000",stroke:"#333333"})),j.push(a.rect(f,m,d,e).attr({fill:g[b],stroke:"#333333",opacity:.8})),j.push(a.image(i[b].src,f+.25*d,m+3,i[b].w,i[b].h)),o+=d+q};j.push(a.rect(m,n,k,l).attr({stroke:"#333333","stroke-width":1}));for(var v=0;v<h.length;v++)u(v);return j},drawCarousel:function(a,b,c,d,e,f,g,h,i,j,k,l){for(var m=a.set(),n=[],o=a.set(),p=0,q=function(a,b,c,d,e,f,g,h,i,j,k){this.elements=a.set(),this.left=e,this.top=f,this.width=g,this.height=h,this.fontSize=d,this.selectScale=k?k:1.5;var l={"font-family":"Arial, Verdana, Times New Roman","font-size":"12px",fill:"#ffffff",stroke:"#000000","stroke-width":0,"font-weight":"bold"},m={fill:"#ffffff",stroke:"#ffffff","stroke-width":0,opacity:.5},n=g/this.selectScale,o=h/this.selectScale,p=e+(g-n)/2,q=f+(h-o)/2;this.image=a.image(b,p,q,n,o),this.box=a.rect(p,q,n,o),this.text=a.text(p+n/2,q+o/2,c),this.box.attr(i?i:m),this.text.attr(j?j:l),this.elements.push(this.image),this.elements.push(this.box),this.elements.push(this.text),this.selectItem=function(){this.box.attr({opacity:0}),this.text.attr({"font-size":this.fontSize}),this.elements.scale(this.selectScale,this.selectScale)},this.deselectItem=function(){this.box.attr(m),this.text.attr(l),this.elements.scale(1,1)}},r=function(a){n[p].deselectItem(),n[a].selectItem(),p=a},s=.25*b,t=.25*c,u=b+s,v=c+t,w=0;w<f.length;w++){var x=new q(a,f[w].src,f[w].text,i,u,v,g,h,j,k,l);u=u+g+s,f[w].selected&&(p=w),n.push(x),o.push(x.elements)}r(p),o.translate(b-n[p].left+g,0),m.push(a.rect(b,c,d-2*b,e-2*c));var y=e/2,z=y-b,A=y+b,B=b,C=a.path(["M",0,y,"L",B,z,"L",B,A,"z"]),D=a.path(["M",d,y,"L",d-B,z,"L",d-B,A,"z"]);return C.attr({fill:"#cccccc"}),D.attr({fill:"#cccccc"}),D.click(function(){this.attr({fill:"red"}),p<n.length-1&&(r(p+1),o.animate({translation:"-"+g+",0"},500,"elastic"))}),C.click(function(){this.attr({fill:"red"}),p>0&&(r(p-1),o.animate({translation:g+",0"},500,"elastic"))}),m.push(o),m.push(C),m.push(D),m},drawCircleChart:function(a,b,c,d,e,f,g){for(var h=a.set(),i=this.config.circles,j=this.config.textAttr,k=function(a,b,c,d,e,f,g,h){var i=a.set(),j=b+d,k=c+d,l=2*d*.7,m=l,n=j-.5*l+1,o=k-.5*m+1;i.push(a.circle(j,k,d).attr({fill:g,stroke:"","stroke-width":0})),e&&i.push(a.image(e,n,o,l,m));var p=a.text(j,c,f).attr(h),q=p.getBBox().height||10;return p.translate(0,-(.8*q)),i.push(p),i},l=function(a){if(i&&i.length>0)for(var b=0;b<i.length;b++)if(i[b].name==a)return i[b];return null},m=0,n=b,o=.14*d,p=0;p<g.length;p++)m+=parseInt(g[p].size);for(var q=0;q<g.length;q++){var r=l(g[q].name),s=parseInt(g[q].size)/m*f*g.length*.4,t=parseInt(g[q].size),u=c+.5*e-t;r&&r.bgColor&&h.push(k(a,n,u,t,r.icon,g[q].value,r.bgColor,j)),n+=s+o}return d>n&&h.translate((d-n)/2,0),h},drawDotNav:function(a,b,c,d,e,f,g){function h(a){a[0].hide(),a[1].show()}function i(a){a[0].show(),a[1].hide()}function j(a){for(var b=0;b<k.length;b++)a==b?h(k[b]):i(k[b])}for(var k=a.set(),l=this.config.bgColor,m=this.config.selColor,n=this.config.selDotRadius,o=this.config.dotRadius,p=this.config.dotSpace,q=2*o,r=b,s=.5*e,t=function(a,b,c,d,e,f){var g=a.set();return g.push(a.circle(b,c,o).attr({fill:l,stroke:"","stroke-width":0,href:d,title:e}).click(function(){j(f)})),g.push(a.circle(b,c,n).attr({fill:m,stroke:"","stroke-width":0,href:d,title:e})),g},u=0;u<f.length;u++)k.push(t(a,r,s,f[u].callBack,f[u].title,u)),r+=q+p,f[u].selected&&"Y"==f[u].selected&&(g=u);return k.translate(.1*(d-k.getBBox().width),0),j(g),k},drawPie:function(a,b,c,d,e,f,g,h,i,j,k){for(var l=Math.PI/180,m=a.set(),n=a.circle(b,c,d).attr({gradient:"r#999999-#999999:85-#000000",stroke:f,"stroke-width":0,opacity:1}),o=this.drawSector,p=h?h:0,q=0,r=0,s=function(h){var n=i[h],s=360*n/q,t=p+s/2,u=e?e[h]:"#ffffff",v=o(a,b,c,d,p,p+s,{fill:u,stroke:f,"stroke-width":g,opacity:.8});if(v.toFront(),j){var w=a.image(j[h].src,b-j[h].w/2+d/k*Math.cos(-t*l),c-j[h].h/2+d/k*Math.sin(-t*l),j[h].w,j[h].h);w.toFront()}p+=s,m.push(v),r+=.1},t=0,u=i.length;u>t;t++)q+=i[t];for(var t=0;u>t;t++)s(t);return m.push(n),m},drawSector:function(a,b,c,d,e,f,g){var h=Math.PI/180,i=b+d*Math.cos(-e*h),j=b+d*Math.cos(-f*h),k=c+d*Math.sin(-e*h),l=c+d*Math.sin(-f*h);return a.path(["M",b,c,"L",i,k,"A",d,d,0,+(f-e>180),0,j,l,"z"]).attr(g)},drawStatus:function(a,b,c,d,e,f,g,h,i,j,k,l){{var m=a.set(),n=this.config.textAttr,o=this.config.textY,p=a.rect(b,c,d,e,.5*e),q=a.rect(b,c,d,e,.5*e),r=a.rect(b,c,d,e,.5*e),s=a.rect(b,c,d,e,.5*e).attr({title:l||""}),t=function(a,b,c,d,e,f,g){for(var h=a.set(),i=d/f,j=b+i,l=.2*i,m=b+l,p=1.1*e,q=c+(e-p)/2,r=c+(p+(e-p)/2);b+d-2>j;)h.push(a.path(["M",j,q,"L",j,r]).attr({stroke:k,"stroke-width":2,opacity:.8})),j+=i;for(x=0;x<g.length;x++){var s=a.text(m,o?o:c+.75*e,g[x]).attr(n);s.translate(.5*s.getBBox().width,0),m+=i}return h};t(a,b,c,d,e,g,h)}return!isNaN(f)&&DeltaUtils.exists(f)&&""!==f?(f=parseInt(f,10),r.attr({"clip-rect":b+","+c+","+d*(f/100)+","+e}),s.attr({"clip-rect":b+","+c+","+d*(f/100)+","+e})):(r.attr({"clip-rect":b+","+c+","+1*d+","+e}),s.attr({"clip-rect":b+","+c+","+1*d+","+e})),m.push(p.attr({fill:"90-#666666-#000000",stroke:"","stroke-width":0})),m.push(q.attr({fill:i,"stroke-width":2,stroke:i,opacity:.8})),m.push(r.attr({fill:"90-#000000-#ffffff",stroke:"","stroke-width":0})),m.push(s.attr({fill:j,stroke:"","stroke-width":0,opacity:.8})),m},drawText:function(a,b,c,d,e,f,g,h,i){for(var j=(Math.PI/180,a.set()),k=i?i:0,l=0,m=0,n=function(i){var n=e[i],o=360*n/l,p=k+o/2,q=k-(2*p-o/2),r=a.text(b,c,f[i].length>g?f[i].substring(0,g):f[i]);r.attr(h),p>90&&270>p?(r.translate(-Math.round(d/1.6),Math.round(.1*r.getBBox().height)),r.rotate(q+180,b,c)):(r.translate(Math.round(d/1.6),Math.round(.05*r.getBBox().height)),r.rotate(q,b,c)),r.toFront(),k+=o,j.push(r),m+=.1},o=0,p=e.length;p>o;o++)l+=e[o];for(var o=0;p>o;o++)n(o);return j},drawTextBubble:function(a,b,c,d){var e=a.set(),f=this.config.colors,g={fill:"#ffffff",stroke:"","stroke-width":0,"font-family":"whitney-book","font-size":"31px","font-weight":"bold","letter-spacing":"-25px"},h=this.config.textStyle||g,i="#003399",j=this.config.outline,k="#ffffff",l=2,m=function(a,b,c,d,e,f){var g=a.set(),i=.98,j=c*i,k=c,l=c*i,m=l-2*f,n=b.replace("\\n","\n");return g.push(a.circle(c,c,k).attr({fill:"#cccccc",stroke:"","stroke-width":0,opacity:.75})),g.push(a.circle(j,j,l).attr({fill:e,stroke:"","stroke-width":0,opacity:.25})),g.push(a.circle(j,j,m).attr({fill:"r#ffffff-"+d,stroke:"","stroke-width":0})),g.push(a.circle(j,j,m).attr({fill:d,stroke:"","stroke-width":0,opacity:.5})),g.push(a.text(j,j,n).attr(h).attr({fill:"#cccccc",opacity:.5})),g.push(a.text(j*i,j*i,n).attr(h).attr({title:n})),g};if(f)for(var n=0;n<f.length;n++)f[n].name==d&&(i=f[n].hex);return j&&(j.color&&(k=j.color),j.thickness&&(l=j.thickness)),e.push(m(a,b,c,i,k,l)),e},emptyHolder:function(){this.config.holder&&$("#"+this.config.holder).empty()},formatData:function(a,b){var c=[];if($(a).each(function(){var a={};a.label=$.trim($("[title='label']",this).text()),a.value=$.trim($("[title='value']",this).text()),a.name=$.trim($("[title='name']",this).text()),a.size=$.trim($("[title='size']",this).text()),a.title=$.trim($("[title='title']",this).text()),a.callBack=$.trim($("[title='callBack']",this).text()),a.selected=$.trim($("[title='selected']",this).text()),a.text=$.trim($("[title='text']",this).text()),a.color=$.trim($("[title='color']",this).text()),a.radius=parseInt($("[title='radius']",this).text()),(a.value||a.name||a.title||a.label||a.size||a.text)&&c.push(a)}),null!=b&&b.length>0)for(var d=0;d<b.length;d++)c[d].sub=this.formatData($("tr, ul",b[d]));return c},formatPageData:function(a){var b=$("[class='graphData']",a),c=$("[class='subData']",a),d={};d.data=this.formatData(b,c),this.definition=d},getData:function(){if(null!=this.definition){if(null!=this.definition.data)return this.definition.data;null!=this.definition.dataSource&&this.formatPageData(this.getDataSourcePage(this.definition.dataSourceId))}},getDataFromPage:function(){var a=$("#"+this.definition);this.definition.data=this.formatPageData(a)},getDefinition:function(){return null!=this.definition?this.definition:void 0},getInstance:function(){var a=DeltaGraph.copy(DeltaGraph);return a.config=DeltaGraph.copy(this.config),a.definition=DeltaGraph.copy(this.definition),a.graph=DeltaGraph.copy(this.graph),a},getLabels:function(a){for(var b=[],c=0;c<a.length;c++)b.push(a[c].label);return b},getSubLabels:function(a){for(var b=[],c=0;c<a.length;c++)for(var d=a[c].sub,e=0;e<d.length;e++)b.push(d[e].value+" "+d[e].label);return b},getSubValues:function(a){for(var b=[],c=0;c<a.length;c++){for(var d=a[c].value,e=[],f=0,g=a[c].sub,h=0;h<g.length;h++)e.push(g[h].value),f+=g[h].value;for(var i=0;i<e.length;i++)b.push(Math.round(d*e[i]/f))}return b},getValues:function(a){for(var b=[],c=0;c<a.length;c++)b.push(a[c].value);return b},makeBarGraph:function(){var a=this.config,b=Raphael(a.holder,a.hWidth,a.hHeight),c=this.getValues(this.definition.data);this.graph.paper=b,this.graph.bar=this.drawBar(b,a.gLeft,a.gTop,a.gWidth,a.gHeight,a.maxUnits,a.bgColors,c,a.icons)},makeCarousel:function(){var a=this.config,b=Raphael(a.holder,a.gWidth,a.gHeight),c=this.definition.data;this.graph.paper=b,this.graph.carousel=this.drawCarousel(b,a.gLeft,a.gTop,a.gWidth,a.gHeight,c,a.iWidth,a.iHeight,a.fontSize)},makeCircleChart:function(){var a=this.config,b=Raphael(a.holder,a.width,a.height),c=this.definition.data;this.graph.paper=b,this.graph.circleChart=this.drawCircleChart(b,a.xPos,a.yPos,a.width,a.height,a.cHeight,c)},makeDotNav:function(){var a=this.config,b=Raphael(a.holder,a.width,a.height),c=this.definition.data;this.graph.paper=b,this.graph.dotNav=this.drawDotNav(b,a.xPos,a.yPos,a.width,a.height,c,a.selDefault)},makeGraph:function(a){return this.setDefinition(a),this.emptyHolder(),"iconPie"==this.config.graphType?this.makeIconPie():"pizzaPie"==this.config.graphType?this.makePizzaPie():"barGraph"==this.config.graphType?this.makeBarGraph():"statusBar"==this.config.graphType?this.makeStatus():"carousel"==this.config.graphType?this.makeCarousel():"circleChart"==this.config.graphType?this.makeCircleChart():"dotNav"==this.config.graphType?this.makeDotNav():"textBubble"==this.config.graphType&&this.makeTextBubble(),this},makeIconPie:function(){var a=this.config,b=Raphael(a.holder,a.hWidth,a.hHeight),c=this.getValues(this.definition.data);this.graph.paper=b,this.graph.pie=this.drawPie(b,a.xpos,a.ypos,a.radius,a.bgColors,"#cccccc",1,-45,c,a.icons,1.6)},makePizzaPie:function(){var a=this.config,b=this.definition.data,c=Raphael(a.holder,a.hWidth,a.hHeight),d=-45,e=this.getValues(b),f=this.getLabels(b),g=this.getSubLabels(b),h=this.getSubValues(b),i="#cccccc",j=this.drawPie(c,a.xpos,a.ypos,a.radius,a.bgColors,i,1,d,e,a.icons,1.05);j.push(this.drawPie(c,a.xpos,a.ypos,.9*a.radius,null,i,1,d,e,null,null)),j.push(this.drawPie(c,a.xpos,a.ypos,.35*a.radius,a.bgColors,i,1,d,e,null,null)),j.push(this.drawText(c,a.xpos,a.ypos,Math.round(.3*a.radius),e,f,15,{"font-family":"Arial, Verdana, Times New Roman","font-size":"14px",fill:"#ffffff",stroke:"#ffffff","stroke-width":0,"font-weight":"bold"},d)),j.push(this.drawText(c,a.xpos,a.ypos,a.radius,h,g,25,{"font-family":"Arial, Verdana, Times New Roman","font-size":"11px",fill:"#003366",stroke:"#003366","stroke-width":0,"font-weight":"bold"},d)),this.graph.paper=c,this.graph.pizza=j},makeStatus:function(){var a=this.config,b=this.definition.data,c=Raphael(a.holder,a.hWidth,a.hHeight);this.graph.status=this.drawStatus(c,a.xPos,a.yPos,a.width,a.height,this.getValues(b)[0],a.units,a.unitText,a.baseColor,a.valueColor,a.unitColor,a.title)},makeTextBubble:function(){var a=this.config,b=this.definition.data;if(b&&b.length>0){var c=2*b[0].radius,d=c,e=Raphael(a.holder,c,d);this.config.paper=e,this.graph.textBubble=this.drawTextBubble(this.config.paper,b[0].text,b[0].radius,b[0].color)}},renderGraph:function(a){var b=[];return $("[id^="+a+"]").each(function(){var a=$("ul[class='graphConfig']",this);if(a){var c=$.trim(a.text());DeltaGraph.setConfig(window[c]),DeltaGraph.config.holder=this.id}DeltaGraph.makeGraph(this.id),b.push(DeltaGraph.getInstance())}),b},redraw:function(a){DeltaGraph.setConfig(a.config),DeltaGraph.makeGraph(a.definition)},setConfig:function(a){this.config=a},setDefinition:function(a){this.definition=a,null==a.data&&this.getDataFromPage()}},loadingPosition={top:"myDeltaSummaryTracker",bottom:"myDeltaSummaryUpcomingTrips"},UserMyDeltaSummary={customerId:"",skymilesNumber:"",isIROP:!1,isCheckinElig:!1,origin:"",destination:"",departureDate:"",departureTime:"",confirmationNumber:"",tripView:""};"undefined"!=typeof CustomerInfo&&CustomerInfo.setData(UserMyDeltaSummary,"myDelta");var mqmStatusConfig={graphType:"statusBar",holder:"statusHolder",title:"Medallion Qualification Miles",hWidth:280,hHeight:20,xPos:5,yPos:5,width:272,height:12,units:5,baseColor:"#b4c4d4",valueColor:"#3399cc",unitColor:"#ffffff",textAttr:{fill:"#ffffff","font-size":"8px","stroke-width":0}},mqsStatusConfig={graphType:"statusBar",holder:"statusHolder",title:"Medallion Qualification Segments",hWidth:280,hHeight:20,xPos:5,yPos:5,width:272,height:12,units:5,baseColor:"#b4c4d4",valueColor:"#3399cc",unitColor:"#ffffff",textAttr:{fill:"#ffffff","font-size":"8px","stroke-width":0}},graphConfig={mqm:"",container:"mqm_status_bar",threshold:""},mqsGraphConfig={mqs:"",container:"mqs_status_bar",threshold:""},MyDeltaSummaryWidget=function(){function a(a,b,c){var d=c;$("#"+a).html($("#"+b).render(d))}function b(){n||$.ajax({url:"/mydelta/summaryUpcomingTripsJSRender",type:"POST",cache:!1,timeout:9e4,headers:{"cache-control":"no-cache"},success:function(a){h(a),g(),n=!0},error:function(b,c,d){n=!1,""!=d&&null!=d&&"undefined"!=d&&(p.responseText="We're sorry. We can't show your upcoming trips right now. Please try again later.",a(m,"deltaSummaryErrorTemplate",p),setErrorDefinition("Load Failure","My Delta Summary"))}})}function c(a){l=a}function d(b){c(b),$("#"+m).empty(),$("#"+m).html(k.upcomingTrips),l.trips?(e(),f(),a(m,"UpcomingTripSummaryTemplate",b),i(),initializeMyDeltaWidgetEvents()):(p.responseText="We're sorry. We can't show your upcoming trips right now. Please try again later.",a(m,"deltaSummaryErrorTemplate",p),setErrorDefinition("Load Failure","My Delta Summary"))}function e(){UserMyDeltaSummary.skymilesNumber=l.trips.skymilesNumber,UserMyDeltaSummary.isIROP=l.trips.iropAlert,UserMyDeltaSummary.isCheckinElig=l.trips.checkinEligible,UserMyDeltaSummary.origin=l.trips.flightOrigin,UserMyDeltaSummary.destination=l.trips.flightDestination,UserMyDeltaSummary.departureDate=l.trips.flightDate,UserMyDeltaSummary.departureTime=l.trips.flightTime,UserMyDeltaSummary.confirmationNumber=l.trips.confirmationNumber,UserMyDeltaSummary.tripView="plane",l.trips.showFlight?UserMyDeltaSummary.tripView="plane":l.trips.showCar?UserMyDeltaSummary.tripView="car":l.trips.showHotel&&(UserMyDeltaSummary.tripView="hotel")}function f(){var a={};a.showTripSummary=l.trips.noUpcomingTrips?!1:!0,l.trips.additionalTrips>0?(a.hasAdditionalTrips=!0,a.multipleAdditionalTrips=1==l.trips.additionalTrips?!1:!0):(a.hasAdditionalTrips=!1,a.multipleAdditionalTrips=!1),l.trips.cars.length>0&&(a.carSize=l.trips.cars.length-1,l.trips.cars.length>=1&&(a.singleCar=!0)),l.trips.hotels.length>0&&(a.hotelSize=l.trips.hotels.length,a.hotelSizeLessFour=l.trips.hotels.length-4,1==l.trips.hotels.length?a.singleHotel=!0:l.trips.hotels.length>1&&(l.trips.hotels.length>4&&(a.showAdditionalHotel=!0),l.trips.hotels.length>=6&&(a.hotelOthers=!0),a.hotel1=l.trips.hotels[0],a.hotel2=l.trips.hotels[1],a.hotel3=l.trips.hotels[2],a.hotel4=l.trips.hotels[3])),l.flags=a}function g(){try{$.views.allowCode=!0}catch(b){}if(!o){o=!0;var c="/mydelta/json/getDeltaUpcomingTripsSummaryJSON?flagCallMLT="+q;$.ajax({url:c,dataType:"json",type:"POST",timeout:9e4,cache:!1,headers:{"cache-control":"no-cache"},success:function(a){d(a)},error:function(b,c,e){q?(l.mltError=!0,l.mltRetries=r,d(l),setErrorDefinition("Vacation Load Failure","My Delta Summary")):(o=!1,("timeout"===c||""!=e&&null!=e&&"undefined"!=e)&&(p.responseText="We're sorry. We can't show your upcoming trips right now. Please try again later.",a(m,"deltaSummaryErrorTemplate",p),setErrorDefinition("Load Failure","My Delta Summary")))}})}}function h(a){k.upcomingTrips=a}function i(){$("#loadingImage").hide();try{MyDeltaSummaryWidget.switchTripView(UserMyDeltaSummary.tripView)}catch(a){}}var j={},k={},l=null,m="myDeltaSummaryUpcomingTrips",n=!1,o=!1,p={responseText:""},q=!1,r=null;return j.initMyDeltaSummaryJSON=function(){n||$.post("/mydelta/displayMyDeltaSummary",function(a){$("#mydelta_summary_widget_container").html(a),displayWidgetTracker(b)})},j.callMLT=function(){n=!1,q=!0,r=null==r?0:r+1,o=!1,j.initMyDeltaSummaryJSON()},j.isLoginException=function(a){return"Error 500: Customer Login exception encountered."==$.trim(a)?!0:!1},j.gotoMyTrips=function(){location.href="/mytrips/findPnrList?skyMilesNo="+UserMyDeltaSummary.skymilesNumber+"&loggedInMyDelta=Y"},j.gotoDashboard=function(){location.href="/mydelta/dashboard"},j.gotoMySkymiles=function(){location.href="/acctactvty/myskymiles.action"},j.selectDetails=function(a){MyDeltaSummaryWidget.resetFocusIcon(),MyDeltaSummaryWidget.focusIcon(a),MyDeltaSummaryWidget.switchTripView(a)},j.setCustomerInfo=function(a){try{parent.CustomerInfo&&parent.CustomerInfo.setIropState(a.isIROP)}catch(b){}},j.switchTripView=function(a){MyDeltaSummaryWidget.switchTripContents(a),MyDeltaSummaryWidget.focusIcon(a)},j.switchTripContents=function(a){$("[id^='trip_content_']").each(function(){a&&$(this).attr("id")=="trip_content_"+a?$(this).show():$(this).hide()})},j.focusIcon=function(a){element=$("#"+a),$(element).addClass("selected")},j.resetFocusIcon=function(){$(".tripIconDiv").each(function(){$(this).removeClass("selected")})},j.statusBarTextHeight=function(){var a=$("#mqm_status_bar").find("text"),b=$("#mqs_status_bar").find("text");a.each(function(){xAttr=$(this).attr("x"),yAttr=$(this).attr("y"),xAttr=parseInt(xAttr,10),yAttr=parseInt(yAttr,10)-2,$(this).attr("x",xAttr),$(this).attr("y",yAttr)}),b.each(function(){xAttr=$(this).attr("x"),yAttr=$(this).attr("y"),xAttr=parseInt(xAttr,10),yAttr=parseInt(yAttr,10)-2,$(this).attr("x",xAttr),$(this).attr("y",yAttr)})},j.addCommas=function(a){a+="",x=a.split("."),x1=x[0],x2=x.length>1?"."+x[1]:"";for(var b=/(\d+)(\d{3})/;b.test(x1);)x1=x1.replace(b,"$1,$2");return x1+x2},j}(),mqmGraph={graphConfig:{},mqmPercentage:null,mqmLabel:null,graphUnits:{general:[0,5,10,15,20],silver:[25,30,35,40,45],gold:[50,55,60,65,70],platinum:[75,85,95,105,115],diamond:[125]},altGraphUnits:{general:[0,5,10,15,20],silver:[0,10,20,30,40],gold:[0,15,30,45,60],platinum:[0,25,50,75,100],diamond:[125]},initGraph:function(a,b){this.graphConfig=a,this.setProgressBarUnits(b),this.generateProgressBar(),DeltaGraph.renderGraph(a.container)},setGraphConfig:function(){var a=this.graphConfig.mqm/1e3,b={};a>=this.graphUnits.general[0]&&a<this.graphUnits.silver[0]?(b.label="silver",b.unitText=this.graphUnits.general):a>=this.graphUnits.silver[0]&&a<this.graphUnits.gold[0]?(b.label="gold",b.unitText=this.graphUnits.silver):a>=this.graphUnits.gold[0]&&a<this.graphUnits.platinum[0]?(b.label="platinum",b.unitText=this.graphUnits.gold):a>=this.graphUnits.platinum[0]&&a<this.graphUnits.diamond[0]?(b.label="diamond",b.unitText=this.graphUnits.platinum):a>=this.graphUnits.diamond[0]&&(b.label="115",b.unitText=this.graphUnits.platinum,this.generateMessage()),this.graphConfig.unitText=b.unitText,this.graphConfig.units=b.unitText.length,this.mqmLabel=b.label},setAltGraphConfig:function(){var a=this.altGraphUnits,b=this.graphConfig.threshold,c={};1==b?(c.label="silver",c.unitText=a.general):2==b?(c.label="gold",c.unitText=a.silver):3==b?(c.label="platinum",c.unitText=a.gold):4==b?(c.label="diamond",c.unitText=a.platinum):(c.label="diamond",c.unitText=a.platinum,this.generateMessage()),this.graphConfig.unitText=c.unitText,this.graphConfig.units=c.unitText.length,this.mqmLabel=c.label},setMqmPercentage:function(){var a=this.graphConfig.unitText.length-1,b=this.graphConfig.unitText[1]-this.graphConfig.unitText[0];if(this.graphConfig.mqm>=1e3*this.graphUnits.diamond[0])this.mqmPercentage=100;else{var c=1e3*(this.graphConfig.unitText[a]+b),d=this.graphConfig.mqm-1e3*this.graphConfig.unitText[0],e=c-1e3*this.graphConfig.unitText[0],f=d/e*100;this.mqmPercentage=f}},setProgressBarUnits:function(a){var b=getMQMLevel(this.graphConfig.mqm);b==this.graphConfig.threshold?this.setGraphConfig():this.setAltGraphConfig(),this.setMqmPercentage(),a&&this.showLabelAsUnitText(),mqmStatusConfig.unitText=this.graphConfig.unitText,mqmStatusConfig.units=this.graphConfig.unitText.length},showLabelAsUnitText:function(){var a=this.graphConfig.unitText.length-1;this.graphConfig.unitText[a]=this.mqmLabel.toUpperCase()},generateProgressBar:function(){$container=$("#"+this.graphConfig.container),$container.children(".graphData").children("li").html(this.mqmPercentage)},generateMessage:function(){}},mqsSegmentGraph={graphConfig:{},mqsPercentage:null,mqsLabel:null,graphUnits:{mqsGeneral:[0,5,10,15,20,25],mqsSilver:[30,35,40,45,50,55],mqsGold:[60,65,70,75,80,85,90,95],mqsPlatinum:[100,105,110,115,120,125,130,135],mqsDiamond:[140]},altGraphUnits:{mqsGeneral:[0,5,10,15,20,25],mqsSilver:[0,10,20,30,40,50],mqsGold:[0,20,40,60,80],mqsPlatinum:[0,20,40,60,80,100,120],mqsDiamond:[140]},initGraph:function(a,b){this.graphConfig=a,this.setProgressBarUnits(b),this.generateProgressBar(),DeltaGraph.renderGraph(a.container)},setGraphConfig:function(){var a=this.graphConfig.mqs,b={};30>a?b.unitText=this.graphUnits.mqsGeneral:a>=this.graphUnits.mqsSilver[0]&&a<this.graphUnits.mqsGold[0]?b.unitText=this.graphUnits.mqsSilver:a>=this.graphUnits.mqsGold[0]&&a<this.graphUnits.mqsPlatinum[0]?b.unitText=this.graphUnits.mqsGold:a>=this.graphUnits.mqsPlatinum[0]&&a<this.graphUnits.mqsDiamond[0]?b.unitText=this.graphUnits.mqsPlatinum:a>this.graphUnits.mqsDiamond[0]&&(b.unitText=this.graphUnits.mqsPlatinum),this.graphConfig.unitText=b.unitText,this.graphConfig.units=b.unitText.length,this.mqsLabel=b.label},setAltGraphConfig:function(){var a=this.altGraphUnits,b=this.graphConfig.threshold,c={};c.unitText=1==b?a.mqsGeneral:2==b?a.mqsSilver:3==b?a.mqsGold:4==b?a.mqsPlatinum:a.mqsPlatinum,this.graphConfig.unitText=c.unitText,this.graphConfig.units=c.unitText.length,this.mqsLabel=c.label},getLastUnitValue:function(a){var b=a.length-1;return a[b]},setMqsPercentage:function(){if(this.graphConfig.mqs>140)this.mqsPercentage=100;else{var a=this.graphConfig.unitText[0]-(this.graphConfig.unitText[this.graphConfig.units-1]+5),b=this.graphConfig.unitText[0]-this.graphConfig.mqs;this.mqsPercentage=b/a*100}},setProgressBarUnits:function(){var a=getMQSLevel(this.graphConfig.mqs);a==this.graphConfig.threshold?this.setGraphConfig():this.setAltGraphConfig(),this.setMqsPercentage(),mqsStatusConfig.unitText=this.graphConfig.unitText,mqsStatusConfig.units=this.graphConfig.unitText.length},showLabelAsUnitText:function(){var a=this.graphConfig.unitText.length-1;this.graphConfig.unitText[a]=this.mqsLabel.toUpperCase()},generateProgressBar:function(){$container=$("#"+this.graphConfig.container),$container.children(".graphData").children("li").html(this.mqsPercentage)},generateMessage:function(){}},SkymilesLevel={silver:{value:1,label:"SILVER",mqsthreshold:30,mqmthreshold:25e3},gold:{value:2,label:"GOLD",mqsthreshold:60,mqmthreshold:5e4},platinum:{value:3,label:"PLATINUM",mqsthreshold:100,mqmthreshold:75e3},diamond:{value:4,label:"DIAMOND",mqsthreshold:140,mqmthreshold:125e3},diamondUp:{value:5,label:"DIAMOND",mqsthreshold:140,mqmthreshold:125e3},getByLevel:function(a){for(var b in SkymilesLevel){var c=SkymilesLevel[b];if(c&&c.value&&c.value==a)return c}}},MyDeltaOmnitureTracking={trackErrors:function(a){s.linkTrackEvents="event28",s.linkTrackVars="prop19, prop20",s.events="event28",s.prop19=a.errorCode,s.tl(!0,"o",a.linkName)},trackClickedLinks:function(){UserTracking.doCustomLinkTrack(s,{linkName:"btnGoToMyDel"})}},mydelta=mydelta||{};mydelta.widget={is_local:function(){try{return window.location.host.contains("localhost")}catch(a){return!1}}};var trackerFontFamilyVar="'Lucida Grande','Lucida Sans Unicode'",trackerUserIE=$.browser.msie&&$.browser.version<9,widgetGraphData=null,trackerCanvas="skymilestracker-section",containerWidth=293,barGraph={createTrackerCanvas:function(){var a=containerWidth,b=110;return widgetGraphData.showSpendRequirement&&(b=185),(!widgetGraphData.mileageReqChecked||widgetGraphData.showSpendRequirement&&!widgetGraphData.spendReqChecked)&&(b+=15),Raphael("tracker-canvas",a,b)},createToCompleteMessage:function(a){var b=a.set();if(isSameProgramAndFutureYear()){var c="Start tracking toward "+widgetGraphData.loyaltyAccount.membershipStatusInfo.nextProgramYear+" Medallion status.",d=a.text(20,16,c);b.push(d)}else if(isDiamond()){var e=a.text(20,16,"Congratulations on achieving Diamond Medallion.");b.push(e)}else if(!widgetGraphData.mileageReqChecked||!widgetGraphData.spendReqChecked&&widgetGraphData.showSpendRequirement){var f=trackerUserIE?a.text(20,14,"Complete one "):a.text(20,11,"Complete one ");if(!widgetGraphData.showSpendRequirement||widgetGraphData.mileageReqChecked||widgetGraphData.spendReqChecked){if(widgetGraphData.mileageReqChecked){var g=trackerUserIE?93:95;this.renderIcon(a,g,16,"dollar","#0f7944")}else{var g=trackerUserIE?94:96;this.renderIcon(a,g,16,"plane","#227ab8")}var h=trackerUserIE?102:106,i=trackerUserIE?a.text(h,14," for "+widgetGraphData.loyaltyAccount.membershipStatusInfo.trackingTowardsTierDesc+" Medallion."):a.text(h,11," for "+widgetGraphData.loyaltyAccount.membershipStatusInfo.trackingTowardsTierDesc+" Medallion.");b.push(f,i)}else{trackerUserIE?this.renderIcon(a,95,16,"plane","#227ab8"):this.renderIcon(a,97,16,"plane","#227ab8");

var i=trackerUserIE?a.text(106,14," and one "):a.text(108,11," and one ");trackerUserIE?this.renderIcon(a,155,16,"dollar","#0f7944"):this.renderIcon(a,156,16,"dollar","#0f7944");var j=trackerUserIE?a.text(162,14," for "+widgetGraphData.loyaltyAccount.membershipStatusInfo.trackingTowardsTierDesc+" Medallion."):a.text(165,11," for "+widgetGraphData.loyaltyAccount.membershipStatusInfo.trackingTowardsTierDesc+" Medallion.");b.push(f,i,j)}}b.attr({fill:"#333333","text-anchor":"start","font-size":10,"font-family":trackerFontFamilyVar})},render:function(){$("#skymilestracker-section").css("display","block");for(var a=containerWidth-21,b=27,c=20,d=[10,50,90,130],e=this.createTrackerCanvas(),f=15,g=0;g<d.length;g++)d[g]=d[g]+f;var h=e.set(),i=barGraph.renderBar(e,c,d[0],b,"light-blue",{max:a,current:this.computeBarDisplay(widgetGraphData.loyaltyAccount.membershipStatusInfo.currentYearMqm.percentTowardsNextTier,a)}),j=barGraph.renderBar(e,c,d[1],b,"light-blue",{max:a,current:this.computeBarDisplay(widgetGraphData.loyaltyAccount.membershipStatusInfo.currentYearMqs.percentTowardsNextTier,a)});if(h.push(i,j),widgetGraphData.showSpendRequirement){var k=barGraph.renderBar(e,c,d[2],b,"green",{max:a,current:this.computeBarDisplay(widgetGraphData.loyaltyAccount.membershipStatusInfo.currentYearMqd.percentTowardsNextTier,a)}),l=null;l=widgetGraphData.loyaltyAccount.membershipStatusInfo.currentYearCardSpend?barGraph.renderBar(e,c,d[3],b,"green",{max:a,current:this.computeBarDisplay(widgetGraphData.loyaltyAccount.membershipStatusInfo.currentYearCardSpend.percentTowardsNextTier,a)}):barGraph.renderBar(e,c,d[3],b,"green",{max:a,current:0}),h.push(k,l)}barGraph.renderCircleIcons(e,d);var m,n=null;n=barGraph.addCommas(widgetGraphData.loyaltyAccount.membershipStatusInfo.currentYearCardSpend?generateCardSpendRange(widgetGraphData.loyaltyAccount.membershipStatusInfo.currentYearCardSpend.availableBalance,!1,!1):generateCardSpendRange(0,!1,!1)),m=widgetGraphData.showSpendRequirement&&widgetGraphData.loyaltyAccount.membershipStatusInfo.enrolledForCoBrandCard?{current:["MQMs: "+barGraph.addCommas(widgetGraphData.loyaltyAccount.membershipStatusInfo.currentYearMqm.availableBalance),"MQSs: "+barGraph.addCommas(widgetGraphData.loyaltyAccount.membershipStatusInfo.currentYearMqs.availableBalance),"MQDs: $"+barGraph.addCommas(widgetGraphData.loyaltyAccount.membershipStatusInfo.currentYearMqd.availableBalance),"CARD SPEND: $"+n,"Medallion qualification miles equal "+barGraph.addCommas(widgetGraphData.loyaltyAccount.membershipStatusInfo.currentYearMqm.availableBalance)+".&nbsp;","Medallion qualification segments equal "+barGraph.addCommas(widgetGraphData.loyaltyAccount.membershipStatusInfo.currentYearMqs.availableBalance)+".&nbsp;","Medallion qualification dollars equal "+barGraph.addCommas(widgetGraphData.loyaltyAccount.membershipStatusInfo.currentYearMqd.availableBalance)+".&nbsp;","Card spend is "+n+".&nbsp;"],needed:[barGraph.addCommas(widgetGraphData.loyaltyAccount.membershipStatusInfo.currentYearMqm.neededForNextTier)+" to "+widgetGraphData.loyaltyAccount.membershipStatusInfo.trackingTowardsTierDesc,barGraph.addCommas(widgetGraphData.loyaltyAccount.membershipStatusInfo.currentYearMqs.neededForNextTier)+" to "+widgetGraphData.loyaltyAccount.membershipStatusInfo.trackingTowardsTierDesc,"$"+barGraph.addCommas(widgetGraphData.loyaltyAccount.membershipStatusInfo.currentYearMqd.neededForNextTier)+" to "+widgetGraphData.loyaltyAccount.membershipStatusInfo.trackingTowardsTierDesc,"$"+barGraph.addCommas(generateCardSpendRange(widgetGraphData.loyaltyAccount.membershipStatusInfo.currentYearCardSpend.neededForNextTier,!0,!1))+" to go"],max:[widgetGraphData.loyaltyAccount.membershipStatusInfo.trackingTowardsTierDesc+" MQMs = "+barGraph.addCommas(widgetGraphData.loyaltyAccount.membershipStatusInfo.currentYearMqm.maxForCurrentTier),widgetGraphData.loyaltyAccount.membershipStatusInfo.trackingTowardsTierDesc+" MQSs = "+barGraph.addCommas(widgetGraphData.loyaltyAccount.membershipStatusInfo.currentYearMqs.maxForCurrentTier),widgetGraphData.loyaltyAccount.membershipStatusInfo.trackingTowardsTierDesc+" MQDs = $"+barGraph.addCommas(widgetGraphData.loyaltyAccount.membershipStatusInfo.currentYearMqd.maxForCurrentTier),"= $"+generateCardSpendRange(widgetGraphData.loyaltyAccount.membershipStatusInfo.currentYearCardSpend.maxForCurrentTier,!1,!0)]}:widgetGraphData.showSpendRequirement&&!widgetGraphData.loyaltyAccount.membershipStatusInfo.enrolledForCoBrandCard?{current:["MQMs: "+barGraph.addCommas(widgetGraphData.loyaltyAccount.membershipStatusInfo.currentYearMqm.availableBalance),"MQSs: "+barGraph.addCommas(widgetGraphData.loyaltyAccount.membershipStatusInfo.currentYearMqs.availableBalance),"MQDs: $"+barGraph.addCommas(widgetGraphData.loyaltyAccount.membershipStatusInfo.currentYearMqd.availableBalance),"CARD SPEND: $"+n,"Medallion qualification miles equal "+barGraph.addCommas(widgetGraphData.loyaltyAccount.membershipStatusInfo.currentYearMqm.availableBalance)+".&nbsp;","Medallion qualification segments equal "+barGraph.addCommas(widgetGraphData.loyaltyAccount.membershipStatusInfo.currentYearMqs.availableBalance)+".&nbsp;","Medallion qualification dollars equal "+barGraph.addCommas(widgetGraphData.loyaltyAccount.membershipStatusInfo.currentYearMqd.availableBalance)+".&nbsp;","Card spend is "+n+".&nbsp;"],needed:[barGraph.addCommas(widgetGraphData.loyaltyAccount.membershipStatusInfo.currentYearMqm.neededForNextTier)+" to "+widgetGraphData.loyaltyAccount.membershipStatusInfo.trackingTowardsTierDesc,barGraph.addCommas(widgetGraphData.loyaltyAccount.membershipStatusInfo.currentYearMqs.neededForNextTier)+" to "+widgetGraphData.loyaltyAccount.membershipStatusInfo.trackingTowardsTierDesc,"$"+barGraph.addCommas(widgetGraphData.loyaltyAccount.membershipStatusInfo.currentYearMqd.neededForNextTier)+" to "+widgetGraphData.loyaltyAccount.membershipStatusInfo.trackingTowardsTierDesc,""],max:[widgetGraphData.loyaltyAccount.membershipStatusInfo.trackingTowardsTierDesc+" MQMs = "+barGraph.addCommas(widgetGraphData.loyaltyAccount.membershipStatusInfo.currentYearMqm.maxForCurrentTier),widgetGraphData.loyaltyAccount.membershipStatusInfo.trackingTowardsTierDesc+" MQSs = "+barGraph.addCommas(widgetGraphData.loyaltyAccount.membershipStatusInfo.currentYearMqs.maxForCurrentTier),widgetGraphData.loyaltyAccount.membershipStatusInfo.trackingTowardsTierDesc+" MQDs = $"+barGraph.addCommas(widgetGraphData.loyaltyAccount.membershipStatusInfo.currentYearMqd.maxForCurrentTier),"= $"+generateCardSpendRange(widgetGraphData.loyaltyAccount.membershipStatusInfo.currentYearCardSpend.maxForCurrentTier,!1,!0)]}:{current:["MQMs: "+barGraph.addCommas(widgetGraphData.loyaltyAccount.membershipStatusInfo.currentYearMqm.availableBalance),"MQSs: "+barGraph.addCommas(widgetGraphData.loyaltyAccount.membershipStatusInfo.currentYearMqs.availableBalance),"Medallion qualification miles equal "+barGraph.addCommas(widgetGraphData.loyaltyAccount.membershipStatusInfo.currentYearMqm.availableBalance)+". ","Medallion qualification segments equal "+barGraph.addCommas(widgetGraphData.loyaltyAccount.membershipStatusInfo.currentYearMqs.availableBalance)+". "],needed:[barGraph.addCommas(widgetGraphData.loyaltyAccount.membershipStatusInfo.currentYearMqm.neededForNextTier)+" to "+widgetGraphData.loyaltyAccount.membershipStatusInfo.trackingTowardsTierDesc,barGraph.addCommas(widgetGraphData.loyaltyAccount.membershipStatusInfo.currentYearMqs.neededForNextTier)+" to "+widgetGraphData.loyaltyAccount.membershipStatusInfo.trackingTowardsTierDesc],max:[widgetGraphData.loyaltyAccount.membershipStatusInfo.trackingTowardsTierDesc+" MQMs = "+barGraph.addCommas(widgetGraphData.loyaltyAccount.membershipStatusInfo.currentYearMqm.maxForCurrentTier),widgetGraphData.loyaltyAccount.membershipStatusInfo.trackingTowardsTierDesc+" MQSs = "+barGraph.addCommas(widgetGraphData.loyaltyAccount.membershipStatusInfo.currentYearMqs.maxForCurrentTier)]},isSameProgramAndFutureYear()&&$.each(m.max,function(a){m.needed[a]=""}),barGraph.renderTexts(e,m,d)},renderToCompleteMessage:function(){},renderBar:function(a,b,c,d,e,f){var g=f.max,h=f.current,i={"light-blue":["#227ab8","#1a5f8d"],green:["#0f7944","#095730"]},j="#052F4D",k=g-h,l=a.set(),m=a.rect(b,c,g,d);m.attr({stroke:"#EEEEEE",fill:i[e][0]});var n=stripedRect(a,b,c,g,d,{lineSpacing:5,angle:45});n.attr({stroke:i[e][1],"stroke-width":"1","stroke-linecap":"round"});var o=a.rect(b,c-.4,g,d+.7);return o.attr({fill:j,"stroke-width":"1"}),o.animate({width:k,x:b+g-k},2e3,">"),l.push(m,o),l.attr({"stroke-width":"0"}),l.push(n),l},addCommas:function(a){a+="",x=a.split("."),x1=x[0],x2=x.length>1?"."+x[1]:"";for(var b=/(\d+)(\d{3})/;b.test(x1);)x1=x1.replace(b,"$1,$2");return x1+x2},renderCircleIcons:function(a,b){var c=8,d=b[0]+23,e=18,f=20,g=f+c,h=d+10,i=d+90,j=g,k=b[0]+38,l=b[0]+118;widgetGraphData.mileageReqChecked?(this.renderCircle(a,g,h,e,"#227ab8"),this.renderIcon(a,j,k,"check","#FFFFFF")):(this.renderCircle(a,g,h,e),this.renderIcon(a,j,k,"plane")),widgetGraphData.showSpendRequirement&&(widgetGraphData.spendReqChecked?(this.renderCircle(a,g,i,e,"#0f7944"),this.renderIcon(a,j,l,"check","#FFFFFF")):(this.renderCircle(a,g,i,e),this.renderIcon(a,j,l,"dollar","")))},renderCircle:function(a,b,c,d,e){var f=a.circle(b,c,d);f.attr(e?{fill:e,stroke:"#EEEEEE","stroke-width":"3"}:{fill:"#EEEEEE",stroke:"#EEEEEE","stroke-width":"3"})},renderIcon:function(a,b,c,d,e){b-=256,c-=260;var f="";"plane"==d?f="M 384.00,319.984l-91.41-91.411L 512.00,63.998L 447.995,0.00l-274.26,109.721L 87.385,23.368C 62.495-1.521, 27.734-7.485, 10.134,10.114 	C-7.465,27.713-1.50,62.477, 23.389,87.364l 86.343,86.342L0.00,447.997L 63.995,512.00L 228.59,292.566l 91.413,91.414l0.00,127.99 L 384.00,511.97  	l 31.996-95.994l 95.994-31.998l0.00-63.996 L 384.00,319.982 L 384.00,319.984 z":"dollar"==d?(f="M245.928,201.576c-26.987-13.494-24.12-42.729,15.911-44.978 c32.402-1.821,66.144,10.462,86.789,17.485c0,0,12.925-56.687,15.918-69.75c-29.897-9.35-55.788-14.038-81.168-15.781V50h-59.225 v42.012c-65.233,14.239-91.493,62.386-91.493,97.42c0,84.558,101.107,98.352,130.492,111.545 c34.783,14.993,27.338,41.527-2.221,47.978c-33.792,7.374-79.485-7.985-110.803-20.204l-19.595,68.252 c27.656,15.242,65.194,25.543,93.62,27.977V462h59.225v-41.391c53.217-7.485,98.167-40.343,98.088-98.042 C381.466,247.904,301.289,226.614,245.928,201.576z",c-=1):(f="M 96.00,192.00L0.00,288.00L 192.00,480.00L 512.00,160.00L 416.00,64.00L 192.00,288.00 z",c-=15);var g=a.path(f);g.translate(b,c),g.attr(e?{fill:e,stroke:"none"}:{fill:"#333333",stroke:"none"}),"plane"==d?(g.rotate(90),g.scale(.027)):g.scale("dollar"==d?.038:.028)},renderTexts:function(a,b,c){var d=containerWidth-10,e=containerWidth-1,f=50,g=trackerUserIE?17:14,h=trackerUserIE||$.browser.msie&&$.browser.version<11?35:32,i=trackerUserIE?17:14,j="Medallion Summary",k="Miles Summary",l="Dollar Summary",m="MQD Waiver";widgetGraphData.mileageReqChecked&&(k="Mileage Requirement Completed"),widgetGraphData.spendReqChecked&&(l="Spend Requirement Completed");var n=a.set(),o=a.set(),p=a.set(),q=a.set(),r=a.set(),s=a.set(),t=a.text(f,c[0]+g,j);$(t.node).wrap("<h3></h3>");var u=a.text(27,58,k),v=a.text(f,c[0]+g,b.current[0]);if(!widgetGraphData.mileageReqChecked){var w=a.text(d,c[0]+i,b.needed[0]);p.push(w)}var x=a.text(e,c[0]+h,b.max[0]),y=a.text(f,c[1]+g,b.current[1]);if(!widgetGraphData.mileageReqChecked){var z=a.text(d,c[1]+i,b.needed[1]);p.push(z)}var A=a.text(e,c[1]+h,b.max[1]);if(n.push(t,u),o.push(v,y),q.push(x,A),widgetGraphData.showSpendRequirement){var B=a.text(27,138,l),C=a.text(f,c[2]+g,b.current[2]);if(!widgetGraphData.spendReqChecked){var D=a.text(d,c[2]+i,b.needed[2]);p.push(D)}var E=a.text(e,c[2]+h,b.max[2]),F=a.text(f,c[3]+g,b.current[3]);if(!widgetGraphData.spendReqChecked){var G=a.text(d,c[3]+i,b.needed[3]);p.push(G)}var H=a.text(e,c[3]+h,m);H.attr({href:"/content/www/en_US/skymiles/about-skymiles/medallion-program/medallion-qualification-dollars.html"});var I=a.text(e,c[3]+h,b.max[3]);H.attr({x:e-I.getBBox().width-3});var J=a.path("M"+(e-I.getBBox().width-56)+","+(c[3]+h+5)+" L"+(e-I.getBBox().width-3)+","+(c[3]+h+5));H.node.onfocus=function(){H.node.closest("a").focus()},H.hover(function(){H.node&&J.attr({stroke:"#3169BB"})},function(){H.node&&J.attr({stroke:"#EEEEEE"})});var K=!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,L=!!window.chrome&&!K;H.node.onblur=function(a){L&&(a.preventDefault(),$("#btnGoToMyDelta").focus())},$("#btnGoToMyDelta").keydown(function(a){var b=a.keyCode||a.which;a.shiftKey&&"9"==b&&L&&(a.preventDefault(),H.node.closest("a").focus())}),r.push(H),s.push(J),n.push(B),o.push(C,F),q.push(E,I,H)}n.attr({"font-size":1,fill:"#FFFFFF","fill-opacity":0,"font-family":trackerFontFamilyVar}),o.attr({fill:"#FFFFFF","font-weight":"bold",stroke:"none","font-size":12,"text-anchor":"start","font-family":trackerFontFamilyVar}),p.attr({fill:"#FFFFFF","text-anchor":"end","font-size":11,"font-family":trackerFontFamilyVar}),q.attr({fill:"#343434","text-anchor":"end","font-size":9,"font-weight":"normal","font-family":trackerFontFamilyVar}),r.attr({fill:"#3169BB",cursor:"pointer","font-family":trackerFontFamilyVar}),s.attr({stroke:"#EEEEEE"});var M=[];widgetGraphData.showSpendRequirement?(M.push(b.current[4],b.needed[0],".<br>"),M.push(b.current[5],b.needed[1],".<br>"),M.push(b.current[6],b.needed[2],".<br>"),M.push(b.current[7],b.needed[3]),"."):(M.push(b.current[2],b.needed[0],".<br>"),M.push(b.current[3],b.needed[1],".")),$("#offscreenTracker").append(M)},computeBarDisplay:function(a,b){return a/100*b}};!function(){var a=this;a.DL_CityPicker=function(){function a(a){null!=a&&a.length>0&&a.fadeToggle(200,function(){i=$(this).is(":visible")?a:null})}var b=null,c=null,d=null,e=null,f=!1,g=null,h=null,i=null;$(document).click(function(b){$(b.target).closest(i).length||a(i)});var j=function(a){m(function(){l(function(){k(),q(),u(),"function"==typeof a&&a()})}),e.addClass("cp_arrowimage_lookup_wrapper"),f=!0},k=function(){o(e.find(".cp_cityPicker_countries"),b),o(e.find(".cp_cityPicker_uscanadastates"),c),o(e.find(".cp_cityPicker_alphabetical"),d),n(e.find(".cp_cityPicker_countries"),b,!0),n(e.find(".cp_cityPicker_uscanadastates"),c,!0),n(e.find(".cp_cityPicker_alphabetical"),null,!1),n(e.find(".cp_cityPicker_countries_sub"),null,!1),n(e.find(".cp_cityPicker_uscanadastates_sub"),null,!1)},l=function(a){var e,f="/flightinfo/getCityJSON";$.getJSON(f,function(a){e=a}).success(function(){}).error(function(){}).complete(function(){null!=e&&(b=e.ByCountry,c=e.USCanada,d=e.AllCities),"function"==typeof a&&a()})},m=function(a){var b="/flightinfo/getCityContent";e=$(document.createElement("div")),e.empty(),e.load(b,function(){"function"==typeof a&&a()})},n=function(b,c,d){b.change(function(){var f=b.children("option:selected").val();if(d){var h=b.parent().siblings(".cp_cityPickerContent .cp_selectBottom").children(".cp_cityPickerContent .cp_selectElement");o(h,c[f].cities,!1)}else g.val(f),a(e)})},o=function(a,b){a.html("");var c;for(c=0;c<b.length;c++)a.append($("<option></option>").val(b[c].value).html(b[c].label))},p=function(){e.find(".cp_srcDestHdr").html(h)},q=function(){e.find(".cp_country_tab").bind("click",function(){t()}),e.find(".cp_us_canada_tab").bind("click",function(){s()}),e.find(".cp_alphabetically_tab").bind("click",function(){r()})},r=function(){e.find(".cp_us_canada_tab").addClass("cp_tab_button_inactive"),e.find(".cp_country_tab").addClass("cp_tab_button_inactive"),e.find(".cp_alphabetically_tab").removeClass("cp_tab_button_inactive"),e.find(".cp_alphabetically_tab").addClass("cp_tab_button_active"),e.find(".cp_us_canada_tab").removeClass("cp_tab_button_active"),e.find(".cp_country_tab").removeClass("cp_tab_button_active"),e.find(".cp_country_button").hide(),e.find(".cp_uscanada_button").hide(),e.find(".cp_alphabetically_button").show(),e.find(".cp_cityPicker_alphabetical option:selected").removeAttr("selected")},s=function(){e.find(".cp_us_canada_tab").removeClass("cp_tab_button_inactive"),e.find(".cp_country_tab").addClass("cp_tab_button_inactive"),e.find(".cp_alphabetically_tab").addClass("cp_tab_button_inactive"),e.find(".cp_us_canada_tab").addClass("cp_tab_button_active"),e.find(".cp_country_tab").removeClass("cp_tab_button_active"),e.find(".cp_alphabetically_tab").removeClass("cp_tab_button_active"),e.find(".cp_country_button").hide(),e.find(".cp_uscanada_button").show(),e.find(".cp_alphabetically_button").hide(),e.find(".cp_cityPicker_uscanadastates_sub").html(""),e.find(".cp_cityPicker_uscanadastates option:selected").removeAttr("selected")},t=function(){e.find(".cp_country_tab").removeClass("cp_tab_button_inactive"),e.find(".cp_us_canada_tab").addClass("cp_tab_button_inactive"),e.find(".cp_alphabetically_tab").addClass("cp_tab_button_inactive"),e.find(".cp_country_tab").addClass("cp_tab_button_active"),e.find(".cp_us_canada_tab").removeClass("cp_tab_button_active"),e.find(".cp_alphabetically_tab").removeClass("cp_tab_button_active"),e.find(".cp_country_button").show(),e.find(".cp_uscanada_button").hide(),e.find(".cp_alphabetically_button").hide(),e.find(".cp_cityPicker_countries_sub").html(""),e.find(".cp_cityPicker_countries option:selected").removeAttr("selected")},u=function(){e.find(".cp_close_image").bind("click",function(){a(e)})},v=function(){var a=g.position(),b=a.left,c=a.top+28;e.css("left",b),e.css("top",c),e.draggable()},w=function(){var b=g.parent();b.append(e),p(),t(),v(),a(e)},x=function(a,b){g=$(b),h=a,0==f?j(function(){w()}):w()};return{init:function(){j()},open:function(a,b){x(a,b)}}}}();var FlightStatusWidget=function(){function a(){$.validator.addMethod("FLIFO_notEqual",function(a,b,c){return""==$("#FLIFO_flightNumber").val()||$("#FLIFO_flightNumber").val().toUpperCase()==j.toUpperCase()?a.toUpperCase()!=$(c).val().toUpperCase()||a.toUpperCase()==k.toUpperCase():!0},e),$.validator.addMethod("FLIFO_notPlaceHolder",function(a,b,c){return a.toUpperCase()!=c.toUpperCase()}),$.validator.addMethod("FLIFO_flightCityPairValidate",function(){return""!=$("#FLIFO_flightNumber").val()&&$("#FLIFO_flightNumber").val().toUpperCase()!=j.toUpperCase()?($("#FLIFO_searchOption").val(h),!0):""!=$("#FLIFO_arrivalAirport").val()&&$("#FLIFO_arrivalAirport").val().toUpperCase()!=k.toUpperCase()&&""!=$("#FLIFO_departureAirport").val()&&$("#FLIFO_departureAirport").val().toUpperCase()!=k.toUpperCase()?($("#FLIFO_searchOption").val(i),!0):!1}),$("#FLIFO_flight_status").validate({onkeyup:!1,onclick:!1,onfocusout:function(a){"FLIFO_flightNumber"===a.id?""!=$("#FLIFO_flightNumber").val()&&$("#FLIFO_flightNumber").val().toUpperCase()!=j.toUpperCase()&&($("#FLIFO_arrivalAirport").val(""),$("#FLIFO_departureAirport").val("")):("FLIFO_arrivalAirport"===a.id||"FLIFO_departureAirport"===a.id)&&""!=$("#FLIFO_arrivalAirport").val()&&$("#FLIFO_arrivalAirport").val().toUpperCase()!=k.toUpperCase()&&""!=$("#FLIFO_departureAirport").val()&&$("#FLIFO_departureAirport").val().toUpperCase()!=k.toUpperCase()&&$("#FLIFO_flightNumber").val("")},groups:{citypair:"flightNumber departureAirport arrivalAirport"},submitHandler:function(a){FlightStatusWidget.setOmnitureTracking(),a.submit()},showErrors:function(){this.defaultShowErrors(),FlightStatusWidget.setPlaceholderTextIE(),delta.navwidget.adjustWidgetHeight("status")},rules:{flightNumber:{FLIFO_flightCityPairValidate:""},departureAirport:{FLIFO_flightCityPairValidate:"",FLIFO_notEqual:"#FLIFO_arrivalAirport"},arrivalAirport:{FLIFO_flightCityPairValidate:"",FLIFO_notEqual:"#FLIFO_departureAirport"}},messages:{flightNumber:{FLIFO_flightCityPairValidate:f},departureAirport:{FLIFO_flightCityPairValidate:f},arrivalAirport:{FLIFO_flightCityPairValidate:f}}})}function b(){try{var a=new AirportLookup({targetInp:"#FLIFO_departureAirport",displayTitle:k,serverUrl:window.location.host});a.attachEventHandlers();var b=new AirportLookup({targetInp:"#FLIFO_arrivalAirport",displayTitle:k,serverUrl:window.location.host});b.attachEventHandlers()}catch(c){}}function c(a){var a=new Date,b=new Date;b.setDate(a.getDate()-1);var c=new Date;c.setDate(a.getDate()+1);var d="yy-mm-dd",e="MM dd yy",f=$.datepicker.formatDate(d,b),g=$.datepicker.formatDate(d,a),h=$.datepicker.formatDate(d,c),i="Yesterday, "+$.datepicker.formatDate(e,b),j="Today, "+$.datepicker.formatDate(e,a),k="Tomorrow, "+$.datepicker.formatDate(e,c),l=$("#FLIFO_flightDate");l.empty(),$("<option />",{value:f,text:i}).appendTo(l),$("<option />",{value:g,text:j}).attr("selected","selected").appendTo(l),$("<option />",{value:h,text:k}).appendTo(l)}var d={},e="Please enter different arrival and departure cities.",f="Please enter either a valid flight number or arrival and departure cities to continue.",g=!1,h="FLIGHTNUMBER",i="CITYPAIR",j="ex. 2049",k="City or Airport";return d.setOmnitureTracking=function(){try{if($("#FLIFO_searchOption").val()==h){var a="delta "+$("#FLIFO_flightNumber").val();s.linkTrackVars="prop17",s.prop17=a,s.tl(this,"o","flight status search: flight number"),s.prop17=""}else{var a=$("#FLIFO_departureAirport").val()+"-"+$("#FLIFO_arrivalAirport").val();s.linkTrackVars="prop18",s.prop18=a,s.tl(this,"o","flight status search: O&D"),s.prop18=""}}catch(b){DeltaUtils.logMessage("FlightStatusSearchWidget setOmnitureTracking error "+b)}},d.setPlaceholderTextIE=function(){if($.browser.msie){var a=$("#FLIFO_flightNumber"),b=$("#FLIFO_departureAirport"),c=$("#FLIFO_arrivalAirport");""==a.val()&&(a.val(j),a.addClass("placeholder")),""==b.val()&&(b.val(k),b.addClass("placeholder")),""==c.val()&&(c.val(k),c.addClass("placeholder"))}},d.resetField=function(a,b){var c=$(a);c.val()==b&&c.val("")},d.init=function(){try{var d=$("#FLIFO_flight_status select");if($.browser.msie){var e=$("#FLIFO_flightNumber"),f=$("#FLIFO_departureAirport"),h=$("#FLIFO_arrivalAirport");d.change(function(){this.blur()}),e.val(j),f.val(k),h.val(k),$(document).on("click.flightStatusFlightNum focus.flightStatusFlightNum","#FLIFO_flightNumber",function(){FlightStatusWidget.resetField(this,j)}),$(document).on("click.flightStatusCityPair focus.flightStatusCityPair","#FLIFO_departureAirport, #FLIFO_arrivalAirport",function(){FlightStatusWidget.resetField(this,k)}),$(document).on("blur.flightStatusFields","#FLIFO_flightNumber, #FLIFO_departureAirport, #FLIFO_arrivalAirport",function(){FlightStatusWidget.setPlaceholderTextIE()})}var i=new Date;c(i),FlightStatusWidget.optionChanged(!1),a(),DeltaUtils.addAutocomplete("#FLIFO_departureAirport","airportCode"),DeltaUtils.addAutocomplete("#FLIFO_arrivalAirport","airportCode"),$(document).on("change.flightStatusFields","#FLIFO_flightNumber, #FLIFO_departureAirport,#FLIFO_arrivalAirport",function(){var a=$(this);a.val($.trim(a.val().toUpperCase()))}),$(document).on("change.searchOption","#FLIFO_searchOption",function(){FlightStatusWidget.resetValidation(),FlightStatusWidget.optionChanged(!0)}),g||(b(),g=!0),setTimeout("$('#FLIFO_flight-status-form select').focus().blur();",2)}catch(l){DeltaUtils.logMessage("FlightStatusSearchWidget init error "+l)}},d.optionChanged=function(a){$("#FLIFO_cityPairWrapper"),$("#FLIFO_flightNumberWrapper");DeltaUtils.exists(a)&&a!==!0||delta.navwidget.adjustWidgetHeight("status")},d.resetValidation=function(){var a=$("#FLIFO_flight_status");a.validate().resetForm(),a.find("input").removeClass("error")},d}();if($(document).ready(function(){DeltaUtils.setPlaceholderText("#FLIFO_flight_status input[placeholder]")}),null==dwr)var dwr={};if(null==dwr.engine&&(dwr.engine={}),null==DWREngine)var DWREngine=dwr.engine;if(null==CartDwr)var CartDwr={};CartDwr._path="/mymerch/dwr",CartDwr.addToCart=function(a,b){dwr.engine._execute(CartDwr._path,"CartDwr","addToCart",a,!1,!1,b)},CartDwr.addToCartInsurance=function(a,b){dwr.engine._execute(CartDwr._path,"CartDwr","addToCartInsurance",a,!1,!1,b)},CartDwr.getCartCount=function(a){dwr.engine._execute(CartDwr._path,"CartDwr","getCartCount",!1,!1,a)},CartDwr.retrieveInCartProducts=function(a){dwr.engine._execute(CartDwr._path,"CartDwr","retrieveInCartProducts",!1,!1,a)},CartDwr.hasPnrRelatedItemsInCart=function(a,b){dwr.engine._execute(CartDwr._path,"CartDwr","hasPnrRelatedItemsInCart",a,!1,!1,b)};var myTripsWidget=function(){function a(){$("select#searchOption").bind("change",c),$("#confNoButton").bind("click",h),$("#creditCardButton").bind("click",g),$("#ticketButton").bind("click",f),$(".ui-dialog-titlebar-close").bind("click",b),($.browser.msie||$.browser.mozilla&&parseInt($.browser.version,10)<8)&&($("[placeholder]").bind("focus",d),$("[placeholder]").bind("blur",e))}function b(){q.dialog("close")}function c(){$("select#searchOption option:selected").each(function(){var a=$(this).val();a="#"+a,n(),r.form_name=a,$(a).show(),$(".myTripsWidgetErrorBox").html(""),$(".myTripsWidgetErrorBox").hasClass("error")&&$(".myTripsWidgetErrorBox").removeClass("error"),$(".myTripsWidgetStrutsErrorBox").length&&$("#selectedOption").length?$(a).find(".inputFieldClass").addClass("redBorder"):$(a).find(".inputFieldClass").hasClass("redBorder")&&$(a).find(".inputFieldClass").removeClass("redBorder"),$(".inputFieldClass").each(function(){"firstName"==$(this).attr("name")?$(this).val(r.first_name):"lastName"==$(this).attr("name")&&$(this).val(r.last_name)})})}function d(){var a=$("#findMyTripsFormContainer input[placeholder]");a.val()==a.attr("placeholder")&&a.val("")}function e(){var a=$("#findMyTripsFormContainer input[placeholder]");(""==a.val()||a.val()==a.attr("placeholder"))&&a.val(a.attr("placeholder"))}function f(){fName="confFName",lName="confLName",accNum="confNo",form="widgetSearchUsingETicketNo",m(form,accNum,fName,lName)}function g(){fName="confFName",lName="confLName",accNum="confNo",form="widgetSearchUsingCreditDebitNo",m(form,accNum,fName,lName)}function h(){var a=$("#findMyTripsFormContainer input[placeholder]");($.browser.msie||$.browser.mozilla&&parseInt($.browser.version,10)<8)&&a.val()==a.attr("placeholder")&&a.val(""),fName="confFName",lName="confLName",accNum="confNo",form="widgetSearchUsingConfirmationNo",m(form,accNum,fName,lName)}function i(a){var b={recordLocator:a};CartDwr.hasPnrRelatedItemsInCart(b,{async:!1,callback:k,errorHandler:j})}function j(){DeltaUtils.logMessage("Not verified if the record locator has PNR related items in cart")}function k(a){C=a}function l(){$("#cartCountNotification").html("You have pending purchase within your cart!\n\nIf you navigate away from this page, data that you have entered may not be saved."),q=$("#cartCountNotification").dialog({autoOpen:!1,modal:!0,width:400,height:200,resizable:!1,position:{my:"center",at:"center",of:window},create:function(a){var b=$(a.target).parent();" "===b.find(".ui-dialog-title").html()&&b.find(".ui-dialog-titlebar").addClass("ui-dialog-title");var c='<div class="socialDeltaLogo"><img src="//content.delta.com/content/dam/delta-applications/common/logos/delta/Delta_st_color.png" id="myNewImage" class="deltaImage" alt=""/></div>';b.find(".ui-dialog-titlebar").children().hasClass("socialDeltaLogo")||b.find(".ui-dialog-titlebar").append(c)},buttons:{OK:{text:"OK","class":"ui-button-primary",click:function(){return $(this).dialog("close"),"cartCount"==accNum?void $("#widgetUpcomingTripsForm").submit():(D=!1,void $("#confNoButton").trigger("click"))}},Cancel:{text:"Cancel","class":"ui-button-secondary",click:function(){$(this).dialog("close"),window.location="/cart/activity/reviewcart"}}}}),$(".ui-widget-overlay").css("zIndex","1001")}function m(a,b,c,d){var e="#"+a,f="",g=$.trim($("#"+c).val()),h=$.trim($("#"+d).val()),j=$.trim($("#"+b).val());p("#"+c,g),p("#"+d,h),o("#"+b,j),j=j.replace(/\s/g,""),$(e).validate({focusInvalid:!1,onfocusout:!1,onkeyup:!1,submitHandler:function(){return"confNo"==j&&D&&(i($("#"+j).val()),C&&q.dialog("open")),_showLoader(),showMainLoader(),f="widgetSearchUsingConfirmationNo"==a?"confirmation":"widgetSearchUsingCreditDebitNo"==a?"credit card":"ticket number",TripsWidgetOmnitureTracking.trackSearchType(f),!0},rules:{firstName:{required:!0,namedata:!0},lastName:{required:!0,namedata:!0},confirmationNo:{required:!0,verifyAccNumberFormat:t,confirmationCode:!0},cardNo:{required:!0,verifyAccNumberFormat:t,minlength:13},eTicketNo:{required:!0,eTicketNumber:!0,minlength:13}},messages:{firstName:{required:w,namedata:w},lastName:{required:x,namedata:x},confirmationNo:{required:v,minlength:u},cardNo:{required:z,verifyAccNumberFormat:B,minlength:B},eTicketNo:{required:y,eTicketNumber:A,minlength:A}}}),$.validator.addMethod("verifyAccNumberFormat",function(a,b,c){var d=!1,e=new RegExp(c);return e.test(a)&&(d=!0),d},u),$.validator.addMethod("confirmationCode",function(a){return""==a||a.length>=6&&a.length<=15&&null!=a.match(/^[a-z0-9]+$/i)?!0:!1},u)}function n(){$("#widgetSearchUsingConfirmationNo").hide(),$("#widgetSearchUsingCreditDebitNo").hide(),$("#widgetSearchUsingETicketNo").hide()}function o(a,b){b=b.replace(/\s/g,""),$.trim(b),$(a).val(b.replace(/[^A-Za-z0-9\s]+/g,""))}function p(a,b){b=b.replace(/\s{2,}/g," "),$.trim(b),$(a).val(b.replace(/[^A-Za-z\x2D\xC0-\xFF\s]+/g,""))}var q,r={first_name:"",last_name:"",form_name:"#widgetSearchUsingConfirmationNo"},s={},t=new RegExp(/^[A-Za-z0-9]*$/),u=(new RegExp(/^[0-9]+$/),$("#invalidRecLocFormat").val()),v=($("#recLocReqd").val(),$("#confReqd").val()),w=$("#firstNameReqd").val(),x=$("#lastNameReqd").val(),y=$("#ticketNumReqd").val(),z=$("#ccNumberReqd").val(),A=$("#invalidTicketNumber").val(),B=$("#invalidCCNumber").val(),C=!1,D=!0,E=window.location.hostname;return currentContext=window.location.pathname,s.init=function(){r.first_name="",r.last_name="",r.form_name="#widgetSearchUsingConfirmationNo",E!=mytripswidHostServer&&(E.indexOf("delta.com")>=0&&1!=currentContext.indexOf("sd")||E.indexOf("localhost")>=0)&&(document.forms.widgetSearchUsingETicketNo.action="https://"+E+"/mytrips/findPnr.action",document.forms.widgetSearchUsingConfirmationNo.action="https://"+E+"/mytrips/findPnr.action",document.forms.widgetSearchUsingCreditDebitNo.action="https://"+E+"/mytrips/findPnrList.action"),n(),$(".myTripsWidgetStrutsErrorBox").length&&$("#selectedOption").length&&(n(),"ticketNo"===$("#selectedOption").val()?($("#widgetSearchUsingETicketNo").show(),$("select#searchOption").removeAttr("selected").find("#ticketNumber").attr("selected","selected")):"creditCardNo"===$("#selectedOption").val()&&($("#widgetSearchUsingCreditDebitNo").show(),$("select#searchOption").removeAttr("selected").find("#creditCardNumber").attr("selected","selected"))),$("#cartCountNotification").length<1&&$("body").append('<div id="cartCountNotification"></div>'),l(),a(),$("select#searchOption").trigger("change"),$("#confNoWidgetTooltip").jtooltip(),$("#eTicketWidgetTooltip").jtooltip(),s.setFormToDefault()},s.adjustForm=function(){var a=$(".widget-topper").height()+$(".infoContainer").height();$(".advertisements").css("top",a+"px"),$("div#findMyTripsFormContainer, #widget-mydelta").animate({height:a+"px"},50),$("div#widget-mytrips").animate({height:a+"px"},50)},s.setFormToDefault=function(){$inputSearch=r.form_name+" .inputFieldClass",$($inputSearch).each(function(){"firstName"==$(this).attr("name")?r.first_name=$(this).val():"lastName"==$(this).attr("name")?r.last_name=$(this).val():$(this).val("")}),$(".inputFieldClass").hasClass("redBorder")&&$(".inputFieldClass").removeClass("redBorder"),$(".myTripsWidgetErrorBox").html(""),$(".myTripsWidgetErrorBox").hide(),$(".myTripsWidgetErrorBox").hasClass("error")&&$(".myTripsWidgetErrorBox").removeClass("error"),$(".myTripsWidgetStrutsErrorBox").html(""),$("#aToolTip").is(":visible")&&$("#aToolTipCloseBtn").trigger("click"),($.browser.msie||$.browser.mozilla&&parseInt($.browser.version,10)<8)&&$("#findMyTripsFormContainer [placeholder]").trigger("blur"),($.browser.chrome||$.browser.safari||$.browser.webkit)&&($("#searchOption").hasClass("searchOptionWebkit")?$("#searchOption").removeClass("searchOptionWebkit").addClass("searchOptionWebkit"):$("#searchOption").addClass("searchOptionWebkit"))},s.bindModalEvents=function(){var a=$("#myDeltaSummaryUpcomingTrips #mydelta-flight-details a.anchor_style");

a.attr("onclick",""),a.on("click",function(){var a=CustomerInfo.getCartCount()>0;a&&(accNum="cartCount",q.dialog("open"))})},s}(),TripsWidgetOmnitureTracking={trackSearchType:function(a){s.linkTrackVars="prop32",s.events="",s.prop32=a,s.pageName="My Trips",s.tl(!0,"o","my trips: search type"),s.events=s.prop45=s.prop32=""}},CarWidget={needsInit:!0,isAdvancedSearch:!1,isCarPrefillCallRequired:!0,init:function(){CarWidget.hideCarValidateMessage(),this.needsInit&&(this.needsInit=!1,CarWidget.uiBehaviours(),$("#pickUpTime").val("10:00 AM"),$("#dropOffTime").val("10:00 AM")),$(document).on("click","#CarWidgetContainer #pickUpDateCallIcon",function(){$("#pickUpWidgetDate").trigger("focus")}),$(document).on("click","#CarWidgetContainer #dropOffDateCallIcon",function(){$("#dropOffWidgetDate").trigger("focus")})},loadRecentSearches:function(a){try{var b={prefillAttribute:a},c={callback:this.populateSearchCriteria};prefill.retrievePrefillData(b,c)}catch(d){prefillError(d)}},populateSearchCriteria:function(a){if(void 0!=a&&null!=a&&""!=a){$("#WidgetCarPreferredTrips").removeClass("hideElementForFuture"),$("#WidgetCarPreferredTrips").show(),$("#carRecentSearches").val(a);var b=a.split("|");if(b.length>0){var c=[];c.push("<option value='-1'>Recent Searches</option>");for(var d=0,e=0;e<b.length&&4>d;e++){var f=b[e].split("-");if(("mm/dd/yyyy"!=f[4]&&void 0!=f[4]||"mm/dd/yyyy"!=f[5]&&void 0!=f[5])&&f.length>0){var g=MerchandisingWidget.getDateForRecentSearch(f[4])+"-"+MerchandisingWidget.getDateForRecentSearch(f[5])+"-"+f[0]+"-"+f[2]+"-"+f[6]+"-"+f[7];g=MerchandisingWidget.truncate(g,33),c.push("<option value='"+f[0]+"-"+f[1]+"-"+f[2]+"-"+f[3]+"-"+f[4]+"-"+f[5]+"-"+f[6]+"-"+f[7]+"-"+f[8]+"'>"+g+"</option>"),d++}}$("#selectCarWidget").html(c.join(""))}}$("#carWidgetBottomDiv").addClass("hideElementForFuture"),delta.navwidget.adjustWidgetHeight("booking")},setRecentSearchCriteria:function(){var a="",b=$("#carLocation").val()+"-"+$("#predictiveLocationCode").val()+"-"+$("#dropLocationWidget").val()+"-"+$("#dropOffWidgetLocationCode").val()+"-"+$("#pickUpWidgetDate").val()+"-"+$("#dropOffWidgetDate").val()+"-"+$("#pickUpTime").val()+"-"+$("#dropOffTime").val()+"-"+$("#ageWidget").val();if(null!=$("#carRecentSearches").val()&&""!=$("#carRecentSearches").val()){var c=$("#carRecentSearches").val().split("|");if(void 0!=c&&-1!=$("#carRecentSearches").val().indexOf(b))return;if(c.length>3){a=c[0];for(var d=1;3>d;d++)a=a+"|"+c[d];a=b+"|"+a}else a=b+"|"+$("#carRecentSearches").val()}else a=b;saveSingleAttributeValuePair("searchCarForm",a)},showAgePopUp:function(a,b,c,d,e,f,g,h,i){$("<div id='"+a+"Content' class='topContentLoader'></div>").appendTo(document.body).load(b,function(b,j){"success"==j&&DeltaUtils.showToolTip(a,b,c,d,e,f,g,h,i)})},submitAction:function(a){$("form#searchCarWidgetForm").attr("action",a)},submitActionForAdvSearch:function(){isAdvancedSearch=!0,$("#carWidgetSearchType").val("showAdvancedCarSearch"),$("#searchCarWidgetForm").validate().cancelSubmit=!0;var a="https://"+window.location.hostname+"/merch/advancedSearchAction.action";$("#searchCarWidgetForm").attr("action",a),$("#carModuleName").val("car"),$("#searchCarWidgetForm").submit()},hideCarValidateMessage:function(){"none"!=$("#pickupWidgetLocationError").css("display")&&($("#pickupWidgetLocationError").css("display","none"),$("#carLocation").val("Airport or Metro City").addClass("auto-hint").removeClass("error")),"none"!=$("#carSearchDropLocationWidgetError").css("display")&&($("#carSearchDropLocationWidgetError").css("display","none"),$("#dropLocationWidget").val("Airport or Metro City").addClass("auto-hint").removeClass("error")),"none"!=$("#pickupDateWidgetError").css("display")&&($("#pickupDateWidgetError").css("display","none"),$("#pickUpWidgetDate").val("mm/dd/yyyy").addClass("auto-hint").removeClass("error")),"none"!=$("#dropOffDateWidgetError").css("display")&&($("#dropOffDateWidgetError").css("display","none"),$("#dropOffWidgetDate").val("mm/dd/yyyy").addClass("auto-hint").removeClass("error")),"none"!=$("#widget_ageError").css("display")&&($("#widget_ageError").css("display","none"),$("#ageWidget").val("SELECT").addClass("auto-hint").removeClass("error")),"none"!=$("#dropOffTimeWidgetError").css("display")&&($("#dropOffTimeWidgetError").css("display","none"),$("#pickUpTime").val("10:00 AM"),$("#dropOffTime").val("10:00 AM").removeClass("error")),$("div#CarWidgetContainer label.error").css("display","none"),delta.navwidget.adjustWidgetHeight("booking")},uiBehaviours:function(){CarWidget.isCarPrefillCallRequired&&(CarWidget.loadRecentSearches("searchCarForm"),CarWidget.isCarPrefillCallRequired=!1),MerchandisingWidget.setCarCalendarControl("pickUpWidgetDate","dropOffWidgetDate","Pick-Up Date","Drop-Off Date");var a="Minimum age requirements vary by vehicle and renting location. In most countries, age differential surcharges will generally apply	for renters under age 25. Exceptions do apply. Providing your age range enables us to quote the appropriate fees and display appropriate fleet.";DeltaUtils.showToolTip("ageHoverWidgetId",a,0,6,"",250,"",""),DeltaUtils.setPlaceholderText("#CarWidgetContainer input[placeholder]"),$("#pickUpWidgetDate, #dropOffWidgetDate, #carLocation, #dropLocationWidget").blur(function(){""==$(this).val()&&("carLocation"==$(this).attr("id")||"dropLocationWidget"==$(this).attr("id")?($(this).val("Airport or Metro City"),$(this).addClass("auto-hint")):($(this).val("mm/dd/yyyy"),$(this).addClass("auto-hint")))}),$("#selectCarWidget").change(function(){if(-1!=$("#selectCarWidget option:selected").text().indexOf("-")){var a=$("#selectCarWidget").val().split("-");$("#carLocation").val(a[0]),$("#predictiveLocationCode").val(a[1]),a[0]!=a[2]?($("#dropOffWidgetLocationChk").attr("checked",!0),$("#dropOffLocation").show()):($("#dropOffWidgetLocationChk").attr("checked",!1),$("#dropOffLocation").hide()),$("#dropLocationWidget").val(a[2]),$("#dropOffWidgetLocationCode").val(a[3]),$("#pickUpWidgetDate").val(a[4]),$("#dropOffWidgetDate").val(a[5]),$("#pickUpTime").val(a[6]),$("#dropOffTime").val(a[7]),$("#ageWidget").val(a[8]),delta.navwidget.adjustWidgetHeight("booking")}}),$(".ui-modal-link").click(function(a){a.preventDefault(),$($(this).attr("href")).dialog("open")}),$("#dropOffWidgetLocationChk").click(function(){$(this).prop("checked")?($("#dropOffLocation").show(),$("#dropOfLocationText").hide()):$("#dropOffLocation").hide(),delta.navwidget.adjustWidgetHeight("booking")}),$("#closeDropOffLocation").click(function(){$("#dropOffWidgetLocationChk").removeAttr("checked"),$("#dropOfLocationText").show(),$("#dropOffLocation").hide(),delta.navwidget.adjustWidgetHeight("booking")}),$("div.ui-modal").dialog({autoOpen:!1,modal:!0,width:499,minHeight:150,create:function(a){var b=$(a.target).parent();"&nbsp;"===b.find(".ui-dialog-title").html()&&b.find(".ui-dialog-titlebar").addClass("ui-dialog-no-title")}}),$("#carLocation").autocomplete({source:CarWidgetLocationPrediction.carWidgetLocationPredictionHandler,select:function(a,b){$("#predictiveLocationCode").val(b.item.id),$("#pickUpAirportName").val(b.item.airportName)}}),$("#dropLocationWidget").autocomplete({source:CarWidgetLocationPrediction.carWidgetLocationPredictionHandler,select:function(a,b){$("#dropOffWidgetLocationCode").val(b.item.id)}}),$("#carLocation,#dropLocationWidget,#pickUpWidgetDate,#dropOffWidgetDate").focus(function(){if("carLocation"==$(this).attr("id")||"dropLocationWidget"==$(this).attr("id")){var a=[];a[0]="A",CarWidgetLocationPrediction.widgetLocationCodes=a}"pickUpWidgetDate"==$(this).attr("id")||"dropOffWidgetDate"==$(this).attr("id")?"mm/dd/yyyy"==$(this).val()&&($(this).val(""),$(this).removeClass("auto-hint")):"Airport or Metro City"==$(this).val()&&($(this).val(""),$(this).removeClass("auto-hint"))}),$("#carTripSubmit").click(function(){$("#carLocation").attr("data-isCarPickUpPredictiveText","#predictiveLocationCode"),$("#dropLocationWidget").attr("data-isCarDropOffPredictiveText","#dropOffWidgetLocationCode")}),$("#carLocation").focusin(function(){$("#carLocation").removeAttr("data-isCarPickUpPredictiveText")}),$("#pickUpWidgetDate, #dropOffWidgetDate").keyup(function(a){var b=$(this).val();a.keyCode>47&&a.keyCode<58||a.keyCode>95&&a.keyCode<106?null!==b.match(/^\d{2}$/)?$(this).val(b+"/"):(null!==b.match(/^\d{2}\/\d{2}$/)||null!==b.match(/^\d{1}\/\d{2}$/))&&$(this).val(b+"/"):191==a.keyCode?(b=b.replace("//","/"),$(this).val(b)):37==a.keyCode||39==a.keyCode||36==a.keyCode||35==a.keyCode||9==a.keyCode||8==a.keyCode||46==a.keyCode||16==a.keyCode||(b=b.replace(/[^0-9\/]/g,""),$(this).val(b))}),$("#dropLocationWidget").focusin(function(){$("#dropLocationWidget").removeAttr("data-isCarDropOffPredictiveText")}),$("#CarWidgetContainer #selectCarWidget,#CarWidgetContainer #carLocation,#CarWidgetContainer #dropOffWidgetLocationChk,#CarWidgetContainer #dropLocationWidget,#CarWidgetContainer #closeDropOffLocation,#CarWidgetContainer #pickUpTime,#CarWidgetContainer #dropOffTime,#CarWidgetContainer #ageWidget,#CarWidgetContainer #ageHoverWidgetId,#CarWidgetContainer #carTripSubmit,#CarWidgetContainer #advancedWidgetSearch").click(function(){$(".delta2UpCal").is(":visible")&&delta.deltaPolCalendarMgr.closeAll()}),$("#searchCarWidgetForm").validate({rules:{pickUpDate:{carWidgetDate:!0,carWidgetPastDate:!0},dropOffDate:{carWidgetDate:!0,carWidgetPastDate:!0},carLocation:{pickupLocation:!0,required:!0},destinationCityCodeforCarWidget:{destinationCityCodeforCarWidget:!0,required:!0},dropOffLocationCodeCarWidget:{dropOffLocationCodeCarWidget:!0,required:!0},age:{required:!0},dropOffTime:{timeGreaterThanWidget:"#pickUpTime"}},messages:{pickUpDate:{carWidgetDate:function(){$("#pickupDateWidgetError").css("display","block");var a="Please enter a valid date in mm/dd/yyyy format";return("mm/dd/yyyy"==$("#pickUpWidgetDate").val()||""==$("#pickUpWidgetDate").val())&&($("#pickUpWidgetDate").addClass("auto-hint"),a="Please enter a valid Pick-up Date"),a},carWidgetPastDate:function(){$("#pickupDateWidgetError").css("display","block");var a="Please select future date";return a}},dropOffDate:{carWidgetDate:function(){$("#dropOffDateWidgetError").css("display","block");var a="Please enter a valid date in mm/dd/yyyy format";return("mm/dd/yyyy"==$("#dropOffWidgetDate").val()||""==$("#dropOffWidgetDate").val())&&($("#dropOffWidgetDate").addClass("auto-hint"),a="Please enter a valid drop-off Date"),a},carWidgetPastDate:function(){$("#dropOffDateWidgetError").css("display","block");var a="Please select future date";return a}},pickupLocation:{required:"Please enter Pick-Up Location"},age:{required:function(){$("#widget_ageError").css("display","block");var a="Please select an age range to continue.";return resizeCarWidget.resize(),a}},dropOffTime:{timeGreaterThanWidget:function(){$("#dropOffTimeWidgetError").css("display","block");var a="Please select an earlier pick-up date/time or a later drop-off date/time.";return resizeCarWidget.resize(),a}}},submitHandler:function(a){""==$("#predictiveLocationCode").val()&&$("#predictiveLocationCode").val($("#carLocation").val()),$("#dropOffWidgetLocationChk").is(":checked")?""==$("#dropOffWidgetLocationCode").val()&&$("#dropOffWidgetLocationCode").val($("#dropLocation").val()):($("#dropLocationWidget").val($("#carLocation").val()),$("#dropOffWidgetLocationCode").val(""!=$("#predictiveLocationCode").val()?$("#predictiveLocationCode").val():$("#carLocation").val()),$("#dropLocationWidget").val($("#carLocation").val())),CarWidget.setRecentSearchCriteria(),setTimeout(function(){MerchandisingWidget.submitDelayedForm(a)},MerchandisingWidget.delayForFormSubmission)}})}},resizeCarWidget={resize:function(){setTimeout(function(){var a=$("#widget-booking");a.css("height",resizeCarWidget.getWidgetHeight())},1)},getWidgetHeight:function(){var a=$("#book-tabs");return a.height()+a.position().top+(delta.navwidget.isDockedState()?33:0)}};if(null==dwr)var dwr={};if(null==dwr.engine&&(dwr.engine={}),null==DWREngine)var DWREngine=dwr.engine;if(null==GetGeocodeDwr)var GetGeocodeDwr={};GetGeocodeDwr._path="/merch/dwr",GetGeocodeDwr.getGeoCodes=function(a,b,c){dwr.engine._execute(GetGeocodeDwr._path,"GetGeocodeDwr","getGeoCodes",a,b,c)};var HotelWidget={recentSearchHeight:0,needsInit:!0,multiRoomFlag:!1,isHotelPrefillCallRequired:!0,isAdvancedSearch:!1,init:function(){HotelWidget.hideHotelValidateMessage(),this.needsInit&&(this.needsInit=!1,$("#multiRoomFlag").val(!1),HotelWidget.uiBehaviours()),$(document).on("click","#hotelWidgetSearchContainer #checkInDateCallIcon",function(){$("#checkInDateWidget").trigger("focus")}),$(document).on("click","#hotelWidgetSearchContainer #checkOutDateCallIcon",function(){$("#checkOutDateWidget").trigger("focus")})},loadRecentSearches:function(a){try{var b={prefillAttribute:a},c={callback:this.populateSearchCriteria};prefill.retrievePrefillData(b,c)}catch(d){prefillError(d)}},populateSearchCriteria:function(a){if(void 0!=a&&null!=a&&""!=a){$("#WidgetPreferredTrips").removeClass("hideElementForFuture"),$("#WidgetPreferredTrips").show(),$("#widgetRecentSearches").val(a);var b=a.split("|");if(b.length>0){var c=[],d=0;c.push("<option value='-1'>Recent Searches</option>");for(var e=0;e<b.length&&4>d;e++){var f=b[e].split(":");if(("mm/dd/yyyy"!=f[3]&&void 0!=f[3]||"mm/dd/yyyy"!=f[4]&&void 0!=f[4])&&f.length>0){var g=MerchandisingWidget.getDateForRecentSearch(f[3])+"-"+MerchandisingWidget.getDateForRecentSearch(f[4])+"-"+f[1];g=MerchandisingWidget.truncate(g,38),c.push("<option value='"+f[0]+":"+f[1]+":"+f[2]+":"+f[3]+":"+f[4]+":"+f[5]+":"+f[6]+":"+f[7]+"'>"+g+"</option>"),d++}}$("#selecthotelWidget").html(c.join("")),HotelWidget.recentSearchHeight=15}else HotelWidget.recentSearchHeight=0}$("#hotelWidgetBottomDiv").addClass("hideElementForFuture"),delta.navwidget.adjustWidgetHeight("booking")},setRecentSearchCriteria:function(a){if(void 0!=$("#widgetRecentSearches").val()){var b="",c="",d="";a?c=$("#hotelPositionsWidget").val():(c=$("#locationCodeWidget").val(),d=$("#locationTypeCodeWidget").val());var e=c+":"+$("#hotelLocation").val()+":"+d+":"+$("#checkInDateWidget").val()+":"+$("#checkOutDateWidget").val()+":"+$("#numberOfRoomsWidget").val()+":"+$("#numberOfAdultsWidget").val()+":"+$("#numberOfChildrenWidget").val();if(""==$("#widgetRecentSearches").val())b=e;else{var f=$("#widgetRecentSearches").val().split("|");if(void 0!=f&&-1!=$("#widgetRecentSearches").val().indexOf(e))return;if(f.length>3){b=f[0];for(var g=1;3>g;g++)b=b+"|"+f[g];b=e+"|"+b}else b=e+"|"+$("#widgetRecentSearches").val()}}saveSingleAttributeValuePair("searchHotelForm",b)},showChildPopUp:function(a,b,c,d,e,f,g,h,i){$("<div id='"+a+"Content' class='topContentLoader'></div>").appendTo(document.body).load(b,function(b,j){"success"==j&&DeltaUtils.showToolTip(a,b,c,d,e,f,g,h,i)})},hideMultipleRooms:function(){var a=parseInt(requestURL.indexOf("merch"));if(a>0)var b=requestURL.substring(0,a);var c=b+"#book-hotel-content";$("#searchHotelRoomForm").attr("action",c),$("#searchHotelRoomForm").submit()},multipleRoomSubmit:function(){$("#hotelWidgetSearchType").val("showHotelResult");var a="https://"+window.location.hostname+"/merch/searchHotelAction.action";$("form#searchHotelRoomForm").attr("action",a),$("form#searchHotelRoomForm").submit()},submitAction:function(a){$("form#searchHotelWidgetForm").attr("action",a)},submitActionAdvSearch:function(){$("#hotelWidgetSearchType").val("showAdvancedHotelSearch"),$("#searchHotelWidgetForm").validate().cancelSubmit=!0,HotelWidget.isAdvancedSearch=!0;var a="https://"+window.location.hostname+"/merch/advancedSearchAction.action";$("#searchHotelWidgetForm").attr("action",a),$("#searchHotelWidgetForm").submit()},showMultipleRoomsOptions:function(){var a=$("#multipleNumberOfRooms").val(),b=null;if(a>1){$("#selectedNoOfRooms").html(a),b=new Array;for(var c=0;a>c;c++){var d={Counter:c,ProductNo:c+1};b[c]=d}$("#roomSelectionContainer").css("display","block"),$("#hotelRoomsContainer").html($("#roomSelectionTemplate").render(b))}},hideHotelValidateMessage:function(){"none"!=$("#locationWidgetError").css("display")&&($("#locationWidgetError").css("display","none"),$("#hotelLocation").val("Airport, City, Attraction or Address").addClass("auto-hint").removeClass("error")),"none"!=$("#checkinDateErrorWidget").css("display")&&($("#checkinDateErrorWidget").css("display","none"),$("#checkInDateWidget").val("mm/dd/yyyy").addClass("auto-hint").removeClass("error")),"none"!=$("#checkOutDateErrorWidget").css("display")&&($("#checkOutDateErrorWidget").css("display","none"),$("#checkOutDateWidget").val("mm/dd/yyyy").addClass("auto-hint").removeClass("error"),$("#checkInDateWidget").addClass("auto-hint").removeClass("error")),$("div#hotelWidgetSearchContainer label.error").css("display","none"),delta.navwidget.adjustWidgetHeight("booking")},updateAdultChildValue:function(){$("#numberOfRoomsWidget").val()>1?($("#numberOfAdultsWidget").val("2"),$("#numberOfChildrenWidget").val("-"),$("#fsHotelWidgetNumberOfAdults").addClass("hideElement"),$("#fsHotelWidgetNumberOfChild").addClass("hideElement")):($("#fsHotelWidgetNumberOfAdults").removeClass("hideElement"),$("#fsHotelWidgetNumberOfChild").removeClass("hideElement"))},uiBehaviours:function(){HotelWidget.isHotelPrefillCallRequired&&(HotelWidget.loadRecentSearches("searchHotelForm"),HotelWidget.isHotelPrefillCallRequired=!1),MerchandisingWidget.setHotelCalendarControl("checkInDateWidget","checkOutDateWidget","Check-In Date","Check-Out Date");var a="Discounts may apply to children depending on age. Age requirements vary by property.";DeltaUtils.showToolTip("hotelWidgetHelpIcon",a,0,6,"",250,"",""),DeltaUtils.setPlaceholderText("#hotelWidgetSearchContainer input[placeholder]"),$("#selecthotelWidget").change(function(){if(-1!=$("#selecthotelWidget option:selected").text().indexOf("-")){var a=$("#selecthotelWidget").val().split(":"),b=a[0];-1!=b.indexOf(",")?($("#hotelLocation").val(a[1]),$("#locationCodeWidget").val(""),$("#locationTypeCodeWidget").val("")):($("#locationCodeWidget").val(a[0]),$("#hotelLocation").val(a[1]),$("#locationTypeCodeWidget").val(a[2])),$("#checkInDateWidget").val(a[3]),$("#checkOutDateWidget").val(a[4]),$("#numberOfRoomsWidget").val(a[5]),$("#numberOfAdultsWidget").val(a[6]),$("#numberOfChildrenWidget").val(a[7]),HotelWidget.updateAdultChildValue()}}),$("#checkInDateWidget, #checkOutDateWidget, #hotelLocation").blur(function(){""==$(this).val()&&("hotelLocation"==$(this).attr("id")?($(this).val("Airport, City, Attraction or Address"),$(this).addClass("auto-hint")):($(this).val("mm/dd/yyyy"),$(this).addClass("auto-hint")))}),$("#checkInDateWidget, #checkOutDateWidget").keyup(function(a){var b=$(this).val();a.keyCode>47&&a.keyCode<58||a.keyCode>95&&a.keyCode<106?null!==b.match(/^\d{2}$/)?$(this).val(b+"/"):(null!==b.match(/^\d{2}\/\d{2}$/)||null!==b.match(/^\d{1}\/\d{2}$/))&&$(this).val(b+"/"):191==a.keyCode?(b=b.replace("//","/"),$(this).val(b)):37==a.keyCode||39==a.keyCode||36==a.keyCode||35==a.keyCode||9==a.keyCode||8==a.keyCode||46==a.keyCode||16==a.keyCode||(b=b.replace(/[^0-9\/]/g,""),$(this).val(b))}),$("#hotelLocation").focusout(function(){void 0!=$("#searchHotelWidgetForm").validate()&&""!=$.trim($("#hotelLocation").val())&&$("#searchHotelWidgetForm").validate().element("#hotelLocation")}),$("#numberOfRoomsWidget").change(function(){HotelWidget.updateAdultChildValue()}),$("#hotelLocation").autocomplete({source:HotelWidgetLocationPrediction.hotelWidgetLocationPredictionHandler,select:function(a,b){$("#locationCodeWidget").val(b.item.id),$("#locationTypeCodeWidget").val(b.item.type)}}),$("#checkInDateWidget, #checkOutDateWidget, #hotelLocation").focus(function(){return"checkInDateWidget"==$(this).attr("id")||"checkOutDateWidget"==$(this).attr("id")?("mm/dd/yyyy"==$(this).val()&&($(this).val(""),$(this).removeClass("auto-hint")),!0):void("Airport, City, Attraction or Address"==$(this).val()&&($(this).val(""),$(this).removeClass("auto-hint")))}),$("div.ui-modal").dialog({autoOpen:!1,modal:!0,width:499,minHeight:150,create:function(a){var b=$(a.target).parent();"&nbsp;"===b.find(".ui-dialog-title").html()&&b.find(".ui-dialog-titlebar").addClass("ui-dialog-no-title")}}),$(".ui-modal-link").click(function(a){a.preventDefault(),$($(this).attr("href")).dialog("open")}),$("#nav-widget-booking").click(function(){var a=$("#book-tabs li.ui-state-active a").attr("id");"book-hotel-content-trigger"===a.toLowerCase()?HotelWidget.hideHotelValidateMessage():"book-car-content-trigger"===a.toLowerCase()&&CarWidget.hideCarValidateMessage()}),$("#hotelWidgetSearchContainer #selecthotelWidget,#hotelWidgetSearchContainer #hotelLocation,#hotelWidgetSearchContainer #numberOfRoomsWidget,#hotelWidgetSearchContainer #numberOfAdultsWidget,#hotelWidgetSearchContainer #numberOfChildrenWidget,#hotelWidgetSearchContainer #hotelWidgetHelpIcon,#hotelWidgetSearchContainer #hotelTripSubmit,#hotelWidgetSearchContainer #advancedSearchHotelWidget").click(function(){$(".delta2UpCal").is(":visible")&&delta.deltaPolCalendarMgr.closeAll()}),$("#hotelWidgetSearchContainer #hotelTripSubmit").click(function(a){return a.preventDefault(),$("#searchHotelWidgetForm").valid()&&$("#searchHotelWidgetForm").submit(),!1}),$("#searchHotelWidgetForm").validate({rules:{destinationCityCodeForWidget:{destinationCityCodeForWidget:!0,required:!0},checkInDate:{hotelWidgetDate:!0,hotelWidgetPastDate:!0,hotelWidgetDaysDifference:"#checkOutDateWidget"},checkOutDate:{hotelWidgetDate:!0,hotelWidgetPastDate:!0,greaterThan:"#checkInDateWidget",hotelWidgetDaysDifference:"#checkInDateWidget"}},messages:{checkInDate:{hotelWidgetDate:function(){$("#checkinDateErrorWidget").css("display","block");var a="Please enter a valid date in mm/dd/yyyy format";return("mm/dd/yyyy"==$("#checkInDateWidget").val()||""==$("#checkInDateWidget").val())&&($("#checkInDateWidget").addClass("auto-hint"),a="Please enter a valid Check-in Date"),a},hotelWidgetPastDate:function(){$("#checkinDateErrorWidget").css("display","block");var a="Please select future date";return a},hotelWidgetDaysDifference:function(){$("#checkOutDateErrorWidget").css("display","block"),$("#checkInDateWidget").addClass("auto-hint"),$(".calErrorMessage").show();var a="The Number of nights selected cannot exceed 28. Please select new dates.";return a}},checkOutDate:{hotelWidgetDate:function(){$("#checkOutDateErrorWidget").css("display","block");var a="Please enter a valid date in mm/dd/yyyy format";return("mm/dd/yyyy"==$("#checkOutDateWidget").val()||""==$("#checkOutDateWidget").val())&&($("#checkOutDateWidget").addClass("auto-hint"),a="Please enter a valid Check-out Date"),a},hotelWidgetPastDate:function(){$("#checkOutDateErrorWidget").css("display","block");var a="Please select future date";return a},greaterThan:function(){$("#checkOutDateErrorWidget").css("display","block"),$("#checkInDateWidget").addClass("error").removeClass("auto-hint");var a="Please select an earlier check-in date or a later check-out date.";return a},hotelWidgetDaysDifference:function(){$("#checkOutDateErrorWidget").css("display","block"),$("#checkOutDateWidget").addClass("auto-hint"),$(".calErrorMessage").show();var a="The Number of nights selected cannot exceed 28. Please select new dates.";return a}}},success:function(a){"checkInDateWidget"==a.attr("for")?($("#checkinDateErrorWidget").css("display","none"),$("#checkInDateWidget").removeClass("auto-hint")):"checkOutDateWidget"==a.attr("for")?($("#checkOutDateErrorWidget").css("display","none"),$("#checkOutDateWidget").removeClass("auto-hint")):"hotelLocation"==a.attr("for")&&$("#locationWidgetError").css("display","none"),resizeHotelWidget.resize()},onkeyup:!1,onfocusout:!1,submitHandler:function(a){if($("#numberOfRoomsWidget").val()>1?($("#hwNumberOfAdultsSelected").val("2"),$("#hwNumberOfChildSelected").val("0")):($("#hwNumberOfAdultsSelected").val($("#numberOfAdultsWidget").val()),$("#hwNumberOfChildSelected").val($("#numberOfChildrenWidget").val())),HotelWidget.isAdvancedSearch)setTimeout(function(){MerchandisingWidget.submitDelayedForm(a)},MerchandisingWidget.delayForFormSubmission);else{var b=1,c=1,d=0;b=$("#numberOfRoomsWidget").val();var e=$("#numberOfRoomsWidget").val();$("#hotelWidgetSearchType").val("showHotelResult"),c=$("#numberOfAdultsWidget").val(),d=$("#numberOfChildrenWidget").val(),widgetDWRView.noOfRooms=e,widgetDWRView.noOfChildren=d,widgetDWRView.form=a;var f=!1,g=$("#locationCodeWidget").val(),h=""==g?$("#hotelLocation").val():g;if(0==g.length&&"Airport, City, Attraction or Address"!=$("#hotelLocation").val()?(f=!0,0==g.length&&$("#hotelLocation").val().length>=3&&widgetDWRView.requestGeocoder("getGeoCodes",h)):$("#locationErrorMsg").hide(),1==e&&!HotelWidget.multiRoomFlag&&d>0){if(1!=f){HotelWidget.multiRoomFlag=!0,HotelWidget.setRecentSearchCriteria(!1),$("#hotelWidgetSearchType").val("showHotelWidgetRoom");var i="https://"+window.location.hostname+"/merch/hotelWidgetAction.action";$("#searchHotelWidgetForm").attr("action",i),setTimeout(function(){MerchandisingWidget.submitDelayedForm(a)},MerchandisingWidget.delayForFormSubmission)}}else 1!=f&&(HotelWidget.setRecentSearchCriteria(!1),setTimeout(function(){MerchandisingWidget.submitDelayedForm(a)},MerchandisingWidget.delayForFormSubmission))}}})}},resizeHotelWidget={resize:function(){setTimeout(function(){var a=$("#widget-booking");a.css("height",resizeHotelWidget.getWidgetHeight())},1)},getWidgetHeight:function(){var a=$("#book-tabs"),b=15;return 15===HotelWidget.recentSearchHeight&&(b=0),b+a.height()+a.position().top+(delta.navwidget.isDockedState()?33:0)}},HotelWidgetLocationPrediction={hotelWidgetLocationPredictionHandler:function(a,b){var c=a.term.replace(/^\s+/g,"");if($("#locationCodeWidget").val(""),$("#locationTypeCodeWidget").val(""),c.length<3){var d=new Array;b(d)}else{var e=new Array;if(e.push("ACX"),e.push("CITY"),c.length>=3&&null!=e){for(var f=c.length>3?c.substring(0,3):c,g=new Array,h=new Array,i=null,j=null,k=0;k<e.length;k++)LocationsCacheUtil.existsInCache(c,e[k])?(i=LocationsCacheUtil.getFromCache(c,e[k]),j=new Array,$.each(i,function(a,b){c.toLowerCase()==f.toLowerCase()?j.push(b):LocationsCacheUtil.isLocationMatching(c,e[k],b)&&j.push(b)}),j.length>0&&(h=h.concat(j))):g.push(e[k]);b(0==g.length?$.map(h,function(a){return{label:a.locationName,value:a.locationName,id:a.locationCode,type:a.locationTypeCode}}):Predictive.getPredictiveLocations(f,g,{callback:function(a){var d=new Array;if(null!=a.locationDWR){LocationsCacheUtil.putToCache(f,g,a);for(var e=0;e<g.length;e++)$.each(a.locationDWR,function(a,b){b.locationTypeCode.toLowerCase()==g[e].toLowerCase()&&(c.toLowerCase()==f.toLowerCase()?d.push(b):LocationsCacheUtil.isLocationMatching(c,g[e],b)&&d.push(b))})}h.length>0&&(d=d.concat(h)),b($.map(d,function(a){return{label:a.locationName,value:a.locationName,id:a.locationCode,type:a.locationTypeCode}}))}}))}}}};!function(a){var b=new Array;a.Watermark={ShowAll:function(){for(var a=0;a<b.length;a++)""==b[a].obj.val()?(b[a].obj.val(b[a].text),b[a].obj.css("color",b[a].WatermarkColor)):b[a].obj.css("color",b[a].DefaultColor)},HideAll:function(){for(var a=0;a<b.length;a++)b[a].obj.val()==b[a].text&&b[a].obj.val("")}},a.fn.Watermark=function(c,d){return d||(d="#aaa"),this.each(function(){function e(){g.val()==c&&g.val(""),g.css("color",h)}function f(){0==g.val().length||g.val()==c?(g.val(c),g.css("color",d)):g.css("color",h)}var g=a(this),h=g.css("color");b[b.length]={text:c,obj:g,DefaultColor:h,WatermarkColor:d},g.focus(e),g.blur(f),g.change(f),f()})}}(jQuery);var MerchandisingWidget={delayForFormSubmission:100,submitDelayedForm:function(a){a.submit()},setErrorCodes:function(a,b,c,d){$("#errorCodes").val(c),$("#"+a).attr("action",d),$("#"+a).submit()},errorTracker:function(a,b,c){merchErrorTracker(a,b,c)},errorHandling:function(){$(".javaErrorDiv").hide();var a=$("#errorCodes").val();if(void 0!=a&&"null"!=a&&null!=a&&""!=a){var b=a.indexOf("[");b>-1&&(a=a.substring(b+1,a.length-1)),$(".javaErrorDiv").show();var c=a.split(",");if(c.length>0)for(var d=0;d<c.length;d++){var e=c[d];if(""!=e){var f={error:{errorCode:e,errorMsg:null}};e.indexOf("MST")>=0&&InLineError.displayInlineError("json",f,".javaErrorDiv","","merch")}}}},setHotelCalendarControl:function(a,b,c,d){{var e=window.location;e.protocol,e.host}delta.calendar.globalConfiguration(),delta.calendar.create({calendarElement:$(".hotelDateFieldWrap"),daysInFutureToShow:331,daysInPastToShow:0,startDateTitle:c,endDateTitle:d,onSelect:MerchandisingWidget.triggerCheckInDateEvent,showDropDown:!0})},triggerCheckInDateEvent:function(){$("#checkInDateWidget").trigger("change")},setCarCalendarControl:function(a,b,c,d){{var e=window.location;e.protocol,e.host}delta.calendar.create({calendarElement:$(".carRentalDateFieldWrap"),daysInFutureToShow:331,daysInPastToShow:0,startDateTitle:c,endDateTitle:d,showDropDown:!0})},getDateForRecentSearch:function(a){if(""!=a&&"mm/dd/yyyy"!=a){var b=a.split("/"),c=b[0]+"/"+b[1]+"/"+b[2].substring(2);return c}return a},truncate:function(a,b){var c=b,d=a;return d.length>b?d=d.substring(0,c)+"...":d}},merchTabs={removeTabClass:function(a){$(a).removeClass("ui-widget"),$(a).removeClass("ui-widget-content"),$(a).removeClass("ui-corner-all")},removeTabHeadingClass:function(a){$(a).removeClass("ui-widget-header"),$(a).removeClass("ui-corner-all")},removeFirstTabClass:function(a){$(a).removeClass("ui-widget-content"),$(a).removeClass("ui-corner-bottom"),$(a).removeClass("ui-corner-top")},removeSecondTabClass:function(a){$(a).removeClass("ui-widget-content"),$(a).removeClass("ui-corner-bottom"),$(a).removeClass("ui-corner-top")},removeThirdTabClass:function(a){$(a).removeClass("ui-widget-content"),$(a).removeClass("ui-corner-bottom"),$(a).removeClass("ui-corner-top")},removeFirstTabLinkClass:function(a){$(a).removeClass("ui-tabs-panel"),$(a).removeClass("ui-widget-content")},removeSecondTabLinkClass:function(a){$(a).removeClass("ui-tabs-panel"),$(a).removeClass("ui-widget-content")},removeThirdTabLinkClass:function(a){$(a).removeClass("ui-tabs-panel"),$(a).removeClass("ui-widget-content")}};jQuery.validator.messages.destinationCityCodeForWidget="We're sorry. No cities or airport codes matched that entry. Please try again.",jQuery.validator.classRuleSettings.destinationCityCodeForWidget={destinationCityCodeForWidget:!0},jQuery.validator.addMethod("destinationCityCodeForWidget",function(a){if($("#widgetGoogleLocationError").css("display","none"),a.length>=3&&"Airport, City, Attraction or Address"!=a){for(var b="&!#@$%^*+{}",c=0;c<a.length;c++)if(-1!=b.indexOf(a.charAt(c)))return $("#locationWidgetError").css("display","block"),resizeHotelWidget.resize(),!1;return $("#locationWidgetError").css("display","none"),resizeHotelWidget.resize(),!0}return $("#locationWidgetError").css("display","block"),resizeHotelWidget.resize(),!1},jQuery.validator.messages.destinationCityCodeForWidget),jQuery.validator.messages.destinationCityCodeforCarWidget="We're sorry. No cities or airport codes matched that entry. Please try again.",jQuery.validator.classRuleSettings.destinationCityCodeforCarWidget={destinationCityCodeforCarWidget:!0},jQuery.validator.addMethod("destinationCityCodeforCarWidget",function(a){return a.length>=3&&"Airport or Metro City"!=a?($("#pickupWidgetLocationError").css("display","none"),resizeCarWidget.resize(),!0):($("#pickupWidgetLocationError").css("display","block"),resizeCarWidget.resize(),!1)},jQuery.validator.messages.destinationCityCodeforCarWidget),jQuery.validator.messages.dropOffLocationCodeCarWidget="We're sorry. No cities or airport codes matched that entry. Please try again.",jQuery.validator.classRuleSettings.dropOffLocationCodeCarWidget={dropOffLocationCodeCarWidget:!0},jQuery.validator.addMethod("dropOffLocationCodeCarWidget",function(a){return a.length>=3&&"Airport or Metro City"!=a?($("#carSearchDropLocationWidgetError").css("display","none"),resizeCarWidget.resize(),!0):($("#carSearchDropLocationWidgetError").css("display","block"),resizeCarWidget.resize(),!1)},jQuery.validator.messages.dropOffLocationCodeCarWidget),
jQuery.validator.messages.isCarPickUpPredictiveText="We're sorry. No cities or airport codes matched that entry. Please try again.",jQuery.validator.addMethod("isCarPickUpPredictiveText",function(a,b,c){return 3==$(c).val().length?($("#pickupWidgetLocationError").css("display","none"),resizeCarWidget.resize(),!0):($("#pickupWidgetLocationError").css("display","block"),resizeCarWidget.resize(),!1)},jQuery.validator.messages.isCarPickUpPredictiveText),jQuery.validator.messages.isCarDropOffPredictiveText="We're sorry. No cities or airport codes matched that entry. Please try again.",jQuery.validator.addMethod("isCarDropOffPredictiveText",function(a,b,c){return 3==$(c).val().length?($("#carSearchDropLocationWidgetError").css("display","none"),resizeCarWidget.resize(),!0):($("#carSearchDropLocationWidgetError").css("display","block"),resizeCarWidget.resize(),!1)},jQuery.validator.messages.isCarDropOffPredictiveText),jQuery.validator.messages.pickupLocation="Please enter the valid Pick-up City/Airport",jQuery.validator.classRuleSettings.pickupLocation={pickupLocation:!0},jQuery.validator.addMethod("pickupLocation",function(a){return a.length>0&&a.match(/^[a-zA-Z][a-zA-Z,\s]+$/)?!0:!1},jQuery.validator.messages.pickupLocation),jQuery.validator.messages.dropOffCity="Please enter the valid Drop-up City/Airport",jQuery.validator.classRuleSettings.dropOffCity={dropOffCity:!0},jQuery.validator.addMethod("dropOffCity",function(a){return a.length>0&&a.match(/^[a-zA-Z][a-zA-Z,\s]+$/)?!0:!1},jQuery.validator.messages.dropOffCity),jQuery.validator.messages.greaterThan="To Date Must be greater than or equal to From Date.",jQuery.validator.addMethod("greaterThan",function(a,b,c){return""==$(c).val()||"mm/dd/yyyy"==$(c).val()?!0:/Invalid|NaN/.test(new Date(a))?isNaN(a)&&isNaN($(c).val())||parseFloat(a)>parseFloat($(c).val()):new Date(a)>new Date($(c).val())},jQuery.validator.messages.greaterThan),jQuery.validator.messages.greaterThanEqual="To Date Must be greater than or equal to From Date.",jQuery.validator.addMethod("greaterThanEqual",function(a,b,c){return""==$(c).val()||"mm/dd/yyyy"==$(c).val()?!0:/Invalid|NaN/.test(new Date(a))?isNaN(a)&&isNaN($(c).val())||parseFloat(a)>parseFloat($(c).val()):new Date(a)>=new Date($(c).val())},jQuery.validator.messages.greaterThanEqual),jQuery.validator.messages.timeGreaterThanWidget="To Time Must be greater than From Time.",jQuery.validator.addMethod("timeGreaterThanWidget",function(a,b,c){var d=!0,e=$(c).val().split(" ");fromTime=e[0],fromTimeAmOrPm=e[1];var f=a.split(" ");toTime=f[0],toTimeAmOrPm=f[1];var g=fromTime.split(":"),h=(g[0],toTime.split(":")),i=(h[0],$("#pickUpWidgetDate").val()),j=$("#dropOffWidgetDate").val();return("mm/dd/yyyy"==i||"mm/dd/yyyy"==j)&&(d=!0),i==j&&"mm/dd/yyyy"!=i&&"mm/dd/yyyy"!=j&&(d=Date.parse(i+" "+fromTime+" "+fromTimeAmOrPm)<Date.parse(j+" "+toTime+" "+toTimeAmOrPm)),d},jQuery.validator.messages.timeGreaterThanWidget),jQuery.validator.messages.hotelWidgetDate="Please enter a valid date in mm/dd/yyyy format",jQuery.validator.classRuleSettings.hotelWidgetDate={hotelWidgetDate:!0},jQuery.validator.addMethod("hotelWidgetDate",function(a){a=DeltaUtils.removeSpaces(a);try{var b=/^\d{1,2}\/\d{1,2}\/\d{4}$/;return a.match(b)?(jQuery.datepicker.parseDate("mm/dd/yy",a),resizeHotelWidget.resize(),!0):(resizeHotelWidget.resize(),!1)}catch(c){return resizeHotelWidget.resize(),!1}},jQuery.validator.messages.hotelWidgetDate),jQuery.validator.messages.carWidgetDate="Please enter a valid date in mm/dd/yyyy format",jQuery.validator.classRuleSettings.carWidgetDate={carWidgetDate:!0},jQuery.validator.addMethod("carWidgetDate",function(a){a=DeltaUtils.removeSpaces(a);try{var b=/^\d{1,2}\/\d{1,2}\/\d{4}$/;return a.match(b)?(jQuery.datepicker.parseDate("mm/dd/yy",a),resizeCarWidget.resize(),!0):(resizeCarWidget.resize(),!1)}catch(c){return resizeCarWidget.resize(),!1}},jQuery.validator.messages.carWidgetDate),jQuery.validator.messages.hotelWidgetPastDate="Please select future date",jQuery.validator.addMethod("hotelWidgetPastDate",function(a){var b=(new Date).toDateString(),c=new Date(a).toDateString();return b!=c&&(new Date).getTime()>new Date(a).getTime()?(resizeHotelWidget.resize(),!1):(resizeHotelWidget.resize(),!0)},jQuery.validator.messages.hotelWidgetPastDate),jQuery.validator.messages.carWidgetPastDate="Please select future date",jQuery.validator.addMethod("carWidgetPastDate",function(a){var b=(new Date).toDateString(),c=new Date(a).toDateString();return b!=c&&(new Date).getTime()>new Date(a).getTime()?(resizeCarWidget.resize(),!1):(resizeCarWidget.resize(),!0)},jQuery.validator.messages.carWidgetPastDate),jQuery.validator.messages.hotelWidgetDaysDifference="The Number of nights selected cannot exceed 28. Please select new dates.",jQuery.validator.addMethod("hotelWidgetDaysDifference",function(a,b,c){if(!/Invalid|NaN/.test(new Date(a))&&c.length>1&&$(c).val()&&"mm/dd/yyyy"!=$(c).val()){var d=new Date(a),e=new Date($(c).val()),f=(d-e)/864e5;if(f>28||-28>f)return resizeHotelWidget.resize(),$(".calErrorMessage").show(),!1}return resizeHotelWidget.resize(),!0},jQuery.validator.messages.hotelWidgetDaysDifference);var widgetDWRController={requestGeocoder:function(a,b){var c=a;GetGeocodeDwr[c](b,"",widgetDWRModel.processGeoCodeResponse)}},widgetDWRModel={processGeoCodeResponse:function(a){widgetDWRView.processGeocoderResponse(a)}},widgetDWRView={noOfRooms:null,noOfChildren:null,form:null,requestGeocoder:function(a,b){widgetDWRController.requestGeocoder(a,b)},processGeocoderResponse:function(a){if(null!=a&&null!=a[0].status&&"OK"==a[0].status){var b=new Array;$("#locationWidgetError").css("display","none");for(var c=a[0].results,d=c.length,e=0;d>e;e++){if(null!=c[e].addressComponents&&c[e].addressComponents.length>0)for(var f=0;f<c[e].addressComponents.length;f++)if(null!=c[e].addressComponents[f].types&&c[e].addressComponents[f].types.length>0)for(var g=0;g<c[e].addressComponents[f].types.length;g++)if("locality"==c[e].addressComponents[f].types[g]){$("#hotelLocation").val(c[e].addressComponents[f].longName);break}var h=[];h[0]=c[e].geometry.location.lat,h[1]=c[e].geometry.location.lng,b[e]="("+h+")",$("#hotelPositionsWidget").val(b)}1==this.noOfRooms&&this.noOfChildren>0?(HotelWidget.multiRoomFlag=!0,$("#hotelWidgetSearchType").val("showHotelWidgetRoom"),$("#searchHotelWidgetForm").attr("action","/merch/hotelWidgetAction.action"),HotelWidget.setRecentSearchCriteria(!0),setTimeout(function(){MerchandisingWidget.submitDelayedForm(widgetDWRView.form)},MerchandisingWidget.delayForFormSubmission)):$("#hotelPositionsWidget").val().length>0&&(HotelWidget.setRecentSearchCriteria(!0),setTimeout(function(){MerchandisingWidget.submitDelayedForm(widgetDWRView.form)},MerchandisingWidget.delayForFormSubmission))}else $("#widgetGoogleLocationError").css("display","block"),$("#widgetGeoCoderErrorLabel").css("display","block"),$("#hotelLocation").addClass("error"),resizeHotelWidget.resize()}},CarWidgetLocationPrediction={widgetLocationCodes:[],carWidgetLocationPredictionHandler:function(a,b){var c=a.term.replace(/^\s+/g,"");if("carLocation"==this.element.attr("id")?$("#predictiveLocationCode").val(""):$("#dropOffWidgetLocationCode").val(""),c.length<3){var d=new Array;b(d)}else if(c.length>=3)if(RentalCarsCacheUtil.existsInCache(c)){var e=RentalCarsCacheUtil.getFromCache(c),f=new Array,g=0;if(3==c.length)for(var h=0,i=0;i<e.length&&(f[h]=e[i],h++,6!=h);i++);else{for(var i=0;i<e.length;i++){var j=e[i].locationCode;if(j.toLowerCase().indexOf(c.toLowerCase())>=0&&(f[g]=e[i],g++),6==g)break}for(var i=0;i<e.length;i++){var k=e[i].city,l=e[i].description;if((k.toLowerCase().indexOf(c.toLowerCase())>=0||l.toLowerCase().indexOf(c.toLowerCase())>=0)&&(f[g]=e[i],g++),6==g)break}}b($.map(f,function(a){var b="";return b=""===a.state||void 0===a.city?" ":a.state+", ",{label:a.description+", "+b+a.countryCode+" ("+a.locationCode+")",value:a.city,id:a.locationCode,airportName:a.description}}))}else{var m=c.length>3?c.substring(0,3):c,n={locCode:m},d=new Array,o=new Array;$.post("/merch/predictiveSearchAction.action",n,function(a){try{d=$.map(a,function(a){return a}),RentalCarsCacheUtil.putToCache(m,d);for(var c=0;c<d.length&&(o[c]=d[c],6!=c);c++);b($.map(o,function(a){var b="";return b=""===a.state||void 0===a.city?" ":a.state+", ",{label:a.description+", "+b+a.countryCode+" ("+a.locationCode+")",value:a.city,id:a.locationCode,airportName:a.description}}))}catch(e){DeltaUtils.logMessage("Car Predictive error : "+e)}})}}},needHelpcontactinformation={res_sky:[{contactid:"res_skymiles"}],res_dom:[{contactid:"res_dom"}],res_inter:[{contactid:"res_inter"}],sky:[{contactid:"skymilesaccsupport"}],tec:[{contactid:"techsupportapp"}],cus:[{contactid:"customercare"}],bag:[{contactid:"baggageservice"}],car:[{contactid:"deltacargo"}],grp:[{contactid:"grp_information"}],lan:[{contactid:"res_ass_lang"}],burkinafaso:[{contactid:"burkinafaso"}],cameroon:[{contactid:"cameroon"}],cotedivoire:[{contactid:"cotedivoire"}],egypt:[{contactid:"egypt"}],ghana:[{contactid:"ghana"}],kenya:[{contactid:"kenya"}],liberia:[{contactid:"liberia"}],mali:[{contactid:"mali"}],mauritania:[{contactid:"mauritania"}],morocco:[{contactid:"morocco"}],namibia:[{contactid:"namibia"}],nigeria:[{contactid:"nigeria"}],senegal:[{contactid:"senegal"}],south_africa:[{contactid:"south_africa"}],togo:[{contactid:"togo"}],cambodia:[{contactid:"cambodia"}],china:[{contactid:"china"}],india:[{contactid:"india"}],indonesia:[{contactid:"indonesia"}],japan:[{contactid:"japan"}],malaysia:[{contactid:"malaysia"}],philippines:[{contactid:"philippines"}],singapore:[{contactid:"singapore"}],southkorea:[{contactid:"southkorea"}],srilanka:[{contactid:"srilanka"}],taiwan:[{contactid:"taiwan"}],thailand:[{contactid:"thailand"}],vietnam:[{contactid:"vietnam"}],antigua:[{contactid:"antigua"}],aruba:[{contactid:"aruba"}],bahamas:[{contactid:"bahamas"}],barbados:[{contactid:"barbados"}],bermuda:[{contactid:"bermuda"}],bonaire_curacao:[{contactid:"bonaire_curacao"}],cayman_islands:[{contactid:"cayman_islands"}],dominican_republic:[{contactid:"dominican_republic"}],grenada:[{contactid:"grenada"}],haiti:[{contactid:"haiti"}],jamaica:[{contactid:"jamaica"}],puerto_rico:[{contactid:"puerto_rico"}],kitts:[{contactid:"kitts"}],lucia:[{contactid:"lucia"}],maarten:[{contactid:"maarten"}],trinidad_tobago:[{contactid:"trinidad_tobago"}],turks_caicos:[{contactid:"turks_caicos"}],virgin_islands:[{contactid:"virgin_islands"}],austria:[{contactid:"austria"}],belgium:[{contactid:"belgium"}],bosnia_herzegovina:[{contactid:"bosnia_herzegovina"}],croatia:[{contactid:"croatia"}],czech_republic:[{contactid:"czech_republic"}],denmark:[{contactid:"denmark"}],england:[{contactid:"england"}],finland:[{contactid:"finland"}],france:[{contactid:"france"}],germany:[{contactid:"germany"}],great_britain:[{contactid:"great_britain"}],greece:[{contactid:"greece"}],hungary:[{contactid:"hungary"}],iceland:[{contactid:"iceland"}],ireland:[{contactid:"ireland"}],italy:[{contactid:"italy"}],macedonia:[{contactid:"macedonia"}],montenegro:[{contactid:"montenegro"}],netherlands:[{contactid:"netherlands"}],norway:[{contactid:"norway"}],poland:[{contactid:"poland"}],portugal:[{contactid:"portugal"}],romania:[{contactid:"romania"}],russian_federation:[{contactid:"russian_federation"}],all_other_cities:[{contactid:"all_other_cities"}],serbia:[{contactid:"serbia"}],slovak_republic:[{contactid:"slovak_republic"}],slovenia:[{contactid:"slovenia"}],spain:[{contactid:"spain"}],sweden:[{contactid:"sweden"}],switzerland:[{contactid:"switzerland"}],turkey:[{contactid:"turkey"}],ukraine:[{contactid:"ukraine"}],united_kingdom:[{contactid:"united_kingdom"}],belize:[{contactid:"belize"}],costa_rica:[{contactid:"costa_rica"}],el_salvador:[{contactid:"el_salvador"}],guatemala:[{contactid:"guatemala"}],honduras:[{contactid:"honduras"}],mexico:[{contactid:"mexico"}],nicaragua:[{contactid:"nicaragua"}],panama:[{contactid:"panama"}],bahrain:[{contactid:"bahrain"}],israel:[{contactid:"israel"}],jordan:[{contactid:"jordan"}],kuwait:[{contactid:"kuwait"}],palestine:[{contactid:"palestine"}],qatar:[{contactid:"qatar"}],saudi_arabia:[{contactid:"saudi_arabia"}],united_arab_emirates:[{contactid:"united_arab_emirates"}],australia:[{contactid:"australia"}],new_zealand:[{contactid:"new_zealand"}],argentina:[{contactid:"argentina"}],brazil:[{contactid:"brazil"}],chile:[{contactid:"chile"}],colombia:[{contactid:"colombia"}],ecuador:[{contactid:"ecuador"}],guyana:[{contactid:"guyana"}],peru:[{contactid:"peru"}],uruguay:[{contactid:"uruguay"}],venezuela:[{contactid:"venezuela"}],res_skymiles_true:[{contactid:"res_skymiles_true_div"}]},allneedHelpContactInfo={allDivName:[{divname:"res_skymiles"},{divname:"res_dom"},{divname:"res_inter"},{divname:"skymilesaccsupport"},{divname:"techsupportapp"},{divname:"customercare"},{divname:"baggageservice"},{divname:"deltacargo"},{divname:"grp_information"},{divname:"res_ass_lang"},{divname:"burkinafaso"},{divname:"cameroon"},{divname:"cotedivoire"},{divname:"egypt"},{divname:"ghana"},{divname:"kenya"},{divname:"liberia"},{divname:"mali"},{divname:"mauritania"},{divname:"morocco"},{divname:"namibia"},{divname:"nigeria"},{divname:"senegal"},{divname:"south_africa"},{divname:"togo"},{divname:"cambodia"},{divname:"china"},{divname:"india"},{divname:"indonesia"},{divname:"japan"},{divname:"malaysia"},{divname:"philippines"},{divname:"singapore"},{divname:"southkorea"},{divname:"srilanka"},{divname:"taiwan"},{divname:"thailand"},{divname:"vietnam"},{divname:"antigua"},{divname:"aruba"},{divname:"bahamas"},{divname:"barbados"},{divname:"bermuda"},{divname:"bonaire_curacao"},{divname:"cayman_islands"},{divname:"dominican_republic"},{divname:"grenada"},{divname:"haiti"},{divname:"jamaica"},{divname:"puerto_rico"},{divname:"kitts"},{divname:"lucia"},{divname:"maarten"},{divname:"trinidad_tobago"},{divname:"turks_caicos"},{divname:"virgin_islands"},{divname:"austria"},{divname:"belgium"},{divname:"bosnia_herzegovina"},{divname:"croatia"},{divname:"czech_republic"},{divname:"denmark"},{divname:"england"},{divname:"finland"},{divname:"france"},{divname:"germany"},{divname:"great_britain"},{divname:"greece"},{divname:"hungary"},{divname:"iceland"},{divname:"ireland"},{divname:"italy"},{divname:"macedonia"},{divname:"montenegro"},{divname:"netherlands"},{divname:"norway"},{divname:"poland"},{divname:"portugal"},{divname:"romania"},{divname:"russian_federation"},{divname:"all_other_cities"},{divname:"serbia"},{divname:"slovak_republic"},{divname:"slovenia"},{divname:"spain"},{divname:"sweden"},{divname:"switzerland"},{divname:"turkey"},{divname:"ukraine"},{divname:"united_kingdom"},{divname:"belize"},{divname:"costa_rica"},{divname:"el_salvador"},{divname:"guatemala"},{divname:"honduras"},{divname:"mexico"},{divname:"nicaragua"},{divname:"panama"},{divname:"bahrain"},{divname:"israel"},{divname:"jordan"},{divname:"kuwait"},{divname:"palestine"},{divname:"qatar"},{divname:"saudi_arabia"},{divname:"united_arab_emirates"},{divname:"australia"},{divname:"new_zealand"},{divname:"argentina"},{divname:"brazil"},{divname:"chile"},{divname:"colombia"},{divname:"ecuador"},{divname:"guyana"},{divname:"peru"},{divname:"uruguay"},{divname:"venezuela"},{divname:"viewallcontact"},{divname:"res_skymiles_true_div"}]},needHelpdropdownList={af:[{optionvalue:"burkinafaso",optionlist:"Burkina Faso"},{optionvalue:"cameroon",optionlist:"Cameroon"},{optionvalue:"cotedivoire",optionlist:"C&#244;te d'Ivoire"},{optionvalue:"egypt",optionlist:"Egypt"},{optionvalue:"ghana",optionlist:"Ghana"},{optionvalue:"kenya",optionlist:"Kenya"},{optionvalue:"liberia",optionlist:"Liberia"},{optionvalue:"mali",optionlist:"Mali"},{optionvalue:"mauritania",optionlist:"Mauritania"},{optionvalue:"morocco",optionlist:"Morocco"},{optionvalue:"namibia",optionlist:"Namibia"},{optionvalue:"nigeria",optionlist:"Nigeria"},{optionvalue:"senegal",optionlist:"Senegal"},{optionvalue:"south_africa",optionlist:"South Africa"},{optionvalue:"togo",optionlist:"Togo"}],as:[{optionvalue:"cambodia",optionlist:"Cambodia"},{optionvalue:"china",optionlist:"China"},{optionvalue:"india",optionlist:"India"},{optionvalue:"indonesia",optionlist:"Indonesia"},{optionvalue:"japan",optionlist:"Japan"},{optionvalue:"malaysia",optionlist:"Malaysia"},{optionvalue:"philippines",optionlist:"Philippines"},{optionvalue:"singapore",optionlist:"Singapore"},{optionvalue:"southkorea",optionlist:"South Korea"},{optionvalue:"srilanka",optionlist:"Sri Lanka"},{optionvalue:"taiwan",optionlist:"Taiwan"},{optionvalue:"thailand",optionlist:"Thailand"},{optionvalue:"vietnam",optionlist:"Vietnam"}],ca:[{optionvalue:"antigua",optionlist:"Antigua"},{optionvalue:"aruba",optionlist:"Aruba"},{optionvalue:"bahamas",optionlist:"Bahamas"},{optionvalue:"barbados",optionlist:"Barbados"},{optionvalue:"bermuda",optionlist:"Bermuda"},{optionvalue:"bonaire_curacao",optionlist:"Bonaire and Curacao"},{optionvalue:"cayman_islands",optionlist:"Cayman Islands"},{optionvalue:"dominican_republic",optionlist:"Dominican Republic"},{optionvalue:"grenada",optionlist:"Grenada"},{optionvalue:"haiti",optionlist:"Haiti"},{optionvalue:"jamaica",optionlist:"Jamaica"},{optionvalue:"puerto_rico",optionlist:"Puerto Rico"},{optionvalue:"kitts",optionlist:"St. Kitts"},{optionvalue:"lucia",optionlist:"St. Lucia"},{optionvalue:"maarten",optionlist:"St. Maarten"},{optionvalue:"trinidad_tobago",optionlist:"Trinidad and Tobago"},{optionvalue:"turks_caicos",optionlist:"Turks and Caicos"},{optionvalue:"virgin_islands",optionlist:"Virgin Islands"}],eu:[{optionvalue:"austria",optionlist:"Austria"},{optionvalue:"belgium",optionlist:"Belgium"},{optionvalue:"bosnia_herzegovina",optionlist:"Bosnia-Herzegovina"},{optionvalue:"croatia",optionlist:"Croatia"},{optionvalue:"czech_republic",optionlist:"Czech Republic"},{optionvalue:"denmark",optionlist:"Denmark"},{optionvalue:"england",optionlist:"England"},{optionvalue:"finland",optionlist:"Finland"},{optionvalue:"france",optionlist:"France"},{optionvalue:"germany",optionlist:"Germany"},{optionvalue:"great_britain",optionlist:"Great Britain"},{optionvalue:"greece",optionlist:"Greece"},{optionvalue:"hungary",optionlist:"Hungary"},{optionvalue:"iceland",optionlist:"Iceland"},{optionvalue:"ireland",optionlist:"Ireland"},{optionvalue:"italy",optionlist:"Italy"},{optionvalue:"macedonia",optionlist:"Macedonia"},{optionvalue:"montenegro",optionlist:"Montenegro"},{optionvalue:"netherlands",optionlist:"Netherlands"},{optionvalue:"norway",optionlist:"Norway"},{optionvalue:"poland",optionlist:"Poland"},{optionvalue:"portugal",optionlist:"Portugal"},{optionvalue:"romania",optionlist:"Romania"},{optionvalue:"russian_federation",optionlist:"Russian Federation"},{optionvalue:"all_other_cities",optionlist:"All Other Cities"},{optionvalue:"serbia",optionlist:"Serbia"},{optionvalue:"slovak_republic",optionlist:"Slovak Republic"},{optionvalue:"slovenia",optionlist:"Slovenia"},{optionvalue:"spain",optionlist:"Spain"},{optionvalue:"sweden",optionlist:"Sweden"},{optionvalue:"switzerland",optionlist:"Switzerland"},{optionvalue:"turkey",optionlist:"Turkey"},{optionvalue:"ukraine",optionlist:"Ukraine"},{optionvalue:"united_kingdom",optionlist:"United Kingdom"}],me:[{optionvalue:"belize",optionlist:"Belize"},{optionvalue:"costa_rica",optionlist:"Costa Rica"},{optionvalue:"el_salvador",optionlist:"El Salvador"},{optionvalue:"guatemala",optionlist:"Guatemala"},{optionvalue:"honduras",optionlist:"Honduras"},{optionvalue:"mexico",optionlist:"Mexico"},{optionvalue:"nicaragua",optionlist:"Nicaragua"},{optionvalue:"panama",optionlist:"Panama"}],mi:[{optionvalue:"bahrain",optionlist:"Bahrain"},{optionvalue:"israel",optionlist:"Israel"},{optionvalue:"jordan",optionlist:"Jordan"},{optionvalue:"kuwait",optionlist:"Kuwait"},{optionvalue:"palestine",optionlist:"Palestine"},{optionvalue:"qatar",optionlist:"Qatar"},{optionvalue:"saudi_arabia",optionlist:"Saudi Arabia"},{optionvalue:"united_arab_emirates",optionlist:"United Arab Emirates"}],pa:[{optionvalue:"australia",optionlist:"Australia"},{optionvalue:"new_zealand",optionlist:"New Zealand"}],so:[{optionvalue:"argentina",optionlist:"Argentina"},{optionvalue:"brazil",optionlist:"Brazil"},{optionvalue:"chile",optionlist:"Chile"},{optionvalue:"colombia",optionlist:"Colombia"},{optionvalue:"ecuador",optionlist:"Ecuador"},{optionvalue:"guyana",optionlist:"Guyana"},{optionvalue:"peru",optionlist:"Peru"},{optionvalue:"uruguay",optionlist:"Uruguay"},{optionvalue:"venezuela",optionlist:"Venezuela"}]},needHelpSearchResultObj={searchAsYouTypeRenderer:function(){try{$(this).data("autocomplete")._renderItem=function(a,b){return $("<li></li>").data("item.autocomplete",b).append(b.label).appendTo(a)}}catch(a){}},searchAsYouTypeHandler:function(a,b){0==a.term.length&&($("#findResults").html(""),$("#responseTest").hide(),$("#responseHR").hide()),a.term.length>=3&&b(searchResults.getGSAPredictions(a.term,"allresults","false",{callback:function(b){var c="";if(null!=b){for(var d=0;d<b.searchResults.length;d++){var e="";if(b.searchResults[d].searchTitle.length>40?(e=b.searchResults[d].searchTitle.substring(0,37)+"...",-1!=e.indexOf("<b>")&&-1==e.indexOf("</b>")&&(e+="</b>",e=e.replace(/<b>/gi,'<b class="bold">'))):e=b.searchResults[d].searchTitle,c+='<a class="searchResultLink" href="'+b.searchResults[d].searchUrl+'" >'+e+"</a>",4==d)break;c+="</br>"}if(c.length>0)c+='</br> <a class="searchLink" href="/dlsearch/index.jsp?searchText='+a.term+'&category=allresults" >See All Search Result</a>',$("#findResults").html(c),setSearchString(a.term);else{var f="No matching results were found. Please try your search again or visit our <a href='/content/www/en_US/support.html'>help page</a>";$("#findResults").html(f)}$("#responseTest").show(),$("#responseHR").show(),delta.navwidget.adjustWidgetHeight("need-help")}}}))}};if(null==dwr)var dwr={};if(null==dwr.engine&&(dwr.engine={}),null==DWREngine)var DWREngine=dwr.engine;if(null==searchResults)var searchResults={};searchResults._path="/dlsearch/dwr",searchResults.getDynamicClusters=function(a,b,c){dwr.engine._execute(searchResults._path,"searchResults","getDynamicClusters",!1,a,b,c)},searchResults.getGSASearchResults=function(a,b,c,d){dwr.engine._execute(searchResults._path,"searchResults","getGSASearchResults",!1,a,b,c,d)},searchResults.getGSAPredictions=function(a,b,c,d){dwr.engine._execute(searchResults._path,"searchResults","getGSAPredictions",!1,a,b,c,d)};var CheckinWidget={isInitialzed:!1,oci_fieldChosen:"confNum",predictiveTextDefinition:{includeCityLevelCodes:!1},initialize:function(){CheckinWidget.handleFormDisplay(CheckinWidget.oci_fieldChosen,!1),$("#oci_checkinSearchType").on("change",function(){CheckinWidget.handleFormDisplay($(this).val(),!0)}),$("body").prepend('<div id="oci-wait-screen" style="display: none; position: relative; border-radius: 4px; margin: 120px auto; width: 930px; height: 483px; background: white; background-image: url('+imgPath+'/content/dam/delta-applications/pcc/widget/images/texture-lightVer2.png)"><div style="padding-top: 90px; color: black; text-align: center; font-size: 48px"><img style="position: absolute; left: 120px; top: 85px;" src="'+imgPath+'/content/dam/delta-applications/pcc/widget/images/plane-loading.gif">JUST A MOMENT...</div><div style="padding-top: 30px; color: black; text-align: center; font-size: 24px">Finding your trip details</div><div style="border: 2px solid #BFC8D5; border-radius: 4px; background: url('+imgPath+'/content/dam/delta-applications/pcc/widget/images/oci_retrieve_itinerary.jpg); margin: 75px 18px; text-align: center; height: 230px; width: 890px"><div style="font-size: 36px; color: #003366; padding: 65px 0px 0px 325px;">SURF AT 10,000 FEET</div><div style="color: #333333; font-size: 16px; padding: 20px 0px 0px 420px; text-align: left;">Stay connected with Delta. We have more Wi-Fi on more aircraft than any other airline</div></div><div style="display: none"><img src="'+imgPath+'/content/dam/delta-applications/pcc/widget/images/oci_retrieve_itinerary.jpg"></div></div>');var a=new RegExp(/^[A-Za-z0-9]*$/);$lastNameReqd="Please enter your Last Name on the credit card.",$invalidRecLocFormat="Please enter your 6 digit alphanumeric confirmation number.",$invalidCCNumber="Please enter your 10-16 digit credit card number.",$invalidTicketNumber="Please enter your 13 or 14 digit eTicketNumber.",$invalidAirportCode="Please enter your 3 digit city code or airport name.",$invalidSkyMiles="Please enter your 10 digit SkyMiles number.",$("#oci_checkinForm").validate({focusInvalid:!0,onfocusout:!1,onkeyup:!1,submitHandler:function(a){try{var b=$("#oci_checkinForm").attr("action");if(-1==b.indexOf("https")){var c="https://",d=location.hostname,e=c+d+b;$("#oci_checkinForm").attr("action",e)}}catch(f){}setTimeout(function(){$("body").html($("#oci-wait-screen")),$("#oci-wait-screen").show()},1),a.submit()},rules:{lastName:{required:!0,namedata:!0},confirmationNumber:{required:!0,verifyAccNumberFormat:a,confirmationCode:!0},creditcardNumber:{required:!0,verifyAccNumberFormat:a,minlength:13},eticketNumber:{required:!0,eTicketNumber:!0,minlength:13},departureAirport:{required:!0,validairportcode:!0,minlength:3},skymilesNumber:{required:!0,validskymilesNumber:!0,minlength:10}},messages:{lastName:{required:$lastNameReqd,namedata:$lastNameReqd},confirmationNumber:{required:$invalidRecLocFormat,minlength:$invalidRecLocFormat},creditcardNumber:{required:$invalidCCNumber,verifyAccNumberFormat:$invalidCCNumber,minlength:$invalidCCNumber},eticketNumber:{required:$invalidTicketNumber,eTicketNumber:$invalidTicketNumber,minlength:$invalidTicketNumber},departureAirport:{required:$invalidAirportCode,validairportcode:$invalidAirportCode,minlength:$invalidAirportCode},skymilesNumber:{required:$invalidSkyMiles,validskymilesNumber:$invalidSkyMiles,minlength:$invalidSkyMiles}}}),$.validator.addMethod("verifyAccNumberFormat",function(a,b,c){var d=!1,e=new RegExp(c);return e.test(a)&&(d=!0),d},$invalidRecLocFormat),$.validator.addMethod("confirmationCode",function(a){return""==a||(6==a.length||8==a.length)&&null!=a.match(/^[a-z0-9]+$/i)?!0:!1},$invalidRecLocFormat),$.validator.addMethod("eTicketNumber",function(a){var b=!1,c=new RegExp(/^[0-9]{13,14}$/g);return c.test(a)&&(b=!0),b},$invalidTicketNumber),$.validator.addMethod("validairportcode",function(a){var b=!1,c=new RegExp(/([a-zA-Z]{3})+/g);return c.test(a)&&(b=!0),b},$invalidAirportCode),$.validator.addMethod("validskymilesNumber",function(a){var b=!1,c=new RegExp(/^[0-9]{10}$/g);return c.test(a)&&(b=!0),b},$invalidSkyMiles),$("#oci_searchButtonId").click(function(){$("#widget-checkin").css("height","auto")}),DeltaUtils.addAutocomplete("#oci_airPortField","airportCode");try{$("#oci_confirmation_info").on("click",function(){DeltaUtils.showToolTip("oci_confirmation_info",$("#ociConfirmationTooltip").val(),0,5,"",250,"","")}),$("#oci_ticket_info").on("click",function(){DeltaUtils.showToolTip("oci_ticket_info",$("#ociTicketTooltip").val(),0,5,"",250,"","")})}catch(b){}CheckinWidget.isInitialzed||(CheckinWidget.getOciCheckinEligibleTrips(),CheckinWidget.createAirportBubble(),CheckinWidget.hideErrorRegions(),CheckinWidget.isInitialzed=!0,$("#nav-widget-checkin").click(function(){try{delta.navwidget.adjustWidgetHeight("checkin")}catch(a){}})),setTimeout("$('#oci_checkinForm select').focus().blur();",2)},handleFormDisplay:function(a,b){CheckinWidget.hideErrorRegions(),$("#oci_checkinForm").find("input").removeClass("error"),$(".oci_checkinWidgetFieldHolder").hide(),$(".oci_checkinWidgetLabelHolder").show(),"confirmationInput"==a?($(".oci_confirmationNumberHolder").show(),$(".oci_confirmationNumberHolder").css("display","block"),CheckinWidget.oci_fieldChosen="confNum"):"eticketInput"==a?($(".oci_eticketNumberHolder").show(),CheckinWidget.oci_fieldChosen="eTicket",$(".oci_eticketNumberHolder").css("display","block")):"skymilesInput"==a?($(".oci_skymilesNumberHolder").show(),CheckinWidget.oci_fieldChosen="skyMiles",$(".oci_skymilesNumberHolder").css("display","block")):"creditCardInput"==a?($(".oci_creditcardNumberHolder").show(),CheckinWidget.oci_fieldChosen="ccNum",$("#oci_cardNumField").validateCreditCard(getCreditCardType),$(".oci_creditcardNumberHolder").css("display","block")):($(".oci_confirmationNumberHolder").show(),$(".oci_confirmationNumberHolder").css("display","block")),b&&CheckinWidget.adjustCheckinWidgetHeight()},hideErrorRegions:function(){$(".oci_noDisplay").hide()},validateFindBy:function(){var a=!0,b=!0,c=!1;CheckinWidget.hideErrorRegions();try{var d=$("#oci_checkinForm").attr("action");if(-1==d.indexOf("https")){var e="https://",f=location.hostname,g=e+f+d;$("#oci_checkinForm").attr("action",g)}}catch(h){}if("confNum"==CheckinWidget.oci_fieldChosen){var i=/^[a-zA-Z0-9]{6}$/g,j=DeltaUtils.removeSpaces($("#oci_confNumField").val());j.search(i)?($("#oci_confirmationError").show(),$("#oci_confNumField").addClass("error"),$("#oci_confNumField").attr("aria-invalid",!0),a=!1):($("#oci_confNumField").removeClass("error"),$("#oci_confNumField").attr("aria-invalid",!1))}else if("eTicket"==CheckinWidget.oci_fieldChosen){var k=/^[0-9]{13,14}$/g;$("#oci_eTicketField").val().search(k)?($("#oci_eticketError").show(),$("#oci_eTicketField").addClass("error"),$("#oci_eTicketField").attr("aria-invalid",!0),a=!1):($("#oci_eTicketField").removeClass("error"),$("#oci_eTicketField").attr("aria-invalid",!1))}else if("skyMiles"==CheckinWidget.oci_fieldChosen){var l=/^[0-9]{10}$/g;$("#oci_skyMilesField").val().search(l)?($("#oci_skymilesError").show(),$("#oci_skyMilesField").addClass("error"),$("#oci_skyMilesField").attr("aria-invalid",!0),a=!1):($("#oci_skyMilesField").removeClass("error"),$("#oci_skyMilesField").attr("aria-invalid",!1))}else if("ccNum"==CheckinWidget.oci_fieldChosen){var m=$("#oci_cardNumField").val();0==m.length||isNotNumberAndValidLength(m)?($("#oci_creditcardError").show(),$("#oci_cardNumField").addClass("error"),$("#oci_cardNumField").attr("aria-invalid",!0),a=!1):($("#oci_cardNumField").removeClass("error"),$("#oci_cardNumField").attr("aria-invalid",!1)),0==$("#oci_lastNameField").val().length?($("#oci_lastnameError").show(),$("#oci_lastNameField").addClass("error"),$("#oci_lastNameField").attr("aria-invalid",!0),a=!1):($("#oci_lastNameField").removeClass("error"),$("#oci_lastNameField").attr("aria-invalid",!1))}var n=/([a-zA-Z]{3})+/g;return $("#oci_airPortField").val().search(n)?($("#oci_airportError").show(),$("#oci_airPortField").addClass("error"),$("#oci_airPortField").attr("aria-invalid",!0),b=!1):($("#oci_airPortField").removeClass("error"),$("#oci_airPortField").attr("aria-invalid",!1)),b&&a?(c=!0,CheckinWidget.adjustCheckinWidgetHeight()):c=!1,CheckinWidget.adjustCheckinWidgetHeight(),c},getOciCheckinEligibleTrips:function(){try{"undefined"!=typeof CustomerInfo&&CustomerInfo.isLoggedIn()?$.ajax({type:"POST",url:"https://"+window.location.host+"/PCCOciWeb/getCheckinEligibleTripsAction.action",timeout:15e3,success:function(a){$("#oci_availableTrips").html(a),DeltaUtils.exists(a)&&""!==a&&CheckinWidget.adjustCheckinWidgetHeight()},error:function(){$("#oci_availableTrips").html("")}}):$("#oci_availableTrips").html("")}catch(a){}},adjustCheckinWidgetHeight:function(){try{delta.navwidget.adjustWidgetHeight("checkin")}catch(a){}},createAirportBubble:function(){try{var a=new AirportLookup({targetInp:"#oci_airPortField",displayTitle:"From Airport",serverUrl:window.location.host});a.attachEventHandlers()}catch(b){}}};(function(){$.fn.validateCreditCard=function(a){var b,c,d,e,f,g;return c=[{name:"amex",code:"AX",pattern:/^3[47]/,valid_length:[15]},{name:"diners_club_carte_blanche",code:"DC",pattern:/^30[0-5]/,valid_length:[14]},{name:"diners_club_international",code:"DC",pattern:/^36/,valid_length:[14]},{name:"jcb",code:"JC",pattern:/^35(2[89]|[3-8][0-9])/,valid_length:[16]},{name:"laser",code:"LS",pattern:/^(6304|670[69]|6771)/,valid_length:[16,17,18,19]},{name:"visa_electron",code:"VI",pattern:/^(4026|417500|4508|4844|491(3|7))/,valid_length:[16]},{name:"visa",code:"VI",pattern:/^4/,
valid_length:[16]},{name:"mastercard",code:"CA",pattern:/^5[1-5]/,valid_length:[16]},{name:"maestro",code:"TO",pattern:/^(5018|5020|5038|6304|6759|676[1-3])/,valid_length:[12,13,14,15,16,17,18,19]},{name:"discover",code:"DS",pattern:/^(6011|622(12[6-9]|1[3-9][0-9]|[2-8][0-9]{2}|9[0-1][0-9]|92[0-5]|64[4-9])|65)/,valid_length:[16]},{name:"uatp",code:"TP",pattern:/^1/,valid_length:[16]}],d=function(a){var d,e;for(d=0,e=c.length;e>d;d++)if(b=c[d],a.match(b.pattern))return b;return null},g=function(c){return b=d(c),a({card_type:b})},f=function(){var a;return a=e($(this).val()),g(a)},e=function(a){return a.replace(/[ -]/g,"")},this.bind("input",function(){return $(this).unbind("keyup"),f.call(this)}),this.bind("keyup",function(){return f.call(this)}),0!==this.length&&f.call(this),this}}).call(this);var delta=delta||{};delta.widgetnav=delta.widgetnav||{},delta.widgetnav.vacationshelper={CQ_ERROR_PATH:"/utils/vacations/errors/wid_adv/",CQ_ADVISORY_PATH:"/utils/vacations/advisory/",vac_errorConfig:[],getErrorMsg:function(a,b,c,d){var e="";e=null==d||void 0==d||""==d?this.CQ_ERROR_PATH+b+".html":d;var f="localhost"===window.location.hostname?"//dvl7.delta.com/"+e:e;return void 0!=this.vac_errorConfig[b]&&void 0!=this.vac_errorConfig[b].messageText?this.vac_errorConfig[b].messageText:(void 0!=this.vac_errorConfig[b]&&void 0!=this.vac_errorConfig[b].relativePath&&(f=this.vac_errorConfig[b].relativePath),f.length>0&&delta.widgetnav.vacationshelper.crossDomainAjaxCall(f,function(e){void 0==e&&(e="Please provide valid input and then proceed."),delta.widgetnav.vacationshelper.vac_addErrorMessage(b,d,e),null!==a&&void 0!==a&&a.element(c)},function(){try{var a="Please provide valid input and then proceed.";return delta.widgetnav.vacationshelper.vac_addErrorMessage(b,d,a),a}catch(c){}}),"")},vac_addErrorMessage:function(a,b,c,d){this.vac_errorConfig=this.vac_errorConfig||{},this.vac_errorConfig[a]=this.vac_errorConfig[a]||{},this.vac_errorConfig[a].relativePath=this.vac_errorConfig[a].relativePath||b,this.vac_errorConfig[a].messageText=this.vac_errorConfig[a].messageText||c,this.vac_errorConfig[a].type=this.vac_errorConfig[a].type||d},crossDomainAjaxCall:function(a,b,c){$.ajax({url:a,cache:!1,type:"GET",async:!0,success:function(a){b(a)},error:function(a,b,d){"function"==typeof c&&c(a,b,d)}})}},delta.widgetnav.vacations_tab_identifier_map={flightHotelTab:"flightHotel",flightCarTab:"flightCar",hotelCarTab:"hotelCar"},jQuery.validator.addMethod("vacationsRequiredFromCity",function(a,b,c){ErrorMessages.clearErrorMsg(b);var d,e,f=/{citycode}/gi;return $(b).data("invalidCityCode")&&(e=$(b).data("invalidCityCode").toLowerCase()),VacationsAirportValidation.isBlank(a,$(c[0]).val())?(jQuery.validator.messages.vacationsRequiredFromCity=delta.widgetnav.vacationshelper.getErrorMsg(this,c[1],b),!1):"City or Airport"!=a&&""!=$.trim(a)&&/^[a-z]+$/i.test(a)?$(b).hasClass("incorrectCityCode")&&a.toLowerCase()==e?($(b).data("errorCode")&&(d=$(b).data("errorCode")),jQuery.validator.messages.vacationsRequiredFromCity=delta.widgetnav.vacationshelper.getErrorMsg(this,d,b).replace(f,a),!1):(jQuery.validator.messages.vacationsRequiredFromCity="",!0):(jQuery.validator.messages.vacationsRequiredFromCity=delta.widgetnav.vacationshelper.getErrorMsg(this,c[1],b),!1)},""),jQuery.validator.addMethod("vacationsRequiredToCity",function(a,b,c){ErrorMessages.clearErrorMsg(b);var d,e,f=/{citycode}/gi;return $(b).data("invalidCityCode")&&(e=$(b).data("invalidCityCode").toLowerCase()),VacationsAirportValidation.isBlank(a,$(c[0]).val())?(jQuery.validator.messages.vacationsRequiredToCity=delta.widgetnav.vacationshelper.getErrorMsg(this,c[1],b),!1):"City or Airport"!=a&&""!=$.trim(a)&&/^[a-z]+$/i.test(a)?$(b).hasClass("incorrectCityCode")&&a.toLowerCase()==e?($(b).data("errorCode")&&(d=$(b).data("errorCode")),jQuery.validator.messages.vacationsRequiredToCity=delta.widgetnav.vacationshelper.getErrorMsg(this,d,b).replace(f,a),!1):VacationsAirportValidation.sameValueOrBlank(a,$(c[0]).val())?(jQuery.validator.messages.vacationsRequiredToCity=delta.widgetnav.vacationshelper.getErrorMsg(this,c[3],b),!1):(jQuery.validator.messages.vacationsRequiredToCity="",!0):(jQuery.validator.messages.vacationsRequiredToCity=delta.widgetnav.vacationshelper.getErrorMsg(this,c[1],b),!1)},""),jQuery.validator.addMethod("vac_checkDateFormat",function(a,b,c){"use strict";return 0===a.length||"mm/dd/yyyy"===a?(jQuery.validator.messages.vac_checkDateFormat=delta.widgetnav.vacationshelper.getErrorMsg(this,c[0].split(",")[1],b),!1):a.length>0&&/^([0-9]|0[0-9]|1[0-2])\/([0-9]|[(0-2][0-9]|3[0-1])\/\d{4}$/.test(a)===!1?(jQuery.validator.messages.vac_checkDateFormat=delta.widgetnav.vacationshelper.getErrorMsg(this,c[0].split(",")[0],b),!1):!0},""),jQuery.validator.addMethod("vac_yearValid",function(a,b,c){try{if(""!==a.replace(/\s/g,"")){if(/\d*[1-9]\d*/.test(a)){{var d=a.split("/"),e=new Date,f=e.getFullYear();e.getMonth(),e.getDate()}return d[2].match(/\d*[1-9]\d*/)<f?(jQuery.validator.messages.vac_yearValid=delta.widgetnav.vacationshelper.getErrorMsg(this,c[0],b),!1):d[0].match(/\d*[1-9]\d*/)>12?(jQuery.validator.messages.vac_yearValid=delta.widgetnav.vacationshelper.getErrorMsg(this,c[0],b),!1):d[1].match(/\d*[1-9]\d*/)>31?(jQuery.validator.messages.vac_yearValid=delta.widgetnav.vacationshelper.getErrorMsg(this,c[0],b),!1):!0}return jQuery.validator.messages.vac_yearValid=delta.widgetnav.vacationshelper.getErrorMsg(this,c[0],b),!1}return jQuery.validator.messages.vac_yearValid=delta.widgetnav.vacationshelper.getErrorMsg(this,c[0],b),!1}catch(g){}return jQuery.validator.messages.vac_yearValid=delta.widgetnav.vacationshelper.getErrorMsg(this,c[0],b),!1},""),jQuery.validator.addMethod("vac_leapYear",function(a,b,c){"use strict";if(""!==a.replace(/\s/g,"")){if(/\d*[1-9]\d*/.test(a)){var d=a.split("/"),e=d[0],f=d[1],g=d[2],h=["29","30"];if(g%4===0){if(g%100!==0)return"02"===e?"29">=f?!0:(jQuery.validator.messages.vac_leapYear=delta.widgetnav.vacationshelper.getErrorMsg(this,c[0],b),!1):!0;if(g%400!==0)return h.indexOf(f)>-1&&"02"===e?(jQuery.validator.messages.vac_leapYear=delta.widgetnav.vacationshelper.getErrorMsg(this,c[0],b),!1):!0;if(g%400===0)return"02"===e?"29">=f?!0:(jQuery.validator.messages.vac_leapYear=delta.widgetnav.vacationshelper.getErrorMsg(this,c[0],b),!1):!0}else if(g%4!==0)return h.indexOf(f)>-1&&"02"===e?(jQuery.validator.messages.vac_leapYear=delta.widgetnav.vacationshelper.getErrorMsg(this,c[0],b),!1):!0;return!0}return jQuery.validator.messages.vac_leapYear=delta.widgetnav.vacationshelper.getErrorMsg(this,c[0],b),!1}return jQuery.validator.messages.vac_leapYear=delta.widgetnav.vacationshelper.getErrorMsg(this,c[0],b),!1},""),jQuery.validator.addMethod("vac_monthLastDay",function(a,b,c){"use strict";if(""!==a.replace(/\s/g,"")){if(/\d*[1-9]\d*/.test(a)){var d=a.split("/"),e=d[0],f=d[1],g=["02","04","06","09","11"];return 31===f&&g.indexOf(e)>-1?(jQuery.validator.messages.vac_monthLastDay=delta.widgetnav.vacationshelper.getErrorMsg(this,c[0],b),!1):!0}return jQuery.validator.messages.vac_monthLastDay=delta.widgetnav.vacationshelper.getErrorMsg(this,c[0],b),!1}return jQuery.validator.messages.vac_monthLastDay=delta.widgetnav.vacationshelper.getErrorMsg(this,c[0],b),!1},""),jQuery.validator.addMethod("vac_checkValidDateRange",function(a,b,c){var d,e=new Date;return!/Invalid|NaN/.test(new Date(a))&&(d=new Date(a),dateDifference=(d-e)/864e5,dateDifference>331)?(jQuery.validator.messages.vac_checkValidDateRange=delta.widgetnav.vacationshelper.getErrorMsg(this,c[0],b),!1):!0},""),jQuery.validator.addMethod("vac_checkFutureDate",function(a,b,c){"use strict";var d,e,f,g;if(!/Invalid|NaN/.test(new Date(a))){if(c.length>1&&$(c[1]).val())return d=new Date(a),e=new Date($(c[1]).val()),g=(d-e)/864e5,e>d?(jQuery.validator.messages.vac_checkFutureDate=delta.widgetnav.vacationshelper.getErrorMsg(this,c[0].split(",")[0],b),!1):d>e||e>d?g>28?(jQuery.validator.messages.vac_checkFutureDate=delta.widgetnav.vacationshelper.getErrorMsg(this,c[0].split(",")[1],b),!1):!0:(jQuery.validator.messages.vac_checkFutureDate=delta.widgetnav.vacationshelper.getErrorMsg(this,c[0].split(",")[2],b),!1);if(e=new Date(a),f=new Date,e.toDateString()===f.toDateString())return jQuery.validator.messages.vac_checkFutureDate=delta.widgetnav.vacationshelper.getErrorMsg(this,c[0],b),!1}return!0},""),jQuery.validator.addMethod("vac_checkSkyMiles",function(a,b,c){var d=isNaN(Number(a));return d||10!==a.length||0===a.length?(jQuery.validator.messages.vac_checkSkyMiles=delta.widgetnav.vacationshelper.getErrorMsg(this,c[0],b),!1):!0},""),jQuery.validator.addMethod("vac_checkPromoCode",function(a,b,c){var d=!1;if(""!=a){var e=a.match(/\d+/g);null!=e&&/[a-zA-Z]/.test(a)&&(d=!0),d||(jQuery.validator.messages.vac_checkPromoCode=delta.widgetnav.vacationshelper.getErrorMsg(this,c[0],b))}else d=!0;return d},""),jQuery.validator.addMethod("vac_eachRoomMinAdultCount",function(a,b,c){"use strict";var d=Number($(b).val()),e=(parseInt($("#delta-vacations-expanded-tabs ul li.ui-state-active a")[0].id.replace("vacationsRoom","")),!0);return 0===d&&(jQuery.validator.messages.vac_eachRoomMinAdultCount=delta.widgetnav.vacationshelper.getErrorMsg(this,c[0],b),e=!1),e},""),jQuery.validator.addMethod("vac_eachChildAge",function(a,b,c){"use strict";var d=!0;return 0==parseInt($(b).val())&&(jQuery.validator.messages.vac_eachChildAge=delta.widgetnav.vacationshelper.getErrorMsg(this,c[0],b),d=!1),d},""),jQuery.validator.addMethod("vac_adultValidEachRoomCount",function(a,b,c){{var d=0,e=0,f=0,g=!1,h=$("#vacationSearchWidgetContainer .vacations-pkg-tabs").find(".pkg-name.active").attr("id");$("#delta-vacations-expanded-tabs ul li:visible").length}if("none"!=$("#delta-vacations-expanded-tabs").css("display")){if("flightHotelTab"==h?(f=Number($("#adultCount").val()),e=Number($("#childCount").val()),$("#flightHotelExpandedWidgetDiv select[id^='hiddenAdultCount']").each(function(){d+=parseFloat($(this).val()),0===Number($(this).val())&&(g=!0)})):"flightCarTab"==h?(f=Number($("#flightCarAdultCount").val()),e=Number($("#flightCarChildCount").val()),$("#flightCarExpandedWidgetDiv select[id^='hiddenAdultCount']").each(function(){d+=parseFloat($(this).val()),0===Number($(this).val())&&(g=!0)})):(f=Number($("#travelerAdultCount").val()),e=Number($("#travelerChildCount").val()),$("#hotelCarExpandedWidgetDiv select[id^='hiddenAdultCount']").each(function(){d+=parseFloat($(this).val()),0===Number($(this).val())&&(g=!0)})),Number(a)!==d||g)return jQuery.validator.messages.vac_adultValidEachRoomCount=delta.widgetnav.vacationshelper.getErrorMsg(this,c[0],b),!1;if(f+e>9)return jQuery.validator.messages.vac_adultValidEachRoomCount=delta.widgetnav.vacationshelper.getErrorMsg(this,c[1],b),!1}return!0},""),jQuery.validator.addMethod("vac_childValidEachRoomCount",function(a,b,c){var d=$("#vacationSearchWidgetContainer .vacations-pkg-tabs").find(".pkg-name.active").attr("id"),e=0;return"none"!=$("#delta-vacations-expanded-tabs").css("display")&&("flightHotelTab"==d?$("#flightHotelExpandedWidgetDiv select[id^='hiddenchildrenNumber']").each(function(){e+=parseFloat($(this).val())}):"flightCarTab"==d?$("#flightCarExpandedWidgetDiv select[id^='hiddenchildrenNumber']").each(function(){e+=parseFloat($(this).val())}):$("#hotelCarExpandedWidgetDiv select[id^='hiddenchildrenNumber']").each(function(){e+=parseFloat($(this).val())}),Number(a)!==e)?(jQuery.validator.messages.vac_childValidEachRoomCount=delta.widgetnav.vacationshelper.getErrorMsg(this,c[0],b),!1):!0},""),jQuery.validator.addMethod("vac_vacationsRequiredHotelLocation",function(a,b,c){ErrorMessages.clearErrorMsg(b);return VacationsAirportValidation.isHotelLocationBlank(a)?(jQuery.validator.messages.vac_vacationsRequiredHotelLocation=delta.widgetnav.vacationshelper.getErrorMsg(this,c[0],b),!1):"City or Airport"!=a&&""!=$.trim(a)&&/^[a-z]+$/i.test(a)?(jQuery.validator.messages.vac_vacationsRequiredHotelLocation="",!0):(jQuery.validator.messages.vac_vacationsRequiredHotelLocation=delta.widgetnav.vacationshelper.getErrorMsg(this,c[0],b),!1)},""),jQuery.validator.messages.vac_vacationsRequiredStartDate="",jQuery.validator.classRuleSettings.vac_vacationsRequiredStartDate={vac_vacationsRequiredStartDate:!0},jQuery.validator.addMethod("vac_vacationsRequiredStartDate",function(a,b,c){ErrorMessages.clearErrorMsg(b);var d=VacationsDateValidation.formatCheck(a),e=VacationsDateValidation.maxRangeCheck(a),f=VacationsDateValidation.minRangeCheck(a),g=VacationsDateValidation.returnCheck();return VacationsDateValidation.blankDateCheck(c.departureDateField,c.returnDateField)?(jQuery.validator.messages.vac_vacationsRequiredStartDate="",!1):"mm/dd/yyyy"==a||""==$.trim(a)?(jQuery.validator.messages.vac_vacationsRequiredStartDate=ErrorMessages.noDate.errMsg+" Departure Date.",!1):d?(jQuery.validator.messages.vac_vacationsRequiredStartDate=$("div[for=returnDate]").text()!=ErrorMessages.invalidFormatDate.errMsg||$("div[for=returnDate]").text()==ErrorMessages.invalidFormatDate.errMsg&&"none"==$("div[for=returnDate]").css("display")?ErrorMessages.invalidFormatDate.errMsg:"",!1):e?(jQuery.validator.messages.vac_vacationsRequiredStartDate=ErrorMessages.futureDate.errMsg,!1):f?(jQuery.validator.messages.vac_vacationsRequiredStartDate=ErrorMessages.noDate.errMsg+" Departure Date.",!1):g?(jQuery.validator.messages.vac_vacationsRequiredStartDate=ErrorMessages.noDate.errMsg+" Departure Date.",$("#"+b.id).val(""),!1):(jQuery.validator.messages.vac_vacationsRequiredStartDate="",!0)},jQuery.validator.messages.vac_vacationsRequiredStartDate),jQuery.validator.messages.vac_vacationsRequiredReturnDate="",jQuery.validator.classRuleSettings.vac_vacationsRequiredReturnDate={vac_vacationsRequiredReturnDate:!0},jQuery.validator.addMethod("vac_vacationsRequiredReturnDate",function(a,b,c){ErrorMessages.clearErrorMsg(b);var d=VacationsDateValidation.formatCheck(a),e=VacationsDateValidation.maxRangeCheck(a),f=VacationsDateValidation.minRangeCheck(a),g=VacationsDateValidation.returnCheck();return VacationsDateValidation.blankDateCheck(c.departureDateField,c.returnDateField)?(jQuery.validator.messages.vac_vacationsRequiredReturnDate=ErrorMessages.blankDates.errMsg,!1):"mm/dd/yyyy"==a||""==$.trim(a)?(jQuery.validator.messages.vac_vacationsRequiredReturnDate=ErrorMessages.noDate.errMsg+" Return Date.",!1):d?(jQuery.validator.messages.vac_vacationsRequiredReturnDate=$("div[for=departureDate]").text()!=ErrorMessages.invalidFormatDate.errMsg||$("div[for=departureDate]").text()==ErrorMessages.invalidFormatDate.errMsg&&"none"==$("div[for=departureDate]").css("display")?ErrorMessages.invalidFormatDate.errMsg:"",!1):e?(jQuery.validator.messages.vac_vacationsRequiredReturnDate=ErrorMessages.futureDate.errMsg,!1):f?(jQuery.validator.messages.vac_vacationsRequiredReturnDate=ErrorMessages.noDate.errMsg+" Return Date.",!1):g?(jQuery.validator.messages.vac_vacationsRequiredReturnDate=ErrorMessages.noDate.errMsg+" Return Date.",$("#"+b.id).val(""),!1):(jQuery.validator.messages.vac_vacationsRequiredReturnDate="",!0)},jQuery.validator.messages.vac_vacationsRequiredReturnDate),jQuery.validator.messages.vac_vacationsHotelDate="Please enter a valid ",jQuery.validator.classRuleSettings.vac_vacationsHotelDate={vac_vacationsHotelDate:!0},jQuery.validator.addMethod("vac_vacationsHotelDate",function(a,b,c){jQuery.validator.messages.vac_vacationsHotelDate="Please enter a valid ",a=DeltaUtils.removeSpaces(a);try{var d=/^\d{1,2}\/\d{1,2}\/\d{4}$/;return a.match(d)?(jQuery.datepicker.parseDate("mm/dd/yy",a),resizeVacationsWidget.resize(),!0):(jQuery.validator.messages.vac_vacationsHotelDate=jQuery.validator.messages.vac_vacationsHotelDate+c.data,resizeVacationsWidget.resize(),!1)}catch(e){return jQuery.validator.messages.vac_vacationsHotelDate=jQuery.validator.messages.vac_vacationsHotelDate+c.data,resizeVacationsWidget.resize(),!1}},jQuery.validator.messages.vac_vacationsHotelDate),jQuery.validator.messages.vac_vacationsHotelPastDate="Please select future date",jQuery.validator.addMethod("vac_vacationsHotelPastDate",function(a){var b=(new Date).toDateString(),c=new Date(a).toDateString();return b!=c&&(new Date).getTime()>new Date(a).getTime()?(resizeHotelWidget.resize(),!1):(resizeVacationsWidget.resize(),!0)},jQuery.validator.messages.vac_vacationsHotelPastDate),jQuery.validator.messages.vac_greaterThan="Please select an earlier check-in date or a later check-out date.",jQuery.validator.addMethod("vac_greaterThan",function(a,b,c){return""==$(c).val()||"mm/dd/yyyy"==$(c).val()?!0:/Invalid|NaN/.test(new Date(a))?isNaN(a)&&isNaN($(c).val())||parseFloat(a)>parseFloat($(c).val()):new Date(a)>new Date($(c).val())},jQuery.validator.messages.vac_greaterThan),jQuery.validator.messages.vac_greaterThanCarDate="Please select an earlier pick-up date or a later drop-off date.",jQuery.validator.addMethod("vac_greaterThanCarDate",function(a,b,c){return""==$(c).val()||"mm/dd/yyyy"==$(c).val()?!0:/Invalid|NaN/.test(new Date(a))?isNaN(a)&&isNaN($(c).val())||parseFloat(a)>parseFloat($(c).val()):new Date(a)>new Date($(c).val())},jQuery.validator.messages.vac_greaterThanCarDate),jQuery.validator.messages.vac_vacationsTimeGreaterThan="To Time Must be greater than From Time.",jQuery.validator.addMethod("vac_vacationsTimeGreaterThan",function(a,b,c){var d=!0,e=$(c).val().split(" ");fromTime=e[0],fromTimeAmOrPm=e[1];var f=a.split(" ");toTime=f[0],toTimeAmOrPm=f[1];var g=fromTime.split(":"),h=(g[0],toTime.split(":")),i=(h[0],$("#pickUpDate").val()),j=$("#dropOffDate").val();return("mm/dd/yyyy"==i||"mm/dd/yyyy"==j)&&(d=!0),i==j&&"mm/dd/yyyy"!=i&&"mm/dd/yyyy"!=j&&(d=Date.parse(i+" "+fromTime+" "+fromTimeAmOrPm)<Date.parse(j+" "+toTime+" "+toTimeAmOrPm)),d},jQuery.validator.messages.vac_vacationsTimeGreaterThan),jQuery.validator.messages.vacationsAdultChildCountMatch="Adult and Child count does not match with search.",jQuery.validator.classRuleSettings.vacationsAdultChildCountMatch={vacationsAdultChildCountMatch:!0},jQuery.validator.addMethod("vacationsAdultChildCountMatch",function(a,b,c){var d=c.formIdentifier,e=(c.formType,d+"SearchForm"),f=parseInt($("#"+e+" [name='travelersAdults']").val()),g=parseInt($("#"+e+" [name='travelersChildren']").val()),h=parseInt($("#"+e+" [name='numberOfRooms']").val()),i=0,j=0,k=!0;if(h>1){for(var l=1;h>=l;l++)i+=parseInt($("#"+e+" [name='rooms["+(l-1)+"].adultsNumber']").val()),j+=parseInt($("#"+e+" [name='rooms["+(l-1)+"].childrenNumber']").val());k=f!=i||g!=j?!1:!0}else g>0?(i=parseInt($("#"+e+" [name='rooms[0].adultsNumber']").val()),j=parseInt($("#"+e+" [name='rooms[0].childrenNumber']").val()),k=f!=i||g!=j?!1:!0):k=!0;return k},jQuery.validator.messages.vacationsAdultChildCountMatch),jQuery.validator.addMethod("vac_stringValue",function(a,b,c){"use strict";return"City or Airport"!==a&&3===a.length&&/^[a-z]+$/i.test(a)?!0:(jQuery.validator.messages.vac_stringValue=delta.widgetnav.vacationshelper.getErrorMsg(this,c[0],b),!1)},"");var VacationsAirportValidation={sameValueOrBlank:function(a,b){return a.toUpperCase()==b.toUpperCase()?!0:!1},isBlank:function(a,b){return"City or Airport"!=a&&""!=$.trim(a)&&/^[a-z]+$/i.test(a)||"City or Airport"!=b&&""!=$.trim(b)&&/^[a-z]+$/i.test(b)?!1:!0},isHotelLocationBlank:function(a){return"City or Airport"!=a&&""!=$.trim(a)&&/^[a-z]+$/i.test(a)?!1:!0}},VacationsDateValidation={maxDaysinFuture:331,todayDate:function(){var a=$("#serverDate").html().split("-");return new Date(a[0],a[1],a[2])},minDate:function(){return new Date(VacationsDateValidation.todayDate().getFullYear(),VacationsDateValidation.todayDate().getMonth(),VacationsDateValidation.todayDate().getDate())},maxDate:function(){return new Date(VacationsDateValidation.minDate().getTime()+24*VacationsDateValidation.maxDaysinFuture*60*60*1e3)},formatCheck:function(a){var b=/^\d{1,2}\/\d{1,2}\/\d{4}$/;if(b.test(a)){var c=a.split("/"),d=parseInt(c[1],10),e=parseInt(c[0],10),f=parseInt(c[2],10),g=new Date(f,e-1,d);return g.getFullYear()==f&&g.getMonth()==e-1&&g.getDate()==d?!1:!0}return!0},rangeCheck:function(a){var b=a.split("/"),c=parseInt(b[1],10),d=parseInt(b[0],10),e=parseInt(b[2],10),f=new Date(e,d-1,c);return f.getTime()<VacationsDateValidation.minDate().getTime()||f.getTime()>VacationsDateValidation.maxDate().getTime()?!0:!1},maxRangeCheck:function(a){var b=a.split("/"),c=parseInt(b[1],10),d=parseInt(b[0],10),e=parseInt(b[2],10),f=new Date(e,d-1,c);return f.getTime()>VacationsDateValidation.maxDate().getTime()?!0:!1},minRangeCheck:function(a){var b=a.split("/"),c=parseInt(b[1],10),d=parseInt(b[0],10),e=parseInt(b[2],10),f=new Date(e,d-1,c);return f.getTime()<VacationsDateValidation.minDate().getTime()?!0:!1},returnCheck:function(){var a=$("#vacationsdepartureDate").val().split("/"),b=$("#vacationsreturnDate").val().split("/");if(VacationsDateValidation.formatCheck($("#vacationsdepartureDate").val())||VacationsDateValidation.formatCheck($("#vacationsreturnDate").val()))return!1;var c=parseInt(a[1],10),d=parseInt(a[0],10),e=parseInt(a[2],10),f=new Date(e,d-1,c),g=parseInt(b[1],10),h=parseInt(b[0],10),i=parseInt(b[2],10),j=new Date(i,h-1,g);return f.getTime()>j.getTime()?!0:!1},formatDate:function(a){if(!this.isValidateDate(a))return a;var b=this.formatYear(a);return b},isValidateDate:function(a){var b=/^\d{1,2}(\-|\/|\.)\d{1,2}\1\d{2,4}$/;return b.test(a)?!0:!1},formatYear:function(a){var b,c=a;return b=a.substr(a.lastIndexOf("/")+1),2==b.length&&(b=parseInt(b)+2e3,c=""+a.substring(0,a.lastIndexOf("/")+1)+b),c},blankDateCheck:function(a,b){var c=$("input#"+a).val(),d=$("input#"+b).val();return"Depart Date"!=c&&""!=$.trim(c)||"Return Date"!=d&&""!=$.trim(d)?!1:!0}},delta=delta||{};delta.vacations=delta.vacations||{},delta.vacations.deltaVacationsAirportList={},delta.vacations.deltaVacationsActiveInputFieldId="";var uiDialogTitleCss={airportPicker:{width:"100%",background:"#fff",height:"35px",margin:"-1px 0 30px",padding:"5px 15px",boxShadow:"0 1px 2px rgba(0,0,0, 0.5)",borderRadius:"2px 2px 0 0"},interstitial:{background:"#fff",boxShadow:"0 1px 2px rgba(0,0,0, 0.5)",borderRadius:"2px 2px 0 0",height:"auto",width:"95%"}};$(function(){$(document).on("keyup","#flightCarFromAirport, #fromAirport",function(){$(this).autocomplete({autoFocus:!1,airportId:"sourceAirport",source:delta.vacations.deltaVacationsAirportPredictions.airportPredictionHandler,open:function(){var a=$(this).offset().top+$(this).outerHeight(),b="";b="flightCarFromAirport"==this.id?"vac_fromAirportPredictionList_flightCar":"vac_fromAirportPredictionList",$(this).autocomplete("widget").attr("id",b),$(this).autocomplete("widget").css({width:128,top:a})},select:function(a,b){var c=$("#vacationSearchWidgetContainer .vacations-pkg-tabs").find(".pkg-name.active").attr("id"),d=delta.widgetnav.vacations_tab_identifier_map[c],e=$(this).parents("form").first(),f=$.data(e[0],"validator");$(this).removeClass("incorrectCityCode"),f.element("#"+$(this).attr("id"));var g="",h="",i="",j="",k="";null!==b.item.label&&(g=b.item.airportName,h=b.item.cityName,i=b.item.cityCode,j=b.item.stateCode,originCountryCode=b.item.countryCode,k=b.item.countryName),$("#originAirportName_"+d).val(g),$("#originCityName_"+d).val(h),$("#originCityCode_"+d).val(i),$("#originStateCode_"+d).val(j),$("#originCountryName_"+d).val(k),$("#originCountryCode_"+d).val(originCountryCode),1===$("#isOriginSelected_"+d).length&&"true"!==$("#isOriginSelected_"+d).val()&&$("#isOriginSelected_"+d).val("true")},change:function(a,b){delta.vacations.deltaVacationsAirportPredictions.handleUnchangedSelection(a,b,$(this))}})}),$(document).on("keyup","#flightCarToAirport, #toAirport, #vacationHotelLocation",function(){$(this).autocomplete({autoFocus:!1,airportId:"destAirport",source:delta.vacations.deltaVacationsAirportPredictions.airportPredictionHandler,open:function(){var a=$(this).offset().top+$(this).outerHeight(),b="";b="flightCarToAirport"==this.id?"vac_toAirportPredictionList_flightCar":"vacationHotelLocation"==this.id?"vac_toAirportPredictionList_hotelCar":"vac_toAirportPredictionList",$(this).autocomplete("widget").attr("id",b),$(this).autocomplete("widget").css("vacationHotelLocation"!=$(this).attr("id")?{width:128,top:a}:{top:a})},select:function(a,b){var c=$("#vacationSearchWidgetContainer .vacations-pkg-tabs").find(".pkg-name.active").attr("id"),d=delta.widgetnav.vacations_tab_identifier_map[c],e=$(this).parents("form").first(),f=$.data(e[0],"validator");null!==b.item.landDestinationCode&&$("#landDestCode_"+d).val(b.item.landDestinationCode),$(this).removeClass("incorrectCityCode"),f.element("#"+$(this).attr("id"));var g="",h="",i="",j="",k="";null!==b.item.label&&(g=b.item.airportName,h=b.item.cityName,i=b.item.cityCode,j=b.item.stateCode,destCountryCode=b.item.countryCode,k=b.item.countryName),$("#destAirportName_"+d).val(g),$("#destCityName_"+d).val(h),$("#destCityCode_"+d).val(i),$("#destStateCode_"+d).val(j),$("#destCountryCode_"+d).val(destCountryCode),$("#destCountryName_"+d).val(k)},change:function(a,b){delta.vacations.deltaVacationsAirportPredictions.handleUnchangedSelection(a,b,$(this))}})}),$(document).on("focus","flightCarFromAirport, #fromAirport , #flightCarToAirport, #toAirport, #vacationHotelLocation",function(){$("#dlv-widget-popup").length>0&&($("#dlv-widget-popup").remove(),$(this).removeAttr("style"))})}),delta.vacations.deltaVacationsAirportPredictions={airportPredictionHandler:function(a,b){$("#dlv-errormessage-search").hide();var c,d,e=a.term.replace(/^\s+/g,""),f=$(this)[0].options.airportId,g=$(this)[0].element,h=!1,i=$(g).parents("form").first(),j=$.data(i[0],"validator"),k=$("#vacationSearchWidgetContainer .vacations-pkg-tabs").find(".pkg-name.active").attr("id");d="flightHotelTab"==k?$("#pkgType").val():"flightCarTab"==k?$("#pkgType_flightCar").val():$("#pkgType_hotelCar").val(),c=$("#lifeStyleType").val(),$("#"+this.element[0].id).attr("isPickUpPredictiveText","false"),e.length>=3&&$.ajax({type:"POST",dataType:"json",data:{query:e,airportId:f,lifeStyleCode:c,pkgType:d,checkSum:""},url:"/vacations/cityPredictionAction.action",headers:{"cache-control":"no-cache"},success:function(a){a.fault&&a.fault.error&&a.fault.error.errorCode?(g.data("invalidCityCode",g.val()).data("errorCode",a.fault.error.errorCode),delta.vacations.deltaVacationsAirportPredictions.showCityCodeError(j,g,h)):(g.removeClass("incorrectCityCode"),g.data("invalidCityCode",null).data("errorCode",null),a.cities?(g.data("validCities",a.cities),a.cities.length>0&&(h=!0),b($.map(a.cities,function(a){var b=a.airportCode,c=a.landDestinationCode,d="";return null!==a.cityName&&""!==a.cityName&&(d=a.cityName),"US"===a.countryCode||"CA"===a.countryCode?null!==a.stateCode&&""!==a.stateCode&&(""!==d&&(d+=", "),d+=a.stateCode):null!==a.countryName&&""!==a.countryName&&(""!==d&&(d+=", "),d+=a.countryName),null!==a.countryCode&&""!==a.countryCode&&(""!==d&&(d+=", "),d+=a.countryCode),null!==a.airportCode&&""!==a.airportCode&&(d+=" ("+a.airportCode+")"),{label:d,value:b,airportName:a.airportName,landDestinationCode:c,cityName:a.cityName,cityCode:a.cityCode,stateCode:a.stateCode,countryCode:a.countryCode,countryName:a.countryName}}))):(g.data("invalidCityCode",g.val()).data("errorCode",null),delta.vacations.deltaVacationsAirportPredictions.showCityCodeError(j,g,h)))},error:function(){g.data("invalidCityCode",g.val()).data("errorCode",null),delta.vacations.deltaVacationsAirportPredictions.showCityCodeError(j,g,!1)}})},handleUnchangedSelection:function(a,b,c){var d=c,e=d.data("validCities"),f=!1,g=d.parents("form").first(),h=$.data(g[0],"validator");null===b.item&&(d.removeClass("incorrectCityCode"),$.each(e,function(a,b){(b.cityCode===d.val().toUpperCase()||b.cityName.toUpperCase().startsWith(d.val().toUpperCase()))&&(f=!0)}),f||d.addClass("incorrectCityCode"),h.element("#"+d.attr("id")))},showCityCodeError:function(a,b,c){c||b.addClass("incorrectCityCode"),a.element("#"+b.attr("id"))},getList:function(a,b,c){var d,e,f=$("#vacationSearchWidgetContainer .vacations-pkg-tabs").find(".pkg-name.active").attr("id"),g=$("#"+c),h=$(g).parents("form").first(),i=$.data(h[0],"validator");d=$("#lifeStyleType").val(),e="flightHotelTab"==f?$("#pkgType").val():"flightCarTab"==f?$("#pkgType_flightCar").val():$("#pkgType_hotelCar").val(),$.ajax({type:"POST",dataType:"json",data:{query:a,airportId:b,lifeStyleCode:d,pkgType:e,checkSum:""},url:"/vacations/cityPredictionAction.action",headers:{"cache-control":"no-cache"},success:function(a){a.fault&&a.fault.error&&a.fault.error.errorCode?(g.data("invalidCityCode",g.val()).data("errorCode",a.fault.error.errorCode),delta.vacations.deltaVacationsAirportPredictions.showError(a.fault.error.errorCode,"#dlv-errormessage-search")):(delta.vacations.deltaVacationsAirportList=a.cities,delta.vacations.setActiveInputId("#"+c),delta.vacations.deltaVacationsAirportsPopup.displayPopup({elementId:"#dlv-widget-popup",data:delta.vacations.deltaVacationsAirportList,$textfield:$(this).prev("input"),callback:delta.vacations.deltaVacationsPopulateList.airports}))},error:function(){g.data("invalidCityCode",g.val()).data("errorCode",data.fault.error.errorCode),delta.vacations.deltaVacationsAirportPredictions.showCityCodeError(i,g,!1)}})}},delta.vacations.deltaVacationsDataConfig={errorfile:function(a){var b="/vacations/errors/vacations/"+a+".html";return b}},delta.vacations.deltaVacationsPopulateList={airports:function(a){var b=$("#dlv-widget-popup #airportList");delta.vacations.deltaVacationsPopulateList.updateList(b,a,"mapitOrigin",!0)},updateList:function(a,b,c,d){$(".escape-multiselect").width("100%"),$(".ui-dialog-titlebar").css(uiDialogTitleCss.airportPicker),"object"!==$.type(a)&&(a=$(a)),d||(d=!1),a.empty(),$.each(b,function(b,e){var f="";null!==e.cityName&&""!==e.cityName&&(f=e.cityName),"US"===e.countryCode||"CA"===e.countryCode?null!==e.stateCode&&""!==e.stateCode&&(""!==f&&(f+=", "),f+=e.stateCode):null!==e.countryName&&""!==e.countryName&&(""!==f&&(f+=", "),f+=e.countryName),null!==e.countryCode&&""!==e.countryCode&&(""!==f&&(f+=", "),f+=e.countryCode),null!==e.airportCode&&""!==e.airportCode&&(f+=" ("+e.airportCode+")"),a.append(d===!0?'<li id="'+c+"-"+e.airportCode+'" data-landdestinationcode="'+e.landDestinationCode+'" data-airportname="'+e.airportName+'" data-cityname="'+e.cityName+'" data-citycode="'+e.cityCode+'" data-statecode="'+e.stateCode+'" data-countrycode="'+e.countryCode+'" data-countryname="'+e.countryName+'">'+f+"</li>":'<option id="'+c+"-"+e.airportCode+'" value="'+e.airportCode+'" data-landdestinationcode="'+e.landDestinationCode+'" data-airportname="'+e.airportName+'" data-cityname="'+e.cityName+'" data-citycode="'+e.cityCode+'" data-statecode="'+e.stateCode+'" data-countrycode="'+e.countryCode+'" data-countryname="'+e.countryName+'">'+f+"</option>")})}},delta.vacations.deltaVacationsAirportsPopup={calculatePosition:function(){var a=$(delta.vacations.deltaVacationsActiveInputFieldId),b=a.offset(),c=0,d=a.offset(),e=a.position(),f=a.width();$("#dlv-widget-popup #airportlookup_dropdown").offset({left:b.left-c,top:d.top+a.height()+1}),$("#dlv-widget-popup .from_arrow_container").css("paddingLeft",f/2+e.left+c),$(".activeTarget").removeClass("activeTarget"),a.addClass("activeTarget"),$("#dlv-widget-popup #airportlookup_dropdown").show(),$("#airportList li, #close_image").attr("tabindex","0"),$("#airportList li:first-child").addClass("listActive").focus(),$("#dlv-widget-popup div#scroll_countryPhonecode > div.scrollbar").height()<=0&&($("#dlv-widget-popup #scroll_country").tinyscrollbar({sizethumb:17}),$("#dlv-widget-popup").find("#scroll_country").tinyscrollbar_update())},closePopup:function(){function a(){$("#dlv-widget-popup").remove(),$(delta.vacations.activeInputFieldId).css({borderColor:"#CCCCCC",outline:"inherit"})}$("#dlv-widget-popup #close_image").click(function(){a()});var b=0;$(document).on("keydown click","#dlv-widget-popup #airportList li",function(a){if("true"!=$(delta.vacations.deltaVacationsActiveInputFieldId).attr("noairportcode")){var c=getKeyCode(a);a.preventDefault(),$(this).siblings("li").removeClass("listActive"),$(this).removeClass("listActive");

var d=$(this).siblings().length+1,e=71/d;if(13===c||"click"===a.type){$(this).focus().addClass("listActive");var f=$(this).text().split("(")[1].split(")")[0],g=$(this).data("landdestinationcode"),h=$(this).data("airportname"),i=$(this).data("cityname"),j=$(this).data("citycode"),k=$(this).data("statecode"),l=$(this).data("countryname");$(delta.vacations.deltaVacationsActiveInputFieldId).val(f),g?($("#landDestCodeAdvSearch").val(g),$("#destAirportName").val(h),$("#destCityName").val(i),$("#destCityCode").val(j),$("#destStateCode").val(k),$("#destCountryName").val(l)):($("#originAirportName").val(h),$("#originCityName").val(i),$("#originCityCode").val(j),$("#originStateCode").val(k),$("#originCountryName").val(l)),$(".activeTarget").trigger("focusout"),$(".activeTarget").next().focus(),$("#dlv-widget-popup #airportlookup_dropdown").hide()}else 38===c?(a.preventDefault(),b>0&&(b-=e),$(this).is(":first-child")?($(this).addClass("listActive"),b=0):($(this).parents(".window_scroll").find(".thumb").css("top",b+"px"),$(this).removeClass("listActive"),$(this).prev().addClass("listActive"),$(this).prev().focus())):40===c?(a.preventDefault(),71>b&&(b+=e),$(this).is(":last-child")?($(this).siblings().first().addClass("listActive").focus(),$(this).parents(".window_scroll").find(".thumb").css("top","0px"),b=0):($(this).parents(".window_scroll").find(".thumb").css("top",b+"px"),$(this).removeClass("listActive"),$(this).next().addClass("listActive"),$(this).next().focus())):a.shiftKey&&9===c?(a.preventDefault(),$("#close_image").focus()):9===c&&a.preventDefault()}else $(delta.vacations.deltaVacationsActiveInputFieldId).val($(this).text())}),$("#dlv-widget-popup #scroll_country").tinyscrollbar({sizethumb:17})},displayPopup:function(a){var b=$("body").find(a.elementId);b.length<=0&&($("body").append('<div id="dlv-widget-popup" />'),b=$("body").find(a.elementId)),b.empty().load("/vacations/pages/airportpicker.jsp",function(){a.callback(a.data,a.$textfield),delta.vacations.deltaVacationsAirportsPopup.calculatePosition(),$(delta.vacations.deltaVacationsActiveInputFieldId).css({borderColor:"#0253A4",outline:"medium none"}),delta.vacations.deltaVacationsAirportsPopup.closePopup()})}},delta.vacations.setActiveInputId=function(a){delta.vacations.deltaVacationsActiveInputFieldId&&delta.vacations.checkInnerlabel($("body").find(delta.vacations.deltaVacationsActiveInputFieldId)),delta.vacations.deltaVacationsActiveInputFieldId=a},delta.vacations.checkInnerlabel=function(a,b){b||(b=!1)};var delta=delta||{};delta.widgetnav=delta.widgetnav||{},delta.widgetnav.vacations={delayForFormSubmission:500,tmpSearchVal:null,submitDelayedForm:function(a){a.submit()},recentSearchesStored:!1,fetchedRecentSearchesData:null,isErrorHeightReset:!1,flightHotelRecentSearchMap:null,flightCarRecentSearchMap:null,hotelCarRecentSearchMap:null,isRecentSearches_flightHotel:!1,isRecentSearches_flightCar:!1,isRecentSearches_hotelCar:!1,loadRecentSearches:function(a){try{var b={prefillAttribute:a},c={callback:this.storeRecentSearches};prefill.retrievePrefillData(b,c)}catch(d){prefillError(d)}},checkIEBrowser:function(){return"Microsoft Internet Explorer"==navigator.appName?!0:!1},getIEBrowserVersion:function(){var a=-1;if("Microsoft Internet Explorer"==navigator.appName){var b=navigator.userAgent,c=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");null!=c.exec(b)&&(a=parseFloat(RegExp.$1))}return a},checkChromeBrowser:function(){return navigator.userAgent.toLowerCase().match("chrome")?!0:!1},loadToolTip:function(a,b,c,d,e,f,g,h,i){$(a).aToolTip({clickIt:!0,xOffset:c,yOffset:d,toolTipClass:"deltaToolTipTheme vacationWidgetToolTip",tipContent:b,tipTitle:h,toolTipHeight:e,toolTipWidth:f,position:i})},vacationWidget_county:null,vacationWidget_lang:null,init:function(){delta.widgetnav.vacations.checkWidgetCountry()},checkWidgetCountry:function(){delta.widgetnav.vacations.vacationWidget_county=CountryLanguageController.getCountryCode(),delta.widgetnav.vacations.vacationWidget_lang=CountryLanguageController.getLanguageCode();var a=delta.widgetnav.vacations.vacationWidget_county,b=delta.widgetnav.vacations.vacationWidget_lang;"undefined"!=typeof a&&"us"!==a&&"US"!==a&&"ca"!==a&&"CA"!==a||"undefined"!=typeof b&&"en"!==b.toLowerCase()?"ja"==b||"JA"==b?delta.widgetnav.vacations.loadVacationsWidget_JP():delta.widgetnav.vacations.loadVacationsWidget_NonJP():delta.widgetnav.vacations.loadVacationsWidget_default()},uiBehaviours:function(){delta.widgetnav.vacations.searchTabSelectEvent(),delta.widgetnav.vacations.flightHotel_RoomsChangeEvent(),delta.widgetnav.vacations.hotelCar_RoomsChangeEvent(),delta.widgetnav.vacations.flightHotel_ChildCountChangeEvent(),delta.widgetnav.vacations.flightCar_ChildCountChangeEvent(),delta.widgetnav.vacations.hotelCar_ChildCountChangeEvent(),delta.widgetnav.vacations.flightHotel_ExpandedChildCountChangeEvent(),delta.widgetnav.vacations.hotelCar_ExpandedChildCountChangeEvent(),delta.widgetnav.vacations.flightCar_ExpandedChildCountChangeEvent(),delta.widgetnav.vacations.roomChangeEvent(),delta.widgetnav.vacations.promoCodeDataChangeEvent(),delta.widgetnav.vacations.flightCar_promoCodeDataChangeEvent(),delta.widgetnav.vacations.hotelCar_promoCodeDataChangeEvent(),delta.widgetnav.vacations.setVacationsFormValidations(),delta.widgetnav.vacations.renderVacationsRecentSearches(),delta.widgetnav.vacations.vacationsSelectRecentSearch(),delta.widgetnav.vacations.checkIEBrowser()&&"8"==delta.widgetnav.vacations.getIEBrowserVersion()&&$("div.childCount").addClass("childCount_IE8"),delta.widgetnav.vacations.setDropDownStyle_IE(),delta.widgetnav.vacations.validateAdultTotalCount(),delta.widgetnav.vacations.hideAirportLookupList(),delta.widgetnav.vacations.setToolTipFocus(),delta.widgetnav.vacations.validateOnFormSubmit_FlightHotel(),delta.widgetnav.vacations.loadToolTipOnClick(),delta.widgetnav.vacations.vacationRoomTabClickHandler()},loadVacationsWidget_default:function(){delta.widgetnav.vacations.initialiseDateLookup_FlightHotelWidget(),delta.widgetnav.vacations.uiBehaviours(),delta.widgetnav.vacations.loadRecentSearches("vacationFlightHotelSearches");var a=$("#vacationSearchWidgetContainer .vacations-pkg-tabs").find(".pkg-name.active").attr("id");"flightHotelTab"==a?($("div#vacations-flightHotelSearch-errorMsg div.spc_err_msg").html(""),$("div#vacations-flightHotelSearch-errorMsg").hide(),$("#flightHotelSearchForm input").removeClass("spc_err_msg"),$("#flightHotelSearchForm select").removeClass("spc_err_msg"),$("div#dlv-errormessage-search").html(""),$("div#dlv-errormessage-search").hide(),$("#vacationSearchWidgetContainer").removeClass("activeTab_flightCar").removeClass("activeTab_hotelCar").addClass(delta.widgetnav.vacations.checkIEBrowser()?"activeTab_flightHotel_IE":"activeTab_flightHotel")):"flightCarTab"==a?($("div#vacations-flightCarSearch-errorMsg div.spc_err_msg").html(""),$("div#vacations-flightCarSearch-errorMsg").hide(),$("#flightCarSearchForm input").removeClass("spc_err_msg"),$("#flightCarSearchForm select").removeClass("spc_err_msg"),$("div#dlv-errormessage-search").html(""),$("div#dlv-errormessage-search").hide(),delta.widgetnav.vacations.checkIEBrowser()?$("#vacationSearchWidgetContainer").removeClass("activeTab_flightHotel_IE").removeClass("activeTab_hotelCar").addClass("activeTab_flightCar"):$("#vacationSearchWidgetContainer").removeClass("activeTab_flightHotel").removeClass("activeTab_hotelCar").addClass("activeTab_flightCar")):($("div#vacations-hotelCarSearch-errorMsg div.spc_err_msg").html(""),$("div#vacations-hotelCarSearch-errorMsg").hide(),$("#hotelCarSearchForm input").removeClass("spc_err_msg"),$("#hotelCarSearchForm select").removeClass("spc_err_msg"),$("div#dlv-errormessage-search").html(""),$("div#dlv-errormessage-search").hide(),delta.widgetnav.vacations.checkIEBrowser()?$("#vacationSearchWidgetContainer").removeClass("activeTab_flightHotel_IE").removeClass("activeTab_flightCar").addClass("activeTab_hotelCar"):$("#vacationSearchWidgetContainer").removeClass("activeTab_flightHotel").removeClass("activeTab_flightCar").addClass("activeTab_hotelCar")),delta.widgetnav.vacations.checkChromeBrowser()&&$("#flightHotelChildrenToolTipIcon").addClass("toolTipElement_chrome"),delta.widgetnav.vacations.initialiseDateLookup_FlightCarWidget(),delta.widgetnav.vacations.initialiseDateLookup_HotelCarWidget(),delta.widgetnav.vacations.validateOnFormSubmit_FlightCar(),delta.widgetnav.vacations.validateOnFormSubmit_HotelCar()},loadVacationsWidget_JP:function(){""!=$("#vacationSearchWidgetContainer").html().trim()&&$("#vacationSearchWidgetContainer").html("");var a={};$("#vacationSearchWidgetContainer").append($("#vacationsWidget_JP").render(a)),$("#vacationWidget-jpncta_bok").click(function(){return window.location="http://www.DeltaVacations.jp",delta.navwidget.adjustWidgetHeight("booking"),!1}),delta.navwidget.adjustWidgetHeight("booking")},loadVacationsWidget_NonJP:function(){""!=$("#vacationSearchWidgetContainer").html().trim()&&($("#vacationSearchWidgetContainer_holder_JP").html($("#vacationSearchWidgetContainer").html()),$("#vacationSearchWidgetContainer").html(""));var a={};$("#vacationSearchWidgetContainer").append($("#vacationsWidget_Non_JP").render(a)),$("#vacationWidget-intcta").on("click",function(){return $("#vacationSearchWidgetContainer").html(""),$("#vacationSearchWidgetContainer").html($("#vacationSearchWidgetContainer_holder_JP").html()),delta.widgetnav.vacations.loadVacationsWidget_default(),delta.navwidget.adjustWidgetHeight("booking"),!1}),delta.navwidget.adjustWidgetHeight("booking")},isExpandedWidget:function(){return"none"!=$("#delta-vacations-expanded-tabs").css("display")?!0:!1},isFlightHotelExpanded:function(){return void 0!=$("#flightHotelVacationExpandedSearchContainer").css("display")&&"none"!=$("#flightHotelVacationExpandedSearchContainer").css("display")?!0:!1},isFlightCarExpanded:function(){return void 0!=$("#flightCarVacationExpandedSearchContainer").css("display")&&"none"!=$("#flightCarVacationExpandedSearchContainer").css("display")?!0:!1},isHotelCarExpanded:function(){return void 0!=$("#hotelCarVacationExpandedSearchContainer").css("display")&&"none"!=$("#hotelCarVacationExpandedSearchContainer").css("display")?!0:!1},initialiseDateLookup_FlightHotelWidget:function(){delta.widgetnav.vacations.setVacationCalendarControl("vacationsdepartureDate","vacationsreturnDate","Depart Date","Return Date","flightHotelDateContainer"),$(document).on("click",".flightHotelDateContainer #flightHotelDepDateCalIcon",function(){$("#vacationsdepartureDate").trigger("focus")}),$(document).on("click",".flightHotelDateContainer #flightHotelReturnDateCalIcon",function(){$("#vacationsreturnDate").trigger("focus")}),$("#flightHotelReturnDateCalIcon").on("keydown",function(a){var b=a.keyCode?a.keyCode:a.charCode;9===b&&$("#flightHotelChildrenToolTipIcon").focus()}),$("#fromAirport").autocomplete({airportId:"sourceAirport",source:delta.vacations.deltaVacationsAirportPredictions.airportPredictionHandler,select:function(){$(this).attr("isPickUpPredictiveText",!0),$("#isFromCitySelected").val("true")}}),$("#toAirport").autocomplete({airportId:"destAirport",source:delta.vacations.deltaVacationsAirportPredictions.airportPredictionHandler,select:function(a,b){$(this).attr("isPickUpPredictiveText",!0),$("#landDestCode").val(b.item.value)}}),$("#fromAirport").on("input",function(){("false"==$("#fromAirport").attr("isPickUpPredictiveText")||""==$("#fromAirport").val()||"City or Airport"==$("#fromAirport").val())&&$("#isFromCitySelected").val("")}),$("#toAirport").on("input",function(){("false"==$("#toAirport").attr("isPickUpPredictiveText")||""==$("#toAirport").val()||"City or Airport"==$("#toAirport").val())&&$("#landDestCode").val("")}),$(document).on("keypress click","#fromCityLookup",function(a){return 13===a.which||"click"===a.type?(delta.vacations.deltaVacationsAirportPredictions.getList("","sourceAirport","fromAirport"),!1):void 0}),$(document).on("keypress click","#toCityLookup",function(a){return 13===a.which||"click"===a.type?(delta.vacations.deltaVacationsAirportPredictions.getList("","destAirport","toAirport"),!1):void 0}),delta.widgetnav.vacations.loadToolTip($("#flightHotelChildrenToolTipIcon"),$("#vacationsChildrenToolTip").html(),0,6,"",500,"",""),delta.widgetnav.vacations.loadToolTip($("#vacationsWidgetPromoCodeHelpIcon"),$("#vacationsPromoCodeTip").html(),0,6,"",500,"",""),delta.widgetnav.vacations.loadToolTip($("#vacationsWidgetSmNumberHelpIcon"),$("#vacationsSkymilesNumberTip").html(),0,6,"",500,"",""),DeltaUtils.supportsPlaceholderAttr()||($("#fromAirport").val("City or Airport").addClass("auto-hint placeholder"),$("#toAirport").val("City or Airport").addClass("auto-hint placeholder"),$("#vacationsdepartureDate").val("mm/dd/yyyy").addClass("auto-hint"),$("#vacationsreturnDate").val("mm/dd/yyyy").addClass("auto-hint"),$("#vacationsdepartureDate, #vacationsreturnDate, #fromAirport, #toAirport").blur(function(){""==$(this).val()&&("fromAirport"==$(this).attr("id")||"toAirport"==$(this).attr("id")?($(this).val("City or Airport"),$(this).addClass("auto-hint placeholder")):"vacationsdepartureDate"==$(this).attr("id")?($(this).val("mm/dd/yyyy"),$(this).addClass("auto-hint"),""==$("#vacationsreturnDate").val()&&($("#vacationsreturnDate").val("mm/dd/yyyy"),$("#vacationsreturnDate").addClass("auto-hint"))):($(this).val("mm/dd/yyyy"),$(this).addClass("auto-hint"),""==$("#vacationsdepartureDate").val()&&($("#vacationsdepartureDate").val("mm/dd/yyyy"),$("#vacationsdepartureDate").addClass("auto-hint"))))}),$("#vacationsdepartureDate, #vacationsreturnDate, #fromAirport, #toAirport").on("focus",function(){"fromAirport"==$(this).attr("id")||"toAirport"==$(this).attr("id")?"City or Airport"==$(this).val()&&($(this).val(""),$(this).removeClass("auto-hint placeholder")):"vacationsdepartureDate"==$(this).attr("id")&&"mm/dd/yyyy"==$(this).val()?($(this).val(""),$(this).removeClass("auto-hint")):"vacationsreturnDate"==$(this).attr("id")&&"mm/dd/yyyy"==$(this).val()&&($(this).val(""),$(this).removeClass("auto-hint"))}),$("#vacationsdepartureDate, #vacationsreturnDate").keyup(function(a){var b=$(this).val();a.keyCode>47&&a.keyCode<58||a.keyCode>95&&a.keyCode<106?null!==b.match(/^\d{2}$/)?$(this).val(b+"/"):(null!==b.match(/^\d{2}\/\d{2}$/)||null!==b.match(/^\d{1}\/\d{2}$/))&&$(this).val(b+"/"):191==a.keyCode?(b=b.replace("//","/"),$(this).val(b)):37==a.keyCode||39==a.keyCode||36==a.keyCode||35==a.keyCode||9==a.keyCode||8==a.keyCode||46==a.keyCode||16==a.keyCode||(b=b.replace(/[^0-9\/]/g,""),$(this).val(b))}))},initialiseDateLookup_FlightCarWidget:function(){$("#flightCarFromAirport").autocomplete({airportId:"sourceAirport",source:delta.vacations.deltaVacationsAirportPredictions.airportPredictionHandler,select:function(){$(this).attr("isPickUpPredictiveText",!0),$("#isFromCitySelected_flightCar").val("true")}}),$("#flightCarToAirport").autocomplete({airportId:"destAirport",source:delta.vacations.deltaVacationsAirportPredictions.airportPredictionHandler,select:function(a,b){$(this).attr("isPickUpPredictiveText",!0),$("#landDestCode_flightCar").val(b.item.value)}}),$("#flightCarFromAirport").on("input",function(){("false"==$("#flightCarFromAirport").attr("isPickUpPredictiveText")||""==$("#flightCarFromAirport").val()||"City or Airport"==$("#flightCarFromAirport").val())&&$("#isFromCitySelected_flightCar").val("")}),$("#flightCarToAirport").on("input",function(){("false"==$("#flightCarToAirport").attr("isPickUpPredictiveText")||""==$("#flightCarToAirport").val()||"City or Airport"==$("#flightCarToAirport").val())&&$("#landDestCode_flightCar").val("")}),$(document).on("click","#flightCarFromCityLookup",function(){return delta.vacations.deltaVacationsAirportPredictions.getList("","sourceAirport","flightCarFromAirport"),!1}),$(document).on("click","#flightCarToCityLookup",function(){return delta.vacations.deltaVacationsAirportPredictions.getList("","destAirport","flightCarToAirport"),!1}),DeltaUtils.supportsPlaceholderAttr()||($("#flightCarFromAirport").val("City or Airport").addClass("auto-hint placeholder"),$("#flightCarToAirport").val("City or Airport").addClass("auto-hint placeholder"),$("#flightCarVacationsdepartureDate").val("mm/dd/yyyy").addClass("auto-hint"),$("#flightCarVacationsreturnDate").val("mm/dd/yyyy").addClass("auto-hint"),$("#flightCarVacationsdepartureDate, #flightCarVacationsreturnDate, #flightCarFromAirport, #flightCarToAirport").blur(function(){""==$(this).val()&&("flightCarFromAirport"==$(this).attr("id")||"flightCarToAirport"==$(this).attr("id")?($(this).val("City or Airport"),$(this).addClass("auto-hint placeholder")):"flightCarVacationsdepartureDate"==$(this).attr("id")?($(this).val("mm/dd/yyyy"),$(this).addClass("auto-hint"),""==$("#flightCarVacationsreturnDate").val()&&($("#flightCarVacationsreturnDate").val("mm/dd/yyyy"),$("#flightCarVacationsreturnDate").addClass("auto-hint"))):($(this).val("mm/dd/yyyy"),$(this).addClass("auto-hint"),""==$("#flightCarVacationsdepartureDate").val()&&($("#flightCarVacationsdepartureDate").val("mm/dd/yyyy"),$("#flightCarVacationsdepartureDate").addClass("auto-hint"))))}),$("#flightCarVacationsdepartureDate, #flightCarVacationsreturnDate, #flightCarFromAirport, #flightCarToAirport").on("focus",function(){"flightCarFromAirport"==$(this).attr("id")||"flightCarToAirport"==$(this).attr("id")?"City or Airport"==$(this).val()&&($(this).val(""),$(this).removeClass("auto-hint placeholder")):"flightCarVacationsdepartureDate"==$(this).attr("id")&&"mm/dd/yyyy"==$(this).val()?($(this).val(""),$(this).removeClass("auto-hint")):"flightCarVacationsreturnDate"==$(this).attr("id")&&"mm/dd/yyyy"==$(this).val()&&($(this).val(""),$(this).removeClass("auto-hint"))}),$("#flightCarVacationsdepartureDate, #flightCarVacationsreturnDate").keyup(function(a){var b=$(this).val();a.keyCode>47&&a.keyCode<58||a.keyCode>95&&a.keyCode<106?null!==b.match(/^\d{2}$/)?$(this).val(b+"/"):(null!==b.match(/^\d{2}\/\d{2}$/)||null!==b.match(/^\d{1}\/\d{2}$/))&&$(this).val(b+"/"):191==a.keyCode?(b=b.replace("//","/"),$(this).val(b)):37==a.keyCode||39==a.keyCode||36==a.keyCode||35==a.keyCode||9==a.keyCode||8==a.keyCode||46==a.keyCode||16==a.keyCode||(b=b.replace(/[^0-9\/]/g,""),$(this).val(b))})),delta.widgetnav.vacations.setVacationCalendarControl("flightCarVacationsdepartureDate","flightCarVacationsreturnDate","Depart Date","Return Date","flightCarDateContainer"),$(document).on("click",".flightCarDateContainer #flightCarDepDateCalIcon",function(){$("#flightCarVacationsdepartureDate").trigger("focus")}),$(document).on("click",".flightCarDateContainer #flightCarReturnDateCalIcon",function(){$("#flightCarVacationsreturnDate").trigger("focus")}),$("#flightCarReturnDateCalIcon").on("keydown",function(a){var b=a.keyCode?a.keyCode:a.charCode;9===b&&$("#flightCarChildrenToolTipIcon").focus()}),delta.widgetnav.vacations.loadToolTip($("#flightCarChildrenToolTipIcon"),$("#vacationsChildrenToolTip").html(),0,6,"",500,"",""),delta.widgetnav.vacations.loadToolTip($("#flightCarVacationsWidgetPromoCodeHelpIcon"),$("#vacationsPromoCodeTip").html(),0,6,"",500,"",""),delta.widgetnav.vacations.loadToolTip($("#flightCarVacationsWidgetSmNumberHelpIcon"),$("#vacationsSkymilesNumberTip").html(),0,6,"",500,"","")},initialiseDateLookup_HotelCarWidget:function(){$("#vacationHotelLocation").autocomplete({airportId:"sourceAirport",source:delta.vacations.deltaVacationsAirportPredictions.airportPredictionHandler,select:function(a,b){$(this).attr("isPickUpPredictiveText",!0),$("#landDestCode_hotelCar").val(b.item.value)}}),$("#vacationHotelLocation").on("input",function(){("false"==$("#vacationHotelLocation").attr("isPickUpPredictiveText")||""==$("#vacationHotelLocation").val()||"City or Airport"==$("#vacationHotelLocation").val())&&$("#landDestCode_hotelCar").val("")}),$(document).on("click",".hotelCarDateContainer #checkInCalIcon",function(){$("#hotelCheckInDate").trigger("focus")}),DeltaUtils.supportsPlaceholderAttr()||($("#vacationHotelLocation").val("City or Airport").addClass("auto-hint placeholder"),$("#hotelCheckInDate").val("mm/dd/yyyy").addClass("auto-hint"),$("#hotelCheckOutDate").val("mm/dd/yyyy").addClass("auto-hint"),$("#hotelCheckInDate, #hotelCheckOutDate, #vacationHotelLocation").blur(function(){""==$(this).val()&&("vacationHotelLocation"==$(this).attr("id")?($(this).val("City or Airport"),$(this).addClass("auto-hint placeholder")):"hotelCheckInDate"==$(this).attr("id")?($(this).val("mm/dd/yyyy"),$(this).addClass("auto-hint"),""==$("#hotelCheckOutDate").val()&&($("#hotelCheckOutDate").val("mm/dd/yyyy"),$("#hotelCheckOutDate").addClass("auto-hint"))):($(this).val("mm/dd/yyyy"),$(this).addClass("auto-hint"),""==$("#hotelCheckInDate").val()&&($("#hotelCheckInDate").val("mm/dd/yyyy"),$("#hotelCheckInDate").addClass("auto-hint"))))}),$("#hotelCheckInDate, #hotelCheckOutDate, #vacationHotelLocation").on("focus",function(){"vacationHotelLocation"==$(this).attr("id")?"City or Airport"==$(this).val()&&($(this).val(""),$(this).removeClass("auto-hint placeholder")):"hotelCheckInDate"==$(this).attr("id")&&"mm/dd/yyyy"==$(this).val()?($(this).val(""),$(this).removeClass("auto-hint")):"hotelCheckOutDate"==$(this).attr("id")&&"mm/dd/yyyy"==$(this).val()&&($(this).val(""),$(this).removeClass("auto-hint"))}),$("#hotelCheckInDate, #hotelCheckOutDate").keyup(function(a){var b=$(this).val();a.keyCode>47&&a.keyCode<58||a.keyCode>95&&a.keyCode<106?null!==b.match(/^\d{2}$/)?$(this).val(b+"/"):(null!==b.match(/^\d{2}\/\d{2}$/)||null!==b.match(/^\d{1}\/\d{2}$/))&&$(this).val(b+"/"):191==a.keyCode?(b=b.replace("//","/"),$(this).val(b)):37==a.keyCode||39==a.keyCode||36==a.keyCode||35==a.keyCode||9==a.keyCode||8==a.keyCode||46==a.keyCode||16==a.keyCode||(b=b.replace(/[^0-9\/]/g,""),$(this).val(b))})),delta.widgetnav.vacations.setVacationCalendarControl("hotelCheckInDate","hotelCheckOutDate","Depart Date","Return Date","hotelCarDateContainer"),$(document).on("click","#hotelLocationLookup",function(){return delta.vacations.deltaVacationsAirportPredictions.getList("","destAirport","vacationHotelLocation"),!1}),$(document).on("click",".hotelCarDateContainer #checkOutCalIcon",function(){$("#hotelCheckOutDate").trigger("focus")}),$("#checkOutCalIcon").on("keydown",function(a){var b=a.keyCode?a.keyCode:a.charCode;9===b&&$("#hotelCarChildrenToolTipIcon").focus()}),delta.widgetnav.vacations.loadToolTip($("#hotelCarChildrenToolTipIcon"),$("#vacationsChildrenToolTip").html(),0,6,"",500,"",""),delta.widgetnav.vacations.loadToolTip($("#hotelCarVacationsWidgetPromoCodeHelpIcon"),$("#vacationsPromoCodeTip").html(),0,6,"",500,"",""),delta.widgetnav.vacations.loadToolTip($("#hotelCarvacationsWidgetSmNumberHelpIcon"),$("#vacationsSkymilesNumberTip").html(),0,6,"",500,"","")},searchTabSelectEvent:function(){$("input[name=vacationsPkgType]").on("click",function(){var a=$("#vacationSearchWidgetContainer .vacations-pkg-tabs").find(".pkg-name.active").attr("id"),b=$(this).attr("rel");if($(".pkg-name").removeClass("active"),$("#"+b).addClass("active"),a!=b)if("flightHotelTab"==b){var c="#flightHotelVacationExpandedSearchContainer ";$("#hotelCarVacationExpandedSearchContainer").hide(),$("#flightCarVacationExpandedSearchContainer").hide(),$("#vacationSearchWidgetContainer").removeClass().addClass(delta.widgetnav.vacations.checkIEBrowser()?"activeTab_flightHotel_IE":"activeTab_flightHotel"),$("#flightHotelVacationSearchContainer").removeClass("activeTabError"),delta.widgetnav.vacations.isExpandedWidget()&&($("#vacationSearchWidgetContainer").removeClass("expadedContainer"),delta.widgetnav.vacations.hideRemovedRoomDetails("0",c,"_hotelCar"),delta.widgetnav.vacations.roomTabHandlerFunction("1",c,"_hotelCar",!0),delta.widgetnav.vacations.collapseHotelCarWidget(),delta.widgetnav.vacations.hideRemovedRoomDetails("0",c,"_flightCar"),delta.widgetnav.vacations.roomTabHandlerFunction("1",c,"_flightCar",!0),delta.widgetnav.vacations.collapseFlightCarWidget(),$("#delta-vacations-expanded-tabs ul").removeClass("noRoomExpandedTab"),$("#delta-vacations-expanded-tabs ul").find("li.ui-tabs-selected").removeClass("ui-tabs-selected"),$("#delta-vacations-expanded-tabs ul").find("li.ui-tabs-selected").removeClass("ui-state-active")),$("#vacationSearchWidgetContainer").removeClass().addClass(delta.widgetnav.vacations.checkIEBrowser()?"activeTab_flightHotel_IE":"activeTab_flightHotel"),$("#flightHotelVacationSearchContainer").show(),$("#flightCarVacationSearchContainer").hide(),$("#hotelCarVacationSearchContainer").hide(),delta.widgetnav.vacations.fetchedRecentSearchesData=null,delta.widgetnav.vacations.recentSearchesStored=!1,delta.widgetnav.vacations.loadRecentSearches("vacationFlightHotelSearches"),$("div#vacations-flightHotelSearch-errorMsg div.spc_err_msg").html(""),$("div#vacations-flightHotelSearch-errorMsg").hide(),$("#flightHotelSearchForm input").removeClass("spc_err_msg"),$("#flightHotelSearchForm select").removeClass("spc_err_msg"),$("div#dlv-errormessage-search").html(""),$("div#dlv-errormessage-search").hide(),delta.widgetnav.vacations.isErrorHeightReset=!1,($("#numberOfRooms").val()>1||$("#childCount").val()>0)&&(delta.widgetnav.vacations.expandFlightHotelWidget(),delta.widgetnav.vacations.resetRoomTabs(),delta.widgetnav.vacations.hideRoomTabs($("#numberOfRooms").val()),delta.widgetnav.vacations.roomTabHandlerFunction("1",c,"",!1)),delta.navwidget.adjustWidgetHeight("booking")}else if("flightCarTab"==b){var c="#flightCarVacationExpandedSearchContainer ";$("#hotelCarVacationExpandedSearchContainer").hide(),$("#flightHotelVacationExpandedSearchContainer").hide(),$("#vacationSearchWidgetContainer").removeClass().addClass("activeTab_flightCar"),$("#flightCarVacationSearchContainer").removeClass("activeTabError"),delta.widgetnav.vacations.isExpandedWidget()&&($("#vacationSearchWidgetContainer").removeClass("expadedContainer"),delta.widgetnav.vacations.hideRemovedRoomDetails("0",c,"_hotelCar"),delta.widgetnav.vacations.roomTabHandlerFunction("1",c,"_hotelCar",!0),delta.widgetnav.vacations.collapseHotelCarWidget(),delta.widgetnav.vacations.hideRemovedRoomDetails("0",c,""),delta.widgetnav.vacations.roomTabHandlerFunction("1",c,"",!0),delta.widgetnav.vacations.collapseFlightHotelWidget(),$("#delta-vacations-expanded-tabs ul").find("li.ui-tabs-selected").removeClass("ui-tabs-selected"),$("#delta-vacations-expanded-tabs ul").find("li.ui-tabs-selected").removeClass("ui-state-active")),$("#vacationSearchWidgetContainer").removeClass().addClass("activeTab_flightCar"),$("#flightHotelVacationSearchContainer").hide(),$("#flightCarVacationSearchContainer").show(),$("#hotelCarVacationSearchContainer").hide(),delta.widgetnav.vacations.fetchedRecentSearchesData=null,delta.widgetnav.vacations.recentSearchesStored=!1,delta.widgetnav.vacations.loadRecentSearches("vacationFlightCarSearches"),$("div#vacations-flightCarSearch-errorMsg div.spc_err_msg").html(""),$("div#vacations-flightCarSearch-errorMsg").hide(),$("#flightCarSearchForm input").removeClass("spc_err_msg"),$("#flightCarSearchForm select").removeClass("spc_err_msg"),$("div#dlv-errormessage-search").html(""),$("div#dlv-errormessage-search").hide(),delta.widgetnav.vacations.isErrorHeightReset=!1,$("#flightCarChildCount").val()>0&&(delta.widgetnav.vacations.expandFlightCarWidget(),delta.widgetnav.vacations.resetRoomTabs(),delta.widgetnav.vacations.hideExpandedTabName(),delta.widgetnav.vacations.roomTabHandlerFunction("1",c,"_flightCar",!1)),delta.navwidget.adjustWidgetHeight("booking"),delta.widgetnav.vacations.checkChromeBrowser()&&$("#flightCarChildrenToolTipIcon").addClass("toolTipElement_chrome")}else{var c="#hotelCarVacationExpandedSearchContainer ";$("#flightCarVacationExpandedSearchContainer").hide(),$("#flightHotelVacationExpandedSearchContainer").hide(),$("#vacationSearchWidgetContainer").removeClass().addClass("activeTab_hotelCar"),$("#hotelCarVacationSearchContainer").removeClass("activeTabError"),delta.widgetnav.vacations.isExpandedWidget()&&($("#vacationSearchWidgetContainer").removeClass("expadedContainer"),delta.widgetnav.vacations.hideRemovedRoomDetails("0",c,"_flightCar"),delta.widgetnav.vacations.roomTabHandlerFunction("1",c,"_flightCar",!0),delta.widgetnav.vacations.collapseFlightCarWidget(),delta.widgetnav.vacations.hideRemovedRoomDetails("0",c,""),delta.widgetnav.vacations.roomTabHandlerFunction("1",c,"",!0),delta.widgetnav.vacations.collapseFlightHotelWidget(),$("#delta-vacations-expanded-tabs ul").removeClass("noRoomExpandedTab"),$("#delta-vacations-expanded-tabs ul").find("li.ui-tabs-selected").removeClass("ui-tabs-selected"),$("#delta-vacations-expanded-tabs ul").find("li.ui-tabs-selected").removeClass("ui-state-active")),$("#vacationSearchWidgetContainer").removeClass().addClass("activeTab_hotelCar"),$("#flightHotelVacationSearchContainer").hide(),$("#flightCarVacationSearchContainer").hide(),$("#hotelCarVacationSearchContainer").show(),delta.widgetnav.vacations.fetchedRecentSearchesData=null,delta.widgetnav.vacations.recentSearchesStored=!1,delta.widgetnav.vacations.loadRecentSearches("vacationHotelCarSearches"),$("div#vacations-hotelCarSearch-errorMsg div.spc_err_msg").html(""),$("div#vacations-hotelCarSearch-errorMsg").hide(),$("#hotelCarSearchForm input").removeClass("spc_err_msg"),$("#hotelCarSearchForm select").removeClass("spc_err_msg"),$("div#dlv-errormessage-search").html(""),$("div#dlv-errormessage-search").hide(),delta.widgetnav.vacations.isErrorHeightReset=!1,($("#hotelNumberOfRooms").val()>1||$("#travelerChildCount").val()>0)&&(delta.widgetnav.vacations.expandHotelCarWidget(),delta.widgetnav.vacations.resetRoomTabs(),delta.widgetnav.vacations.hideRoomTabs($("#hotelNumberOfRooms").val()),delta.widgetnav.vacations.roomTabHandlerFunction("1",c,"_hotelCar",!1)),delta.navwidget.adjustWidgetHeight("booking"),delta.widgetnav.vacations.checkChromeBrowser()&&$("#hotelCarChildrenToolTipIcon").addClass("toolTipElement_chrome")}})},flightHotel_RoomsChangeEvent:function(){$("#numberOfRooms").on("change",function(){var a=$("#numberOfRooms").val(),b="#flightHotelVacationExpandedSearchContainer ",c=parseInt($("#childCount").val());if(a>1){delta.widgetnav.vacations.expandFlightHotelWidget();var d=parseInt($("#delta-vacations-expanded-tabs ul li.ui-state-active a")[0].id.replace("vacationsRoom",""));delta.widgetnav.vacations.resetRoomTabs(),delta.widgetnav.vacations.setEachRoomTabWidth(),delta.widgetnav.vacations.hideRoomTabs(a);var e=parseInt($("#hiddenSelectedRoomCount").val());if(1==e)for(var f=1;f<=parseInt(a);f++){if(c>0&&1==f);else{var g={Counter:f-1,RoomCount:f};$("#flightHotelExpandedWidgetDiv").append($("#flightHotelRoomsTemplate").render(g)),1==f&&($("#hiddenAdultCount1 option[value=0]").remove(),$("#hiddenAdultCount1 option[value=2]").prop("selected",!0)),d!=f&&($(b+"#roomGuestLeftContainer"+f).hide(),$(b+"#childCountRightContainer"+f).hide())}delta.widgetnav.vacations.setExpandedWidgetContainerHeight("1")}else if(parseInt(a)>e)for(var f=e+1;f<=parseInt(a);f++){var g={Counter:f-1,RoomCount:f};$("#flightHotelExpandedWidgetDiv").append($("#flightHotelRoomsTemplate").render(g)),$(b+"#roomGuestLeftContainer"+f).hide(),$(b+"#childCountRightContainer"+f).hide()}else{for(var f=parseInt(a)+1;e>=f;f++)$("#hiddenRoomNo"+f).remove(),$("#roomGuestLeftContainer"+f).remove(),$("#childCountRightContainer"+f).remove();delta.widgetnav.vacations.roomTabHandlerFunction("1",b,"")}$("#hiddenSelectedRoomCount").val(a),delta.widgetnav.vacations.loadToolTip($(".expandedHelpIcon"),$("#vacationsChildrenToolTip").html(),0,6,"",500,"",""),delta.widgetnav.vacations.loadToolTipOnClick(),delta.widgetnav.vacations.setDropDownStyle_IE(),delta.widgetnav.vacations.setToolTipFocus(),delta.widgetnav.vacations.validateOnFormSubmit_FlightHotel()}else if(c>0){delta.widgetnav.vacations.hideRoomTabs(a);for(var e=parseInt($("#hiddenSelectedRoomCount").val()),f=2;e>=f;f++)$("#hiddenRoomNo"+f).remove(),$("#roomGuestLeftContainer"+f).remove(),$("#childCountRightContainer"+f).remove();delta.widgetnav.vacations.roomTabHandlerFunction("1",b,""),$("#hiddenSelectedRoomCount").val(a),$("#roomGuestLeftContainer1").show(),
$("#hiddenchildrenNumber1").val(c);for(var f=1;c>=f;f++)g={Counter:0,RoomCount:1,ChildCount:f,ChildCounter:parseInt(f)-1},$("#childCountRightContainer1").html($("#childCountRightContainer1").html()+$("#flightHotelChildrenTemplate").render(g)),$("#child_1_"+f+"AgeDiv").show();$("#hiddenchildrenNumber1").val()>0&&$("#childCountRightContainer1").show(),delta.widgetnav.vacations.setExpandedWidgetContainerHeight("1"),delta.widgetnav.vacations.setDropDownStyle_IE(),delta.widgetnav.vacations.setToolTipFocus(),delta.widgetnav.vacations.validateOnFormSubmit_FlightHotel()}else $("#flightHotelExpandedWidgetDiv").html(""),$("#hiddenSelectedRoomCount").val("1"),$("#flightHotelVacationExpandedSearchContainer").hide(),delta.widgetnav.vacations.hideRemovedRoomDetails("0",b,""),$("#delta-vacations-expanded-tabs ul").find("li.ui-tabs-selected").removeClass("ui-tabs-selected"),$("#delta-vacations-expanded-tabs ul").find("li.ui-tabs-selected").removeClass("ui-state-active"),delta.widgetnav.vacations.collapseFlightHotelWidget(),delta.widgetnav.vacations.roomTabHandlerFunction("1",b,""),$("#flightHotelVacationExpandedSearchContainer").hide();"block"===$("#delta-vacations-expanded-tabs").css("display")&&($("#delta-vacations-expanded-tabs ul li").first().find("a").attr("tabindex","0"),$("body").on("keyup","#delta-vacations-expanded-tabs ul li a",function(a){if(39===a.keyCode){if($(this).parent().hasClass("ui-state-active")){$("#delta-vacations-expanded-tabs ul li a").removeAttr("tabindex");var b=$("#delta-vacations-expanded-tabs ul li.ui-state-active").next();0===b.length||"none"===b.css("display")?$("#delta-vacations-expanded-tabs ul li:first").find("a").attr("tabindex",0).click().focus():$(this).parent().next().find("a").attr("tabindex",0).click().focus()}}else if(37===a.keyCode){if($(this).parent().hasClass("ui-state-active")){$("#delta-vacations-expanded-tabs ul li a").removeAttr("tabindex");var c=$("#delta-vacations-expanded-tabs ul li.ui-state-active").prev(),d=$("#delta-vacations-expanded-tabs ul li:visible:last");0===c.length&&1===d.length?$(d).find("a").attr("tabindex",0).click().focus():$(this).parent().prev().find("a").attr("tabindex",0).click().focus()}}else 9===a.keyCode&&(a.stopPropagation(),$("#flightHotelExpandedWidgetDiv, #hotelCarExpandedWidgetDiv").attr("tabindex",0).focus())})),$("#promoCode, #hotelCarPromoCode").on("keyup",function(a){9===a.keyCode&&"block"===$("#delta-vacations-expanded-tabs").css("display")&&$("#delta-vacations-expanded-tabs ul li.ui-state-active").find("a").attr("tabindex",0).click().focus()})})},hotelCar_RoomsChangeEvent:function(){$("#hotelNumberOfRooms").on("change",function(){var a=$("#hotelNumberOfRooms").val(),b="#hotelCarVacationExpandedSearchContainer ",c=parseInt($("#travelerChildCount").val());if(a>1){delta.widgetnav.vacations.expandHotelCarWidget(),$(b+"#hiddenAdultCount").val("2"),$(b+"#childCount").val("0");var d=parseInt($("#delta-vacations-expanded-tabs ul li.ui-state-active a")[0].id.replace("vacationsRoom",""));delta.widgetnav.vacations.resetRoomTabs(),delta.widgetnav.vacations.setEachRoomTabWidth(),delta.widgetnav.vacations.hideRoomTabs(a);var e=parseInt($("#hiddenSelectedRoomCount_hotelCar").val());if(1==e)for(var f=1;f<=parseInt(a);f++){if(c>0&&1==f);else{var g={Counter:f-1,RoomCount:f};$("#hotelCarExpandedWidgetDiv").append($("#hotelCarRoomsTemplate").render(g)),1==f&&($("#hiddenAdultCount1_hotelCar option[value=0]").remove(),$("#hiddenAdultCount1_hotelCar option[value=2]").prop("selected",!0)),d!=f&&($(b+"#roomGuestLeftContainer"+f+"_hotelCar").hide(),$(b+"#childCountRightContainer"+f+"_hotelCar").hide())}delta.widgetnav.vacations.setExpandedWidgetContainerHeight(1)}else if(parseInt(a)>e)for(var f=e+1;f<=parseInt(a);f++){var g={Counter:f-1,RoomCount:f};$("#hotelCarExpandedWidgetDiv").append($("#hotelCarRoomsTemplate").render(g)),$(b+"#roomGuestLeftContainer"+f+"_hotelCar").hide(),$(b+"#childCountRightContainer"+f+"_hotelCar").hide()}else{for(var f=parseInt(a)+1;e>=f;f++)$("#hiddenRoomNo"+f+"_hotelCar").remove(),$("#roomGuestLeftContainer"+f+"_hotelCar").remove(),$("#childCountRightContainer"+f+"_hotelCar").remove();delta.widgetnav.vacations.roomTabHandlerFunction("1",b,"")}$("#hiddenSelectedRoomCount_hotelCar").val(a),delta.widgetnav.vacations.loadToolTip($(".expandedHelpIcon"),$("#vacationsChildrenToolTip").html(),0,6,"",500,"",""),delta.widgetnav.vacations.loadToolTipOnClick(),delta.widgetnav.vacations.setDropDownStyle_IE(),delta.widgetnav.vacations.setToolTipFocus(),delta.widgetnav.vacations.validateOnFormSubmit_HotelCar()}else if(c>0){delta.widgetnav.vacations.hideRoomTabs(a);for(var e=parseInt($("#hiddenSelectedRoomCount_hotelCar").val()),f=2;e>=f;f++)$("#hiddenRoomNo"+f+"_hotelCar").remove(),$("#roomGuestLeftContainer"+f+"_hotelCar").remove(),$("#childCountRightContainer"+f+"_hotelCar").remove();delta.widgetnav.vacations.roomTabHandlerFunction("1",b,""),$("#hiddenSelectedRoomCount_hotelCar").val(a),$("#hiddenchildrenNumber1_hotelCar").val(c),$("#roomGuestLeftContainer1_hotelCar").show();for(var f=1;c>=f;f++){var g={Counter:0,RoomCount:1,ChildCount:f,ChildCounter:parseInt(f)-1};$("#childCountRightContainer1_hotelCar").html($("#childCountRightContainer1_hotelCar").html()+$("#hotelCarChildrenTemplate").render(g)),$("#child_1_"+f+"AgeDiv_hotelCar").show()}$("#hiddenchildrenNumber1_hotelCar").val()>0&&$("#childCountRightContainer1_hotelCar").show(),delta.widgetnav.vacations.setExpandedWidgetContainerHeight("1"),delta.widgetnav.vacations.setDropDownStyle_IE(),delta.widgetnav.vacations.setToolTipFocus(),delta.widgetnav.vacations.validateOnFormSubmit_HotelCar()}else $("#hotelCarExpandedWidgetDiv").html(""),$("#hiddenSelectedRoomCount_hotelCar").val("1"),$("#vacationSearchWidgetContainer").removeClass("expadedContainer"),$("#hotelCarVacationExpandedSearchContainer").hide(),delta.widgetnav.vacations.hideRemovedRoomDetails("0",b,"_hotelCar"),$("#delta-vacations-expanded-tabs ul").find("li.ui-tabs-selected").removeClass("ui-tabs-selected"),$("#delta-vacations-expanded-tabs ul").find("li.ui-tabs-selected").removeClass("ui-state-active"),delta.widgetnav.vacations.collapseHotelCarWidget(),delta.widgetnav.vacations.roomTabHandlerFunction("1",b,"_hotelCar",!0);"block"===$("#delta-vacations-expanded-tabs").css("display")&&($("#delta-vacations-expanded-tabs ul li").first().find("a").attr("tabindex","0"),$("body").on("keyup","#delta-vacations-expanded-tabs ul li a",function(a){if(39===a.keyCode){if($(this).parent().hasClass("ui-state-active")){$("#delta-vacations-expanded-tabs ul li a").removeAttr("tabindex");var b=$("#delta-vacations-expanded-tabs ul li.ui-state-active").next();0===b.length||"none"===b.css("display")?$("#delta-vacations-expanded-tabs ul li:first").find("a").attr("tabindex",0).click().focus():$(this).parent().next().find("a").attr("tabindex",0).click().focus()}}else if(37===a.keyCode){if($(this).parent().hasClass("ui-state-active")){$("#delta-vacations-expanded-tabs ul li a").removeAttr("tabindex");var c=$("#delta-vacations-expanded-tabs ul li.ui-state-active").prev(),d=$("#delta-vacations-expanded-tabs ul li:visible:last");0===c.length&&1===d.length?$(d).find("a").attr("tabindex",0).click().focus():$(this).parent().prev().find("a").attr("tabindex",0).click().focus()}}else 9===a.keyCode&&(a.stopPropagation(),$("#flightHotelExpandedWidgetDiv, #hotelCarExpandedWidgetDiv").attr("tabindex",0).focus())})),$("#promoCode, #hotelCarPromoCode").on("keyup",function(a){9===a.keyCode&&"block"===$("#delta-vacations-expanded-tabs").css("display")&&$("#delta-vacations-expanded-tabs ul li.ui-state-active").find("a").attr("tabindex",0).click().focus()})})},flightHotel_ChildCountChangeEvent:function(){$("#childCount").on("change",function(){var a=$("#childCount").val(),b=parseInt($("#numberOfRooms").val()),c="#flightHotelVacationExpandedSearchContainer ";if(1==b)if(a>0){delta.widgetnav.vacations.expandFlightHotelWidget();var d=1;delta.widgetnav.vacations.resetRoomTabs(),delta.widgetnav.vacations.setEachRoomTabWidth(),delta.widgetnav.vacations.hideRoomTabs(d),$("#delta-vacations-expanded-tabs ul li a#vacationsRoom"+d).parent().addClass("lastVacationsRoomTab");var e=parseInt($("#hiddenSelectedChildCount").val());if(0==e){var f={Counter:0,RoomCount:1};$("#flightHotelExpandedWidgetDiv").html($("#flightHotelRoomsTemplate").render(f)),$("#hiddenchildrenNumber1").val(a),$("#hiddenAdultCount1").val($("#adultCount").val());for(var g=1;a>=g;g++)f={Counter:0,RoomCount:1,ChildCount:g,ChildCounter:parseInt(g)-1},$("#childCountRightContainer1").html($("#childCountRightContainer1").html()+$("#flightHotelChildrenTemplate").render(f)),$("#child_1_"+g+"AgeDiv").show();$("#childCountRightContainer1").show()}else if(parseInt(a)>e)for(var g=e;a>=g;g++){var f={Counter:0,RoomCount:1,ChildCount:g,ChildCounter:parseInt(g)-1};$("#childCountRightContainer1").append($("#flightHotelChildrenTemplate").render(f)),$("#child_1_"+g+"AgeDiv").show()}else{for(var g=parseInt(a)+1;e>=g;g++)$("#childAgeFieldset_1_"+g).remove();delta.widgetnav.vacations.hideChidAgeError(!1,parseInt(a))}$("#hiddenSelectedChildCount").val(a),$("#hiddenPerRoomSelectedChildCount1").val(a),$("#hiddenchildrenNumber1").val(a),delta.widgetnav.vacations.setExpandedWidgetContainerHeight("1"),delta.widgetnav.vacations.loadToolTip($(".expandedHelpIcon"),$("#vacationsChildrenToolTip").html(),0,6,"",500,"",""),delta.widgetnav.vacations.loadToolTipOnClick(),delta.widgetnav.vacations.setDropDownStyle_IE(),delta.widgetnav.vacations.setToolTipFocus(),delta.widgetnav.vacations.validateOnFormSubmit_FlightHotel()}else $("#vacationSearchWidgetContainer").removeClass("expadedContainer"),$("#flightHotelExpandedWidgetDiv").html(""),$("#hiddenSelectedChildCount").val("0"),$("#hiddenPerRoomSelectedChildCount1").val("0"),delta.widgetnav.vacations.hideRemovedRoomDetails("0",c,""),$("#delta-vacations-expanded-tabs ul").find("li.ui-tabs-selected").removeClass("ui-tabs-selected"),$("#delta-vacations-expanded-tabs ul").find("li.ui-tabs-selected").removeClass("ui-state-active"),delta.widgetnav.vacations.collapseFlightHotelWidget(),delta.widgetnav.vacations.hideChidAgeError(!0),delta.widgetnav.vacations.roomTabHandlerFunction("1",c,""),$("#flightHotelVacationExpandedSearchContainer").hide(),$("#flightHotelSearchForm").validate().element("#adultCount");else 0==a&&$("#flightHotelSearchForm").validate().element("#adultCount")})},hotelCar_ChildCountChangeEvent:function(){$("#travelerChildCount").change(function(){var a=$("#travelerChildCount").val(),b="#hotelCarVacationExpandedSearchContainer ",c=parseInt($("#hotelNumberOfRooms").val());if(1==c)if(a>0){delta.widgetnav.vacations.expandHotelCarWidget();var d=1;delta.widgetnav.vacations.resetRoomTabs(),delta.widgetnav.vacations.setEachRoomTabWidth(),delta.widgetnav.vacations.hideRoomTabs(d),$("#delta-vacations-expanded-tabs ul li a#vacationsRoom"+d).parent().addClass("lastVacationsRoomTab");var e=parseInt($("#hiddenSelectedChildCount_hotelCar").val());if(0==e){var f={Counter:0,RoomCount:1};$("#hotelCarExpandedWidgetDiv").html($("#hotelCarRoomsTemplate").render(f)),$("#hiddenchildrenNumber1_hotelCar").val(a),$("#hiddenAdultCount1_hotelCar").val($("#travelerAdultCount").val());for(var g=1;a>=g;g++)f={Counter:0,RoomCount:1,ChildCount:g,ChildCounter:parseInt(g)-1},$("#childCountRightContainer1_hotelCar").html($("#childCountRightContainer1_hotelCar").html()+$("#hotelCarChildrenTemplate").render(f)),$("#childCountRightContainer1_hotelCar").show(),$("#child_1_"+g+"AgeDiv_hotelCar").show()}else if(parseInt(a)>e)for(var g=e;a>=g;g++){var f={Counter:0,RoomCount:1,ChildCount:g,ChildCounter:parseInt(g)-1};$("#childCountRightContainer1_hotelCar").append($("#hotelCarChildrenTemplate").render(f)),$("#child_1_"+g+"AgeDiv_hotelCar").show()}else{for(var g=parseInt(a)+1;e>=g;g++)$("#childAgeFieldset_1_"+g+"_hotelCar").remove();delta.widgetnav.vacations.hideChidAgeError(!1,parseInt(a))}$("#hiddenSelectedChildCount_hotelCar").val(a),$("#hiddenPerRoomSelectedChildCount1_hotelCar").val(a),$("#hiddenchildrenNumber1_hotelCar").val(a),delta.widgetnav.vacations.setExpandedWidgetContainerHeight("1"),delta.widgetnav.vacations.loadToolTip($(".expandedHelpIcon"),$("#vacationsChildrenToolTip").html(),0,6,"",500,"",""),delta.widgetnav.vacations.loadToolTipOnClick(),delta.widgetnav.vacations.setDropDownStyle_IE(),delta.widgetnav.vacations.setToolTipFocus(),delta.widgetnav.vacations.validateOnFormSubmit_HotelCar()}else $("#vacationSearchWidgetContainer").removeClass("expadedContainer"),$("#hotelCarExpandedWidgetDiv").html(""),$("#hiddenSelectedChildCount_hotelCar").val("0"),$("#hiddenPerRoomSelectedChildCount1_hotelCar").val("0"),delta.widgetnav.vacations.hideRemovedRoomDetails("0",b,"_hotelCar"),$("#delta-vacations-expanded-tabs ul").find("li.ui-tabs-selected").removeClass("ui-tabs-selected"),$("#delta-vacations-expanded-tabs ul").find("li.ui-tabs-selected").removeClass("ui-state-active"),delta.widgetnav.vacations.collapseHotelCarWidget(),delta.widgetnav.vacations.hideChidAgeError(!0),delta.widgetnav.vacations.roomTabHandlerFunction("1",b,"_hotelCar"),$("#hotelCarVacationExpandedSearchContainer").hide(),$("#hotelCarSearchForm").validate().element("#travelerAdultCount");else 0==a&&$("#hotelCarSearchForm").validate().element("#travelerAdultCount")})},flightCar_ChildCountChangeEvent:function(){$("#flightCarChildCount").change(function(){var a=$("#flightCarChildCount").val(),b="#flightCarVacationExpandedSearchContainer ";if(a>0){delta.widgetnav.vacations.expandFlightCarWidget();delta.widgetnav.vacations.resetRoomTabs(),delta.widgetnav.vacations.hideExpandedTabName();var c=parseInt($("#hiddenSelectedChildCount_flightCar").val());if(0==c){var d={Counter:0,RoomCount:1};$("#flightCarExpandedWidgetDiv").html($("#flightCarRoomsTemplate").render(d)),$("#hiddenchildrenNumber1_flightCar").val(a),$("#hiddenAdultCount1_flightCar").val($("#flightCarAdultCount").val());for(var e=1;a>=e;e++)d={Counter:0,RoomCount:1,ChildCount:e,ChildCounter:parseInt(e)-1},$("#childCountRightContainer1_flightCar").html($("#childCountRightContainer1_flightCar").html()+$("#flightCarChildrenTemplate").render(d)),$("#child_1_"+e+"AgeDiv_flightCar").show();$("#childCountRightContainer1_flightCar").show()}else if(parseInt(a)>c){for(var e=c;a>=e;e++){var d={Counter:0,RoomCount:1,ChildCount:e,ChildCounter:parseInt(e)-1};$("#childCountRightContainer1_flightCar").append($("#flightCarChildrenTemplate").render(d)),$("#child_1_"+e+"AgeDiv_flightCar").show()}$("#hiddenchildrenNumber1_flightCar").val(a)}else{for(var e=parseInt(a)+1;c>=e;e++)$("#childAgeFieldset_1_"+e+"_flightCar").remove();$("#hiddenchildrenNumber1_flightCar").val(a),delta.widgetnav.vacations.hideChidAgeError(!1,parseInt(a))}$("#hiddenSelectedChildCount_flightCar").val(a),$("#hiddenPerRoomSelectedChildCount1_flightCar").val(a),$("#hiddenchildrenNumber1_flightCar").val(a),resizeVacationsWidget.resize(),delta.widgetnav.vacations.setExpandedWidgetContainerHeight("1"),delta.widgetnav.vacations.loadToolTip($(".expandedHelpIcon"),$("#vacationsChildrenToolTip").html(),0,6,"",500,"",""),delta.widgetnav.vacations.loadToolTipOnClick(),delta.widgetnav.vacations.setDropDownStyle_IE(),delta.widgetnav.vacations.setToolTipFocus(),delta.widgetnav.vacations.validateOnFormSubmit_FlightCar()}else $("#vacationSearchWidgetContainer").removeClass("expadedContainer"),$("#flightCarExpandedWidgetDiv").html(""),$("#hiddenSelectedChildCount_flightCar").val("0"),$("#hiddenPerRoomSelectedChildCount1_flightCar").val("0"),delta.widgetnav.vacations.hideRemovedRoomDetails("0",b,""),$("#delta-vacations-expanded-tabs ul").find("li.ui-tabs-selected").removeClass("ui-tabs-selected"),$("#delta-vacations-expanded-tabs ul").find("li.ui-tabs-selected").removeClass("ui-state-active"),delta.widgetnav.vacations.collapseFlightCarWidget(),delta.widgetnav.vacations.hideChidAgeError(!0),delta.widgetnav.vacations.roomTabHandlerFunction("1",b,"_flightCar"),$("#flightCarVacationExpandedSearchContainer").hide()})},flightHotel_ExpandedChildCountChangeEvent:function(){$(document).on("change","#flightHotelVacationExpandedSearchContainer select[id^='hiddenchildrenNumber']",function(){var a=this.value,b=this.id.replace("hiddenchildrenNumber","");if(a>0){var c=parseInt($("#hiddenPerRoomSelectedChildCount"+b).val());if(0==c){for(var d=1;a>=d;d++){var e={Counter:parseInt(b)-1,RoomCount:b,ChildCount:d,ChildCounter:parseInt(d)-1};$("#childCountRightContainer"+b).html($("#childCountRightContainer"+b).html()+$("#flightHotelChildrenTemplate").render(e)),$("#child_"+b+"_"+d+"AgeDiv").show()}$("#childCountRightContainer"+b).show(),$("#hiddenPerRoomSelectedChildCount"+b).val(a)}else if(c<parseInt(a)){for(var d=c+1;a>=d;d++){var e={Counter:parseInt(b)-1,RoomCount:b,ChildCount:d,ChildCounter:parseInt(d)-1};$("#childCountRightContainer"+b).html($("#childCountRightContainer"+b).html()+$("#flightHotelChildrenTemplate").render(e)),$("#child_"+b+"_"+d+"AgeDiv").show()}$("#hiddenPerRoomSelectedChildCount"+b).val(a)}else{for(var d=parseInt(a)+1;c>=d;d++)$("#childAgeFieldset_"+b+"_"+d).remove();$("#hiddenPerRoomSelectedChildCount"+b).val(a),delta.widgetnav.vacations.hideChidAgeError(!1,parseInt(a))}1==$("#numberOfRooms").val()&&($("#childCount").val(a),$("#hiddenSelectedChildCount").val(a)),resizeVacationsWidget.resize(),delta.widgetnav.vacations.setExpandedWidgetContainerHeight(b),delta.widgetnav.vacations.setDropDownStyle_IE(),delta.widgetnav.vacations.validateOnFormSubmit_FlightHotel()}else if(1!=$("#numberOfRooms").val())$("#hiddenPerRoomSelectedChildCount"+b).val(a),$("#childCountRightContainer"+b).html(""),$("#childCountRightContainer"+b).hide();else{$("#childCount").val(a),$("#hiddenSelectedChildCount").val(a);var f="#flightHotelVacationExpandedSearchContainer ";$("#hiddenPerRoomSelectedChildCount"+b).val(a),$("#vacationSearchWidgetContainer").removeClass("expadedContainer"),$("#flightHotelExpandedWidgetDiv").html(""),$("#hiddenSelectedChildCount").val("0"),delta.widgetnav.vacations.hideRemovedRoomDetails("0",f,""),$("#delta-vacations-expanded-tabs ul").find("li.ui-tabs-selected").removeClass("ui-tabs-selected"),$("#delta-vacations-expanded-tabs ul").find("li.ui-tabs-selected").removeClass("ui-state-active"),delta.widgetnav.vacations.collapseFlightHotelWidget(),delta.widgetnav.vacations.hideChidAgeError(!0),delta.widgetnav.vacations.roomTabHandlerFunction("1",f,""),$("#flightHotelVacationExpandedSearchContainer").hide(),$("#flightHotelSearchForm").validate().element("#adultCount")}})},hotelCar_ExpandedChildCountChangeEvent:function(){$(document).on("change","#hotelCarVacationExpandedSearchContainer select[id^='hiddenchildrenNumber']",function(){var a=this.value,b=this.id.replace("hiddenchildrenNumber","").replace("_hotelCar","");if(a>0){var c=parseInt($("#hiddenPerRoomSelectedChildCount"+b+"_hotelCar").val());if(0==c){for(var d=1;a>=d;d++){var e={Counter:parseInt(b)-1,RoomCount:b,ChildCount:d,ChildCounter:parseInt(d)-1};$("#childCountRightContainer"+b+"_hotelCar").html($("#childCountRightContainer"+b+"_hotelCar").html()+$("#hotelCarChildrenTemplate").render(e)),$("#child_"+b+"_"+d+"AgeDiv_hotelCar").show()}$("#childCountRightContainer"+b+"_hotelCar").show()}else if(c<parseInt(a))for(var d=c+1;a>=d;d++){var e={Counter:parseInt(b)-1,RoomCount:b,ChildCount:d,ChildCounter:parseInt(d)-1};$("#childCountRightContainer"+b+"_hotelCar").append($("#hotelCarChildrenTemplate").render(e)),$("#child_"+b+"_"+d+"AgeDiv_hotelCar").show()}else{for(var d=parseInt(a)+1;c>=d;d++)$("#childAgeFieldset_"+b+"_"+d+"_hotelCar").remove();delta.widgetnav.vacations.hideChidAgeError(!1,parseInt(a))}$("#hiddenPerRoomSelectedChildCount"+b+"_hotelCar").val(a),1==$("#hotelNumberOfRooms_hotelCar").val()&&($("#travelerChildCount").val(a),$("#hiddenSelectedChildCount_hotelCar").val(a)),1==$("#hotelNumberOfRooms").val()&&($("#travelerChildCount").val(a),$("#hiddenSelectedChildCount_hotelCar").val(a)),resizeVacationsWidget.resize(),delta.widgetnav.vacations.setExpandedWidgetContainerHeight(b),delta.widgetnav.vacations.setDropDownStyle_IE(),delta.widgetnav.vacations.validateOnFormSubmit_HotelCar()}else if(1!=$("#hotelNumberOfRooms").val())$("#hiddenPerRoomSelectedChildCount"+b+"_hotelCar").val(a),$("#childCountRightContainer"+b+"_hotelCar").html(""),$("#childCountRightContainer"+b+"_hotelCar").hide();else{$("#hiddenPerRoomSelectedChildCount"+b+"_hotelCar").val(a),$("#travelerChildCount").val(a),$("#hiddenSelectedChildCount_hotelCar").val(a),$("#vacationSearchWidgetContainer").removeClass("expadedContainer"),$("#hotelCarExpandedWidgetDiv").html(""),$("#hiddenSelectedChildCount_hotelCar").val("0");var f="#hotelCarVacationExpandedSearchContainer ";delta.widgetnav.vacations.hideRemovedRoomDetails("0",f,"_hotelCar"),$("#delta-vacations-expanded-tabs ul").find("li.ui-tabs-selected").removeClass("ui-tabs-selected"),$("#delta-vacations-expanded-tabs ul").find("li.ui-tabs-selected").removeClass("ui-state-active"),delta.widgetnav.vacations.collapseHotelCarWidget(),delta.widgetnav.vacations.hideChidAgeError(!0),delta.widgetnav.vacations.roomTabHandlerFunction("1",f,"_hotelCar"),$("#hotelCarVacationExpandedSearchContainer").hide(),$("#hotelCarSearchForm").validate().element("#travelerAdultCount")}})},flightCar_ExpandedChildCountChangeEvent:function(){$(document).on("change","#flightCarVacationExpandedSearchContainer select[id^='hiddenchildrenNumber']",function(){var a=this.value,b=this.id.replace("hiddenchildrenNumber","").replace("_flightCar","");if(a>0){var c=parseInt($("#hiddenPerRoomSelectedChildCount"+b+"_flightCar").val());if(0==c){for(var d=1;a>=d;d++){var e={Counter:parseInt(b)-1,RoomCount:b,ChildCount:d,ChildCounter:parseInt(d)-1};$("#childCountRightContainer"+b+"_flightCar").html($("#childCountRightContainer"+b+"_flightCar").html()+$("#flightCarChildrenTemplate").render(e)),$("#child_"+b+"_"+d+"AgeDiv_flightCar").show()}$("#childCountRightContainer"+b+"_flightCar").show()}else if(c<parseInt(a))for(var d=c+1;a>=d;d++){var e={Counter:parseInt(b)-1,RoomCount:b,ChildCount:d,ChildCounter:parseInt(d)-1};$("#childCountRightContainer"+b+"_flightCar").append($("#flightCarChildrenTemplate").render(e)),$("#child_"+b+"_"+d+"AgeDiv_flightCar").show()}else{for(var d=parseInt(a)+1;c>=d;d++)$("#childAgeFieldset_"+b+"_"+d+"_flightCar").remove();delta.widgetnav.vacations.hideChidAgeError(!1,parseInt(a))}$("#flightCarChildCount").val(a),$("#hiddenSelectedChildCount_flightCar").val(a),$("#hiddenPerRoomSelectedChildCount"+b+"_flightCar").val(a),resizeVacationsWidget.resize(),delta.widgetnav.vacations.setExpandedWidgetContainerHeight(b),delta.widgetnav.vacations.setDropDownStyle_IE(),delta.widgetnav.vacations.validateOnFormSubmit_FlightCar()}else{$("#hiddenPerRoomSelectedChildCount"+b+"_flightCar").val(a),$("#childCountRightContainer"+b+"_flightCar").html(""),$("#childCountRightContainer"+b+"_flightCar").hide(),$("#vacationSearchWidgetContainer").removeClass("expadedContainer"),$("#flightCarExpandedWidgetDiv").html(""),$("#hiddenSelectedChildCount_flightCar").val("0");var f="#flightCarVacationExpandedSearchContainer ";delta.widgetnav.vacations.hideRemovedRoomDetails("0",f,""),$("#delta-vacations-expanded-tabs ul").find("li.ui-tabs-selected").removeClass("ui-tabs-selected"),$("#delta-vacations-expanded-tabs ul").find("li.ui-tabs-selected").removeClass("ui-state-active"),delta.widgetnav.vacations.collapseFlightCarWidget(),delta.widgetnav.vacations.hideChidAgeError(!0),delta.widgetnav.vacations.roomTabHandlerFunction("1",f,"_flightCar"),$("#flightCarVacationExpandedSearchContainer").hide()}})},hideChidAgeError:function(a,b){var c,d=$("#vacationSearchWidgetContainer .vacations-pkg-tabs").find(".pkg-name.active").attr("id");if(c=$("flightHotelTab"==d?"div[id*=Age-error]":"flightCarTab"==d?"div[id*=Age_flightCar-error]":"div[id*=Age_hotelCar-error]"),a)jQuery.each(c,function(){$(this).hide()});else{var e=parseInt($("#delta-vacations-expanded-tabs ul li.ui-state-active a")[0].id.replace("vacationsRoom",""));jQuery.each(c,function(){if("none"!=$(this).css("display")){var a=($(this).attr("for"),parseInt($(this).attr("id").replace("child_"+e+"_","").replace("Age-error","")));a>b&&$(this).hide()}})}},roomChangeEvent:function(){$(".vacationRooms").on("click",function(){var a=this.id.replace("vacationsRoom",""),b="",c="",d=$("#vacationSearchWidgetContainer .vacations-pkg-tabs").find(".pkg-name.active").attr("id");"flightHotelTab"==d?b="#flightHotelVacationExpandedSearchContainer ":"flightCarTab"==d?(b="#flightCarVacationExpandedSearchContainer ",c="_flightCar"):(b="#hotelCarVacationExpandedSearchContainer ",c="_hotelCar"),delta.widgetnav.vacations.roomTabHandlerFunction(a,b,c)})},flightHotel_RecentSearchSelection:function(a){var b="#flightHotelVacationExpandedSearchContainer ";if(void 0!=flightHotelRecentSearchMap&&null!=flightHotelRecentSearchMap){"none"!=$("#flightHotelVacationExpandedSearchContainer").css("display")&&$("#flightHotelExpandedWidgetDiv").html("");var c=flightHotelRecentSearchMap[a],d=c.searchValues,e=d.from,f=d.to,g=d.departureDate,h=d.returnDate,i=parseInt(d.noOfRooms),j=parseInt(d.noOfAdults),k=parseInt(d.noOfChildren);$("form#flightHotelSearchForm #fromAirport").val(e),$("form#flightHotelSearchForm #toAirport").val(f),$("form#flightHotelSearchForm #vacationsdepartureDate").val(g),$("form#flightHotelSearchForm #vacationsreturnDate").val(h),$("form#flightHotelSearchForm #numberOfRooms").val(i),$("form#flightHotelSearchForm #hiddenSelectedRoomCount").val(i),$("form#flightHotelSearchForm #hiddenSelectedChildCount").val(k),$("form#flightHotelSearchForm #adultCount").val(j),$("form#flightHotelSearchForm #childCount").val(k),$("#originAirportName_flightHotel").val(d.originAirportName),$("#originCityName_flightHotel").val(d.originCityName),$("#originCityCode_flightHotel").val(d.originCityCode),$("#originStateCode_flightHotel").val(d.originStateCode),$("#originCountryName_flightHotel").val(d.originCountryName),$("#originCountryCode_flightHotel").val(d.originCountryCode),$("#destAirportName_flightHotel").val(d.destAirportName),$("#destCityName_flightHotel").val(d.destCityName),$("#destCityCode_flightHotel").val(d.destCityCode),$("#destStateCode_flightHotel").val(d.destStateCode),$("#destCountryName_flightHotel").val(d.destCountryName),$("#destCountryCode_flightHotel").val(d.destCountryCode),i>1?delta.widgetnav.vacations.activateExpandedWidget_roomCount_flightHotel(b,i,d.travelersInRoom):k>0?delta.widgetnav.vacations.activateExpandedWidget_childCount_flightHotel(b,d.travelersInRoom):delta.widgetnav.vacations.isExpandedWidget()&&($("#vacationSearchWidgetContainer").removeClass("expadedContainer"),$("#flightHotelVacationExpandedSearchContainer").hide(),delta.widgetnav.vacations.hideRemovedRoomDetails("0",b,""),$("#delta-vacations-expanded-tabs ul").find("li.ui-tabs-selected").removeClass("ui-tabs-selected"),$("#delta-vacations-expanded-tabs ul").find("li.ui-tabs-selected").removeClass("ui-state-active"),delta.widgetnav.vacations.roomTabHandlerFunction("1",b,""),delta.widgetnav.vacations.collapseFlightHotelWidget()),delta.widgetnav.vacations.hideSearchDiv()}},activateExpandedWidget_roomCount_flightHotel:function(a,b,c){$("#flightHotelVacationExpandedSearchContainer").removeAttr("style"),delta.widgetnav.vacations.expandFlightHotelWidget(),$("#hiddenAdultCount").val("2");parseInt($("#delta-vacations-expanded-tabs ul li.ui-state-active a")[0].id.replace("vacationsRoom",""));delta.widgetnav.vacations.resetRoomTabs(),delta.widgetnav.vacations.setEachRoomTabWidth(),delta.widgetnav.vacations.hideRoomTabs(""+b),delta.widgetnav.vacations.hideRemovedRoomDetails("0",a,"");var d=1;$("#hiddenSelectedRoomCount").val(c.length);for(var e=0;e<c.length;e++){var f=c[e],g=f.adultsCount,h=f.children,i=h.count,j=h.ages,f={Counter:e,RoomCount:e+1};$("#flightHotelExpandedWidgetDiv").append($("#flightHotelRoomsTemplate").render(f)),0==e&&($("#hiddenAdultCount1 option[value=0]").remove(),$("#hiddenAdultCount1 option[value=2]").prop("selected",!0)),0!=e?($(a+"#roomGuestLeftContainer"+e).hide(),$(a+"#childCountRightContainer"+e).hide()):($(a+"#roomGuestLeftContainer"+e).show(),$(a+"#childCountRightContainer"+e).show()),$("#hiddenAdultCount"+d).val(g),$("#hiddenchildrenNumber"+d).val(i);for(var k=1;i>=k;k++)f={Counter:0,RoomCount:e+1,ChildCount:k,ChildCounter:parseInt(k)-1},$("#childCountRightContainer"+(e+1)).html($("#childCountRightContainer"+(e+1)).html()+$("#flightHotelChildrenTemplate").render(f)),$("#child_"+(e+1)+"_"+k+"AgeDiv").show();$("#hiddenPerRoomSelectedChildCount"+(e+1)).val(i);for(var k=1;i>=k;k++)$("#child_"+(e+1)+"_"+k+"Age").val(j[k-1]);d++}delta.widgetnav.vacations.roomTabHandlerFunction("1",a,"")},activateExpandedWidget_childCount_flightHotel:function(a,b){$("#flightHotelVacationExpandedSearchContainer").removeAttr("style"),delta.widgetnav.vacations.expandFlightHotelWidget();parseInt($("#delta-vacations-expanded-tabs ul li.ui-state-active a")[0].id.replace("vacationsRoom",""));delta.widgetnav.vacations.resetRoomTabs(),delta.widgetnav.vacations.setEachRoomTabWidth(),delta.widgetnav.vacations.hideRoomTabs("1"),delta.widgetnav.vacations.hideRemovedRoomDetails("0",a,"");var c=1,d=b[0].adultsCount,e=b[0].children.count;if(e>0){var f={Counter:0,RoomCount:1};$("#flightHotelExpandedWidgetDiv").html($("#flightHotelRoomsTemplate").render(f)),$("#hiddenAdultCount"+c).val(d),$("#hiddenchildrenNumber"+c).val(e),$("#hiddenPerRoomSelectedChildCount"+c).val(e),$("#childCountRightContainer1").show(),$("#hiddenSelectedChildCount").val(e);for(var g=1;e>=g;g++)f={Counter:0,RoomCount:1,ChildCount:g,ChildCounter:parseInt(g)-1},$("#childCountRightContainer1").html($("#childCountRightContainer1").html()+$("#flightHotelChildrenTemplate").render(f)),$("#child_1_"+g+"AgeDiv").show();for(var g=1;e>=g;g++)$("#child_1_"+g+"Age").val(b[0].children.ages[g-1])}delta.widgetnav.vacations.roomTabHandlerFunction("1",a,"")},flightCar_RecentSearchesSelection:function(a){var b="#flightCarVacationExpandedSearchContainer ";if(void 0!=flightCarRecentSearchMap&&null!=flightCarRecentSearchMap){"none"!=$("#flightCarVacationExpandedSearchContainer").css("display")&&$("#flightCarExpandedWidgetDiv").html("");var c=flightCarRecentSearchMap[a],d=c.searchValues,e=d.from,f=d.to,g=d.departureDate,h=d.returnDate,i=parseInt(d.noOfAdults),j=parseInt(d.noOfChildren);$("form#flightCarSearchForm #flightCarFromAirport").val(e),$("form#flightCarSearchForm #flightCarToAirport").val(f),$("form#flightCarSearchForm #flightCarVacationsdepartureDate").val(g),$("form#flightCarSearchForm #flightCarVacationsreturnDate").val(h),$("form#flightCarSearchForm #flightCarAdultCount").val(i),$("form#flightCarSearchForm #flightCarChildCount").val(j),$("form#flightCarSearchForm #hiddenSelectedChildCount_flightCar").val(j),$("#originAirportName_flightCar").val(d.originAirportName),$("#originCityName_flightCar").val(d.originCityName),$("#originCityCode_flightCar").val(d.originCityCode),$("#originStateCode_flightCar").val(d.originStateCode),$("#originCountryName_flightCar").val(d.originCountryName),$("#originCountryCode_flightCar").val(d.originCountryCode),$("#destAirportName_flightCar").val(d.destAirportName),$("#destCityName_flightCar").val(d.destCityName),$("#destCityCode_flightCar").val(d.destCityCode),$("#destStateCode_flightCar").val(d.destStateCode),$("#destCountryName_flightCar").val(d.destCountryName),$("#destCountryCode_flightCar").val(d.destCountryCode),j>0?delta.widgetnav.vacations.activateExpandedWidget_childCount_flightCar(b,d.travelersInRoom):delta.widgetnav.vacations.isExpandedWidget()&&($("#vacationSearchWidgetContainer").removeClass("expadedContainer"),$("#flightHotelVacationExpandedSearchContainer").hide(),delta.widgetnav.vacations.hideRemovedRoomDetails("0",b,""),$("#delta-vacations-expanded-tabs ul").find("li.ui-tabs-selected").removeClass("ui-tabs-selected"),$("#delta-vacations-expanded-tabs ul").find("li.ui-tabs-selected").removeClass("ui-state-active"),delta.widgetnav.vacations.roomTabHandlerFunction("1",b,""),delta.widgetnav.vacations.collapseFlightHotelWidget()),delta.widgetnav.vacations.hideSearchDiv()}},activateExpandedWidget_childCount_flightCar:function(a,b){
$("#flightCarVacationExpandedSearchContainer").removeAttr("style"),delta.widgetnav.vacations.expandFlightCarWidget();parseInt($("#delta-vacations-expanded-tabs ul li.ui-state-active a")[0].id.replace("vacationsRoom",""));delta.widgetnav.vacations.resetRoomTabs(),delta.widgetnav.vacations.hideExpandedTabName(),delta.widgetnav.vacations.hideRemovedRoomDetails("0",a,"_flightCar");var c=1,d=b[0].adultsCount,e=b[0].children.count;if(delta.widgetnav.vacations.setExpandedWidgetContainerHeight(),e>0){var f={Counter:0,RoomCount:1};$("#flightCarExpandedWidgetDiv").html($("#flightCarRoomsTemplate").render(f)),$("#hiddenAdultCount"+c+"_flightCar").val(d),$("#hiddenchildrenNumber"+c+"_flightCar").val(e),$("#hiddenPerRoomSelectedChildCount"+c+"_flightCar").val(e),$("#childCountRightContainer1_flightCar").show(),$("#hiddenSelectedChildCount_flightCar").val(e);for(var g=1;e>=g;g++)f={Counter:0,RoomCount:1,ChildCount:g,ChildCounter:parseInt(g)-1},$("#childCountRightContainer1_flightCar").html($("#childCountRightContainer1_flightCar").html()+$("#flightCarChildrenTemplate").render(f)),$("#child_1_"+g+"AgeDiv_flightCar").show();for(var g=1;e>=g;g++)$("#child_1_"+g+"Age_flightCar").val(b[0].children.ages[g-1])}delta.widgetnav.vacations.roomTabHandlerFunction("1",a,"_flightCar")},hotelCar_RecentSearchSelection:function(a){var b="#hotelCarVacationExpandedSearchContainer ";if(void 0!=hotelCarRecentSearchMap&&null!=hotelCarRecentSearchMap){"none"!=$("#hotelCarVacationExpandedSearchContainer").css("display")&&$("#hotelCarExpandedWidgetDiv").html("");var c=hotelCarRecentSearchMap[a],d=c.searchValues,e=d.to,f=d.departureDate,g=d.returnDate,h=parseInt(d.noOfRooms),i=parseInt(d.noOfAdults),j=parseInt(d.noOfChildren);$("form#hotelCarSearchForm #vacationHotelLocation").val(e),$("form#hotelCarSearchForm #hotelCheckInDate").val(f),$("form#hotelCarSearchForm #hotelCheckOutDate").val(g),$("form#hotelCarSearchForm #travelerAdultCount").val(i),$("form#hotelCarSearchForm #travelerChildCount").val(j),$("form#hotelCarSearchForm #hotelNumberOfRooms").val(h),$("form#hotelCarSearchForm #hiddenSelectedRoomCount_flightCar").val(h),$("form#hotelCarSearchForm #hiddenSelectedChildCount_hotelCar").val(j),$("#destAirportName_hotelCar").val(d.destAirportName),$("#destCityName_hotelCar").val(d.destCityName),$("#destCityCode_hotelCar").val(d.destCityCode),$("#destStateCode_hotelCar").val(d.destStateCode),$("#destCountryName_hotelCar").val(d.destCountryName),$("#destCountryCode_hotelCar").val(d.destCountryCode),h>1?delta.widgetnav.vacations.activateExpandedWidget_roomCount_hotelCar(b,h,d.travelersInRoom):j>0?delta.widgetnav.vacations.activateExpandedWidget_childCount_hotelCar(b,d.travelersInRoom):delta.widgetnav.vacations.isExpandedWidget()&&($("#vacationSearchWidgetContainer").removeClass("expadedContainer"),$("#hotelCarVacationExpandedSearchContainer").hide(),delta.widgetnav.vacations.hideRemovedRoomDetails("0",b,"_hotelCar"),$("#delta-vacations-expanded-tabs ul").find("li.ui-tabs-selected").removeClass("ui-tabs-selected"),$("#delta-vacations-expanded-tabs ul").find("li.ui-tabs-selected").removeClass("ui-state-active"),delta.widgetnav.vacations.roomTabHandlerFunction("1",b,""),delta.widgetnav.vacations.collapseHotelCarWidget()),delta.widgetnav.vacations.hideSearchDiv()}},activateExpandedWidget_roomCount_hotelCar:function(a,b,c){$("#flightHotelVacationExpandedSearchContainer").removeAttr("style"),delta.widgetnav.vacations.expandHotelCarWidget();parseInt($("#delta-vacations-expanded-tabs ul li.ui-state-active a")[0].id.replace("vacationsRoom",""));delta.widgetnav.vacations.resetRoomTabs(),delta.widgetnav.vacations.setEachRoomTabWidth(),delta.widgetnav.vacations.hideRoomTabs(""+b),delta.widgetnav.vacations.hideRemovedRoomDetails("0",a,"_hotelCar");for(var d=1,e=0;e<c.length;e++){var f=c[e],g=f.adultsCount,h=f.children,i=h.count,j=h.ages,f={Counter:e,RoomCount:e+1};$("#hotelCarExpandedWidgetDiv").append($("#hotelCarRoomsTemplate").render(f)),0==e&&($("#hiddenAdultCount1_hotelCar option[value=0]").remove(),$("#hiddenAdultCount1_hotelCar option[value=2]").prop("selected",!0)),0!=e?($(a+"#roomGuestLeftContainer"+e+"_hotelCar").hide(),$(a+"#childCountRightContainer"+e+"_hotelCar").hide()):($(a+"#roomGuestLeftContainer"+e+"_hotelCar").show(),$(a+"#childCountRightContainer"+e+"_hotelCar").show()),$("#hiddenAdultCount"+d+"_hotelCar").val(g),$("#hiddenchildrenNumber"+d+"_hotelCar").val(i);for(var k=1;i>=k;k++)f={Counter:0,RoomCount:e+1,ChildCount:k,ChildCounter:parseInt(k)-1},$("#childCountRightContainer"+(e+1)+"_hotelCar").html($("#childCountRightContainer"+(e+1)+"_hotelCar").html()+$("#hotelCarChildrenTemplate").render(f)),$("#child_"+(e+1)+"_"+k+"AgeDiv_hotelCar").show();$("#hiddenPerRoomSelectedChildCount"+(e+1)+"_hotelCar").val(i);for(var k=1;i>=k;k++)$("#child_"+(e+1)+"_"+k+"Age_hotelCar").val(j[k-1]);d++}delta.widgetnav.vacations.roomTabHandlerFunction("1",a,"_hotelCar")},activateExpandedWidget_childCount_hotelCar:function(a,b){$("#hotelCarVacationExpandedSearchContainer").removeAttr("style"),delta.widgetnav.vacations.expandHotelCarWidget();parseInt($("#delta-vacations-expanded-tabs ul li.ui-state-active a")[0].id.replace("vacationsRoom",""));delta.widgetnav.vacations.resetRoomTabs(),delta.widgetnav.vacations.setEachRoomTabWidth(),delta.widgetnav.vacations.hideRoomTabs("1"),delta.widgetnav.vacations.hideRemovedRoomDetails("0",a,"_hotelCar");var c=1,d=b[0].adultsCount,e=b[0].children.count;if(e>0){var f={Counter:0,RoomCount:1};$("#hotelCarExpandedWidgetDiv").html($("#hotelCarRoomsTemplate").render(f)),$("#hiddenAdultCount"+c+"_hotelCar").val(d),$("#hiddenchildrenNumber"+c+"_hotelCar").val(e),$("#hiddenPerRoomSelectedChildCount"+c+"_hotelCar").val(e),$("#childCountRightContainer1_hotelCar").show(),$("#hiddenSelectedChildCount_hotelCar").val(e);for(var g=1;e>=g;g++)f={Counter:0,RoomCount:1,ChildCount:g,ChildCounter:parseInt(g)-1},$("#childCountRightContainer1_hotelCar").html($("#childCountRightContainer1_hotelCar").html()+$("#hotelCarChildrenTemplate").render(f)),$("#child_1_"+g+"AgeDiv_hotelCar").show();for(var g=1;e>=g;g++)$("#child_1_"+g+"Age_hotelCar").val(b[0].children.ages[g-1])}delta.widgetnav.vacations.roomTabHandlerFunction("1",a,"_hotelCar")},hidePopups:function(){$("#vacationsRecentSearchesBox").slideUp(300),$("#vacartionsRecentSearchArrow").css({"border-bottom-color":"#acadad","background-color":"transparent"})},hideSearchDiv:function(){$("#vacationsRecentSearchesBox").hide(),$("#vacartionsRecentSearchArrow").css({"border-bottom-color":"#acadad","background-color":"transparent"})},showSearch:function(){$("#vacationsRecentSearch").show(),$("#vacationsRecentSearch").css("border-bottom","none"),setTimeout(function(){resizeVacationsWidget.resize()},200)},setVacationCalendarControl:function(a,b,c,d,e){{var f=window.location;f.protocol,f.host}delta.calendar.globalConfiguration(),delta.calendar.create({calendarElement:$("."+e),daysInFutureToShow:331,daysInPastToShow:0,startDateTitle:c,endDateTitle:d,showDropDown:!0})},onSelectDateValidation:function(){if("none"!=$("#flightHotelVacationSearchContainer").css("display")){var a=$("#vacationsdepartureDate").val();"mm/dd/yyyy"!=a&&""!=a&&void 0!=a&&delta.widgetnav.vacations.triggerDateValidation("vacationsdepartureDate","vacationsreturnDate")}else if("none"!=$("#flightCarVacationSearchContainer").css("display")){var a=$("#flightCarVacationsdepartureDate").val();"mm/dd/yyyy"!=a&&""!=a&&void 0!=a&&delta.widgetnav.vacations.triggerDateValidation("flightCarVacationsdepartureDate","flightCarVacationsreturnDate")}else if("none"!=$("#hotelCarVacationSearchContainer").css("display")){var a=$("#hotelCheckInDate").val();"mm/dd/yyyy"!=a&&""!=a&&void 0!=a&&delta.widgetnav.vacations.triggerDateValidation("hotelCheckInDate","hotelCheckOutDate")}},triggerDateValidation:function(a,b){if("vacationsdepartureDate"==a){var c=$("#"+b).val();if("mm/dd/yyyy"!=c&&""!=c&&void 0!=c){$("#flightHotelSearchForm").validate().element("#"+b)}}else if("flightCarVacationsdepartureDate"==a){var c=$("#"+b).val();if("mm/dd/yyyy"!=c&&""!=c&&void 0!=c){$("#flightCarSearchForm").validate().element("#"+b)}}else if("hotelCheckInDate"==a){var c=$("#"+b).val();if("mm/dd/yyyy"!=c&&""!=c&&void 0!=c){$("#hotelCarSearchForm").validate().element("#"+b)}}},roomTabHandlerFunction:function(a,b,c,d){for(var e=1;4>=e;e++)if(e!=parseInt(a))$("#vacationsRoom"+e).parent().removeClass("ui-state-default ui-corner-top ui-tabs-selected ui-state-active"),$(b+"#roomGuestLeftContainer"+e+c).hide(),$(b+"#childCountRightContainer"+e+c).hide();else{$("#vacationsRoom"+e).parent().addClass("ui-state-default ui-corner-top ui-tabs-selected ui-state-active"),$(b+"#roomGuestLeftContainer"+e+c).show();var f=$(b+"#roomGuestLeftContainer"+e+c+" #hiddenchildrenNumber"+e+c).val();f>0&&$(b+"#childCountRightContainer"+e+c).show()}resizeVacationsWidget.resize(),d||delta.widgetnav.vacations.setExpandedWidgetContainerHeight(a,d)},setExpandedWidgetContainerHeight:function(a,b){var c=$("#vacationSearchWidgetContainer .vacations-pkg-tabs").find(".pkg-name.active").attr("id"),d="",e="",f=0,g=0;if("flightHotelTab"==c?($("#flightHotelVacationSearchContainer").removeAttr("style"),$("#flightHotelVacationSearchContainer").show(),$("#flightHotelVacationExpandedSearchContainer").removeAttr("style"),$("#flightHotelVacationExpandedSearchContainer").show(),e="flightHotel",delta.widgetnav.vacations.isRecentSearches_flightHotel&&(f=$("#vacationsRecentSearchContainer").height()+parseInt($("#vacationsRecentSearchContainer").css("padding-top").replace("px",""))+parseInt($("#vacationsRecentSearchContainer").css("padding-bottom").replace("px",""))),"none"!=$("#vacations-flightHotelSearch-errorMsg").css("display")&&(g=$("#vacations-flightHotelSearch-errorMsg").height()+parseInt($("#vacations-flightHotelSearch-errorMsg").css("padding-top").replace("px","")))):"flightCarTab"==c?($("#flightCarVacationSearchContainer").removeAttr("style"),$("#flightCarVacationSearchContainer").show(),$("#flightCarVacationExpandedSearchContainer").removeAttr("style"),$("#flightCarVacationExpandedSearchContainer").show(),e="flightCar",d="_flightCar",delta.widgetnav.vacations.isRecentSearches_flightCar&&(f=$("#vacationsRecentSearchContainer").height()+parseInt($("#vacationsRecentSearchContainer").css("padding-top").replace("px",""))+parseInt($("#vacationsRecentSearchContainer").css("padding-bottom").replace("px",""))),"none"!=$("#vacations-flightCarSearch-errorMsg").css("display")&&(g=$("#vacations-flightCarSearch-errorMsg").height()+parseInt($("#vacations-flightCarSearch-errorMsg").css("padding-top").replace("px","")))):($("#hotelCarVacationSearchContainer").removeAttr("style"),$("#hotelCarVacationSearchContainer").show(),$("#hotelCarVacationExpandedSearchContainer").removeAttr("style"),$("#hotelCarVacationExpandedSearchContainer").show(),e="hotelCar",d="_hotelCar",delta.widgetnav.vacations.isRecentSearches_hotelCar&&(f=$("#vacationsRecentSearchContainer").height()+parseInt($("#vacationsRecentSearchContainer").css("padding-top").replace("px",""))+parseInt($("#vacationsRecentSearchContainer").css("padding-bottom").replace("px",""))),"none"!=$("#vacations-hotelCarSearch-errorMsg").css("display")&&(g=$("#vacations-hotelCarSearch-errorMsg").height()+parseInt($("#vacations-hotelCarSearch-errorMsg").css("padding-top").replace("px","")))),b)$("#"+e+"VacationExpandedSearchContainer").hide();else{var h=$("#hiddenchildrenNumber"+a+d).val();if(delta.widgetnav.vacations.isExpandedWidget()){var i=!1;i="flightHotelTab"==c?delta.widgetnav.vacations.isRecentSearches_flightHotel:"flightCarTab"==c?delta.widgetnav.vacations.isRecentSearches_flightCar:delta.widgetnav.vacations.isRecentSearches_hotelCar,"none"==$("#vacations-"+e+"Search-errorMsg").css("display")?6>=h?($("#vacationSearchWidgetContainer").removeClass().addClass("vacationSearchWidgetContainerExpanded expadedContainer expandedTab"),$("#"+e+"VacationSearchContainer").removeClass().addClass("float-left expandedBorder"),"hotelCarTab"==c?($("#vacationSearchWidgetContainer").removeClass().addClass("vacationSearchWidgetContainerExpanded expadedContainer expandedTab_hotelCar"),$("#"+e+"ExpandedWidgetDiv").removeClass().addClass($("#hotelCarVacationSearchContainer div.toolTipErrorMessageContainer").html().length>0?"float-left expandedBorder expandedRoomTabError_hotelCar":"float-left expandedBorder expandedRoomTab_hotelCar")):"flightHotelTab"==c?($("#vacationSearchWidgetContainer").removeClass().addClass("vacationSearchWidgetContainerExpanded expadedContainer expandedTab"),$("#"+e+"ExpandedWidgetDiv").removeClass().addClass($("#flightHotelVacationSearchContainer div.toolTipErrorMessageContainer").html().length>0?"float-left expandedBorder expandedRoomTabError_flightHotel":"float-left expandedBorder expandedRoomTab")):($("#vacationSearchWidgetContainer").removeClass().addClass("vacationSearchWidgetContainerExpanded expadedContainer expandedTab"),$("#"+e+"ExpandedWidgetDiv").removeClass().addClass($("#flightCarVacationSearchContainer div.toolTipErrorMessageContainer").html().length>0?"float-left expandedBorder expandedRoomTabError_flightCar":"float-left expandedBorder expandedRoomTab")),i?($("#"+e+"ExpandedWidgetDiv #childCountRightContainer"+a+d).removeClass("childContainerClass").addClass("childContainerClass_recentSearches"),$("#"+e+"ExpandedWidgetDiv #roomGuestLeftContainer"+a+d).removeClass("roomGuestContainerClass").addClass("roomGuestContainerClass_recentSearches"),$("#"+e+"ExpandedWidgetDiv #childCountRightContainer"+a+d).css("height",$("#"+e+"ExpandedWidgetDiv").height()+59)):($("#"+e+"ExpandedWidgetDiv #childCountRightContainer"+a+d).removeClass("childContainerClass_recentSearches").addClass("childContainerClass"),$("#"+e+"ExpandedWidgetDiv #roomGuestLeftContainer"+a+d).removeClass("roomGuestContainerClass_recentSearches").addClass("roomGuestContainerClass"),$("#"+e+"ExpandedWidgetDiv #childCountRightContainer"+a+d).css("height",$("#"+e+"ExpandedWidgetDiv").height()+24))):($("#vacationSearchWidgetContainer").removeClass().addClass("vacationSearchWidgetContainerExpanded expadedContainer expandedTabLarger"),$("#"+e+"VacationSearchContainer").removeClass().addClass("float-left expandedBorder expandedSearchContainerLarger"),$("#"+e+"ExpandedWidgetDiv").removeClass().addClass("float-left expandedBorder expandedRoomTabLarger"),i?($("#"+e+"ExpandedWidgetDiv #childCountRightContainer"+a+d).removeClass("childContainerClass").addClass("childContainerClass_recentSearches"),$("#"+e+"ExpandedWidgetDiv #roomGuestLeftContainer"+a+d).removeClass("roomGuestContainerClass").addClass("roomGuestContainerClass_recentSearches"),$("#"+e+"ExpandedWidgetDiv #childCountRightContainer"+a+d).css("height",$("#"+e+"ExpandedWidgetDiv").height()+59)):($("#"+e+"ExpandedWidgetDiv #childCountRightContainer"+a+d).removeClass("childContainerClass_recentSearches").addClass("childContainerClass"),$("#"+e+"ExpandedWidgetDiv #roomGuestLeftContainer"+a+d).removeClass("roomGuestContainerClass_recentSearches").addClass("roomGuestContainerClass"),$("#"+e+"ExpandedWidgetDiv #childCountRightContainer"+a+d).css("height",$("#"+e+"ExpandedWidgetDiv").height()+24))):(delta.widgetnav.vacations.setErrorContainersHeight(e),i?($("#"+e+"ExpandedWidgetDiv #childCountRightContainer"+a+d).removeClass("childContainerClass").addClass("childContainerClass_recentSearches"),$("#"+e+"ExpandedWidgetDiv #roomGuestLeftContainer"+a+d).removeClass("roomGuestContainerClass").addClass("roomGuestContainerClass_recentSearches"),$("#"+e+"VacationExpandedSearchContainer #childCountRightContainer"+a+d).css("height",$("#"+e+"ExpandedWidgetDiv").height()+59)):($("#"+e+"ExpandedWidgetDiv #childCountRightContainer"+a+d).removeClass("childContainerClass_recentSearches").addClass("childContainerClass"),$("#"+e+"ExpandedWidgetDiv #roomGuestLeftContainer"+a+d).removeClass("roomGuestContainerClass_recentSearches").addClass("roomGuestContainerClass"),$("#"+e+"ExpandedWidgetDiv #childCountRightContainer"+a+d).css("height",$("#"+e+"ExpandedWidgetDiv").height()+24)))}else"none"==$("#vacations-"+e+"Search-errorMsg").css("display")?($("#"+e+"VacationSearchContainer").removeClass().addClass("float-left"),$("#vacationSearchWidgetContainer").removeClass().addClass("activeTab_"+e)):($("#"+e+"VacationSearchContainer").removeClass().addClass("float-left"),$("#vacationSearchWidgetContainer").removeClass().addClass("hotelCarTab"==c?"activeTabError_hotelCar":"activeTabError"))}},setErrorContainersHeight:function(a){var b="";b="_"+a,$("#"+a+"ExpandedWidgetDiv").removeClass().addClass("float-left expandedBorder expandedRoomTabError"+b),$("#vacationSearchWidgetContainer").removeClass().addClass("vacationSearchWidgetContainerExpanded expadedContainer expandedTabError"+b),$("#"+a+"VacationSearchContainer").removeClass().addClass("float-left expandedBorder searchContainerError"+b)},resetExpandedWidgetContainerHeight:function(){},saveRecentSearchesData:function(){var a=$("#vacationSearchWidgetContainer .vacations-pkg-tabs").find(".pkg-name.active").attr("id");"flightHotelTab"==a?delta.widgetnav.vacations.deltaVacations_saveMultipleFormEntries("vacationFlightHotelSearches",delta.widgetnav.vacations.flightHotel_FormatRecentSearchesData()):"flightCarTab"==a?delta.widgetnav.vacations.deltaVacations_saveMultipleFormEntries("vacationFlightCarSearches",delta.widgetnav.vacations.flightCar_FormatRecentSearchesData()):delta.widgetnav.vacations.deltaVacations_saveMultipleFormEntries("vacationHotelCarSearches",delta.widgetnav.vacations.hotelCar_FormatRecentSearchesData())},deltaVacations_saveMultipleFormEntries:function(a,b){try{if(prefillIsExisting(b)){var c=0,d=b.length,e="";for(c=0;d>c;c++){var f=b[c],g="";for(key in f){g=key;break}var h=f[g];c>0&&(e+="|"),e=e+g+"$"+JSON.stringify(h)}var i={prefillAttribute:a,prefillValue:e},j={callback:function(){},errorHandler:function(){},timeout:1e3};prefill.savePrefillData(i,j)}}catch(k){prefillError(k)}},flightHotel_FormatRecentSearchesData:function(){var a=($("#lifeStyleType").val()+"#"+$("#pkgType").val()+"#"+$("form#flightHotelSearchForm #fromAirport").val()+"#"+$("form#flightHotelSearchForm #toAirport").val()+"#"+$("form#flightHotelSearchForm #vacationsdepartureDate").val()).toUpperCase(),b=($("#lifeStyleType").val()+"#"+$("#pkgType").val()+"#"+$("form#flightHotelSearchForm #fromAirport").val()+"#"+$("form#flightHotelSearchForm #toAirport").val()+"#"+$("form#flightHotelSearchForm #vacationsdepartureDate").val()).toUpperCase(),c=parseInt($("form#flightHotelSearchForm #numberOfRooms").val()),d=$("form#flightHotelSearchForm #childCount").val(),e="",f={};if(c>1){e={searchText:b,searchValues:{lifestyleType:$("#lifeStyleType").val(),packageType:$("#pkgType").val(),from:$("form#flightHotelSearchForm #fromAirport").val().toUpperCase(),to:$("form#flightHotelSearchForm #toAirport").val().toUpperCase(),originAirportName:$("#originAirportName_flightHotel").val(),originCityName:$("#originCityName_flightHotel").val(),originCityCode:$("#originCityCode_flightHotel").val(),originStateCode:$("#originStateCode_flightHotel").val(),originCountryName:$("#originCountryName_flightHotel").val(),originCountryCode:$("#originCountryCode_flightHotel").val(),destAirportName:$("#destAirportName_flightHotel").val(),destCityName:$("#destCityName_flightHotel").val(),destCityCode:$("#destCityCode_flightHotel").val(),destStateCode:$("#destStateCode_flightHotel").val(),destCountryName:$("#destCountryName_flightHotel").val(),destCountryCode:$("#destCountryCode_flightHotel").val(),departureTime:"Anytime",departureDate:$("form#flightHotelSearchForm #vacationsdepartureDate").val(),returnDate:$("form#flightHotelSearchForm #vacationsreturnDate").val(),noOfAdults:$("form#flightHotelSearchForm #adultCount").val(),noOfChildren:$("form#flightHotelSearchForm #childCount").val(),noOfRooms:$("form#flightHotelSearchForm #numberOfRooms").val(),travelersInRoom:[c],pickupDate:"",dropOffDate:"",pickupTime:"",dropOffTime:""}},e.searchValues.travelersInRoom.push({});for(var g=1;c>=g;g++){var h=parseInt($("form#flightHotelSearchForm #hiddenAdultCount"+g).val()),i=[],j=parseInt($("form#flightHotelSearchForm #hiddenchildrenNumber"+g).val());if(j>0)for(var k=1;j>=k;k++){var l=parseInt($("form#flightHotelSearchForm #child_"+g+"_"+k+"Age").val());i.push(l)}e.searchValues.travelersInRoom[g-1]={adultsCount:h,children:{count:j,ages:i}}}}else if(d>0){var h=parseInt($("form#flightHotelSearchForm #hiddenAdultCount1").val()),j=parseInt($("form#flightHotelSearchForm #hiddenchildrenNumber1").val()),i=[];if(j>0)for(var k=1;j>=k;k++){var l=parseInt($("form#flightHotelSearchForm #child_1_"+k+"Age").val());i.push(l)}e={searchText:b,searchValues:{lifestyleType:$("#lifeStyleType").val(),packageType:$("#pkgType").val(),from:$("form#flightHotelSearchForm #fromAirport").val().toUpperCase(),to:$("form#flightHotelSearchForm #toAirport").val().toUpperCase(),originAirportName:$("#originAirportName_flightHotel").val(),originCityName:$("#originCityName_flightHotel").val(),originCityCode:$("#originCityCode_flightHotel").val(),originStateCode:$("#originStateCode_flightHotel").val(),originCountryName:$("#originCountryName_flightHotel").val(),originCountryCode:$("#originCountryCode_flightHotel").val(),destAirportName:$("#destAirportName_flightHotel").val(),destCityName:$("#destCityName_flightHotel").val(),destCityCode:$("#destCityCode_flightHotel").val(),destStateCode:$("#destStateCode_flightHotel").val(),destCountryName:$("#destCountryName_flightHotel").val(),destCountryCode:$("#destCountryCode_flightHotel").val(),departureTime:"Anytime",departureDate:$("form#flightHotelSearchForm #vacationsdepartureDate").val(),returnDate:$("form#flightHotelSearchForm #vacationsreturnDate").val(),noOfAdults:$("form#flightHotelSearchForm #adultCount").val(),noOfChildren:$("form#flightHotelSearchForm #childCount").val(),noOfRooms:$("form#flightHotelSearchForm #numberOfRooms").val(),travelersInRoom:[{adultsCount:h,children:{count:j,ages:i}}],pickupDate:"",dropOffDate:"",pickupTime:"",dropOffTime:""}}}else e={searchText:b,searchValues:{lifestyleType:$("#lifeStyleType").val(),packageType:$("#pkgType").val(),from:$("form#flightHotelSearchForm #fromAirport").val().toUpperCase(),to:$("form#flightHotelSearchForm #toAirport").val().toUpperCase(),originAirportName:$("#originAirportName_flightHotel").val(),originCityName:$("#originCityName_flightHotel").val(),originCityCode:$("#originCityCode_flightHotel").val(),originStateCode:$("#originStateCode_flightHotel").val(),originCountryName:$("#originCountryName_flightHotel").val(),originCountryCode:$("#originCountryCode_flightHotel").val(),destAirportName:$("#destAirportName_flightHotel").val(),destCityName:$("#destCityName_flightHotel").val(),destCityCode:$("#destCityCode_flightHotel").val(),destStateCode:$("#destStateCode_flightHotel").val(),destCountryName:$("#destCountryName_flightHotel").val(),destCountryCode:$("#destCountryCode_flightHotel").val(),departureTime:"Anytime",departureDate:$("form#flightHotelSearchForm #vacationsdepartureDate").val(),returnDate:$("form#flightHotelSearchForm #vacationsreturnDate").val(),noOfAdults:$("form#flightHotelSearchForm #adultCount").val(),noOfChildren:$("form#flightHotelSearchForm #childCount").val(),noOfRooms:$("form#flightHotelSearchForm #numberOfRooms").val(),travelersInRoom:[],pickupDate:"",dropOffDate:"",pickupTime:"",dropOffTime:""}};return f[a]=e,delta.widgetnav.vacations.updateSavedRecentSearchesData(f,a)},updateSavedRecentSearchesData:function(a,b){var c=[];if(null==delta.widgetnav.vacations.fetchedRecentSearchesData||0==delta.widgetnav.vacations.fetchedRecentSearchesData.length)return c.push(a),c;var d=delta.widgetnav.vacations.fetchedRecentSearchesData;if(3==d.length){for(var e=!1,f=0;f<d.length;f++){var g=d[f];for(key in g)if(key==b){if(e=!0,0==f)return c.push(d[1]),c.push(d[2]),c.push(a),c;if(1==f)return c.push(d[0]),c.push(d[2]),c.push(a),c;if(2==f)return c.push(d[0]),c.push(d[1]),c.push(a),c}}if(!e)return c.push(d[1]),c.push(d[2]),c.push(a),c}else if(2==d.length){for(var e=!1,f=0;f<d.length&&!e;f++){var g=d[f];for(key in g)if(key==b){if(e=!0,0==f)return c.push(d[1]),c.push(a),c;if(1==f)return c.push(d[0]),c.push(a),c}}if(!e)return c.push(d[0]),c.push(d[1]),c.push(a),c}else{var g=d[0];for(key in g)return key==b?(c.push(a),c):(c.push(g),c.push(a),c)}},flightCar_FormatRecentSearchesData:function(){var a=($("#lifeStyleType").val()+"#"+$("#pkgType_flightCar").val()+"#"+$("form#flightCarSearchForm #flightCarFromAirport").val()+"#"+$("form#flightCarSearchForm #flightCarToAirport").val()+"#"+$("form#flightCarSearchForm #flightCarVacationsdepartureDate").val()).toUpperCase(),b=($("#lifeStyleType").val()+"#"+$("#pkgType_flightCar").val()+"#"+$("form#flightCarSearchForm #flightCarFromAirport").val()+"#"+$("form#flightCarSearchForm #flightCarToAirport").val()+"#"+$("form#flightCarSearchForm #flightCarVacationsdepartureDate").val()).toUpperCase(),c=$("form#flightCarSearchForm #flightCarChildCount").val(),d="",e={};if(c>0){var f=parseInt($("form#flightCarSearchForm #hiddenAdultCount1_flightCar").val()),g=parseInt($("form#flightCarSearchForm #hiddenchildrenNumber1_flightCar").val()),h=[];if(g>0)for(var i=1;g>=i;i++){var j=parseInt($("form#flightCarSearchForm #child_1_"+i+"Age_flightCar").val());h.push(j)}d={searchText:b,searchValues:{lifestyleType:$("#lifeStyleType").val(),packageType:$("#pkgType_flightCar").val(),from:$("form#flightCarSearchForm #flightCarFromAirport").val().toUpperCase(),to:$("form#flightCarSearchForm #flightCarToAirport").val().toUpperCase(),originAirportName:$("#originAirportName_flightCar").val(),originCityName:$("#originCityName_flightCar").val(),originCityCode:$("#originCityCode_flightCar").val(),originStateCode:$("#originStateCode_flightCar").val(),originCountryName:$("#originCountryName_flightCar").val(),originCountryCode:$("#originCountryCode_flightCar").val(),destAirportName:$("#destAirportName_flightCar").val(),destCityName:$("#destCityName_flightCar").val(),destCityCode:$("#destCityCode_flightCar").val(),destStateCode:$("#destStateCode_flightCar").val(),destCountryName:$("#destCountryName_flightCar").val(),destCountryCode:$("#destCountryCode_flightCar").val(),departureTime:"Anytime",departureDate:$("form#flightCarSearchForm #flightCarVacationsdepartureDate").val(),returnDate:$("form#flightCarSearchForm #flightCarVacationsreturnDate").val(),noOfAdults:$("form#flightCarSearchForm #flightCarAdultCount").val(),noOfChildren:$("form#flightCarSearchForm #flightCarChildCount").val(),noOfRooms:"0",travelersInRoom:[{adultsCount:f,children:{count:g,ages:h}}],pickupDate:"",dropOffDate:"",pickupTime:"",dropOffTime:""}}}else d={searchText:b,searchValues:{lifestyleType:$("#lifeStyleType").val(),packageType:$("#pkgType_flightCar").val(),from:$("form#flightCarSearchForm #flightCarFromAirport").val().toUpperCase(),to:$("form#flightCarSearchForm #flightCarToAirport").val().toUpperCase(),originAirportName:$("#originAirportName_flightCar").val(),originCityName:$("#originCityName_flightCar").val(),originCityCode:$("#originCityCode_flightCar").val(),originStateCode:$("#originStateCode_flightCar").val(),originCountryName:$("#originCountryName_flightCar").val(),originCountryCode:$("#originCountryCode_flightCar").val(),destAirportName:$("#destAirportName_flightCar").val(),destCityName:$("#destCityName_flightCar").val(),destCityCode:$("#destCityCode_flightCar").val(),destStateCode:$("#destStateCode_flightCar").val(),destCountryName:$("#destCountryName_flightCar").val(),destCountryCode:$("#destCountryCode_flightCar").val(),departureTime:"Anytime",departureDate:$("form#flightCarSearchForm #flightCarVacationsdepartureDate").val(),returnDate:$("form#flightCarSearchForm #flightCarVacationsreturnDate").val(),noOfAdults:$("form#flightCarSearchForm #flightCarAdultCount").val(),noOfChildren:$("form#flightCarSearchForm #flightCarChildCount").val(),noOfRooms:"0",travelersInRoom:[],pickupDate:"",dropOffDate:"",pickupTime:"",dropOffTime:""}};return e[a]=d,delta.widgetnav.vacations.updateSavedRecentSearchesData(e,a)},hotelCar_FormatRecentSearchesData:function(){var a=($("#lifeStyleType").val()+"#"+$("#pkgType_hotelCar").val()+"#"+$("form#hotelCarSearchForm #vacationHotelLocation").val()+"#"+$("form#hotelCarSearchForm #hotelCheckInDate").val()).toUpperCase(),b=($("#lifeStyleType").val()+"#"+$("#pkgType_hotelCar").val()+"#"+$("form#hotelCarSearchForm #vacationHotelLocation").val()+"#"+$("form#hotelCarSearchForm #hotelCheckInDate").val()).toUpperCase(),c=parseInt($("form#hotelCarSearchForm #hotelNumberOfRooms").val()),d=$("form#hotelCarSearchForm #travelerChildCount").val(),e="",f={};if(c>1){e={searchText:b,searchValues:{lifestyleType:$("#lifeStyleType").val(),packageType:$("#pkgType_hotelCar").val(),from:"",to:$("form#hotelCarSearchForm #vacationHotelLocation").val().toUpperCase(),destAirportName:$("#destAirportName_hotelCar").val(),destCityName:$("#destCityName_hotelCar").val(),destCityCode:$("#destCityCode_hotelCar").val(),destStateCode:$("#destStateCode_hotelCar").val(),destCountryName:$("#destCountryName_hotelCar").val(),destCountryCode:$("#destCountryCode_hotelCar").val(),departureTime:"Anytime",departureDate:$("form#hotelCarSearchForm #hotelCheckInDate").val(),returnDate:$("form#hotelCarSearchForm #hotelCheckOutDate").val(),noOfAdults:$("form#hotelCarSearchForm #travelerAdultCount").val(),noOfChildren:$("form#hotelCarSearchForm #travelerChildCount").val(),noOfRooms:$("form#hotelCarSearchForm #hotelNumberOfRooms").val(),travelersInRoom:[c],pickupDate:$("form#hotelCarSearchForm #hotelCheckInDate").val(),dropOffDate:$("form#hotelCarSearchForm #hotelCheckOutDate").val(),pickupTime:"1:00",dropOffTime:"1:00"}},e.searchValues.travelersInRoom.push({});for(var g=1;c>=g;g++){var h=parseInt($("form#hotelCarSearchForm #hiddenAdultCount"+g+"_hotelCar").val()),i=[],j=parseInt($("form#hotelCarSearchForm #hiddenchildrenNumber"+g+"_hotelCar").val());if(j>0)for(var k=1;j>=k;k++){var l=parseInt($("form#hotelCarSearchForm #child_"+g+"_"+k+"Age_hotelCar").val());i.push(l)}e.searchValues.travelersInRoom[g-1]={adultsCount:h,children:{count:j,ages:i}}}}else if(d>0){var h=parseInt($("form#hotelCarSearchForm #hiddenAdultCount1_hotelCar").val()),j=parseInt($("form#hotelCarSearchForm #hiddenchildrenNumber1_hotelCar").val()),i=[];if(j>0)for(var k=1;j>=k;k++){var l=parseInt($("form#hotelCarSearchForm #child_1_"+k+"Age_hotelCar").val());i.push(l)}e={searchText:b,searchValues:{lifestyleType:$("#lifeStyleType").val(),packageType:$("#pkgType_hotelCar").val(),from:"",to:$("form#hotelCarSearchForm #vacationHotelLocation").val().toUpperCase(),destAirportName:$("#destAirportName_hotelCar").val(),destCityName:$("#destCityName_hotelCar").val(),destCityCode:$("#destCityCode_hotelCar").val(),destStateCode:$("#destStateCode_hotelCar").val(),destCountryName:$("#destCountryName_hotelCar").val(),destCountryCode:$("#destCountryCode_hotelCar").val(),departureTime:"Anytime",departureDate:$("form#hotelCarSearchForm #hotelCheckInDate").val(),returnDate:$("form#hotelCarSearchForm #hotelCheckOutDate").val(),noOfAdults:$("form#hotelCarSearchForm #travelerAdultCount").val(),noOfChildren:$("form#hotelCarSearchForm #travelerChildCount").val(),noOfRooms:$("form#hotelCarSearchForm #hotelNumberOfRooms").val(),travelersInRoom:[{adultsCount:h,children:{count:j,ages:i}}],pickupDate:$("form#hotelCarSearchForm #hotelCheckInDate").val(),dropOffDate:$("form#hotelCarSearchForm #hotelCheckOutDate").val(),pickupTime:"1:00",dropOffTime:"1:00"}}}else e={searchText:b,searchValues:{lifestyleType:$("#lifeStyleType").val(),packageType:$("#pkgType_hotelCar").val(),from:"",to:$("form#hotelCarSearchForm #vacationHotelLocation").val().toUpperCase(),destAirportName:$("#destAirportName_hotelCar").val(),destCityName:$("#destCityName_hotelCar").val(),destCityCode:$("#destCityCode_hotelCar").val(),destStateCode:$("#destStateCode_hotelCar").val(),destCountryName:$("#destCountryName_hotelCar").val(),destCountryCode:$("#destCountryCode_hotelCar").val(),departureTime:"Anytime",departureDate:$("form#hotelCarSearchForm #hotelCheckInDate").val(),returnDate:$("form#hotelCarSearchForm #hotelCheckOutDate").val(),
noOfAdults:$("form#hotelCarSearchForm #travelerAdultCount").val(),noOfChildren:$("form#hotelCarSearchForm #travelerChildCount").val(),noOfRooms:$("form#hotelCarSearchForm #hotelNumberOfRooms").val(),travelersInRoom:[],pickupDate:$("form#hotelCarSearchForm #hotelCheckInDate").val(),dropOffDate:$("form#hotelCarSearchForm #hotelCheckOutDate").val(),pickupTime:"1:00",dropOffTime:"1:00"}};return f[a]=e,delta.widgetnav.vacations.updateSavedRecentSearchesData(f,a)},storeRecentSearches:function(a){var b="",c=delta.widgetnav.vacations.recreateRecentSearches(a);if(void 0!=c&&null!=c&&""!=c){delta.widgetnav.vacations.fetchedRecentSearchesData=c,delta.widgetnav.vacations.recentSearchesStored=!0,$("ul#vacationsRecentSearch_list").html("");var d=$("#vacationSearchWidgetContainer .vacations-pkg-tabs").find(".pkg-name.active").attr("id");if("flightHotelTab"==d){for(var e=0;e<c.length;e++){var f=c[e];for(key in f)if(-1!=key.indexOf("AIR_HOTEL")){b=key;break}}void 0!=b&&""!=b?($("#vacationsRecentSearchContainer").show(),$("#vacationsRecentCont").show(),delta.widgetnav.vacations.isRecentSearches_flightHotel=!0,$(".vacations-pkg-tabs").removeClass("topPosition")):($("#vacationsRecentSearchContainer").hide(),$("#vacationsRecentCont").hide(),$(".vacations-pkg-tabs").addClass("topPosition"))}else if("flightCarTab"==d){for(var e=0;e<c.length;e++){var f=c[e];for(key in f)if(-1!=key.indexOf("FLIGHT_CAR")){b=key;break}}void 0!=b&&""!=b?($("#vacationsRecentSearchContainer").show(),$("#vacationsRecentCont").show(),delta.widgetnav.vacations.isRecentSearches_flightCar=!0,$(".vacations-pkg-tabs").removeClass("topPosition")):($("#vacationsRecentSearchContainer").hide(),$("#vacationsRecentCont").hide(),$(".vacations-pkg-tabs").addClass("topPosition"))}else{for(var e=0;e<c.length;e++){var f=c[e];for(key in f)if(-1!=key.indexOf("HOTEL_CAR")){b=key;break}}void 0!=b&&""!=b?($("#vacationsRecentSearchContainer").show(),$("#vacationsRecentCont").show(),delta.widgetnav.vacations.isRecentSearches_hotelCar=!0,$(".vacations-pkg-tabs").removeClass("topPosition")):($("#vacationsRecentSearchContainer").hide(),$("#vacationsRecentCont").hide(),$(".vacations-pkg-tabs").addClass("topPosition"))}}else $("ul#vacationsRecentSearch_list").html(""),$("#vacationsRecentSearchContainer").hide(),$("#vacationsRecentCont").hide(),$(".vacations-pkg-tabs").removeClass("topPosition").addClass("topPosition");delta.navwidget.isDockedState()?resizeVacationsWidget.resize():delta.navwidget.adjustWidgetHeight("booking")},recreateRecentSearches:function(a){var b=[];if(void 0!=a&&null!=a&&""!=a){var c=a.split("|");if(c.length>0)for(var d=0;d<c.length;d++){var e=c[d];if(void 0!=e&&null!=e&&""!=e){var f=e.split("$");if(2==f.length){var g={},h=f[0],i=f[1];g[h]=jQuery.parseJSON(i),b.push(g)}}}}return b},populateSearchCriteria:function(a){var b=null;delta.widgetnav.vacations.recentSearchesStored?b=delta.widgetnav.vacations.fetchedRecentSearchesData:(delta.widgetnav.vacations.loadRecentSearches(a),b=delta.widgetnav.vacations.fetchedRecentSearchesData),$("ul#vacationsRecentSearch_list").html("");var c=$("#vacationSearchWidgetContainer .vacations-pkg-tabs").find(".pkg-name.active").attr("id");"flightHotelTab"==c?delta.widgetnav.vacations.flightHotel_PopulateSearchCriteria(b):"flightCarTab"==c?delta.widgetnav.vacations.flightCar_PopulateSearchCriteria(b):delta.widgetnav.vacations.hotelCar_PopulateSearchCriteria(b)},flightHotel_PopulateSearchCriteria:function(a){if(void 0!=a&&null!=a&&""!=a){$("#flightHotelRecentSearches").val(a);var b="";flightHotelRecentSearchMap=new Object;for(var c=0;c<a.length;c++){var d=a[c];for(key in d){var e=d[key];if(-1!=key.indexOf("AIR_HOTEL")){var f=e.searchValues,g=new Date(f.departureDate),h=month_names[g.getMonth()]+" "+g.getDate(),i=new Date(f.returnDate),j=month_names[i.getMonth()]+" "+i.getDate();flightHotelRecentSearchMap[key]=e,b=b+"<li class='vacationsRecentInput' id='"+e.searchText+"' > "+f.from+" to "+f.to+", "+h+" - "+j+"</li>"}}}$("ul#vacationsRecentSearch_list").html(b)}},flightCar_PopulateSearchCriteria:function(a){if(void 0!=a&&null!=a&&""!=a){$("#flightCarRecentSearches").val(a);var b="";flightCarRecentSearchMap=new Object;for(var c=0;c<a.length;c++){var d=a[c];for(key in d){var e=d[key];if(-1!=key.indexOf("FLIGHT_CAR")){var f=e.searchValues,g=new Date(f.departureDate),h=month_names[g.getMonth()]+" "+g.getDate(),i=new Date(f.returnDate),j=month_names[i.getMonth()]+" "+i.getDate();flightCarRecentSearchMap[key]=e,b=b+"<li class='vacationsRecentInput' id='"+e.searchText+"' > "+f.from+" to "+f.to+", "+h+" - "+j+"</li>"}}}$("ul#vacationsRecentSearch_list").html(b)}},hotelCar_PopulateSearchCriteria:function(a){if(void 0!=a&&null!=a&&""!=a){$("#hotelCarRecentSearches").val(a);var b="";hotelCarRecentSearchMap=new Object;for(var c=0;c<a.length;c++){var d=a[c];for(key in d){var e=d[key];if(-1!=key.indexOf("HOTEL_CAR")){var f=e.searchValues,g=new Date(f.departureDate),h=month_names[g.getMonth()]+" "+g.getDate(),i=new Date(f.returnDate),j=month_names[i.getMonth()]+" "+i.getDate();hotelCarRecentSearchMap[key]=e,b=b+"<li class='vacationsRecentInput' id='"+e.searchText+"' > "+f.to+" , "+h+" - "+j+"</li>"}}}$("ul#vacationsRecentSearch_list").html(b)}},expandFlightHotelWidget:function(){$("#widget-booking").addClass("expandedWidgetContainer"),$("#delta-vacations-expanded-tabs").show(),$("#book-delta-vacations-content-tab").addClass("book-delta-vacations-content-tab-expanded"),$("#book-tabs").addClass("float-left"),$("#delta-vacations-expanded-tabs").addClass("ui-tabs ui-widget ui-widget-content ui-corner-all"),$("#book-delta-vacations-content #vacationSearchWidgetContainer").addClass("vacationSearchWidgetContainerExpanded"),$("#book-delta-vacations-content #vacationSearchWidgetContainer #seperatorForExpand").show(),$("#book-delta-vacations-content #vacationSearchWidgetContainer #flightHotelVacationSearchContainer #advancedSearch").hide(),$("#book-delta-vacations-content #vacationSearchWidgetContainer #flightHotelVacationSearchContainer #vacationsSubmit").hide(),$("#vacationSearchWidgetContainer").addClass("expadedContainer"),$("#flightHotelVacationExpandedSearchContainer").show(),$("#flightHotelExpandedWidgetDiv").addClass("expandedBorder"),$("#flightHotelVacationSearchContainer").addClass("expandedBorder")},expandFlightCarWidget:function(){$("#widget-booking").addClass("expandedWidgetContainer"),$("#delta-vacations-expanded-tabs").show(),$("#book-delta-vacations-content-tab").addClass("book-delta-vacations-content-tab-expanded"),$("#book-tabs").addClass("float-left"),$("#delta-vacations-expanded-tabs").addClass("ui-tabs ui-widget ui-widget-content ui-corner-all"),$("#book-delta-vacations-content #vacationSearchWidgetContainer").addClass("vacationSearchWidgetContainerExpanded"),$("#book-delta-vacations-content #vacationSearchWidgetContainer #seperatorForExpand").show(),$("#book-delta-vacations-content #vacationSearchWidgetContainer #flightCarVacationSearchContainer #flightCarAdvancedSearch").hide(),$("#book-delta-vacations-content #vacationSearchWidgetContainer #flightCarVacationSearchContainer #flightCarVacationsSubmit").hide(),$("#vacationSearchWidgetContainer").addClass("expadedContainer"),$("#flightCarVacationExpandedSearchContainer").show(),$("#flightCarExpandedWidgetDiv").addClass("expandedBorder"),$("#flightCarVacationSearchContainer").addClass("expandedBorder")},expandHotelCarWidget:function(){$("#widget-booking").addClass("expandedWidgetContainer"),$("#delta-vacations-expanded-tabs").show(),$("#book-delta-vacations-content-tab").addClass("book-delta-vacations-content-tab-expanded"),$("#book-tabs").addClass("float-left"),$("#delta-vacations-expanded-tabs").addClass("ui-tabs ui-widget ui-widget-content ui-corner-all"),$("#book-delta-vacations-content #vacationSearchWidgetContainer").addClass("vacationSearchWidgetContainerExpanded"),$("#book-delta-vacations-content #vacationSearchWidgetContainer #seperatorForExpand").show(),$("#book-delta-vacations-content #vacationSearchWidgetContainer #hotelCarVacationSearchContainer #hotelCarAdvancedSearch").hide(),$("#book-delta-vacations-content #vacationSearchWidgetContainer #hotelCarVacationSearchContainer #hotelCarVacationsSubmit").hide(),$("#vacationSearchWidgetContainer").addClass("expadedContainer"),$("#hotelCarVacationExpandedSearchContainer").show(),$("#hotelCarExpandedWidgetDiv").addClass("expandedBorder"),$("#hotelCarVacationSearchContainer").addClass("expandedBorder")},collapseFlightHotelWidget:function(){$("#widget-booking").removeClass("expandedWidgetContainer"),$("#delta-vacations-expanded-tabs").hide(),$("#book-delta-vacations-content-tab").removeClass("book-delta-vacations-content-tab-expanded"),$("#book-tabs").removeClass("float-left"),$("#book-delta-vacations-content #vacationSearchWidgetContainer").removeClass("vacationSearchWidgetContainerExpanded"),$("#book-delta-vacations-content #vacationSearchWidgetContainer #seperatorForExpand").hide(),$("#book-delta-vacations-content #vacationSearchWidgetContainer #flightHotelVacationSearchContainer .advancedSearch").show(),$("#book-delta-vacations-content #vacationSearchWidgetContainer #vacationsSubmit").show(),$("#flightHotelVacationExpandedSearchContainer").hide(),$("#flightHotelExpandedWidgetDiv").removeClass("expandedBorder"),$("#flightHotelVacationSearchContainer").removeClass("expandedBorder")},collapseFlightCarWidget:function(){$("#widget-booking").removeClass("expandedWidgetContainer"),$("#delta-vacations-expanded-tabs").hide(),$("#book-delta-vacations-content-tab").removeClass("book-delta-vacations-content-tab-expanded"),$("#book-tabs").removeClass("float-left"),$("#book-delta-vacations-content #vacationSearchWidgetContainer").removeClass("vacationSearchWidgetContainerExpanded"),$("#book-delta-vacations-content #vacationSearchWidgetContainer #seperatorForExpand").hide(),$("#book-delta-vacations-content #vacationSearchWidgetContainer #flightCarVacationSearchContainer .advancedSearch").show(),$("#book-delta-vacations-content #vacationSearchWidgetContainer #flightCarVacationsSubmit").show(),$("#flightCarVacationExpandedSearchContainer").hide(),$("#flightCarExpandedWidgetDiv").removeClass("expandedBorder"),$("#flightCarVacationSearchContainer").removeClass("expandedBorder")},collapseHotelCarWidget:function(){$("#widget-booking").removeClass("expandedWidgetContainer"),$("#delta-vacations-expanded-tabs").hide(),$("#book-delta-vacations-content-tab").removeClass("book-delta-vacations-content-tab-expanded"),$("#book-tabs").removeClass("float-left"),$("#book-delta-vacations-content #vacationSearchWidgetContainer").removeClass("vacationSearchWidgetContainerExpanded"),$("#book-delta-vacations-content #vacationSearchWidgetContainer #seperatorForExpand").hide(),$("#book-delta-vacations-content #vacationSearchWidgetContainer #hotelCarAdvancedSearch").show(),$("#book-delta-vacations-content #vacationSearchWidgetContainer #hotelCarVacationsSubmit").show(),$("#HotelCarVacationExpandedSearchContainer").hide(),$("#hotelCarExpandedWidgetDiv").removeClass("expandedBorder"),$("#hotelCarVacationSearchContainer").removeClass("expandedBorder")},resetRoomTabs:function(){for(var a=1;4>=a;a++)$("#delta-vacations-expanded-tabs ul li a#vacationsRoom"+a).parent().show(),$("#delta-vacations-expanded-tabs ul li a#vacationsRoom"+a).parent().removeClass("lastVacationsRoomTab")},setEachRoomTabWidth:function(){var a=$("#delta-vacations-expanded-tabs").width(),b=4,c=(a-1-(b-1))/b;$("#delta-vacations-expanded-tabs ul li").css("width",c+"px"),$("#delta-vacations-expanded-tabs ul li a.vacationRooms").css("width",c+"px")},hideRoomTabs:function(a){for(var b=parseInt(a)+1;4>=b;b++)$("#delta-vacations-expanded-tabs ul li a#vacationsRoom"+b).parent().hide();$("#delta-vacations-expanded-tabs ul li a#vacationsRoom"+a).parent().addClass("lastVacationsRoomTab")},showExpandedTabName:function(){for(var a=1;4>=a;a++)$("#delta-vacations-expanded-tabs ul li a#vacationsRoom"+a).parent().show();$("#delta-vacations-expanded-tabs ul").removeClass("noRoomExpandedTab")},hideExpandedTabName:function(){for(var a=1;4>=a;a++)$("#delta-vacations-expanded-tabs ul li a#vacationsRoom"+a).parent().hide();$("#delta-vacations-expanded-tabs ul").addClass("noRoomExpandedTab")},hideRemovedRoomDetails:function(a,b,c){for(var d=parseInt(a)+1;4>=d;d++){$(b+"#hiddenAdultCount"+d+c).val("1");var e=$(b+"#hiddenchildrenNumber"+d+c).val();$(b+"#hiddenchildrenNumber"+d+c).val("0");for(var f=1;e>=f;f++)$(b+"#child_"+d+"_"+f+"AgeDiv"+c).hide(),$(b+"#child_"+d+"_"+f+"AgeDiv"+c).removeClass("childSeatOtpionHidden"),$(b+"#child_"+d+"_"+f+"Age"+c).val("1"),""==c&&($(b+"#inLapOption_"+d+"_"+f).removeClass("seatOptionUnSelected"),$(b+"#inLapOption_"+d+"_"+f).addClass("seatOptionSelected"),$(b+"#inSeatOption_"+d+"_"+f).addClass("seatOptionUnSelected"),$(b+"#inSeatOption_"+d+"_"+f).removeClass("seatOptionSelected"));$(b+"#roomGuestLeftContainer"+d+c).hide(),$(b+"#childCountRightContainer"+d+c).hide()}},promoCodeDataChangeEvent:function(){$("#promoCode").autocomplete({promoCode:"promoCode",smNumber:"skyMilesNumber",source:delta.widgetnav.vacations.promoCodeComplete}),$("#promoCode").keyup(function(a){if(8==a.keyCode||46==a.keyCode){var b="skyMilesNumber",c=this.value,d=this.id;delta.widgetnav.vacations.smNumberDisplay(c,d,b)}})},flightCar_promoCodeDataChangeEvent:function(){$("#flightCarPromoCode").autocomplete({promoCode:"flightCarPromoCode",smNumber:"flightCarSkyMilesNumber",source:delta.widgetnav.vacations.promoCodeComplete}),$("#flightCarPromoCode").keyup(function(a){if(8==a.keyCode||46==a.keyCode){var b="flightCarSkyMilesNumber",c=this.value,d=this.id;delta.widgetnav.vacations.smNumberDisplay(c,d,b)}})},hotelCar_promoCodeDataChangeEvent:function(){$("#hotelCarPromoCode").autocomplete({promoCode:"hotelCarPromoCode",smNumber:"hotelCarSkyMilesNumber",source:delta.widgetnav.vacations.promoCodeComplete}),$("#hotelCarPromoCode").keyup(function(a){if(8==a.keyCode||46==a.keyCode){var b="hotelCarSkyMilesNumber",c=this.value,d=this.id;delta.widgetnav.vacations.smNumberDisplay(c,d,b)}})},setVacationsFormValidations:function(){jQuery.validator.addClassRules("childAgeSelect",{vac_eachChildAge:["01016"]}),jQuery.validator.addClassRules("hiddenAdultCount",{vac_eachRoomMinAdultCount:["01015"]}),$("#flightHotelSearchForm").validate(widgetVacationSearchValidation_FlightHotel.validatorConfig),delta.widgetnav.vacations.submitHandler_FlightHotel(),$("#flightCarSearchForm").validate(widgetVacationSearchValidation_FlightCar.validatorConfig),delta.widgetnav.vacations.submitHandler_FlightCar(),$("#hotelCarSearchForm").validate(widgetVacationSearchValidation_HotelCar.validatorConfig),delta.widgetnav.vacations.submitHandler_HotelCar()},vacationsFormatDate:function(a){var b=a.split("/"),c=("0"+b[0]).slice(-2),a=("0"+b[1]).slice(-2);return c+"/"+a+"/"+b[2]},submitHandler_FlightHotel:function(){$("#vacationsSubmit,#vacationsSubmitExpanded").on("click",function(){var a=widgetVacationSearchValidation_FlightHotel.validateForm();if(a){if(0==$("#childCount").val()&&1==$("#numberOfRooms").val()){var b={AdultCount:$("#adultCount").val()};$("#flightHotelExpandedWidgetDiv").html($("#flightHotelExpandedWidgetDiv").html()+$("#flightHotelRoomDefaultTemplate").render(b))}$("#fromAirport").val($("#fromAirport").val().toUpperCase()),$("#toAirport").val($("#toAirport").val().toUpperCase()),$("#vacationsdepartureDate").val(delta.widgetnav.vacations.vacationsFormatDate($("#vacationsdepartureDate").val())),$("#vacationsreturnDate").val(delta.widgetnav.vacations.vacationsFormatDate($("#vacationsreturnDate").val())),delta.widgetnav.vacations.saveRecentSearchesData();var c=window.location.hostname,d="";d="https://"+c+"/vacations/loadResults.action",$("#flightHotelSearchForm").attr("action",d),setTimeout(function(){delta.widgetnav.vacations.submitDelayedForm(flightHotelSearchForm)},delta.widgetnav.vacations.delayForFormSubmission)}else if($("#childCount").val()>0||$("#numberOfRooms").val()>1){var e=parseInt($("#delta-vacations-expanded-tabs ul li.ui-state-active a")[0].id.replace("vacationsRoom",""));delta.widgetnav.vacations.setExpandedWidgetContainerHeight(e)}})},submitHandler_FlightCar:function(){$("#flightCarVacationsSubmit,#flightCarVacationsSubmitExpanded").on("click",function(){var a=widgetVacationSearchValidation_FlightCar.validateForm();if(a){if(0==$("#flightCarChildCount").val()){var b={AdultCount:$("#flightCarAdultCount").val()};$("#flightCarExpandedWidgetDiv").html($("#flightCarExpandedWidgetDiv").html()+$("#flightCarRoomDefaultTemplate").render(b))}$("#flightCarFromAirport").val($("#flightCarFromAirport").val().toUpperCase()),$("#flightCarToAirport").val($("#flightCarToAirport").val().toUpperCase()),$("#flightCarVacationsdepartureDate").val(delta.widgetnav.vacations.vacationsFormatDate($("#flightCarVacationsdepartureDate").val())),$("#flightCarVacationsreturnDate").val(delta.widgetnav.vacations.vacationsFormatDate($("#flightCarVacationsreturnDate").val())),delta.widgetnav.vacations.saveRecentSearchesData();var c=window.location.hostname,d="";d="https://"+c+"/vacations/loadResults.action",$("#flightCarSearchForm").attr("action",d),setTimeout(function(){delta.widgetnav.vacations.submitDelayedForm(flightCarSearchForm)},delta.widgetnav.vacations.delayForFormSubmission)}else $("#flightCarChildCount").val()>0&&delta.widgetnav.vacations.setExpandedWidgetContainerHeight("1")})},submitHandler_HotelCar:function(){$("#hotelCarVacationsSubmit,#hotelCarVacationsSubmitExpanded").on("click",function(){var a=widgetVacationSearchValidation_HotelCar.validateForm();if(a){if($("#carPickDateTxt").val($("#hotelCheckInDate").val()),$("#carDropDateTxt").val($("#hotelCheckOutDate").val()),0==$("#travelerChildCount").val()&&1==$("#hotelNumberOfRooms").val()){var b={AdultCount:$("#travelerAdultCount").val()};$("#hotelCarExpandedWidgetDiv").html($("#hotelCarExpandedWidgetDiv").html()+$("#hotelCarRoomDefaultTemplate").render(b))}$("#vacationHotelLocation").val($("#vacationHotelLocation").val().toUpperCase()),$("#hotelCheckInDate").val(delta.widgetnav.vacations.vacationsFormatDate($("#hotelCheckInDate").val())),$("#hotelCheckOutDate").val(delta.widgetnav.vacations.vacationsFormatDate($("#hotelCheckOutDate").val())),delta.widgetnav.vacations.saveRecentSearchesData();var c=window.location.hostname,d="";d="https://"+c+"/vacations/loadResults.action",$("#hotelCarSearchForm").attr("action",d),setTimeout(function(){delta.widgetnav.vacations.submitDelayedForm(hotelCarSearchForm)},delta.widgetnav.vacations.delayForFormSubmission)}else if($("#travelerChildCount").val()>0||$("#hotelNumberOfRooms").val()>1){var e=parseInt($("#delta-vacations-expanded-tabs ul li.ui-state-active a")[0].id.replace("vacationsRoom",""));delta.widgetnav.vacations.setExpandedWidgetContainerHeight(e)}})},renderVacationsRecentSearches:function(){$(document).off("click",".vacations-recent-search-arrow").on("click",".vacations-recent-search-arrow",function(){"none"==$("#vacationsRecentSearchesBox").css("display")?(delta.widgetnav.vacations.populateSearchCriteria("vacationFlightHotelSearches"),delta.widgetnav.vacations.hidePopups(),$("#vacationsRecentSearchesBox").slideDown(300,function(){}),$("#vacartionsRecentSearchArrow").css({"border-bottom-color":"#fff","background-color":"#fff"}),delta.widgetnav.vacations.showSearch(),$(window).scroll(function(){delta.widgetnav.vacations.hideSearchDiv()})):($("#vacationsRecentSearchesBox").slideUp(300),$("#vacartionsRecentSearchArrow").css({"border-bottom-color":"#acadad","background-color":"transparent"}))})},vacationsSelectRecentSearch:function(){$(document).on("click","li.vacationsRecentInput",function(){var a=this.id;-1!=a.indexOf("AIR_HOTEL")?delta.widgetnav.vacations.flightHotel_RecentSearchSelection(a):-1!=a.indexOf("FLIGHT_CAR")?delta.widgetnav.vacations.flightCar_RecentSearchesSelection(a):delta.widgetnav.vacations.hotelCar_RecentSearchSelection(a)})},vacationsRedirectAdvSearch:function(){$("#flightHotelAdvSearch,#flightHotelAdvSearchExp").on("click",function(){$("#flightHotelSearchForm").validate().cancelSubmit=!0,$("#flightHotelAdvSearchClk").val("Y");var a=window.location.hostname,b="";b="https://"+a+"/vacations/search.action",$("#flightHotelSearchForm").attr("action",b),setTimeout(function(){delta.widgetnav.vacations.submitDelayedForm(flightHotelSearchForm)},0)}),$("#flightCarAdvSearch,#flightCarAdvSearchExp").on("click",function(){$("#flightCarSearchForm").validate().cancelSubmit=!0,$("#flightCarAdvSearchClk").val("Y");var a=window.location.hostname,b="";b="https://"+a+"/vacations/search.action",$("#flightCarSearchForm").attr("action",b),setTimeout(function(){delta.widgetnav.vacations.submitDelayedForm(flightCarSearchForm)},0)}),$("#hotelCarAdvSearch,#hotelCarAdvSearchExp").on("click",function(){$("#hotelCarSearchForm").validate().cancelSubmit=!0,$("#hotelCarAdvSearchClk").val("Y");var a=window.location.hostname,b="";b="https://"+a+"/vacations/search.action",$("#hotelCarSearchForm").attr("action",b),setTimeout(function(){delta.widgetnav.vacations.submitDelayedForm(hotelCarSearchForm)},0)})},promoCodeComplete:function(a){var b=a.term.replace(/^\s+/g,""),c=$(this)[0].options.promoCode,d=$(this)[0].options.smNumber;delta.widgetnav.vacations.smNumberDisplay(b,c,d)},smNumberDisplay:function(a,b,c){""!=a&&void 0!=a&&a.length>1&&"sm"==a.toLowerCase().substring(0,2)?($("#"+b+"_div").addClass("promoCodeSmNumberDisplay"),$("#"+c+"_div").show(),$("#"+c).prop("disabled",!1),delta.widgetnav.vacations.checkIEBrowser()&&"8"==delta.widgetnav.vacations.getIEBrowserVersion()&&$("#"+b+"_div label").addClass("promoLabel"),$("#"+b+"_div span.vacationsWidgetHelpIcon").removeClass("floatRight")):($('div[for="'+c+'"]').html(""),$('div[for="'+c+'"]').hide(),$("#"+b+"_div").removeClass("promoCodeSmNumberDisplay"),$("#"+c).prop("disabled",!0).val(""),$("#"+c+"_div").hide(),delta.widgetnav.vacations.checkIEBrowser()&&"8"==delta.widgetnav.vacations.getIEBrowserVersion()&&$("#"+b+"_div label").removeClass("promoLabel"),$("#"+b+"_div span.vacationsWidgetHelpIcon").addClass("floatRight"))},validateAdultChildTotal:function(a,b){var c=a+"SearchForm",d="vacations-"+a+"Search-errorMsg",e=parseInt($("#"+c+" [name='travelersAdults']").val()),f=parseInt($("#"+c+" [name='travelersChildren']").val()),g=parseInt($("#"+c+" [name='numberOfRooms']").val()),h=0,i=0,j=!0,k="Adult and Child count does not match with search.";if(g>1){for(var l=1;g>=l;l++)h+=parseInt($("#"+c+" [name='rooms["+(l-1)+"].adultsNumber']").val()),i+=parseInt($("#"+c+" [name='rooms["+(l-1)+"].childrenNumber']").val());e!=h||f!=i?($("#"+d).show(),$("#"+d+" div#adultChildCountMismatch"+b).html(k),$("#"+d+" div#adultChildCountMismatch"+b).show(),j=!1):($("#"+d).hide(),$("#"+d+" div#adultChildCountMismatch"+b).html(""),$("#"+d+" div#adultChildCountMismatch"+b).hide(),j=!0)}else f>0?(h=parseInt($("#"+c+" [name='rooms[0].adultsNumber']").val()),i=parseInt($("#"+c+" [name='rooms[0].childrenNumber']").val()),e!=h||f!=i?($("#"+d).show(),$("#"+d+" div#adultChildCountMismatch"+b).html(k),$("#"+d+" div#adultChildCountMismatch"+b).show(),j=!1):($("#"+d).hide(),$("#"+d+" div#adultChildCountMismatch"+b).html(""),$("#"+d+" div#adultChildCountMismatch"+b).hide(),j=!0)):j=!0;return delta.widgetnav.vacations.resetHeightOnError(a),j},resetHeightOnError:function(){},closeVacationsWidget:function(){"none"!=$("#delta-vacations-expanded-tabs").css("display")&&($("#delta-vacations-expanded-tabs").hide(),"none"!=$("#flightHotelVacationExpandedSearchContainer").css("display")?($("#flightHotelExpandedWidgetDiv").html(""),$("#flightHotelVacationExpandedSearchContainer").hide(),$("#flightHotelVacationSearchContainer #adultCount").val("2"),$("#flightHotelVacationSearchContainer #hiddenSelectedRoomCount").val("1"),$("#flightHotelVacationSearchContainer #childCount").val("0"),$("#flightHotelVacationSearchContainer #hiddenSelectedChildCount").val("0"),$("#flightHotelVacationSearchContainer #numberOfRooms").val("1"),$("#flightHotelVacationSearchContainer #vacationsSubmit").show(),$("#flightHotelVacationSearchContainer #advancedSearch").show(),$("#widget-booking").removeClass("expandedWidgetContainer"),$("#vacationSearchWidgetContainer").removeClass("expadedContainer"),resizeVacationsWidget.resize()):"none"!=$("#flightCarVacationExpandedSearchContainer").css("display")?($("#flightCarExpandedWidgetDiv").html(""),$("#flightCarVacationExpandedSearchContainer").hide(),$("#flightCarVacationSearchContainer #flightCarAdultCount").val("2"),$("#flightCarVacationSearchContainer #flightCarChildCount").val("0"),$("#flightCarVacationSearchContainer #flightCarVacationsSubmit").show(),$("#flightCarVacationSearchContainer #flightCarAdvancedSearch").show(),$("#widget-booking").removeClass("expandedWidgetContainer"),$("#vacationSearchWidgetContainer").removeClass("expadedContainer"),resizeVacationsWidget.resize()):"none"!=$("#hotelCarVacationExpandedSearchContainer").css("display")&&($("#hotelCarExpandedWidgetDiv").html(""),$("#hotelCarVacationExpandedSearchContainer").hide(),$("#hotelCarVacationSearchContainer #travelerAdultCount").val("2"),$("#hotelCarVacationSearchContainer #hiddenSelectedRoomCount_hotelCar").val("1"),$("#hotelCarVacationSearchContainer #travelerChildCount").val("0"),$("#hotelCarVacationSearchContainer #hiddenSelectedChildCount_hotelCar").val("0"),$("#hotelCarVacationSearchContainer #hotelNumberOfRooms").val("1"),$("#hotelCarVacationSearchContainer #hotelCarVacationsSubmit").show(),$("#hotelCarVacationSearchContainer #hotelCarAdvancedSearch").show(),$("#widget-booking").removeClass("expandedWidgetContainer"),$("#vacationSearchWidgetContainer").removeClass("expadedContainer"),resizeVacationsWidget.resize()))},renderChildAgeError:function(a,b,c){var d=$("form#"+a+" div#"+b+" div[id*="+c+"]");null!=d&&""!=d&&d.length>1&&jQuery.each(d,function(a){0!=a&&$(this).hide()});var e=$("form#"+a+" select.childAgeSelect"),f="";null!=d&&""!=d&&d.length>1&&jQuery.each(d,function(d){return""!=$(this).html()?(f=$("form#"+a+" div#"+b+" div[id*="+c+"]")[d],!1):void 0});var g=!1;jQuery.each(e,function(a,b){return 0==parseInt(b.value)?($(f).show(),g=!0,!1):void 0}),g||$(f).hide()},renderAdultCountError:function(a,b,c){var d=$("form#"+a+" div#"+b+" div[id^="+c+"]");null!=d&&""!=d&&d.length>1&&jQuery.each(d,function(a){0!=a&&$(this).hide()});var e=$("form#"+a+" select.hiddenAdultCount"),f="";null!=d&&""!=d&&d.length>1&&jQuery.each(d,function(d){return""!=$(this).html()?(f=$("form#"+a+" div#"+b+" div[id^="+c+"]")[d],!1):void 0});var g=!1;jQuery.each(e,function(a,b){return 0==parseInt(b.value)?($(f).show(),g=!0,!1):void 0}),g||$(f).hide()},getRecentSearchesHeight:function(){var a=0;return void 0!=$("#vacationsRecentSearchContainer").css("display")&&"none"!=$("#vacationsRecentSearchContainer").css("display")&&(a=$("#vacationsRecentSearchContainer").height()+parseInt($("#vacationsRecentSearchContainer").css("padding-top").replace("px",""))+parseInt($("#vacationsRecentSearchContainer").css("padding-bottom").replace("px",""))),a},setDropDownStyle_IE:function(){delta.widgetnav.vacations.checkIEBrowser()&&$("#book-delta-vacations-content form.customFormUI div.styled-select select").addClass("select_vacation_IE")},validateAdultTotalCount:function(){$(document).on("change","#flightHotelVacationExpandedSearchContainer select.hiddenAdultCount",function(){}),$(document).on("change","#hotelCarVacationExpandedSearchContainer select.hiddenAdultCount",function(){})},hideAirportLookupList:function(){$(document).bind("click",function(a){DeltaUtils.exists("#dlv-widget-popup #airportlookup_dropdown")&&$("#dlv-widget-popup #airportlookup_dropdown").is(":visible")&&$(a.target).closest("#dlv-widget-popup").length<=0&&$("#dlv-widget-popup #airportlookup_dropdown").hide()})},setToolTipFocus:function(){$(".toolTipElement,.toolTipElement img").on("keyup",function(a){var b=a.keyCode||a.which;9===b&&$(this).removeClass("toolTipFocus")}),$(".toolTipElement,.toolTipElement img").on("keydown",function(a){(13===a.which||"click"===a.type)&&$(this).addClass("toolTipFocus")}),$(".toolTipElement,.toolTipElement img").on("blur",function(){$(this).addClass("toolTipFocus")})},validateOnFormSubmit_FlightHotel:function(){$("#adultCount,#childCount,select.hiddenAdultCount,select.hiddenchildrenNumberSelect,select.childAgeSelect").on("keyup",function(){return!1}),$("#adultCount,#childCount,select.hiddenAdultCount,select.hiddenchildrenNumberSelect,select.childAgeSelect").on("focusout",function(){return!1})},validateOnFormSubmit_FlightCar:function(){$("#flightCarAdultCount,#flightCarChildCount,select.hiddenAdultCount_flightCar,select.hiddenchildrenNumber_flightCar,select.childAgeSelect").on("keyup",function(){return!1}),$("#flightCarAdultCount,#flightCarChildCount,select.hiddenAdultCount_flightCar,select.hiddenchildrenNumber_flightCar,select.childAgeSelect").on("focusout",function(){return!1})},validateOnFormSubmit_HotelCar:function(){$("#travelerAdultCount,#travelerChildCount,select.hiddenAdultCount_hotelCar,select.hiddenchildrenNumber_hotelCar,select.childAgeSelect").on("keyup",function(){return!1}),$("#travelerAdultCount,#travelerChildCount,select.hiddenAdultCount_hotelCar,select.hiddenchildrenNumber_hotelCar,select.childAgeSelect").on("focusout",function(){return!1})},loadToolTipOnClick:function(){$(".toolTipElement").on("keypress click",function(a){if(13===a.which||"click"===a.type){var b=$("#"+this.id+" span").attr("title");delta.widgetnav.vacations.loadToolTip(this.id,$("#"+b).html(),0,6,"",500,"","")}})},vacationRoomTabClickHandler:function(){$(".vacationRooms").on("click",function(a){a.preventDefault()})}};var widgetVacationSearchValidation_FlightHotel={validatorConfig:{ignore:".hidden",errorClass:"spc_err_msg",errorElement:"div",onclick:!1,rules:{fromAirport:{vacationsRequiredFromCity:['input[id="toAirport"]',"01001","01002"]},toAirport:{vacationsRequiredToCity:['input[id="fromAirport"]',"01004","01002","01042"]},departureDate:{vac_checkDateFormat:["01011,01009"],vac_yearValid:["01009"],vac_leapYear:["01009"],vac_monthLastDay:["01009"],vac_checkFutureDate:["01008"],vac_checkValidDateRange:["01006"]},returnDate:{vac_checkDateFormat:["01011,01010"],vac_yearValid:["01010"],vac_leapYear:["01010"],vac_monthLastDay:["01010"],vac_checkValidDateRange:["01007"],vac_checkFutureDate:["01012,01013,01012",".depart:visible:first"]},promoCode:{vac_checkPromoCode:["01017"]},skyMilesNumber:{vac_checkSkyMiles:["01021"]},travelersAdults:{vac_adultValidEachRoomCount:["01028","01044","01028"]},travelersChildren:{vac_childValidEachRoomCount:["01028"]}},success:function(a){var b=a.attr("id").replace("-error","");$("#"+b).removeClass("auto-hint")},submitHandler:function(){return!1},showErrors:function(){if(this.defaultShowErrors(),delta.widgetnav.vacations.renderChildAgeError("flightHotelSearchForm","vacations-flightHotelSearch-errorMsg","Age-error"),delta.widgetnav.vacations.renderAdultCountError("flightHotelSearchForm","vacations-flightHotelSearch-errorMsg","hiddenAdultCount"),$("#vac_fromAirportPredictionList").length>1&&"none"!=$("#vac_fromAirportPredictionList").css("display")&&"none"!=$("#fromAirport-error").css("display")){var a=$("#fromAirport").offset().top+$("#fromAirport").outerHeight();$("#vac_fromAirportPredictionList").css("top",a)}if($("#vac_toAirportPredictionList").length>1&&"none"!=$("#vac_toAirportPredictionList").css("display")&&"none"!=$("#toAirport-error").css("display")){var a=$("#toAirport").offset().top+$("#toAirport").outerHeight();$("#vac_toAirportPredictionList").css("top",a)}if($("#vacations-flightHotelSearch-errorMsg div[for^='hiddenAdultCount']").each(function(){var a=parseInt($(this).attr("for").replace("hiddenAdultCount",""));a>1&&delta.widgetnav.vacations.roomTabHandlerFunction(a,"#flightHotelVacationExpandedSearchContainer ","")}),delta.widgetnav.vacations.isFlightHotelExpanded()){var b="flightHotel";if(delta.widgetnav.vacations.setErrorContainersHeight(b),"none"!=$("#vacations-flightHotelSearch-errorMsg").css("display")){resizeVacationsWidget.resize();var b="flightHotel",c="",d=$("#delta-vacations-expanded-tabs ul").find("li.ui-state-active a").attr("id").replace("vacationsRoom","");

"none"!=$("#vacationsRecentSearchContainer").css("display")?($("#"+b+"ExpandedWidgetDiv #childCountRightContainer"+d+c).removeClass("childContainerClass").addClass("childContainerClass_recentSearches"),$("#"+b+"ExpandedWidgetDiv #roomGuestLeftContainer"+d+c).removeClass("roomGuestContainerClass").addClass("roomGuestContainerClass_recentSearches"),$("#"+b+"ExpandedWidgetDiv #childCountRightContainer"+d+c).css("height",$("#"+b+"ExpandedWidgetDiv").height()+59)):($("#"+b+"ExpandedWidgetDiv #childCountRightContainer"+d+c).removeClass("childContainerClass_recentSearches").addClass("childContainerClass"),$("#"+b+"ExpandedWidgetDiv #roomGuestLeftContainer"+d+c).removeClass("roomGuestContainerClass_recentSearches").addClass("roomGuestContainerClass"),$("#"+b+"ExpandedWidgetDiv #childCountRightContainer"+d+c).css("height",$("#"+b+"ExpandedWidgetDiv").height()+24))}}else"none"!=$("#vacations-flightHotelSearch-errorMsg").css("display")?(resizeVacationsWidget.resize(),delta.widgetnav.vacations.checkIEBrowser()?$("#vacationSearchWidgetContainer").removeClass("activeTab_flightHotel_IE").addClass("activeTabError"):$("#vacationSearchWidgetContainer").removeClass("activeTab_flightHotel").addClass("activeTabError")):"none"==$("#vacations-flightHotelSearch-errorMsg").css("display")&&($("#vacationSearchWidgetContainer").removeClass("activeTabError").addClass(delta.widgetnav.vacations.checkIEBrowser()?"activeTab_flightHotel_IE":"activeTab_flightHotel"),resizeVacationsWidget.resize())}},validateForm:function(){var a,b,c;return a=$("#flightHotelSearchForm"),b=$.data(a[0],"validator"),c=b.form()}},widgetVacationSearchValidation_FlightCar={validatorConfig:{ignore:".hidden",errorClass:"spc_err_msg",errorElement:"div",onclick:!1,rules:{fromAirport:{vacationsRequiredFromCity:['input[id="flightCarToAirport"]',"01001","01002"]},toAirport:{vacationsRequiredToCity:['input[id="flightCarFromAirport"]',"01004","01002","01042"]},departureDate:{vac_checkDateFormat:["01011,01009"],vac_yearValid:["01009"],vac_leapYear:["01009"],vac_monthLastDay:["01009"],vac_checkFutureDate:["01008"],vac_checkValidDateRange:["01006"]},returnDate:{vac_checkDateFormat:["01011,01010"],vac_yearValid:["01010"],vac_leapYear:["01010"],vac_monthLastDay:["01010"],vac_checkValidDateRange:["01007"],vac_checkFutureDate:["01012,01013,01012",".depart:visible:first"]},promoCode:{vac_checkPromoCode:["01017"]},skyMilesNumber:{vac_checkSkyMiles:["01021"]},travelersAdults:{vac_adultValidEachRoomCount:["01028","01044","01028"]},travelersChildren:{vac_childValidEachRoomCount:["01028"]}},success:function(a){var b=a.attr("id").replace("-error","");$("#"+b).removeClass("auto-hint")},submitHandler:function(){return!1},showErrors:function(){if(this.defaultShowErrors(),$("#vac_fromAirportPredictionList_flightCar").length>1&&"none"!=$("#vac_fromAirportPredictionList_flightCar").css("display")&&"none"!=$("#flightCarFromAirport-error").css("display")){var a=$("#flightCarFromAirport").offset().top+$("#flightCarFromAirport").outerHeight();$("#vac_fromAirportPredictionList_flightCar").css("top",a)}if($("#vac_toAirportPredictionList_flightCar").length>1&&"none"!=$("#vac_toAirportPredictionList_flightCar").css("display")&&"none"!=$("#flightCarToAirport-error").css("display")){var a=$("#flightCarToAirport").offset().top+$("#flightCarToAirport").outerHeight();$("#vac_toAirportPredictionList_flightCar").css("top",a)}if(delta.widgetnav.vacations.renderChildAgeError("flightCarSearchForm","vacations-flightCarSearch-errorMsg","Age_flightCar-error"),delta.widgetnav.vacations.isFlightCarExpanded()){var b="flightCar";if(delta.widgetnav.vacations.setErrorContainersHeight(b),"none"!=$("#vacations-flightCarSearch-errorMsg").css("display")){resizeVacationsWidget.resize();var b="flightCar",c="_flightCar",d="1";"none"!=$("#vacationsRecentSearchContainer").css("display")?($("#"+b+"ExpandedWidgetDiv #childCountRightContainer"+d+c).removeClass("childContainerClass").addClass("childContainerClass_recentSearches"),$("#"+b+"ExpandedWidgetDiv #roomGuestLeftContainer"+d+c).removeClass("roomGuestContainerClass").addClass("roomGuestContainerClass_recentSearches"),$("#"+b+"ExpandedWidgetDiv #childCountRightContainer"+d+c).css("height",$("#"+b+"ExpandedWidgetDiv").height()+59)):($("#"+b+"ExpandedWidgetDiv #childCountRightContainer"+d+c).removeClass("childContainerClass_recentSearches").addClass("childContainerClass"),$("#"+b+"ExpandedWidgetDiv #roomGuestLeftContainer"+d+c).removeClass("roomGuestContainerClass_recentSearches").addClass("roomGuestContainerClass"),$("#"+b+"ExpandedWidgetDiv #childCountRightContainer"+d+c).css("height",$("#"+b+"ExpandedWidgetDiv").height()+24))}}else"none"!=$("#vacations-flightCarSearch-errorMsg").css("display")?(resizeVacationsWidget.resize(),$("#vacationSearchWidgetContainer").removeClass("activeTab_flightCar").addClass("activeTabError")):"none"==$("#vacations-flightCarSearch-errorMsg").css("display")&&($("#vacationSearchWidgetContainer").removeClass("activeTabError").addClass("activeTab_flightCar"),resizeVacationsWidget.resize())}},validateForm:function(){var a,b,c;return a=$("#flightCarSearchForm"),b=$.data(a[0],"validator"),c=b.form()}},widgetVacationSearchValidation_HotelCar={validatorConfig:{ignore:".hidden",errorClass:"spc_err_msg",errorElement:"div",onclick:!1,rules:{toAirport:{vac_vacationsRequiredHotelLocation:["01031","01005"]},checkInDate:{vac_checkDateFormat:["01011,01034"],vac_yearValid:["01034"],vac_leapYear:["01034"],vac_monthLastDay:["01034"],vac_checkValidDateRange:["01034"],vac_checkFutureDate:["01037"]},checkOutDate:{vac_checkDateFormat:["01011,01035"],vac_yearValid:["01035"],vac_leapYear:["01035"],vac_monthLastDay:["01035"],vac_checkValidDateRange:["01035"],vac_checkFutureDate:["01012,01013,01012",".depart:visible:first"]},promoCode:{vac_checkPromoCode:["01017"]},skyMilesNumber:{vac_checkSkyMiles:["01021"]},travelersAdults:{vac_adultValidEachRoomCount:["01028","01044","01028"]},travelersChildren:{vac_childValidEachRoomCount:["01028"]}},success:function(a){var b=a.attr("id").replace("-error","");$("#"+b).removeClass("auto-hint")},submitHandler:function(){return!1},showErrors:function(){if(this.defaultShowErrors(),delta.widgetnav.vacations.renderChildAgeError("hotelCarSearchForm","vacations-hotelCarSearch-errorMsg","Age_hotelCar-error"),delta.widgetnav.vacations.renderAdultCountError("hotelCarSearchForm","vacations-hotelCarSearch-errorMsg","hiddenAdultCount"),$("#vac_toAirportPredictionList_hotelCar").length>1&&"none"!=$("#vac_toAirportPredictionList_hotelCar").css("display")&&"none"!=$("#vacationHotelLocation-error").css("display")){var a=$("#vacationHotelLocation").offset().top+$("#vacationHotelLocation").outerHeight();$("#vac_toAirportPredictionList_hotelCar").css("top",a)}if($("#vacations-hotelCarSearch-errorMsg div[for^='hiddenAdultCount']").each(function(){var a=parseInt($(this).attr("for").replace("hiddenAdultCount",""));a>1&&delta.widgetnav.vacations.roomTabHandlerFunction(a,"#hotelCarVacationExpandedSearchContainer ","")}),delta.widgetnav.vacations.isHotelCarExpanded()){var b="hotelCar";if(delta.widgetnav.vacations.setErrorContainersHeight(b),"none"!=$("#vacations-hotelCarSearch-errorMsg").css("display")){resizeVacationsWidget.resize();var b="hotelCar",c="_hotelCar",d=$("#delta-vacations-expanded-tabs ul").find("li.ui-state-active a").attr("id").replace("vacationsRoom","");"none"!=$("#vacationsRecentSearchContainer").css("display")?($("#"+b+"ExpandedWidgetDiv #childCountRightContainer"+d+c).removeClass("childContainerClass").addClass("childContainerClass_recentSearches"),$("#"+b+"ExpandedWidgetDiv #roomGuestLeftContainer"+d+c).removeClass("roomGuestContainerClass").addClass("roomGuestContainerClass_recentSearches"),$("#"+b+"ExpandedWidgetDiv #childCountRightContainer"+d+c).css("height",$("#"+b+"ExpandedWidgetDiv").height()+59)):($("#"+b+"ExpandedWidgetDiv #childCountRightContainer"+d+c).removeClass("childContainerClass_recentSearches").addClass("childContainerClass"),$("#"+b+"ExpandedWidgetDiv #roomGuestLeftContainer"+d+c).removeClass("roomGuestContainerClass_recentSearches").addClass("roomGuestContainerClass"),$("#"+b+"ExpandedWidgetDiv #childCountRightContainer"+d+c).css("height",$("#"+b+"ExpandedWidgetDiv").height()+24))}}else"none"!=$("#vacations-hotelCarSearch-errorMsg").css("display")?(resizeVacationsWidget.resize(),$("#vacationSearchWidgetContainer").removeClass("activeTab_hotelCar").addClass("activeTabError_hotelCar")):"none"==$("#vacations-hotelCarSearch-errorMsg").css("display")&&($("#vacationSearchWidgetContainer").removeClass("activeTabError_hotelCar").addClass("activeTab_hotelCar"),resizeVacationsWidget.resize())}},validateForm:function(){var a,b,c;return a=$("#hotelCarSearchForm"),b=$.data(a[0],"validator"),c=b.form()}},resizeVacationsWidget={resize:function(){setTimeout(function(){var a=$("#widget-booking");a.css("height",resizeVacationsWidget.getWidgetHeight())},10)},getWidgetHeight:function(){var a=delta.widgetnav.vacations.vacationWidget_county,b=delta.widgetnav.vacations.vacationWidget_lang;if("undefined"!=typeof a&&"us"!==a&&"US"!==a&&"ca"!==a&&"CA"!==a||"undefined"!=typeof b&&"en"!==b.toLowerCase())return $("#vacationSearchWidgetContainer").height()+$("#vacationSearchWidgetContainer").position().top+(delta.navwidget.isDockedState()?33:0);var c=0;return"none"!=$("#vacationsRecentSearchContainer").css("display")&&(c=delta.widgetnav.vacations.getRecentSearchesHeight()),$("#vacationSearchWidgetContainer").height()+$("#vacationSearchWidgetContainer .vacations-pkg-tabs").position().top+(delta.navwidget.isDockedState()?30:0)}};