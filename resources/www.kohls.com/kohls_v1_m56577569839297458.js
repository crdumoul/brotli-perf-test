/*
 * ***** THIS IS A GENERATED SCRIPT. DO NOT MODIFY! *****
 * kohls_v1_m56577569839297458.js
 * The original kohls_v1_m56577569839297458.js will be broken into smaller pieces to be manageable, but
 * is initially just deployed from a single file.
 * NOTE: This file has a dependency on overlay.js
 * 
 * Changes to this file need to go into javascript/src/lib/, either directly into
 * the kohls_v1_m56577569839297458.js file that is there, or create a new file and add its name to
 * javascript/build/kohls_v1_m56577569839297458.lst.  For questions, contact the UI team.
 */
/*
 * ***** THIS IS A GENERATED SCRIPT. DO NOT MODIFY! *****
 * kohls_v1_m56577569839297458.js
 * The original kohls_v1_m56577569839297458.js will be broken into smaller pieces to be manageable, but
 * is initially just deployed from a single file.
 * NOTE: This file has a dependency on overlay.js
 * 
 * Changes to this file need to go into javascript/src/lib/, either directly into
 * the kohls_v1_m56577569839297458.js file that is there, or create a new file and add its name to
 * javascript/build/kohls_v1_m56577569839297458.lst.  For questions, contact the UI team.
 */
$ready(function _$ready_kohls_v1_module1(B){$log.info("kohls v1 module1 is ready");
if(B("#registry_container").length){WishListRegistry.init(function(){WishListRegistry.setFullViewPanel("registry_container")})}if(window.Utils){Utils.setCookie("cookieSetting","isCookie",90)}B(document).on("click",".khwl_continue_shop,#khwl_id_addToBag_popup_closeBtn,.khrg_continue_shop,.khrg_popup_closeBtn,.khggPdtQuickViewClose,#khrg_id_addToBag_popup_maskDiv,.khwl_go_updated_list.khwl_go_checkout_list",function(){A()});if(B.browser.msie&&B.browser.version==8){B(document).on("focusin",".khrg_popup_closeBtn,.khrg_continue_shop,#khrg_id_addToBag_popup_maskDiv,.khwl_popup_closeBtn,.khwl_continue_shop",function(){A();B("#khrg_id_addToBag_popup").hide();B("#khrg_id_addToBag_popup_maskDiv").hide()})}function A(){Kjs.PB.addItemToPB()}B(".khrg_go_checkout_list").live("click",function(){Kjs.storage.saveData("persistent_bar_components_json",null)});B(".modal_error_field").live("keypress change",function(){unmarkInvalidLabelAndField("modal_create_email_label","modal_create_email_field")})});$ready(function _$ready_kohls_v1_module2(B){$log.info("kohls v1 module2 is ready");
"use strict";var A=B("html");(function(E){var C={},F;function D(H){var K=window.location.search.substring(1),J=K.split("&"),L,I,G;G=J.length;for(I=0;I<G;I++){L=J[I].split("=");if(L[0]==H){return L[1]}}}if(window.GiftGuide){C.gift_ideas_popup_container="gift-ideas";if(A.hasClass("gift-guide")){F=D("level");if(F==="1"){C.bread_crumb_container="gift-guide-breadcrumbs";C.left_container="gift-guide-nav"}else{if(F==="2"){C.bread_crumb_container="gift-guide-breadcrumbs";C.left_container="gift-guide-nav";C.carousel_container="gift-guide-main-content"}else{C.bread_crumb_container="gift-guide-breadcrumbs";C.left_container="gift-guide-nav";C.product_container="gift-guide-main-content"}}}GiftGuide.setPanelContent(C)}})(B);(function(C){if(window.WishList){WishList.setListMenuOverlay("lists-overlay")}if(window.WishListRegistry){if(WishListRegistry.setRegistryMenuOverlay){WishListRegistry.setRegistryMenuOverlay("registries-overlay")}}})(B)});var newProtocol=document.referrer.split("/");var parentURL=newProtocol[0]+"//"+newProtocol[2];
var autoLoginEnabled=false;var skava_popup_status=false;var skava_popup_login_status=false;function loginstatus(){$.ajax({url:"/common/user_check_status.jsp",type:"GET",dataType:"json",async:false,success:function(A){autoLoginEnabled=A.autoLoginEnabled;if(A.autoLoginEnabled==true){if(A.autoLogin==true){skava_popup_status=false}else{if(A.autoLogin==false){skava_popup_status=true}}}else{if(A.autoLoginEnabled==false){skava_popup_status=true}}skava_popup_login_status=A.login}})}function displayLoginModal(B){loginstatus();var H=document.location.protocol;var E=document.location.port;var C=document.location.hostname+(document.location.port?":"+E:"");var G=H+"//"+C;if(E!=="undefined"||E!==null||E!=""){if(H=="http:"){E=Number(E)+1}else{E=Number(E)}}var D=document.location.hostname+(document.location.port?":"+E:"");var F="https://"+D;var A=function(J){var I=Kjs.cookie.get("IsZipElgForLoyalty");var K="/common/header.jsp?skavaLoad=true&isZipElgForLoyalty="+I;$.ajax({url:K,type:"GET",dataType:"json",cache:false,success:function(L){$("#skava_head_load_container").html(L);
handleCookies();loginstatus();if(skava_popup_login_status){if($("#isLogin").val()!=""&&$("#isLogin").val()!=null){if(typeof B!=="undefined"){B(true)}}else{B(false)}}else{B(false)}var N=$(location).attr("href");var M=N.match(/shopping_cart.jsp/gi);Kjs.storage.saveData("persistent_bar_components_json",null);Kjs.PB.common_json();if(!M){$("#tr_phase2_ShoppingBg .shopping-bag-arrow").show()}},complete:function(L){$("#skava_head_load_container").html(L.responseText);handleCookies();loginstatus();if(skava_popup_login_status){if($("#isLogin").val()!=""&&$("#isLogin").val()!=null){if(typeof B!=="undefined"){B(true)}}else{B(false)}}else{B(false)}var N=$(location).attr("href");var M=N.match(/shopping_cart.jsp/gi);Kjs.storage.saveData("persistent_bar_components_json",null);Kjs.PB.common_json();if(!M){$("#tr_phase2_ShoppingBg .shopping-bag-arrow").show()}}})};if(skava_popup_status&&!skava_popup_login_status){$box.open({fancybox:{href:F+"/upgrade/myaccount/modal_login.jsp?purl="+G,type:"iframe",height:400,width:730},onConclude:A})
}else{if(!skava_popup_login_status){$box.open({fancybox:{href:F+"/checkout/common/session_timeout_modal_login.jsp?purl="+G,type:"iframe",height:395,width:580},onConclude:A})}}}function displayFirstModal(A,C){var G=false;var F=document.location.protocol;var D=document.location.port;if(D!=="undefined"||D!==null||D!=""){if(F=="http:"){D=Number(D)+1}else{D=Number(D)}}var E=document.location.href.split("=");var B=document.location.hostname+(document.location.port?":"+D:"");$box.parent.open({href:"https://"+B+"/upgrade/myaccount/modal_login.jsp?purl="+E[1],height:400,width:730})}function successActionNew(A){A.preventDefault();handleCookies();_updateOmnitureLoggedInStatus();if(typeof quickViewPending!=="undefined"&&quickViewPending){displayQuickView()}else{Kjs._(function(){$box.parent.close()})}return true}$ready(function _$ready_kohls_v1_module3(C){$log.info("kohls v1 module3 is ready");C("#modal_login_error").hide();var D=document.location.protocol;var B=document.location.port;if(B!=="undefined"||B!==null||B!=""){if(D=="http:"){B=Number(B)+1
}else{B=Number(B)}}var A=document.location.hostname+(document.location.port?":"+B:"");C("#modal_login_cancel_button").live("click",function(E){E.preventDefault();$box.parent.close()});C("#modal_login_create_button").live("click",function(E){E.preventDefault();$box.parent.open({href:"https://"+A+"/upgrade/myaccount/modal_create.jsp?purl="+parentURL,height:320,width:730})});C("#modal_login_signin_button").live("click submit",function(H){var G=document.location.href.split("=");var F=H;if(!validateForm(C("#modal_login_form"))){C("#error_display2").show();C("#modal_login_error").hide();setTimeout(function(){var I=C(".login_toggle").eq(0).height();var J=C(".login_toggle").eq(0).height();var K=(J>I)?J-I:0;$box.parent.resize({height:400+K+22})},5);return false}H.preventDefault();var E=C("form[name=modal_login_form]");C.ajax({url:"https://"+A+"/upgrade/myaccount/modal_login.jsp?purl="+G[1],type:"POST",dataType:"json",data:E.serialize(),cache:false,success:function(L){_handleLoginServerResponse(L,function(){if(typeof success!="undefined"){success=true
}try{successActionNew(F)}catch(N){$log.error("Unhandled exception in kohls_v1_m56577569839297458.js - "+N.message,N)}});var I=0;var K=jQuery.parseJSON(L.responseText);if(!L.loginValid){I=1;C("#error_display2").hide();C("#modal_login_error").show();C("#modal_login_form").find(".modal_uname").addClass("changeTitle")}if(!L.passValid){I=1;C("#error_display2").hide();C("#modal_login_error").show();C("#modal_login_form").find(".modal_pass").addClass("changeTitle")}if(I==0){if(C("#remember").is(":checked")){var M=C("#modal_login_email_field").attr("value");var J=C("#modal_login_pass_field").attr("value");C.cookie("username",M);C.cookie("password",J);C.cookie("remember",true)}}C("#skava_head_load_container").load("/common/header.jsp?skavaLoad=true")},error:function(J){var I=jQuery.parseJSON(J.responseText);if(typeof success!="undefined"){success=false}}})});C("#modal_create_back_button").live("click submit",function(F){F.preventDefault();var E=document.location.href.split("=");$box.parent.open({href:"https://"+A+"/upgrade/myaccount/modal_login.jsp?purl="+E[1],height:400,width:730})
});C("#modal_create_first_name_field , #modal_create_last_name_field , #modal_create_email_field, #modal_create_password_field, #modal_create_confirm_password_field").live("keypress",function(E){if(E.which==13){E.preventDefault();C("#modal_create_continue_button").click()}});C("#modal_create_continue_button").live("click submit",function(I){var G=document.location.href.split("=");var F=I;if(!validateForm(C("#skava_create_acct"))){C("#error_display3").show();C("#modal_login_error").hide();$box.parent.resize({height:550});return false}I.preventDefault();var E=C("form[name=skava_create_acct]");E.find("input[name='callback']").val("");function H(J){}C("#modal_create_confirm_email_field").val(C("#modal_create_email_field").val());C.ajax({url:"https://"+A+"/upgrade/myaccount/modal_create.jsp",type:"POST",dataType:"json",data:E.serialize(),cache:true}).success(function(J){_handleCreateServerResponse(J,function(){success=true;try{successActionNew(F)}catch(K){$log.error("kohls_v1... successActionNew exception "+K.message,K)
}});if(!J.firstNameValid){C("#error_display3").hide();C("#modal_login_error").show();C("#skava_create_acct").find("#modal_create_first_name_label").addClass("changeTitle")}if(!J.lastNameValid){C("#error_display3").hide();C("#modal_login_error").show();C("#skava_create_acct").find("#modal_create_last_name_label").addClass("changeTitle")}if(!J.loginValid){C("#error_display3").hide();C("#modal_login_error").show();C("#skava_create_acct").find("#modal_create_email_label").addClass("changeTitle")}if(!J.passValid){C("#error_display3").hide();C("#modal_login_error").show();C("#skava_create_acct").find("#modal_create_password_label").addClass("changeTitle")}C("#skava_head_load_container").load("/common/header.jsp?skavaLoad=true")}).error(function(){success=false})});C("#modal_create_password_field,#modal_create_confirm_password_field").live("cut copy paste",function(E){E.preventDefault()});C("#modal_recpass_back_button").live("click submit",function(E){E.preventDefault();displayLoginModal(modalCallback)});C("#modal_recpass_email_field").live("keypress",function(E){if(E.which==13){E.preventDefault();
C("#modal_recpass_continue_button").click()}});C("#modal_recpass_continue_button").live("click submit",function(H){var G=document.location.href;H.preventDefault();if(!validateForm(C("#modal_recpass_form"))){C("#error_display4").show();C("#modal_recpass_error").hide();return false}var E=C("form[name=hint_question_answer]");var F=C("#modal_recpass_email_field").val();C.ajax({url:G,type:"POST",dataType:"json",data:E.serialize()}).success(function(I){_handleRecPassServerResponse(I,function(){success=true;displayRecPassConfirmModal(F,true)});if(!I.sendingFailed){C("#error_display4").hide();C("#modal_recpass_error").show();C("#modal_recpass_form").find(".modal_input_label").addClass("changeTitle")}if(!I.emailValid){C("#error_display4").hide();C("#modal_recpass_error").show();C("#modal_recpass_form").find(".modal_input_label").addClass("changeTitle")}}).error(function(){success=false})});C("#modal_recpass_confirm_ok_button").live("click submit",function(E){E.preventDefault();success=true;successActionNew(E)})});function displayRecPassModal(A,B){var D=true;
var C=document.location.href.split("=");$box.parent.open({href:C[1]+"/upgrade/myaccount/modal_recpass.jsp?purl="+C[1],height:280,width:750})}function displayRecPassConfirmModal(B,A){var E=false;var C=document.location.href.split("=");var D=C[1];window.location.href=D+"/upgrade/myaccount/modal_recpass_confirm.jsp?purl="+C[1]+"&recpassEmail="+B}function validateLogin(){var C=$("#modal_login_email_field");var D=$("#modal_login_pass_field").val();var E=(C!==null&&validateEmail(C));var A=(D!==null&&isBetween(D.length,5,30));var F=E;var B;if(!F){B="Some information is missing or invalid.<br />"}displayLoginErrors(B," - Please enter a valid e-mail address."," - Please enter a valid password.",E,A);return F}function displayLoginErrors(D,F,B,E,A){var C=$("#modal_login_error");C.html(D);setFieldFormatting("modal_login_email_field","modal_login_email_label",F,C,E,F!==null);setFieldFormatting("modal_login_pass_field","modal_login_pass_label",B,C,A,B!==null)}function _handleLoginServerResponse(B,F){var E=$("#invalidEmail").val();
var C=$("#invalidPwd").val();var A=$("#infoInvalid").val();try{if(B.valid){displayLoginErrors(null,null,null,B.loginValid,B.passValid);F()}else{if(B.loginErrorType==="Locked"){displayLoginErrors("Your account has been locked due to <br />failed login attempts.  Please call Customer Service toll-free at 1-866-887-8884.",null,null,B.loginValid,B.passValid)}else{if(B.loginErrorType==="Disabled"){displayLoginErrors("At your request, your Kohls.com account has been disabled.",null,null,B.loginValid,B.passValid)}else{displayLoginErrors(A+"<br />",E,C,B.loginValid,B.passValid)}}}}catch(D){}}function validateCreate(){var K=$("#modal_create_first_name_field").val();var L=$("#modal_create_last_name_field").val();var E=$("#modal_create_email_field");var J=$("#modal_create_password_field").val();var F=$("#modal_create_confirm_password_field").val();var I=validateName(K)&&isBetween(K.length,1,40);var C=validateName(L)&&isBetween(L.length,1,40);var A=validateEmail(E);var D=isBetween(J.length,5,30);var B=isBetween(F.length,5,30)&&J===F;
var H=I&&C&&A&&D&&B;var G="";if(!H){G="Some information is missing or invalid.<br />"}displayCreateErrors(G,I,C,A,D,B,E.length>0,J===F);return H}function displayCreateErrors(I,K,E,C,F,D,G,M,L){var J=false;var A=$("#modal_login_error");var B=" - Please fill out all fields.";if(!L){L=" - Please enter a valid e-mail address."}A.html(I);if((!C&&G)&&(F&&!M)){J=true}setFieldFormatting("modal_create_first_name_field","modal_create_first_name_label",B,A,K,!J);if(!K&&!J){J=true}setFieldFormatting("modal_create_last_name_field","modal_create_last_name_label",B,A,E,!J);if(!E&&!J){J=true}setFieldFormatting("modal_create_email_field","modal_create_email_label",L,A,C,G);setFieldFormatting("modal_create_password_field","modal_create_password_label",B,A,F,!J);if(!F&&!J){J=true}var H=B;if(F&&!M){H=" - The entered passwords do not match."}setFieldFormatting("modal_create_confirm_password_field","modal_create_confirm_password_label",H,A,D,F&&!M);if(!D&&!J){J=true}}function _handleCreateServerResponse(C,E){var A=$("#emailExists").val();
var B=$("#infoInvalid").val();try{if(C.valid){displayCreateErrors(null,C.firstNameValid,C.lastNameValid,C.loginValid,C.passValid,C.confirmPassValid,false,true);E()}else{displayCreateErrors(B+"<br />",C.firstNameValid,C.lastNameValid,C.loginValid,C.passValid,C.confirmPassValid,true,true,A)}}catch(D){}}function validateRecPass(){var A=$("#modal_recpass_email_field");var B=(A!==null&&validateEmail(A));return B}function displayRecPassErrors(C,B){var A=$("#modal_recpass_error");A.text("");setFieldFormatting("modal_recpass_email_field","modal_recpass_email_label",B,A,C,true)}function _handleRecPassServerResponse(B,E){var A=$("#emailExists").val();var D=$("#emailSendingFailed").val();try{if(B.valid){displayRecPassErrors(B.emailValid);E()}else{if(!B.sendingFailed){displayRecPassErrors(B.sendingFailed,D)}else{displayRecPassErrors(B.emailValid,A)}}}catch(C){}}function _addModalFancyboxClasses(){$("#fancybox-content").addClass("modal-fancybox-content");$("#fancybox-close").addClass("modal-fancybox-close").addClass("custom_fancybox_close_btn").attr("style","display:inline;background:url('/media/images/close_tip_rew.jpg') no-repeat !important;")
}function _removeModalFancyboxClasses(){$("#fancybox-content").removeClass("modal-fancybox-content");$("#fancybox-close").removeClass("modal-fancybox-close").removeClass("custom_fancybox_close_btn").removeAttr("style")}function isBetween(E,A,D,F){var C=false;if(A>D){var B=A;A=D;D=B}if(F){C=E>A&&E<D}else{C=E>=A&&E<=D}return C}function setFieldFormatting(A,D,F,B,C,G){var E=$("#"+A).val();if(!C){if(G){B.append(F+"<br />")}markInvalidLabelAndField(D,A)}else{unmarkInvalidLabelAndField(D,A)}return C}function markInvalidLabelAndField(B,A){$("#"+B).addClass("modal_error");$("#"+B).find("span").addClass("modal_error");$("#"+A).addClass("error")}function unmarkInvalidLabelAndField(B,A){$("#"+B).removeClass("modal_error");$("#"+B).find("span").removeClass("modal_error");$("#"+A).removeClass("error")}function validateName(A){var B=/^[a-zA-z0-9\x|]|[|-|'|.]*$/;return B.test(A)}function successAction(){handleCookies();_updateOmnitureLoggedInStatus();if(typeof quickViewPending!=="undefined"&&quickViewPending){displayQuickView()
}else{$.fancybox.close()}return true}function failureAction(){if(typeof quickViewPending!=="undefined"&&quickViewPending){displayQuickView()}else{$.fancybox.close()}return false}function _updateOmnitureLoggedInStatus(){$err.exec(function A(){s.prop17="logged in";s.eVar17="logged in"})}$ready(function _$ready_kohls_v1_module4(A){$log.info("kohls v1 module4 is ready");A("#messageText").keyup(function(G){var C=100;var E=A(this).val();var B=E.length;var F=C-B;if(F===-1){F=0}A("#charRemaining").html(F);if(B>C){var D=E.substr(0,C);A(this).val(D)}})});var analyticEvents={};var pageLoadValues={};analyticEvents.pageLoad=function(A){$err.exec(function B(){pageLoadValues={};if(typeof A.giftingListing==="undefined"){s.pageName="Gift Guide:"+A.pageName;s.prop1=A.giftGuide;s.prop2=A.category;s.prop3=A.subcategory;s.prop4="Gift Guide";s.eVar25=s.eVar26=s.eVar27=s.prop1;s.eVar3="Gift Guide";pageLoadValues.giftingListing="Gifting";var C=3;if(!A.subcategory){C=2;if(!A.category){C=1}}switch(C){case 2:s.eVar26+=">"+s.prop2;s.eVar27+=">"+s.prop2;
break;case 3:s.eVar27+=">"+s.prop2+">"+s.prop3;break;default:break}s.eVar28=s.eVar27;pageLoadValues.level=C}else{s.eVar3="List|"+A.ownerGuest;s.eVar57=A.listName+"|"+A.ownerGuest;s.pageName=A.pageName+":"+A.listName+":"+A.pageSection+":"+A.ownerGuest;s.prop1=s.eVar25=A.pageName;s.prop2=s.eVar26=A.pageName;s.prop3=s.eVar27=A.pageName;s.prop4=A.pageType||A.pageName;s.prop9=A.pageSection||A.pageName;s.prop10=A.pageSubSection||A.pageName;s.prop11=A.pageSubSection||A.pageName;pageLoadValues.giftingListing="List";pageLoadValues.listName=s.eVar57;s.eVar28=s.eVar27;if(!A.pageSection){analyticEvents.listView()}}pageLoadValues.pageName=s.pageName})};analyticEvents.listAdd=function(A){$err.exec(function B(){if(A.length!==undefined){s.events="event28,event35";var C="";$.each(A,function(E,D){s.eVar57=D.listName;C+=";"+D.sku+";;;event35="+D.retailPrice+","});s.products=C.substring(0,C.length-1);s.prop4="List: Add to List"}})};analyticEvents.listRemove=function(B){$err.exec(function A(){s.events="event29";s.products=";"+B.sku
})};analyticEvents.listView=function(A){$err.exec(function B(){s.events="event32";s.prop4="List View"})};analyticEvents.listCreate=function(A){$err.exec(function B(){s.events="event30";s.eVar57=A.listName+"|owner"})};analyticEvents.listDelete=function(A){$err.exec(function B(){s.events="event31";s.eVar57=A.listName+"|owner"})};analyticEvents.listShare=function(A){$err.exec(function B(){s.events="event34";s.eVar58="List"})};analyticEvents.print=function(A){$err.exec(function B(){s.prop24="List"})};analyticEvents.listSettings=function(A){$err.exec(function B(){s.prop31=pageLoadValues.listName+":"+A.budget+":"+A.privacy+":"+A.eventDate;s.prop4="List Settings"})};analyticEvents.listSearch=function(A){$err.exec(function B(){s.prop5="List:"+A.searchTerm;s.eVar8="List:"+A.searchTerm;s.eVar9="list"})};analyticEvents.viewViaPSW=function(A){$err.exec(function B(){s.eVar59="Product Selection Window";s.prop4="Product Selection Window";s.events="ProdView,event36";s.products=";"+A.productId;s.pageName=s.pageName+":Product Selection Window"
})};analyticEvents.pswToProductPage=function(A){$err.exec(function B(){s.events="ProdView";s.products=";"+A.productId;s.eVar59="Product Page";s.prop4="Product Page"})};analyticEvents.addToBag=function(A){$err.exec(function B(){s.pageName=pageLoadValues.giftingListing+":Add to Cart";s.prop4=pageLoadValues.giftingListing+": Add to Cart";s.prop9="Cart";s.prop10="Cart";s.prop11="Cart";s.events="scAdd";var C=typeof A.valicons!=="undefined"&&A.valicons.indexOf("Online_Exclusive")>=0?"Y":"N";s.products=";"+A.sku+";;;;evar16="+C+"|evar25="+s.eVar25+"|evar26="+s.eVar26+"|evar27="+s.eVar27+"|evar28="+s.eVar28+"|eVar29="+s.eVar29})};function trackAnalytics(C,B){$err.exec(function A(){var D=B||{};analyticEvents[C](D);s.t()})};