function twttrWidgetTweetButtonClickHandler(e){"use strict";if(e&&"function"==typeof window.trackMetrics)try{window.trackMetrics({type:"social-click",data:{clickObj:{socialType:"social: twitter"}}})}catch(t){}}function initAnalytics(){"use strict";var e=CNN.Analytics.utils;e.addMetadataObject(),e.jsmdTracking(),e.addTrackingTags(document),e.addSocialMediaInteractionMetrics(),CNN.Gallery.analytics.init(document),jQuery(document).on("jumbotron-initialization-complete",CNN.Gallery.analytics.initJumbotronTracking)}var CNN=window.CNN||{};CNN.Analytics=CNN.Analytics||{},CNN.Gallery=CNN.Gallery||{},CNN.Analytics.utils=function(){"use strict";function e(){var e=CNN.CurrentWidth.getClientWidth(),t=640,n=960,a=1120,i="no-value-set";return i=e>=a?"14col":a>e&&e>=n?"12col":n>e&&e>=t?"8col":"4col"}function t(e){var t={};return t.section="section front",t.special="specials",t.videos="video","string"==typeof e&&e in t&&(e=t[e]),"undefined"==typeof CNN.contentModel||"undefined"==typeof CNN.contentModel.sectionName||"homepage"!==CNN.contentModel.sectionName&&"intl_homepage"!==CNN.contentModel.sectionName||(e="index"),e}function n(e,t,n){var a=e.split(";"),i=0;for(t="string"==typeof t&&t.length>0?";expires="+t:"",n="string"==typeof n&&n.length>0?";path="+n:";path=/";i<a.length;i++)document.cookie=a[i]+n+t+";"}function a(e,t){"string"==typeof t&&t.length>0&&n(t),e.currentTarget.attributes.hasOwnProperty("data-vr-track")&&window._vrtrack({track_url:e.currentTarget.href,event_type:"partner"})}function i(){var n,a,i,r,l,c=CNN.contentModel.pageType,s="no-value-set",d=s,u=e(),p=jQuery(CNN.Carousel.carouselSelector).first(),h=jQuery("div[data-analytics-pivit]").length>0,g=s,_=s,y=s,m=jQuery(".js-media__video").length,f=CNN.contentModel.env||s,N=CNN.contentModel.analytics&&CNN.contentModel.analytics.showName||"",b=CNN.contentModel.title||s,v=[],C=s,w=s,k=s,j=s,M=s,T=s,Q="none",z=0,x="";if("undefined"==typeof CNN.contentModel||"undefined"==typeof CNN.contentModel.pageType||"undefined"==typeof CNN.contentModel.sectionName||"section"!==CNN.contentModel.pageType&&"homepage"!==CNN.contentModel.sectionName&&"intl_homepage"!==CNN.contentModel.sectionName||(b=s),"undefined"!=typeof CNN.contentModel&&"undefined"!=typeof CNN.contentModel.layout&&"error"===CNN.contentModel.layout&&(c="error"),p.length)switch(c){case"article":g=p.data("galleryname"),_=p.find("[data-slidename]").first().data("slidename");break;case"gallery":g=b,_=p.find("[data-slidename]").first().data("slidename"),z=1}"undefined"!=typeof CNN.contentModel.analytics&&("undefined"!=typeof CNN.contentModel.analytics.publishDate&&(y=CNN.contentModel.analytics.publishDate,v=CNN.contentModel.analytics.publishDate.split("T")[0].split("-"),3===v.length&&(y=v[0]+"/"+v[1]+"/"+v[2])),C=CNN.contentModel.analytics.author||s,w=CNN.contentModel.analytics.cap_genre||s,k=CNN.contentModel.analytics.cap_franchise||s,j=CNN.contentModel.analytics.cap_mediaType||s,M=CNN.contentModel.analytics.cap_topics||s,T=CNN.contentModel.pageType||s,r=CNN.contentModel.analytics.branding_content_page||s,n=CNN.contentModel.analytics.branding_content_zone||s,a=CNN.contentModel.analytics.branding_content_container||s,i=CNN.contentModel.analytics.branding_content_card||s,l=CNN.contentModel.analytics.contentId||s,"gallery"===T&&"string"==typeof CNN.contentModel.analytics.branding_content_page&&"default"!==CNN.contentModel.analytics.branding_content_page&&(x=CNN.contentModel.analytics.branding_content_page),h&&(Q="pivit widget")),CNN.omniture={branding_ad_page:s,branding_ad_zone:s,branding_ad_container:s,branding_ad_card:s,branding_content_page:r,branding_content_zone:n,branding_content_container:a,branding_content_card:i,branding_gallery:x,cap_author:C,cap_content_type:T,cap_genre:w,cap_franchise:k,cap_media_type:j,cap_show_name:N,cap_topic:M,video_opportunity:m,content_id:l,content_type:Q,friendly_name:d,full_gallery:z,gallery_name:g,gallery_slide:_,grid_size:u,headline:b,ireport_assignment:s,publish_date:y,rs_flag:f,section:o(CNN.contentModel),template_type:t(c)},"error"===CNN.omniture.template_type&&(CNN.omniture.section=["error",s]),"function"==typeof jQuery.fn.triggerAnalyticsMetadataReady?jQuery(document).triggerAnalyticsMetadataReady():jQuery(document).trigger("cnn-analytics-metadata-added")}function o(e){var t="",n="",a="",i=e,o=e.analytics||{};return a="undefined"!=typeof i.sectionName?i.sectionName:"undefined"!=typeof o.parentPath?o.parentPath.indexOf("/")>-1?o.parentPath.split("/")[1]:o.parentPath:"undefined"!=typeof i.layout&&"search"===i.layout?"search":"no-value-set",d[a]?(t=d[a].section,n=d[a].subsection||""):(t=a,n=""),[t,n]}function r(){try{var e=location.href.toLowerCase();window.jsmd=_jsmd.init(),-1===e.indexOf("/.element/ssi/ads.iframes/")&&-1===e.indexOf("/doubleclick/dartiframe.html")&&-1===e.indexOf("/search/")&&(_jsmd.plugin.gQuery("refresh")?jsmd.trackMetrics("dynamic-autoRefresh","autorefresh","cnn-autorefresh"):"gallery"!==CNN.omniture.template_type_content&&jsmd.send())}catch(t){console.log("JSMD/Analytics error: ",t)}}function l(e){var t=jQuery(".nav--plain-header"),n=jQuery("footer.l-footer"),a=CNN.Analytics.hpt;jQuery(e).find("a").each(function(){var e,i,o=jQuery(this),r=o.attr("href");"string"==typeof r&&(i="page",o.closest(".nav",t).length>0?i="header":o.closest(".nav-flyout__menu-item",t).length>0?i="header":o.closest(".l-footer",n).length>0&&(i="footer"),a.getHptValues(o,i).done(function(t){"object"==typeof t&&-1===r.indexOf(t.hptValue)?(e="'hpt="+t.hptValue+";hpt2="+t.hpt2Value+"'",o.attr("onclick","CNN.Analytics.utils.clickEventTracker(event, "+e+")")):"string"==typeof o.data("vr-track")&&r.length>1&&o.attr("onclick","CNN.Analytics.utils.clickEventTracker(event)")}))})}function c(){var e=jQuery("a","div.metadata-header__follow-icon"),t=jQuery("div.share-bar-whatsapp-container");e.click(function(){return s(this)}),t.click(function(){var e=document.querySelector(".share-bar-whatsapp-container").dataset,t=e.url+" "+e.title+" "+e.storyurl;return jQuery("html").hasClass("phone")&&(document.location=t),s(this)})}function s(e){var t=e.getAttribute("data-social-media-name");if("function"==typeof window.trackMetrics)try{window.trackMetrics({type:"social-click",data:{clickObj:{socialType:"social: "+t}}})}catch(n){}return!0}var d={videos:{section:"videos"},"watch-cnn":{section:"watch-cnn"},intl_homepage:{section:"cnn homepage",subsection:""},homepage:{section:"cnn homepage",subsection:""},us:{section:"us",subsection:""},world:{section:"world",subsection:""},politics:{section:"politics",subsection:""},tech:{section:"tech",subsection:""},health:{section:"health",subsection:""},entertainment:{section:"entertainment",subsection:""},living:{section:"living",subsection:""},aviation:{section:"travel",subsection:"aviation"},destinations:{section:"travel",subsection:"destinations"},foodanddrink:{section:"travel",subsection:"foodanddrink"},hotels:{section:"travel",subsection:"hotels"},intl_travel:{section:"travel",subsection:""},travel:{section:"travel",subsection:""},china:{section:"world",subsection:"china"},africa:{section:"world",subsection:"africa"},americas:{section:"world",subsection:"americas"},asia:{section:"world",subsection:"asia"},europe:{section:"world",subsection:"europe"},middleeast:{section:"world",subsection:"middleeast"},football:{section:"sport",subsection:"football"},motorsport:{section:"sport",subsection:"motorsport"},sailing:{section:"sport",subsection:"sailing"},golf:{section:"sport",subsection:"golf"},tennis:{section:"sport",subsection:"tennis"},horseracing:{section:"sport",subsection:"horseracing"},equestrian:{section:"sport",subsection:"equestrian"},skiing:{section:"sport",subsection:"skiing"},architecture:{section:"style",subsection:"architecture"},arts:{section:"style",subsection:"arts"},autos:{section:"style",subsection:"autos"},design:{section:"style",subsection:"design"},fashion:{section:"style",subsection:"fashion"},luxury:{section:"style",subsection:"luxury"},style:{section:"style",subsection:""}};return CNN.omniture=CNN.omniture||{},{gridSize:e,renamingTemplateType:t,addMetadataObject:i,jsmdTracking:r,addTrackingTags:l,setCookie:n,clickEventTracker:a,addSocialMediaInteractionMetrics:c}}(),CNN.Analytics.hpt=function(){"use strict";function e(e){var t="";return e="undefined"==typeof e?"":e.replace(/^zn-/,""),t=l[e]?l[e]:"no-value-set"}function t(e){var t="";return e="undefined"==typeof e?"":e.replace(/^cn-/,""),t=r[e]?r[e]:"no-value-set"}function n(n,a){var i,o={},r="no-value-set",l=r,c=CNN.contentModel.pageType,s=CNN.contentModel.sectionName||r,d=CNN.contentModel.type||r,u=r,p=r,h=r,g=r,_=r,y=r,m=r,f="zone-level",N=[],b=r,v=r,C=r,w=n.closest("[data-analytics]"),k=n.closest("[class^='zn zn-']"),j=n.closest("section.zn"),M=n.closest(".cn"),T=n.closest("[data-analytics-header]"),Q=r,z=r,x=r,O=[],S=CNN.Analytics.utils;return f=n.text().length>0?n.text().toLowerCase():"zone-level",k.length&&"A"!==k[0].tagName&&k[0].className&&(i=k[0].className,"undefined"!=typeof i&&(_=i.split(" ").length>1?i.split(" ")[2]:r)),j.length&&(i=j.data("zone-label"),"undefined"!=typeof i&&i.length&&(g=i),i=j.data("vr-zone"),"undefined"!=typeof i&&i.length&&(y=i)),i=w.length?w.data("analytics"):n[0].className.indexOf("cd-banner")>=0?n.nextAll("[data-analytics]").data("analytics"):void 0,"undefined"!=typeof i&&i.length&&(l=i.split("_"),l=l.length?l:[],b=l[0].length>0?l[0]:r,v=l[1],h=l.length>2?l[2]:r,l.length>=4&&l[3].length>0?m=l[3]:0===n.text().length||n.text().indexOf("<img")>=0?(m="image",f="image"):m="text"),n.eq(0).text()&&(p=n.eq(0).text(),p=p.replace(/[ ]/g,"-"),p.indexOf("<img")>=0&&(p="image-file")),i=T.data("analytics-header"),"header"===a&&"string"==typeof i&&i.split("_").length&&(u="header",O=i.split("_"),O=O.length?O:[],Q="main-menu"===O[0]||"flyout-menu"===O[0]?O[1].toLowerCase():r,z="flyout-submenu"===O[0]?O[1].toLowerCase():r,x=r),i=w.data("analytics"),"footer"===a&&"string"==typeof i&&i.split("_").length&&(O=i.split("_"),O=O.length?O:[],1===O.length&&(u="footer",Q=O[0].toLowerCase(),z=r,x=r),2===O.length&&(u=O[0].toLowerCase(),Q=O[1].toLowerCase(),z=r,x=r),3===O.length&&(u=O[0].toLowerCase(),Q=O[1].toLowerCase(),z=O[2].toLowerCase(),x=r)),"page"===a&&M.length&&(i=M[0].className,"undefined"!=typeof i&&(N=i.split(/\s+/),N.length&&(C=N[N.length-1]))),o={linkText:f,hpt_page_pageIndicator:d,hpt_page_gridSize:S.gridSize(),hpt_page_section:s,hpt_page_template:S.renamingTemplateType(c),hpt_page_zoneId:y,hpt_page_zoneLabel:g,hpt_page_containerId:C,hpt_page_containerLabel:b,hpt2_page_pageIndicator:d,hpt2_page_gridSize:S.gridSize(),hpt2_page_section:s,hpt2_page_template:S.renamingTemplateType(c),hpt2_page_zoneId:y,hpt2_page_zoneType:e(_),hpt2_page_containerId:C,hpt2_page_containerType:t(v),hpt_header_globalIndicator:u,hpt_header_gridSize:S.gridSize(),hpt_header_section:s,hpt_header_template:S.renamingTemplateType(c),hpt_header_level1:Q,hpt_header_level2:z,hpt_header_level3:x,hpt_header_linkElement:f,hpt_header_linkType:m,hpt2_header_globalIndicator:u,hpt2_header_gridSize:S.gridSize(),hpt2_header_section:s,hpt2_header_template:S.renamingTemplateType(c),hpt2_header_level1:Q,hpt2_header_level2:z,hpt2_header_level3:x,hpt2_header_linkElement:f,hpt2_header_linkType:m}}function a(e,t,n){var a=jQuery.Deferred();return fastdom.read(function(){var i,o,r,l=t.data("filter-hpt"),c=t.data("filter-"+e),s="string"==typeof l,d="string"==typeof c,u="",p=n.split("_");if(d||s){for(u=d?c:l,i=u.split("_"),o=0,r=i.length;r>o;o+=1)p[o]&&""!==i[o]&&(p[o]=i[o]);n=p.join("_")}a.resolve(n)}),a.promise()}function i(e,t){return{hptValue:CNN.Utils.b64Encode(e.replace("…","")).replace(/\r\n/g,""),hpt2Value:CNN.Utils.b64Encode(t.replace("…","")).replace(/\r\n/g,"")}}function o(e,t){var o=n(e,t),r="",l="";return"page"===t?(r=o.hpt_page_pageIndicator+"_"+o.hpt_page_gridSize+"_"+o.hpt_page_section+"_"+o.hpt_page_template+"_"+o.hpt_page_zoneId+"_"+o.hpt_page_zoneLabel+"_"+o.hpt_page_containerId+"_"+o.hpt_page_containerLabel,l=o.hpt2_page_pageIndicator+"_"+o.hpt2_page_gridSize+"_"+o.hpt2_page_section+"_"+o.hpt2_page_template+"_"+o.hpt2_page_zoneId+"_"+o.hpt2_page_zoneType+"_"+o.hpt2_page_containerId+"_"+o.hpt2_page_containerType):(r=o.hpt_header_globalIndicator+"_"+o.hpt_header_gridSize+"_"+o.hpt_header_section+"_"+o.hpt_header_template+"_"+o.hpt_header_level1+"_"+o.hpt_header_level2+"_"+o.hpt_header_level3+"_"+o.hpt_header_linkElement+"_"+o.hpt_header_linkType,l=o.hpt2_header_globalIndicator+"_"+o.hpt2_header_gridSize+"_"+o.hpt2_header_section+"_"+o.hpt2_header_template+"_"+o.hpt2_header_level1+"_"+o.hpt2_header_level2+"_"+o.hpt2_header_level3+"_"+o.hpt2_header_linkElement+"_"+o.hpt2_header_linkType),jQuery.when(a("hpt1",e,r),a("hpt2",e,l)).then(i)}var r={"list-hierarchical-small-horizontal":"lead+list:lead+headlines-w/images","list-hierarchical-xs":"lead+list:lead+headlines","list-large-horizontal":"list:full-cards","list-large-vertical":"vertical-strip:full-cards","list-small-horizontal":"list:headlines+images","list-small-vertical":"vertical-strip:headlines+images","list-xs":"headlines","grid-medium":"grid:grid(spaced)","grid-small":"grid:grid","stack-large-horizontal":"list:full-cards(spaced)","stack-large-vertical":"vertical-strip:full-cards(spaced)","stack-medium-horizontal":"list:headlines+images(spaced)","stack-medium-vertical":"vertical-strip:headlines+images(spaced)","carousel-large-strip":"carousel:large","carousel-medium-matrix":"carousel:double-deck","carousel-medium-strip":"carousel:standard","stack-ul":"unknown name","section-preview":"unknown name"},l={"left-fluid-right-stack":"hero-3","left-fluid-bg-bleed":"superhero","left-fluid":"priority+2","right-stack-bg-inline":"hero-plus","right-stack-bg-bleed":"full-bleed",staggered:"staggered",balanced:"balanced","60-40":"priority+1","30-70":"grid-right","40-60":"unknown name","70-30":"unknown name",body:"unknown name","single-column":"unknown name","zone-background":"unknown name","zone-banner":"unknown name","zone-header":"unknown name"};return{getHptValues:o}}(),CNN.Gallery.analytics=function(){"use strict";function e(e,t){var n=jQuery(e),a={},i=[],o="",r={},l="",c=!1,s=[],d="",u="",p=1;for(c="boolean"==typeof n.data("is-gallery")?n.data("is-gallery"):!1,a={video:0,article:0,gallery:0,image:0,hyperlink:0,matched:0},jQuery("div.owl-item div[data-analytics]",e).each(function(){var e,t=jQuery(this);e=t.data("analytics").split("_"),s.push(e[2]||""),u=e[1]}),d=s.length>0?s[0]:d;p<s.length;p++)if(s[p]!==d){d="multimedia";break}return"boolean"==typeof t&&t&&(o="owl-nav"===e.className?e.offsetParent.id.split("_")[1]:e.id.split("_")[1],r=document.getElementById("cn-jumbotron-details-container_"+o),jQuery.each(jQuery(r).find(".js-jumbotron-card-wrapper.jumbotron-card-wrapper.active-card"),function(e,t){i=t.firstChild.className.match(/cd\-\-article/),null===i&&(i=t.firstChild.className.match(/cd\-\-(video|image|gallery|hyperlink)/)),null!==i&&(l=i[0].replace("cd--",""))}),jQuery.each(jQuery(r).find("article.cd"),function(e,t){t.className.indexOf("cd--video")>-1?a.video++:t.className.indexOf("cd--article")>-1?a.article++:t.className.indexOf("cd--image")>-1?a.image++:t.className.indexOf("cd--gallery")>-1?a.gallery++:t.className.indexOf("cd--hyperlink")>-1&&a.hyperlink++}),a.video>0&&(d="video",a.matched++),a.article>0&&(d="article",a.matched++),a.image>0&&(d="image",a.matched++),a.hyperlink>0&&(d="hyperlink",a.matched++),a.gallery>0&&(d="gallery",a.matched++),a.matched>1&&(d="multimedia")),d=d.length>0?"carousel_"+d:d,{contentType:d,carouselType:u,isGallery:c}}function t(e){return"undefined"!=typeof jQuery(e).data(u)?jQuery(e).data(u):""}function n(e){var t=-1,n="",a=jQuery(e),i=a.find(p)||[];return t=a.data("active")||"",jQuery.isNumeric(t)&&t>0&&(n=jQuery(i[t-1]).find("img").attr("src"),n="undefined"!=typeof n?n.substring(n.lastIndexOf("/")+1):""),n}function a(e,t){var n=[],a=0;return t?(n=jQuery(CNN.Jumbotron.Constants.CONST_SMALL_CAROUSEL_SELECTOR),n.find(".owl-item").each(function(e,t){jQuery(t).hasClass("cloned")||a++})):a="undefined"!=typeof jQuery(e).data(h)?jQuery(e).data(h):"",a}function i(e){var t=jQuery(".owl-stage",e).find(".owl-item.active .el__resize img:first").attr("alt");return"string"!=typeof t?"":t.replace(/[\u0250-\ue007]/g,"").substr(0,40)}function o(e,t){var n=[],a=0;return t?(n=jQuery(CNN.Jumbotron.Constants.CONST_SMALL_CAROUSEL_SELECTOR),n.find(".owl-item").each(function(e,t){return!jQuery(t).hasClass("cloned")&&(a++,jQuery(t).hasClass("active"))?!1:void 0})):a=i(e),a}function r(i,r){var l={};return l=e(i,r),l.galleryName=t(i),l.galleryType=l.isGallery?"photo gallery":"carousel",l.imageName="carousel"!==l.galleryType?n(i):"",l.slideCount=a(i,r),l.slideNumber=o(i,r),"carousel"!==l.galleryType&&(l.carouselType=""),l}function l(e,t){"undefined"!=typeof t.isJumbotron&&t.isJumbotron===!0&&(e.data.page_view=!0,e.data.carousel_type="jumbotron")}function c(e){var t=CNN.CurrentWidth.getClientWidth()*CNN.CurrentHeight.getClientHeight(),n=t/2+1,a=e.target.clientWidth*e.target.clientHeight,i=r(e.currentTarget,e.isJumbotron),o=CNN.Analytics.hpt;o.getHptValues(jQuery(e.currentTarget),"page").done(function(t){var o={type:"cnngallery-click",data:{page_view:!1,gallery_name:i.galleryName,image_name:i.imageName,content_type:i.contentType,carousel_type:i.carouselType,gallery_type:i.galleryType,gallery_slide_count:i.slideCount,gallery_slide:i.slideNumber,hpt:t.hptValue,hpt2:t.hpt2Value}};o.data.page_view=a>=n?!0:!1,l(o,e),CNN.ads.events.refreshGalleryRailAd(e),null!==window.trackMetrics&&void 0!==window.trackMetrics&&window.trackMetrics(o)})}function s(e){jQuery(CNN.Carousel.carouselSelector,e).off("carousel-action-event").on("carousel-action-event",c)}function d(){var e,t,n=0;try{if(t=function(e,t){"undefined"!=typeof t&&t.actionType===CNN.Jumbotron.Constants.CONST_EVENT_CAROUSEL_ACTION_TYPE_CLICK?(e.isJumbotron=!0,c(e)):("click"===e.type||"changed"===e.type||"dragged"===e.type)&&(e.isJumbotron=!0,c(e))},window.cnnJumbotronManager&&window.cnnJumbotronManager.getJumbotrons)for(e=window.cnnJumbotronManager.getJumbotrons();n<e.length;n++)e[n]instanceof CNN.Jumbotron.Container&&"undefined"!=typeof e[n].jumbotronElementRaw&&(jQuery(e[n].jumbotronElementRaw).on("carousel-action-event",t),Modernizr.touch?jQuery(e[n].jumbotronElementRaw).find(".cn-jumbotron-card-details").on(CNN.Carousel.events.changed,t):(jQuery(e[n].jumbotronElementRaw).find(".owl-nav").on("click",t),jQuery(e[n].jumbotronElementRaw).find(".jumbotron-small-carousel").on(CNN.Carousel.events.dragged,t)))}catch(a){console.log("Error caught in initJumbotronTracking: %s",a.message)}}var u="galleryname",p="[data-slidename]",h="slide-count";return{init:s,initJumbotronTracking:d,trackGalleryClick:c}}(),"object"==typeof CNN.contentModel&&CNN.contentModel.lazyLoad?jQuery(document).onZonesAndDomReady(function(){"use strict";initAnalytics()}):jQuery(document).ready(function(){"use strict";initAnalytics()}),jQuery(window).on("load",function(){"use strict";window.hasOwnProperty("twttr")&&window.twttr.hasOwnProperty("widgets")&&window.twttr.ready(function(){window.twttr.events.bind("click",twttrWidgetTweetButtonClickHandler)})});
//# sourceMappingURL=cnn-analytics.min.js.map