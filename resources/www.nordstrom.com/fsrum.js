!function(e,n,r){function t(e,n,r){var t=n.split(".");r="undefined"==typeof r?null:r;for(var o=0;o<t.length;o++){var a=t[o];if(!e||!e[a])return r;e=e[a]}return e}function o(e){var n=new RegExp(e+"=([^;]+)"),r=n.exec(document.cookie);return null!=r?unescape(r[1]):null}function a(e){try{E.tracer&&O.push(e)}catch(n){console.log(E.fileName+": "+n.message+"\nInner exception: "+e+"\n")}}function i(){this.getRawSettingCategory=function(e){var n=window.nord&&window.nord.config&&window.nord.config.settings;if(n){var r=window.nord.config.settings;if(r&&r.length>0)for(var t=0;t<r.length;t++)if(r[t][e])return r[t][e]}return null},this.getRawAnalytics=function(){return this.getRawSettingCategory("analytics")},this.rawAnalytics=this.getRawAnalytics(),this.isDefinedNordConfigAnalytics=function(){var e=window.nord&&window.nord.config&&window.nord.config.settings&&window.nord.config.settings.analytics;return e},this.getCategoryName=function(){var e=void 0;return this.rawAnalytics&&this.rawAnalytics.categoryName?e=this.rawAnalytics.categoryName:this.isDefinedNordConfigAnalytics()&&window.nord.config.settings.analytics.categoryName&&(e=window.nord.config.settings.analytics.categoryName),e},this.getPageType=function(){var e=void 0;return this.rawAnalytics&&this.rawAnalytics.pageType?e=this.rawAnalytics.pageType:this.isDefinedNordConfigAnalytics()&&window.nord.config.settings.analytics.pageType&&(e=window.nord.config.settings.analytics.pageType),e},this.getPageTemplate=function(){var e=void 0;return this.rawAnalytics&&this.rawAnalytics.pageTemplate?e=this.rawAnalytics.pageTemplate:this.isDefinedNordConfigAnalytics()&&window.nord.config.settings.analytics.pageTemplate&&(e=window.nord.config.settings.analytics.pageTemplate),e}}function s(){return window.digitalData}function d(){if(s())return!0;var e=S.getPageTemplate(),n=e&&"WCM"===e.toUpperCase();return n}function c(e){for(var n=e,r=[[".",""],[":",""],["&amp;",""],["&",""],[",",""],["<",""],[">",""],["(",""],[")",""]],t=0;t<r.length;t++)n=n.replace(r[t][0],r[t][1]);return n}function m(){var e=S.getPageType(),n=S.getCategoryName(),r="Unknown";return r=window.PageParameters&&window.PageParameters.ioCoremetricsPageId?c(window.PageParameters.ioCoremetricsPageId):e?c(e):n?c(n):window.PageTypeParameters&&window.PageTypeParameters.PageType?c(window.PageTypeParameters.PageType):window.PageParameters&&window.PageParameters.pageName?c(window.PageParameters.pageName):window.PageParameters&&window.PageParameters.PageType?c(window.PageParameters.PageType):t(window,"digitalData.page.category.pageType","Unknown"),"myaccount_accountsummary_aspx"===r&&document.location.href.indexOf("origin=signin")>0&&(r="Create Account"),r}function g(){var e=R()?W[1]:W[0];return e}function u(){var e=document.getElementById("shopping-bag-count")||document.getElementById("shoppingBagCount"),n=e?parseInt(e.textContent,10)||0:0;return n}function w(){var e=(S.getPageType()||"").toLowerCase();return"product page"===e}function f(){var e,n;if(w()){var r=S.getRawSettingCategory("product")||t(window,"nord.config.settings.product");return r&&r.saleTypeId?"4"==r.saleTypeId||"8"==r.saleTypeId:!1}return window.PageParameters?(n=window.PageParameters.parentCategoryId,e=window.PageParameters.categoryId,60163514===e||60163514===n):!1}function l(){var e,n,r=o(A()?"nordstromdev":"nordstrom");return null===r?!1:(e=r.split("shopperattr"),e.length<=1?!1:(n=e[1].split("|"),"50"===n[n.length-1]))}function p(){var e=t(window,"mmcore.GenInfo.A3468_MOW_NavOptimization_v2.element1","");return e?e:f()?l()?"EA Qualified":"EA Unqualified":g().toLowerCase().indexOf("secure")>=0?"Secure":d()?"WCM Pages":"Legacy Pages"}function y(){var e=o("fsr.r");if(e)try{var n=JSON.parse(e)||{};return n.i}catch(t){B.logError(t)}return r}function h(){var e;try{window.cmRetrieveUserID(function(n){e=n})}catch(n){}return e}function v(){return window.PageParameters&&window.PageParameters.SessionId?c(window.PageParameters.SessionId):window.nord&&window.nord.config&&window.nord.config.settings&&window.nord.config.settings.shopper&&window.nord.config.settings.shopper.sessionId?c(window.nord.config.settings.shopper.sessionId):r}function T(){try{return"Unknown"!==m()}catch(e){B.logError(e)}}function P(){var e="myshop.nordstrom.com"===D;return e}function R(){if(P())return!1;var e=("m"===W[0].toLowerCase().substr(0,1)||"moov"===W[0].toLowerCase())&&D.indexOf(".nordstrom.com")>-1;return e}function A(){var e=P()||"dev"===W[1].toLowerCase()||"mstage"===W[0].toLowerCase().substr(0,6)||D.indexOf(".dev.nordstrom")>-1;return e}function C(){function e(e){if(!w)return B.logError("getKeyByHostName: Empty hostName"),u;for(var n in w)if(w.hasOwnProperty(n))try{for(var r=w[n],t=0;t<r.length;t++){var o=r[t];if(e.match(o))return n}}catch(a){B.logError(a)}return u}function n(){var n=e(D);return L=n,n}var r,t,o,a=document.createElement("iframe");a.src="javascript:false",(a.frameElement||a).style.cssText="width: 0;height:0;border:0",o=document.getElementsByTagName("head")[0],o.insertBefore(a,o.firstChild);try{t=a.contentWindow.document}catch(i){r=document.domain,a.src='javascript:var d=document.open();d.domain="'+r+'";void(0);',t=a.contentWindow.document}var s="Y5J7S-HA39B-6SBRH-CKF8B-XWKBB",d="5LCB3-TKEVN-QQJHH-Q3RTT-LDNHZ",c="PRG3R-YLCTV-MRDD3-ZBPVX-2A875",m="AJ4XB-LJJD3-5HD6Q-LVWWW-6U3K2",g="VECYV-D5RT6-29P7S-SZVJV-XMZUE",u="N67DL-RTLYV-GD5DA-KH9DN-57JCL",w={};w[s]=["^m.[ot]shop.dev.nordstrom.com$","^m.[ot]secure.dev.nordstrom.com$"],w[d]=["^m.shop.nordstrom.com$","^m.secure.nordstrom.com$"],w[c]=["^[otu]shop.dev.nordstrom.com$","^[otu]secure.dev.nordstrom.com$","^[adt].aws.products.dev.nordstrom.com$","^myshop.dev.nordstrom.com$"],w[m]=["^shop.nordstrom.com$","^secure.nordstrom.com$"],w[g]=["^.+.staging.nordstrom.com$"],t.open()._l=function(){var e=this.createElement("script");r&&(this.domain=r),e.id="boomr-if-as",e.src="//c.go-mpulse.net/boomerang/"+n(),BOOMR_lstart=(new Date).getTime(),this.body.appendChild(e)},t.write('<body onload="document._l();">'),t.close()}var B={},E={version:"v3.1.9",fileName:"fsrum.js",tracer:!0,debug:!1,maximumErrorsLimit:2,BoomerangWaitTime:10,nordRumWaitTime:100,nordRumMaxTries:50},I={scriptLoadedTime:(new Date).valueOf(),fsrumIsReadyWaitTimeMs:-1,boomrIsReadyWaitTimeMs:-1},O=[],M=[],N=1,W=window.location.hostname.split("."),D=window.location.hostname.toLowerCase(),L="NOT DEFINED",S=new i,b=[["h.pg",m,"pg"],["h.ab",p,"abTest"],["Items_in_Cart",u,"cartItems"],["fsr.id",y,r],["nord.sessionId",v,r],["coreld6",h,r]];B.metricsToBoomerang=function(e){var r,t,o;try{if("undefined"!=typeof BOOMR){a("Adding values to SOASTA..."),I.boomrIsReadyWaitTimeMs=(new Date).valueOf()-I.scriptLoadedTime;for(var i=0;i<b.length;i++)r="function"==typeof b[i][0]?b[i][0]():b[i][0],t="function"==typeof b[i][1]?b[i][1]():b[i][1],o="function"==typeof b[i][2]?b[i][2]():b[i][2],t&&(o&&(a("    SOASTA["+o+"] = "+t),n[o]=t),r&&(a("    BOOMR.addVar("+r+" , "+t+")"),BOOMR.addVar(r,t)));e||BOOMR.subscribe("page_ready",function(){try{B.metricsToBoomerang(!0)}catch(e){B.logError(e)}})}else a("BOOMR not defined, waiting "+E.BoomerangWaitTime+"ms..."),setTimeout(B.metricsToBoomerang,E.BoomerangWaitTime)}catch(s){B.logError(s)}},B.logError=function(e){a("Error! --> "+e.message||"Unknown error type");try{E.maximumErrorsLimit>0&&window.Raygun&&Raygun.send&&(e.message="FSRUM: "+(e.message||"Unknown error type"),E.maximumErrorsLimit=E.maximumErrorsLimit-1,Raygun.send(e,null,["mPulse","FSRUM","MSRUM"]))}catch(n){}E.debug&&console.error(e)},B.printStackTrace=function(){for(var e="****** Begin nord.rum stack trace  ******\n",n=0;n<O.length;n++)e+=n+") "+O[n]+"\n";e=e+"******  End nord.rum stack trace  ******\n"+B.version()+"Total tries: "+N+"\n",e=e+"******  RUM Performance:\nfsrumIsReadyWaitTimeMs: "+I.fsrumIsReadyWaitTimeMs+"ms\nboomrIsReadyWaitTimeMs: "+I.boomrIsReadyWaitTimeMs+"ms\nlastUsedApiKey: "+L+"\n",console.log(e)},B.version=function(){return E.fileName+" "+E.version+"\n"},B.printWatchedValues=function(){for(var e="****** Begin nord.rum watch ******\n",n=0;n<M.length;n++)e+=n+") "+M[n]+"\n";return e+"******  End nord.rum watch  ******\n"+B.version()},B.run=function(){if(T()){a("Begin RUM metrics collection");try{I.fsrumIsReadyWaitTimeMs=(new Date).valueOf()-I.scriptLoadedTime}catch(e){B.logError(e)}B.metricsToBoomerang(),C()}else a("page not ready, waiting "+E.nordRumWaitTime+"ms..."),N<=E.nordRumMaxTries?setTimeout(B.run,E.nordRumWaitTime):C(),N+=1},e.rum=B,B.run()}(window.red=window.red||{},window.SOASTA=window.SOASTA||{});