/*! shaw_videodrome | version: 2.32.1 */

/*!
 * analytics.js
 */
!function(){"use strict";function a(){}a.sendEvent=function(a,b,c,d){if(s.linkTrackEvents="",s.linkTrackVars="",c.length>0&&(s.linkTrackVars+=",events",s.linkTrackEvents=c.join(","),s.events=s.linkTrackEvents),null!==b)for(var e in b)s.linkTrackVars+=","+e,s[e]=b[e];s.linkTrackVars&&(s.linkTrackVars=s.linkTrackVars.substr(1)),s.tl(this,"o",a,null,function(){d&&(window.location.href=d)})},a.attachDrawerEvents=function(a){function b(a){var b,d=e.replace(/{type}/,a).replace(/{drawerName}/,c.find(".shawVideo_drawer_title").html()),f=Array.prototype.slice.call(arguments,1);for(b=0;b<f.length;b++)d+=" - "+(f[b]?f[b]:"n/a");return d}var c=a.$htmlId,d=this,e="[{type}] {drawerName}";c.on("click.analytics",".shawVideo_drawerItem:not(.shawVideo_drawer_seeMoreCard) a",function(b){var c,e,f="",g={},h=$(this),i=h.parent(".shawVideo_drawerItem");b.preventDefault(),g.showName=i.find(".shawVideo_drawerItem_showName").html(),g.drawerName=a.drawerTitle,g.season=i.find(".shawVideo_drawerItem_season").html(),g.episode=i.find(".shawVideo_drawerItem_episode").html(),g.episodeName=i.find(".shawVideo_drawerItem_episodeName").html(),g.position=a.position,g.url=s.pageName,f+=JSON.stringify(g),c={eVar40:f},e=i.attr("data-expiry-countdown"),isNaN(e)||(c.eVar59=e),f=h.hasClass("shawVideo_RestrictedContent")?"[Sign In] Drawer Locked Item: "+f.replace(/[{}]/g,"").replace(/","/g,'" , "'):"[drawer card] "+f.replace(/[{}]/g,"").replace(/","/g,'" , "'),d.sendEvent(f,c,[],h.attr("href"))}),c.on("click.analytics",".shawVideo_drawer_seeMoreCard",function(a){var b="[see more card] ",c=$(this);a.preventDefault(),b+=c.parents(".shawVideo_drawer").find(".shawVideo_drawer_title").html(),d.sendEvent(b,{eVar40:b},[],c.find("a:first").attr("href"))}),c.on("click.analytics",".shawVideo_drawer_title[href]",function(a){var c=b("drawer title");a.preventDefault(),d.sendEvent(c,{eVar40:c},[],$(this).attr("href"))}),c.on("click.analytics",".shawVideo_drawer_btn:not(.disabled)",function(a){var c=b("pagination");d.sendEvent(c,{eVar40:c},[])}),c.on("change.analytics",".shawVideo_dropDown select",function(a){var c=b("season picker",window.location.pathname,"Season "+$(this).val());d.sendEvent(c,{eVar40:c},[])})},a.attachShowsLikeThisEvents=function(a){var b=a.$htmlId,c=this;b.on("click.analytics",".showsLikeThis-item",function(a){var b="",d=$(this);a.preventDefault(),b="[Shows Like This] "+d.find("img").attr("alt"),c.sendEvent(b,{eVar40:b},[],d.find("a:first").attr("href"))}),b.on("click.analytics",".showsLikeThis-viewAll",function(a){var b="",d=$(this);a.preventDefault(),b="[Shows Like This] View All Shows",c.sendEvent(b,{eVar40:b},[],d.attr("href"))})},window.ShawVideoAnalytics=a}(),/*!
 * contentbrowser.js
*/
function(){"use strict";function a(a){if(this.htmlId=a.targetHtmlId?a.targetHtmlId:"",this.$htmlId=$(this.htmlId),this.itemsPerPage=a.itemsPerPage?a.itemsPerPage:100,this.isShowPage=a.isShowPage?a.isShowPage:!1,this.hrefSchema=a.hrefSchema?a.hrefSchema:"/{{showName}}/video/{{clipType}}/{{episodeTitle}}/",this.drawerType=a.drawerType?a.drawerType:{type:"latest"},this.DefaultNonAuthRestrictionID=a.DefaultNonAuthRestrictionID?a.DefaultNonAuthRestrictionID:"33130",this.currentPage=1,this.totalPages=-1,a.isShowPage===!0&&this.$htmlId.addClass("shawVideo_showPage"),this.contentTitle=a.contentTitle?a.contentTitle:"",this.endpoint=a.endpoint?a.endpoint:"",0===this.endpoint.length){var c=b("cbquery");this.endpoint=c;var d=b("cbtitle");""!==d&&(this.contentTitle=d)}this.startIdx=0,this.endIdx=0,this.maxCount=-1,this.videoList=null,this.sort=a.sort?a.sort:{pubDate:"desc"},this.wrapperElement="shawVideo_videoList",this.isIE8=!1,this._init()}function b(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var b=new RegExp("[\\?&]"+a+"=([^&#]*)"),c=b.exec(location.search);return null===c?"":decodeURIComponent(c[1].replace(/\+/g," "))}function c(a){return a.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-")}a.prototype.setMaxCount=function(a){this.maxCount=a,this.totalPages=Math.ceil(this.maxCount/this.itemsPerPage),this.startIdx=1,this.maxCount>this.itemsPerPage?this.endIdx=this.itemsPerPage:this.endIdx=this.maxCount,this.maxCount>this.itemsPerPage&&this._buildPagination(),ShawVideoIngestor.getVideoList(this)},a.prototype.setVideoList=function(a){this.videoList=a,this._renderPage()},a.prototype.navPrevious=function(){return this.navGoToPage(this.currentPage-1),!1},a.prototype.navNext=function(){return this.navGoToPage(this.currentPage+1),!1},a.prototype.navGoToPage=function(a){return this.endIdx=a*this.itemsPerPage,this.startIdx=this.endIdx-(this.itemsPerPage-1),this.currentPage=a,$("html, body").scrollTop(this.$htmlId.offset().top),this.$htmlId.find(".shawVideo_currentPage").html(this.currentPage+" of "+this.totalPages),this._attachPaginationEvents(),this._displayPlaceholder(this.$wrapperElement),ShawVideoIngestor.getVideoList(this),!1},a.prototype.sortCatalog=function(a){return this.sort=a,this._displayPlaceholder(this.$wrapperElement),ShawVideoIngestor.getVideoList(this),!1},a.prototype._init=function(){VideoPlayerUtils.detectIE8(this);var a='<div class="'+this.wrapperElement+' shawVideo_border-box"></div>';""!==this.contentTitle&&(a='<div class="shawVideo_cb_title shawVideo_border-box">'+this.contentTitle+"</div>"+a),this.$htmlId.html(a),this.$wrapperElement=$(this.htmlId+" ."+this.wrapperElement),this._displayPlaceholder(this.$wrapperElement),ShawVideoIngestor.getMaxCount(this)},a.prototype._renderPage=function(){this._createVideoItems(),$(".shawVideo_videoThumb").load(function(){$(this).parents(".shawVideo_videoItem").addClass("fadeIn")}),$(".shawVideo_videoThumb").error(function(){$(this).parents(".shawVideo_videoItem").addClass("fadeIn").addClass("shawVideo_videoThumb_error"),$(this).hide()})},a.prototype._createVideoItems=function(){var a,b,c,d;b=this.videoList.size,d=[];for(var e=0;b>e;e++)a={},a.thumbUrl=this.videoList.entries[e].thumbnail,a.showName=this.videoList.entries[e].showName,a.episodeTitle=this.videoList.entries[e].episodeTitle,a.epochAirDate=this.videoList.entries[e].airdate,a.airdate=VideoPlayerUtils.convertEpochToMonthDateYear(this.videoList.entries[e].airdate),a.duration=VideoPlayerUtils.convertSecondsToMinutes(this.videoList.entries[e].content[0].duration),a.contentID=this.videoList.entries[e].contentID,a.clipType=this.videoList.entries[e].clipType,a.restrictionID=this.videoList.entries[e].restrictionID,a.isHTML5=this.videoList.entries[e].isHTML5,this.videoList.entries[e].season&&(a.season=this.videoList.entries[e].season),this.videoList.entries[e].episode&&(a.episode=this.videoList.entries[e].episode),a.destinationUrl="destination_url",c=this._videoItemElement(a),d.push(c);this._appendVideoItemElement(d.join(""))},a.prototype._appendVideoItemElement=function(a){this.$wrapperElement.html(a),this.isIE8&&$(".shawVideo_videoItem:nth-child(4n+1)").addClass("shawVideo_nth-child-4nP1")},a.prototype._videoItemElement=function(a){var b,c;return c=this._buildHref(this.hrefSchema,a),b=["<div class='shawVideo_videoItem' data-content_id='"+a.contentID+"'>","<a class='shawVideo_ThumbnailLink' href='"+c+"'>","<img class='shawVideo_videoThumb' src='"+a.thumbUrl+"'/>","</a>","<span class='shawVideo_showName'>"+a.showName+"</span>","<span class='shawVideo_episodeName'><a href='"+c+"'>"+a.episodeTitle+"</a></span>"],a.season&&b.push("<span class='shawVideo_seasonNumber'>Season "+a.season+"</span>"),a.episode&&b.push("<span class='shawVideo_episodeNumber'>Episode "+a.episode+"</span>"),b.push("<span class='shawVideo_duration'>"+a.duration+"</span>"),b.push("<span class='shawVideo_airDate'>"+a.airdate+"</span>"),b.push("</div>"),a.restrictionID.length>0&&a.restrictionID!=this.DefaultNonAuthRestrictionID&&(b[1]="<a class='shawVideo_ThumbnailLink shawVideo_RestrictedContent' href='"+c+"'>"),b.join("")},a.prototype._buildHref=function(a,b){var d,e;e=a,d={"{{showName}}":c(b.showName),"{{contentID}}":b.contentID,"{{episodeTitle}}":c(b.episodeTitle),"{{clipType}}":c(b.clipType)};for(var f in d)e=e.replace(f,d[f]);return e},a.prototype._buildPagination=function(){this.$htmlId.append('<div class="shawVideo_pagination shawVideo_border-box"><a href="" class="shawVideo_prev">Previous</a> <span class="shawVideo_currentPage">'+this.currentPage+" of "+this.totalPages+'</span> <a href="" class="shawVideo_next">Next</a></div>'),this._attachPaginationEvents()},a.prototype._attachPaginationEvents=function(){this.$htmlId.find(".shawVideo_pagination").find(".disabled").removeClass("disabled"),this.$htmlId.find(".shawVideo_pagination").children().off("click"),1==this.currentPage?(this.$htmlId.find(".shawVideo_pagination .shawVideo_prev").addClass("disabled"),this.$htmlId.find(".shawVideo_pagination .shawVideo_prev").on("click",function(){return!1})):this.$htmlId.find(".shawVideo_pagination .shawVideo_prev").on("click",$.proxy(this.navPrevious,this)),this.currentPage==this.totalPages?(this.$htmlId.find(".shawVideo_pagination .shawVideo_next").addClass("disabled"),this.$htmlId.find(".shawVideo_pagination .shawVideo_next").on("click",function(){return!1})):this.$htmlId.find(".shawVideo_pagination .shawVideo_next").on("click",$.proxy(this.navNext,this))},a.prototype._buildSort=function(){var a,b,c,d,e;e=this,a=['<select class="shawVideo_sort shawVideo_border-box">','<option class="shawVideo_sortBy_title" data-sort_type="title" data-sort_order="asc">',"A - Z","</option> ",'<option class="shawVideo_sortBy_title" data-sort_type="title" data-sort_order="desc">',"Z - A","</option> ",'<option class="shawVideo_sortBy_airdate" data-sort_type="pubDate" data-sort_order="asc">',"Airdate: Earliest to Latest","</option> ",'<option class="shawVideo_sortBy_airdate" data-sort_type="pubDate" data-sort_order="desc">',"Airdate: Latest to Earliest","</option> ",'<option class="shawVideo_sortBy_recency" data-sort_type="added" data-sort_order="asc">',"Recency: Earliest to Latest","</option> ",'<option class="shawVideo_sortBy_recency" data-sort_type="added" data-sort_order="desc">',"Recency: Latest to Earliest","<option> ","</select>"],a=a.join(""),this.$htmlId.find(".shawVideo_cb_title").after(a);for(var f in this.sort)c=f,d=this.sort[c];this.$htmlId.find('.shawVideo_sort option[data-sort_type="'+c+'"][data-sort_order="'+d+'"]').attr("selected","selected"),this.$htmlId.find(".shawVideo_sort").on("change",function(){var a=$(this).find("option:selected");return b={},c=a.data("sort_type"),d=a.data("sort_order"),b[c]=d,e.sortCatalog(b),!1})},a.prototype._displayPlaceholder=function(a){var b,c;c=[],b=['<div class="shawVideo_videoItem shawVideo_placeholder">','<div class="shawVideo_videoThumb"></div>','<div class="shawVideo_placeholder_title"></div>','<div class="shawVideo_placeholder_text"></div>','<div class="shawVideo_placeholder_text"></div>','<div class="shawVideo_placeholder_text"></div>',"</div>"],b=b.join("");for(var d=0;d<this.itemsPerPage;d++)c.push(b);c.join(""),a.html(c)},window.ShawVideoCatalog=a}(),/*!
 * drawer.js
 */
function(){"use strict";function a(a){this.htmlId=a.targetHtmlId?a.targetHtmlId:"",this.itemsPerPage=a.itemsPerPage?a.itemsPerPage:100,this.displayShowName="undefined"!=typeof a.displayShowName?a.displayShowName:!0,this.hrefSchema=a.hrefSchema?a.hrefSchema:"/{{showname}}/video/{{cliptype}}/{{episodetitle}}/",this.showPageHrefSchema=a.showPageHrefSchema?a.showPageHrefSchema:"/{{showname}}/",this.drawerType=a.drawerType?a.drawerType:{type:"latest"},this.cardLayout=a.cardLayout?a.cardLayout:"Default",this.DefaultNonAuthRestrictionID=a.DefaultNonAuthRestrictionID?a.DefaultNonAuthRestrictionID:"33130",this.drawerTitle=a.drawerTitle?a.drawerTitle:"default title",this.showNameMaxLength=a.showNameMaxLength?a.showNameMaxLength:void 0,this.itemTitleMaxLength=a.itemTitleMaxLength?a.itemTitleMaxLength:void 0,this.daysLeftBreakPoint=a.daysLeftBreakPoint?a.daysLeftBreakPoint:0,this.drawerPaginationArrowClass=a.drawerPaginationArrowClass?a.drawerPaginationArrowClass:"shawVideo_drawer_btn",this.drawerPaginationArrowLeftClass=a.drawerPaginationArrowLeftClass?a.drawerPaginationArrowLeftClass:"shawVideoIcon-chevron_left",this.drawerPaginationArrowRightClass=a.drawerPaginationArrowRightClass?a.drawerPaginationArrowRightClass:"shawVideoIcon-chevron_right",this.nowPlayingContentID=a.nowPlayingContentID?a.nowPlayingContentID:void 0,this.AuthenticationLoginLink=a.AuthenticationLoginLink?a.AuthenticationLoginLink:"https://www.globaltv.com/signin/",this.showSeasonPicker=a.showSeasonPicker?a.showSeasonPicker:!1,this.drawerSponsorLogo=a.drawerSponsorLogo?a.drawerSponsorLogo:void 0,this.drawerSponsorText=a.drawerSponsorText?a.drawerSponsorText:void 0,this.drawerSponsorUrl=a.drawerSponsorUrl?a.drawerSponsorUrl:void 0,this.showAllSeasons="undefined"!=typeof a.showAllSeasons?a.showAllSeasons:!0,this.isShowPage=a.isShowPage?a.isShowPage:!1,this.showHiatusMessage=a.showHiatusMessage?a.showHiatusMessage:!1,this.customHiatusMessage=a.customHiatusMessage?a.customHiatusMessage:void 0,this.showMixedContentModal=a.showMixedContentModal?a.showMixedContentModal:!1,this.showMixedContent=a.showMixedContent?a.showMixedContent:!1,this.seeMoreURL=a.seeMoreURL?a.seeMoreURL:void 0,this.endpoint=a.endpoint?a.endpoint:"",this.position=a.position?a.position:"",this.showLinkData=a.showLinkData?a.showLinkData:[],this.enabledLazyLoad="undefined"!=typeof a.enabledLazyLoad?a.enabledLazyLoad:0===$("#shawVideo_PlayerContainer").length,this.startIdx=1,this.endIdx=this.itemsPerPage,this.videoList=null,this.sort=a.sort?a.sort:{pubDate:"desc"},this.isIE8=!1,this.$htmlId=$(this.htmlId),this.rawHtmlId=String(this.htmlId).replace("#",""),this.animationWidth=200,this.wrapperElement="shawVideo_drawer",this.containsNowPlayingContentID=!1,this.drawerListWidth=0,this.drawerWrapperWidth=0,this.listItemWidth=0,this.currentSeason=0,this.seeMoreElement=null,this._init()}a.prototype.setVideoList=function(a){this.videoList=a,this.videoList.size>0?this._renderPage():this.showHiatusMessage===!0?this._renderHiatusMessage(this.customHiatusMessage):(this.$htmlId.remove(),$(".shawVideo_drawer_sibling-"+this.rawHtmlId).remove())},a.prototype._init=function(){var a,b;switch(a=this.htmlId,b=this,VideoPlayerUtils.detectIE8(this),this.isShowPage===!0&&this.$htmlId.addClass("shawVideo_showPage"),this._preRenderPage(),this.drawerType.type){case"latest":break;case"category":this.endpoint+="?byCategories="+this.drawerType.categories;break;case"curated":this.endpoint=this.endpoint.replace(/[^\/]*$/,this.drawerType.mpxId)}this.endpoint+=this.endpoint.indexOf("?")>0?"&":"?",this.endpoint+="form=cjson",this._loadDrawerContent(a,b)},a.prototype._preRenderPage=function(){var a,b,c,d;b=5,c=['<li class="shawVideo_drawerItem shawVideo_placeholder">','<div class="shawVideo_drawerItem_img"></div>','<div class="shawVideo_placeholder_title"></div>','<div class="shawVideo_placeholder_text"></div>','<div class="shawVideo_placeholder_text"></div>',"</li>"],c=c.join(""),a=['<div class="shawVideo_drawer_header_row shawVideo_border-box">','<a class="shawVideo_drawer_title">'+this.drawerTitle+"</a>","</div>",'<div class="'+this.wrapperElement+' shawVideo_border-box">','<div class="shawVideo_drawerList_wrapper">','<ul class="shawVideo_drawerList">'];for(var e=0;b>e;e++)a.push(c);d=["</ul>","</div>","</div>"],a=a.concat(d),this.$htmlId.html(a.join("")),this.$wrapperElement=$(this.htmlId+" ."+this.wrapperElement),this.$titleElement=$(this.htmlId+" ."+this.wrapperElement+"_title"),this._setListItemWidth(),this._setDrawerListWidth()},a.prototype._loadDrawerContent=function(a,b){function c(){ShawVideoIngestor.getVideoList(b),ShawVideoAnalytics.attachDrawerEvents(b),$(window).bind("resize.drawer",$.proxy(b._resize,b,!1)),$(window).bind("updateUserAuthStatus",$.proxy(b._renderAuthStatus,b,!1))}this.enabledLazyLoad?$(a).bind("inview",function(b,d,e,f){d&&(c(),$(a).unbind("inview"))}):c()},a.prototype._renderPage=function(){VideoPlayerUtils.touchDetection(),VideoPlayerUtils.mixedContentDetection(),this._createVideoItems(),this.isShowPage&&(this.$wrapperElement.addClass("shawVideo_showPage"),this.$titleElement.addClass("shawVideo_showPage")),this._setDrawerListWidth(),this._buildPagination(),this.showMixedContentModal&&$("body").hasClass("shawVideo_html5")&&this.$wrapperElement.find('li[data-html5status="false"]').on("click",VideoPlayerUtils.mixedContentMessageAlert),$("body").hasClass("shawVideo_html5")||$("body").hasClass("shawVideo_noFlash")||this.$wrapperElement.find(".shawVideo_RestrictedContent").on("click",$.proxy(this._lockedVideoClickEvent,this)),this.containsNowPlayingContentID&&this._scrollToContentID(this.nowPlayingContentID),this.seeMoreURL?this._addSeeMoreURLtoTitle(this.seeMoreURL):(void 0!==this.drawerSponsorLogo&&this._addSponsorLogo(),this.showSeasonPicker&&this._addSeasonPicker())},a.prototype._createVideoItems=function(){var a,b,c,d,e;e=(new Date).getTime(),b=this.videoList.size,d=[];for(var f=0;b>f;f++)a={},a.thumbUrl=this.videoList.entries[f].thumbnail,a.showName=a.visibleShowName=this.videoList.entries[f].showName,a.episodeTitle=a.visibleEpisodeTitle=this.videoList.entries[f].episodeTitle,a.epochAirDate=this.videoList.entries[f].airdate,a.epochAvailibleDate=this.videoList.entries[f].availableDate,a.epochexpirationDate=this.videoList.entries[f].expirationDate,a.expirationDate=VideoPlayerUtils.convertEpochToMonthDateYear(this.videoList.entries[f].expirationDate),a.airdate=VideoPlayerUtils.convertEpochToMonthDateYear(this.videoList.entries[f].airdate,!0),a.shortformAirdate=VideoPlayerUtils.convertEpochToMonthDateYear(this.videoList.entries[f].airdate,!0,!0),this.videoList.entries[f].availableDate?(a.availableDate=VideoPlayerUtils.convertEpochToMonthDateYear(this.videoList.entries[f].availableDate,!0),a.shortformAvailableDate=VideoPlayerUtils.convertEpochToMonthDateYear(this.videoList.entries[f].availableDate,!0,!0)):(a.availableDate=a.airdate,a.shortformAvailableDate=VideoPlayerUtils.convertEpochToMonthDateYear(this.videoList.entries[f].airdate,!0,!0)),a.daysLeft=Math.round((a.epochexpirationDate-e)/864e5),a.duration=VideoPlayerUtils.convertSecondsToMinutes(this.videoList.entries[f].content[0].duration),a.contentID=this.videoList.entries[f].contentID,a.clipType=this.videoList.entries[f].clipType,a.restrictionID=this.videoList.entries[f].restrictionID,a.isHTML5=this.videoList.entries[f].isHTML5,this.videoList.entries[f].season&&(a.season=this.videoList.entries[f].season),this.videoList.entries[f].episode&&(a.episode=this.videoList.entries[f].episode),a.destinationUrl="destination_url",c=this._videoItemElement(a),d.push(c);this._appendVideoItemElement(d.join(""))},a.prototype._addSeasonPicker=function(){for(var a,b,c=[],d=0;d<this.videoList.entries.length;d++)this.videoList.entries[d].season>0&&c.push(this.videoList.entries[d].season);if(b=Array.prototype.filter?c.filter(function(a,b,c){return b==c.indexOf(a)}):$.grep(c,function(a,b){return $.inArray(a,c)===b}),b.length<2)return void(this.showSeasonPicker=!1);b.sort(function(a,b){return a-b}),a=['<span class="shawVideo_drawerSeasonPicker shawVideo_dropDown"><select>'],this.showAllSeasons&&(a=['<span class="shawVideo_drawerSeasonPicker shawVideo_dropDown"><select><option value="All seasons">All seasons</option>']);for(var e=b.length-1;e>=0;e--)a.push('<option value="'+b[e]+'">Season '+b[e]+"</option>");a.push("</select></span>"),this.$titleElement.after(a.join("")),this.$titleElement.parent().find("select").on("change",$.proxy(this._seasonChanged,this)),this.showAllSeasons||(this.currentSeason=b[b.length-1],this.containsNowPlayingContentID&&(this.currentSeason=this.$wrapperElement.find('[data-video_id="'+this.nowPlayingContentID+'"]').data("season")),this._seasonChanged(),this.$wrapperElement.parent().find(".shawVideo_drawerSeasonPicker select").val(this.currentSeason))},a.prototype._addSponsorLogo=function(){var a='<span class="shawVideo_drawerSponsor">';void 0!==this.drawerSponsorText&&(a+='<span class="shawvideo_drawerSponsorText">'+this.drawerSponsorText+"</span>"),void 0!==this.drawerSponsorUrl&&(a+='<a href="'+this.drawerSponsorUrl+'" target="_blank">'),a+='<img class="shawVideo_drawerSponsorImg" src="'+this.drawerSponsorLogo+'">',void 0!==this.drawerSponsorUrl&&(a+="</a>"),a+="</span>",this.$titleElement.after(a),this.$titleElement.parent().find("select").on("change",$.proxy(this._seasonChanged,this))},a.prototype._seasonChanged=function(a){var b=a?a.currentTarget.options[a.currentTarget.selectedIndex].value:this.currentSeason;this.currentSeason=b,this.$wrapperElement.parent().find(".shawVideo_drawerSeasonPicker select").blur();var c=this.$wrapperElement.find(".shawVideo_drawerItem").not(".shawVideo_drawer_seeMoreCard"),d=c.filter('[data-season="'+this.currentSeason+'"]');d.removeClass("shawVideo_hidden");var e=c.filter(':not([data-season="'+this.currentSeason+'"])');e.addClass("shawVideo_hidden"),"All seasons"===this.currentSeason&&e.removeClass("shawVideo_hidden"),this._resize(!0),this._scrollToContentID(this.nowPlayingContentID)},a.prototype._appendVideoItemElement=function(a){this.$wrapperElement.find(".shawVideo_drawerList").html(a)},a.prototype._buildShowPageLink=function(a,b){var c='onclick="return false;" class="shawVideo_showLink--noLink"';if(0===b.length)c='href="'+VideoPlayerUtils.buildHref(a,this.showPageHrefSchema)+'"';else for(var d=0;d<b.length;d++)if(a.showName&&b[d].Text&&a.showName.toLowerCase()===b[d].Text.toLowerCase()){c='href="'+b[d].Href+'"';break}return c},a.prototype._videoItemElement=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p;if(e=VideoPlayerUtils.readCookie("authN"),i=!1,j="",k=this.displayShowName?"":"is-hidden",o=" days","Default"!=this.cardLayout?(n="shawVideo_drawerItem--compact",m=this.cardLayout):n="shawVideo_drawerItem--default",null===e&&(e=0),void 0!==this.showNameMaxLength&&a.visibleShowName.length>this.showNameMaxLength&&(a.visibleShowName=VideoPlayerUtils.truncateString(a.visibleShowName,this.showNameMaxLength)),void 0!==this.itemTitleMaxLength&&a.visibleEpisodeTitle.length>this.itemTitleMaxLength&&(a.visibleEpisodeTitle=VideoPlayerUtils.truncateString(a.visibleEpisodeTitle,this.itemTitleMaxLength)),c=VideoPlayerUtils.buildHref(a,this.hrefSchema),d=this._buildShowPageLink(a,this.showLinkData),b=["<li class='"+n+" shawVideo_drawerItem-displayShowName--"+this.displayShowName+" shawVideo_drawerItem-showMixedContent--"+this.showMixedContent+" shawVideo_drawerItem fadeIn {clipTypeClass} {nowPlayingClass}' data-video_url='{videoHref}' data-video_id='"+a.contentID+"' data-season='"+a.season+"' data-html5Status='{ishtml5playable}' data-restricted='{restrictionPresent}' {expiryCountdownData} >","<a class='shawVideo_ThumbnailLink{restrictionClass}' href='{videoHref}' {targetVideoURL}> ","<img src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAAB+CAIAAABd4eG7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjhDRTQ4NjJCMUI1MTExRTVCNkYwQzRDMjU4MDA2MkQxIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjhDRTQ4NjJDMUI1MTExRTVCNkYwQzRDMjU4MDA2MkQxIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OENFNDg2MjkxQjUxMTFFNUI2RjBDNEMyNTgwMDYyRDEiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6OENFNDg2MkExQjUxMTFFNUI2RjBDNEMyNTgwMDYyRDEiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4XffnYAAABAElEQVR42uzSQREAAAjDMMC/zAnBxh6JhF43yUCxkwCPgkfxKHgUPIpHwaN4FDwKHsWj4FHwKB4Fj+JR8Ch4FI+CR8GjeBQ8ikfBo+BRPAoexaPgUfAoHgWPgkfxKHgUj4JHwaN4FDwKHsWj4FE8Ch4Fj+JR8Ch4FI+CR/EoeBQ8ikfBo3gUPAoexaPgUfAoHgWP4lHwKHgUj4JHwaN4FDyKR8Gj4FE8Ch7Fo+BR8CgeBY+CR/EoeBSPgkfBo3gUPAoexaPgUTwKHgWP4lHwKHgUj4JH8Sh4FDyKR8GjeBQ8Ch7Fo+BR8CgeBY/iUfAoeBSPgkfBo3gUPIpHocILMABDUgOo8CQyyAAAAABJRU5ErkJggg==' class='shawVideo_videoThumb shawVideo_drawerItem_img lazyload' alt='"+VideoPlayerUtils.htmlEscape(a.showName)+" - "+VideoPlayerUtils.htmlEscape(a.episodeTitle)+"' data-src='"+a.thumbUrl+"'/>","</a>","<a {showPageLink}>","<span class='shawVideo_drawerItem_showName "+k+"'>"+a.visibleShowName+"</span>","</a>","<a class='{restrictionClass}' href = '{videoHref}' {targetVideoURL}>","<span class='shawVideo_drawerItem_episodeName'>"+a.visibleEpisodeTitle+"</span>","</a>","<div class='shawVideo_drawerItem_footer'>"],g=f="",h=!!a.isHTML5,0!==this.daysLeftBreakPoint&&a.epochexpirationDate>0&&a.daysLeft<=this.daysLeftBreakPoint&&(1===a.daysLeft&&(o=" day"),p=a.daysLeft,b.push("<span class='shawVideo_drawerItem_daysLeft'>"+a.daysLeft+o+"</span>")),a.season&&b.push("<span class='shawVideo_drawerItem_season'>"+a.season+"</span>"),a.episode&&b.push("<span class='shawVideo_drawerItem_episode'>"+a.episode+"</span>"),"episode"===a.clipType?(l="shaw_drawerItem_longForm","Compact"==m?b.push("<span class='shawVideo_drawerItem_airdate'>"+a.shortformAirdate+"</span>"):b.push("<span class='shawVideo_drawerItem_airdate'>"+a.airdate+"</span>")):(l="shaw_drawerItem_shortForm","Compact"==m?b.push("<span class='shawVideo_drawerItem_airdate'>"+a.shortformAvailableDate+"</span>"):b.push("<span class='shawVideo_drawerItem_airdate'>"+a.availableDate+"</span>")),b.push("<span class='shawVideo_drawerItem_duration'>"+a.duration+"</span>"),b.push("</div></li>"),VideoPlayerUtils.requiresAuthentication()===!0&&a.restrictionID.length>0&&a.restrictionID!==this.DefaultNonAuthRestrictionID.toString()){for(var q,r,s,t,u,v=0;v<shawVideo_restrictions.length;v++)a.restrictionID===shawVideo_restrictions[v].id.split("/").pop()&&(s=shawVideo_restrictions[v].relativeEnforcementStart,t=shawVideo_restrictions[v].relativeEnforcementEnd);q=(new Date).getTime(),r=a.epochAvailibleDate,u=a.epochAvailibleDate+1e3*s,q>u&&(h=!1,i=!0,g='data-targetvideourl="'+c+'"',0===e&&(f=" shawVideo_RestrictedContent"))}return a.contentID.toString()===this.nowPlayingContentID&&""===f&&(j="shawVideo_nowPlaying",this.containsNowPlayingContentID=!0),b.join("").replace(/{videoHref}/g,c).replace(/{showPageLink}/g,d).replace(/{restrictionClass}/g,f).replace(/{targetVideoURL}/g,g).replace(/{ishtml5playable}/g,h).replace(/{restrictionPresent}/g,i).replace(/{nowPlayingClass}/g,j).replace(/{clipTypeClass}/g,l).replace(/{expiryCountdownData}/,p?"data-expiry-countdown="+p:"")},a.prototype._injectSeeMoreCard=function(a){var b;b='<li class="shawVideo_drawerItem shawVideo_drawer_seeMoreCard"><a href="'+a+'">See All</a></li>',this.$wrapperElement.find(".shawVideo_drawerList").append(b)},a.prototype._addSeeMoreURLtoTitle=function(a){this.$titleElement.attr("href",a)},a.prototype._setDrawerListWidth=function(){this.drawerWrapperWidth=this.$wrapperElement.find(".shawVideo_drawerList_wrapper").width(),this._calculateAnimationWidth(),this.drawerListWidth=this.$wrapperElement.find('.shawVideo_drawerItem:not(".shawVideo_hidden")').size()*this.listItemWidth,this.drawerWrapperWidth>this.animationWidth&&(this.drawerListWidth+=this.drawerWrapperWidth-this.animationWidth),this.$wrapperElement.find(".shawVideo_drawerList").width(this.drawerListWidth)},a.prototype._setListItemWidth=function(){this.listItemWidth=Math.ceil(this.$wrapperElement.find(".shawVideo_drawerItem").first().outerWidth(!0))},a.prototype._calculateAnimationWidth=function(){this.animationWidth=Math.floor(this.drawerWrapperWidth/this.listItemWidth)*this.listItemWidth,this.animationWidth<this.listItemWidth&&(this._setListItemWidth(),this.animationWidth=this.listItemWidth)},a.prototype._buildPagination=function(){this.$wrapperElement.append('<a class="shawVideo_drawer_prev '+this.drawerPaginationArrowClass+" "+this.drawerPaginationArrowLeftClass+' disabled"></a><a class="shawVideo_drawer_next '+this.drawerPaginationArrowClass+" "+this.drawerPaginationArrowRightClass+'"></a>'),this._showHidePagination()},a.prototype._showHidePagination=function(){var a;a=this.$wrapperElement.width(),this.drawerListWidth>a?(this.$wrapperElement.find(".shawVideo_drawerList_wrapper").addClass("isScrollable"),this.$wrapperElement.find(".shawVideo_drawer_btn").show().on("click.pagination",$.proxy(this._paginationClickEvent,this)),this.$wrapperElement.find(".shawVideo_drawer_btn").removeClass("disabledAndHide")):(this.$wrapperElement.find(".shawVideo_drawerList_wrapper").removeClass("isScrollable"),this.$wrapperElement.find(".shawVideo_drawer_btn").hide().off("click.pagination",$.proxy(this._paginationClickEvent,this)),this.$wrapperElement.find(".shawVideo_drawer_btn").addClass("disabledAndHide"))},a.prototype._disablePagination=function(a){this.drawerListWidth-a.scrollLeft()===this.drawerWrapperWidth?(this.$wrapperElement.find(".shawVideo_drawer_btn").removeClass("disabled"),this.$wrapperElement.find(".shawVideo_drawer_next").addClass("disabled")):0===a.scrollLeft()?(this.$wrapperElement.find(".shawVideo_drawer_btn").removeClass("disabled"),this.$wrapperElement.find(".shawVideo_drawer_prev").addClass("disabled")):this.$wrapperElement.find(".shawVideo_drawer_btn").removeClass("disabled")},a.prototype._paginationClickEvent=function(a){var b,c;b=this.$wrapperElement.find(".shawVideo_drawerList_wrapper"),b.is(":animated")||(c=this.animationWidth,$(a.currentTarget).is(".shawVideo_drawer_prev")&&(c=-c),b.animate({scrollLeft:"+="+c},$.proxy(this._disablePagination,this,b)))},a.prototype._lockedVideoClickEvent=function(a){var b=a.currentTarget.getAttribute("data-targetvideourl"),c=VideoPlayerUtils.convertUrlToAbsolute(b);VideoPlayerUtils.writeCookie("targetVideoUrl",c),VideoPlayerUtils.writeCookie("authPrev",a.currentTarget.getAttribute("data-targetvideourl")),a.preventDefault(),a.stopImmediatePropagation(),window.location.href=this.AuthenticationLoginLink},a.prototype._scrollToContentID=function(a){var b,c,d;b=this.$wrapperElement.find(".shawVideo_drawerList_wrapper"),c=b.find('[data-video_id="'+a+'"]').not(".shawVideo_hidden"),d=0===c.length?0:b.width()<=2*this.listItemWidth?c.position().left:c.position().left-this.listItemWidth,b.animate({scrollLeft:d},$.proxy(this._disablePagination,this,b))},a.prototype._resize=function(a){this._setDrawerListWidth(),this._showHidePagination(),a||this._disablePagination(this.$wrapperElement.find(".shawVideo_drawerList_wrapper"))},a.prototype._renderAuthStatus=function(){var a=this.$wrapperElement.find('li[data-restricted="true"] a'),b=this.$wrapperElement.find('[data-restricted="true"][data-video_id="'+this.nowPlayingContentID+'"]');VideoPlayerUtils.readCookie("authN")?a.hasClass("shawVideo_RestrictedContent")&&(a.removeClass("shawVideo_RestrictedContent"),b.addClass("shawVideo_nowPlaying")):(a.addClass("shawVideo_RestrictedContent"),b.hasClass(""),b&&b.removeClass("shawVideo_nowPlaying"))},a.prototype._constructSeeMoreURL=function(a){return a+"?cbquery="+encodeURIComponent(this.endpoint)+"&cbtitle="+encodeURIComponent(this.drawerTitle)},a.prototype._renderHiatusMessage=function(a){var b;b=void 0!==a?['<div class="shawVideo_hiatusMessage"><span class="shawVideo_drawer_title">'+this.drawerTitle+"</span>"+a+"</div>"]:['<div class="shawVideo_hiatusMessage"><span class="shawVideo_drawer_title">'+this.drawerTitle+"</span><p>Full episodes of this program are currently unavailable.</p><p> Please check-in with us again soon!</p></div>"],this.$htmlId.html(b)},window.ShawVideoDrawer=a}(),/*!
 * feedbackForm.js
 */
function(){"use strict";function a(a){this.htmlId=a.targetHtmlId?a.targetHtmlId:"",this.feedbackFormBtnClass=a.feedbackFormBtnClass?a.feedbackFormBtnClass:".feedbackFormButton",this.$htmlId=$(this.htmlId),this.$feedbackButton=$(this.feedbackFormBtnClass),this.$form_panel=void 0,this.$form_input=void 0,this.$form_success=void 0,this.$form_error=void 0,this._renderPage()}a.prototype._renderPage=function(){var a=["<div>","<div class='bk'></div>","<div id='feedbackFormPanel'>","<div class='close hideMe feedback-btn'>Close</div>","<div id='feedback_input'>","<h3 class='feedbackForm-title'>Video issues?</h3>","<p class='feedbackForm-text'>Having problems with video playback?  Please refer to our <a href='/faq' class='link--primary' target='_blank'>help centre</a> for answers to frequently asked questions and more.</p>","<p class='feedbackForm-text'>You can also send us a report of the problem by filling out the form below:</p>","<form id='feedbackForm' name='form' novalidate>","<fieldset class='feedback-fieldset'>","<div class='row'>","<div class='firstName col-sm-6 col-md-6 col-lg-6'>","<label>First name (required)</label>","<input id='firstName' type='text' required>","</div>","<div class='col-sm-6 col-md-6 col-lg-6'>","<label>Last name (required)</label>","<input id='lastName' type='text' required>","</div>","</div>","<div class='row'>","<div class='col-sm-12 col-md-12 col-lg-12'>","<label>Email address (required)</label>","<input id='email' type='text'>","</div>","</div>","<div class='row'>","<div class='col-sm-12 col-md-12 col-lg-12'>","<label>Issue type (required)</label>","<select id='issueType' required>","<option selected disabled hidden value=''></option>","<option value='VIDEO_NOT_PLAYING'>Video not playing on first load</option>","<option value='GEO_RESTRICTION'>Incorrect geographic restriction</option>","<option value='LOW_VIDEO_QUALITY'>Video quality is low</option>","<option value='MISSING_SEGMENTS'>Video is missing segments</option>","</select>","</div>","</div>","<div class='row'>","<div class='col-sm-12 col-md-12 col-lg-12'>","<label>Comments</label>","<textarea id='comments'></textarea>","</div>","</div>","<div class='row'>","<div class='feedback-footer col-sm-12 col-md-12 col-lg-12'>","<a class='hideMe feedback-cancel'>Cancel</a>","<button class='feedback-submit feedback-btn' >Send report</button>","</div>","</div>","</fieldset>","</form>","</div>","<div id='feedback_success' class='hide'>","<h3 class='feedbackForm-title'>Thank you</h3>","Thank you for your feedback!","<div class='row'>","<div class='feedback-footer col-sm-12 col-md-12 col-lg-12'>","<button class='hideMe feedback-btn feedback-close'>Close</button>","</div>","</div>","</div>","<div id='feedback_error' class='hide'>","<h3 class='feedbackForm-title'>Sorry</h3>","<p class='feedbackForm-text'>There was a problem submitting your feedback form.  Please try again later.</p>","<div class='row'>","<div class='feedback-footer col-sm-12 col-md-12 col-lg-12'>","<button class='hideMe feedback-btn feedback-close'>Close</button>","</div>","</div>","</div>","</div>","</div>"];this.$htmlId.html(a.join("")),this._initHandlers()},a.prototype._initHandlers=function(){this.$form_panel=$("#feedbackFormPanel"),this.$form_input=$("#feedback_input"),this.$form_success=$("#feedback_success"),this.$form_error=$("#feedback_error"),this.$submitButton=$(".feedback-submit"),this.$firstName=$("#firstName"),this.$lastName=$("#lastName"),this.$email=$("#email"),this.$comments=$("#comments"),this.$issueType=$("#issueType"),this.$feedbackButton.on("click",$.proxy(this._feedbackButtonClick,this)),this.$htmlId.find(".hideMe").on("click",$.proxy(this._closeButtonClick,this)),this.$htmlId.find("input").on("input",$.proxy(this._validateForm,this)),this.$htmlId.find("select").on("change",$.proxy(this._validateForm,this)),this.$submitButton.attr("disabled",!0),this.$submitButton.click($.proxy(this._submit,this))},a.prototype._closeButtonClick=function(){$(document).trigger("modalOff"),this.$htmlId.addClass("fadeOut"),this.$form_panel.removeClass("fadeIn"),setTimeout($.proxy(this._hide,this),450)},a.prototype._feedbackButtonClick=function(){this.$htmlId.addClass("show"),setTimeout($.proxy(this._show,this),1),$(document).trigger("modalOn")},a.prototype._validateForm=function(){var a=this.$firstName.val().length>0;a&=this.$lastName.val().length>0,a&=this.$issueType.val()?this.$issueType.val().length>0:!1;var b=this.$email.val();a&=b.length>0?this._validateEmail(b):!1,a?this.$submitButton.removeAttr("disabled"):this.$submitButton.attr("disabled",!0)},a.prototype._validateEmail=function(a){var b=/^[_A-Za-z0-9-]+(\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9-]+)*(\.[A-Za-z]{2,15})$/;return b.test(a)?(this.$email.removeClass("ng-invalid"),this.$email.removeClass("ng-dirty"),!0):(this.$email.addClass("ng-invalid"),this.$email.addClass("ng-dirty"),!1)},a.prototype._submit=function(a){a.preventDefault(),this.$htmlId.find("input").attr("disabled",!0),this.$issueType.attr("disabled",!0);var b=this._prepareReport();jQuery.ajax({method:"post",url:"http://common.smdg.ca/Forms/SubmitVideoFeedback",data:b,success:jQuery.proxy(this._submissionHandler,this,!0),error:jQuery.proxy(this._submissionHandler,this,!1)});this._disable(),this.$submitButton.attr("disabled",!0)},a.prototype._submissionHandler=function(a){this.$form_input.addClass("hide"),a?(this.$form_success.removeClass("hide"),this._reset()):(this.$form_error.removeClass("hide"),this.$submitButton.removeAttr("disabled")),this._enable()},a.prototype._disable=function(){this.$htmlId.find("input").attr("disabled",!0),this.$issueType.attr("disabled",!0),this.$comments.attr("disabled",!0),this.$issueType.attr("disabled",!0)},a.prototype._enable=function(){this.$htmlId.find("input").removeAttr("disabled"),this.$issueType.removeAttr("disabled"),this.$comments.removeAttr("disabled"),this.$issueType.removeAttr("disabled")},a.prototype._reset=function(){this.$htmlId.find("input").val(""),this.$comments.val(""),this.$issueType.prop("selectedIndex",0)},a.prototype._prepareReport=function(){var a=swfobject.getFlashPlayerVersion(),b={firstName:this.$firstName.val(),lastName:this.$lastName.val(),email:this.$email.val(),comment:this.$comments.val()||"No comment submitted",commentType:this.$issueType.val(),userAgent:this._getBrowserAndDevice(),os:this._getOs(),refererUrl:location.href,brand:this._getBrand(location.hostname),flashVersion:a.major+"."+a.minor+"."+a.release,aamuuid:VideoPlayerUtils.readCookie("aam_uuid")};return b},a.prototype._getBrand=function(a){return a.indexOf("smdg")>-1||a.indexOf("cloudfront")>-1?"smdg":a.replace("www.","")},a.prototype._getOs=function(){var a=$.ua.os;return a.name=a.name||"Unknown OS",a.version=a.version||"Unknown Version",a.name+" "+a.version},a.prototype._getBrowserAndDevice=function(){var a=$.ua.browser,b=$.ua.device;return b.vendor=b.vendor||"Desktop",b.model=b.model||"",a.name+" "+a.major+" on a "+b.vendor+" "+b.model},a.prototype._show=function(){this.$form_panel.addClass("fadeIn")},a.prototype._hide=function(){this.$htmlId.removeClass("show"),this.$htmlId.removeClass("fadeOut"),this.$form_input.removeClass("hide"),this.$form_success.addClass("hide"),this.$form_error.addClass("hide")},window.ShawVideoFeedbackForm=a}(),/*!
 * flash_vplayer.js
*/
function(){"use strict";function a(a){this.FLASH_PLAYER_OBJECT_ID="shawVideo_FlashPlayer",this.FLASH_PLAYER_DETECTION_ID="shawVideo_FlashPlayer_Detection",this.initialized=!1,this._init(a)}a.prototype.remove=function(){$("#"+this.FLASH_PLAYER_OBJECT_ID).empty(),$("#"+this.FLASH_PLAYER_DETECTION_ID).empty()},a.prototype.inject=function(a){var b,c,d,e,f,g,h,i={};if(!this.initialized)return void VideoPlayerUtils.log("Failed to inject. Player not initialized properly");switch(this._setEnvironment(),c=!/smdg\./.test(window.location.host),d=VideoPlayerUtils.readCookie("shawVideoDebugEnabled"),g={menu:"false",bgcolor:"#000000",wmode:"direct",allowScriptAccess:"always",allowFullscreen:"true"},c||this.playerSetting.isEmbed||(VideoPlayerUtils.log("use dev settings!"),g.wmode=VideoPlayerUtils.readCookie("shawVideoStageError")?"opaque":g.wmode,this.playerSetting.addDevSetting("account",this.playerSetting.omnitureAccount)),a){case"primetime":e=this.FLASH_PLAYER_OBJECT_ID,h={contentId:this.playerSetting.contentId,eocIds:this.playerSetting.eocIds,feedBaseUrl:this.playerSetting.feedBaseUrl,account:this.playerSetting.account,autoPlay:this.playerSetting.autoPlay,liveTimeout:this.playerSetting.liveTimeout,eocRecoFeedUrl:this.playerSetting.eocRecoFeedUrl,authLink:this.playerSetting.authLink,debug:d,disableAds:!c&&VideoPlayerUtils.readCookie("shawVideoDevCheatEnabled"),adCustomParam:VideoPlayerUtils.generateCustomAdParams(),troubleshootMode:window.location.search.indexOf("troubleshoot=true")>0,saveProgressEnabled:!0,splunkEnabled:!0,disableTimeBasedCountdown:this.playerSetting.disableTimeBasedCountdown,startTime:swfobject.getQueryParamValue("t"),abTestCampaign:VideoPlayerUtils.getABTestCampaign(),embed:this.playerSetting.isEmbed},this.playerSetting.devSettings&&(h.devSettings=escape(this.playerSetting.devSettings)),this.playerSetting.eocCountdownSeconds>=0&&(h.eocCountdownSeconds=this.playerSetting.eocCountdownSeconds),c||(h.baseDomain="http://globaltvnew.uat.smdg.ca"),b=this._constructSwfUrl("primetimePlayer");break;case"legacy":e=this.FLASH_PLAYER_OBJECT_ID,f.length>0&&(this.playerSetting.googleIMA3Url+="&cust_params="+f),h=LegacyPlayerUtils.getFlashObject(this.playerSetting,!this.playerSetting.devSettings),b=this.playerSetting.isLive?this._constructSwfUrl("embed/"+this.playerSetting.account+"/legacyPlayer"):this._constructSwfUrl(d?"_debug/legacyPlayer":"legacyPlayer");break;default:e=this.FLASH_PLAYER_DETECTION_ID,i.style="position: absolute; display: inline-block; visibility: visible; left: 0px; top: 0px; width:1px; height:1px",b=this._constructSwfUrl("videoPlayerLoader")}VideoPlayerUtils.log("embed "+b+" into "+e),swfobject.embedSWF(b,e,"100%","100%",VideoPlayerUtils.getRequiredFlashVersion(),null,h,g,i,null)},window.FlashVideoPlayer=a,a.prototype._constructSwfUrl=function(a){var b=VideoPlayerUtils.getRootPath();return b+"swf/"+a+".swf"},a.prototype._init=function(a){this.playerSetting=a,$("#"+this.playerSetting.htmlId).html('<div id="'+this.FLASH_PLAYER_DETECTION_ID+'"></div><div id="'+this.FLASH_PLAYER_OBJECT_ID+'"></div>'),this.initialized=!0},a.prototype._setEnvironment=function(){var a=window.location.search;a.indexOf("debug=true")>0?VideoPlayerUtils.writeCookie("shawVideoDebugEnabled",!0):a.indexOf("debug=false")>0&&VideoPlayerUtils.eraseCookie("shawVideoDebugEnabled"),a.indexOf("makeme:)")>0?VideoPlayerUtils.writeCookie("shawVideoDevCheatEnabled",!0):a.indexOf("makeme:(")>0&&VideoPlayerUtils.eraseCookie("shawVideoDevCheatEnabled"),a.indexOf("testprod=true")>0?VideoPlayerUtils.writeCookie("shawVideoTestProd",!0):a.indexOf("testprod=false")>0&&VideoPlayerUtils.eraseCookie("shawVideoTestProd"),a.indexOf("testvpaid=true")>0?VideoPlayerUtils.writeCookie("shawVideoTestVpaid",!0):a.indexOf("testvpaid=false")>0&&VideoPlayerUtils.eraseCookie("shawVideoTestVpaid"),a.indexOf("testreco=true")>0?VideoPlayerUtils.writeCookie("shawVideoTestReco",!0):a.indexOf("testreco=false")>0&&VideoPlayerUtils.eraseCookie("shawVideoTestReco"),a.indexOf("stageerror=true")>0?VideoPlayerUtils.writeCookie("shawVideoStageError",!0):a.indexOf("stageerror=false")>0&&(VideoPlayerUtils.eraseCookie("shawVideoStageError"),VideoPlayerUtils.eraseCookie("shawVideoPlayerFallback"))},a.prototype.pause=function(){try{document.getElementById(this.FLASH_PLAYER_OBJECT_ID).pause()}catch(a){}},a.prototype.smartResume=function(){try{document.getElementById(this.FLASH_PLAYER_OBJECT_ID).smartResume()}catch(a){}}}(),/*!
 * html5_vplayer.js
*/
function(){"use strict";function a(a){this.initialized=!1,this.playerSetting=null,this._init(a)}a.prototype.inject=function(){return this.initialized?void this._log("Inject!"):void this._log("Failed to inject. Player not initialized properly")},a.prototype.remove=function(){$("#"+this.playerSetting.htmlId).empty()},a.prototype.pause=function(){},a.prototype.resume=function(){},window.HTML5VideoPlayer=a,a.prototype._init=function(a){this.playerSetting=a,this.initialized=!0},a.prototype._log=function(a){console.log("[html5videoplayer.js] "+a)}}(),/*!
 * html5video_captionmanager.js
 */
function(){"use strict";function a(){this.captionArray=[],this.lines=[],this.url="",this.captionContainer="",this.nextCaptionIdx=0,this.currentEndIdx=0,this.maxLines=0,this.boundryWidth=0,this.boundryHeight=0,this.fontSize=this.MIN_SIZE,this.isSeeking=!1,this.isReady=!1,this.totalLines="",this.visible=!1,this.MIN_SIZE=.7,this.MAX_SIZE=4,this.FONT_SIZE_INC=.2}a.prototype.load=function(a){a?this.url=a:this.url="http://media.globaltv.com/videocaptions/256/992/HGTV_IncomeProp_E6099.xml",this.lines=[],this.url.match("^http")&&jQuery.getJSON("http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20xml%20where%20url%3D%22"+encodeURIComponent(this.url)+"%22&format=xml'&callback=?",jQuery.proxy(this.parseCaptionData,this)),this.hide()},a.prototype.parseCaptionData=function(a){var b=jQuery.parseXML(a.results[0]);this.totalLines=jQuery(b).find("p").length,this.maxLines=jQuery(b).find("region").length,jQuery(b).find("p").each(jQuery.proxy(this.storeData,this))},a.prototype.storeData=function(a,b){var c=jQuery(b).attr("tts:origin"),d=!1,e="",f="";null!==c&&void 0!==c&&c.indexOf(" ")>0&&(d=c.indexOf("%")>0,e=c.split(" ")[0],f=c.split(" ")[1]);var g=jQuery(b).text();if(jQuery(b).children().length>0){var h=this.generateStyledContent(jQuery(b).children());g=h}d&&(e=e.substring(0,e.length-1),f=f.substring(0,f.length-1));var i={begin:Math.round(this.getMSFromTimecode(jQuery(b).attr("begin"))),end:Math.round(this.getMSFromTimecode(jQuery(b).attr("end"))),positionByPercent:d,origin:{x:e,y:f},content:g,id:a};this.lines.push(i),this.lines.length>=this.totalLines&&(this.isReady=!0,jQuery(this).trigger("loadComplete"))},a.prototype.generateStyledContent=function(a){for(var b="",c=0;c<a.length;c++){var d=a[c],e=jQuery(d).text();""===e&&(e=" "),e=e.split(">").join("&gt;").split("<").join("&lt;");var f=e,g=jQuery(d).attr("tts:fontStyle");""!==g&&(f="<span style='font-style:"+g+";' >"+e+"</span>"),b+=f}return b},a.prototype.loadErrorHandler=function(a){},a.prototype.getMSFromTimecode=function(a){if(!a)return"";for(var b=0,c=a.split(":"),d=1,e=c.length-1;e>=0;e--)e===c.length-1?b=c[e]/30*1e3:e===c.length-2?(d=1e3,b+=c[e]*d):e<c.length-2&&(d*=60,b+=c[e]*d);return b},a.prototype.updateCaption=function(a){if(!(this.isSeeking||this.nextCaptionIdx>this.lines.length)){var b,c,d,e,f=this.nextCaptionIdx,g=Math.min(this.lines.length,this.nextCaptionIdx+this.maxLines);this.captionContainer.find("div").each(jQuery.proxy(this.checkForRemoval,this,a));for(var h=f;g>h;h++)if(e=this.lines[h],b=e.end,c=e.begin,a>=c&&null===document.getElementById("line"+h))d="<div class='lineHolder' id='lineHolder_"+e.id+"'>"+e.content+"</div>",this.captionContainer.append(d),this.position(jQuery("#lineHolder_"+e.id)),this.nextCaptionIdx++;else if(c>a)break}},a.prototype.checkForRemoval=function(a,b,c){var d=jQuery(c).attr("id"),e=d.substring(d.indexOf("_")+1,d.length);a>this.lines[e].end&&jQuery("#lineHolder_"+e).remove()},a.prototype.seekCaption=function(a){this.isSeeking||(this.isSeeking=!0,this.cleanUpCaption(),this.nextCaptionIdx=this._seekCaption(a,0,this.lines.length))},a.prototype._seekCaption=function(a,b,c){if(console.log("seekCaptionIn( "+a+", "+b+", "+c+")"),b===c)return this.isSeeking=!1,b;var d=b+Math.floor(.5*(c-b)),e=this.lines[d].end,f=this.lines[d].begin;return a>=f&&e>a?(this.isSeeking=!1,d):a>e?this._seekCaption(a,d+1,c):this._seekCaption(a,b,d)},a.prototype.cleanUpCaption=function(){jQuery("."+this.captionContainer.attr("class")+" .lineHolder").remove()},a.prototype.setSize=function(a,b){this.boundryWidth=a,this.boundryHeight=b},a.prototype.draw=function(){this.fontSize=this.getFontSizeByHeight(.0533*this.boundryHeight),this.boundryWidth<this.boundryHeight&&(this.fontSize=this.getFontSizeByHeight(.04*this.boundryWidth)),jQuery("."+this.captionContainer.attr("class")+" .lineHolder").css("font-size",this.fontSize+"em"),this.captionContainer.find("div").each(jQuery.proxy(this.positionEach,this))},a.prototype.show=function(){this.visible=!0,this.captionContainer.removeClass("ccOff"),this.draw()},a.prototype.hide=function(){this.visible=!1,this.captionContainer.addClass("ccOff")},a.prototype.reset=function(){this.cleanUpCaption(),this.nextCaptionIdx=0,this.isSeeking=!1},a.prototype.positionEach=function(a,b){this.position(b)},a.prototype.position=function(a){var b=jQuery(a).attr("id"),c=b.substring(b.indexOf("_")+1,b.length),d=this.lines[c],e=Math.round(this.boundryWidth*(d.origin.x/100)),f=Math.round(this.boundryHeight*(d.origin.y/100));d.positionByPercent?(jQuery(a).css("left",e),jQuery(a).css("top",f)):(e=Math.round(d.origin.x),f=Math.round(d.origin.y),jQuery(a).css("left",e),jQuery(a).css("top",f)),jQuery(a).css("font-size",this.fontSize+"em")},a.prototype.getFontSizeByHeight=function(a){null!==jQuery("#ccDummyTxt")&&void 0!==jQuery("#ccDummyTxt")&&jQuery("#ccDummyTxt").remove();var b="<span style='display:none; font-size:1em; line-height:normal;' id='ccDummyTxt'>O</span>";return this.captionContainer.append(b),this._getFontSizeByHeight(a,this.MIN_SIZE,this.MAX_SIZE)},a.prototype._getFontSizeByHeight=function(a,b,c){if(Math.abs(c-b)<this.FONT_SIZE_INC)return jQuery("#ccDummyTxt").remove(),this.roundDecimal(b);var d=b+.5*(c-b);return jQuery("#ccDummyTxt").css("font-size",d+"em"),jQuery("#ccDummyTxt").height()<a?this._getFontSizeByHeight(a,d+this.FONT_SIZE_INC,c):this._getFontSizeByHeight(a,b,d)},a.prototype.roundDecimal=function(a){var b=Math.floor(a),c="0",d=a.toString();if(d.indexOf(".")>0){var e=d.substring(d.indexOf(".")+1,3);c=Math.round(100*e)}var f=Number(b+"."+c);return f},window.CaptionManager=a}(),/*!
 * html5video_commentarymanager.js
 */
function(){"use strict";function a(){this.url="",this.commentaryContainer="",this.curCommentary=null,this.commentaries=[],this.nextIdx=0,this.boundryWidth=0,this.boundryHeight=0,this.isSeeking=!1,this.isReady=!1,this.isError=!1,this.visible=!1,this.resizeOnFullscreen=!0,this.TOP_LEFT="TL",this.TOP_RIGHT="TR",this.BOTTOM_LEFT="BL",this.BOTTOM_RIGHT="BR",this.RATIO=.33,this.MIN_TEMPLATE_HEIGHT=150,this.TEXT_PADDING=15,this.LINE_HEIGHT=80,this.FULLSCREEN_TEXT_PADDING=30,this.FULLSCREEN_LINE_HEIGHT=170,this.MAX_TEMPLATE_WIDTH=600,this.MAX_TEMPLATE_HEIGHT=250,this.TEMPLATE_DEFAULT_RATIO=this.MAX_TEMPLATE_WIDTH/this.MAX_TEMPLATE_HEIGHT,this.PADDING=10,this.INC=20}function b(){this.title="",this.content="",this.image="",this.align="",this.begin=0,this.end=0,this.id=-1}b.prototype.isTemplate=function(){return!(""!==this.image&&""===this.title&&""===this.content)},b.prototype.getHTML=function(){var a="<div id='commentary_"+this.id+"' class='commentary";return this.isTemplate()&&(a+=" templated"),a+="'><div class='bg'></div>",""!==this.image&&(a+="<img src='"+this.image+"'/>"),a+="<p>",""!==this.title&&(a+="<span class='title'>"+this.title+"</span><br/><br/>"),""!==this.content&&(a+="<span class='content'>"+this.content+"</span>"),a+="</p><div class='closeBtn'></div></div>"},a.prototype.load=function(a){this.url=a,console.log("[Commentary Manager] load "+a),a?this.url=a:this.url="http://vads.smdg.ca/video/commentary/xml/commentaryTest7.xml",this.commentaries=[],this.url.match("^http")&&jQuery.getJSON("http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20xml%20where%20url%3D%22"+encodeURIComponent(this.url)+"%22&format=xml'&callback=?",jQuery.proxy(this.parseCaptionData,this)),this.hide()},a.prototype.parseCaptionData=function(a){var b=jQuery.parseXML(a.results[0]);this.numCommentaries=jQuery(b).find("p").length,this.commentaries=[],jQuery(b).find("p").each(jQuery.proxy(this.storeData,this))},a.prototype.storeData=function(a,c){var d="",e="",f="";null!==jQuery(c).find("title")&&jQuery(c).find("title").length>0&&(e=jQuery(c).find("title").text()),null!==jQuery(c).find("content")&&jQuery(c).find("content").length>0&&(d=jQuery(c).find("content").text()),null!==jQuery(c).find("img")&&jQuery(c).find("img").length>0&&(f=jQuery(c).find("img").attr("src"));var g=new b;g.begin=Math.round(this.getMSFromTimecode(jQuery(c).attr("begin"))),g.end=Math.round(this.getMSFromTimecode(jQuery(c).attr("end"))),g.align=jQuery(c).attr("align"),g.title=e,g.content=d,g.image=f,g.id=a,this.commentaries.push(g),this.commentaries.length>=this.numCommentaries&&(console.log("[CommentaryManager] PARSE COMPLETED!"),this.isReady=!0,jQuery(this).trigger("loadComplete"))},a.prototype.loadErrorHandler=function(a){this.isError=!0,jQuery(this).trigger("onError")},a.prototype.getMSFromTimecode=function(a){if(!a)return"";for(var b=0,c=a.split(":"),d=1,e=c.length-1;e>=0;e--)e===c.length-1?b=c[e]/30*1e3:e===c.length-2?(d=1e3,b+=c[e]*d):e<c.length-2&&(d*=60,b+=c[e]*d);return b},a.prototype.update=function(a){if(!this.isSeeking){var b,c,d;if(null!==this.curCommentary&&(d=Number(jQuery(this.curCommentary).attr("id").substring(jQuery(this.curCommentary).attr("id").indexOf("_")+1,jQuery(this.curCommentary).attr("id").length)),(this.commentaries[d].begin>a||this.commentaries[d].end<a)&&(this.animateOut(this.curCommentary.attr("id"),jQuery.proxy(this.removeCommentary,this,this.curCommentary.attr("id"))),this.curCommentary=null)),this.nextIdx<this.commentaries.length){var e=this.commentaries[this.nextIdx];c=e.begin,b=e.end,(null===this.curCommentary||d!==this.nextIdx)&&a>=c&&b>a&&(console.log(">>> SHOW COMMENTARY @ "+this.nextIdx+" "+this.commentaryContainer),this.commentaryContainer.append(e.getHTML()),this.curCommentary=jQuery("#commentary_"+this.nextIdx),e.isTemplate()?(this.draw(),this.visible&&this.animateIn()):(jQuery(this.curCommentary).css("opacity",0),jQuery("#"+this.curCommentary.attr("id")+" img").load(jQuery.proxy(this.commentaryImageLoad,this))),this.nextIdx++)}}},a.prototype.commentaryImageLoad=function(){console.log("IMAGE LOADED!!"),this.draw(),this.visible&&this.animateIn()},a.prototype.seek=function(a){this.isSeeking||(this.removeCommentary(),this.isSeeking=!0,this.nextIdx=this._seek(a,0,this.commentaries.length))},a.prototype._seek=function(a,b,c){if(b===c)return this.isSeeking=!1,b;var d=b+Math.floor(.5*(c-b)),e=this.commentaries[d].end,f=this.commentaries[d].begin;return a>=f&&e>a?(this.isSeeking=!1,d):a>e?this._seek(a,d+1,c):this._seek(a,b,d)},a.prototype.setSize=function(a,b){this.boundryWidth=a,this.boundryHeight=b},a.prototype.draw=function(){var a=jQuery(this.curCommentary).attr("id"),b=Math.round(this.boundryHeight*this.RATIO),c=Math.round(this.boundryWidth*this.RATIO),d=Number(a.substring(a.indexOf("_")+1,a.length)),e=this.commentaries[d],f=c,g=c/this.TEMPLATE_DEFAULT_RATIO,h=jQuery("#"+a+" .closeBtn");if(e.isTemplate()){var i=g,j=this.TEXT_PADDING,k=this.LINE_HEIGHT;this.isFullscreen&&this.resizeOnFullscreen?(j=this.FULLSCREEN_TEXT_PADDING,k=this.FULLSCREEN_LINE_HEIGHT,jQuery("#"+a+" p .title").addClass("large"),jQuery("#"+a+" p .content").addClass("large")):(jQuery("#"+a+" p .title").removeClass("large"),jQuery("#"+a+" p .content").removeClass("large"));var l=f-i-1.5*j-jQuery(h).width();""===e.image?(l=f-1.5*j-jQuery(h).width(),jQuery("#"+a+" p").css("margin-left",j)):jQuery("#"+a+" p").css("margin-left",i+j),jQuery("#"+a+" .bg").css("width",f),jQuery("#"+a+" .bg").css("height",g),jQuery("#"+a+" .bg").css("opacity",.8),jQuery("#"+a+" img").css("width",i),jQuery("#"+a+" img").css("height",i),jQuery("#"+a+" p").css("margin-top",j),jQuery("#"+a+" p").css("width",l),jQuery("#"+a+" p").css("line-height",k+"%"),this.adjustOverlaySize(),f=jQuery("#"+a+" .bg").width(),g=jQuery("#"+a+" .bg").height(),jQuery(h).css("margin-left",f-Number(jQuery(h).css("width").replace("px","")))}else{var m=jQuery("#"+a+" img"),n=m.width()/m.height();m.width()>m.height()?(f=c,g=f/n):(g=b,f=b*n),jQuery(m).css("height",g),jQuery(m).css("width",f),jQuery("#"+a+" .bg").css("width",f),jQuery("#"+a+" .bg").css("height",g),jQuery("#"+a+" .bg").css("opacity",0),jQuery(h).css("margin-left",f-Number(jQuery(h).css("width").replace("px","")))}switch(jQuery(h).on("click",jQuery.proxy(this.closeBtnClick,this)),e.align){case this.TOP_LEFT:jQuery(this.curCommentary).css("margin-left",this.PADDING),jQuery(this.curCommentary).css("margin-top",this.PADDING);break;case this.TOP_RIGHT:jQuery(this.curCommentary).css("margin-left",this.boundryWidth-f-this.PADDING),jQuery(this.curCommentary).css("margin-top",this.PADDING);break;case this.BOTTOM_LEFT:jQuery(this.curCommentary).css("margin-left",this.PADDING),jQuery(this.curCommentary).css("margin-top",this.boundryHeight-g-this.PADDING);break;default:jQuery(this.curCommentary).css("margin-left",this.boundryWidth-f-this.PADDING),jQuery(this.curCommentary).css("margin-top",this.boundryHeight-g-this.PADDING)}},a.prototype.adjustOverlaySize=function(){var a=jQuery(this.curCommentary).attr("id"),b=Number(a.substring(a.indexOf("_")+1,a.length)),c=jQuery("#"+a+" p"),d=jQuery("#"+a+" .bg"),e=jQuery("#"+a+" img"),f=Number(jQuery(c).css("margin-top").replace("px","")),g=this.TEXT_PADDING;for(this.isFullscreen&&this.resizeOnFullscreen&&(g=this.FULLSCREEN_TEXT_PADDING);f+jQuery(c).height()>jQuery(d).height()-g;){var h=jQuery(d).height()+this.INC;jQuery(c).css("width",jQuery(c).width()+this.INC);var i=Number(jQuery(c).css("margin-left").replace("px",""));""!==this.commentaries[b].image&&(jQuery(e).css("width",h),jQuery(e).css("height",h),jQuery(c).css("margin-left",h+g));var j=i+jQuery(c).width()+.5*g+jQuery("#"+a+" .closeBtn").width();jQuery(d).css("width",j),jQuery(d).css("height",h)}""===this.commentaries[b].image&&jQuery(d).css("height",Number(jQuery(c).css("margin-top").replace("px",""))+jQuery(c).height()+g)},a.prototype.closeBtnClick=function(){this.animateOut()},a.prototype.hasCommentary=function(){return null!==this.curCommentary},a.prototype.animateIn=function(){null!==this.curCommentary&&(jQuery(this.curCommentary).stop(),jQuery(this.curCommentary).css("opacity",0),jQuery(this.curCommentary).animate({opacity:1},300),jQuery(this.curCommentary).css("display","block"))},a.prototype.animateOut=function(a,b){var c=jQuery(this.curCommentary);null!==a&&(c=jQuery("#"+a)),null!==c&&(jQuery(c).stop(),jQuery(c).animate({opacity:0},300,b),jQuery(c).css("display","block"))},a.prototype.removeCommentary=function(a){var b=jQuery(this.curCommentary);console.log("removeCommentary"),null!==a&&(b=jQuery("#"+a)),null!==b&&(console.log("!!!!! removeCommentary "+jQuery(b)),jQuery(b).stop(),jQuery(b).clearQueue(),jQuery(b).remove())},a.prototype.show=function(){this.visible=!0,jQuery(this.commentaryContainer).removeClass("comOff"),null!==this.curCommentary&&(this.draw(),this.animateIn())},a.prototype.hide=function(){this.visible=!1,jQuery(this.commentaryContainer).addClass("comOff")},a.prototype.reset=function(){this.nextIdx=0,this.isSeeking=!1,this.isError=!1,this.removeCommentary()},window.CommentaryManager=a,window.CommentaryOverlay=b}(),/*!
 * html5video_comscoreSS.js
 */
function(){"use strict";function a(a,b,c){this.c1="2",this.c2=a,this.c3=b,this.c4=c;var d="http://b.scorecardresearch.com/p?c1="+this.c1+"&c2="+this.c2;""!==this.c3&&null!==this.c3&&(d+="&c3="+this.c3),""!==this.c4&&null!==this.c4&&(d+="&c4="+this.c4),this.log(d),this.currentEvent="",this.videoEnded=!1,this.streamSense=new ns_.StreamSense({},d)}a.prototype.createPlaylist=function(){this.log("createPlaylist()"),this.streamSense.setPlaylist()},a.prototype.addClip=function(a,b,c,d,e,f,g,h,i,j,k,l,m){null===m&&(m=!1);var n={};""!==h&&(n.C6=h),n.C16=1,n.ns_st_ci=a,n.ns_st_cl=b,n.ns_st_pu=this.c3,n.ns_st_pr=c,n.ns_st_ep=h,n.ns_st_cu="none",n.ns_st_ct=d,n.ns_st_cn=e,n.ns_st_pn=f,n.ns_st_tp=g,n.ns_st_dt=i,l||(n.ns_st_ty=j),n.ns_st_li=0,k&&(n.ns_st_li=1);var o="";o=c.length>0?c:this.c3,n.ns_st_de=o,l&&(n.ns_st_ad=1);var p="";for(var q in n)p+="	"+q+": "+n[q]+"\n";this.log("Clip Data:\n"+p),this.log("Calling setClip() with above clip data, and looped = "+m+"\n"),this.streamSense.setClip(n,m)},a.prototype.videoBuffer=function(a){this.log("videoBuffer( "+a+" )\n"),this.streamSense.notify(ns_.StreamSense.PlayerEvents.BUFFER,a),this.currentEvent=ns_.StreamSense.PlayerEvents.BUFFER},a.prototype.videoPause=function(a){this.log("videoPause( "+a+" )\n"),this.streamSense.notify(ns_.StreamSense.PlayerEvents.PAUSE,a),this.currentEvent=ns_.StreamSense.PlayerEvents.PAUSE},a.prototype.videoPlay=function(a){this.videoEnded||this.currentEvent.toString()==ns_.StreamSense.PlayerEvents.PLAY.toString()||(this.log("videoPlay( "+a+" )\n"),this.currentEvent=ns_.StreamSense.PlayerEvents.PLAY,this.streamSense.notify(ns_.StreamSense.PlayerEvents.PLAY,a))},a.prototype.videoEnd=function(a){this.log("videoEnd( "+a+" )\n"),this.streamSense.notify(ns_.StreamSense.PlayerEvents.END,a),this.currentEvent=ns_.StreamSense.PlayerEvents.END},a.prototype.endContentVideo=function(){this.videoEnded=!0},a.prototype.reset=function(){this.log("reset()"),this.videoEnded=!1,this.currentEvent=""},a.prototype.log=function(a){swfobject.getQueryParamValue("debug")&&console.log("[Comscore Stream Sense] "+a)},window.ComscoreStreamSense=a}(),/*!
 * html5video_core.js
 */
function(){"use strict";function a(a,b){this.label=a,this.playerVersion="1.0.14",this.isVideodrome=!!b,this.rootUrl=VideoPlayerUtils.getRootPath(!/https:/.test(window.location.href)),this.googleCmsId="191",this.googleIMA3Url="//pubads.g.doubleclick.net/gampad/ads?sz=320x240&iu=/6872/shaw.globaltv.com&ciu_szs=1x1,120x60,122x62,300x250,728x90&impl=s&gdfp_req=1&env=vp&output=xml_vast2&unviewed_position_start=1&url={referer}&correlator={timestamp}&cmsid={cms_id}&vid={contentid}",this.rootCategory="GLOBVC3",this.debugging=!1,swfobject.getQueryParamValue("debug")&&(this.debugging=!0),this.htmlContainerId="",this.trackingManager=null,this.currentAdDuration=0,this.currentAdStartTime=0,this.currentAdPauseTime=0,this.currentPlayhead=0,this.currentWidth=0,this.currentHeight=0,this.fullscreen=!1,this.fullscreenWidth=null,this.fullscreenHeight=null,this.exitByAdClick=!1,this.hideControlTimer=null,this.wmode="direct",this.omnitureAccount="canglobaltv",this.omnitureNamespace="canglobaltv",this.omnitureDC="112",this.omnitureDebug=this.debugging,this.omniturePlayerName="",this.omnitureTrackingServer="tr.globalnews.ca",this.oldComscoreC2="3005660",this.comscoreC2="16433040",this.comscoreC3="GLOBALNEWS",this.comscoreC4="7293792",this.videoStartTime=0,this.initialVideoSeekCompleted=!1,this.playEventCount=0,this.mediaPlayList=[],this.autoPlay=!1,this.docListenerAdded=!1,this.retryCounter=0,this.unblockAdClickTimer=-1,this.iPhonePreRollComplete=!1,this.posterImageUrl="",this._readCookie("svpVideoVolume")?"true"==this._readCookie("svpVideoMuted")?this.videoVolume=0:this.videoVolume=this._readCookie("svpVideoVolume"):this._readCookie("svpVideoMuted")&&"true"==this._readCookie("svpVideoMuted")?this.videoVolume=0:this.videoVolume=1,this.isInitialized=!0,this.contentIdSet=!1,this.flashPlayer=!0,this.html5Player=!this.flashPlayer,this.contentId="",this.userAgent="",this.flashVersion="",this.isIOS=!1,this.isIPhone=!1,this.isAndroid=!1,this.isMobile=!1,this.disabledFullscreen=!1,this.isEmbedPlayer=!1,this.clickThroughUrl="",this.platformAccount="dtjsEC/",this.feedId="lmUonmjo39I2",this.videoSMILUrl="//link.theplatform.com/s/"+this.platformAccount+"{releasepid}?format=SMIL&mbr=true",this.metadataUrl="//feed.theplatform.com/f/"+this.platformAccount+this.feedId+"?form=json&byId={contentid}&callback=?",this.captionUrl="",this.commentaryUrl="",this.captionManager=null,this.captionEnabled=!1,this.commentaryEnabled=!1,this.contentInitialized=!1,this.adsLoaded=!1,this.adDisplayContainer=null,this.adsLoader=null,this.adsManager=null,this.adIntervalTimer=null,this.adFailed=!1,this.flashPlayerUrl=this.isVideodrome?this.rootUrl+"swf/legacyPlayer.swf":this.rootUrl+"swf/fallback/legacyPlayer.swf",this.userAgent=navigator.userAgent,this._is_ie()?this.isIE=!0:this.isIE=!1,this.flashVersion=swfobject.getFlashPlayerVersion(),(-1!=this.userAgent.indexOf("iPad")||-1!=this.userAgent.indexOf("iPhone")||-1!=this.userAgent.indexOf("iPod"))&&(this.isIOS=!0),-1!=this.userAgent.indexOf("iPhone")&&(this.isIPhone=!0),-1!=this.userAgent.indexOf("Android")&&(this.isAndroid=!0),(-1!=this.userAgent.toLowerCase().indexOf("mobile")||-1!=this.userAgent.toLowerCase().indexOf("android"))&&(this.isMobile=!0),this.isAndroidS6=/SM\-G92/.test(this.userAgent),this.playerType=this.isAndroid||this.isMobile?"html5":"auto",swfobject.getQueryParamValue("format")&&(this.playerType=swfobject.getQueryParamValue("format")),this.fullscreenDisplay=!1,this.isPlaying=!1,this.isPaused=!1,this.isBuffering=!1,this.adPlaying=!1,this.adIsPaused=!1,this.videoStarted=!1,this.videoCompleted=!1,this.volumeInteraction=!1,this.shareFunctionCallback=null,this.logDebug("Initializing player, debug mode? "+this.debugging),this.logDebug("Browser User Agent: "+this.userAgent),this.logDebug("Flash Player version: "+this.flashVersion.major+"."+this.flashVersion.minor),this.logDebug("iOS device? "+this.isIOS.toString()),this.logDebug("iPhone device? "+this.isIPhone.toString()),this.logDebug("android device? "+this.isAndroid.toString()),this.logDebug("Mobile platform: "+this.isMobile.toString()),this.upNextClipSet=!1,this.upNextIntervalId=!1,this.upNextCountdown=10,this.upNextCounter=0,this.upNextReleaseInfo={},this.singleTimeInitComplete=window.vpinit,this.googleIMAInit=!1,this.isRestrictedClip=!1,jQuery("head").append("<script>var isIe8 = false;</script>"),jQuery("head").append("<!--[if IE 8]><script>var isIe8 = true;</script><![endif]-->")}a.prototype.initialize=function(a){this.logDebug("Initializing with passed player settings..."),this.flashPlayerUrl=a.flashPlayerUrl,this.isInitialized=!0},a.prototype.setPosterImage=function(a,b){this.logDebug("Poster Image set to: "+a),this.posterImageUrl=a},a.prototype.setShareFunction=function(a){var b;b=a.name&&"undefined"!=a.name?a.name:a.toString().match(/^function\s*([^\s(]+)/)[1],this.logDebug("Share function callback set by calling page..."+typeof a+" [ "+b+" ]"),this.shareFunctionCallback=a,this.flashPlayer?jQuery("#"+this.flashPlayerObjectId)[0].setShareFunction(b):jQuery("#"+this.htmlContainerId+" .svpContainer .share").show()},a.prototype.setUpNextClip=function(a){this.logDebug("Up next clip content id set: "+a),this.upNextContentId=a;var b=this.metadataUrl.split("{contentid}").join(a);this.mediaPlayList.shift(),this.logDebug("Fetching Up Next release metadata from: "+b),this.logDebug("remaining list: "+this.mediaPlayList),jQuery.ajaxSetup({cache:"true"}),jQuery.getJSON(b,jQuery.proxy(this.parseUpNextMetadata,this)),jQuery.ajaxSetup({cache:"false"})},a.prototype.parseUpNextMetadata=function(a){if(this.logDebug("parseUpNextMetadata: "),!a||!a.entryCount)return this.logDebug("Could not parse up next data!"),void(this.mediaPlayList.length>0&&(this.logDebug("Moving to next item in playlist: "+this.mediaPlayList[0]),this.setUpNextClip(this.mediaPlayList[0])));var b={};if(b.contentId=this.upNextContentId,b.title=a.entries[0].title?a.entries[0].title:"",b.show=a.entries[0].pl1$show?a.entries[0].pl1$show:"",b.thumbnailURL=a.entries[0].plmedia$defaultThumbnailUrl?a.entries[0].plmedia$defaultThumbnailUrl:"",b.destinationURL=a.entries[0].media$content[0].plfile$url?a.entries[0].media$content[0].plfile$url:"",b.season="",b.episode="",this.flashPlayer)try{this.logDebug("Trying to access flash..."),this.setUpNextFlash(b)}catch(c){}else this.upNextClipSet=!0,this.upNextReleaseInfo=b},a.prototype.setUpNextFlash=function(a){this.logDebug("setUpNextFlash()");var b=jQuery("#"+this.flashPlayerObjectId)[0];b.setNextClip?(this.logDebug("setNextClip function is available, calling!"),b.setNextClip(a)):(this.logDebug("setNextClip function is NOT available!"),setTimeout(jQuery.proxy(this.setUpNextFlash,this),1e3,a))},a.prototype.checkPlayList=function(){return this.logDebug("Checking up next playlist, in case it is set!"),0===this.mediaPlayList.length?void(this.upNextClipSet=!1):void this.setUpNextClip(this.mediaPlayList[0])},a.prototype.setContentId=function(a,b){this.contentId=a,this.releaseLoadedCallback=b;var c=this.metadataUrl.split("{contentid}").join(this.contentId);this.logDebug("Fetching release metadata from: "+c),jQuery.ajaxSetup({cache:"true"}),jQuery.getJSON(c,jQuery.proxy(this.parseMetadata,this)),jQuery.ajaxSetup({cache:"false"})},a.prototype.parseMetadata=function(a){function b(a){for(var b=0;b<a.length;b++)if(-1!=a[b].media$name.indexOf("Live Stream"))return!0;return!1}function c(a,b){for(var c="Unknown",d=0,e=0;e<a.length;e++)if(a[e].media$name.indexOf(b)>-1){var f=a[e].media$name.split("/").length;f>d&&(d=f,c=a[e].media$name)}return c}function d(a,b){var c="Unavailable";return b.length>0&&(c=a,c+=b.length>1?b:"0"+b),c}if(!a||!a.entryCount)return this.logDebug("Unable to find this content ID"),void this.releaseLoadedCallback();this.logDebug("Release metadata loaded:");var e=a.entries[0].pl1$network?a.entries[0].pl1$network:"Unknown",f={contentId:this.contentId,thumbnailUrl:a.entries[0].plmedia$defaultThumbnailUrl,duration:a.entries[0].media$content[0].plfile$duration,clipType:a.entries[0].pl1$clipType?a.entries[0].pl1$clipType:"",season:a.entries[0].pl1$season?a.entries[0].pl1$season:"",episode:a.entries[0].pl1$episode?a.entries[0].pl1$episode:"",show:a.entries[0].pl1$show?a.entries[0].pl1$show:"",title:a.entries[0].title,publishDate:this._iSODateString(new Date(a.entries[0].pubDate)),description:a.entries[0].description,analyticsPlayerName:c(a.entries[0].media$categories,this.rootCategory),omnitureClipTitle:"",brand:e.toLowerCase(),chapterBreaks:[],isLive:b(a.entries[0].media$categories),captionUrl:this.captionUrl,commentaryUrl:this.commentaryUrl};this.logDebug("Live Stream? "+f.isLive);var g=a.entries[0].id,h=g.split("/");f.videoId=h[h.length-1];var i=a.entries[0].pl1$chapterStartTimes?a.entries[0].pl1$chapterStartTimes:"";0===i.length&&(i=a.entries[0].pl1$chapterstarttimes?a.entries[0].pl1$chapterstarttimes:"");var j=null;if(i.length>0){j=[];for(var k=i.split(","),l=0;l<k.length;l++){var m=this._timestampToSeconds(k[l]);0!==m&&j.push(m)}}f.chapterBreaks=j,f.omnitureClipTitle=f.show+";"+d("Season ",f.season)+";"+f.title+";Unavailable;"+d("Episode ",f.episode),f.comscoreC6="",f.comscoreC6=f.show.split(" ").join("").split(":").join("").split("-").join(""),f.season.length>0&&(f.comscoreC6+="-"+d("Season ",f.season)),f.episode.length>0&&(f.comscoreC6+="-"+d("Episode ",f.episode)),f.videoMP4="",f.videoWebM="",f.videoFLV="",f.videoM3U8="",f.videoF4M="";for(var n in a.entries[0].media$content)switch(a.entries[0].media$content[n].plfile$format){case"MPEG4":this.logDebug("MP4 SMIL: "+a.entries[0].media$content[n].plfile$url),f.videoMP4=a.entries[0].media$content[n].plfile$url;break;case"WebM":this.logDebug("WebM SMIL: "+a.entries[0].media$content[n].plfile$url),f.videoWebM=a.entries[0].media$content[n].plfile$url;break;case"FLV":f.videoFLV=a.entries[0].media$content[n].plfile$url;break;case"M3U":f.videoM3U8=a.entries[0].media$content[n].plfile$url;break;case"F4M":f.videoF4M=a.entries[0].media$content[n].plfile$url}this.releaseInfo=f,this.contentIdSet=!0,this.releaseLoadedCallback()},a.prototype.inject=function(a){this.logDebug("Injecting player into: "+a),this.htmlContainerId=a,this.singleTimeInitComplete||(window.vpinit=!0,this.singleTimeInitComplete=!0,this.logDebug("do single time init!"),this.logDebug("Injecting player stylesheet."),jQuery("head").append('<link rel="stylesheet" href="'+this.rootUrl+'css/shawvideo.css" type="text/css" />'),this.doInjection())},a.prototype.doInjection=function(){if(this.logDebug("doInjection();"),!this.isInitialized||!this.contentIdSet)return this.displayError("this content is currently unavailable, please try again later",""),void(this.contentIdSet?this.logDebug("Initialization error"):this.logDebug("ContentID not set, or incrorrect"));this.flashPlayerObjectId=this.htmlContainerId+"_player"+(new Date).getTime();var a=b.split("{HTML_ID}").join(this.flashPlayerObjectId);if(jQuery("#"+this.htmlContainerId).html(a),this.googleIMA3Url.indexOf("cust_params")<0&&(this.googleIMA3Url=this.googleIMA3Url+="&cust_params="),"html5"===this.playerType)this.logDebug("user has requested an html5 player!"),this.flashPlayerAvailable({success:!1});else{this.logDebug("try to inject the flash player!");var c="";this.releaseInfo.isLive?(c=this.releaseInfo.videoF4M,0===c.length&&(c=this.releaseInfo.videoMP4)):c=this.releaseInfo.videoMP4,-1!=c.indexOf("&metafile=")&&(c=c.substring(0,c.indexOf("&metafile="))),c+="&format=SMIL&mbr=true";var d=this.googleIMA3Url.replace(/{cms_id}|{cmsid}/,this.googleCmsId).replace("cust_params=","cust_params=playerformat%3Dflash%26"),e={flashId:this.flashPlayerObjectId,releaseURL:escape(c),adTagUrl:escape(d),oTr:this.omnitureTrackingServer,oAcct:this.omnitureAccount,oNS:this.omnitureNamespace,oDC:this.omnitureDC,oDebug:this.debugging,oPName:"",cC2:this.oldComscoreC2,cC3:this.comscoreC3,cC4:this.comscoreC4,ctUrl:escape("http://www.globaltv.com/video/"),vmsAcct:this.platformAccount,vmsFeed:this.feedId,feedpid:this.feedId,autoPlay:this.autoPlay,posterImage:this.posterImageUrl,videoStartTime:this.videoStartTime,countdownSeconds:this.upNextCountdown},f={menu:"false",allowScriptAccess:"always",wmode:this.wmode,allowFullscreen:"true"},g={};swfobject.embedSWF(this.flashPlayerUrl,this.flashPlayerObjectId,"100%","100%","11.1.0",null,e,f,g,jQuery.proxy(this.flashPlayerAvailable,this))}},a.prototype.flashPlayerAvailable=function(a){a.success?(this.logDebug("FLASH!"),this.flashPlayer=!0,this.html5Player=!this.flashPlayer,window["checkPL_"+this.flashPlayerObjectId]=jQuery.proxy(this.checkPlayList,this),jQuery("#"+this.htmlContainerId+" .svpContainer").removeClass("loading")):(this.logDebug("HTML5!"),this.flashPlayer=!1,this.html5Player=!this.flashPlayer,this.html5StreamCheckAndPlay())},a.prototype.insertHTML5Player=function(){this.logDebug("Injecting HTML5 Player into the DOM...");var b=g;this.unblockAdClick(),jQuery("#"+this.htmlContainerId+" .svpVideoScreen").html(b),"ontouchstart"in document.documentElement||jQuery("#"+this.htmlContainerId+" .svpContainer").addClass("svpVideoDesktop"),this.googleIMA3Url=this.googleIMA3Url.replace("cust_params=","cust_params=playerformat%3Dhtml5%26"),jQuery("#"+this.htmlContainerId+" .svpContainer .htmlVideo").attr("data-video-url",this.releaseInfo.streamUrl),jQuery("#"+this.htmlContainerId+" .svpContainer .htmlVideo").attr("src",this.releaseInfo.streamUrl),jQuery("#"+this.htmlContainerId+" .svpContainer .htmlVideo").on("ended",jQuery.proxy(this.videoEnded,this)),jQuery("#"+this.htmlContainerId+" .svpContainer .htmlVideo").on("canplay",jQuery.proxy(this.canPlayEvent,this)),jQuery("#"+this.htmlContainerId+" .svpContainer .htmlVideo").on("timeupdate",jQuery.proxy(this.updateTimeDisplay,this)),jQuery("#"+this.htmlContainerId+" .svpContainer .htmlVideo").on("loadedmetadata",jQuery.proxy(this.videoLoadedMetadata,this)),jQuery("#"+this.htmlContainerId+" .svpContainer .htmlVideo").on("loadeddata",jQuery.proxy(this.videoLoadedData,this)),jQuery("#"+this.htmlContainerId+" .svpContainer .htmlVideo").on("play",jQuery.proxy(this.playEvent,this)),jQuery("#"+this.htmlContainerId+" .svpContainer .htmlVideo").on("pause",jQuery.proxy(this.pauseEvent,this)),jQuery("#"+this.htmlContainerId+" .svpContainer .htmlVideo").on("playing",jQuery.proxy(this.playingEvent,this)),jQuery("#"+this.htmlContainerId+" .svpContainer .htmlVideo").on("waiting",jQuery.proxy(this.videoBufferEvent,this)),jQuery("#"+this.htmlContainerId+" .svpContainer .htmlVideo").on("progress",jQuery.proxy(this.videoProgressEvent,this)),jQuery("#"+this.htmlContainerId+" .svpContainer .htmlVideo").on("seeked",jQuery.proxy(this.seekedEvent,this)),jQuery("#"+this.htmlContainerId+" .svpContainer .htmlVideo").on("seeking",jQuery.proxy(this.seekingEvent,this)),jQuery("#"+this.htmlContainerId+" .svpContainer .htmlVideo").on("stalled",jQuery.proxy(this.videoStalledEvent,this));var d,e=jQuery("#"+this.htmlContainerId+" .svpContainer .htmlVideo")[0];this.isIOS?(e.addEventListener("webkitbeginfullscreen",jQuery.proxy(this.fullScreenChangeEvent,this)),e.addEventListener("webkitendfullscreen",jQuery.proxy(this.fullScreenChangeEvent,this))):this.docListenerAdded||(jQuery(document).on("fullscreenchange",jQuery.proxy(this.fullScreenChangeEvent,this)),jQuery(document).on("mozfullscreenchange",jQuery.proxy(this.fullScreenChangeEvent,this)),jQuery(document).on("webkitfullscreenchange",jQuery.proxy(this.fullScreenChangeEvent,this))),this.docListenerAdded||this.isIPhone||(this.isAndroid?jQuery(window).on("resize",jQuery.proxy(this.orientationChangeEvent,this)):jQuery(window).on("orientationchange",jQuery.proxy(this.orientationChangeEvent,this))),this.docListenerAdded=!0,jQuery("#"+this.htmlContainerId+" .svpVideoScreen").append(c),d=0===this.posterImageUrl.length?l.split("{IMG_URL}").join(this.releaseInfo.thumbnailUrl):l.split("{IMG_URL}").join(this.posterImageUrl);var f=this.rootUrl+"images/play_btn_hover.png",i=this.rootUrl+"images/play_btn.png";jQuery("#"+this.htmlContainerId+" .svpVideoScreen").append(d),!this.autoPlay||this.isIOS||this.isAndroid||jQuery("#"+this.htmlContainerId+" .svpContainer .pauseScreen").css("display","none"),jQuery("#"+this.htmlContainerId+" .svpContainer .largePlayBtn img").attr("src",i),jQuery("#"+this.htmlContainerId+" .svpContainer .largePlayBtn").hover(jQuery.proxy(function(a){jQuery(a.target).attr("src",f)},this),jQuery.proxy(function(a){jQuery(a.target).attr("src",i)},this)),jQuery("#"+this.htmlContainerId+" .svpContainer .largePlayBtn").bind("click touchstart",jQuery.proxy(function(a){jQuery(a.target).attr("src",f)},this)),jQuery("#"+this.htmlContainerId+" .svpContainer .videoStatusWindow .onLoadPlayBtn").on("click",jQuery.proxy(this.requestAds,this)),jQuery("#"+this.htmlContainerId+" .svpContainer .videoStatusWindow .justWatchedPlayBtn").on("click",jQuery.proxy(this.requestAds,this)),jQuery("#"+this.htmlContainerId+" .svpContainer .videoStatusWindow .pauseScreen").on("click",jQuery.proxy(this.requestAds,this)),jQuery("#"+this.htmlContainerId+" .svpContainer").append(h),a.prototype.volumeInteractionHandler(),a.prototype.animateVideoVolume(this.htmlContainerId,this.videoVolume),jQuery("#"+this.htmlContainerId+" .svpContainer .videoStatusWindow .videoTitle p").html(""+this.releaseInfo.title);var k=this.releaseInfo.brand.split(" ").join("");if(jQuery("#"+this.htmlContainerId+" .svpContainer .videoStatusWindow .brand").addClass(""+k),jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .timeDisplay").html("<span class='currentTime'>0:00</span> / <span class='duration'>"+this._secondsToHHMMSS(this.releaseInfo.duration)+"</span>"),this.releaseInfo.chapterBreaks&&this.releaseInfo.chapterBreaks.length>0&&!this.isIPhone)for(var m=0;m<this.releaseInfo.chapterBreaks.length;m++){var n=j,o=Math.round(this.releaseInfo.chapterBreaks[m]/this.releaseInfo.duration*100);n=n.split("{POS}").join(o+"%"),jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .chapterMarkers").append(n)}var p="click";this.isMobile&&jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .volume").hide(),this.isIOS&&(p="touchstart"),this.logDebug("CONTROL RACK EVENT: "+p),jQuery(window).on("resize",jQuery.proxy(this.resizeHandler,this)),this.disabledFullscreen?jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .fullscreen").css("display","none"):jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .fullscreen").on(p,jQuery.proxy(this.toggleFullscreen,this)),jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .hideControlRack").on(p,jQuery.proxy(function(){},this)),jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .seekBar").on(p,jQuery.proxy(this.videoSeek,this)),jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .bufferFill").on(p,jQuery.proxy(this.videoSeek,this)),jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .seekBarFill").on(p,jQuery.proxy(this.videoSeek,this)),jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .playPause").on(p,jQuery.proxy(this.playPause,this)),jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .closeCaption").on(p,jQuery.proxy(this.toggleCloseCaption,this)),jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .annotation").on(p,jQuery.proxy(this.toggleCommentary,this)),jQuery("#"+this.htmlContainerId+" .svpContainer .videoStatusWindow .endOfClipComponent .watchNow").on("click",jQuery.proxy(this.watchUpNext,this)),jQuery("#"+this.htmlContainerId+" .svpContainer .videoStatusWindow .endOfClipComponent .nextUpPlayBtn").on("click",jQuery.proxy(this.watchUpNext,this)),jQuery("#"+this.htmlContainerId+" .svpContainer .share").on("click",jQuery.proxy(function(){this.shareFunctionCallback()},this)),jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .mute").on("click",jQuery.proxy(this.videoMute,this)),jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .volumeSliderContainer .volumeHandle").on("mousedown",jQuery.proxy(this.videoVolumeDrag,this)),jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .volumeSliderContainer .volumeHandle").on("mouseup",jQuery.proxy(this.videoVolumeDragStop,this)),jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .volumeSliderContainer .volumeBar").on("click",jQuery.proxy(this.videoVolumeClick,this)),jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .volumeSliderContainer .volumeBarFill").on("click",jQuery.proxy(this.videoVolumeClick,this)),this.logDebug("Supported Video Types: <br/>MP4: "+jQuery("#"+this.htmlContainerId+" .svpContainer .htmlVideo")[0].canPlayType("video/mp4")+" / WebM: "+jQuery("#"+this.htmlContainerId+" .svpContainer .htmlVideo")[0].canPlayType("video/webm")),this.autoPlay&&(this.isIOS||this.isAndroid||this.requestAds())},a.prototype.playEvent=function(){if(this.playEventCount++,1===this.playEventCount){this.checkPlayList();var a=jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack #annotationToolTip").width(),b=jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .annotation").position(),c=b.left-a/2;jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack #annotationToolTip").css("left",c+"px"),""!==this.releaseInfo.commentaryUrl&&(this._readCookie("svpAnnotationToolTip")||(this._createCookie("svpAnnotationToolTip",1,31),jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack #annotationToolTip").fadeIn("slow").delay(2e4).fadeOut("slow")),this._readCookie("svpAnnotationToolTip")&&(annotationToolTipViewCount=this._readCookie("svpAnnotationToolTip"),this._readCookie("svpAnnotationToolTip")<=5&&(jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack #annotationToolTip").fadeIn("slow").delay(2e4).fadeOut("slow"),annotationToolTipViewCount=parseInt(annotationToolTipViewCount,10)+1,this._createCookie("svpAnnotationToolTip",annotationToolTipViewCount,31))))}var d=jQuery("#"+this.htmlContainerId+" .svpContainer .htmlVideo")[0],e=d.currentTime;this.logDebug("Html5 Video Event: play "+e+", videoStarted? "+this.videoStarted+", isPlaying? "+this.isPlaying),this.videoStarted||this.adPlaying!==!1||this.trackingManager&&this.trackingManager.trackByState(this.trackingManager.CONTENT_START,0),this.isPlaying||this.adPlaying||(e=jQuery("#"+this.htmlContainerId+" .svpContainer .htmlVideo")[0].currentTime,this.trackingManager&&this.trackingManager.trackByState(this.trackingManager.CONTENT_PLAYING,e)),this.isPlaying=!0,this.videoStarted=!0,this.isPaused=!this.isPlaying,d.volume=this.videoVolume,jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .playPause").addClass("videoPlaying"),jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .playPause div span").html("Pause"),jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack div").removeClass("btnDisabled"),jQuery("#"+this.htmlContainerId+" .svpContainer").removeClass("loading"),jQuery("#"+this.htmlContainerId+" .svpContainer .pauseScreen").css("display","none"),this.fadeOut("#"+this.htmlContainerId+" .svpContainer .videoStatusWindow img.posterStill",0)},a.prototype.pauseEvent=function(){this.logDebug("Html5 Video Event: pause"),this.isPlaying=!1,this.isPaused=!this.isPlaying,this.adPlaying||jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .playPause div span").html("Play");var a=jQuery("#"+this.htmlContainerId+" .svpContainer .htmlVideo")[0].currentTime;this.trackingManager&&this.trackingManager.trackByState(this.trackingManager.CONTENT_PAUSED,a)},a.prototype.videoProgressEvent=function(){var a=jQuery("#"+this.htmlContainerId+" .svpContainer .htmlVideo")[0],b=a.currentTime;this.isAndroidS6&&!this.releaseInfo.isLive&&b>=a.duration&&(jQuery("#"+this.htmlContainerId+" .svpContainer .htmlVideo").off("progress",jQuery.proxy(this.videoProgressEvent,this)),this.videoEnded()),!this.videoStarted||this.isPaused||this.isBuffering||b!=this.currentPlayhead||(this.logDebug("Html5 Video Event: progress - buffering "+b),this.trackingManager&&this.trackingManager.trackByState(this.trackingManager.BUFFER_START,b),this.isBuffering=!0),this.isPaused||b==this.currentPlayhead||(this.isBuffering=!1,this.trackingManager&&(this.trackingManager.currentState!=this.trackingManager.BUFFER_START||this.adPlaying||(this.logDebug("Html5 Video Event: progress - play "+b),this.trackingManager.trackByState(this.trackingManager.CONTENT_PLAYING,b)))),this.currentPlayhead=b},a.prototype.videoBufferEvent=function(){this.logDebug("Html5 Video Event: waiting")},a.prototype.videoStalledEvent=function(){this.logDebug("Html5 Video Event: stalled")},a.prototype.videoSuspendEvent=function(){this.logDebug("Html5 Video Event: suspend")},a.prototype.seekedEvent=function(){if(this.logDebug("Html5 Video Event: seeked"),this.isPaused){this.isPaused=!1;var a=jQuery("#"+this.htmlContainerId+" .svpContainer .htmlVideo")[0];a.play()}if(!this.isPlaying&&!this.adPlaying){this.isIPhone&&this.trackingManager.trackByState(this.trackingManager.SEEK_START,this.currentPlayhead);var b=jQuery("#"+this.htmlContainerId+" .svpContainer .htmlVideo")[0].currentTime;this.trackingManager.trackByState(this.trackingManager.CONTENT_PLAYING,b),this.isPlaying=!0,this.videoCompleted=!1}},a.prototype.seekingEvent=function(){this.logDebug("Html5 Video Event: seeking"),this.isPlaying=!1},a.prototype.playingEvent=function(){if(this.logDebug("Html5 Video Event: playing"),!this.isPlaying&&!this.adPlaying){var a=jQuery("#"+this.htmlContainerId+" .svpContainer .htmlVideo")[0].currentTime;this.trackingManager.trackByState(this.trackingManager.CONTENT_PLAYING,a)}this.isPlaying=!0},a.prototype.videoLoadedMetadata=function(){this.logDebug("Html5 Video Event: loadedmetadata");var a=jQuery("#"+this.htmlContainerId+" .svpContainer .htmlVideo")[0],b=jQuery("#"+this.htmlContainerId+" .svpContainer .svpVideoScreen video");if(this.isIPhone&&this.iPhonePreRollComplete===!0){b.attr("data-video-url"),b.attr("src");a.play()}jQuery("#"+this.htmlContainerId+" .svpContainer .loadMessage").hide(),this.contentInitialized=!0,this.adFailed&&(this.adFailed?this.logDebug("Ad Error: skip ad, calling PLAY on html5 video player"):this.logDebug("iPhone / Android: calling PLAY on html5 video player"),a.play())},a.prototype.loadeddata=function(){this.logDebug("video loaded!!")},a.prototype.resizeHandler=function(a){var b=jQuery("#"+this.htmlContainerId+" .svpContainer").width(),c=jQuery("#"+this.htmlContainerId+" .svpContainer").height();(this.currentWidth!==b||this.currentHeight!==c)&&(this.logDebug("We got resized! this.fullscreen "+this.fullscreen),this.currentWidth=b,this.currentHeight=c,this.adsManager&&this.resizeAdContainer(),this.captionManager&&this.captionManager.isReady&&(this.setCaptionSize(),this.captionManager.visible&&this.captionManager.draw()),this.commentaryManager&&this.commentaryManager.isReady&&(this.setCommentarySize(),this.commentaryManager.visible&&this.commentaryManager.hasCommentary()&&(this.commentaryManager.isFullscreen=jQuery("#"+this.htmlContainerId+" .svpContainer").hasClass("fullScreenMode"),this.commentaryManager.draw())),this.fullscreen&&!this.isIPhone&&(this.fullscreenWidth=b,this.fullscreenHeight=c,this.animateInControls(!0)))},a.prototype.resizeAdContainer=function(){var a=jQuery("#"+this.htmlContainerId+" .svpContainer").width(),b=jQuery("#"+this.htmlContainerId+" .svpContainer").height();this.fullscreen||(b-=jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack").height()),this.logDebug("resize the ad manager!"),this.adsManager.resize(a,b,google.ima.ViewMode.NORMAL)},a.prototype.setCaptionSize=function(){var a=jQuery("#"+this.htmlContainerId+" .svpContainer").width(),b=jQuery("#"+this.htmlContainerId+" .svpContainer").height()-jQuery("#"+this.htmlContainerId+" .controlRack").height();this.captionManager.setSize(a,b)},a.prototype.setCommentarySize=function(){var a=jQuery("#"+this.htmlContainerId+" .svpContainer").width(),b=jQuery("#"+this.htmlContainerId+" .svpContainer").height()-jQuery("#"+this.htmlContainerId+" .controlRack").height();this.commentaryManager.setSize(a,b)},a.prototype.videoEnded=function(){if(this.logDebug("Html5 Video Event: video end"),!(!this.videoStarted||this.isIPhone&&this.adPlaying)){this.videoCompleted=!0;var a=jQuery("#"+this.htmlContainerId+" .svpContainer .htmlVideo")[0].currentTime;this.trackingManager&&this.trackingManager.trackByState(this.trackingManager.VIDEO_COMPLETE,a),!this.adFailed&&this.adsManager&&this.adsManager.destroy(),!this.adFailed&&this.adsLoader&&this.adsLoader.contentComplete(),this.adsManager=null,this.captionManager&&this.captionManager.reset(),this.commentaryManager&&this.commentaryManager.reset(),this.fullscreen?this.toggleFullscreen():this.endOfClipComponent();var b=i.split("{CUR_TIME}").join("0:00");b=b.split("{DURATION}").join(this._secondsToHHMMSS(this.releaseInfo.duration)),jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .timeDisplay").html(b),jQuery("#"+this.htmlContainerId+" .svpContainer .htmlVideo")[0].src="",this.videoStarted&&(this.videoStarted=!1)}},a.prototype.upNextTimerTick=function(){this.upNextCounter++,this.upNextCounter<this.upNextCountdown?jQuery("#"+this.htmlContainerId+" .svpContainer .videoStatusWindow .endOfClipComponent .upNextCountdownTimer").html(this.upNextCountdown-this.upNextCounter):(clearInterval(this.upNextIntervalId),this.upNextCounter=0,this.watchUpNext())},a.prototype.cancelEocAutoplay=function(){clearInterval(this.upNextIntervalId),jQuery("#"+this.htmlContainerId+" .svpContainer .videoStatusWindow .endOfClipComponent .nextUp h3").html("Next Video")},a.prototype.orientationChangeEvent=function(a){this.fullscreen&&(this.logDebug("orientationChangeEvent"),this.fullscreenWidth=jQuery(window).width(),this.fullscreenHeight=jQuery(window).height(),this.drawVideoScreen())},a.prototype.drawVideoScreen=function(a){this.logDebug("[fullscreen] drawVideoScreen - fullscreen? "+this.fullscreen),this.stopCheckUserActivity(),jQuery("#"+this.htmlContainerId+" .controlRack").clearQueue(),jQuery("#"+this.htmlContainerId+" .controlRack").stop();var b=jQuery("#"+this.htmlContainerId+" .svpContainer"),c=jQuery("#"+this.htmlContainerId+" .svpContainer .svpVideoScreen"),d=jQuery("#"+this.htmlContainerId+" .svpContainer .videoStatusWindow");jQuery(b).removeAttr("style"),jQuery(c).removeAttr("style"),jQuery(d).removeAttr("style");jQuery(b).offset();if((!this.isPaused||this.adPlaying)&&(jQuery(d).css("opacity","0"),jQuery(d).css("z-index","0")),jQuery("#"+this.htmlContainerId+" .controlRack").attr("style",""),this.fullscreen){var e=this.fullscreenWidth,f=this.fullscreenHeight,g="fixed";jQuery("#"+this.htmlContainerId+" .controlRack").height();this.logDebug("Fullscreen - "+e+" x "+f),jQuery("#"+this.htmlContainerId+" .controlRack").css("position","absolute"),jQuery("#"+this.htmlContainerId+" .controlRack").css("width","100%"),jQuery("#"+this.htmlContainerId+" .controlRack").css("bottom",0),jQuery(b).css("position",g),jQuery(b).css("top","0px"),jQuery(b).css("left","0px"),jQuery(b).css("width","100%"),jQuery(b).css("height","100%"),jQuery(c).css("position",g),jQuery(c).css("top","0px"),jQuery(c).css("left","0px"),jQuery(c).css("width","100%"),jQuery(c).css("height","100%"),jQuery(d).css("top","0px"),jQuery(d).css("left","0px"),jQuery(d).css("width","100%"),jQuery(d).css("height","100%"),this.startCheckUserActivity(),this.adPlaying&&(this.unblockAdClickTimer>=0&&clearTimeout(this.unblockAdClickTimer),this.unblockAdClickTimer=setTimeout(jQuery.proxy(this.unblockAdClick,this),1500))}else jQuery("#"+this.htmlContainerId+" .controlRack").css("top",0);this.captionManager&&this.captionManager.isReady&&(console.log("fullScreenChangeEvent - resize caption"),this.setCaptionSize(),this.captionManager.visible&&this.captionManager.draw()),this.commentaryManager&&this.commentaryManager.isReady&&(console.log("fullScreenChangeEvent - resize commentary"),this.setCommentarySize(),this.commentaryManager.visible&&this.commentaryManager.hasCommentary()&&(this.commentaryManager.isFullscreen=this.fullscreen),this.commentaryManager.draw()),this.resizeHandler()},a.prototype.blockAdClick=function(){this.unblockAdClickTimer>=0&&clearTimeout(this.unblockAdClickTimer),jQuery("#"+this.htmlContainerId+" .svpContainer .shawFlashVideo").show();
},a.prototype.unblockAdClick=function(){this.unblockAdClickTimer>=0&&clearTimeout(this.unblockAdClickTimer),jQuery("#"+this.htmlContainerId+" .svpContainer .shawFlashVideo").hide()},a.prototype.fullScreenChangeEvent=function(a){function b(){jQuery(document).bind("touchmove",function(a){a.preventDefault()})}function c(){jQuery(document).unbind("touchmove")}jQuery("#"+this.htmlContainerId+" .svpContainer").toggleClass("fullScreenMode"),this.fullscreen=jQuery("#"+this.htmlContainerId+" .svpContainer").hasClass("fullScreenMode");var d="Html5 Video Event: fullscreen status change - "+this.fullscreen;a?this.logDebug(d+" - "+a.type):this.logDebug(d);jQuery("#"+this.htmlContainerId+" .svpContainer");this.isIPhone?this.isPaused&&(this.adPlaying||(this.fadeIn("#"+this.htmlContainerId+" .svpContainer .videoStatusWindow ",1,300),jQuery("#"+this.htmlContainerId+" .svpContainer .pauseScreen").show(),this.fadeIn("#"+this.htmlContainerId+" .svpContainer .videoStatusWindow .brandTitleBar",1,306),this.fadeIn("#"+this.htmlContainerId+" .svpContainer .videoStatusWindow .pauseScreen",1,305),jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .playPause").removeClass("videoPlaying")),this.commentaryEnabled&&this.commentaryManager&&this.commentaryManager.isReady&&this.commentaryManager.hide()):(this.fullscreen?b():c(),this.drawVideoScreen()),this.fullscreen?jQuery("#"+this.htmlContainerId).trigger("ENTER_FULLSCREEN"):jQuery("#"+this.htmlContainerId).trigger("EXIT_FULLSCREEN"),this.videoCompleted&&this.endOfClipComponent(!0)},a.prototype.toggleFullscreen=function(a){if(this.logDebug("try toggleFullscreen() - "+a+" - this.videoStarted? "+this.videoStarted),!this.disabledFullscreen&&(this.videoStarted||this.adPlaying||this.videoCompleted)){this.logDebug("toggleFullscreen() - "+a),this.unblockAdClick(),this.exitByAdClick=!1;var b=jQuery("#"+this.htmlContainerId+" .svpContainer")[0];if(this.fullscreen){var c=document.exitFullScreen||document.webkitCancelFullScreen||document.mozCancelFullScreen;c?c.call(document):this.fullScreenChangeEvent()}else{this.adPlaying&&this.blockAdClick();var d=b.requestFullScreen||b.webkitRequestFullScreen||b.mozRequestFullScreen;d?(this.fullscreenWidth=window.screen.width,this.fullscreenHeight=window.screen.height,d.call(b)):(this.fullscreenWidth=window.innerWidth,this.fullscreenHeight=window.innerHeight,this.fullScreenChangeEvent())}}},a.prototype.startCheckUserActivity=function(){this.logDebug("START CheckUserActivity");try{jQuery("#"+this.htmlContainerId+" .svpContainer").idleTimer(2500),jQuery(document).bind("idle.idleTimer",jQuery.proxy(this.animateOutControls,this)),jQuery(document).bind("active.idleTimer",jQuery.proxy(this.animateInControls,this))}catch(a){}},a.prototype.stopCheckUserActivity=function(){this.logDebug("STOP CheckUserActivity");try{jQuery("#"+this.htmlContainerId+" .svpContainer").idleTimer("destroy")}catch(a){}},a.prototype.animateInControls=function(a){var b=Math.round(jQuery("#"+this.htmlContainerId+" .controlRack").height()),c=Math.round(this.fullscreenHeight-b),d=jQuery("#"+this.htmlContainerId+" .controlRack");d.stop(),d.clearQueue(),d.css("top",d.offset().top),d.animate({top:c},300)},a.prototype.animateOutControls=function(a){var b=jQuery("#"+this.htmlContainerId+" .controlRack").height(),c=this.fullscreenHeight+2*b,d=jQuery("#"+this.htmlContainerId+" .controlRack");d.stop(),d.clearQueue(),d.css("top",d.offset().top),d.animate({top:c},300)},a.prototype.disableSeekBar=function(){this.logDebug("disable Seek Bar"),jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .seekBar").addClass("btnDisabled"),jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .bufferFill").addClass("btnDisabled"),jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .seekBarFill").addClass("btnDisabled")},a.prototype.enableSeekBar=function(){this.logDebug("enable Seek Bar"),jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .seekBar").removeClass("btnDisabled"),jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .bufferFill").removeClass("btnDisabled"),jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .seekBarFill").removeClass("btnDisabled")},a.prototype.updateTimeDisplay=function(){if(!this.adPlaying){var a=0;a=this.flashPlayer?jQuery("#"+this.htmlContainerId+" .svpContainer .shawFlashVideo")[0].videoCurrentTime():jQuery("#"+this.htmlContainerId+" .svpContainer .htmlVideo")[0].currentTime;var b=i.split("{CUR_TIME}").join(this._secondsToHHMMSS(a));b=this.releaseInfo.isLive?b.split("{DURATION}").join("LIVE"):b.split("{DURATION}").join(this._secondsToHHMMSS(this.releaseInfo.duration)),jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .timeDisplay").html(b);var c=a/this.releaseInfo.duration,d=jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .seekBarFill");jQuery(d).stop(),jQuery(d).clearQueue(),jQuery(d).animate({width:Math.round(100*c)+"%"},200),this.captionManager&&this.captionManager.isReady&&this.isPlaying&&this.captionManager.updateCaption(1e3*a),this.commentaryManager&&this.commentaryManager.isReady&&this.isPlaying&&this.commentaryManager.update(1e3*a),this.trackingManager&&this.trackingManager.step(a)}this.isIE||(document.fullscreenElement&&document.fullscreenElement||!document.mozFullScreenElement&&!document.webkitFullscreenElement&&!jQuery("#"+this.htmlContainerId+" .svpContainer .htmlVideo")[0].webkitDisplayingFullscreen?this.fullscreenDisplay=!1:this.fullscreenDisplay=!0);var e=0;try{if(e=jQuery("#"+this.htmlContainerId+" .svpContainer .htmlVideo")[0].buffered.end(0),e&&e>0){var f=e/this.releaseInfo.duration;jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .bufferFill").animate({width:Math.round(100*f)+"%"},100)}}catch(g){e=0}},a.prototype.html5StreamCheckAndPlay=function(){this.logDebug("html5StreamCheckAndPlay()"),this.releaseInfo.isLive?(this.logDebug("Load SMIL file for live playback with M3U8 stream..."),this.loadSMIL(this.releaseInfo.videoM3U8)):(this.logDebug("Inserting HTML5 player with MP4 url..."),this.loadSMIL(this.releaseInfo.videoMP4))},a.prototype.loadSMIL=function(a){var b=a;-1!=b.indexOf("&metafile=")&&(b=b.substring(0,b.indexOf("&metafile="))),b+="&format=SMIL&callback=?",this.logDebug("Loading SMIL so we can get the stream url...("+b+")"),jQuery.ajaxSetup({cache:"true"}),jQuery.getJSON(b,jQuery.proxy(this.SMILLoaded,this)),jQuery.ajaxSetup({cache:"false"})},a.prototype.SMILLoaded=function(a){this.logDebug("SMIL File loaded, extracting stream url...");var b=jQuery.parseXML(a.metafile),c=/video src="(.*?)"/,d=c.exec(a.metafile),e=d[1]?d[1]:"",f="",g="",h="application/smptett+xml",i="text/srt";jQuery(b).find("textstream").length;if(jQuery(b).find("textstream").length>0){var j=jQuery(b).find("textstream[type='"+h+"']");j.length>0&&(f=jQuery(j).attr("src")),j=jQuery(jQuery(b).find("textstream[type='"+i+"']")),j.length>0&&(g=jQuery(j).attr("src"))}if(-1!=e.toLowerCase().indexOf("unavailable.mp4")){var k=/title="(.*?)"/,l=k.exec(a.metafile),m=l[1]?l[1]:"",n=/abstract="(.*?)"/,o=n.exec(a.metafile),p=o[1]?o[1]:"";this.logDebug("RESTRICTION: "+m+", "+p),this.releaseInfo.errorTitle=m,this.releaseInfo.errorAbstract=p,this.isRestrictedClip=!0}else this.isRestrictedClip=!1,e.length>0&&(this.logDebug("Stream Url: "+e),this.releaseInfo.streamUrl=e),f.length>0&&(this.logDebug("Caption url: "+f),this.releaseInfo.captionUrl=f),g.length>0&&(this.logDebug("Commentary url: "+g),this.releaseInfo.commentaryUrl=g);this.insertHTML5Player()},a.prototype.onAdsLoaded=function(a){this.logDebug("onAdsLoaded()"),this.adsManager?this.logDebug("adsManager already configured..."):(this.logDebug("adsManager not defined, creating and attaching event listeners."),this.adsManager=a.getAdsManager(jQuery("#"+this.htmlContainerId+" .svpContainer .htmlVideo")[0]),this.adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,jQuery.proxy(this.onAdError,this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,jQuery.proxy(this.onPauseRequested,this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,jQuery.proxy(this.onResumeRequested,this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,jQuery.proxy(this.onAdEvent,this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.LOADED,jQuery.proxy(this.onAdEvent,this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.STARTED,jQuery.proxy(this.onAdEvent,this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.COMPLETE,jQuery.proxy(this.onAdEvent,this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.CLICK,jQuery.proxy(this.onAdEvent,this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.PAUSED,jQuery.proxy(this.onAdEvent,this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.RESUMED,jQuery.proxy(this.onAdEvent,this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.SKIPPED,jQuery.proxy(this.onAdEvent,this)),this.adsManager.addEventListener(google.ima.AdEvent.REMAINING_TIME_CHANGED,jQuery.proxy(this.remainingTimeChangedHandler,this))),this.adsLoaded=!0,this.startAds()},a.prototype.remainingTimeChangedHandler=function(a){var b=this.adsManager.remainingTime;this.logDebug("Ad remaining time: "+b)},a.prototype.startAds=function(){if(this.logDebug("attempting to startAds()..."),this.contentInitialized){jQuery("#"+this.htmlContainerId+" .svpContainer").removeClass("loading"),this.logDebug("Content initialized, init ad manager and start ads!");try{this.adsManager.init(640,360,google.ima.ViewMode.NORMAL),this.resizeAdContainer(),this.googleIMAInit=!0,this.adsManager.setVolume(this.videoVolume),this.logDebug("adsManager.start()"),this.adsManager.start()}catch(a){this.logDebug("Error starting ads: "+a)}}else this.logDebug("Content NOT initialized, possible stream playback issue?"),this.retryCounter++,this.retryCounter<10?(this.logDebug("waiting to begin ad play... content not initiliazed... "),setTimeout(jQuery.proxy(this.startAds,this),850)):(this.logDebug("Can't start playback, clearing the set source."),jQuery("#"+this.htmlContainerId+" .svpContainer .htmlVideo")[0].src="",this.fadeIn("#"+this.htmlContainerId+" .svpContainer .videoStatusWindow",1,300),this.releaseInfo.isLive?(this.logDebug("Live stream appears to be offline."),this.displayError("the live stream is not currently online. please check back later.","")):this.isAndroid&&this._isFirefox()?(this.logDebug("Android + Firefox: Some kind of other, generalized media playback error."),this.displayError("your web browser is not currently supported. Please use the native device browser.","")):(this.logDebug("Some kind of other, generalized media playback error."),this.displayError("we've experienced a problem.<br/>please try again later","")))},a.prototype.onAdEvent=function(a){var b,c=(jQuery("#"+this.htmlContainerId+" .svpContainer .svpVideoScreen video"),a.getAd()),d=c.getAdPodInfo(),e=d.getTotalAds(),f=Math.min(e,d.getAdPosition()),g=f+"/"+e;jQuery(".adNotice p span").html(g);var h=jQuery("#"+this.htmlContainerId+" .svpContainer .htmlVideo")[0].currentTime,i=jQuery("#"+this.htmlContainerId+" .svpContainer .htmlVideo")[0];switch(this.currentAdDuration=Math.max(0,c.getDuration()),this.logDebug("onAdEvent() for pod["+d.getPodIndex()+"], ad["+f+"] "+a.type),a.type){case google.ima.AdEvent.Type.LOADED:break;case google.ima.AdEvent.Type.STARTED:c.isLinear()&&(this.isIPhone||i.pause(),jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .seekBar").addClass("btnDisabled"),jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .bufferFill").addClass("btnDisabled"),jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .seekBarFill").addClass("btnDisabled"),jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .timeDisplay").addClass("btnDisabled"),this.trackingManager&&(b=h>0?this.trackingManager.AD_TYPE_MIDROLL:this.trackingManager.AD_TYPE_PREROLL,this.currentAdStartTime=(new Date).getTime()/1e3,this.trackingManager.trackAd(c.getAdId(),this.currentAdDuration,b,0)));break;case google.ima.AdEvent.Type.COMPLETE:c.isLinear()&&(jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .seekBar").toggleClass("btnDisabled"),jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .bufferFill").toggleClass("btnDisabled"),jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .seekBarFill").toggleClass("btnDisabled"),this.trackingManager&&this.trackingManager.trackByState(this.trackingManager.AD_STOPPED,this.currentAdDuration));break;case google.ima.AdEvent.Type.SKIPPED:this.trackingManager&&this.trackingManager.trackByState(this.trackingManager.AD_SKIPPED,this.currentAdDuration);break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:this.logDebug("() AdEvent.Type.ALL_ADS_COMPLETED");break;case google.ima.AdEvent.Type.CLICK:this.isMobile&&this.fullscreen&&(this.stopCheckUserActivity(),this.animateInControls()),this.adIsPaused=!0,this.exitByAdClick=!0;break;case google.ima.AdEvent.Type.PAUSED:this.currentAdPauseTime=(new Date).getTime()/1e3,jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .playPause").removeClass("videoPlaying"),jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .playPause div span").html("Play"),this.adIsPaused=!0,this.trackingManager&&this.trackingManager.trackByState(this.trackingManager.AD_PAUSED,Number(this.currentAdPauseTime-this.currentAdStartTime));break;case google.ima.AdEvent.Type.RESUMED:this.isIPhone&&this.trackingManager&&this.trackingManager.trackByState(this.trackingManager.AD_PLAYING,Number(this.currentAdPauseTime-this.currentAdStartTime))}},a.prototype.onAdError=function(a){this.logDebug("onAdError() "+a.getError()),this.onResumeRequested()},a.prototype.onPauseRequested=function(){if(this.logDebug("onPauseRequested() [started? "+this.videoStarted+"]"),this.adPlaying=!0,this.trackingManager.setContentType(this.trackingManager.AD),this.resizeHandler(),jQuery("#"+this.htmlContainerId+" .svpContainer .adNotice").css("display","block"),this.videoStarted){var a=jQuery("#"+this.htmlContainerId+" .svpContainer .htmlVideo")[0].currentTime;this.trackingManager.trackByState(this.trackingManager.CONTENT_PAUSED_BY_AD,a),jQuery("#"+this.htmlContainerId+" .svpContainer .htmlVideo")[0].pause()}jQuery("#"+this.htmlContainerId+" .svpContainer .adContainer").css("display","block")},a.prototype.onResumeRequested=function(){this.logDebug("onResumeRequested()"),this.adPlaying=!1,this.trackingManager.setContentType(this.trackingManager.CONTENT),jQuery("#"+this.htmlContainerId+" .svpContainer .adNotice").css("display","none"),this.isIPhone&&(this.iphoneSourceSwitch(),this.adPlaying=!1,this.trackingManager&&(this.trackingManager.trackByState(this.trackingManager.CONTENT_START,0),this.logDebug("TrackingManager.CONTENT_START via .onResumeRequested()"))),this.videoStartTime>0&&!this.initialVideoSeekCompleted&&(this.initialVideoSeekCompleted=!0,jQuery("#"+this.htmlContainerId+" .svpContainer .htmlVideo")[0].currentTime=this.videoStartTime),this.logDebug("calling PLAY on html5 video player");var a=jQuery("#"+this.htmlContainerId+" .svpContainer .htmlVideo")[0];a.play(),jQuery("#"+this.htmlContainerId+" .svpContainer .adContainer").css("display","none")},a.prototype.iphoneSourceSwitch=function(){var a=jQuery("#"+this.htmlContainerId+" .svpContainer .svpVideoScreen video"),b=a.attr("data-video-url"),c=a.attr("src");b!==c&&(this.logDebug("Iphone Preoll completed, destroy ad manager"),this.iPhonePreRollComplete=!0,this.adsManager.destroy(),this.logDebug("Switch source back to target video"),a.attr("src",b))},a.prototype.replay=function(a){jQuery("#"+this.htmlContainerId+" .svpContainer").addClass("loading"),this.logDebug("replay"),this.videoCompleted=!1,this.unblockAdClickTimer=-1,jQuery("#"+this.htmlContainerId+" .svpContainer .videoStatusWindow .endOfClipComponent").off("click",jQuery.proxy(this.replay,this)),jQuery("#"+this.htmlContainerId+" .svpContainer .videoStatusWindow .endOfClipComponent .watchAgain").off("click",jQuery.proxy(this.replay,this)),this.trackingManager.reset(!0),this.trackingManager.setup(this.releaseInfo,jQuery("#"+this.htmlContainerId+" .svpContainer .htmlVideo"),this.isIPhone),this.requestAds(a)},a.prototype.watchUpNext=function(){this.logDebug("watchUpNext()"),this.setContentId(this.upNextReleaseInfo.contentId,jQuery.proxy(this.internalWatchNextCallback,this)),this.requestAds()},a.prototype.internalWatchNextCallback=function(){this.logDebug("internalWatchNextCallback()"),this.doInjection(),this.checkPlayList()},a.prototype.requestAds=function(a){if(a&&this.logDebug("requestAds() called by: "+jQuery(a.target).attr("class")+" / "+jQuery(a.target).parent().attr("class")),this.trackingManager?this.trackingManager.reset():(this.trackingManager=new TrackingManager,this.trackingManager.init("16433040",this.comscoreC3,this.comscoreC4)),this.trackingManager.setup(this.releaseInfo,jQuery("#"+this.htmlContainerId+" .svpContainer .htmlVideo"),this.isIPhone),this.isPaused&&this.videoStarted)return void this.playPause();if(!this.adsManager){if(this.isRestrictedClip)return void this.displayError(this.releaseInfo.errorTitle,this.releaseInfo.errorAbstract);if(this.logDebug("requestAds()"),jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .playPause").removeClass("watchAgain "),clearInterval(this.upNextIntervalId),jQuery("#"+this.htmlContainerId+" .svpContainer .htmlVideo").removeClass("iphonePlaceHolderMove"),this.fadeOut("#"+this.htmlContainerId+" .svpContainer .videoStatusWindow .endOfClipComponent",0),!this.adsStarted){this.logDebug("Poster image clicked, start video playback..."),this.fadeOut("#"+this.htmlContainerId+" .svpContainer .onLoadPlayBtn",0),jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .playPause").removeClass("watchAgain "),this.fadeOut("#"+this.htmlContainerId+" .svpContainer .videoStatusWindow img.posterStill",0),this.fadeOut("#"+this.htmlContainerId+" .svpContainer .videoStatusWindow .brandTitleBar",0),this.fadeOut("#"+this.htmlContainerId+" .svpContainer .videoStatusWindow",0),jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .playPause").toggleClass("videoPlaying"),jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .volume").removeClass("btnDisabled"),jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .playPause div span").html("Pause");try{if(this.adFailed=!1,this.adDisplayContainer=new google.ima.AdDisplayContainer(jQuery("#"+this.htmlContainerId+" .svpContainer .adContainer")[0]),this.isIPhone){var b=jQuery("#"+this.htmlContainerId+" .svpContainer .adContainer")[0],c=jQuery("#"+this.htmlContainerId+" .svpContainer .htmlVideo")[0];this.adDisplayContainer=new google.ima.AdDisplayContainer(b,c),this.iPhonePreRollComplete=!1,this.adPlaying=!0}this.adsLoader=new google.ima.AdsLoader(this.adDisplayContainer),this.adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,jQuery.proxy(this.onAdsLoaded,this),!1),this.adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,jQuery.proxy(this.onAdError,this),!1);var d=new Date,e=this.googleIMA3Url.replace(/{referer}/,encodeURIComponent(document.location.href)).replace(/{timestamp}/,d.getTime()).replace(/{cms_id}|{cmsid}/,this.googleCmsId).replace(/{contentid}/,this.releaseInfo.videoId);this.isVideodrome&&(e=e.replace(/{iupath}/,VideoPlayerUtils.getAdIUPath())),this.logDebug("loading ad with url: "+e);var f=new google.ima.AdsRequest;f.adTagUrl=e,f.linearAdSlotWidth=640,f.linearAdSlotHeight=360,f.nonLinearAdSlotWidth=640,f.nonLinearAdSlotHeight=100,this.adsLoader.requestAds(f),(this.isIOS||this.isAndroid)&&this.adDisplayContainer.initialize()}catch(g){this.logDebug("Error setting up ad loader, adBlocker potentially on"),this.logDebug("Ad Error: "+g),this.trackingManager.adBlocked=!0,this.adFailed=!0}this.setHTML5VideoSource();var h=jQuery("#"+this.htmlContainerId+" .svpContainer .htmlVideo")[0];this.logDebug("calling LOAD() on html5 video player with source "+h.src),h.load()}}},a.prototype.setHTML5VideoSource=function(){this.isIPhone||""===this.releaseInfo.captionUrl||(this.captionManager||(this.captionManager=new CaptionManager),jQuery(this.captionManager).on("loadComplete",jQuery.proxy(this.captionLoaded,this)),this.captionManager.captionContainer=jQuery(".captionContainer"),this.captionManager.load(this.releaseInfo.captionUrl),jQuery(".closeCaption").css("display","block"),this._readCookie("svpVideoCC")&&"On"==this._readCookie("svpVideoCC")&&(jQuery(".closeCaption").addClass("On"),this.captionManager.show(),this.captionEnabled=!0)),this.releaseInfo.isLive?(this.logDebug("Live stream, check stream type and platform."),-1!=this.releaseInfo.streamUrl.indexOf(".f4m")&&!this.flashPlayer||-1!=this.releaseInfo.streamUrl.indexOf(".m3u8")&&!this.isMobile?(this.logDebug("This is a f4m on a non-flash device, or an m3u8 on a non-mobile, unsupported playback scenario"),this.fadeIn("#"+this.htmlContainerId+" .svpContainer .videoStatusWindow",1,300),this.displayError("This video is only available in a format that is not supported by your device.","")):(this.logDebug("LIVE Stream, setting video tag source to: "+this.releaseInfo.streamUrl),jQuery("#"+this.htmlContainerId+" .svpContainer .htmlVideo")[0].src=this.releaseInfo.streamUrl)):(this.logDebug("VOD Stream, setting video tag source to: "+this.releaseInfo.streamUrl),this.logDebug("this.releaseInfo.captionUrl: "+this.releaseInfo.captionUrl),this.isIOS||(""!==this.releaseInfo.captionUrl&&(this.logDebug("Set up Caption Manager: "+this.releaseInfo.captionUrl),this.captionManager=new CaptionManager,jQuery(this.captionManager).on("loadComplete",jQuery.proxy(this.captionLoaded,this)),this.captionManager.captionContainer=jQuery(".captionContainer"),this.captionManager.load(this.releaseInfo.captionUrl)),""!==this.releaseInfo.commentaryUrl&&(this.logDebug("Set up Commentary Manager: "+this.releaseInfo.commentaryUrl),this.commentaryManager||(this.commentaryManager=new CommentaryManager,this.commentaryManager.isFullscreen=jQuery("#"+this.htmlContainerId+" .svpContainer").hasClass("fullScreenMode"),this.commentaryManager.resizeOnFullscreen=!(this.isAndroid||this.isMobile),this.commentaryManager.commentaryContainer=jQuery(".commentaryContainer"),jQuery(this.commentaryManager).on("loadComplete",jQuery.proxy(this.commentaryLoaded,this)),this.commentaryManager.load(this.releaseInfo.commentaryUrl)),jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .annotation").show())),jQuery("#"+this.htmlContainerId+" .svpContainer .htmlVideo")[0].src=this.releaseInfo.streamUrl)},a.prototype.commentaryLoaded=function(){this.setCommentarySize(),this.commentaryEnabled&&(this._readCookie("svpVideoAnnotation")?"On"==this._readCookie("svpVideoAnnotation")&&(this.commentaryManager.show(),jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .annotation").addClass("on")):(this.commentaryManager.show(),jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .annotation").toggleClass("on")))},a.prototype.captionLoaded=function(){this.setCaptionSize(),this.captionEnabled&&this.captionManager.show()},a.prototype.videoSeek=function(a){var b;if(this.logDebug("video seek "+a),b=this.isIOS&&a&&a.originalEvent&&a.originalEvent.changedTouches&&a.originalEvent.changedTouches.length>0?a.originalEvent.changedTouches.item(0).clientX:a.clientX,this.logDebug("videoSeek ? "+a.type+" clientX: "+b),!this.adPlaying){var c=b-jQuery("#"+this.htmlContainerId+" .svpContainer").offset().left;this.logDebug("video seek mouse click "+c);var d=jQuery("#"+this.htmlContainerId+" .svpContainer .htmlVideo")[0],e=jQuery("#"+this.htmlContainerId+" .svpContainer").width(),f=c/e,g=Math.round(this.releaseInfo.duration*f),h=/Edge\/12\..+/i,i=h.test(window.navigator.userAgent);if(i&&0===d.seekable.length||g<d.seekable.end(0)){var j=jQuery("#"+this.htmlContainerId+" .svpContainer .htmlVideo")[0].currentTime;this.trackingManager&&this.trackingManager.trackByState(this.trackingManager.SEEK_START,j),this.logDebug("seek should be allowed, attempting..."),d.currentTime=g,this.captionManager&&this.captionManager.isReady&&this.captionManager.seekCaption(1e3*g),this.commentaryManager&&this.commentaryManager.isReady&&this.commentaryManager.seek(1e3*g),this.isPaused&&(jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .playPause").toggleClass("videoPlaying"),this.togglePauseScreen())}}},a.prototype.canPlayEvent=function(){this.logDebug("Html5 Video Event: canplay"),jQuery("#"+this.htmlContainerId+" .svpContainer .htmlVideo").show(),this.isPaused&&this.videoStarted&&(jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .playPause").toggleClass("videoPlaying"),jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .playPause").attr("title","Pause Playback"),this.togglePauseScreen())},a.prototype.canPlayThroughEvent=function(){this.logDebug("Html5 Video Event: canplaythrough")},a.prototype.animateVideoVolume=function(a,b){var c=100*b;0===c&&jQuery("#"+a+" .svpContainer .controlRack .mute").addClass("muted"),c>88?(jQuery("#"+a+" .svpContainer .controlRack .volumeSliderContainer .volumeHandle").css("left","88%"),jQuery("#"+a+" .svpContainer .controlRack .volumeSliderContainer .volumeBarFill").css("width","100%")):(jQuery("#"+a+" .svpContainer .controlRack .volumeSliderContainer .volumeHandle").css("left",c+"%"),jQuery("#"+a+" .svpContainer .controlRack .volumeSliderContainer .volumeBarFill").css("width",c+"%"))},a.prototype.volumeInteractionHandler=function(){jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .volumeSliderContainer .volumeHandle").on("mousedown",jQuery.proxy(this.videoVolumeDrag,this)),jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .volumeSliderContainer .volumeHandle").on("mouseup",jQuery.proxy(this.videoVolumeDragStop,this)),jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .volumeSliderContainer .volumeBar").on("click",jQuery.proxy(this.videoVolumeClick,this)),jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .volumeSliderContainer .volumeBarFill").on("click",jQuery.proxy(this.videoVolumeClick,this))},a.prototype.videoVolumeDragStop=function(){jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .volumeSliderContainer").off()},a.prototype.videoVolumeDrag=function(a){jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .volumeSliderContainer").on("mousemove",jQuery.proxy(this.videoVolumeSlider,this))},a.prototype.videoVolumeClick=function(a){jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .volumeSliderContainer").on("click",jQuery.proxy(this.videoVolumeSlider,this))},a.prototype.videoVolumeSlider=function(a){if(this.videoStarted||this.adPlaying){var b=jQuery("#"+this.htmlContainerId+" .svpContainer .htmlVideo")[0];jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .mute").removeClass("muted"),jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .volumeControl").removeClass("muted"),this._createCookie("svpVideoMuted","false",31),b.muted&&(jQuery(b).prop("muted",!1),this._createCookie("svpVideoMuted","false",31));var c=Math.ceil(a.clientX-jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .volumeSliderContainer").offset().left),d=jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .volumeSliderContainer").width(),e=(c/d).toFixed(2),f=jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .volumeSliderContainer .volumeHandle").width(),g=c-f/2;jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .volumeSliderContainer .volumeHandle").css("left",g),jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .volumeSliderContainer .volumeBarFill").css("width",100*e+"%"),e>1&&(e=1),b.volume=e,this.adPlaying&&this.adsManager.setVolume(e),f/2>c&&(jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .volumeSliderContainer .volumeHandle").css("left",0),this.videoMute(),jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .volumeSliderContainer .volumeHandle").trigger("mouseup"),this._createCookie("svpVideoVolume",b.volume,7)),c>d&&(jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .volumeSliderContainer .volumeHandle").css("left",d-f),b.volume=1,this.adPlaying&&this.adsManager.setVolume(1),this._createCookie("svpVideoVolume",b.volume,7),jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .volumeSliderContainer .volumeHandle").trigger("mouseup")),this._createCookie("svpVideoVolume",b.volume,7)}},a.prototype.videoMute=function(){var b=jQuery("#"+this.htmlContainerId+" .svpContainer .htmlVideo")[0];if(this.videoStarted||this.adPlaying)if(b.volume>0&&!jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .mute").hasClass("muted"))this.adsManager&&this.adsManager.setVolume(0),b.volume=0,jQuery(b).prop("muted",!0),this._createCookie("svpVideoMuted","true",31),jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .mute").addClass("muted"),jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .volumeControl").addClass("muted"),jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .mute div span").html("Unmute");else{if(this._readCookie("svpVideoVolume")&&this._readCookie("svpVideoVolume")>0){var c=this._readCookie("svpVideoVolume");this.adsManager&&this.adsManager.setVolume(c),b.volume=c,a.prototype.animateVideoVolume(this.htmlContainerId,c)}else this.adsManager.setVolume(1),b.volume=1,a.prototype.animateVideoVolume(this.htmlContainerId,1);jQuery(b).prop("muted",!1),jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .mute").removeClass("muted"),jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .volumeControl").removeClass("muted"),jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .mute div span").html("Mute"),this._createCookie("svpVideoMuted","false",7)}},a.prototype.playPause=function(a){this.logDebug("playPause(), this.adPlaying? "+this.adPlaying+", this.adIsPaused? "+this.adIsPaused);var b=(jQuery("#"+this.htmlContainerId+" .svpContainer .htmlVideo")[0].currentTime,jQuery("#"+this.htmlContainerId+" .svpContainer .htmlVideo")[0]);1==jQuery("#"+this.htmlContainerId+" .svpContainer .videoStatusWindow .posterStill").css("opacity")?(jQuery("#"+this.htmlContainerId+" .svpContainer .videoStatusWindow .endOfClipComponent").css("opacity")>0?this.replay():jQuery("#"+this.htmlContainerId+" .svpContainer .videoStatusWindow .pauseScreen").click(),this.fadeOut("#"+this.htmlContainerId+" .svpContainer .videoStatusWindow",0),this.fadeOut("#"+this.htmlContainerId+" .svpContainer .videoStatusWindow .endOfClipComponent",0),jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .playPause").addClass("videoPlaying"),jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .playPause").attr("title","Pause playback"),jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .mute").removeClass("btnDisabled")):(1==jQuery("#"+this.htmlContainerId+" .svpContainer .videoStatusWindow .endOfClipComponent").css("opacity")&&this.fadeOut("#"+this.htmlContainerId+" .svpContainer .videoStatusWindow .endOfClipComponent",0),this.adPlaying?(this.adIsPaused?(this.logDebug("this.adsManager.resume()"),this.adsManager.resume(),this.adIsPaused=!1,jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .playPause").attr("title","Pause Playback"),this.isMobile&&this.fullscreen&&this.exitByAdClick&&(this.startCheckUserActivity(),this.exitByAdClick=!1),this.trackingManager.trackByState(this.trackingManager.AD_PLAYING,Number(this.currentAdPauseTime-this.currentAdStartTime))):(this.logDebug("this.adsManager.pause()"),this.adsManager.pause(),this.adIsPaused=!0,jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .playPause").attr("title","Resume PlayBack")),jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .playPause").toggleClass("videoPlaying")):this.isPlaying?(jQuery("#"+this.htmlContainerId+" .svpContainer").toggleClass("videoPaused"),this.logDebug("calling PAUSE on html5 video player"),b.pause(),jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .playPause").toggleClass("videoPlaying"),
jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .playPause").attr("title","Resume Playback"),this.togglePauseScreen()):(jQuery("#"+this.htmlContainerId+" .svpContainer").toggleClass("videoPaused"),this.logDebug("calling PLAY on html5 video player"),b.play(),jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .playPause").toggleClass("videoPlaying"),jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .playPause").attr("title","Pause Playback"),this.togglePauseScreen()))},a.prototype.toggleCloseCaption=function(){jQuery(".closeCaption").hasClass("btnDisabled")||(this.captionEnabled=!this.captionEnabled,this.captionEnabled?(jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .closeCaption").addClass("On"),this.captionManager.show(),this.captionEnabled=!0,this._createCookie("svpVideoCC","On",31)):(jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .closeCaption").removeClass("On"),this.captionManager.hide(),this._createCookie("svpVideoCC","Off",31)))},a.prototype.toggleCommentary=function(){this.commentaryEnabled=!this.commentaryEnabled,"block"==jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack #annotationToolTip").css("display")&&jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack #annotationToolTip").clearQueue().delay("1000").fadeOut("slow"),this.commentaryManager&&(this.commentaryEnabled?(jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .annotation").toggleClass("On"),this._createCookie("svpVideoAnnotation","Off",30),this.commentaryManager.hide()):(jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .annotation").toggleClass("On"),this.commentaryManager.show(),this._createCookie("svpVideoAnnotation","On",30)))},a.prototype.displayError=function(a,b){this.logDebug("DisplayError: "+a+" - "+b);var c=d.split("{ErrorTitle}").join(a).split("{ErrorDesc}").join(b);return jQuery("#"+this.htmlContainerId+" .svpContainer").length?(jQuery("#"+this.htmlContainerId+" .videoStatusWindow").append(c),jQuery("#"+this.htmlContainerId+" .svpContainer").removeClass("loading"),this.fadeOut("#"+this.htmlContainerId+" .svpContainer .videoStatusWindow .onLoadPlayBtn",0),void this.logDebug("DisplayError: "+a+" - "+b)):(this.logDebug("nothing to inject into!"),void jQuery("#"+this.htmlContainerId).append("<div class='svpContainer'><div class='svpVideoScreen basicErrorMessage'>"+c+"</div></div>"))},a.prototype.togglePauseScreen=function(){this.isPaused&&(jQuery("#"+this.htmlContainerId+" .svpContainer .pauseScreen").hide(),this.fadeOut("#"+this.htmlContainerId+" .svpContainer .videoStatusWindow .brandTitleBar",0),this.fadeOut("#"+this.htmlContainerId+" .svpContainer .videoStatusWindow",0),this.commentaryEnabled&&this.commentaryManager&&this.commentaryManager.isReady&&this.commentaryManager.show()),this.isPlaying&&!this.adPlaying&&(this.fadeIn("#"+this.htmlContainerId+" .svpContainer .videoStatusWindow ",1,300),jQuery("#"+this.htmlContainerId+" .svpContainer .pauseScreen").show(),this.fadeIn("#"+this.htmlContainerId+" .svpContainer .videoStatusWindow .brandTitleBar",1,306),this.fadeIn("#"+this.htmlContainerId+" .svpContainer .videoStatusWindow .pauseScreen",1,305),this.commentaryEnabled&&this.commentaryManager&&this.commentaryManager.isReady&&this.commentaryManager.hide())},a.prototype.endOfClipComponent=function(a){0===this.upNextCountdown&&this.watchUpNext(),this.upNextCountdown>1&&this.upNextClipSet?(jQuery("#"+this.htmlContainerId+" .svpContainer .videoStatusWindow .endOfClipComponent .upNextCountdownTimer").html(this.upNextCountdown),jQuery("#"+this.htmlContainerId+" .svpContainer .videoStatusWindow .endOfClipComponent .upNextCountdown").show(),this.upNextIntervalId=setInterval(jQuery.proxy(this.upNextTimerTick,this),1e3)):jQuery("#"+this.htmlContainerId+" .svpContainer .videoStatusWindow .endOfClipComponent .upNextCountdown").hide(),this.logDebug("endOfClipComponent");var b=Math.round(100*jQuery("#"+this.htmlContainerId+" .svpContainer .htmlVideo")[0].currentTime)/100,c=Math.round(100*this.releaseInfo.duration)/100;(a||Math.abs(b-c)<.5)&&(jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .playPause").removeClass("videoPlaying"),this.upNextClipSet?(this.logDebug("Up Next Clip has been set, show dual EoCC"),this.fadeIn("#"+this.htmlContainerId+" .svpContainer .videoStatusWindow .endOfClipComponent",1,310),this.fadeIn("#"+this.htmlContainerId+" .svpContainer .videoStatusWindow .posterStill",1,300),this.fadeIn("#"+this.htmlContainerId+" .endOfClipComponent .nextUp .nextUpThumb .largePlayBtn",1,300),this.fadeIn("#"+this.htmlContainerId+" .endOfClipComponent .justWatched .justWatchedThumb .largePlayBtn",1,300),jQuery("#"+this.htmlContainerId+" .svpContainer .videoStatusWindow .endOfClipComponent .upNextCountdownTimer").html(this.upNextCountdown),jQuery("#"+this.htmlContainerId+" .svpContainer .videoStatusWindow .endOfClipComponent .watchAgain").on("click",jQuery.proxy(this.replay,this)),jQuery("#"+this.htmlContainerId+" .svpContainer .videoStatusWindow .cancelEocAutoplay").on("click",jQuery.proxy(this.cancelEocAutoplay,this))):(this.logDebug("Only showing replay EoCC"),jQuery("#"+this.htmlContainerId+" .svpContainer .videoStatusWindow .endOfClipComponent").on("click",jQuery.proxy(this.replay,this)),jQuery("#"+this.htmlContainerId+" .svpContainer .videoStatusWindow .endOfClipComponent").addClass("replayClip"),jQuery("#"+this.htmlContainerId+" .svpContainer .videoStatusWindow .endOfClipComponent").css("opacity","0.9!important"),jQuery("#"+this.htmlContainerId+" .svpContainer .videoStatusWindow .posterStill").css("opacity",1),this.fadeIn("#"+this.htmlContainerId+" .svpContainer .videoStatusWindow .endOfClipComponent",.9,310)),jQuery("#"+this.htmlContainerId+" .svpContainer .controlRack .playPause").addClass("watchAgain"),this.fadeIn("#"+this.htmlContainerId+" .svpContainer .videoStatusWindow",1,300),jQuery("#"+this.htmlContainerId+" .svpContainer .htmlVideo").addClass("iphonePlaceHolderMove"),jQuery("#"+this.htmlContainerId+" .svpContainer .videoStatusWindow .endOfClipComponent .justWatched h4").html(""+this.releaseInfo.show),jQuery("#"+this.htmlContainerId+" .svpContainer .videoStatusWindow .endOfClipComponent .justWatched p").html(""+this.releaseInfo.title),jQuery("#"+this.htmlContainerId+" .svpContainer .videoStatusWindow .endOfClipComponent .nextUp h4").html(""+this.upNextReleaseInfo.show),jQuery("#"+this.htmlContainerId+" .svpContainer .videoStatusWindow .endOfClipComponent .nextUp p").html(""+this.upNextReleaseInfo.title),jQuery("#"+this.htmlContainerId+" .svpContainer .videoStatusWindow .endOfClipComponent .nextUp img.nextUpThumbImg").attr("src",this.upNextReleaseInfo.thumbnailURL),this.videoCompleted=!1)},a.prototype.fadeOut=function(a,b){jQuery(""+a).css("opacity",0),jQuery(""+a).css("z-index",b)},a.prototype.fadeIn=function(a,b,c){jQuery(""+a).css("opacity",b),jQuery(""+a).css("z-index",c)},a.prototype.adOrVideoPlaying=function(){return this.isPlaying||this.adPlaying&&!this.adIsPaused},a.prototype.logDebug=function(a){a=" -- "+this.label+" -- "+a;var b=new Date,c=document.getElementById("debugoutput");if(c&&this.debugging)jQuery("#debugoutput").prepend("<p>["+this._iSODateString(b)+"] "+a+"</p>");else try{console.log("["+this._iSODateString(b)+"] "+a)}catch(d){}},a.prototype.notify=function(a,b){this[a]=b,jQuery(this).trigger("PLAYER_STATUS_CHANGE");var c=this[a];if(this.debugging)for(var d in this[a])c+=" | "+d+"="+this[a][d];this.logDebug("Notified by Flash: "+a+": "+c)},a.prototype._timestampToSeconds=function(a){var b=0,c=a.split(":");return 3==c.length?(b+=3600*Number(c[0]),b+=60*Number(c[1]),b+=Number(c[2])):(b+=60*Number(c[0]),b+=Number(c[1])),b},a.prototype._secondsToHHMMSS=function(a){a=Number(a);var b=Math.floor(a/3600),c=Math.floor(a%3600/60),d=Math.floor(a%3600%60);return(b>0?b+":":"")+(c>0?(b>0&&10>c?"0":"")+c+":":"0:")+(10>d?"0":"")+d},a.prototype._iSODateString=function(a){function b(a){return 10>a?"0"+a:a}return a.getUTCFullYear()+"-"+b(a.getUTCMonth()+1)+"-"+b(a.getUTCDate())+"T"+b(a.getUTCHours())+":"+b(a.getUTCMinutes())+":"+b(a.getUTCSeconds())+"Z"},a.prototype._is_ie=function(){return"Microsoft Internet Explorer"==navigator.appName?!0:!1},a.prototype._isFirefox=function(){return navigator.userAgent.toLowerCase().indexOf("firefox")>=0},a.prototype._is_touch_device=function(){var a="ontouchstart"in window||"onmsgesturechange"in window;return a&&this._is_ie()?-1!=navigator.userAgent.toLowerCase().indexOf("touch")?!0:!1:a},a.prototype._createCookie=function(a,b,c){var d;if(c){var e=new Date;e.setTime(e.getTime()+24*c*60*60*1e3),d="; expires="+e.toGMTString()}else d="";document.cookie=a+"="+b+d+"; path=/"},a.prototype._readCookie=function(a){for(var b=a+"=",c=document.cookie.split(";"),d=0;d<c.length;d++){for(var e=c[d];" "==e.charAt(0);)e=e.substring(1,e.length);if(0===e.indexOf(b))return e.substring(b.length,e.length)}return null},a.prototype._eraseCookie=function(a){createCookie(a,"",-1)};var b='<div class="svpContainer loading"><div class="shawFlashVideo" id="{HTML_ID}"></div><div class="svpVideoScreen"></div></div>',c='<div class="adContainer">&nbsp;</div>',d='<div class="errorMessage"><p>We&rsquo;re sorry,</p><p>{ErrorTitle}</p><p>{ErrorDesc}</p></div>',e='<div class="captionContainer"></div>',f='<div class="commentaryContainer"></div>',g=f+e+'<video type="video/webm"  class="htmlVideo" webkit-playsinline>';g+="      <p>Unfortunately your browser does not meet our minimum requirements for video playback.</p>",g+="      <p>We recommend an HTML5 compliant browser such as Google Chrome or Mozilla Firefox.</p>",g+="      <p>Alternatively any browser supporting Adobe Flash Player is supported.</p>",g+="</video>";var h='<div class="controlRack">';h+='   <div class="seekBar btnDisabled"></div><div class="bufferFill"></div><div class="seekBarFill"></div>',h+='   <div class="chapterMarkers"></div>',h+='   <div class="controls playPause" title="Begin Playback"><div><span>Play</span></div></div>',h+='   <div class=" btnDisabled timeDisplay"></div>',h+='   <div class="controRackSubControls">',h+='   <div class="controls share" title="share"><div><span>Social Media</span></div></div>',h+='   <div class="controls annotation btnDisabled" title="Annotations"><div><span>Annotations</span></div></div>',h+='   <div class="controls closeCaption btnDisabled" title="Close Captions"><div><span>Close Captions</span></div></div>',h+='   <div class="controls mute btnDisabled volume" title="Mute"><div><span>Mute</span></div></div>',h+='   <div class="volume btnDisabled volumeControl"><div class="volumeSliderContainer" title="volume"><span class="volumeHandle"></span><div class="volumeBar"></div><div class="volumeBarFill"></div></div></div>',h+='   <div class="controls btnDisabled fullscreen" title="Toggle fullscreen mode"><div><span>Full Screen</span></div></div>',h+="   </div>",h+='   <div id="annotationToolTip"><span>All NEW Annotation Feature! Click on this button to turn annotation on/off.</span></div>',h+="</div>",h+='<div class="adNotice"><p>Advertisement <span style="color:#999999;"></span></p></div>';var i='<span class="currentTime">{CUR_TIME}</span> / <span class="duration">{DURATION}</span>',j='<div class="marker" style="left:{POS};">&#9650;</div>',k='<div class="endOfClipComponent opacityTransition">';k+='<div class="justWatched">',k+='<h3 class="justWatchedLabel">Just Watched</h3>',k+='<div class="justWatchedThumb">',k+='<span class="largePlayBtn opacityTransition justWatchedPlayBtn"> <img alt="play" src=""/></span>',k+='<a href="#">',k+='<img class="justWatchedImg" src="{IMG_URL}" />',k+="</a>",k+="</div>",k+='<h4 class="justWatchedShowTitle">SHOW</h4>',k+='<p class="justWatchedClipTitle">EPISODE TITLE</p>',k+='<a class="watchAgain">Watch Again!</a>',k+='<a class="share">Share</a>',k+="</div>",k+='<div class="nextUp">',k+='<h3 class="nextUpClipTitle">Next video<span class="upNextCountdown"> plays in <span class="upNextCountdownTimer">10</span> <span class="upNextUnits">seconds</span><span class="cancelEocAutoplay">x</span></span></h3>',k+='<div class="nextUpThumb">',k+='<span class="largePlayBtn nextUpPlayBtn"> <img alt="play" src=""/> <strong>Play&nbsp;</strong> </span>',k+='<a href="#">',k+='<img class="nextUpThumbImg" src="" />',k+="</a>",k+="</div>",k+='<h4 class="upNextLabel">UP NEXT SHOW</h4>',k+='<p class="upNextClipDesc">UP NEXT EPISODE</p>',k+='<a class="watchNow">Watch Now!</a>',k+="</div>",k+='<div class="replayClipScreen">',k+='<h3 class="watchAgain">Watch Again</h3>',k+="</div>",k+="</div>";var l='<div class="videoStatusWindow opacityTransition">';l+='<div class="brandTitleBar opacityTransition"><div class="brand">&nbsp;<div></div></div><div class="videoTitle"><p></p></div></div>',l+='<div class="opacityTransition pauseScreen"></div>',l+=k,l+='  <span class="onLoadPlayBtn largePlayBtn"> <img alt="play" src=""/> <strong>Play&nbsp;</strong> </span>',l+='  <img class="posterStill opacityTransition" src="{IMG_URL}" />',l+="</div>",window.ShawVideoPlayer=a}(),/*!
 * jQuery idleTimer plugin
 * version 0.9.100511
 * by Paul Irish.
 *   http://github.com/paulirish/yui-misc/tree/
 * MIT license

 * adapted from YUI idle timer by nzakas:
 *   http://github.com/nzakas/yui-misc/
*/
function(a){jQuery.idleTimer=function(a,b,c){c=jQuery.extend({startImmediately:!0,idle:!1,enabled:!0,timeout:3e4,events:"mousemove keydown DOMMouseScroll mousewheel mousedown touchstart touchmove"},c),b=b||document;var d=function(a){"number"==typeof a&&(a=void 0);var e=jQuery.data(a||b,"idleTimerObj");e.idle=!e.idle;var f=+new Date-e.olddate;if(e.olddate=+new Date,e.idle&&f<c.timeout)return e.idle=!1,clearTimeout(jQuery.idleTimer.tId),void(c.enabled&&(jQuery.idleTimer.tId=setTimeout(d,c.timeout)));var g=jQuery.Event(jQuery.data(b,"idleTimer",e.idle?"idle":"active")+".idleTimer");jQuery(b).trigger(g)},e=function(a){var b=jQuery.data(a,"idleTimerObj")||{};b.enabled=!1,clearTimeout(b.tId),jQuery(a).off(".idleTimer")},f=function(){var a=jQuery.data(this,"idleTimerObj");clearTimeout(a.tId),a.enabled&&(a.idle&&d(this),a.tId=setTimeout(d,a.timeout))},g=jQuery.data(b,"idleTimerObj")||{};if(g.olddate=g.olddate||+new Date,"number"==typeof a)c.timeout=a;else{if("destroy"===a)return e(b),this;if("getElapsedTime"===a)return+new Date-g.olddate}jQuery(b).on(jQuery.trim((c.events+" ").split(" ").join(".idleTimer ")),f),g.idle=c.idle,g.enabled=c.enabled,g.timeout=c.timeout,c.startImmediately&&(g.tId=setTimeout(d,g.timeout)),jQuery.data(b,"idleTimer","active"),jQuery.data(b,"idleTimerObj",g)},jQuery.fn.idleTimer=function(a,b){return b||(b={}),this[0]&&jQuery.idleTimer(a,this[0],b),this}}(jQuery),/*!
 * html5video_omniture15video.js
 */
function(){"use strict";function a(a){this.duration=-1,this.lapseMilestone=0,this.isLive=!1,this.chapters=[],this.trackingTitle="",this.omnitureJSAvailable=!1,this.playerName="Shaw HTML5 Player",this.videoTitle="Placeholder Video Title",this.enabled=!0,this.isIPhone=!1,this.videoElement=a,this.trackStart=!1,this.trackComplete=!1,this.trackBreaks=[],s&&s.Media?(this.omnitureJSAvailable=!0,this.init()):s?console.warn("omniture loaded, but no media module"):console.warn("no omniture javascript loaded!")}a.prototype.init=function(){this.videoElement.on("play",jQuery.proxy(this.handleEvent,this)),this.videoElement.on("seeked",jQuery.proxy(this.handleEvent,this)),this.videoElement.on("seeking",jQuery.proxy(this.handleEvent,this)),this.videoElement.on("pause",jQuery.proxy(this.handleEvent,this)),this.videoElement.on("ended",jQuery.proxy(this.handleEvent,this)),s.Media.autoTrack=!1,s.Media.trackWhilePlaying=!0,s.Media.trackVars="eVar5,eVar30,eVar31,eVar32,eVar36,events,prop50",s.Media.trackEvents="event51,event52,event53,event54,event55,event56,event57,event58,event60",s.Media.trackMilestones="25,50,75,95",s.Media.segmentByMilestones=!1,s.Media.trackUsingContextData=!0,s.Media.contextDataMapping={"a.media.name":"eVar30,prop50","a.media.segment":"eVar32","a.contentType":"eVar31","a.media.timePlayed":"event51"},s.eVar36="HTML5",s.Media.monitor=jQuery.proxy(function(a,b){if(this.videoElement&&this.trackBreaks){var c;c=this.videoElement[0].currentTime>0?Math.floor(this.videoElement[0].currentTime):0;for(var d=0;d<this.trackBreaks.length;d++)c>=this.trackBreaks[d].startTime&&c<=this.trackBreaks[d].endTime&&!this.trackBreaks[d].tracked&&(this.trackBreaks[d].tracked=!0,a.linkTrackVars="eVar30,prop50,events",a.linkTrackEvents="event61",a.eVar30=this.videoTitle,a.prop50=this.videoTitle,a.events="event61",a.trackLink(this,"o","Video Segment Begin"))}if("OPEN"==b.event&&(a.events="event60",a.Media.track(this.videoTitle)),"MILESTONE"==b.event&&(25==b.milestone&&(a.events="event55",a.Media.track(this.videoTitle)),50==b.milestone&&(a.events="event56",a.Media.track(this.videoTitle)),75==b.milestone&&(a.events="event57",a.Media.track(this.videoTitle)),95==b.milestone&&(a.events="event58",a.Media.track(this.videoTitle))),this.isIPhone&&"MONITOR"==b.event){var e=this.videoElement[0].currentTime/this.videoElement[0].duration*100;0===this.lapseMilestone&&e>=25?(this.lapseMilestone=25,a.events="event55",a.Media.track(this.videoTitle)):25==this.lapseMilestone&&e>=50?(this.lapseMilestone=50,a.events="event56",a.Media.track(this.videoTitle)):50==this.lapseMilestone&&e>=75?(this.lapseMilestone=75,a.events="event57",a.Media.track(this.videoTitle)):75==this.lapseMilestone&&e>=95&&(this.lapseMilestone=95,a.events="event58",a.Media.track(this.videoTitle))}"CLOSE"==b.event&&(a.events="event53",a.Media.track(this.videoTitle))},this)},a.prototype.shutdown=function(){this.videoElement.off("play",jQuery.proxy(this.handleEvent,this)),this.videoElement.off("seeked",jQuery.proxy(this.handleEvent,this)),this.videoElement.off("seeking",jQuery.proxy(this.handleEvent,this)),this.videoElement.off("pause",jQuery.proxy(this.handleEvent,this)),this.videoElement.off("ended",jQuery.proxy(this.handleEvent,this)),this.videoElement=null},a.prototype.handleEvent=function(a){if(this.enabled){var b,c=this.videoElement[0].duration;switch(b=this.videoElement[0].currentTime>0?Math.floor(this.videoElement[0].currentTime):0,a.type){case"play":0!==b||this.trackStart?s.Media.play(this.videoTitle,b):(this.trackStart=!0,s.Media.open(this.videoTitle,c,this.playerName),s.Media.play(this.videoTitle,b),s.linkTrackVars="eVar30,prop50,events",s.linkTrackEvents="event61",s.eVar30=this.videoTitle,s.prop50=this.videoTitle,s.events="event61",s.trackLink(this,"o","Video Segment Begin"));break;case"seeked":s.Media.play(this.videoTitle,b);break;case"seeking":s.Media.stop(this.videoTitle,b);break;case"pause":s.Media.stop(this.videoTitle,b);break;case"ended":this.trackComplete=!0,s.Media.stop(this.videoTitle,b),s.Media.close(this.videoTitle)}}},a.prototype.reset=function(){if(this.trackStart=!1,this.trackComplete=!1,this.trackBreaks)for(var a=0;a<this.trackBreaks.length;a++)this.trackBreaks[a].tracked=!1},window.Omniture15Tracker=a}();var ns_=ns_||{};ns_.StreamSense=ns_.StreamSense||function(){function a(a,b){var d=a||"",e="undefined",f=k.comScore||k.sitestat||function(a){var b,d,f,g,h,j="comScore=",m=l.cookie,n="",o="indexOf",p="substring",r="length",s=c.browserAcceptsLargeURLs()?q.URL_LENGTH_LIMIT:q.RESTRICTED_URL_LENGTH_LIMIT,t="&ns_",u="&",v=k.encodeURIComponent||escape;if(m[o](j)+1)for(g=0,f=m.split(";"),h=f[r];h>g;g++)d=f[g][o](j),d+1&&(n=u+unescape(f[g][p](d+j[r])));a+=t+"_t="+ +new Date+t+"c="+(l.characterSet||l.defaultCharset||"")+n,a.length>s&&a.indexOf(u)>0&&(b=a.substr(0,s-8).lastIndexOf(u),a=(a.substring(0,b)+t+"cut="+v(a.substring(b+1))).substr(0,s)),i.httpGet(a),typeof ns_p===e&&(ns_p={src:a}),ns_p.lastMeasurement=a};if(typeof b!==e){var g=[],h=k.encodeURIComponent||escape;for(var j in b)b.hasOwnProperty(j)&&g.push(h(j)+"="+h(b[j]));/[\?\&]$/.test(d)||(d+="&"),d+=g.join("&")}return f(d)}function b(a,b){for(var d,e=k.encodeURIComponent||escape,f=[],g=q.LABELS_ORDER,h=a.split("?"),i=h[0],j=h[1],m=j.split("&"),n=0,o=m.length;o>n;n++){var p=m[n].split("="),r=unescape(p[0]),s=unescape(p[1]);r&&(b[r]=s)}for(var t={},n=0,o=g.length;o>n;n++){var u=g[n];if(b.hasOwnProperty(u)){var v=b[u];"undefined"!=typeof v&&null!=v&&(t[u]=!0,f.push(e(u)+"="+e(b[u])))}}for(var u in b)if(!t[u]&&b.hasOwnProperty(u)){var v=b[u];"undefined"!=typeof v&&null!=v&&f.push(e(u)+"="+e(b[u]))}d=i+"?"+f.join("&"),d=d+(d.indexOf("&c8=")<0?"&c8="+e(l.title):"")+(d.indexOf("&c7=")<0?"&c7="+e(l.URL):"")+(d.indexOf("&c9=")<0?"&c9="+e(l.referrer):"");var w=c.browserAcceptsLargeURLs()?q.URL_LENGTH_LIMIT:q.RESTRICTED_URL_LENGTH_LIMIT;if(d.length>w&&d.indexOf("&")>0){var x=d.substr(0,w-8).lastIndexOf("&");d=(d.substring(0,x)+"&ns_cut="+e(d.substring(x+1))).substr(0,w)}return d}var c=function(){var a={uid:function(){var a=1;return function(){return+new Date+"_"+a++}}(),filter:function(a,b){var c={};for(var d in b)b.hasOwnProperty(d)&&a(b[d])&&(c[d]=b[d]);return c},extend:function(a){var b,c=arguments.length;a=a||{};for(var d=1;c>d;d++)if(b=arguments[d])for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);return a},getString:function(a,b){var c=String(a);return null==a?b||"na":c},getLong:function(a,b){var c=Number(a);return null==a||isNaN(c)?b||0:c},getInteger:function(a,b){var c=Number(a);return null==a||isNaN(c)?b||0:c},getBoolean:function(a,b){var c="true"==String(a).toLowerCase();return null==a?b||!1:c},isNotEmpty:function(a){return"undefined"!=typeof a&&null!=a&&"undefined"!=typeof a.length&&a.length>0},indexOf:function(b,c){var d=-1;return a.forEach(c,function(a,c){a==b&&(d=c)}),d},forEach:function(a,b,c){try{if("function"==typeof b)if(c="undefined"!=typeof c?c:null,"number"!=typeof a.length||"undefined"==typeof a[0]){var d="undefined"!=typeof a.__proto__;for(var e in a)(!d||d&&"undefined"==typeof a.__proto__[e])&&"function"!=typeof a[e]&&b.call(c,a[e],e)}else for(var e=0,f=a.length;f>e;e++)b.call(c,a[e],e)}catch(g){}},regionMatches:function(a,b,c,d,e){if(0>b||0>d||b+e>a.length||d+e>c.length)return!1;for(;--e>=0;){var f=a.charAt(b++),g=c.charAt(d++);if(f!=g)return!1}return!0},size:function(a){var b,c=0;for(var b in a)a.hasOwnProperty(b)&&c++;return c},log:function(a,b){if("undefined"!=typeof b&&b){var c=new Date,d=c.getHours()+":"+c.getMinutes()+":"+c.getSeconds();console.log(d,a)}},isTrue:function(a){return"undefined"==typeof a?!1:"string"==typeof a?(a=a.toLowerCase(),"true"===a||"1"===a||"on"===a):a?!0:!1},toString:function(b){if("undefined"==typeof b)return"undefined";if("string"==typeof b)return b;if("[object Array]"===Object.prototype.toString.call(b))return b.join(",");if(a.size(b)>0){var c="";for(var d in b)b.hasOwnProperty(d)&&(c+=d+":"+b[d]+";");return c}return b.toString()},exists:function(a){return"undefined"!=typeof a&&null!=a},firstGreaterThan0:function(){for(var a=0,b=arguments.length;b>a;a++){var c=arguments[a];if(c>0)return c}return 0},cloneObject:function(a){if(null==a||"object"!=typeof a)return a;var b=a.constructor();for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b},safeGet:function(b,c){return c=a.exists(c)?c:"",a.exists(b)?b:c},getBrowserName:function(){var a,b,c=navigator.userAgent,d=navigator.appName;return-1!=(b=c.indexOf("Opera"))||-1!=(b=c.indexOf("OPR/"))?d="Opera":-1!=(b=c.indexOf("Android"))?d="Android":-1!=(b=c.indexOf("Chrome"))?d="Chrome":-1!=(b=c.indexOf("Safari"))?d="Safari":-1!=(b=c.indexOf("Firefox"))?d="Firefox":-1!=(b=c.indexOf("IEMobile"))?d="Internet Explorer Mobile":"Microsoft Internet Explorer"==d||"Netscape"==d?d="Internet Explorer":(a=c.lastIndexOf(" ")+1)<(b=c.lastIndexOf("/"))&&(d=c.substring(a,b),d.toLowerCase()==d.toUpperCase()&&(d=navigator.appName)),d},getBrowserFullVersion:function(){var a,b,c,d,e,f=navigator.userAgent,g=navigator.appName,h=""+parseFloat(navigator.appVersion);return-1!=(c=f.indexOf("Opera"))?(h=f.substring(c+6),-1!=(c=f.indexOf("Version"))&&(h=f.substring(c+8))):-1!=(c=f.indexOf("OPR/"))?h=f.substring(c+4):-1!=(c=f.indexOf("Android"))?h=f.substring(c+11):-1!=(c=f.indexOf("Chrome"))?h=f.substring(c+7):-1!=(c=f.indexOf("Safari"))?(h=f.substring(c+7),-1!=(c=f.indexOf("Version"))&&(h=f.substring(c+8))):-1!=(c=f.indexOf("Firefox"))?h=f.substring(c+8):"Microsoft Internet Explorer"==g?(e=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"),null!=e.exec(f)&&(h=parseFloat(RegExp.$1))):"Netscape"==g?(e=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})"),null!=e.exec(f)&&(h=parseFloat(RegExp.$1))):(b=f.lastIndexOf(" ")+1)<(c=f.lastIndexOf("/"))&&(h=f.substring(c+1)),h=h.toString(),-1!=(d=h.indexOf(";"))&&(h=h.substring(0,d)),-1!=(d=h.indexOf(" "))&&(h=h.substring(0,d)),-1!=(d=h.indexOf(")"))&&(h=h.substring(0,d)),a=parseInt(""+h,10),isNaN(a)&&(h=""+parseFloat(navigator.appVersion)),h},browserAcceptsLargeURLs:function(){return null===window.ActiveXObject||!0}};return a}(),d=function(){var a="cs_",b=function(){var b="undefined"!=typeof localStorage?localStorage:{};c.extend(this,{get:function(c){return b[a+c]},set:function(c,d){b[a+c]=d},has:function(c){return a+c in b},remove:function(c){delete b[a+c]},clear:function(){for(var a in b)b.hasOwnProperty(a)&&delete b[a]}})};return b}(),e=function(a,b){var c=new Image;c.onload=function(){b&&b(200)},c.onerror=function(){b&&b()},c.src=a},f=function(a,b,c){c&&setTimeout(c,0)},g=function(){return{dir:function(a){return null},append:function(a,b,c){},write:function(a,b,c){},deleteFile:function(a,b){return!1},read:function(a,b){return null}}}(),h=function(a,b){"undefined"!=typeof engine&&b&&setTimeout(b,0);var c=engine.createHttpClient(),d=c.createRequest("GET",a,null);d.start(),b&&setTimeout(b,0)},i=function(){var a={PLATFORM:"generic",httpGet:e,httpPost:f,Storage:d,IO:g,getCrossPublisherId:function(){return null},getAppName:function(){return Constants.UNKNOWN_VALUE},getAppVersion:function(a){return Constants.UNKNOWN_VALUE},getVisitorId:function(){return this.getDeviceName()+ +new Date+~~(1e3*Math.random())},getVisitorIdSuffix:function(){return"72"},getDeviceName:function(){return""},getPlatformVersion:function(){return""},getPlatformName:function(){return"js"},getRuntimeName:function(){return""},getRuntimeVersion:function(){return""},getResolution:function(){return""},getLanguage:function(){return""},getPackageName:function(){return""},isConnectionAvailable:function(){return!0},isCompatible:function(){return!0},autoSelect:function(){},isCrossPublisherIdChanged:function(){return!1}};return a}(),j=function(){function a(){return"undefined"!=typeof engine&&"undefined"!=typeof engine.stats}function b(){return c.isNotEmpty(engine.stats.device.id)?engine.stats.device.id:c.isNotEmpty(engine.stats.network.mac)?engine.stats.network.mac:null}function e(){if(null==i){var a=b();null!=a?(i=a,j="31",k=a):(i=+new Date+~~(1e3*Math.random()),j="72",k=null)}}var i=null,j=null,k=null;return{PLATFORM:"trilithium",httpGet:h,httpPost:f,Storage:d,IO:g,getCrossPublisherId:function(){return e(),k},getAppName:function(){return c.isNotEmpty(engine.stats.application.name)?engine.stats.application.name:Constants.UNKNOWN_VALUE},getAppVersion:function(a){return c.isNotEmpty(engine.stats.application.version)?engine.stats.application.version:Constants.UNKNOWN_VALUE},getVisitorId:function(){return e(),i},getVisitorIdSuffix:function(){return j},getDeviceName:function(){return c.safeGet(engine.stats.device.platform,"")},getPlatformVersion:function(){return c.safeGet(engine.stats.device.version,"")},getPlatformName:function(){return"js"},getRuntimeName:function(){return"trilithium"},getRuntimeVersion:function(){return""},getResolution:function(){return"undefined"!=typeof screen&&"undefined"!=typeof screen.height&&"undefined"!=typeof screen.width?screen.height+"x"+screen.width:""},getLanguage:function(){return""},getPackageName:function(){return""},isConnectionAvailable:function(){return!0},isCompatible:a}}();i.autoSelect=function(){j.isCompatible()&&c.extend(i,j)};var k,l,m="undefined"!=typeof window&&"undefined"!=typeof document;m?(k=window,l=document):(k={},l={location:{href:""},title:"",URL:"",referrer:"",cookie:""});var c=c||{};c.filterMap=function(a,b){for(var d in a)-1==c.indexOf(d,b)&&delete a[d]},c.getKeys=function(a,b){var c,d=[];for(c in a)(!b||b.test(c))&&a.hasOwnProperty(c)&&(d[d.length]=c);return d};var n=function(){var a=["play","pause","end","buffer","keep-alive","hb","custom","ad_play","ad_pause","ad_end","ad_click"];return{PLAY:0,PAUSE:1,END:2,BUFFER:3,KEEP_ALIVE:4,HEART_BEAT:5,CUSTOM:6,AD_PLAY:7,AD_PAUSE:8,AD_END:9,AD_CLICK:10,toString:function(b){return a[b]}}}(),o=function(){var a=[n.END,n.PLAY,n.PAUSE,n.BUFFER];return{IDLE:0,PLAYING:1,PAUSED:2,BUFFERING:3,toEventType:function(b){return a[b]}}}(),p={ADPLAY:n.AD_PLAY,ADPAUSE:n.AD_PAUSE,ADEND:n.AD_END,ADCLICK:n.AD_CLICK},q={STREAMSENSE_VERSION:"4.1412.05",DEFAULT_PLAYERNAME:"streamsense",DEFAULT_HEARTBEAT_INTERVAL:[{playingtime:6e4,interval:1e4},{playingtime:null,interval:6e4}],DEFAULT_KEEP_ALIVE_INTERVAL:12e5,DEFAULT_PAUSED_ON_BUFFERING_INTERVAL:500,C1_VALUE:"19",C10_VALUE:"js",NS_AP_C12M_VALUE:"1",NS_NC_VALUE:"1",PAGE_NAME_LABEL:"name",RESTRICTED_URL_LENGTH_LIMIT:2048,URL_LENGTH_LIMIT:4096,LABELS_ORDER:["c1","c2","ca2","cb2","cc2","cd2","ns_site","ca_ns_site","cb_ns_site","cc_ns_site","cd_ns_site","ns_vsite","ca_ns_vsite","cb_ns_vsite","cc_ns_vsite","cd_ns_vsite","ns_ap_an","ca_ns_ap_an","cb_ns_ap_an","cc_ns_ap_an","cd_ns_ap_an","ns_ap_pn","ns_ap_pv","c12","ca12","cb12","cc12","cd12","ns_ak","ns_ns_ap_hw","name","ns_ap_ni","ns_ap_ec","ns_ap_ev","ns_ap_device","ns_ap_id","ns_ap_csf","ns_ap_bi","ns_ap_pfm","ns_ap_pfv","ns_ap_ver","ca_ns_ap_ver","cb_ns_ap_ver","cc_ns_ap_ver","cd_ns_ap_ver","ns_ap_sv","ns_ap_cv","ns_type","ca_ns_type","cb_ns_type","cc_ns_type","cd_ns_type","ns_radio","ns_nc","ns_ap_ui","ca_ns_ap_ui","cb_ns_ap_ui","cc_ns_ap_ui","cd_ns_ap_ui","ns_ap_gs","ns_st_sv","ns_st_pv","ns_st_it","ns_st_id","ns_st_ec","ns_st_sp","ns_st_sq","ns_st_cn","ns_st_ev","ns_st_po","ns_st_cl","ns_st_el","ns_st_pb","ns_st_hc","ns_st_mp","ca_ns_st_mp","cb_ns_st_mp","cc_ns_st_mp","cd_ns_st_mp","ns_st_mv","ca_ns_st_mv","cb_ns_st_mv","cc_ns_st_mv","cd_ns_st_mv","ns_st_pn","ns_st_tp","ns_st_pt","ns_st_pa","ns_st_ad","ns_st_li","ns_st_ci","ns_ap_jb","ns_ap_res","ns_ap_c12m","ns_ap_install","ns_ap_updated","ns_ap_lastrun","ns_ap_cs","ns_ap_runs","ns_ap_usage","ns_ap_fg","ns_ap_ft","ns_ap_dft","ns_ap_bt","ns_ap_dbt","ns_ap_dit","ns_ap_as","ns_ap_das","ns_ap_it","ns_ap_uc","ns_ap_aus","ns_ap_daus","ns_ap_us","ns_ap_dus","ns_ap_ut","ns_ap_oc","ns_ap_uxc","ns_ap_uxs","ns_ap_lang","ns_ap_ar","ns_ap_miss","ns_ts","ns_st_ca","ns_st_cp","ns_st_er","ca_ns_st_er","cb_ns_st_er","cc_ns_st_er","cd_ns_st_er","ns_st_pe","ns_st_ui","ca_ns_st_ui","cb_ns_st_ui","cc_ns_st_ui","cd_ns_st_ui","ns_st_bc","ns_st_bt","ns_st_bp","ns_st_pc","ns_st_pp","ns_st_br","ns_st_ub","ns_st_vo","ns_st_ws","ns_st_pl","ns_st_pr","ns_st_ep","ns_st_ty","ns_st_ct","ns_st_cs","ns_st_ge","ns_st_st","ns_st_dt","ns_st_de","ns_st_pu","ns_st_cu","ns_st_fee","ns_ap_i1","ns_ap_i2","ns_ap_i3","ns_ap_i4","ns_ap_i5","ns_ap_i6","c3","ca3","cb3","cc3","cd3","c4","ca4","cb4","cc4","cd4","c5","ca5","cb5","cc5","cd5","c6","ca6","cb6","cc6","cd6","c10","c11","c13","c14","c15","c16","c7","c8","c9"]},r=function(){var a=function(){function a(a,b){var c=b[a];null!=c&&(d[a]=c)}var b,d,e=this,f=0,g=0,h=0,i=0,j=0,k=0;c.extend(this,{reset:function(a){null!=a&&a.length>0?c.filterMap(d,a):d={},d.hasOwnProperty("ns_st_cl")||(d.ns_st_cl="0"),d.hasOwnProperty("ns_st_pn")||(d.ns_st_pn="1"),d.hasOwnProperty("ns_st_tp")||(d.ns_st_tp="1"),e.setPauses(0),e.setStarts(0),e.setBufferingTime(0),e.setBufferingTimestamp(-1),e.setPlaybackTime(0),e.setPlaybackTimestamp(-1)},setLabels:function(a,b){null!=a&&c.extend(d,a),e.setRegisters(d,b)},getLabels:function(){return d},setLabel:function(a,b){var c={};c[a]=b,e.setLabels(c,null)},getLabel:function(a){return d[a]},getClipId:function(){return("undefined"==typeof b||null==b)&&e.setClipId("1"),b},setClipId:function(a){b=a},setRegisters:function(b,c){var d=b.ns_st_cn;null!=d&&(e.setClipId(d),delete b.ns_st_cn),d=b.ns_st_bt,null!=d&&(h=Number(d),delete b.ns_st_bt),a("ns_st_cl",b),a("ns_st_pn",b),a("ns_st_tp",b),a("ns_st_ub",b),a("ns_st_br",b),(c==o.PLAYING||null==c)&&(d=b.ns_st_sq,null!=d&&(g=Number(d),delete b.ns_st_sq)),c!=o.BUFFERING&&(d=b.ns_st_pt,null!=d&&(j=Number(d),delete b.ns_st_pt)),(c==o.PAUSED||c==o.IDLE||null==c)&&(d=b.ns_st_pc,null!=d&&(f=Number(d),delete b.ns_st_pc))},createLabels:function(a,b){var d=b||{};return d.ns_st_cn=e.getClipId(),d.ns_st_bt=String(e.getBufferingTime()),(a==n.PLAY||null==a)&&(d.ns_st_sq=String(g)),(a==n.PAUSE||a==n.END||a==n.KEEP_ALIVE||a==n.HEART_BEAT||null==a)&&(d.ns_st_pt=String(e.getPlaybackTime()),d.ns_st_pc=String(f)),c.extend(d,e.getLabels()),d},incrementPauses:function(){f++},incrementStarts:function(){g++},getBufferingTime:function(){var a=h;return i>=0&&(a+=+new Date-i),a},setBufferingTime:function(a){h=a},getPlaybackTime:function(){var a=j;return k>=0&&(a+=+new Date-k),a},setPlaybackTime:function(a){j=a},getPlaybackTimestamp:function(){return k},setPlaybackTimestamp:function(a){k=a},getBufferingTimestamp:function(){return i},setBufferingTimestamp:function(a){i=a},getPauses:function(){return f},setPauses:function(a){f=a},getStarts:function(){return g},setStarts:function(a){g=a}}),d={},e.reset()};return a}(),s=function(){var a=function(){var a,b,d=this,e=null,f=0,g=0,h=0,i=0,j=0,k=0,l=!1;c.extend(this,{reset:function(a){null!=a&&a.length>0?c.filterMap(b,a):b={},d.setPlaylistId(+new Date+"_"+k),d.setBufferingTime(0),d.setPlaybackTime(0),d.setPauses(0),d.setStarts(0),d.setRebufferCount(0),l=!1},setLabels:function(a,e){null!=a&&c.extend(b,a),d.setRegisters(b,e)},getLabels:function(){return b},setLabel:function(a,b){var c={};c[a]=b,d.setLabels(c,null)},getLabel:function(a){return b[a]},getClip:function(){return e},getPlaylistId:function(){return a},setPlaylistId:function(b){a=b},setRegisters:function(b,c){var d=b.ns_st_sp;null!=d&&(f=Number(d),delete b.ns_st_sp),d=b.ns_st_bc,null!=d&&(h=Number(d),delete b.ns_st_bc),d=b.ns_st_bp,null!=d&&(i=Number(d),delete b.ns_st_bp),d=b.ns_st_id,null!=d&&(a=d,delete b.ns_st_id),c!=o.BUFFERING&&(d=b.ns_st_pa,null!=d&&(j=Number(d),delete b.ns_st_pa)),(c==o.PAUSED||c==o.IDLE||null==c)&&(d=b.ns_st_pp,null!=d&&(g=Number(d),delete b.ns_st_pp))},createLabels:function(b,e){var i=e||{};return i.ns_st_bp=String(d.getBufferingTime()),i.ns_st_sp=String(f),i.ns_st_id=String(a),h>0&&(i.ns_st_bc=String(h)),(b==n.PAUSE||b==n.END||b==n.KEEP_ALIVE||b==n.HEART_BEAT||null==b)&&(i.ns_st_pa=String(d.getPlaybackTime()),i.ns_st_pp=String(g)),(b==n.PLAY||null==b)&&(d.didFirstPlayOccurred()||(i.ns_st_pb="1",d.setFirstPlayOccurred(!0))),c.extend(i,d.getLabels()),i},incrementStarts:function(){f++},incrementPauses:function(){g++,e.incrementPauses()},setPlaylistCounter:function(a){k=a},incrementPlaylistCounter:function(){k++},addPlaybackTime:function(a){if(e.getPlaybackTimestamp()>=0){var b=a-e.getPlaybackTimestamp();e.setPlaybackTimestamp(-1),e.setPlaybackTime(e.getPlaybackTime()+b),d.setPlaybackTime(d.getPlaybackTime()+b)}},addBufferingTime:function(a){if(e.getBufferingTimestamp()>=0){var b=a-e.getBufferingTimestamp();e.setBufferingTimestamp(-1),e.setBufferingTime(e.getBufferingTime()+b),d.setBufferingTime(d.getBufferingTime()+b)}},getBufferingTime:function(){var a=i;return e.getBufferingTimestamp()>=0&&(a+=+new Date-e.getBufferingTimestamp()),a},setBufferingTime:function(a){i=a},getPlaybackTime:function(){var a=j;return e.getPlaybackTimestamp()>=0&&(a+=+new Date-e.getPlaybackTimestamp()),a},setPlaybackTime:function(a){j=a},getStarts:function(){return f},setStarts:function(a){f=a},getPauses:function(){return g},setPauses:function(a){g=a},getRebufferCount:function(){return h},incrementRebufferCount:function(){h++},setRebufferCount:function(a){h=a},didFirstPlayOccurred:function(){return l},setFirstPlayOccurred:function(a){l=a}}),e=new r,b={},d.reset()};return a}(),t=function(){var d=function(d,e){function f(a){var b=0;if(null!=ma)for(var c=0;c<ma.length;c++){var d=ma[c],e=d.playingtime;if(!e||e>a){b=d.interval;break}}return b}function g(){l();var a=f(ja.getClip().getPlaybackTime());if(a>0){var b=pa>0?pa:a;Z=setTimeout(k,b)}pa=0}function h(){l();var a=f(ja.getClip().getPlaybackTime());pa=a-ja.getClip().getPlaybackTime()%a,null!=Z&&l()}function j(){pa=0,ra=0,qa=0}function k(){qa++;var a=N(n.HEART_BEAT,null);B(a),pa=0,g()}function l(){null!=Z&&(clearTimeout(Z),Z=null)}function m(){r(),Y=setTimeout(p,na)}function p(){var a=N(n.KEEP_ALIVE,null);B(a),ia++,m()}function r(){null!=Y&&(clearTimeout(Y),Y=null)}function t(){v(),da.isPauseOnBufferingEnabled()&&G(o.PAUSED)&&(X=setTimeout(u,oa))}function u(){if($==o.PLAYING){ja.incrementRebufferCount(),ja.incrementPauses();var a=N(n.PAUSE,null);B(a),ia++,$=o.PAUSED}}function v(){null!=X&&(clearTimeout(X),X=null)}function w(a){return a==o.PLAYING||a==o.PAUSED}function x(){T&&(clearTimeout(T),T=null)}function y(a){return a==n.PLAY?o.PLAYING:a==n.PAUSE?o.PAUSED:a==n.BUFFER?o.BUFFERING:a==n.END?o.IDLE:null}function z(a,b,d){if(x(),d)T=setTimeout(function(a,b){return function(){z(a,b)}}(a,b),d);else if(J(a)){var e=L(),f=ga,g=I(b),h=f>=0?g-f:0;E(L(),b),F(a,b),M(L()),K(a);for(var i=0,j=ca.length;j>i;i++)ca[i](e,a,b,h);A(b),ja.setRegisters(b,a),ja.getClip().setRegisters(b,a);var k=N(o.toEventType(a),b);c.extend(k,b),G(V)&&(B(k),$=V,ia++)}}function A(a){var b=a.ns_st_mp;null!=b&&(_=b,delete a.ns_st_mp),b=a.ns_st_mv,null!=b&&(aa=b,delete a.ns_st_mv),b=a.ns_st_ec,null!=b&&(ia=Number(b),delete a.ns_st_ec)}function B(a,c){void 0===c&&(c=!0),c&&D(a);var d=da.getPixelURL();if(W){if(!C()){var e=ta.am,f=ta.et,g=e.newApplicationMeasurement(W,f.HIDDEN,a,d);W.getQueue().offer(g)}}else d&&i.httpGet(b(d,a))}function C(){var a=W.getAppContext(),b=W.getSalt(),c=W.getPixelURL();return null==a||null==b||0==b.length||null==c||0==c.length}function D(a){ba=N(null),c.extend(ba,a)}function E(a,b){var d=I(b);if(a==o.PLAYING)ja.addPlaybackTime(d),h(),r();else if(a==o.BUFFERING)ja.addBufferingTime(d),v();else if(a==o.IDLE){var e=c.getKeys(ja.getClip().getLabels());ja.getClip().reset(e)}}function F(a,b){var c=I(b),d=H(b);ha=d,a==o.PLAYING?(g(),m(),ja.getClip().setPlaybackTimestamp(c),G(a)&&(ja.getClip().incrementStarts(),ja.getStarts()<1&&ja.setStarts(1))):a==o.PAUSED?G(a)&&ja.incrementPauses():a==o.BUFFERING?(ja.getClip().setBufferingTimestamp(c),la&&t()):a==o.IDLE&&j()}function G(a){return a!=o.PAUSED&&a!=o.IDLE||$!=o.IDLE&&null!=$?a!=o.BUFFERING&&$!=a:!1}function H(a){var b=-1;return a.hasOwnProperty("ns_st_po")&&(b=c.getInteger(a.ns_st_po)),b}function I(a){var b=-1;return a.hasOwnProperty("ns_ts")&&(b=Number(a.ns_ts)),b}function J(a){return null!=a&&L()!=a}function K(a){V=a,ga=+new Date}function L(){return V}function M(a){U=a}function N(){var a,b;1==arguments.length?(a=o.toEventType(V),b=arguments[0]):(a=arguments[0],b=arguments[1]);var d={};if("undefined"!=typeof document){var e=document;d.c7=e.URL,d.c8=e.title,d.c9=e.referrer}return null!=b&&c.extend(d,b),d.hasOwnProperty("ns_ts")||(d.ns_ts=String(+new Date)),null!=a&&!d.hasOwnProperty("ns_st_ev")&&(d.ns_st_ev=n.toString(a)),da.isPersistentLabelsShared()&&W&&c.extend(d,W.getLabels()),c.extend(d,da.getLabels()),O(a,d),ja.createLabels(a,d),ja.getClip().createLabels(a,d),d.hasOwnProperty("ns_st_mp")||(d.ns_st_mp=_),d.hasOwnProperty("ns_st_mv")||(d.ns_st_mv=aa),d.hasOwnProperty("ns_st_ub")||(d.ns_st_ub="0"),d.hasOwnProperty("ns_st_br")||(d.ns_st_br="0"),d.hasOwnProperty("ns_st_pn")||(d.ns_st_pn="1"),d.hasOwnProperty("ns_st_tp")||(d.ns_st_tp="1"),d.hasOwnProperty("ns_st_it")||(d.ns_st_it="c"),d.ns_st_sv=q.STREAMSENSE_VERSION,d.ns_type="hidden",d}function O(a,b){var d=b||{};if(d.ns_st_ec=String(ia),!d.hasOwnProperty("ns_st_po")){var e=ha,f=I(d);(a==n.PLAY||a==n.KEEP_ALIVE||a==n.HEART_BEAT||null==a&&V==o.PLAYING)&&(e+=f-ja.getClip().getPlaybackTimestamp()),d.ns_st_po=c.getInteger(e)}return a==n.HEART_BEAT&&(d.ns_st_hc=String(qa)),d}function P(a){var b=I(a);0>b&&(a.ns_ts=String(+new Date))}function Q(a,b,c){b=b||{},b.ns_st_ad=1,a>=n.AD_PLAY&&a<=n.AD_CLICK&&da.notify(a,b,c)}function R(a,b){da.notify(n.CUSTOM,a,b)}var S,T,U,V,W,X,Y,Z,$,_,aa,ba,ca,da=this,ea=500,fa=null,ga=0,ha=0,ia=0,ja=null,ka=!0,la=!0,ma=q.DEFAULT_HEARTBEAT_INTERVAL,na=q.DEFAULT_KEEP_ALIVE_INTERVAL,oa=q.DEFAULT_PAUSED_ON_BUFFERING_INTERVAL,pa=0,qa=0,ra=0,sa=!1,ta={};i.autoSelect(),c.extend(this,{reset:function(a){ja.reset(a),ja.setPlaylistCounter(0),ja.setPlaylistId(+new Date+"_1"),ja.getClip().reset(a),null==a||a.isEmpty()?S={}:c.filterMap(S,a),ia=1,qa=0,h(),j(),r(),v(),x(),V=o.IDLE,U=null,ga=-1,$=null,_=q.DEFAULT_PLAYERNAME,aa=q.STREAMSENSE_VERSION,ba=null},setPauseOnBufferingInterval:function(a){oa=a},getPauseOnBufferingInterval:function(){return oa},setKeepAliveInterval:function(a){na=a},getKeepAliveInterval:function(){return na},setHeartbeatIntervals:function(a){ma=a},notify:function(){var a,b,d,e;b=arguments[0],3==arguments.length?(d=arguments[1],e=arguments[2]):(d={},e=arguments[1]),a=y(b);var f=c.extend({},d);if(P(f),f.hasOwnProperty("ns_st_po")||(f.ns_st_po=c.getInteger(e).toString()),b==n.PLAY||b==n.PAUSE||b==n.BUFFER||b==n.END)da.isPausePlaySwitchDelayEnabled()&&w(V)&&w(a)&&(V!=o.PLAYING||a!=o.PAUSED||T)?z(a,f,ea):z(a,f);else{var g=N(b,f);c.extend(g,f),B(g,!1),ia++}},getLabels:function(){return S},getState:function(){return V},setLabels:function(a){null!=a&&(null==S?S=a:c.extend(S,a))},getLabel:function(a){return S[a]},setLabel:function(a,b){null==b?delete S[a]:S[a]=b},setPixelURL:function(a){if(null==a||0==a.length)return null;var b=decodeURIComponent||unescape,c=a.indexOf("?");if(c>=0){if(c<a.length-1){for(var d=a.substring(c+1).split("&"),e=0,f=d.length;f>e;e++){var g=d[e],h=g.split("=");2==h.length?da.setLabel(h[0],b(h[1])):1==h.length&&da.setLabel(q.PAGE_NAME_LABEL,b(h[0]))}a=a.substring(0,c+1)}}else a+="?";return fa=a},getPixelURL:function(){return fa?fa:"undefined"!=typeof ns_p&&"string"==typeof ns_p.src?fa=ns_p.src.replace(/&amp;/,"&").replace(/&ns__t=\d+/,""):"string"==typeof ns_pixelUrl?fa=ns_pixelUrl.replace(/&amp;/,"&").replace(/&ns__t=\d+/,""):null},isPersistentLabelsShared:function(){return ka},setPersistentLabelsShared:function(a){ka=a},isPauseOnBufferingEnabled:function(){return la},setPauseOnBufferingEnabled:function(a){la=a},isPausePlaySwitchDelayEnabled:function(){return sa},setPausePlaySwitchDelayEnabled:function(a){sa=a},setPausePlaySwitchDelay:function(a){a&&a>0&&(ea=a)},getPausePlaySwitchDelay:function(){return ea},setClip:function(a,b){var c=!1;return V==o.IDLE&&(ja.getClip().reset(),ja.getClip().setLabels(a,null),b&&ja.incrementStarts(),c=!0),c},setPlaylist:function(a){var b=!1;return V==o.IDLE&&(ja.incrementPlaylistCounter(),ja.reset(),ja.getClip().reset(),ja.setLabels(a,null),b=!0),b},importState:function(a){reset();var b=c.extend({},a);ja.setRegisters(b,null),ja.getClip().setRegisters(b,null),A(b),ia++},exportState:function(){return ba},getVersion:function(){return q.STREAMSENSE_VERSION},addListener:function(a){ca.push(a)},removeListener:function(a){ca.splice(c.indexOf(a,ca),1)},getClip:function(){return ja.getClip()},getPlaylist:function(){return ja}}),c.extend(this,{adNotify:Q,customNotify:R,viewNotify:function(b,c){b=b||da.getPixelURL(),b&&a(b,c)}}),ns_.comScore&&(ta=ns_.comScore.exports,W=ta.c()),S={},ia=1,V=o.IDLE,ja=new s,X=null,la=!0,Z=null,qa=0,j(),Y=null,T=null,sa=!1,$=null,ha=0,ca=[],da.reset(),d&&da.setLabels(d),e&&da.setPixelURL(e)};return function(a){function b(a,b){return w[y]||e(a,b)}function d(){y=-1;for(var a=0;x>=a;a++)if(w.hasOwnProperty(a)){y=a;break}return ns_.StreamSense.activeIndex=y,y}function e(a,b){return a=a||null,b=b||null,a&&"object"==typeof a&&(b=a,a=null),w[++x]=new ns_.StreamSense(b,a),d(),w[x]}function f(){var a=!1,b=y;if("number"==typeof arguments[0]&&isFinite(arguments[0]))b=arguments[0];else if(arguments[0]instanceof ns_.StreamSense)for(var c in w)if(w[c]===arguments[0]){b=c;break}return w.hasOwnProperty(b)&&(a=w[b],delete w[b],a.reset(),d()),a}function g(a){return a=a||{},b().setPlaylist(a),b().getPlaylist()}function h(a,c,d){return a=a||{},"number"==typeof c&&(a.ns_st_cn=c),b().setClip(a,d),b().getClip()}function i(a,c,d){return"undefined"==typeof a?!1:(d=d||null,c=c||{},b().notify(a,c,d))}function j(a){"undefined"!=typeof a&&b().setLabels(a)}function k(){return b().getLabels()}function l(a){"undefined"!=typeof a&&b().getPlaylist().setLabels(a)}function m(){return b().getPlaylist().getLabels()}function n(a){"undefined"!=typeof a&&b().getClip().setLabels(a)}function o(){return b().getClip().getLabels()}function p(a){return b().reset(a||{})}function q(a){return b().getPlaylist().reset(a||{})}function r(a){return b().getClip().reset(a||{})}function s(a){return a=a||{},b().viewNotify(null,a)}function t(a,c){return arguments.length>2&&(a=arguments[1],c=arguments[2]),a=a||{},"number"==typeof c&&(a.ns_st_po=c),b().customNotify(a,c)}function u(){return b().exportState()}function v(a){b().importState(a)}var w={},x=-1,y=-1;c.extend(a,{activeIndex:y,newInstance:e,"new":e,destroyInstance:f,destroy:f,newPlaylist:g,newClip:h,notify:i,setLabels:j,getLabels:k,setPlaylistLabels:l,getPlaylistLabels:m,setClipLabels:n,getClipLabels:o,resetInstance:p,resetPlaylist:q,resetClip:r,viewEvent:s,customEvent:t,exportState:u,importState:v})}(d),d}();return t.AdEvents=p,t.PlayerEvents=n,ns_.StreamingTag=ns_.StreamingTag||function(){var a=function(){var a=function(a){function b(){if(!ns_.comScore&&c.exists(a))if(u=c.isTrue(a.debug),c.exists(a.customerC2)){var b=a.secure?"https://sb":"http"+("s"==document.location.href.charAt(4)?"s://sb":"://b");s.setPixelURL(b+".scorecardresearch.com/p?c1=2"),s.setLabel("c2",a.customerC2)}else s.setPixelURL(""),u&&console.log("Warning: customerC2 is not provided (or incorrect) in the StreamingTag configuration.");s.setLabel("ns_st_it","r")}function d(a){return c.exists(a)||(a={}),c.exists(a.ns_st_ci)||(a.ns_st_ci="0"),c.exists(a.c3)||(a.c3="*null"),c.exists(a.c4)||(a.c4="*null"),c.exists(a.c6)||(a.c6="*null"),a}function e(a){return m>0&&a>=m?p+=a-m:p=0,p}function f(a){s.getState()!=o.IDLE&&s.getState()!=o.PAUSED?s.notify(n.END,e(a)):s.getState()==o.PAUSED&&s.notify(n.END,p)}function g(a){return h("ns_st_ci",q,a)&&h("c3",q,a)&&h("c4",q,a)&&h("c6",q,a)}function h(a,b,d){if(c.exists(a)&&c.exists(b)&&c.exists(d)){var e=b[a],f=d[a];return c.exists(e)&&c.exists(f)&&e===f}return!1}function i(a,b){f(a),l++;var d={ns_st_cn:l,ns_st_pn:"1",ns_st_tp:"0"};c.extend(d,b),s.setClip(d),q=b,m=a,p=0,s.notify(n.PLAY,p)}function j(a){var b=+new Date;f(b),l++,a=d(a);var e={ns_st_cn:l,ns_st_pn:"1",ns_st_tp:"1",ns_st_ad:"1"};c.extend(e,a),s.setClip(e),p=0,s.notify(n.PLAY,p),m=b,r=!1}function k(a,b){var c=+new Date;a=d(a),w==v.None&&(w=b),r&&w==b&&g(a)?(s.getClip().setLabels(a),s.getState()!=o.PLAYING&&(m=c,s.notify(n.PLAY,p))):i(c,a),r=!0,w=b}var l=0,m=0,p=0,q=null,r=!1,s=new t,u=!1,v={None:0,AudioContent:1,VideoContent:2
},w=v.None;c.extend(this,{playAdvertisement:function(){u&&console&&console.warn("Calling deprecated function 'playAdvertisement'. Please call 'playVideoAdvertisement' or 'playAudioAdvertisement' functions instead.");var a={ns_st_ct:"va"};j(a)},playVideoAdvertisement:function(a){var b={ns_st_ct:"va"};a&&c.extend(b,a),j(b)},playAudioAdvertisement:function(a){var b={ns_st_ct:"aa"};a&&c.extend(b,a),j(b)},playContentPart:function(a){u&&console&&console.warn("Calling deprecated function 'playContentPart'. Please call 'playVideoContentPart' or 'playAudioContentPart' functions instead.");var b={ns_st_ct:"vc"};a&&c.extend(b,a),k(b,v.VideoContent)},playVideoContentPart:function(a){var b={ns_st_ct:"vc"};a&&c.extend(b,a),k(b,v.VideoContent)},playAudioContentPart:function(a){var b={ns_st_ct:"ac"};a&&c.extend(b,a),k(b,v.AudioContent)},stop:function(){var a=+new Date;s.notify(n.PAUSE,e(a))}}),b()};return function(a){}(a),a}();return a}(),t}(),/*!
 * html5video_trackingmanager.js
 */
function(){"use strict";function a(){this.releaseInfo=null,this.videoDiv=null,this.latestAdBreakIdx=-1,this.chapterIdxVisited=[],this.chapterBreaks=[],this.inAdBreak=!1,this.adBlocked=!1,this.clipWasReplayed=!1,this.contentPaused=!1,this.wasSeeking=!1,this.isReady=!1,this.contentEnded=!1,this.contentStarted=!1,this.currentAdPodStarted=!1,this.contentType=this.CONTENT,this.comscoreStreamSense=null,this.comscoreC2="",this.comscoreC3="",this.comscoreC4="",this.ssClipNumber=0,this.ssContentClipNumber=0,this.omnitureTracker=null,this.currentState="",this.adBreakEntryTime=0,this.TIMEOUT=10,this.AD="AD",this.AD_BREAK_START="AD_BREAK_START",this.AD_BREAK_END="AD_BREAK_END",this.AD_PAUSED="AD_PAUSED",this.AD_PLAYING="AD_PLAYING",this.AD_STOPPED="AD_STOPPED",this.AD_SKIPPED="AD_SKIPPED",this.CONTENT="CONTENT",this.CONTENT_START="CONTENT_START",this.CONTENT_PAUSED="CONTENT_PAUSED",this.CONTENT_PAUSED_BY_AD="CONTENT_PAUSED_BY_AD",this.CONTENT_PLAYING="CONTENT_PLAYING",this.CONTENT_STOPPED="CONTENT_STOPPED",this.BUFFER_START="BUFFER_START",this.BUFFER_COMPLETE="BUFFER_COMPLETE",this.SEEK_START="SEEK_START",this.SEEK_COMPLETE="SEEK_COMPLETE",this.VIDEO_COMPLETE="VIDEO_COMPLETE",this.AD_TYPE_PREROLL="pre",this.AD_TYPE_MIDROLL="mid",this.AD_TYPE_POSTROLL="post"}a.prototype.init=function(a,b,c){this.comscoreC2=null!==a?a:"",this.comscoreC3=null!==b?b:"",this.comscoreC4=null!==c?c:""},a.prototype.step=function(a){var b=this.latestAdBreakIdx+1,c=this.latestAdBreakIdx+1,d=b+1;if(this.wasSeeking){this.wasSeeking=!1,d=0;for(var e=0;e<this.chapterBreaks.length&&a>=this.chapterBreaks[e].time;e++)d=e+1;this.log("Seeking from segment #: "+b+", arrived segment #: "+d),c=d-1}!this.inAdBreak&&null!==this.chapterBreaks&&c<this.chapterBreaks.length&&b!=d&&(0>c||a>=this.chapterBreaks[c].time)&&(this.chapterIdxVisited.indexOf(c)<0?this.enterAdBreak(c,a):this.passByAdBreak(c,a)),!this.contentPaused&&this.inAdBreak&&(this.adBlocked||a>=this.adBreakEntryTime+this.TIMEOUT)&&(this.log("AD was possibly blocked. Exit Ad Break Tracking.  Ad break Idx #"+this.latestAdBreakIdx),this.adBlocked=!0,this.exitAdBreak(a))},a.prototype.setup=function(a,b,c){if(this.releaseInfo=a,this.videoDiv=b,this.omnitureTracker=new Omniture15Tracker(jQuery(b)),this.omnitureTracker.videoTitle=this.releaseInfo.omnitureClipTitle,this.omnitureTracker.isIPhone=c,this.chapterBreaks=[],this.releaseInfo.chapterBreaks){for(var d=0;d<this.releaseInfo.chapterBreaks.length+1;d++){var e={},f=this.releaseInfo.chapterBreaks[d-1]?this.releaseInfo.chapterBreaks[d-1]:0;f++;var g=this.releaseInfo.chapterBreaks[d]?this.releaseInfo.chapterBreaks[d]:this.releaseInfo.duration;e.startTime=f,e.endTime=g,e.tracked=!1,this.omnitureTracker.trackBreaks.push(e),d>0&&this.chapterBreaks.push({time:e.startTime})}this.releaseInfo.chapterBreaks.length>0&&this.omnitureTracker.trackBreaks.length>0&&(this.omnitureTracker.trackBreaks[0].tracked=!0)}this.latestAdBreakIdx=-1,this.chapterIdxVisited=[],this.chapterIdxVisited.push(this.latestAdBreakIdx),null===this.comscoreStreamSense&&(this.comscoreStreamSense=new ComscoreStreamSense(this.comscoreC2,this.comscoreC3,this.comscoreC4)),this.comscoreStreamSense.createPlaylist(),this.isReady=!0},a.prototype.reset=function(a){this.log("reset()"),this.omnitureTracker&&this.omnitureTracker.shutdown(),this.clipWasReplayed=a,this.contentEnded=!1,this.contentStarted=!1,this.contentPaused=!1,this.wasSeeking=!1,this.currentAdPodStarted=!1,this.isReady=!1,this.adBlocked=!1,this.latestAdBreakIdx=-1,this.adBreakEntryTime=0,this.ssClipNumber=0,this.ssContentClipNumber=0,this.currentState="",this.chapterIdxVisited=[],this.chapterBreaks=[],this.comscoreStreamSense.reset()},a.prototype.enterAdBreak=function(a,b){this.log("TrackingManager comcscore enterAdBreak( "+b+") Ad break Idx #"+a),this.inAdBreak=!0,this.adBreakEntryTime=b,this.latestAdBreakIdx=a,this.chapterIdxVisited.push(this.latestAdBreakIdx),this.comscoreStreamSense.videoEnd(1e3*Math.round(b))},a.prototype.passByAdBreak=function(a,b){this.log("comcscore passByAdBreak( "+b+") Ad break Idx #"+a),this.latestAdBreakIdx=a,this.comscoreStreamSense.videoEnd(1e3*Math.round(b)),this.streamSenseTrackContent(!1,b),this.comscoreStreamSense.videoPlay(1e3*Math.round(b))},a.prototype.exitAdBreak=function(a){this.log("comcscore exitAdBreak( "+a+")"),this.inAdBreak=!1,this.contentPaused=!1,this.currentAdPodStarted=!1,this.contentEnded||this.streamSenseTrackContent(!1,a),this.comscoreStreamSense.videoPlay(1e3*Math.round(a)),jQuery(this.videoDiv).trigger(this.AD_BREAK_END)},a.prototype.trackByState=function(a,b){switch(this.log("comscore trackByState( "+a+", "+b+") | contentPaused? "+this.contentPaused),a){case this.AD_PLAYING:!this.contentPaused&&this.contentStarted&&this.comscoreStreamSense.videoEnd(1e3*Math.round(b)),this.comscoreStreamSense.videoPlay(1e3*Math.round(b));break;case this.AD_PAUSED:this.comscoreStreamSense.videoPause(1e3*Math.round(b));break;case this.AD_STOPPED:this.comscoreStreamSense.videoEnd(1e3*Math.round(b));break;case this.AD_SKIPPED:this.comscoreStreamSense.videoEnd(1e3*Math.round(b));break;case this.CONTENT_START:this.currentAdPodStarted=!1,this.contentStarted=!0,this.streamSenseTrackContent(!0,b);break;case this.CONTENT_PLAYING:this.inAdBreak&&!this.adBlocked&&this.currentAdPodStarted?this.exitAdBreak(b):this.inAdBreak||this.comscoreStreamSense.videoPlay(1e3*Math.round(b)),this.contentPaused=!1,this.wasBuffering=!1;break;case this.CONTENT_PAUSED:this.contentPaused=!0,this.inAdBreak||this.comscoreStreamSense.videoPause(1e3*Math.round(b));break;case this.CONTENT_PAUSED_BY_AD:if(this.contentStarted){this.contentPaused=!0;var c=this.latestAdBreakIdx+1;!this.inAdBreak&&this.chapterIdxVisited.indexOf(c)<0&&this.enterAdBreak(c,b)}break;case this.SEEK_START:this.wasSeeking=!0,this.inAdBreak?this.adBlocked=!0:this.contentPaused||(this.contentPaused=!0,this.comscoreStreamSense.videoPause(1e3*Math.round(b)));break;case this.BUFFER_START:this.wasBuffering=!0,this.inAdBreak||this.comscoreStreamSense.videoBuffer(1e3*Math.round(b));break;case this.BUFFER_COMPLETE:this.inAdBreak||this.comscoreStreamSense.videoPlay(1e3*Math.round(b));break;case this.VIDEO_COMPLETE:this.contentEnded=!0,this.comscoreStreamSense.videoEnd(1e3*Math.round(b)),this.comscoreStreamSense.endContentVideo()}this.currentState=a},a.prototype.setContentType=function(a){this.contentType=a,this.contentType===this.AD?this.omnitureTracker.enabled=!1:this.omnitureTracker.enabled=!0},a.prototype.trackAd=function(a,b,c,d){this.log("Calling trackAd(). comscore. Ad break Idx #"+this.latestAdBreakIdx),this.currentAdPodStarted=!0;var e=0;this.latestAdBreakIdx>=0&&(e=this.chapterBreaks[this.latestAdBreakIdx].time);var f=this.releaseInfo.comscoreC6,g="";this.ssClipNumber++,c==this.AD_TYPE_PREROLL?(g="va11",this.log("Calling comscore addClip() method for a preroll (clip #"+this.ssClipNumber+")!")):(g="va12",this.log("Calling comscore addClip() method for a midroll (clip #"+this.ssClipNumber+")!")),this.releaseInfo.isLive&&(g="va21"),b=1e3*Math.round(Math.max(0,b)),this.comscoreStreamSense.addClip(a,b.toString(),this.releaseInfo.show,g,this.ssClipNumber,0,0,f,this.releaseInfo.publishDate.split("T")[0],-1,this.releaseInfo.isLive,!0,this.clipWasReplayed),this.comscoreStreamSense.videoPlay(0)},a.prototype.trackABTesting=function(){this.omnitureTracker.trackAdStart()},a.prototype.streamSenseTrackContent=function(a,b){var c=1;if(a)this.ssClipNumber++,this.ssContentClipNumber=this.ssClipNumber;else{b=Math.ceil(b),this.log("stream sense midroll return: "+b+" ( "+this.releaseInfo.chapterBreaks+" )"),this.log("stream sense midroll return: "+b+" ( "+this.chapterBreaks+" )"),this.log("number of breaks: "+this.chapterBreaks.length);for(var d=0;d<this.chapterBreaks.length&&(this.log("current time: "+b+", compare to break: "+this.chapterBreaks[d].time),b>=this.chapterBreaks[d].time);d++)c=d+2}var e=null!==this.chapterBreaks?Number(this.chapterBreaks.length+1):1;this.log("stream sense content part: "+c.toString()+" of "+e.toString()+" )");var f=this.releaseInfo.comscoreC6,g="vc13";this.releaseInfo.isLive||(g=this.releaseInfo.duration/60>10?"vc12":"vc11");var h=4;"webisode"==this.releaseInfo.clipType&&(h=3),this.log("Calling comscore addClip() method for a content (clip #"+this.ssContentClipNumber+", part "+c+" of "+e+")!");var i=this.ssContentClipNumber;this.comscoreStreamSense.addClip(this.releaseInfo.contentId,Math.round(1e3*this.releaseInfo.duration).toString(),this.releaseInfo.show,g,i,c,e,f,this.releaseInfo.publishDate.split("T")[0],h,this.releaseInfo.isLive,!1,this.clipWasReplayed)},a.prototype.log=function(a){swfobject.getQueryParamValue("debug")&&(console.log("[Tracking Manager] "+a),jQuery("#debugoutput").prepend("<p>[trackingManager] "+a+"</p>"))},window.TrackingManager=a}(),/*!
 * ingestor.js
*/
function(){"use strict";function a(){this.size=0,this.entries=[]}function b(){this.contentID=0,this.episodeTitle="",this.description="",this.showName="",this.season=void 0,this.episode=void 0,this.content=[],this.thumbnail="",this.streamURL="",this.restrictionID="",this.isLive=!1,this.isEmbeddable=!1,this.isHTML5=!1,this.duration=0,this.captionURL="",this.commentaryURL="",this.clipType="",this.brand="",this.chapters=[],this.availableDate=0,this.pubDate=0,this.expirationDate=0,this.airdate=0,this.categories=[]}function c(a){return parseFloat(a.substr(a.lastIndexOf("/")+1))}var d;d={getMaxCount:function(a){var b,c;c=-1!=a.endpoint.indexOf("?")?"&count=true&pretty=true&entries=false":"?count=true&pretty=true&entries=false",b=a.endpoint+c,this._fetchData(b).done(function(b){a.setMaxCount(b.totalResults)})},getVideoList:function(a){var b,c,d,e,f,g,h,i,j;if(g=this,c="&startIndex="+a.startIdx,d="&endIndex="+a.endIdx,h=["id","content","defaultThumbnailUrl","title",":show",":season",":episode","pubdate","availableDate","expirationDate",":clipType","restrictionID",":allowHTML5"],h="&fields="+h.join(","),i="",a.sort)for(var k in a.sort)i="&sort="+k+"|"+a.sort[k];j="",a.listOfVideoIds&&(j+="0,",j+=a.listOfVideoIds.join(","),"/"!==a.endpoint.charAt(a.endpoint.length-1)&&(j="/"+j)),b=-1!=a.endpoint.indexOf("?")?"&count=true"+c+d+h+i:"?count=true"+c+d+h+i,e=a.endpoint+j+b,this._fetchData(e).done(function(b){f=g._prepareVideoList(b),a.listOfVideoIds&&g._curatedListSort(f,a.listOfVideoIds),a.setVideoList(f)})},_prepareVideoList:function(d){var e,f,g,h;e=new a,h=d.entryCount;for(var i=0;h>i;i++)f=new b,g=d.entries[i],f.contentID=c(g.id),f.thumbnail=g.defaultThumbnailUrl,f.showName=g.pl1$show,f.episodeTitle=g.title,f.content=g.content,f.airdate=g.pubDate,f.availableDate=g.availableDate,f.expirationDate=g.expirationDate,f.clipType=g.pl1$clipType,f.restrictionID=g.restrictionId.split("/").pop(),f.isHTML5=g.pl1$allowHTML5,g.pl1$season&&(f.season=g.pl1$season),g.pl1$episode&&(f.episode=g.pl1$episode),e.entries.push(f);return e.size=e.entries.length,e},_curatedListSort:function(a,b){var c;c=[];for(var d=0;d<b.length;d++)for(var e=0;e<a.size;e++)b[d]==a.entries[e].contentID&&c.push(a.entries[e]);a.entries=c},_fetchData:function(a){a=a.replace("http://","//");var b=3e5,c=new Date,d=Math.round(c.getTime()/b)*b+this._fetchCount;return this._fetchCount++,$.ajax({url:a,dataType:"jsonp",cache:!0,jsonpCallback:"shawVideo"+d})},_fetchCount:0},window.ShawVideoIngestor=d}(),function(a){function b(){var b,c,d={height:j.innerHeight,width:j.innerWidth};return d.height||(b=i.compatMode,(b||!a.support.boxModel)&&(c="CSS1Compat"===b?k:i.body,d={height:c.clientHeight,width:c.clientWidth})),d}function c(){return{top:j.pageYOffset||k.scrollTop||i.body.scrollTop,left:j.pageXOffset||k.scrollLeft||i.body.scrollLeft}}function d(){var d,g=[],i=0;if(a.each(h,function(a,b){var c=b.data.selector,d=b.$element;g.push(c?d.find(c):d)}),d=g.length)for(e=e||b(),f=f||c();d>i;i++)if(a.contains(k,g[i][0])){var j,l,m,n=a(g[i]),o={height:n.height(),width:n.width()},p=n.offset(),q=n.data("inview");if(!f||!e)return;p.top+o.height>f.top&&p.top<f.top+e.height&&p.left+o.width>f.left&&p.left<f.left+e.width?(j=f.left>p.left?"right":f.left+e.width<p.left+o.width?"left":"both",l=f.top>p.top?"bottom":f.top+e.height<p.top+o.height?"top":"both",m=j+"-"+l,q&&q===m||n.data("inview",m).trigger("inview",[!0,j,l])):q&&n.data("inview",!1).trigger("inview",[!1])}}var e,f,g,h={},i=document,j=window,k=i.documentElement,l=a.expando;a.event.special.inview={add:function(b){h[b.guid+"-"+this[l]]={data:b,$element:a(this)},g||a.isEmptyObject(h)||(g=setInterval(d,250))},remove:function(b){try{delete h[b.guid+"-"+this[l]]}catch(c){}a.isEmptyObject(h)&&(clearInterval(g),g=null)}},a(j).bind("scroll resize scrollstop",function(){e=f=null}),!k.addEventListener&&k.attachEvent&&k.attachEvent("onfocusin",function(){f=null})}(jQuery),function(a,b){var c=b(a,a.document);a.lazySizes=c,"object"==typeof module&&module.exports?module.exports=c:"function"==typeof define&&define.amd&&define(c)}(window,function(a,b){"use strict";if(b.getElementsByClassName){var c,d=b.documentElement,e=a.addEventListener,f=a.setTimeout,g=a.requestAnimationFrame||f,h=a.setImmediate||f,i=/^picture$/i,j=["load","error","lazyincluded","_lazyloaded"],k=function(a,b){var c=new RegExp("(\\s|^)"+b+"(\\s|$)");return a.className.match(c)&&c},l=function(a,b){k(a,b)||(a.className+=" "+b)},m=function(a,b){var c;(c=k(a,b))&&(a.className=a.className.replace(c," "))},n=function(a,b,c){var d=c?"addEventListener":"removeEventListener";c&&n(a,b),j.forEach(function(c){a[d](c,b)})},o=function(a,c,d,e,f){var g=b.createEvent("CustomEvent");return g.initCustomEvent(c,!e,!f,d||{}),a.dispatchEvent(g),g},p=function(b,d){var e;a.HTMLPictureElement||((e=a.picturefill||a.respimage||c.pf)?e({reevaluate:!0,elements:[b]}):d&&d.src&&(b.src=d.src))},q=function(a,b){return(getComputedStyle(a,null)||{})[b]},r=function(a,b,d){for(d=d||a.offsetWidth;d<c.minSize&&b&&!a._lazysizesWidth;)d=b.offsetWidth,b=b.parentNode;return d},s=function(b){var d,e=0,i=a.Date,j=function(){d=!1,e=i.now(),b()},k=function(){h(j)},l=function(){g(k)};return function(){if(!d){var a=c.throttle-(i.now()-e);d=!0,6>a&&(a=6),f(l,a)}}},t=function(){var h,j,r,t,v,w,x,y,z,A,B,C,D,E=/^img$/i,F=/^iframe$/i,G="onscroll"in a&&!/glebot/.test(navigator.userAgent),H=0,I=0,J=0,K=0,L=function(a){J--,a&&a.target&&n(a.target,L),(!a||0>J||!a.target)&&(J=0)},M=function(a,b){var c,d=a,e="hidden"!=q(a,"visibility");for(y-=b,B+=b,z-=b,A+=b;e&&(d=d.offsetParent);)e=(q(d,"opacity")||1)>0,e&&"visible"!=q(d,"overflow")&&(c=d.getBoundingClientRect(),e=A>c.left&&z<c.right&&B>c.top-1&&y<c.bottom+1);return e},N=function(){var a,b,d,e,f,g,i,k,l;if((v=c.loadMode)&&8>J&&(a=h.length)){for(b=0,K++,D>I&&1>J&&K>3&&v>2?(I=D,K=0):I=I!=C&&v>1&&K>2&&6>J?C:H;a>b;b++)if(h[b]&&!h[b]._lazyRace)if(G)if((k=h[b].getAttribute("data-expand"))&&(g=1*k)||(g=I),l!==g&&(w=innerWidth+g,x=innerHeight+g,i=-1*g,l=g),d=h[b].getBoundingClientRect(),(B=d.bottom)>=i&&(y=d.top)<=x&&(A=d.right)>=i&&(z=d.left)<=w&&(B||A||z||y)&&(r&&3>J&&!k&&(3>v||4>K)||M(h[b],g))){if(S(h[b],d.width),f=!0,J>9)break}else!f&&r&&!e&&3>J&&4>K&&v>2&&(j[0]||c.preloadAfterLoad)&&(j[0]||!k&&(B||A||z||y||"auto"!=h[b].getAttribute(c.sizesAttr)))&&(e=j[0]||h[b]);else S(h[b]);e&&!f&&S(e)}},O=s(N),P=function(a){l(a.target,c.loadedClass),m(a.target,c.loadingClass),n(a.target,P)},Q=function(a,b){try{a.contentWindow.location.replace(b)}catch(c){a.setAttribute("src",b)}},R=function(){var a,b=[],c=function(){for(;b.length;)b.shift()();a=!1};return function(d){b.push(d),a||(a=!0,g(c))}}(),S=function(a,b){var d,e,g,h,j,q,s,v,w,x,y,z=E.test(a.nodeName),A=z&&(a.getAttribute(c.sizesAttr)||a.getAttribute("sizes")),B="auto"==A;(!B&&r||!z||!a.src&&!a.srcset||a.complete||k(a,c.errorClass))&&(a._lazyRace=!0,J++,R(function(){if(a._lazyRace&&delete a._lazyRace,m(a,c.lazyClass),!(w=o(a,"lazybeforeunveil")).defaultPrevented){if(A&&(B?(u.updateElem(a,!0,b),l(a,c.autosizesClass)):a.setAttribute("sizes",A)),q=a.getAttribute(c.srcsetAttr),j=a.getAttribute(c.srcAttr),z&&(s=a.parentNode,v=s&&i.test(s.nodeName||"")),x=w.detail.firesLoad||"src"in a&&(q||j||v),w={target:a},x&&(n(a,L,!0),clearTimeout(t),t=f(L,2500),l(a,c.loadingClass),n(a,P,!0)),v)for(d=s.getElementsByTagName("source"),e=0,g=d.length;g>e;e++)(y=c.customMedia[d[e].getAttribute("data-media")||d[e].getAttribute("media")])&&d[e].setAttribute("media",y),h=d[e].getAttribute(c.srcsetAttr),h&&d[e].setAttribute("srcset",h);q?a.setAttribute("srcset",q):j&&(F.test(a.nodeName)?Q(a,j):a.setAttribute("src",j)),(q||v)&&p(a,{src:j})}(!x||a.complete)&&(x?L(w):J--,P(w))}))},T=function(){var a,b=function(){c.loadMode=3,O()};r=!0,K+=8,c.loadMode=3,e("scroll",function(){3==c.loadMode&&(c.loadMode=2),clearTimeout(a),a=f(b,99)},!0)};return{_:function(){h=b.getElementsByClassName(c.lazyClass),j=b.getElementsByClassName(c.lazyClass+" "+c.preloadClass),C=c.expand,D=Math.round(C*c.expFactor),e("scroll",O,!0),e("resize",O,!0),a.MutationObserver?new MutationObserver(O).observe(d,{childList:!0,subtree:!0,attributes:!0}):(d.addEventListener("DOMNodeInserted",O,!0),d.addEventListener("DOMAttrModified",O,!0),setInterval(O,999)),e("hashchange",O,!0),["focus","mouseover","click","load","transitionend","animationend","webkitAnimationEnd"].forEach(function(a){b.addEventListener(a,O,!0)}),/d$|^c/.test(b.readyState)?T():(e("load",T),b.addEventListener("DOMContentLoaded",O)),O()},checkElems:O,unveil:S}}(),u=function(){var a,d=function(a,b,c){var d,e,f,g,h=a.parentNode;if(h&&(c=r(a,h,c),g=o(a,"lazybeforesizes",{width:c,dataAttr:!!b}),!g.defaultPrevented&&(c=g.detail.width,c&&c!==a._lazysizesWidth))){if(a._lazysizesWidth=c,c+="px",a.setAttribute("sizes",c),i.test(h.nodeName||""))for(d=h.getElementsByTagName("source"),e=0,f=d.length;f>e;e++)d[e].setAttribute("sizes",c);g.detail.dataAttr||p(a,g.detail)}},f=function(){var b,c=a.length;if(c)for(b=0;c>b;b++)d(a[b])},g=s(f);return{_:function(){a=b.getElementsByClassName(c.autosizesClass),e("resize",g)},checkElems:g,updateElem:d}}(),v=function(){v.i||(v.i=!0,u._(),t._())};return function(){var b,d={lazyClass:"lazyload",loadedClass:"lazyloaded",loadingClass:"lazyloading",preloadClass:"lazypreload",errorClass:"lazyerror",autosizesClass:"lazyautosizes",srcAttr:"data-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes",minSize:40,customMedia:{},init:!0,expFactor:2,expand:359,loadMode:2,throttle:125};c=a.lazySizesConfig||a.lazysizesConfig||{};for(b in d)b in c||(c[b]=d[b]);a.lazySizesConfig=c,f(function(){c.init&&v()})}(),{cfg:c,autoSizer:u,loader:t,init:v,uP:p,aC:l,rC:m,hC:k,fire:o,gW:r}}}),/*!
 * legacyPlayerUtils.js
 * Required for hooking up legacy player with our new cookie functions
*/
function(){"use strict";function a(){}a.metadataUrl="",a.htmlId="shawVideo_FlashPlayer",a.readCookie=function(a){return VideoPlayerUtils.readCookie(a)},a.createCookie=function(a,b,c){VideoPlayerUtils.writeCookie(a,b,c)},a.eraseCookie=function(a){VideoPlayerUtils.eraseCookie(a)},a.onAdComplete=function(){googletag.pubads().updateCorrelator()},a.getFlashObject=function(a,b){this.metadataUrl=a.metadataUrl;var c=a.content,d=this._getLegacyPid(c),e={akamaiRoot:"http://a123.g.akamai.net/f/123/41524/60m/webdata.globaltv.com/",url:window.location.href,targetContainer:"playerFrame",feedpid:a.feedId,flashBGColor:"#000000",companionAdInfo:"|bannerSizes=120x240,468x60,250x250,160x90|bannerRegions=sky,banner,bbox,button",initialTime:0,videoStartTime:0,enableAuthentication:VideoPlayerUtils.requiresAuthentication(),restrictionAccount:a.restrictionAccount,authTokenAccount:a.authTokenAccount,pid:d,releaseURL:encodeURIComponent("http://link.theplatform.com/s/dtjsEC/"+d+"?format=SMIL&mbr=true")};VideoPlayerUtils.log("requiresAuthentication: "+e.enableAuthentication);var f={swfFolder:"",omnitureAccount:b?"shawprimetimetest":a.omnitureAccount,omnitureTrackingServer:a.omnitureTrackingServer,omniturePlayerName:"ShawVideoPlayer-Flash-Legacy",comscoreC3:a.comscoreC3,comscoreC4:a.comscoreC4,gaAccount:"UA-840802-12",feedpid:a.feedId,ima3url:escape(a.googleIMA3Url.replace("{cms_id}",a.googleCmsId)),ima3urlNonLinear:""},g={adcomponent:["googleima3|url="+f.ima3url+"|nonLinear="+f.ima3urlNonLinear],tracking:["URL="+f.swfFolder+"omnitureMedia.swf|trackingServer="+f.omnitureTrackingServer+"|account="+f.omnitureAccount+"|visitorNamespace="+f.omnitureAccount+"|dc=112|debug=true|frequency=25,50,75|playerName="+f.omniturePlayerName,"URL="+f.swfFolder+"googleAnalytics.swf|playerName="+f.omniturePlayerName+"|ID="+f.gaAccount+"|mode=Bridge|debug=false","URL="+f.swfFolder+"comScore.swf|playerName="+f.omniturePlayerName+"|c2=3005660|c3="+f.comscoreC3+"|c4="+f.comscoreC4]},h=0;for(var i in g)if("string"==typeof g[i])e["plugin"+h]=escape("type="+i+"|"+g[i]),h++;else for(var j=0;j<g[i].length;j++)e["plugin"+h]=escape("type="+i+"|"+g[i][j]),h++;return e},a.insertAuthMessage=function(a,b){var c,d,e="/",f=/videodrome|beta\.globaltv\.com/.test(window.location.href),g=this._getThumbnailUrl(b.media$thumbnails);f?(c=/beta\.globaltv\.com/.test(window.location.host)?"www.globaltv.com":"globaltv.uat.smdg.ca",e=window.location.href.match(/^(.*[\\\/])/)[0],d=['<div id="svpAuthMessageWindow">','<div id="svpAuthMessage">',"<h1>This episode is available Online or via TV On Demand to customers of participating TV providers.</h1>",'<h2>"{videoTitle}" aired {airDate} &nbsp;<img src="'+e+'Content/images/auth/lock.png" alt="Locked"></h2>','<a href="'+a.authLink+'" data-targetvideourl="{targetVideoUrl}"><img src="'+e+'Content/images/auth/signInToWatchButton.png" alt="Sign In To Watch"></a>',"</div>","</div>"]):d=['<div class="authMessage">','<img class="authMessage-image" src="'+g+'"/>','<div class="authMessage-overlay">','<span class="authMessage-overlay-title">You\'re almost there!</span>','<span class="authMessage-overlay-copy">Sign in using your TV Service Provider credentials to watch this episode</span>','<img class="authMessage-overlay-button" src="'+e+'Content/images/auth/signInToWatchButton.png"/>',"</div>",'<a href="'+a.authLink+'" data-targetvideourl="{targetVideoUrl}" alt="Sign in to watch" class="authMessage-hitArea"></a>',"</div>"];var h={showName:b.pl1$show,contentID:b.id.match(/(\d+)/)[0],episodeTitle:b.title,clipType:b.pl1$clipType,pubDate:b.pubDate},i=$("#"+a.htmlId),j=VideoPlayerUtils.buildHref(h,shawVideo_targetRelease.hrefSchema);f||i.addClass("is-locked"),i.html(d.join("").replace("{videoTitle}",h.episodeTitle).replace("{targetVideoUrl}",j).replace("{airDate}",VideoPlayerUtils.convertEpochToMonthDateYear(h.pubDate))),i.find("a").on("click",$.proxy(this._lockedVideoClickEvent,this))},a.onMediaStart=function(a){var b,c,d;b=a.data.baseClip.contentID,VideoPlayerUtils.log("on media start! "+b),c=VideoPlayerUtils.populateEndOfClip(b,"nextClips",1),VideoPlayerUtils.log("next clip: "+c[0]),d=this.metadataUrl.replace("{contentid}",c[0]),jQuery.ajaxSetup({cache:"true"}),jQuery.getJSON(d,jQuery.proxy(this._metadataLoaded,this)),jQuery.ajaxSetup({cache:"false"})},a._lockedVideoClickEvent=function(a){var b,c="";a.preventDefault(),a.stopImmediatePropagation(),b=a.currentTarget.getAttribute("data-targetvideourl"),c="[Sign In] Auth Message: "+b,b=VideoPlayerUtils.convertUrlToAbsolute(b),VideoPlayerUtils.writeCookie("targetVideoUrl",b),VideoPlayerUtils.writeCookie("authPrev",b),ShawVideoAnalytics.sendEvent(c,{eVar40:c},[],a.currentTarget.getAttribute("href"))},a._metadataLoaded=function(a){var b,c,d,e=a.entries[0];d=e.id.substring(e.id.lastIndexOf("/")+1,e.id.length),VideoPlayerUtils.log("Meta data loaded "+e),b={title:e.title,show:e.pl1$show,season:e.pl1$season,episode:e.pl1$episode},c=$('li[data-video_id="'+d+'"]').find("a"),c.hasClass("shawVideo_RestrictedContent")?b.destinationURL=$(c).attr("data-targetvideourl"):b.destinationURL=$(c).attr("href"),b.thumbnailURL=this._getThumbnailUrl(e.media$thumbnails),document.getElementById(this.htmlId).setNextClip&&document.getElementById(this.htmlId).setNextClip(b)},a._getThumbnailUrl=function(a){var b="";for(i=0;i<a.length&&(b=a[i].plfile$url,!(a[i].plfile$width>=711));i++);return b},a._getLegacyPid=function(a){for(var b=a.media$content,c=0;c<b.length;c++){var d=b[c],e=d.plfile$format.toLowerCase();if("f4m"===e||"mpeg4"===e||"flv"===e){var f=d.plfile$url;return f.substring(f.lastIndexOf("/")+1,f.indexOf("?"))}}},window.LegacyPlayerUtils=a,window.cwp=a,window.cwp.manager=a,window.cwpLegacy&&(window.cwp=window.cwpLegacy,window.cwp.manager=window.cwpLegacy.manager)}(),/*!
 * player_setting.js
*/
function(){"use strict";function a(){this.autoPlay=!1,this.playerName="default player name",this.htmlId="",this.rootCategory="",this.scrollDistanceFromTop=0,this.shouldDrawMetaData=!0,this.authLink="",this.googleCmsId="",this.googleIMA3Url="",this.adUrl="",this.disableTimeBasedCountdown=!1,this.comscoreC3="",this.comscoreC4="",this.omnitureAccount="",this.omnitureNamespace="",this.omnitureTrackingServer="",this.omnitureSecureTrackingServer="",this.platformAccount="",this.feedId="",this.feedBaseUrl="",this.liveTimeout="",this.videoSMILUrl="",this.metadataUrl="",this.contentId="",this.eocIds="",this.releaseUrl="",this.account="",this.eocRecoFeedUrl="",this.eocCountdownSeconds=-1,this.eocCrossPromoEnabled=!1,this.metadata=void 0,this.content=void 0,this.contentRestricted=!1,this.restrictionAccount="",this.authTokenAccount="",this.isEmbed=!1,this.isLive=!1,this.html5PlayerEnabled=!0,this.disabledFullscreen=!1,this.devSettings=""}a.prototype.addDevSetting=function(a,b){this.devSettings+=(this.devSettings?"&":"")+a+"="+b},window.VideoPlayerSetting=a}(),/*!
 * showsLikethis.js
 */
function(){"use strict";function a(a){this.htmlId=a.targetHtmlId?a.targetHtmlId:"",this.$htmlId=$(this.htmlId),this.animationWidth=200,this.drawerListWidth=0,this.drawerWrapperWidth=0,this.listItemWidth=0,this._init()}a.prototype._init=function(){VideoPlayerUtils.touchDetection(),VideoPlayerUtils.detectIE8(this),this._setListItemWidth(),this._setDrawerListWidth(),this._bindClick(".showsLikeThis-btn"),$(window).bind("resize",$.proxy(this._resize,this)),ShawVideoAnalytics.attachShowsLikeThisEvents(this)},a.prototype._bindClick=function(a){this.$htmlId.find(a).is(":visible")?this.$htmlId.find(a).on("click",$.proxy(this._paginationClickEvent,this)):this.$htmlId.find(a).off("click",$.proxy(this._paginationClickEvent,this))},a.prototype._setListItemWidth=function(){this.listItemWidth=Math.ceil(this.$htmlId.find(".showsLikeThis-item").first().outerWidth(!0))},a.prototype._setDrawerListWidth=function(){return this.drawerWrapperWidth=this.$htmlId.find(".showsLikeThis-listwrapper").width(),this.drawerWrapperWidth>500?void this.$htmlId.find(".showsLikeThis-list").width("auto"):(this._calculateAnimationWidth(),this.drawerListWidth=this.$htmlId.find(".showsLikeThis-item").size()*this.listItemWidth,this.drawerListWidth+=this.drawerWrapperWidth-this.animationWidth,void this.$htmlId.find(".showsLikeThis-list").width(this.drawerListWidth))},a.prototype._calculateAnimationWidth=function(){this.animationWidth=Math.floor(this.drawerWrapperWidth/this.listItemWidth)*this.listItemWidth},a.prototype._disablePagination=function(a){this.drawerListWidth-$(a).scrollLeft()===this.drawerWrapperWidth?(this.$htmlId.find(".showsLikeThis-btn").removeClass("disabled"),this.$htmlId.find(".showsLikeThis-next").addClass("disabled")):0===$(a).scrollLeft()?(this.$htmlId.find(".showsLikeThis-btn").removeClass("disabled"),this.$htmlId.find(".showsLikeThis-prev").addClass("disabled")):this.$htmlId.find(".showsLikeThis-btn").removeClass("disabled")},a.prototype._paginationClickEvent=function(a){var b,c;return b=this.$htmlId.find(".showsLikeThis-listwrapper"),$(b).is(":animated")?void 0:(c=this.animationWidth,$(a.currentTarget).is(".showsLikeThis-prev")&&(c=-c),$(b).animate({scrollLeft:"+="+c},$.proxy(this._disablePagination,this,b)),!1)},a.prototype._resize=function(){this._setDrawerListWidth(),this._bindClick(".showsLikeThis-btn"),this._disablePagination(this.$htmlId.find(".showsLikeThis-listwrapper"))},window.ShowsLikeThis=a}(),/*!
 * SignInBar.js
*/
function(){"use strict";function a(a){this.htmlId=a.targetHtmlId?a.targetHtmlId:"#signInBar",this.signInUrl=a.signInUrl?a.signInUrl:"https://www.globaltv.com/signin/",this._init(this.htmlId)}a.prototype._init=function(a){var b=[];if(!(swfobject.getFlashPlayerVersion().major<1)){b=['<div class="auth-bar auth-signed-in" id="authenticated">','<div class="auth-bar-center">','<div id="authenticated-ready">','<div class="auth-bar-content clearfix">','<p><span class="auth-state state-ready">Signed in</span><img class="bdu-provider" id="bdu-provider" src="" alt="" height="30"></p>',"</div>",'<a href="#" class="auth-btn" id="apSignOut">Sign Out</a>',"</div>","</div>","</div>",'<div class="auth-bar auth-signed-out" id="unauthenticated">','<div class="auth-bar-center">','<div id="unauthenticated-default">','<div class="auth-bar-content clearfix">','<p>Sign in now for full access to Global content. &nbsp;<a href="http://globaltv.com/FAQ/#GlobalGoApp"><span></span> Learn more</a></p>',"</div>","</div>",'<div id="unauthenticated-error" style="display: none;">','<div class="auth-bar-content clearfix">','<div class="auth-error auth-error-nonsubscriber" style="display: none;">',"<p>Sorry, we are not able to validate your channel subscription. Please contact your television provider.</p>","</div>",'<div class="auth-error auth-error-drm-reset" style="display: none;">','<p>Sorry, Adobe Flash encountered an error during authentication. Please <a href="javascript:document.location.reload()">reload</a> the page and try again.<br>If unsuccessful, please <a href="http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager08.html" target="_blank">reset your Adobe Flash license files</a> and try again.</p>',"</div>",'<div class="auth-error auth-error-drm-noreset" style="display: none;">','<p>Sorry, Adobe Flash encountered an error during authentication.<br>Please <a href="http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager08.html" target="_blank">reset your Adobe Flash license files</a> and try again.</p>',"</div>",'<div class="auth-error auth-error-incognito" style="display: none;">',"<p>Sorry, you cannot sign in using your browsers Incognito/Private mode.</p>","</div>","</div>","</div>",'<span id="ctl00_AuthBar_signinRedirectHolder">','<a href="#" class="auth-btn" id="apSignIn">Sign In</a>',"</span>","</div>","</div>"];var c=$(a),d=this.signInUrl;c.html(b.join("")),this._setAuthenticated(VideoPlayerUtils.isAuthenticatedUser()),c.find(".auth-btn").on("click",function(){var a;"apSignIn"===$(this).attr("id")?(VideoPlayerUtils.writeCookie("authPrev",window.location.href),VideoPlayerUtils.writeCookie("targetVideoUrl",window.location.href),a="[Sign In] Auth Bar"):(a="[Sign Out] Auth Bar",d=null),ShawVideoAnalytics.sendEvent(a,{eVar40:a},[],d)}),$(window).bind("updateUserAuthStatus",$.proxy(this._renderAuthStatus,this,!1))}},a.prototype._setAuthenticated=function(a){var b=$(this.htmlId);if(a){b.find("#unauthenticated").css("display","none"),b.find("#authenticated").css("display","block"),b.find("#authenticated-ready").css("display","block");var c=VideoPlayerUtils.readCookie("authImg");c&&(c=unescape(c),b.find("#bdu-provider").attr({src:c.split(";")[0],alt:c.split(";")[1]}))}else b.find("#unauthenticated").css("display","block"),b.find("#authenticated").css("display","none")},a.prototype._renderAuthStatus=function(){this._setAuthenticated(VideoPlayerUtils.readCookie("authN"))},window.ShawVideoSignInBar=a}();/*!    SWFObject v2.3.20120118 <http://github.com/swfobject/swfobject>
    is released under the MIT License <http://www.opensource.org/licenses/mit-license.php>
*/
var swfobject=function(){function a(){if(!T&&document.getElementsByTagName("body")[0]){try{var a,b=r("span");b.style.display="none",a=M.getElementsByTagName("body")[0].appendChild(b),a.parentNode.removeChild(a),a=null,b=null}catch(c){return}T=!0;for(var d=P.length,e=0;d>e;e++)P[e]()}}function b(a){T?a():P[P.length]=a}function c(a){if(typeof L.addEventListener!=E)L.addEventListener("load",a,!1);else if(typeof M.addEventListener!=E)M.addEventListener("load",a,!1);else if(typeof L.attachEvent!=E)t(L,"onload",a);else if("function"==typeof L.onload){var b=L.onload;L.onload=function(){b(),a()}}else L.onload=a}function d(){var a=M.getElementsByTagName("body")[0],b=r(F);b.setAttribute("style","visibility: hidden;"),b.setAttribute("type",I);var c=a.appendChild(b);if(c){var d=0;!function f(){if(typeof c.GetVariable!=E)try{var g=c.GetVariable("$version");g&&(g=g.split(" ")[1].split(","),X.pv=[s(g[0]),s(g[1]),s(g[2])])}catch(h){X.pv=[8,0,0]}else if(10>d)return d++,void setTimeout(f,10);a.removeChild(b),c=null,e()}()}else e()}function e(){var a=Q.length;if(a>0)for(var b=0;a>b;b++){var c=Q[b].id,d=Q[b].callbackFn,e={success:!1,id:c};if(X.pv[0]>0){var j=q(c);if(j)if(!u(Q[b].swfVersion)||X.wk&&X.wk<312)if(Q[b].expressInstall&&g()){var k={};k.data=Q[b].expressInstall,k.width=j.getAttribute("width")||"0",k.height=j.getAttribute("height")||"0",j.getAttribute("class")&&(k.styleclass=j.getAttribute("class")),j.getAttribute("align")&&(k.align=j.getAttribute("align"));for(var l={},m=j.getElementsByTagName("param"),n=m.length,o=0;n>o;o++)"movie"!=m[o].getAttribute("name").toLowerCase()&&(l[m[o].getAttribute("name")]=m[o].getAttribute("value"));h(k,l,c,d)}else i(j),d&&d(e);else w(c,!0),d&&(e.success=!0,e.ref=f(c),e.id=c,d(e))}else if(w(c,!0),d){var p=f(c);p&&typeof p.SetVariable!=E&&(e.success=!0,e.ref=p,e.id=p.id),d(e)}}}function f(a){var b=null,c=q(a);return c&&"OBJECT"===c.nodeName.toUpperCase()&&(b=typeof c.SetVariable!==E?c:c.getElementsByTagName(F)[0]||c),b}function g(){return!U&&u("6.0.65")&&(X.win||X.mac)&&!(X.wk&&X.wk<312)}function h(a,b,c,d){var e=q(c);if(c=p(c),U=!0,A=d||null,B={success:!1,id:c},e){"OBJECT"==e.nodeName.toUpperCase()?(y=j(e),z=null):(y=e,z=c),a.id=J,(typeof a.width==E||!/%$/.test(a.width)&&s(a.width)<310)&&(a.width="310"),(typeof a.height==E||!/%$/.test(a.height)&&s(a.height)<137)&&(a.height="137"),M.title=M.title.slice(0,47)+" - Flash Player Installation";var f=X.ie?"ActiveX":"PlugIn",g="MMredirectURL="+encodeURIComponent(L.location.toString().replace(/&/g,"%26"))+"&MMplayerType="+f+"&MMdoctitle="+M.title;if(typeof b.flashvars!=E?b.flashvars+="&"+g:b.flashvars=g,X.ie&&4!=e.readyState){var h=r("div");c+="SWFObjectNew",h.setAttribute("id",c),e.parentNode.insertBefore(h,e),e.style.display="none",n(e)}l(a,b,c)}}function i(a){if(X.ie&&4!=a.readyState){a.style.display="none";var b=r("div");a.parentNode.insertBefore(b,a),b.parentNode.replaceChild(j(a),b),n(a)}else a.parentNode.replaceChild(j(a),a)}function j(a){var b=r("div");if(X.win&&X.ie)b.innerHTML=a.innerHTML;else{var c=a.getElementsByTagName(F)[0];if(c){var d=c.childNodes;if(d)for(var e=d.length,f=0;e>f;f++)1==d[f].nodeType&&"PARAM"==d[f].nodeName||8==d[f].nodeType||b.appendChild(d[f].cloneNode(!0))}}return b}function k(a,b){var c=r("div");return c.innerHTML="<object classid='clsid:D27CDB6E-AE6D-11cf-96B8-444553540000'><param name='movie' value='"+a+"'>"+b+"</object>",c.firstChild}function l(a,b,c){var d,e=q(c);if(c=p(c),X.wk&&X.wk<312)return d;if(e){var f,g,h,i=r(X.ie?"div":F);typeof a.id==E&&(a.id=c);for(h in b)b.hasOwnProperty(h)&&"movie"!==h.toLowerCase()&&m(i,h,b[h]);X.ie&&(i=k(a.data,i.innerHTML));for(f in a)a.hasOwnProperty(f)&&(g=f.toLowerCase(),"styleclass"===g?i.setAttribute("class",a[f]):"classid"!==g&&"data"!==g&&i.setAttribute(f,a[f]));X.ie?R[R.length]=a.id:(i.setAttribute("type",I),i.setAttribute("data",a.data)),e.parentNode.replaceChild(i,e),d=i}return d}function m(a,b,c){var d=r("param");d.setAttribute("name",b),d.setAttribute("value",c),a.appendChild(d)}function n(a){var b=q(a);b&&"OBJECT"==b.nodeName.toUpperCase()&&(X.ie?(b.style.display="none",function c(){if(4==b.readyState){for(var a in b)"function"==typeof b[a]&&(b[a]=null);b.parentNode.removeChild(b)}else setTimeout(c,10)}()):b.parentNode.removeChild(b))}function o(a){return a&&a.nodeType&&1===a.nodeType}function p(a){return o(a)?a.id:a}function q(a){if(o(a))return a;var b=null;try{b=M.getElementById(a)}catch(c){}return b}function r(a){return M.createElement(a)}function s(a){return parseInt(a,10)}function t(a,b,c){a.attachEvent(b,c),S[S.length]=[a,b,c]}function u(a){a+="";var b=X.pv,c=a.split(".");return c[0]=s(c[0]),c[1]=s(c[1])||0,c[2]=s(c[2])||0,b[0]>c[0]||b[0]==c[0]&&b[1]>c[1]||b[0]==c[0]&&b[1]==c[1]&&b[2]>=c[2]?!0:!1}function v(a,b,c,d){var e=M.getElementsByTagName("head")[0];if(e){var f="string"==typeof c?c:"screen";if(d&&(C=null,D=null),!C||D!=f){var g=r("style");g.setAttribute("type","text/css"),g.setAttribute("media",f),C=e.appendChild(g),X.ie&&typeof M.styleSheets!=E&&M.styleSheets.length>0&&(C=M.styleSheets[M.styleSheets.length-1]),D=f}C&&(typeof C.addRule!=E?C.addRule(a,b):typeof M.createTextNode!=E&&C.appendChild(M.createTextNode(a+" {"+b+"}")))}}function w(a,b){if(V){var c=b?"visible":"hidden",d=q(a);T&&d?d.style.visibility=c:"string"==typeof a&&v("#"+a,"visibility:"+c)}}function x(a){var b=/[\\\"<>\.;]/,c=null!=b.exec(a);return c&&typeof encodeURIComponent!=E?encodeURIComponent(a):a}var y,z,A,B,C,D,E="undefined",F="object",G="Shockwave Flash",H="ShockwaveFlash.ShockwaveFlash",I="application/x-shockwave-flash",J="SWFObjectExprInst",K="onreadystatechange",L=window,M=document,N=navigator,O=!1,P=[],Q=[],R=[],S=[],T=!1,U=!1,V=!0,W=!1,X=function(){var a=typeof M.getElementById!=E&&typeof M.getElementsByTagName!=E&&typeof M.createElement!=E,b=N.userAgent.toLowerCase(),c=N.platform.toLowerCase(),d=c?/win/.test(c):/win/.test(b),e=c?/mac/.test(c):/mac/.test(b),f=/webkit/.test(b)?parseFloat(b.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,g="Microsoft Internet Explorer"===N.appName,h=[0,0,0],i=null;if(typeof N.plugins!=E&&typeof N.plugins[G]==F)i=N.plugins[G].description,i&&typeof N.mimeTypes!=E&&N.mimeTypes[I]&&N.mimeTypes[I].enabledPlugin&&(O=!0,g=!1,i=i.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),h[0]=s(i.replace(/^(.*)\..*$/,"$1")),h[1]=s(i.replace(/^.*\.(.*)\s.*$/,"$1")),h[2]=/[a-zA-Z]/.test(i)?s(i.replace(/^.*[a-zA-Z]+(.*)$/,"$1")):0);else if(typeof L.ActiveXObject!=E)try{var j=new ActiveXObject(H);j&&(i=j.GetVariable("$version"),i&&(g=!0,i=i.split(" ")[1].split(","),h=[s(i[0]),s(i[1]),s(i[2])]))}catch(k){}return{w3:a,pv:h,wk:f,ie:g,win:d,mac:e}}();(function(){X.w3&&((typeof M.readyState!=E&&"complete"==M.readyState||typeof M.readyState==E&&(M.getElementsByTagName("body")[0]||M.body))&&a(),T||(typeof M.addEventListener!=E&&M.addEventListener("DOMContentLoaded",a,!1),X.ie&&(M.attachEvent(K,function b(){"complete"==M.readyState&&(M.detachEvent(K,b),a())}),L==top&&!function c(){if(!T){try{M.documentElement.doScroll("left")}catch(b){return void setTimeout(c,0)}a()}}()),X.wk&&!function d(){return T?void 0:/loaded|complete/.test(M.readyState)?void a():void setTimeout(d,0)}()))})();P[0]=function(){O?d():e()};(function(){X.ie&&window.attachEvent("onunload",function(){for(var a=S.length,b=0;a>b;b++)S[b][0].detachEvent(S[b][1],S[b][2]);for(var c=R.length,d=0;c>d;d++)n(R[d]);for(var e in X)X[e]=null;X=null;for(var f in swfobject)swfobject[f]=null;swfobject=null})})();return{registerObject:function(a,b,c,d){if(X.w3&&a&&b){var e={};e.id=a,e.swfVersion=b,e.expressInstall=c,e.callbackFn=d,Q[Q.length]=e,w(a,!1)}else d&&d({success:!1,id:a})},getObjectById:function(a){return X.w3?f(a):void 0},embedSWF:function(a,c,d,e,f,i,j,k,m,n){var o=p(c),q={success:!1,id:o};X.w3&&!(X.wk&&X.wk<312)&&a&&c&&d&&e&&f?(w(o,!1),b(function(){d+="",e+="";var b={};if(m&&typeof m===F)for(var p in m)b[p]=m[p];b.data=a,b.width=d,b.height=e;var r={};if(k&&typeof k===F)for(var s in k)r[s]=k[s];if(j&&typeof j===F)for(var t in j)if(j.hasOwnProperty(t)){var v=W?encodeURIComponent(t):t,x=W?encodeURIComponent(j[t]):j[t];typeof r.flashvars!=E?r.flashvars+="&"+v+"="+x:r.flashvars=v+"="+x}if(u(f)){var y=l(b,r,c);b.id==o&&w(o,!0),q.success=!0,q.ref=y,q.id=y.id}else{if(i&&g())return b.data=i,void h(b,r,c,n);w(o,!0)}n&&n(q)})):n&&n(q)},switchOffAutoHideShow:function(){V=!1},enableUriEncoding:function(a){W=typeof a===E?!0:a},ua:X,getFlashPlayerVersion:function(){return{major:X.pv[0],minor:X.pv[1],release:X.pv[2]}},hasFlashPlayerVersion:u,createSWF:function(a,b,c){return X.w3?l(a,b,c):void 0},showExpressInstall:function(a,b,c,d){X.w3&&g()&&h(a,b,c,d)},removeSWF:function(a){X.w3&&n(a)},createCSS:function(a,b,c,d){X.w3&&v(a,b,c,d)},addDomLoadEvent:b,addLoadEvent:c,getQueryParamValue:function(a){var b=M.location.search||M.location.hash;if(b){if(/\?/.test(b)&&(b=b.split("?")[1]),null==a)return x(b);for(var c=b.split("&"),d=0;d<c.length;d++)if(c[d].substring(0,c[d].indexOf("="))==a)return x(c[d].substring(c[d].indexOf("=")+1))}return""},expressInstallCallback:function(){if(U){var a=q(J);a&&y&&(a.parentNode.replaceChild(y,a),z&&(w(z,!0),X.ie&&(y.style.display="block")),A&&A(B)),U=!1}},version:"2.3"}}();!function(a,b){"use strict";var c="",d="?",e="function",f="undefined",g="object",h="major",i="model",j="name",k="type",l="vendor",m="version",n="architecture",o="console",p="mobile",q="tablet",r="smarttv",s={has:function(a,b){return"string"==typeof a?-1!==b.toLowerCase().indexOf(a.toLowerCase()):void 0},lowerize:function(a){return a.toLowerCase()}},t={rgx:function(){for(var a,c,d,h,i,j,k,l=0,m=arguments;l<m.length;l+=2){var n=m[l],o=m[l+1];if(typeof a===f){a={};for(h in o)i=o[h],typeof i===g?a[i[0]]=b:a[i]=b}for(c=d=0;c<n.length;c++)if(j=n[c].exec(this.getUA())){for(h=0;h<o.length;h++)k=j[++d],i=o[h],typeof i===g&&i.length>0?2==i.length?typeof i[1]==e?a[i[0]]=i[1].call(this,k):a[i[0]]=i[1]:3==i.length?typeof i[1]!==e||i[1].exec&&i[1].test?a[i[0]]=k?k.replace(i[1],i[2]):b:a[i[0]]=k?i[1].call(this,k,i[2]):b:4==i.length&&(a[i[0]]=k?i[3].call(this,k.replace(i[1],i[2])):b):a[i]=k?k:b;break}if(j)break}return a},str:function(a,c){for(var e in c)if(typeof c[e]===g&&c[e].length>0){for(var f=0;f<c[e].length;f++)if(s.has(c[e][f],a))return e===d?b:e}else if(s.has(c[e],a))return e===d?b:e;return a}},u={browser:{oldsafari:{major:{1:["/8","/1","/3"],2:"/4","?":"/"},version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",RT:"ARM"}}}},v={browser:[[/APP-([\w\s-\d]+)\/((\d+)?[\w\.]+)/i],[j,m,h],[/(opera\smini)\/((\d+)?[\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/((\d+)?[\w\.-]+)/i,/(opera).+version\/((\d+)?[\w\.]+)/i,/(opera)[\/\s]+((\d+)?[\w\.]+)/i],[j,m,h],[/\s(opr)\/((\d+)?[\w\.]+)/i],[[j,"Opera"],m,h],[/(kindle)\/((\d+)?[\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?((\d+)?[\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?((\d+)?[\w\.]*)/i,/(?:ms|\()(ie)\s((\d+)?[\w\.]+)/i,/(rekonq)((?:\/)[\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron)\/((\d+)?[\w\.-]+)/i],[j,m,h],[/(trident).+rv[:\s]((\d+)?[\w\.]+).+like\sgecko/i],[[j,"IE"],m,h],[/(yabrowser)\/((\d+)?[\w\.]+)/i],[[j,"Yandex"],m,h],[/(comodo_dragon)\/((\d+)?[\w\.]+)/i],[[j,/_/g," "],m,h],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?((\d+)?[\w\.]+)/i],[j,m,h],[/(dolfin)\/((\d+)?[\w\.]+)/i],[[j,"Dolphin"],m,h],[/((?:android.+)crmo|crios)\/((\d+)?[\w\.]+)/i],[[j,"Chrome"],m,h],[/version\/((\d+)?[\w\.]+).+?mobile\/\w+\s(safari)/i],[m,h,[j,"Mobile Safari"]],[/version\/((\d+)?[\w\.]+).+?(mobile\s?safari|safari)/i],[m,h,j],[/webkit.+?(mobile\s?safari|safari)((\/[\w\.]+))/i],[j,[h,t.str,u.browser.oldsafari.major],[m,t.str,u.browser.oldsafari.version]],[/(konqueror)\/((\d+)?[\w\.]+)/i,/(webkit|khtml)\/((\d+)?[\w\.]+)/i],[j,m,h],[/(navigator|netscape)\/((\d+)?[\w\.-]+)/i],[[j,"Netscape"],m,h],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?((\d+)?[\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/((\d+)?[\w\.-]+)/i,/(mozilla)\/((\d+)?[\w\.]+).+rv\:.+gecko\/\d+/i,/(uc\s?browser|polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|qqbrowser)[\/\s]?((\d+)?[\w\.]+)/i,/(links)\s\(((\d+)?[\w\.]+)/i,/(gobrowser)\/?((\d+)?[\w\.]+)*/i,/(ice\s?browser)\/v?((\d+)?[\w\._]+)/i,/(mosaic)[\/\s]((\d+)?[\w\.]+)/i],[j,m,h],[/(apple(?:coremedia|))\/((\d+)[\w\._]+)/i,/(coremedia) v((\d+)[\w\._]+)/i],[j,m,h],[/(aqualung|lyssna|bsplayer)\/((\d+)*[\w\.-]+)/i],[j,m],[/(ares|ossproxy)\s((\d+)[\w\.-]+)/i],[j,m,h],[/(audacious|audimusicstream|amarok|bass|core|dalvik|gnomemplayer|music on console|nsplayer|psp-internetradioplayer|videos)\/((\d+)[\w\.-]+)/i,/(clementine|music player daemon)\s((\d+)[\w\.-]+)/i,/(lg player|nexplayer)\s((\d+)[\d\.]+)/i,/player\/(nexplayer|lg player)\s((\d+)[\w\.-]+)/i],[j,m,h],[/(nexplayer)\s((\d+)[\w\.-]+)/i],[j,m,h],[/(flrp)\/((\d+)[\w\.-]+)/i],[[j,"Flip Player"],m,h],[/(fstream|nativehost|queryseekspider|ia-archiver|facebookexternalhit)/i],[j],[/(gstreamer) souphttpsrc (?:\([^\)]+\)){0,1} libsoup\/((\d+)[\w\.-]+)/i],[j,m,h],[/(htc streaming player)\s[\w_]+\s\/\s((\d+)[\d\.]+)/i,/(java|python-urllib|python-requests|wget|libcurl)\/((\d+)[\w\.-_]+)/i,/(lavf)((\d+)[\d\.]+)/i],[j,m,h],[/(htc_one_s)\/((\d+)[\d\.]+)/i],[[j,/_/g," "],m,h],[/(mplayer)(?:\s|\/)(?:(?:sherpya-){0,1}svn)(?:-|\s)(r\d+(?:-\d+[\w\.-]+){0,1})/i],[j,m],[/(mplayer)(?:\s|\/|[unkow-]+)((\d+)[\w\.-]+)/i],[j,m,h],[/(mplayer)/i,/(yourmuze)/i,/(media player classic|nero showtime)/i],[j],[/(nero (?:home|scout))\/((\d+)[\w\.-]+)/i],[j,m,h],[/(nokia\d+)\/((\d+)[\w\.-]+)/i],[j,m,h],[/\s(songbird)\/((\d+)[\w\.-]+)/i],[j,m,h],[/(winamp)3 version ((\d+)[\w\.-]+)/i,/(winamp)\s((\d+)[\w\.-]+)/i,/(winamp)mpeg\/((\d+)[\w\.-]+)/i],[j,m,h],[/(ocms-bot|tapinradio|tunein radio|unknown|winamp|inlight radio)/i],[j],[/(quicktime|rma|radioapp|radioclientapplication|soundtap|totem|stagefright|streamium)\/((\d+)[\w\.-]+)/i],[j,m,h],[/(smp)((\d+)[\d\.]+)/i],[j,m,h],[/(vlc) media player - version ((\d+)[\w\.]+)/i,/(vlc)\/((\d+)[\w\.-]+)/i,/(xbmc|gvfs|xine|xmms|irapp)\/((\d+)[\w\.-]+)/i,/(foobar2000)\/((\d+)[\d\.]+)/i,/(itunes)\/((\d+)[\d\.]+)/i],[j,m,h],[/(wmplayer)\/((\d+)[\w\.-]+)/i,/(windows-media-player)\/((\d+)[\w\.-]+)/i],[[j,/-/g," "],m,h],[/windows\/((\d+)[\w\.-]+) upnp\/[\d\.]+ dlnadoc\/[\d\.]+ (home media server)/i],[m,h,[j,"Windows"]],[/(com\.riseupradioalarm)\/((\d+)[\d\.]*)/i],[j,m,h],[/(rad.io)\s((\d+)[\d\.]+)/i,/(radio.(?:de|at|fr))\s((\d+)[\d\.]+)/i],[[j,"rad.io"],m,h]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[n,"amd64"]],[/(ia32(?=;))/i],[[n,s.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[n,"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[[n,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[n,/ower/,"",s.lowerize]],[/(sun4\w)[;\)]/i],[[n,"sparc"]],[/(ia64(?=;)|68k(?=\))|arm(?=v\d+;)|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[n,s.lowerize]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[i,l,[k,q]],[/applecoremedia\/[\w\.]+ \((ipad)/],[i,[l,"Apple"],[k,q]],[/(apple\s{0,1}tv)/i],[[i,"Apple TV"],[l,"Apple"]],[/(hp).+(touchpad)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[l,i,[k,q]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[i,[l,"Amazon"],[k,q]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[i,l,[k,p]],[/\((ip[honed|\s\w*]+);/i],[i,[l,"Apple"],[k,p]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[l,i,[k,p]],[/\((bb10);\s(\w+)/i],[[l,"BlackBerry"],i,[k,p]],[/android.+((transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7))/i],[[l,"Asus"],i,[k,q]],[/(sony)\s(tablet\s[ps])/i],[l,i,[k,q]],[/(nintendo)\s([wids3u]+)/i],[l,i,[k,o]],[/((playstation)\s[3portablevi]+)/i],[[l,"Sony"],i,[k,o]],[/(sprint\s(\w+))/i],[[l,t.str,u.device.sprint.vendor],[i,t.str,u.device.sprint.model],[k,p]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[l,[i,/_/g," "],[k,p]],[/\s((milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?))[\w\s]+build\//i,/(mot)[\s-]?(\w+)*/i],[[l,"Motorola"],i,[k,p]],[/android.+\s((mz60\d|xoom[\s2]{0,2}))\sbuild\//i],[[l,"Motorola"],i,[k,q]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n8000|sgh-t8[56]9|nexus 10))/i],[[l,"Samsung"],i,[k,q]],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[l,"Samsung"],i,[k,p]],[/(sie)-(\w+)*/i],[[l,"Siemens"],i,[k,p]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[l,"Nokia"],i,[k,p]],[/android\s3\.[\s\w-;]{10}((a\d{3}))/i],[[l,"Acer"],i,[k,q]],[/android\s3\.[\s\w-;]{10}(lg?)-([06cv9]{3,4})/i],[[l,"LG"],i,[k,q]],[/((nexus\s[45]))/i,/(lg)[e;\s-\/]+(\w+)*/i],[[l,"LG"],i,[k,p]],[/android.+((ideatab[a-z0-9\-\s]+))/i],[[l,"Lenovo"],i,[k,q]],[/(lg) netcast\.tv/i],[l,[k,r]],[/(mobile|tablet);.+rv\:.+gecko\//i],[k,l,i]],engine:[[/APP-([\w\s-\d]+)\/((\d+)?[\w\.]+)/i],[[j,"Mobile-App"],m],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[j,m],[/rv\:([\w\.]+).*(gecko)/i],[m,j]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[j,m],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*|windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[j,[m,t.str,u.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[j,"Windows"],[m,t.str,u.os.windows.version]],[/\((bb)(10);/i],[[j,"BlackBerry"],m],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)\/([\w\.]+)/i,/(android|webos|palm\os|qnx|bada|rim\stablet\sos|meego)[\/\s-]?([\w\.]+)*/i],[j,m],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[j,"Symbian"],m],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[j,"Firefox OS"],m],[/(nintendo|playstation)\s([wids3portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk)[\/\s-]?([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[j,m],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[j,"Chromium OS"],m],[/(sunos)\s?([\w\.]+\d)*/i],[[j,"Solaris"],m],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[j,m],[/(ip[honead]+)(?:.*os\s*([\w]+)*\slike\smac|;\sopera)/i],[[j,"iOS"],[m,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i],[j,[m,/_/g,"."]],[/(haiku)\s(\w+)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(macintosh|mac(?=_powerpc)|plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos)/i,/(unix)\s?([\w\.]+)*/i],[j,m]]},w=function(b){var d=b||(a&&a.navigator&&a.navigator.userAgent?a.navigator.userAgent:c);return this instanceof w?(this.getBrowser=function(){return t.rgx.apply(this,v.browser)},this.getCPU=function(){return t.rgx.apply(this,v.cpu)},this.getDevice=function(){return t.rgx.apply(this,v.device)},this.getEngine=function(){return t.rgx.apply(this,v.engine)},this.getOS=function(){return t.rgx.apply(this,v.os)},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return d},this.setUA=function(a){return d=a,this},void this.setUA(d)):new w(b).getResult()};if(typeof exports!==f)typeof module!==f&&module.exports&&(exports=module.exports=w),exports.UAParser=w;else if(a.UAParser=w,typeof define===e&&define.amd&&define(function(){return w}),typeof a.jQuery!==f){var x=a.jQuery,y=new w;x.ua=y.getResult(),x.ua.get=function(){return y.getUA()},x.ua.set=function(a){y.setUA(a);var b=y.getResult();for(var c in b)x.ua[c]=b[c]}}}(this),/*!
 * utils.js
*/
function(){"use strict";function a(){}a.version="2.32.1",a.betaShows=["rookie blue","under the dome"],a.disregardedErrors=["SharedObject.Flush.Failed"],a.fatalErrors=[{code:"1034",actions:"init,feedLoadStart,available"}],a.errorsToInvestigate=["#1034","#1009","#1502","#2048","#3343","#1132","#1095","Invalid"],a.adSlotsIds={},a.adSlots={},a.videoPlayerInstanceName="",a.getVideoPlayerInstanceName=function(){return this.videoPlayerInstanceName},a.location=function(){return window.location},a.navigator=function(){return navigator},a.userAgent=function(){return this.navigator().userAgent},a.readCookie=function(a){for(var b=a+"=",c=document.cookie.split(";"),d=0;d<c.length;d++){for(var e=c[d];" "==e.charAt(0);)e=e.substring(1,e.length);if(0===e.indexOf(b))return e.substring(b.length,e.length)}return null},a.writeCookie=function(a,b,c,d){var e="",f=[],g="";if(c){var h=new Date;h.setTime(h.getTime()+(d?c:24*c*60*60*1e3)),e="; expires="+h.toGMTString()}f=this.location().hostname.split("."),g+="."+f.slice(-2).join("."),document.cookie=a+"="+b+e+"; path=/; domain="+g},a.eraseCookie=function(a){this.writeCookie(a,"",-1)},a.detectIE8=function(a){var b;b=this.userAgent().toLowerCase(),-1!=b.indexOf("msie")&&parseInt(b.split("msie")[1],10)<9&&(a.isIE8=!0,jQuery("body").addClass("shawVideo_ie8"))},a.touchDetection=function(){this.isTouch()&&!this.isWindows8()&&jQuery("body").addClass("shawVideo_touch")},a.mixedContentDetection=function(){var a;a=swfobject.getFlashPlayerVersion().major,a<this.getRequiredFlashVersion()&&(this.isTouch()?jQuery("body").addClass("shawVideo_html5"):jQuery("body").addClass("shawVideo_noFlash"))},a.isTouch=function(){return"ontouchstart"in window||this.navigator().msMaxTouchPoints>1||this.navigator().maxTouchPoints>1},a.isWindows8=function(){var a=/Windows NT 6.(2|3)/i;return a.test(this.userAgent())},a.isMSEdge=function(){var a=/Edge\/12\..+/i;return a.test(this.userAgent())},a.isAndroid=function(){return this.userAgent().toLowerCase().indexOf("android")>=0},a.isFirefox=function(){var a=/Firefox/i;return a.test(this.userAgent())},a.isChromebook=function(){var a=/CrOS.+Chrome/;return a.test(this.userAgent())},a.buildMixedContentModal=function(){var a;a=["<div id='shawVideo_mixedContentModal' class='shawVideo_modalContainer'><div class='shawVideo_modalContent'><p>Sorry this video is not available for Web playback on mobile devices.</p><p> Download the Global Go app or visit <a href='http://www.globaltv.com' target='_blank'>GlobalTV.com</a> on your computer to enjoy the full catalog.</p><span class='shawVideo_modalClose'>&times;</span></div></div>"],jQuery("body").append(a),jQuery("#shawVideo_mixedContentModal").find(".shawVideo_modalClose").click(function(){jQuery("#shawVideo_mixedContentModal").hide()})},a.mixedContentMessageAlert=function(a){return jQuery("#shawVideo_mixedContentModal").show(),!1},a.welcomeMessageModal=function(){var a=[],b=jQuery.Deferred();return"true"===this.readCookie("shaw_welcomeMessage")?(b.resolve(),b):(this.writeCookie("shaw_welcomeMessage","true",14),a=['<div id="shawVideo_welcomeModalContainer" class="shawVideo_modalContainer">','<div class="shawVideo_modalContent">','<h3 class="shawVideo_modalTitle">Welcome!</h3>',"<p>","You've been chosen to participate in a preview of the new video experience for GlobalTV.com (available for selected shows only).  ",'Enjoy the sneak peak and <a class="shawVideo_surveyLink" href="http://7842441.polldaddy.com/s/tell-us-what-you-think" target="_blank">let us know</a> what you think.  We really appreciate your feedback.',"</p>",'<span class="shawVideo_modalClose">X</span>','<button class="shawVideo_modalBtn" type="button">Ok</button>',"</div>","</div>"],jQuery("body").append(a.join("")),jQuery("#shawVideo_welcomeModalContainer").show(),jQuery("#shawVideo_welcomeModalContainer").find(".shawVideo_modalClose, .shawVideo_modalBtn").click(function(){jQuery("#shawVideo_welcomeModalContainer").hide(),b.resolve()}),b)},a.convertSecondsToMinutes=function(a){var b,c;return b=Math.floor(a/60),c=Math.floor(a-60*b),c=("0"+c).slice(-2),b+":"+c},a.convertEpochToMonthDateYear=function(a,b,c){var d,e,f,g,h;return g=new Date(a),b&&(g=new Date,h=6e4*(-240+g.getTimezoneOffset()),g.setTime(a+h)),d=["January","February","March","April","May","June","July","August","September","October","November","December"],e=["1","2","3","4","5","6","7","8","9","10","11","12"],f="",c===!0?(f+=e[g.getMonth()]+"/",f+=g.getDate()+"/",f+=g.getFullYear().toString().substring(2)):(f+=d[g.getMonth()]+" ",f+=g.getDate()+", ",f+=g.getFullYear()),f},a.populateEndOfClip=function(a,b,c){var d,e,f,g,h;return c=c?c:5,e=jQuery('li[data-video_id="'+a+'"]'),d=[],f="episode"===b?jQuery(e).prevAll():jQuery(e).nextAll(),f.each(function(){return d.length<c?void d.push({id:jQuery(this).data("video_id").toString(),url:jQuery(this).data("video_url").toString()}):!1}),("episode"!==b||this.videoPlayerInstanceName&&!window[this.videoPlayerInstanceName].playerSetting.eocCrossPromoEnabled)&&(g=jQuery(".shawVideo_drawerList").length,jQuery(".shawVideo_drawerList").each(function(){return d.length===c?!1:void((0===jQuery(this).find(".shawVideo_nowPlaying").length||1===g)&&jQuery(this).children("[data-video_id]").each(function(){return h=jQuery(this).data("video_id").toString(),h!==a&&d.indexOf(h)<0&&d.push({id:h,url:jQuery(this).data("video_url").toString()}),d.length===c?!1:void 0}))})),d},a.refreshDisplayAds=function(a){var b,c,d,e,f,g,h=null,i=[];this.log("refreshDisplayAds - "+(a?a.length:0)+" Companion Ads");for(e in this.adSlots){for(c=this.adSlots[e],h=!1,f=jQuery("#"+e),g=0;g<a.length;g++)b=a[g],d=b.width+","+b.height,c.sizes.toString().indexOf(d)>=0&&f.is(":visible")&&(this.addBannerToSlot(e,b.resourceType,b.width,b.height,b.bannerData),h=!0);!h&&f.is(":visible")&&i.push(c.slot)}i.length>0&&(this.log("Refresh "+i.length+" Free Slots: "+i),"undefined"!=typeof headertag&&"function"==typeof headertag.retrieve_demand?headertag.retrieve_demand(function(){googletag.pubads().refresh(i,{changeCorrelator:!0})}):googletag.pubads().refresh(i,{changeCorrelator:!0}))},a.updateCorrelator=function(){googletag.pubads().updateCorrelator()},a.addBannerToSlot=function(a,b,c,d,e){var f=document.getElementById(a);switch(this.log("add banner to slot: "+jQuery(f).attr("id")+"\n DATA: -----------\n"+e+"\n Static URL: -----------\n"),b){case"html":f.innerHTML="";var g=document.createElement("iframe");g.width=c,g.height=d,g.scrolling="no",g.marginWidth="0",g.marginHeight="0",g.frameBorder="0",g.style.border="0px",g.style.margin="0px",g.style.padding="0px",g.style.verticalAlign="bottom",g.src="about:blank",f.appendChild(g),g.contentWindow.document.open("text/html","replace"),g.contentWindow.document.write(e),g.contentWindow.document.close();break;case"iframe":f.innerHTML="<iframe src='"+e+"' width='100%' height='100%'></iframe>"}},a.nowPlayingOnClick=function(a){jQuery(".shawVideo_nowPlaying").removeClass("shawVideo_nowPlaying"),jQuery('*[data-video_id="'+a+'"]').addClass("shawVideo_nowPlaying")},a.getRestrictions=function(){return shawVideo_restrictions},a.requiresAuthentication=function(){return"undefined"==typeof shawVideo_restrictions?!1:!0},a.isAuthenticatedUser=function(){return"1"===this.readCookie("authN")?!0:!1},a.authorize=function(){GlobalAuth.getAuthorization()},a.readAuthToken=function(){var a=this.readCookie("authT");return null!==a&&a.length>0?{success:!0,token:a}:{success:!1}},a.clearAuthToken=function(){this.eraseCookie("authT")},a.updateMetadata=function(a){VideoPlayer.drawMetadata(a[0],"flash")},a.alertMe=function(){alert("This feature is not available in this prototype. This feature will be implemented on client sites. Thank you for participating in the test!")},a.openSocialShareWindow=function(a){window.open(a,"_blank","toolbar = yes, scrollbars=no, resizable=no, width=600, height=550")},a.saveNextVideo=function(a){var b=a.targetUrl?a.targetUrl:this.convertUrlToAbsolute(this.generateVideoUrl(a));this.writeCookie("targetVideoUrl",b),this.writeCookie("authPrev",b)},a.generateVideoUrl=function(a,b){if(a.targetUrl)return a.targetUrl;var c=b?b:shawVideo_targetRelease.hrefSchema,d={showName:a.show,contentID:a.contentId,episodeTitle:a.title,clipType:a.clipType};return this.buildHref(d,c)},a.getPagePath=function(a){var b,c,d;return b="undefined"!=typeof a&&a>0?new RegExp("((/[a-zA-Z0-9-_]+){1,"+a+"})"):new RegExp("/[/a-zA-Z0-9-_]+"),c=window.location.pathname.match(b),d=c&&c.length>0?c[0].replace(/\/$/,""):"/homepage"},a.getAdIUPath=function(){return this.getPagePath()},a.buildHref=function(a,b){var c,d;d=b,c={"{{show-name}}":this.convertToSlug(a.showName),"{{showname}}":this.convertToLowercaseOneWord(a.showName),"{{contentID}}":a.contentID,"{{episode-title}}":this.convertToSlug(a.episodeTitle),"{{episodetitle}}":this.convertToLowercaseOneWord(a.episodeTitle),"{{clip-type}}":a.clipType?this.convertToSlug(a.clipType):"other","{{cliptype}}":a.clipType?this.convertToLowercaseOneWord(a.clipType):"other"};for(var e in c)d=d.replace(e,c[e]);return d=d.replace(/[^:](\/\/)/g,"/")},a.convertUrlToAbsolute=function(a){var b,c,d,e;return b=new RegExp("^(?:[a-z]+:)?//","i"),c=b.test(a),c?a:(d=this.location().host,d="http://"+d,e=d+a)},a.getVersion=function(){return this.version},a.saveProgress=function(a,b){var c=10,d=this.removeSavedProgress(a,!0),e=d?d.split(","):[];e.length===c&&e.shift(),e.push(a+"="+b),d=e.join(","),this.log("Progress: "+d),this.writeCookie("shawVideoWatchProgress",d,1)},a.removeSavedProgress=function(a,b){var c=this.readCookie("shawVideoWatchProgress");return c=c?c.replace(new RegExp("^"+a+"=[0-9]*|,"+a+"=[0-9]*"),""):"",b||this.writeCookie("shawVideoWatchProgress",c,1),c},a.getSavedProgress=function(a){var b=this.readCookie("shawVideoWatchProgress"),c=new RegExp("^"+a+"=[0-9]*|,"+a+"=[0-9]*"),d=c.exec(b);return d?d[0].split("=")[1]:""},a.saveSubsequentView=function(){this.writeCookie("shawVideoBinge",!0,6e4,!0)},a.clearSubsequentView=function(){this.eraseCookie("shawVideoBinge")},a.trackError=function(a,b,c,d){if(!this._isErrorOmitted(a)){var e,f="[Error] ",g=255,h="",i=a.match(/(Invalid)|#([0-9]+)/g),j=!1;if(a=a.replace(/(bubbles|cancelable|eventPhase)=([^=]+)\s/g,""),f+=a,f.length<g&&b&&b.length>0){for(f+="|actions=",e=b.length-1;e>=0&&f.length+h.length+b[e].length<g;e--)h=b[e]+(""!==h?",":"")+h;f+=h}if(this._isErrorFatal(a,h)&&this.lockToFallbackPlayer("Error",!1,7),f=f.substring(0,Math.min(f.length,g)),ShawVideoAnalytics.sendEvent(f,{eVar40:f},[]),i&&i[0]&&c){j=!0;for(e in c)this.sendSplunkLogs(c[e],d)}return j}},a.sendSplunkLogs=function(a,b){this.log("send splunk: "+a),jQuery.ajax({type:"POST",url:"http://common.smdg.ca/videoerror/log",data:"log="+a,dataType:"text"})},a.lockToFallbackPlayer=function(a,b,c){this.writeCookie("shawVideoPlayerFallback",a,c),b&&window.location.reload()},a.trackErrorInOptimizely=function(a){window.optimizely&&window.optimizely.push(["trackEvent",a])},a._isErrorOmitted=function(a){for(var b=0;b<this.disregardedErrors.length;b++)if(a.toLowerCase().indexOf(this.disregardedErrors[b].toLowerCase())>=0)return!0;return!1},a._isErrorFatal=function(a,b){if(!this.fatalErrors)return!1;for(var c=0;c<this.fatalErrors.length;c++)if(a.toLowerCase().indexOf(this.fatalErrors[c].code)>0&&b===this.fatalErrors[c].actions)return!0;return!1},a._detectFlashCrash=function(a){var b=!1,c="[Flash crashed] ";this.log("detect flash crash");try{b=!!document.getElementById(window[this.videoPlayerInstanceName].player.FLASH_PLAYER_OBJECT_ID).isAlive()}catch(d){}b||(c+=a,ShawVideoAnalytics.sendEvent(c,{eVar40:c},[]))},a.log=function(a){(this.location().href.indexOf("debug=true")>0||VideoPlayerUtils.readCookie("shawVideoDebugEnabled"))&&console.log(a)},a.convertToSlug=function(a){return a?a.toLowerCase().replace(/[^\w\- ]+/g,"").replace(/ +/g,"-").replace(/[\-]+/g,"-"):""},a.convertToLowercaseOneWord=function(a){return a?a.toLowerCase().replace(/[^\w\- ]+/g,"").replace(/ +/g,""):""},a.truncateString=function(a,b){var c="";return c=a.substring(0,b)+"..."},a.htmlEscape=function(a){return a?a.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):""},a.getRootPath=function(a){var b=this.location().hostname,c=this.version+"/",d=a?"http://":"https://",e="static.smdg.ca/videodrome/",f=a?0:1;return parseInt(this.location().port,10)>29999&&(c="/",e=b+":"+(parseInt(this.location().port,10)+f)),d+e+c},a.generateAAMParams=function(){var a="",b=this.readCookie("shawgpt"),c=this.readCookie("aam_uuid");return b&&c&&(a=b.replace("aam","audience")+escape("&u="+c)),this.log("generateAAMParams: "+b+" | "+c+" | "+a),a},a.isAuthStatusObtained=function(){return this.log("isAuthStatusObtained? authNProcess? "+this.readCookie("authNProcess")),!this.readCookie("authNProcess")},a.getABTestCampaign=function(){var a="";return window.abValues&&window.abValues.campaign&&(a=window.abValues.campaign),a},a.generateCustomAdParams=function(){var a,b,c,d,e="prod";return/\.uat\.smdg/.test(window.location.host)?e="uat":/\.dev|local\.smdg/.test(window.location.host)&&(e="dev"),a=this.generateAAMParams(),b=escape("environ="+e)+(a?escape("&")+a:""),c=VideoPlayerUtils.requiresAuthentication()&&VideoPlayerUtils.isAuthenticatedUser()?"auth":"",window.abValues&&window.abValues.campaign&&(d=window.abValues.campaign,c=window.abValues.customParam?window.abValues.customParam:c),/^bingeReward/.test(d)&&VideoPlayerUtils.readCookie("shawVideoBinge")&&(c="omitPreroll"),b=c?b+escape("&adcall="+c):b,b=d?b+escape("&abtest="+d):b},a.getRequiredFlashVersion=function(){var a=16;return this.isFirefox()&&(a=20),a},window.VideoPlayerUtils=a}(),/*!
 * videoplayer.js
*/
function(){"use strict";function a(a){this.player=null,this.playerSetting=null,this.initialized=!1,this.metadataLoadAttempted=!1,this._init(a)}a.prototype.insert=function(){VideoPlayerUtils.videoPlayerInstanceName=this._getInstanceName(),this.initialized?this.playerSetting.shouldDrawMetaData?this._loadMetadata():(VideoPlayerUtils.log("Metadata provided, inject right away! "+this.playerSetting.content),this._onMetadataLoaded(this.playerSetting.metadata)):$("#"+this.htmlId).html("<p>player incorrectly init'd, unable to insert</p>"),this._scrollToPlayer(this.playerSetting.scrollDistanceFromTop),"undefined"==typeof shawVideo_restrictions?this.checkRestrictions=!1:this.checkRestrictions=!0},a.prototype.remove=function(){},a.prototype.showFeedbackForm=function(){$(".feedbackFormButton").click()},a.prototype.drawMetadata=function(a,b){$("#shawVideo_videoMetaArea").is(":hidden")&&$("#shawVideo_videoMetaArea").show();var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t;if("flash"===b?(p=a.availableDate,i=VideoPlayerUtils.convertSecondsToMinutes(a.duration),l=VideoPlayerUtils.convertEpochToMonthDateYear(a.expirationDate),d=a.season,e=a.episode,j=a.ratings,m=a.restrictionId):(p=a.media$availableDate,i=VideoPlayerUtils.convertSecondsToMinutes(a.media$content[0].plfile$duration),l=VideoPlayerUtils.convertEpochToMonthDateYear(a.media$expirationDate),d=a.pl1$season,e=a.pl1$episode,f=a.pl1$show?a.pl1$show:"",j=a.media$ratings,m=a.plmedia$restrictionId),o=a.pubDate,c=a.title,h=a.description,g=VideoPlayerUtils.convertEpochToMonthDateYear(o,!0),$("#shawVideo_metaClipName").html(c),$("#shawVideo_metaClipDuration").html(i),$("#shawVideo_metaAvailibleDate").html(g),$("#shawVideo_metaRating").html(j),$("#shawVideo_episodeDescription").html(h),$("#shawVideo_metaAuthDates #auth em").html(l),new Date(l).getTime()<0&&$("#shawVideo_metaAuthDates").hide(),a.plmedia$restrictionId){for(var u=0;u<shawVideo_restrictions.length;++u)if(shawVideo_restrictions[u].id==m){n=shawVideo_restrictions[u];break}k=parseInt(n.relativeEnforcementStart,10)>0?VideoPlayerUtils.convertEpochToMonthDateYear(p+1e3*parseInt(n.relativeEnforcementStart,10)):l,$("#shawVideo_metaAuthDates #nonAuth em").html(k)}else $("#shawVideo_metaAuthDates #nonAuth em").html(l);var v="";d&&(v+='<span id="shawVideo_metaSeasonNumber">Season '+d+"</span>"),e&&(v+='<span id="shawVideo_metaEpisodeNumber">Episode '+e+"</span>"),v+='<span id="shawVideo_metaClipDuration">'+i+"</span>",v+='<span id="shawVideo_metaFirstAired">'+g+"</span>",j&&j.length>0&&(v+='<span id="shawVideo_metaRating">'+j[0].rating+"</span>"),$("#shawVideo_metaSeasonInfo").html(v),q=encodeURIComponent("http://www.globaltv.com/"+f.toLowerCase().replace(/ /g,"")+"/video/watch.html?v="+this.playerSetting.contentId),t=encodeURIComponent(c),t=t.replace(/'/g,""),s=encodeURIComponent(f),$(".shawVideoIcon-facebook_icon").html("<a href='http://facebook.com/sharer.php?u="+q+"'>Share On Facebook</a>"),$(".shawVideoIcon-google_icon").html("<a href='https://plus.google.com/share?url="+q+"'>Share On Google+</a>"),$(".shawVideoIcon-email_icon").html("<a href='http://common.farm1.smdg.ca/Forms/EmailFriend?shareURL="+r+"'>Share On Google+</a>"),e?$(".shawVideoIcon-twitter_icon").html("<a href='https://twitter.com/intent/tweet?text="+s+"%20Video%20%7C%20"+t+" %7C Episode"+e+"%20%7C%20Globaltv.com%20%7C%20"+q+"'>Twitter</a>"):$(".shawVideoIcon-twitter_icon").html("<a href='https://twitter.com/intent/tweet?text="+s+"%20Video%20%7C%20"+t+"%20%7C%20Globaltv.com%20%7C%20"+q+"'>Twitter</a>")},window.VideoPlayer=a,a.prototype._init=function(a){this.playerSetting=a,this.initialized=!0},a.prototype._getInstanceName=function(){var a;for(a in window)if("localStorage"!=a&&window[a]==this)return a},a.prototype._loadMetadata=function(){VideoPlayerUtils.log("load metadata for contentId: "+this.playerSetting.contentId);var a=this.playerSetting.metadataUrl.split("{contentid}").join(this.playerSetting.contentId);this.metadataLoadAttempted=!0,jQuery.ajaxSetup({cache:"true"}),jQuery.getJSON(a,jQuery.proxy(this._onMetadataLoaded,this)),jQuery.ajaxSetup({cache:"false"})},a.prototype._onMetadataLoaded=function(a){var b,c,d,e,f,g,h,i,j;if(b=(new Date).getTime(),i="unrestricted",g=a.allowHTML5,h=a.restrictionId,a){if(VideoPlayerUtils.log("MetadataLoaded"),a.entries&&a.entries.length>0&&(this.playerSetting.content=a.entries[0],g=a.entries[0].pl1$allowHTML5?a.entries[0].pl1$allowHTML5:!1,h=a.entries[0].plmedia$restrictionId.split("/").pop()),this.checkRestrictions===!0){for(j=0;j<shawVideo_restrictions.length;j++)h==shawVideo_restrictions[j].id.split("/").pop()&&(d=shawVideo_restrictions[j].relativeEnforcementStart,e=shawVideo_restrictions[j].relativeEnforcementEnd);a.entries&&a.entries.length>0&&(c=a.entries[0].media$availableDate,f=a.entries[0].media$availableDate+1e3*d),d>0&&b>f&&(i="restricted")}if("boolean"==typeof g&&g&&"unrestricted"===i&&(swfobject.getFlashPlayerVersion().major<=0&&(VideoPlayerUtils.isTouch()||this.playerSetting.allowDesktopFallback)||VideoPlayerUtils.isAndroid())){$("#"+this.playerSetting.htmlId).addClass("shawVideo_Html5Fallback"),this.player=new ShawVideoPlayer(this.playerSetting.playerName,!0),this.player.googleCmsId=this.playerSetting.googleCmsId,this.player.rootCategory=this.playerSetting.rootCategory,this.player.comscoreC3=this.playerSetting.comscoreC3,this.player.comscoreC4=this.playerSetting.comscoreC4,this.player.omnitureAccount=this.playerSetting.omnitureAccount,this.player.omnitureNamespace=this.playerSetting.omnitureNamespace,this.player.omnitureTrackingServer=this.playerSetting.omnitureTrackingServer,this.player.autoPlay=this.playerSetting.autoPlay,this.player.platformAccount=this.playerSetting.platformAccount,this.player.feedId=this.playerSetting.feedId,this.player.videoSMILUrl=this.playerSetting.videoSMILUrl,this.player.metadataUrl=this.playerSetting.metadataUrl,this.player.disabledFullscreen=this.playerSetting.disabledFullscreen;var k="&cust_params="+VideoPlayerUtils.generateCustomAdParams();/cust_params=/.test(this.playerSetting.googleIMA3Url)?this.player.googleIMA3Url=this.playerSetting.googleIMA3Url.replace("&cust_params=",k+escape("&")):this.player.googleIMA3Url=this.playerSetting.googleIMA3Url+k,this.playerSetting.eocCountdownSeconds>=0&&(this.player.upNextCountdown=this.playerSetting.eocCountdownSeconds),this.player.setContentId(this.playerSetting.contentId,$.proxy(this._playerLoadCallbackAndInject,this)),this.playerSetting.shouldDrawMetaData&&a.entries&&a.entries.length>0&&this.drawMetadata(a.entries[0]),this._expandMetaDataClickEvent()}else{var l=swfobject.getFlashPlayerVersion().major;if(l<VideoPlayerUtils.getRequiredFlashVersion()){var m="";m+="<div id='shawVideo_noFlashMessage'>",m+="<h3>Sorry!</h3>",m+="<p>This video requires the Adobe Flash Player.</p>",m+="<p>Please <a href='http://get.adobe.com/flashplayer/' target='_blank'>download</a> the latest version of Adobe Flash for the best possible viewing experience.</p>",$("#"+this.playerSetting.htmlId).html(m);var n=document.createEvent("CustomEvent");n.initCustomEvent("noFlash",!0,!0,{}),document.documentElement.dispatchEvent(n)}else this.playerSetting.contentRestricted="restricted"===i,this._insertFlashPlayer(),this.playerSetting.isLive||$(window).bind("updateUserAuthStatus",jQuery.proxy(this._onUpdateUserAuthStatus,this));this.playerSetting.shouldDrawMetaData&&this.playerSetting.content&&this.drawMetadata(this.playerSetting.content),this._expandMetaDataClickEvent()}}else VideoPlayerUtils.log("MetadataLoad Failed");this._initialize_modalEvents()},a.prototype._onUpdateUserAuthStatus=function(){this._insertFlashPlayer()},a.prototype._insertFlashPlayer=function(){var a;this.playerSetting.contentRestricted&&!VideoPlayerUtils.isAuthenticatedUser()?LegacyPlayerUtils.insertAuthMessage(this.playerSetting,this.playerSetting.content):this.player||(a=this._determineFlashPlayerType(),this.playerSetting.shouldDrawMetaData||"legacy"!==a||this.metadataLoadAttempted||this.playerSetting.content?(this.player=new FlashVideoPlayer(this.playerSetting),this.player.inject(a),$(b).focus()):this._loadMetadata())},a.prototype._determineFlashPlayerType=function(){var a=(swfobject.getFlashPlayerVersion().major,"legacy"),b="",c=VideoPlayerUtils.readCookie("shawVideoPlayerFallback");return"Stage unavailable"===c&&(VideoPlayerUtils.eraseCookie("shawVideoPlayerFallback"),c=""),VideoPlayerUtils.isChromebook()?b+="Chromebook":c?b+=c:this.playerSetting.content&&!this._isSupportedFormat()?b="FLV":a="primetime",b&&(b="[Opt out] Legacy player fallback - "+b,ShawVideoAnalytics.sendEvent(b,{eVar40:b},[])),a},a.prototype._isSupportedFormat=function(){for(var a=this.playerSetting.content.media$content,b=0;b<a.length;b++){var c=a[b].plfile$format.toLowerCase();return"f4m"===c||"mpeg4"===c||"m3u"===c}return!1},a.prototype._resize=function(){$("#"+this.playerSetting.htmlId).height(9*Math.round($("#"+this.playerSetting.htmlId).width()/16)+60)},a.prototype._playerLoadCallbackAndInject=function(){this.player.inject(this.playerSetting.htmlId)},a.prototype._expandMetaDataClickEvent=function(){$("#shawVideo_metaExpand").click(function(){$(this).toggleClass("expand"),$("#shawVideo_expandedDetails").toggleClass("showDetails"),$("#shawVideo_expandedDetails").toggleClass("hideDetails");var a="[Video Details] "+($(this).hasClass("expand")?"Show":"Hide");ShawVideoAnalytics.sendEvent(a,{eVar40:a},[])})},a.prototype._scrollToPlayer=function(a){if(!(1>a)){var b=$("#shawVideo_PlaybackArea").offset().top-a;$("html, body").animate({scrollTop:b},1500)}};var b="#shawVideo_FlashPlayer";a.prototype._initialize_modalEvents=function(){$(document).on("modalOn",$.proxy(this._onModalOn,this)),$(document).on("modalOff",$.proxy(this._onModalOff,this))},a.prototype._onModalOn=function(){this.player&&(this.player.html5Player&&this.player.adOrVideoPlaying()?(this.player.playPause(),this.isModalPaused=!0):this.player.html5Player||this.player.pause(),$(b).css("top","-5000px"),$("iframe").css("visibility","hidden"))},a.prototype._onModalOff=function(){this.player&&(this.player.html5Player&&this.isModalPaused?(this.player.playPause(),this.isModalPaused=!1):this.player.html5Player||this.player.smartResume(),$(b).css("top",""),$("iframe").css("visibility","visible"))}}();
//# sourceMappingURL=shaw_videodrome.min.map