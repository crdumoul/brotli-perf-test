(function(a){a.fn.tip=function(b){var d=a.extend({id:"",on:"click",offset:[],offsetX:"",offsetY:"",onBeforeShow:"",onBeforeHide:""},b);return this.each(function(){if(d.offset.length==0){d.offset[0]=a(this).offset().top+35;d.offset[1]=(a(this).outerWidth()/2)-(a(d.id).outerWidth()/2)}a(this).bind(d.on,function(){a(d.id).find(".box-arrow-up").css("left",a(d.id).outerWidth()/2-7);a(d.id).css("top",d.offset[0]).css("left",d.offset[1]).toggle();if(d.offsetY!=""){a(d.id).css("top",d.offsetY)}if(d.offsetX!=""){a(d.id).css("left",d.offsetX)}if(typeof(d.onBeforeShow)=="function"){d.onBeforeShow()}});a(d.id).find(".close").bind("click",function(){if(typeof(d.onBeforeHide)=="function"){d.onBeforeHide()}a(d.id).hide()})})};a.fn.showHeaderMenu=function(b){var d=a.extend({id:"",offset:[],onBeforeShow:"",onBeforeHide:""},b);return this.each(function(){a(this).hover(function(){if(typeof(d.onBeforeShow)=="function"){d.onBeforeShow()}a(d.id).show()},function(){if(typeof(d.onBeforeHide)=="function"){d.onBeforeHide()}a(d.id).hide()})})};a.fn.fixImages=function(b){var d=a.extend({fallback:"/assets/mobile/images/site/490x268_VideoThumbs_Generic.jpg"},b);var f=function(g){a(g).attr("src",d.fallback);if(typeof d.css=="object"){a(g).css(d.css)}};return this.each(function(){var g=a(this).find("img");g.on("error",function(){f(this)});if(g.attr("src")==""){f(g)}})}})(jQuery);CBS.declareNS("CBS.V3.Account.Core");CBS.V3.Account.Core=function(){this.settings={dom_id:null};var h=this._settings={type:"",obj:null,base_url:"/account/",default_redirect_url:"/",forms:{register:null,social:"missing-fields-form"},dom_wrappers:{forgot_password:null,login_reg:"registration-wrapper"},texts:{registration_loading:"Loading..."}};h.obj=this;this.path=null;var f;var d="cbs";this.callback={onLogin:null,onLogout:null,onRegister:null,onRegisterSocial:null,onRegisterSocialExists:null,onMissingFieldsSaveSuccess:null};this.getUserId=function(){return f};this.setUserId=function(i){if(typeof i!="undefined"&&i){f=i}};this.setRegDriver=function(i){d=i};this.log=function(i){if(console){console.log(i)}};this.setForms=function(j){for(var k in j){h.forms[k]=j[k]}};this.getForm=function(i){return h.forms[i]};this.setWrappers=function(j){for(var k in j){h.dom_wrappers[k]=j[k]}};this.invoke=function(k,j){if(k!=null){try{if(typeof(k)=="string"){window[k](j)}if(typeof(k)=="function"){k(j)}}catch(i){this.log(i.message)}}};this.registration={form:null,hasCaptcha:false,onSubmit:function(){},onValidForm:function(i){},onFormError:function(i){},onAjaxError:function(){},onSuccess:function(){},onErrors:function(i){},submit:function(i){this.onSubmit();i=i||this.form;if(!i){return}var l=new CBS.Form(h.forms.register,i),k=this;l.settings.fields._agree={required:true,rule:null};if(!h.obj.validate.validateForm(l)){k.onFormError(l);return}this.onValidForm(l.form);var j=l.getInputValues();j.optIn="true";j.mpid=4812;if(k.hasCaptcha){j.recaptcha_challenge_field=Recaptcha.get_challenge();j.recaptcha_response_field=Recaptcha.get_response()}$.ajax({url:h.base_url+"do_register/",type:"POST",data:j,dataType:"json",error:k.onAjaxError,success:function(m){if(m.success===true){k.onSuccess();h.obj.handlers.handleRegisterSuccess()}else{if(k.hasCaptcha){h.obj.initCaptcha()}k.onErrors(m);h.obj.validate.checkErrors(m,h.forms.register)}}})}};this.validate={validateForm:function(i){i.EnableFormatters();return i.State()},displayErrors:function(m,l,i){var k="";if(m.errors){for(var j in m.errors){if(!m.errors.hasOwnProperty(j)){continue}k+=m.errors[j]+"<br />"}}else{k+="Error occurred, please try again later"}if(!i){i=CBS.Registry.platform.isMobile?h.obj.message.error:h.obj.message.errorV2_5}i(l,k);if(CBS.Registry.platform.isMobile){h.obj.message.showError()}window.scrollTo(0,0)},checkErrors:function(j,i){}};this.session={logout:function(){$.ajax({url:h.base_url+"logout/",type:"GET",dataType:"json",error:function(){alert("Error occured, please try again later")},success:function(j){if(j.success===true){if(j.isLoggedIn===false){if(h.obj.callback.onLogout!=null){try{f=null;if(typeof(h.obj.callback.onLogout)=="string"){window[h.obj.callback.onLogout](j)}if(typeof(h.obj.callback.onLogout)=="function"){h.obj.callback.onLogout(j)}}catch(i){}}else{if((window.location.pathname+"/").substr(0,6)!="/user/"){window.location.reload()}else{window.location.href="/"}}}}}})},socialWindow:function(j,n,k,i){if(arguments.length==2){k=500;i=350}var m=(screen.width/2)-(k/2);var l=(screen.height/2)-(i/2);window.open(h.base_url+j,n,"width="+k+",height="+i+",status=0,toolbar=0,scrollbars=1,top="+l+",left="+m)},facebook:function(){var j=a(),i="fb_login/"+j+"/";if(CBS.Registry.platform.isWebView){window.location=h.base_url+i}else{h.obj.session.socialWindow(i,"Account_FB_Login")}},twitter:function(){var j=a(),i="twitter_login/"+j+"/";if(CBS.Registry.platform.isWebView){window.location=h.base_url+i}else{h.obj.session.socialWindow(i,"Account_TW_Login",500,580)}},gplus:(function(){var i=[];function j(k){gapi.signin.render(k,{callback:function(l){if(CBS.Registry.user_auth){h.obj.session.gplus.callbacks.user(l)}else{h.obj.session.gplus.callbacks.anon(l)}},clientid:CBS.Registry.google_client_id,cookiepolicy:"http://cbs.com",requestvisibleactions:"http://schemas.google.com/AddActivity",scope:"https://www.googleapis.com/auth/plus.login email",apppackagename:"com.cbs.app",parsetags:"explicit"})}return{renderLoginRegButton:function(l){if(typeof gapi=="undefined"){i.push(l)}else{if(l){j(l)}else{i.push("idGplusLoginButton");for(var k=0;k<i.length;k++){j(i[k])}}}},disconnect:function(k){var m="Are you sure you want to revoke access?";if(confirm(m)){var l="https://accounts.google.com/o/oauth2/revoke?token="+k;$.ajax({type:"GET",url:l,contentType:"application/json",dataType:"jsonp",success:function(n){$.ajax({url:"/user/disconnect/google/",type:"GET",dataType:"json",success:function(o){if(o.success){$("#id-connected-google").hide();$(".cbs-og-msg.info").html("You have successfully disconnected your Google account.").show();setTimeout(function(){CBSAccount.session.logout()},3000)}}})},error:function(n){CBSAccount.message.errorV2("social-connect-wrapper","Error occured. Please try again later.")}})}else{return}},callbacks:{user:function(k){if(k.error=="user_signed_out"){$.get("/account/logout/",function(){window.location.href="/"})}},anon:function(k){if(k["g-oauth-window"]==undefined){return}if(k.access_token){$.ajax({url:"/account/gplus_login_callback/"+a()+"/?token="+k.access_token,type:"GET",dataType:"json",success:function(l){if(l.success){if(!l.is_registered){if(l.redirectUrl){window.location.href=l.redirectUrl}else{h.obj.view.socialMissingForm("google",l.html)}}else{h.obj.handlers.handleSocialLoginResponseSuccess(l.existing,"google",l.missingHtml)}}}})}else{if(k.error){}}}},manualAuth:function(){var l=a(),k="gplus_login/"+l+"/";if(CBS.Registry.platform.isWebView){window.location=h.base_url+k}else{h.obj.session.socialWindow(k,"Account_TW_Login",445,615)}}}}()),missingFields:(function(){var i;function j(k){if(!k){return"save_missing_fields"}switch(k){case"twitter":return"twitter_register/";case"google":return"gplus_register/";case"facebook":return"fb_register/"}return null}return{init:function(k){i=k},save:function(l){var m=new CBS.Form(h.forms.social,i);m.settings.fields._agree={required:true,rule:null};m.settings.type=h.type;if(!h.obj.validate.validateForm(m)){return}var n=m.getInputValues();n.optIn="true";if(l){var k=$("#"+h.forms.social);n.mpid=4812;n.provider=l;n.accessToken=k.find('input[name="accessToken"]').val();if(l=="twitter"){n.secret=k.find('input[name="secret"]').val()}}$.ajax({url:h.base_url+j(l),type:"POST",data:n,dataType:"json",error:function(){h.obj.message.errorV2_5(h.forms.social,"Error occured. Please try again later.")},success:function(o){if(o.success){if(l){h.obj.handlers.handleSocialRegisterSuccess(l)}else{h.obj.handlers.handleMissingFieldsSaveSuccess()}}else{h.obj.validate.displayErrors(o,h.forms.social)}}})}}})()};function a(){if(window.location.href.indexOf("/all-access/")>-1){return"all-access"}if(window.location.href.indexOf("/live-tv/stream/")>-1){return"mvpd"}if($("#id-cbs-bd-login-wrapper").length>0){return"rewards"}if($("#"+h.dom_wrappers.login_reg).length>0){return"signup"}return"popup"}this.handlers=(function(){var k=h.obj;function q(t,s){if(typeof s=="undefined"){s=500}setTimeout(function(){t()},s)}function l(u,t,s){q(function(){k.invoke(u,t)},s)}function i(s){q(function(){window.location.reload()},s)}function p(t,s){q(function(){window.location.href=t},s)}function j(){var s=b("userId");k.setUserId(s);CBSAccount.setUserId(s);g.setUserId(s);g.setProfile(b("profile"))}function m(s,t,u){if(s!=null){k.view.userBar("user");l(s,t)}else{u()}}function o(t,s){m(t,s,function(){i()})}function n(t,s){m(t,s,function(){p(h.obj.getRedirectUrl())})}function r(s,u,t){if(!s){u();return}k.callback.onMissingFieldsSaveSuccess=u;k.view.socialMissingForm(t,s)}return{handleRegisterSuccess:function(){j();g.trackRegister();n(k.callback.onRegister)},handleSocialRegisterSuccess:function(s){j();g.trackSocialRegister(s);n(k.callback.onRegisterSocial,s)},handleLoginSuccess:function(s){j();if(g.trackLogin!=null){g.trackLogin();g.trackLogin=null}r(s,function(){o(k.callback.onLogin)})},handleSocialLoginSuccess:function(t,s){j();g.trackSocialLogin(t);r(s,function(){if(!CBS.Registry.platform.isWebView){var u=k.callback.onRegisterSocialExists||k.callback.onRegisterSocial;if(CBS.Registry.platform.isMobile){o(u,t)}else{n(u,t)}}else{p(h.obj.getRedirectUrl())}},t)},handleSocialLoginResponseSuccess:function(u,t,s){u?this.handleSocialLoginSuccess(t,s):this.handleSocialRegisterSuccess(t)},handleMissingFieldsSaveSuccess:function(){n(k.callback.onMissingFieldsSaveSuccess)}}})();var g=this.tracking=(function(){var l,n,o,p;var i={openRegForm:"event8",openLoginPageForm:"event22"};function r(A){$.extend(i,A)}function z(A){s(A,"LOGIN_SUCCESS");q(A,"event28","trackLogin")}function t(A){s(A,"REGISTERED");q(A,"event28","REGISTERED")}function x(){w(function(){k({linkTrackVars:"events,eVar18",linkTrackEvents:i.openRegForm,events:i.openRegForm,eVar18:d},"trackRegFormView")})}function j(){w(function(){k({linkTrackVars:"events,eVar18",linkTrackEvents:i.openLoginPageForm,events:i.openLoginPageForm,eVar18:d},"trackLoginFormView")})}function y(A){m({mapp:"reg",riaevent:"REGFORM_VIEW",objtyp:"page",objnm:"",comp:A,s6:d})}function w(A){setTimeout(A,2000)}function s(A,B){try{m({mapp:"reg",riaevent:B,objtyp:A=="cbs"?"cbscomm":A,objnm:l,s6:d})}catch(C){}}function u(B){var B=$.extend({gender:"",country:"",service:"",desc:"trackLogin"},B),A={userRegId:l,userRegDriver:d,demographic:B.gender+"|"+B.country,service:B.service};if(B.desc=="trackLogin"){om.trackLogin(A)}else{if(B.desc=="trackNewRegistration"){A.user_status="reg";om.trackNewRegistration(A)}}}function q(A,B,F){var C="",E="",D;if(n){C=n.gender||"";E=n.country||"US"}if(CBS.Registry.platform.current=="MOBILE_WEB"){u({gender:C,country:E,service:A,desc:F});return}var D={userRegService:A,userRegDriver:d,userStatus:"authenticated",userRegId:l};k(D,F)}function m(B){try{if(o){B.testgroup=o}if(p){B.testname=p}DW.levt("ria","log",B)}catch(A){}}function k(C,B){try{if(B=="trackLogin"){om.trackLogin(C)}else{om.trackNewRegistration(C)}}catch(A){}}function v(D,C){try{var A=omdata.context.sections;omdata.context.sections=C+"|"+omdata.context.sections;omdata.context.sections=A}catch(B){}}return{setUserId:function(A){l=A},setProfile:function(A){n=A},setTestParams:function(B,A){o=B;p=A},setEventIds:function(A){r(A)},trackLogin:function(){z("cbs")},trackRegister:function(){t("cbs")},trackSocialLogin:function(A){z(A)},trackSocialRegister:function(A){t(A)},trackOpenRegForm:function(A){x();y(A||"global signup")},trackOpenLoginPage:function(){j()},trackLoginOverlay:function(A){om.trackClick({item:"header|sign in|click"});y(A||"global signin")},trackUpsell:function(){w(function(){v({events:"event74",eVar18:d,eVar44:"reg_to_watch"},"upsell")});y("upsell signup msg")}}})();function b(i){return CBS.CombinedCookie.get("graph",i)}this.getRedirectUrl=function(){var i=b("redirectUrl");if(i){return i}return h.default_redirect_url};this.ActiveButton=function(k,j){if(typeof k!="object"){k=$("#"+k)}var l=this;var m=k.html();k.click(function(){if(!i()){j(l)}});this.wait=function(){if(k.attr("type")!="undefined"&&(k.attr("type")=="button")){k.val(h.texts.registration_loading).addClass("disabled")}else{k.html(h.texts.registration_loading).addClass("disabled")}};this.ready=function(){k.html(m).removeClass("disabled")};this.click=function(){k.click()};function i(){return k.hasClass("disabled")}}};CBS.declareNS("CBS.V2.Account");CBS.V2.Account=function(){CBS.V3.Account.Core.apply(this,arguments);var b=$.extend(true,this._settings,{formtype:"",forms:{login:"id-v2_5-account-login-form",forgot_password:"id-v2_5-forgot-password-form",reset_password:"id-account-password-form",register:"id-v2_5-account-register-form",editBasicInfo:"id-v2-account-edit-basic-info",changeEmail:"id-v2-account-change-email-form",changePassword:"id-v2-account-change-password-form",changeOptIn:"id-v2-account-change-optin-form"},buttons:{sign_up_button:"signUpButton",basic_info_save:"basicInfoSaveButton",change_email_save:"changeEmailSaveButton",change_email_cancel:"changeEmailCancelButton",change_password_save:"changePasswordSaveButton",change_password_cancel:"changePasswordCancelButton",change_optin_save:"changeOptInSaveButton",change_optin_cancel:"changeOptInCancelButton"},dom_wrappers:{forgot_password:"id-forgot-password-wrapper",login_reg:"id-login-reg-parent-wrapper"},texts:{registration_loading:"Loading...",registration_default:"Sign Up",reauth_failed:"The password you entered is invalid. Please enter the valid password to change personal data",basic_info_edit_success:"You have successfully changed your personal information",change_email_success:"You have successfully changed your email",change_password_success:"You have successfully changed your password",change_optin_success:"You have successfully changed your opt in status",login_locked_out:"You have been locked out due to too many login attempts. Please try again in 5 minutes."}});this.callback=$.extend(this.callback,{onLogin:null,onLogout:null,onRegister:null,onLoginSocial:null,onRegisterSocial:null,onRegisterSocialErrors:null,onRegisterSocialExists:null,onFailLogin:null,onFailRegister:null,onLoadLoginView:null,onLoadRegisterView:null,onRegisterButtonWait:null,onRegistrationErrors:null});this.message={error:function(d,h,i){if(arguments.length==3&&i===true){$("#"+d).parent().find(".err__").html(h);return}var f=$("#"+d).find("div.form-message");f.find("div.error").remove();f.find("div.info").remove();var g='<div class="error">'+h+"</div>";f.prepend(g).show()},errorV2:function(d,g){var h=$("#"+d).find("div.cbs-og-error-message-wrapper");h.find("div.cbs-og-error-message-box").remove();var f='<div class="cbs-og-error-message-box">'+g+"</div>";h.prepend(f).show()},errorInlineV2:function(d,f){d.parent().next(".err__").html(f)},clearErrorInlineV2:function(d){d.parent().next(".err__").html("")},clearErrorsV2:function(d){var f=$("#"+d).find("div.cbs-og-error-message-wrapper");f.find("div.cbs-og-error-message-box").remove()},clearErrorsV2_5:function(d){$("#"+d).parent().find(".form-error").hide().html("")},errorV2_5:function(d,g,h){var f=$("#"+d).parent().find(".form-error");f.html(g).fadeIn();if(b.err_tout){clearTimeout(b.err_tout)}if(!h){b.err_tout=setTimeout(function(){f.hide().html("")},5000)}},errorTooltip:function(f,g){var i=f.parent().find(".error-tooltip");if(i.length==0){i=$("<div></div>").addClass("error-tooltip");var h=$("<div></div>").addClass("error-tooltip-arrow");var d=$("<div></div>").addClass("error-tooltip-inner cbs-og box");i.append(h).append(d);f.after(i);f.tooltip({position:"center right",events:{def:",",tooltip:",",input:",",widget:","},effect:"slide",offset:[15,0]})}i.find(".error-tooltip-inner").html(g);f.data("tooltip").show()},clearTooltip:function(d){var f=d.data("tooltip");if(f){f.hide()}},info:function(f,d){var g=$("#"+f);g.find(".info").remove();g.html('<div class="info">'+d+"</div>")},clear:function(d){var f=$("#"+d).find("div.form-message");f.find("div.info").remove();f.find("div.error").remove();f.html("").hide()},clearAll:function(d){if(d=="error"){$("div.form-message .error").html("").hide()}}};this.initCaptcha=function(d){if(d==undefined){typeurl="default"}try{Recaptcha.create(recaptcha_key,"id-recaptcha",{theme:"white"})}catch(f){console.log(f.message)}};function a(d){if(d!=undefined&&d!=""){if(b.obj.getUserId()){b.obj.invoke(d);return}b.obj.callback.onLogin=b.obj.callback.onRegisterSocial=d}}this.view={loginInPage:function(h,f,g,d){$("#"+h).html(CBSJSTemplates.account.login({loginBoxInline:true,loginBoxTitle:f,loginBoxSignUpUrl:d}));a(g);CBSAccount.View.LoginBox=new CBS.LoginBox();b.obj.session.gplus.renderLoginRegButton("id-gp-login-btn-inline")},getUserProfile:function(d){var f=function(h){if(h!=null){return JSON.parse(h)}else{var g={hasViewedOptIn:true};window.localStorage.setItem("cbs",JSON.stringify(g));return false}};if(f(window.localStorage.getItem("cbs"))==false){CBSAccount.view.tooltip.optin("og-user-bar-user",d)}},tooltip:{login:function(d,j,l,g,i,h){var m={login_box:$("#id-box-tip-user-login"),login_form:$("#id-v2_5-account-login-form"),gbl_login_link:$("#id-lnk-gbl-login"),src_el:$("#"+d),arrow_pos:"179px",offset:[35,-235],region:{left:0,right:0},restrict_to_region:h||false};var f=$("#cbs-show-page").offset();if(f){m.region={left:f.left,right:f.left+980}}if(m.login_box.length==0){m.gbl_login_link.append(CBSJSTemplates.account.login());m.login_box=$("#id-box-tip-user-login");b.obj.session.gplus.renderLoginRegButton("id-gp-login-btn");CBSAccount.View.LoginBox=new CBS.LoginBox()}if(d==""){d="id-lnk-gbl-login"}if(d=="id-lnk-gbl-login"){m.login_box.appendTo("#id-lnk-gbl-login");m.arrow_pos="80px"}else{m.login_box.appendTo("body");var k=m.src_el.offset();m.offset[0]=parseInt(k.top+m.src_el.outerHeight()+10);m.offset[1]=k.left+(m.src_el.outerWidth()/2)-(m.login_box.outerWidth()/2)}if(j){m.offset=j}if(m.restrict_to_region){if(m.offset[1]<m.region.left){m.offset[1]=m.region.left+35}if((m.offset[1]+m.login_box.outerWidth())>=m.region.right){m.offset[1]=m.region.right-(m.login_box.outerWidth()+35)}}m.login_box.css("top",m.offset[0]).css("left",m.offset[1]);m.login_box.find("div.box-arrow-up").css("right",m.arrow_pos);m.login_box.show();m.login_box.find('input[name="j_username"]').focus();if(g){b.obj.setRegDriver(g)}else{b.obj.setRegDriver("cbs")}b.obj.tracking.trackLoginOverlay(i);m.login_box.find("div.close").click(function(){CBSAccount.View.LoginBox.reset_login_ui(m.login_box);m.login_box.hide();m.login_box.remove()});a(l)},optin:function(i,d,f,h){var g={optin_box:$("#id-box-tip-user-optin"),gbl_optin_link:$("#lnk-user-account"),src_el:$("#"+i),arrow_pos:"13px"};if(g.optin_box.length==0){g.gbl_optin_link.append(CBSJSTemplates.account.optin(d));g.optin_box=$("#id-box-tip-user-optin");CBSAccount.View.OptinBox=new CBS.OptinBox()}g.optin_box.appendTo("#lnk-user-account");g.optin_box.find("div.box-arrow-up").css("right",g.arrow_pos);if((navigator.userAgent.match(/iPad/i))||(navigator.userAgent.match(/iPhone/i))||(navigator.userAgent.match(/iPod/i))){g.optin_box.css("left","-320px");g.optin_box.find("div.box-arrow-up").css("right","8px")}g.optin_box.show();g.optin_box.find('input[name="gender"]').focus();g.optin_box.find(".close").click(function(){g.optin_box.hide();g.optin_box.remove()});a(h)}},type_game:{login:function(){},register:function(d){var f="";if(d=="undefined"){d="game"}$.ajax({url:b.base_url+"display/inline/registration/"+d,type:"GET",dataType:"json",error:function(){},success:function(h){try{$("#"+b.dom_wrappers.login_reg).html(h.html);b.obj.invoke(b.obj.callback.onLoadRegisterView);$.getScript("//www.google.com/recaptcha/api/js/recaptcha_ajax.js",function(){b.obj.initCaptcha(d)})}catch(g){b.obj.log(g.message)}}})}},forgotPassword:function(d){b.obj.message.clearAll("error");if(d==undefined){d="default"}if(d=="default"){$("#"+b.dom_wrappers.forgot_password+".forgot-password").fadeIn()}else{$("#"+d+".forgot-password").fadeIn()}$("#id-v2-account-login-form .input-overlay").hide();$(".cbs-v2-account.forgot-password #id-forgot-password-one").show();$(".cbs-v2-account.forgot-password #id-forgot-password-two").hide()},userBar:function(d){if(d=="user"){$.ajax({url:b.base_url+"user_bar/",type:"GET",dataType:"json",error:function(){},success:function(g){try{if(g.success===true){$("#user-bar-wrapper").remove();$("#ui-user-bar").html(g.html);$("#id-box-tip-user-login").remove()}}catch(f){}}})}},socialMissingForm:function(f,d){$("#"+b.dom_wrappers.login_reg).html(d)},saveSettings:function(g){var d=$("#id-v2_5-account-optin-form");var f={optIn:$.trim(d.find('input[name="_agree"]:checked').val()),gender:$.trim(d.find('[name="gender"]').val())};$.ajax({url:b.base_url+"reminder/",type:"POST",data:f,dataType:"json",error:function(){b.obj.log("Error occured")},success:function(h){if($(".msgOptin").length){$(".login-wrapper form").fadeOut("fast",function(){$(".msgOptin").fadeIn("fast",function(){setTimeout(function(){$("#id-box-tip-user-optin").hide();$("#id-box-tip-user-optin").remove()},5000)})})}else{$("#id-box-tip-user-optin").hide();$("#id-box-tip-user-optin").remove()}}})}};$.extend(this.validate,{registerForm:function(){var d=new CBS.Form();d.settings.id=b.forms.register;d.settings.fields={email:{required:true,rule:"email"},password:{required:true,rule:"length",matcher:6},confirmPassword:{required:true,rule:"match_with",matcher:"password"},firstName:{required:true,rule:"alpha"},lastName:{required:true,rule:"alpha"},gender:{required:true},_agree:{required:true,rule:null},confirmEmail:{required:true,rule:"match_with",matcher:"email",optional:true},zip:{required:true,rule:"zip_country",matcher:"country"},country:{required:true},state:{required:true},day:{required:false,rule:"dob"}};d.EnableFormatters();return d.State()},editBasicInfoForm:function(){var d=new CBS.Form();d.settings.id=b.forms.editBasicInfo;d.settings.fields={firstName:{required:true,rule:"alpha"},lastName:{required:true,rule:"alpha"},address:{required:true,rule:"alnum"},city:{required:true},zip:{required:true,rule:"zip_country",matcher:"country"},state:{required:true,rule:"state"},country:{required:true},phone:{required:true,rule:"phone"},gender:{required:true}};if(b.obj.path=="CBS"){d.settings.fields.password={required:true,rule:"length",matcher:4}}return this.validateSettings(d)},changeEmailForm:function(){var d=new CBS.Form();d.settings.id=b.forms.changeEmail;d.settings.fields={email:{required:true,rule:"email"},confirmEmail:{required:true,rule:"match_with",matcher:"email"},password:{required:true,rule:"length",matcher:4}};return this.validateSettings(d)},changePasswordForm:function(){var d=new CBS.Form();d.settings.id=b.forms.changePassword;d.settings.fields={password:{required:true,rule:"length",matcher:4},newPassword:{required:true,rule:"length",matcher:6},confirmPassword:{required:true,rule:"match_with",matcher:"newPassword"}};return this.validateSettings(d)},resetPasswordForm:function(){var d=new CBS.Form();d.settings.id=b.forms.reset_password;d.settings.fields={newPassword:{required:true,rule:"length",matcher:6},confirmPassword:{required:true,rule:"match_with",matcher:"newPassword"}};return this.validateSettings(d)},validateSettings:function(d){d.ShowError=function(f,g){b.obj.message.errorInlineV2(f,g)};d.HideError=function(f){b.obj.message.clearErrorInlineV2(f)};d.EnableFormatters();return d.State()},checkErrors:function(h,g){var f="";if(h.message=="CAPTCHA_ERROR"){b.obj.message.errorV2_5(g,"Captcha validation failed",true);b.obj.message.error("id-recaptcha","Please enter the text as it appears in the image",true)}else{if(h.message=="VALIDATION_FAILED"){for(var d in h.errors){f+=d+" "+h.errors[d]+"<br />"}b.obj.message.error(g,f);b.obj.message.errorV2_5(g,f,true)}else{if(h.message=="EMAIL_ERROR"){b.obj.message.errorV2_5(g,"Email address already taken.",true)}else{if(h.message.search(/We are sorry, but we are unable/i)>=0){b.obj.message.errorV2_5(g,h.message,true)}else{if(h.errorMessages){for(var d in h.errorMessages){f+=h.errorMessages[d]+"<br />"}}else{if(h.message.search(/You must be at least/i)>=0){f+=h.message}}b.obj.message.errorV2_5(g,f,true);b.obj.message.error(g,f)}}}}window.scrollTo(0,0)}});$.extend(this.registration,{onSubmit:function(){b.obj.message.clearErrorsV2_5(b.forms.register)},onFormError:function(){window.scrollTo(0,0)},onValidForm:function(d){d.prev("div.form-error").html("").hide();b.obj.invoke(b.obj.callback.onRegisterButtonWait)},onAjaxError:function(){b.obj.invoke(b.obj.callback.onRegistrationErrors);b.obj.log("Error occurred")},onErrors:function(){b.obj.invoke(b.obj.callback.onRegistrationErrors)},onSuccess:function(){document.getElementById(b.forms.register).reset()}});$.extend(true,this.session,{vendors:{logout:function(){var d=CBS.Host;$.ajax({url:d+"/account/logout/",type:"GET",dataType:"json",error:function(){},success:function(f){if(f.success===true){if(f.isLoggedIn===false){if((window.location.pathname+"/").substr(0,6)!="/user/"){window.location.reload()}else{window.location.href="/"}}}}})}},logout:function(){$.ajax({url:b.base_url+"logout/",type:"GET",dataType:"json",error:function(){alert("Error occured, please try again later")},success:function(f){if(f.success===true){if(f.isLoggedIn===false){b.obj.session.cleanMVPD();if(b.obj.callback.onLogout!=null){try{userId=null;if(typeof(b.obj.callback.onLogout)=="string"){window[b.obj.callback.onLogout](f)}if(typeof(b.obj.callback.onLogout)=="function"){b.obj.callback.onLogout(f)}}catch(d){}}else{if((window.location.pathname+"/").substr(0,6)!="/user/"){window.location.reload()}else{window.location.href="/"}}}}}})},cleanMVPD:function(){window.localStorage.removeItem("mvpd_authz");window.localStorage.removeItem("mvpd_chosen_obj");$.cookie("mvpd_authz","",{path:"/",domain:".cbs.com"});if(typeof MVPD_CALLBACK_MODULE==="object"){MVPD_CALLBACK_MODULE.logout()}},login:function(g){g=g||b.forms.login;var f=$("#"+g);var d=function(){return $("#j_username.rInput").focus()};b.obj.message.clear(g);if(f.find("#j_username").val()==""||f.find("#j_password").val()==""){b.obj.message.errorV2_5(g,"Enter email address and password");return}$.ajax({url:b.base_url+"login/",type:"POST",data:f.serialize(),dataType:"json",error:function(){},success:function(i){if(i.success===true){b.obj.handlers.handleLoginSuccess(i.missingHtml)}else{d();f.find('input[type="password"]').val("");var h=i.messages;if(i.maxLoginAttempts){h=b.texts.login_locked_out}b.obj.message.errorV2_5(g,h)}}})},loginToHttps:function(g){if(window.location.protocol=="https:"){this.login(g);return}g=g||b.forms.login;var f=$("#"+g);if(f.find("#j_username").val()==""||f.find("#j_password").val()==""){b.obj.message.errorV2_5(g,"Enter email address and password");return}if($("#cbsLoginIframe").length==0){var d=$('<iframe name="cbsLoginIframe" id="cbsLoginIframe"></iframe>').css("display","none");f.attr({action:(CBS.Registry.ssl?"https://":"http://")+CBS.Registry.host+"/account/login/",target:"cbsLoginIframe",method:"post"}).parent().append(d);d.bind("load",function(){setTimeout(function(){var i="__attmpt_ck__",j=$.cookie(i),k=f.find("#j_username").val(),l="Invalid email and/or password";if($.cookie("CBS_COM")){b.obj.handlers.handleLoginSuccess()}else{function h(n){var m=new Date();m.setTime(m.getTime()+(5*60*1000));$.cookie(i,JSON.stringify({e:k,i:n}),{expires:m,path:"/"})}if(j){j=$.parseJSON(j);j.i+=1;if(k==j.e){if(j.i>5){l=b.texts.login_locked_out}h(j.i)}else{h(1)}}else{h(1)}f.find('input[type="password"]').val("");b.obj.message.errorV2_5(g,l)}},1000)})}f.submit()},register:function(){b.obj.registration.onSubmit();var h=$("#"+b.forms.register);var f=b.obj.validate.registerForm();if(!f){b.obj.registration.onFormError();return}b.obj.registration.onValidForm(h);var d=h.find('input[name="gender"]:checked').val();if(h.find('[name="gender"]').prop("type")=="select-one"){d=h.find('select[name="gender"] option:selected').val()}var l={email:encodeURIComponent($.trim(h.find('input[name="email"]').val())),password:$.trim(h.find('input[name="password"]').val()),confirmPassword:$.trim(h.find('input[name="confirmPassword"]').val()),firstName:$.trim(h.find('input[name="firstName"]').val()),lastName:$.trim(h.find('input[name="lastName"]').val()),birthday:h.find('select[name="month"]').val()+"/"+h.find('select[name="day"]').val()+"/"+h.find('select[name="year"]').val(),gender:d,optIn:"true",mpid:4812};var j=["confirmEmail","zip","country","state"];for(var g in j){var m=j[g],k=h.find(':input[name="'+m+'"]');if(k.length>0){l[m]=k.val()}}$.ajax({url:b.base_url+"do_register/",type:"POST",data:l,dataType:"json",error:b.obj.registration.onAjaxError,success:function(i){if(i.success===true){b.obj.registration.onSuccess();b.obj.handlers.handleRegisterSuccess()}else{b.obj.registration.onErrors(i);b.obj.validate.checkErrors(i,b.forms.register)}}})},initChangeEmail:function(){var d=new b.obj.ActiveButton(b.buttons.change_email_save,b.obj.session.saveChangeEmail);var f=new b.obj.ActiveButton(b.buttons.change_email_cancel,function(){b.obj.setContent("profile-email","view_email")})},saveChangeEmail:function(f){var d=b.obj.validate.changeEmailForm();if(!d){return}f.wait();var g=$("#"+b.forms.changeEmail);var h={newEmail:$.trim(g.find('input[name="email"]').val()),confirmEmail:$.trim(g.find('input[name="confirmEmail"]').val()),password:$.trim(g.find('input[name="password"]').val())};$.ajax({url:b.base_url+"change_email/",type:"POST",data:h,dataType:"json",error:function(){f.ready();b.obj.log("Error occured")},success:function(j){var i="";if(j.success===true){b.obj.setContent("profile-email","view_email",function(){b.obj.message.info("email-message-box",b.texts.change_email_success)})}else{f.ready();b.obj.validate.displayErrors(j,b.forms.changeEmail,b.obj.message.errorV2)}}})},initChangePassword:function(){var d=new b.obj.ActiveButton(b.buttons.change_password_save,b.obj.session.saveChangePassword);var f=new b.obj.ActiveButton(b.buttons.change_password_cancel,function(){b.obj.setContent("profile-password","view_password")})},saveChangePassword:function(f){var d=b.obj.validate.changePasswordForm();if(!d){return}f.wait();var g=$("#"+b.forms.changePassword);var h={newPassword:$.trim(g.find('input[name="newPassword"]').val()),confirmPassword:$.trim(g.find('input[name="confirmPassword"]').val()),currentPassword:$.trim(g.find('input[name="password"]').val())};$.ajax({url:b.base_url+"change_password/",type:"POST",data:h,dataType:"json",error:function(){f.ready();b.obj.log("Error occured")},success:function(k){var j="";if(k.success===true){b.obj.setContent("profile-password","view_password",function(){b.obj.message.info("password-message-box",b.texts.change_password_success)})}else{f.ready();if(k.message=="VALIDATION_FAILED"){for(var i in k.errors){j+=i+" "+k.errors[i]+"<br />"}b.obj.message.errorV2(b.forms.changePassword,j)}else{if(k.message.search(/We are sorry, but we are unable/i)>=0){b.obj.message.errorV2(b.forms.changePassword,k.message)}}}}})},initChangeOptIn:function(){var d=new b.obj.ActiveButton(b.buttons.change_optin_save,b.obj.session.saveChangeOptIn);var f=new b.obj.ActiveButton(b.buttons.change_optin_cancel,function(){b.obj.setContent("profile-optin","view_optin")})},saveChangeOptIn:function(d){d.wait();var f=$("#"+b.forms.changeOptIn);var g={optIn:$.trim(f.find('input[name="optIn"]:checked').val())};$.ajax({url:b.base_url+"change_optin/",type:"POST",data:g,dataType:"json",error:function(){d.ready();b.obj.log("Error occured")},success:function(j){var i="";if(j.success===true){b.obj.setContent("profile-optin","view_optin",function(){b.obj.message.info("optin-message-box",b.texts.change_optin_success)})}else{d.ready();if(j.message=="VALIDATION_FAILED"){for(var h in j.errors){i+=h+" "+j.errors[h]+"<br />"}b.obj.message.errorV2(b.forms.changeOptIn,i)}else{if(j.message.search(/We are sorry, but we are unable/i)>=0){b.obj.message.errorV2(b.forms.changeOptIn,j.message)}}}}})},initCountryStates:function(f,d){$("select#country").change(function(){var h=$("select#state").html("");var j=$(this).val();if(j in f){var g=f[j];$.each(g,function(k,m){var l=$("<option></option>").attr({value:k}).html(m);if(k==d){l.attr("selected","selected")}h.append(l)})}var i=j=="US"?"ZIP Code":"Postal Code";$("input#zip").attr("placeholder",i);$("input#zip").attr("title",i);$('label[for="zip"]').html(i)}).change()},checkPasswordThen:function(j){if(typeof j=="string"){var i=j;j=function(){window.location.href=i}}if(CBS.Registry.user.path!="CBS"){j();return}var d=CBSJSTemplates.account.passwordPrompt();var f=d.find("input[type=password]"),h=d.find(".message");$("body").append(d);d.overlay({mask:{color:"#333",opacity:"0.7",zIndex:90002},load:true}).load();f.focus();f.bind("keydown",function(k){if(k.keyCode==13){g()}});d.find(".submit-password").click(function(){g()});function g(){h.html("").hide();var k=f.val();$.ajax({type:"POST",url:"/account/check_password/",data:{password:k},success:function(l){if(l.success){j();d.overlay().close();d.remove()}else{h.html("Invalid password, please try again").show()}},dataType:"json"})}},initBasicInfo:function(h,d,g){b.obj.path=g;this.initCountryStates(h,d);var f=new b.obj.ActiveButton(b.buttons.basic_info_save,function(j){var i=b.obj.validate.editBasicInfoForm();if(!i){return}if(g=="CBS"){b.obj.session.saveBasicInfo(j)}else{b.obj.callback.onRegisterSocial=function(){b.obj.session.saveBasicInfo(j)};if(g=="FB"){b.obj.session.facebook()}else{if(g=="TW"){b.obj.session.twitter()}else{if(g=="GP"){gapi.auth.authorize({client_id:CBS.Registry.google_client_id,scope:"https://www.googleapis.com/auth/plus.login"},function(){b.obj.session.saveBasicInfo(j)})}}}}})},saveBasicInfo:function(d){d.wait();var f=$("#"+b.forms.editBasicInfo);var g={firstName:$.trim(f.find('input[name="firstName"]').val()),lastName:$.trim(f.find('input[name="lastName"]').val()),address:$.trim(f.find('input[name="address"]').val()),city:$.trim(f.find('input[name="city"]').val()),zip:$.trim(f.find('input[name="zip"]').val()),state:$.trim(f.find('select[name="state"]').val()),country:$.trim(f.find('select[name="country"]').val()),phone:$.trim(f.find('input[name="phone"]').val()),gender:f.find('input[name="gender"]:checked').val(),birthday:f.find('select[name="month"]').val()+"/"+f.find('select[name="day"]').val()+"/"+f.find('select[name="year"]').val()};if(b.obj.path=="CBS"){g.password=$.trim(f.find('input[name="password"]').val())}$.ajax({url:b.base_url+"save_settings/",type:"POST",data:g,dataType:"json",error:function(){d.ready();b.obj.log("Error occured")},success:function(j){var i="";if(j.success===true){b.obj.setContent("profile-basic-info","view_basic_info",function(){b.obj.message.info("basic-info-message-box",b.texts.basic_info_edit_success)})}else{d.ready();console.log(j.message);if(j.message=="VALIDATION_FAILED"){for(var h in j.errors){i+=h+" "+j.errors[h]+"<br />"}b.obj.message.errorV2(b.forms.editBasicInfo,i)}else{if(j.message.search(/You must be at least/i)>=0){b.obj.message.errorV2(b.forms.editBasicInfo,j.message+".")}}}}})},forgotPassword:function(h){h=h||b.forms.forgot_password;var g=new CBS.Form();g.settings.id=h;g.settings.fields={email:{required:true,rule:"email"}};if(!g.State()){return}var d=$("#"+h);$.ajax({url:b.base_url+"forgot_password/",type:"POST",dataType:"json",data:{email:($.trim(d.find('input[name="email"]').val()))},error:function(){b.obj.message.error(h,"Error occured. Please try again later.")},success:function(j){if(j.success){CBSAccount.View.LoginBox.forgot_password_success();document.getElementById(h).reset()}else{var i="";if(j.message=="VALIDATION_FAILED"){for(var f in j.errors){i+=f+" "+j.errors[f]+"<br />"}b.obj.message.error(h,i)}}}})},resetPassword:function(){b.obj.message.clearErrorsV2(b.forms.reset_password);if(!b.obj.validate.resetPasswordForm()){return}var d=$("#"+b.forms.reset_password);$.ajax({url:b.base_url+"reset_password/",type:"POST",data:{token:d.find('input[name="token"]').val(),password:d.find('input[name="newPassword"]').val(),confirmPassword:d.find('input[name="confirmPassword"]').val()},dataType:"json",error:function(f){},success:function(f){if(f.success===true){b.obj.message.info("reset-password-message-box","Password successfully changed. Use your new password to login.");$("#id-account-password-form").remove();$("#reset-password-button").remove();setTimeout(function(){window.location.href="/"},2000)}else{b.obj.message.errorV2(b.forms.reset_password,f.message)}}})},facebookConnect:function(){b.obj.session.socialWindow("fb_connect/","Account_FB_Login")},twitterConnect:function(){b.obj.session.socialWindow("twitter_connect/","Account_TW_Login",500,580)},profilePhoto:function(){$(".profile-photo.error").hide();$("#id-upload-frame").attr("src","");$("#id-profile-photo-field").bind("change",function(){var g=$("#id-form-profile-photo");var f=g.find('input[name="profile_picture"]');if(f.val()==""){return}g.submit();var d=setInterval(function(){var h=$.parseJSON($("#id-upload-frame").contents().text());if(h!=null&&typeof h.success=="boolean"){clearInterval(d);if(h.success){$("#og-profile-pic img").attr("src",h.filepath);$("#id-profile-bits .pic img").attr("src",h.filepath);$(".profile-photo.error").hide();$("body").trigger("CBS.USER.PROFILE.PHOTO","SUCCESS")}else{$(".profile-photo.error").html(h.message).fadeIn()}f.val("")}},500)})},initRegistration:function(){var f=b.obj.callback;if(!CBS.Registry.register.customCallbacks){b.obj.session.initRegistrationCallbacks()}f.onRegisterButtonWait=function(){b.obj.ajaxButtonWait(d)};f.onRegistrationErrors=function(){b.obj.ajaxButtonReady(d)};var d=$("#"+b.buttons.sign_up_button);d.click(function(){if(!d.hasClass("disabled")){b.obj.session.register()}})},initRegistrationCallbacks:function(){var d=b.obj.callback;d.onRegister=d.onRegisterSocial=d.onLogin=function(){window.location.href=b.obj.getRedirectUrl()}}});this.ajaxButtonWait=function(d){d.addClass("disabled").html(b.texts.registration_loading)};this.ajaxButtonReady=function(d){d.removeClass("disabled").html(b.texts.registration_default)};this.setContent=function(d,g,f){$.ajax({url:"/user/"+g+"/",type:"GET",dataType:"json",error:function(){alert("error!")},success:function(h){if(h.success===true){$("#"+d).html(h.html);if(typeof(f)=="function"){f()}}}})};this.applyPasswordPrompt=function(d){if(!d){d="securedWithPrompt"}$("."+d).each(function(h){if(this.onclick){var f=this.onclick,g=this;g.onclick=function(i){b.obj.session.checkPasswordThen(function(){f.call(g,i||window.event)})}}else{if($(this).attr("href")){$(this).click(function(i){i.preventDefault();b.obj.session.checkPasswordThen($(this).attr("href"))})}}})}};var CBSAccount=new CBS.V2.Account();CBS.Account=CBSAccount;CBS.Account.View={};CBS.Account.View.LoginInline=function(g,a,f,d,b){CBS.Registry.login.ui.signup_link="/user/signup/?redirectUrl=referer";CBSAccount.view.tooltip.login(g,a,f,d,b)};CBS.Account.View.LoginModal=function(a){var b=$.extend({display:"tooltip",id:null,off_set:"",callback:null,reg_driver:null,comp:null,restrict_to_content_area:false},a);CBSAccount.view.tooltip.login(b.id,b.off_set,b.callback,b.reg_driver,b.comp,b.restrict_to_content_area,b.authToken)};CBS.Account.View.LoginTopRight=function(g,a,f,d,b){CBSAccount.view.tooltip.login(g,a,function(){$("body").trigger("CBS_AA_EXSUB");var i=$("#id-box-tip-user-login-svod"),h=$("#id-lnk-user-account"),j=[35,-27];if(i.length==0){window.location.reload();return}i.css("top",j[0]).css("left",j[1]).find("div.box-arrow-up").css("right","153px");i.show();i.find(".head .close").bind("click",function(){i.hide();window.location.reload()});h.bind("click",function(){i.hide();window.location.reload()})},d,b)};function __enable_gplus_login(){CBSAccount.session.gplus.renderLoginRegButton()}(function(){var a=document.createElement("script");a.type="text/javascript";a.async=true;a.src="https://apis.google.com/js/client:plusone.js?onload=__enable_gplus_login";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)})();window.___gcfg={isSignedOut:true};CBS.OptinBox=function(){this.ui={box_wrapper:$("#id-cbs-box-optin"),login_box:$(".login-wrapper"),fp_box:$(".forgot-pass-wrapper"),fp_suc_box:$(".forgot-pass-success-wrapper")};var b=this;var a=0};CBS.LoginBox=function(){this.ui={box_wrapper:$("#id-cbs-box-login"),login_box:$(".login-wrapper"),fp_box:$(".forgot-pass-wrapper"),fp_suc_box:$(".forgot-pass-success-wrapper")};var b=this;var a=0;this.forgot_password_modal=function(){this.forgot_password();$("#id-box-tip-user-login").find(".box-arrow-up").hide();$("#id-box-tip-user-login").find('[data-role="to-login"]').hide()};this.forgot_password=function(){a=b.ui.box_wrapper.height();b.ui.login_box.hide();b.ui.fp_box.fadeIn();b.ui.fp_suc_box.hide();b.ui.fp_box.find("input").focus();b.ui.box_wrapper.animate({height:"235px"},250)};this.cancel_forgot_password=function(){b.ui.login_box.fadeIn();b.ui.fp_box.hide();b.ui.fp_suc_box.hide();b.ui.box_wrapper.animate({height:a},250)};this.forgot_password_success=function(){b.ui.login_box.hide();b.ui.fp_box.hide();b.ui.fp_suc_box.fadeIn();b.ui.box_wrapper.animate({height:"-=70px"},250)};this.reset_login_ui=function(d){if(b.ui.fp_box.is(":visible")){b.cancel_forgot_password()}d.find("form").each(function(){this.reset()});d.find(".form-error").html("").hide();d.find(".form-success").hide();d.find(".box-arrow-up").css("right","80px")};$("#id-v2_5-account-login-form input").bind("keydown",function(d){if(d.keyCode==13){CBSAccount.session.loginToHttps()}});$("#id-v2_5-forgot-password-form input").bind("keydown",function(d){if(d.keyCode==13){CBSAccount.session.forgotPassword();return false}});$("#id-v2_5-account-login-form-inline input").bind("keydown",function(d){if(d.keyCode==13){CBSAccount.session.loginToHttps("id-v2_5-account-login-form-inline")}})};CBS.declareNS("CBS.Form");CBS.Form=function(d,a){this.settings={id:d||null,fields:a?f(a):{},type:""};this.callback={};this.errors=0;this.errorMsg="";this.messages=[];this.messages_obj=[];this.form=null;var b=this;function f(i){var h={};for(var g in i){if(i.hasOwnProperty(g)){var j=i[g];if(j.type=="date"){g=g+"[day]";h[g]={required:false,rule:"dob"}}else{h[g]={};if(j.validation){$.extend(h[g],j.validation)}}}}return h}this.getInputValues=function(){if(!a){throw new Error("Field schema not set: please pass fieldsSchema argument to CBS.Form construct")}var i=$("#"+b.settings.id);var h={};for(var g in a){if(a.hasOwnProperty(g)){switch(a[g]["type"]){case"date":h[g]=i.find('select[name="'+g+'[month]"]').val()+"/"+i.find('select[name="'+g+'[day]"]').val()+"/"+i.find('select[name="'+g+'[year]"]').val();break;case"select":h[g]=i.find('select[name="'+g+'"] option:selected').val();break;case"radio":h[g]=i.find('input[name="'+g+'"]:checked').val();break;default:h[g]=i.find('input[name="'+g+'"]').val()}}}return h};this.ShowError=function(j,k){this.messages.push(k);this.messages_obj[j.attr("id")]=k;try{var g=b.form.find('[data-for="wrap-'+j.attr("name")+'"]'),i=b.form.find('[data-for="err-'+j.attr("name")+'"]');g.addClass("has-error");i.html(k)}catch(h){if(j.next(".err__").length>0){j.parent().addClass("has-error");j.next(".err__").show().html(k)}else{if(j.parent().find(".err__").length>0){j.parent().addClass("has-error").find(".err__").show().html(k)}else{j.parent().parent().addClass("has-error").find(".err__").show().html(k)}}}try{if($.browser.msie&&parseInt($.browser.version)<=9){setTimeout(function(){var m=$("input");for(var l=0;l<m.length;l++){if($.trim($(m[l]).val())==""){$(m[l]).val("")}}},500)}}catch(h){}};this.ShowErrorMobile=function(g){this.errorMsg+=g};this.ClearError=function(){try{var g=b.form.find('[data-for="wrap-'+field.attr("name")+'"]'),i=b.form.find('[data-for="err-'+field.attr("name")+'"]');g.removeClass("has-error");i.html("")}catch(h){$(".err__").html("");$(".form-field").removeClass("has-error")}};this.HideError=function(i){var g=b.form.find('[data-for="wrap-'+i.attr("name")+'"]'),h=b.form.find('[data-for="err-'+i.attr("name")+'"]');g.removeClass("has-error");h.html("")};this.Reset=function(){try{document.getElementById(this.settings.id).reset()}catch(g){}};this.EnableFormatters=function(){return;var j,g=this.settings.fields;var l=this;for(var j in g){var k=$("#"+l.settings.id).find('input[name="'+j+'"]');var h=j;if(g[j].rule=="phone"){k.bind("keyup",function(){alert(h);k.val(l.Format.phone(k.val()))})}}};this.Validate=function(){b.form=$("#"+b.settings.id);var h,g=this.settings.fields;b.errors=0;for(var h in g){var j=b.form.find(':input[name="'+h+'"]');if(g[h].optional===true&&j.length==0){continue}if(g[h].required===true){if(this.Rules.required(h,j)){if(g[h].rule!=null){this.ValidateRule(h,j,g[h].rule,g[h].matcher)}}}else{this.ValidateRule(h,j,g[h].rule,g[h].matcher)}}};this.ValidateRule=function(g,j,i,k){try{if(typeof k!="undefined"){this.Rules[i](g,j,k)}else{this.Rules[i](g,j)}}catch(h){this.errors++;if(console){console.warn(j.attr("name")+': "'+i+'" is not a valid validation rule')}}};this.State=function(){this.Validate();return this.errors==0};this.Submit=function(){if(this.State()){document.getElementById(this.settings.id).submit()}};this.Rules={required:function(i,k){var g=k.attr("type");if(g=="checkbox"){if(!k.is(":checked")){if(k.attr("title")){if(b.settings.type=="mobile"){b.ShowErrorMobile(k.attr("title")+"<br />")}else{b.ShowError(k,k.attr("title"))}}else{if(b.settings.type=="mobile"){b.ShowErrorMobile(i.toNormalCase()+" is required <br/>")}else{b.ShowError(k,"Required")}}b.errors+=1;return false}else{b.HideError(k);return true}}else{if(g=="radio"){var j=true;k.each(function(){if($(this).is(":checked")){j=false}});if(j){b.errors+=1;b.ShowError(k.first(),i.toNormalCase()+" is required");return false}else{b.HideError(k.first());return true}}else{if(k.is("select")){var h=k.find("option:selected").val();if(h===""||h==="0"){b.errors+=1;b.ShowError(k,i.toNormalCase()+" is required");return false}else{b.HideError(k);return true}}}}if($.trim(k.val())==""){if(b.settings.type=="mobile"){if(k.attr("title")){b.ShowErrorMobile(k.attr("title")+" is required <br/>")}else{b.ShowErrorMobile(i.toNormalCase()+" is required <br/>")}}else{if(k.attr("title")){b.ShowError(k,k.attr("title")+" is required")}else{b.ShowError(k,i.toNormalCase()+" is required")}}b.errors+=1;return false}else{b.HideError(k);return true}},dob:function(i,k){var h=false,j=$(".dob-wrapper"),g=j.find("select");g.each(function(){if($(this).find("option:selected").val()==""){h=true}});if(h){b.errors+=1;b.ShowError(k,(k.attr("title")||"Birthday")+" is required")}else{b.HideError(k)}},email:function(g,h){b.Rules.__run(h,/^[-a-z0-9~!$%^&*_=+}{\'?]+(\.[-a-z0-9~!$%^&*_=+}{\'?]+)*@([a-z0-9_][-a-z0-9_]*(\.[-a-z0-9_]+)*\.(aero|arpa|biz|com|coop|edu|gov|info|int|mil|museum|name|net|org|pro|travel|mobi|[a-z][a-z])|([0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}))(:[0-9]{1,5})?$/i,g.toNormalCase()+" address is invalid")},alpha:function(g,h){b.Rules.__run(h,/^[-A-Za-z' ]*$/,"Only alphabets allowed")},phone:function(g,h){b.Rules.__run(h,/^(?:\+?1[-. ]?)?(?:\(?([0-9]{3})\)?[-. ]?)?([0-9]{3})[-. ]?([0-9]{4})$/,"invalid phone number")},alnum:function(g,h){b.Rules.__run(h,/^[-A-Za-z0-9\-#.,' ]*$/,"Invalid address")},address:function(g,h){b.alnum(h)},zip_country:function(g,i,h){h=$("#"+b.settings.id).find(':input[name="'+h+'"]');if(h.length>0){switch(h.val()){case"CA":return this.zip_ca(g,i);case"AU":return this.zip_au(g,i)}}return this.zip(g,i)},zip:function(g,h){b.Rules.__run(h,/^\d{5}(-\d{4})?$/,"Invalid zipcode")},zip_ca:function(g,h){b.Rules.__run(h,/^([A-Z][0-9][A-Z])\s*([0-9][A-Z][0-9])$/i,"Invalid zipcode")},zip_au:function(g,h){b.Rules.__run(h,/^(\d{4}|\d{5})$/,"Invalid zipcode")},alnumsp:function(g,h){b.Rules.__run(h,/^[-A-Za-z0-9\-#.@(),_' ]*$/,"Invalid input")},state:function(g,h){b.Rules.__run(h,/^(AK|AL|AR|AZ|CA|CO|CT|DC|DE|FL|GA|HI|IA|ID|IL|IN|KS|KY|LA|MA|MD|ME|MI|MN|MO|MS|MT|NB|NC|ND|NE|NH|NJ|NM|NV|NY|OH|OK|OR|PA|RI|SC|SD|TN|TX|UT|VA|VT|WA|WI|WV|WY|ON|QC|NS|NB|MB|BC|PE|SK|AB|NL|ACT|NSW|NT|QLD|SA|TAS|VIC|WA)$/i,"invalid state")},number:function(g,h){var i=$.trim(h.val());if((parseFloat(i)==parseInt(i))&&!isNaN(i)){b.HideError(h);return true}else{b.ShowError(h,"Only numbers allowed");b.errors+=1;return false}},length:function(g,i,h){if($.trim(i.val()).length<h){if(b.settings.type=="mobile"){b.ShowErrorMobile(g.toNormalCase()+" must be at least "+h+" characters long.<br />")}else{b.ShowError(i,g.toNormalCase()+" must be at least "+h+" characters long")}b.errors+=1;return false}else{b.HideError(i);return true}},length_max:function(g,i,h){if($.trim(i.val()).length>h){b.ShowError(i,g.toNormalCase()+" is over "+h+" characters long");b.errors+=1;return false}else{b.HideError(i);return true}},match_with:function(h,j,i){i=$("#"+b.settings.id).find(':input[name="'+i+'"]');if($.trim(i.val())!=$.trim(j.val())){var g=i.attr("placeholder").toNormalCase();if(b.settings.type=="mobile"){b.ShowErrorMobile(h.toNormalCase()+" does not match with "+g+"<br />")}else{b.ShowError(j,"Does not match with "+g)}b.errors+=1;return false}else{b.HideError(j);return true}},__run:function(h,g,i){if($.trim(h.val()).search(g)==-1){if(b.settings.type=="mobile"){b.ShowErrorMobile(i+"<br />")}else{b.ShowError(h,i)}b.errors+=1;return false}else{b.HideError(h);return true}}};this.Format={phone:function(i){var h=/^(?:\+?1[-. ]?)?(?:\(?([0-9]{3})\)?[-. ]?)?([0-9]{3})[-. ]?([0-9]{4})$/;if(h.test(i)){var j=i.match(h);var g="";if(j[1]){g+="1 ("+j[1]+") "}g+=j[2]+"-"+j[3];return g}else{return i}}}};CBS.declareNS("CBS.V2.Graph");CBS.V2.Graph=function(){var a={obj:null,base_url:"/graph",status:null,api:null};this.settings={account:null,video:false};this.modal={};this.tooltip={};this.session={};this.activity={};this.comment={};a.obj=this;this.callback={onOverlayOpen:null,onOverlayClose:null,onFacebookConnect:null,onFacebookConnectFromShare:null,onFacebookCancel:null,onActivityRecord:null};this.invoke=function(f,d){if(f!=null){try{if(typeof(f)=="string"){window[f](d)}if(typeof(f)=="function"){f(d)}}catch(b){}}};this.modal.html='<div id="id-graph-overlay"><div class="__wrapper__"></div></div>';this.modal.inject=function(){if($("#id-graph-overlay").size()==0){$("body").append(a.obj.modal.html)}return a.obj.modal.box=$("#id-graph-overlay")};this.modal.facebook=function(){};this.modal.close=function(){a.obj.modal.box.overlay().close();a.obj.invoke(a.obj.callback.onOverlayClose)};this.modal.reposition=function(f,g){var d=$("#"+f);var h="";if(window.innerWidth==undefined){h=screen.width}else{h=window.innerWidth}var b=d.width();var i=(h/2-b/2);d.css({left:i});if(arguments.length==2&&g===true){d.css("width","auto")}};this.modal.openExternal=function(d,f){var b="";if(arguments.length==1){b=a.base_url+d}if(arguments.length==2&&f===false){b=d}a.obj.tooltip.closeAll();a.obj.modal.inject().overlay({mask:"black",load:true,onLoad:function(){a.obj.invoke(a.obj.callback.onOverlayOpen,null)},onBeforeLoad:function(){this.getOverlay().find(".__wrapper__").load(b)},onClose:function(){a.obj.modal.box.remove();a.obj.invoke(a.obj.callback.onOverlayClose,null)}}).load();a.obj.modal.reposition("id-graph-overlay",true);a.obj.invoke(a.obj.callback.onOverlayOpen);a.obj.modal.box.find(".close").live("click",function(){a.obj.modal.box.overlay().close()})};this.modal.connect=function(){a.obj.modal.openExternal("/modal/connect")};this.modal.socialSharing=function(){try{a.obj.modal.box.data("overlay").getOverlay().find(".__wrapper__").load(a.base_url+"/modal/share/")}catch(b){a.obj.modal.openExternal("/modal/share")}};this.modal.survey=function(){a.obj.modal.openExternal("/user/survey/modal/",false)};this.tooltip.activities=function(){try{var d=$("#og-user-bar-status");a.obj.tooltip.arrow(d);d.tooltip({position:"bottom left",events:{def:"click, ''",tooltip:"click"},effect:"slide",offset:[3,81],tip:"#id-og-tip-shared-activities"});if(typeof $("#og-account-login").data("tooltip")!="undefined"){a.obj.tooltip.close("og-account-login")}d.data("tooltip").show();a.obj.activity.load()}catch(b){}};this.tooltip.activitiesConnectConfirm=function(){$.get(a.base_url+"/modal/share/tip/",function(b){$("#id-og-tip-shared-activities div.body").html(b)})};this.tooltip.account=function(){var b=[3,-74];try{var f=$("#og-account-login");a.obj.tooltip.arrow(f);f.tooltip({position:"bottom right",events:{def:"click, ''",tooltip:"click"},effect:"slide",offset:b,tip:"#id-og-tip-user-account"});if(typeof $("#og-user-bar-status").data("tooltip")!="undefined"){a.obj.tooltip.close("og-user-bar-status")}f.data("tooltip").show()}catch(d){}};this.tooltip.login=function(d,k,m,l,h){try{var b="";var g=[15];var i="bottom center";if(k!=undefined&&k!=""){g=k}if(m!=undefined&&m!=""){if(CBSAccount.getUserId()){CBSAccount.invoke(m);return}CBSAccount.callback.onLogin=CBSAccount.callback.onRegisterSocial=m}if(d!=undefined&&d!=""){b=$("#"+d);$("#id-og-tip-user-login").addClass("middle")}else{b=$("#og-account-login");i="bottom left";$("#id-og-tip-user-login").removeClass("middle")}if(a.api!=null){$(a.api).removeData("tooltip")}a.api=b;a.obj.tooltip.arrow(b);b.tooltip({position:i,events:{def:"click, ''",tooltip:"click"},effect:"slide",offset:g,tip:"#id-og-tip-user-login"});var f=$("#id-og-tip-user-login .cls-cbs-login-box-signup-link");if(arguments.length>=4&&l){f.attr("href",f.attr("href")+"?c")}else{f.attr("href",f.attr("href").replace("?c",""))}if(arguments.length>=5&&h){a.obj.comment.setUpCommentModalView()}else{a.obj.comment.removeCommentModalView()}b.data("tooltip").show();$("#id-og-tip-user-login .close").bind("click",function(){$(a.api).data("tooltip").hide();a.obj.tooltip.arrow(a.api,false)})}catch(j){}};this.comment.setUpCommentModalView=function(){$("#id-og-tip-user-login").addClass("comment");$("#j_username + span.input-overlay").show().click(function(){$(this).hide();$("#j_username").focus()});$("#j_password + span.input-overlay").show().click(function(){$(this).hide();$("#j_password").focus()});$("#j_username").focus(function(){$("#j_username + span.input-overlay").hide()});$("#j_password").focus(function(){$("#j_password + span.input-overlay").hide()});if($.trim($("#j_username").val()).length>0){$("#j_username + span.input-overlay").hide()}if($.trim($("#j_password").val()).length>0){$("#j_password + span.input-overlay").hide()}};this.comment.removeCommentModalView=function(){$("#id-og-tip-user-login").removeClass("comment");$("#j_username + span.input-overlay").hide();$("#j_password + span.input-overlay").hide()};this.tooltip.close=function(f){try{var d=$("#"+f);if(typeof d.data("tooltip")!="undefined"){d.data("tooltip").hide();a.obj.tooltip.arrow(d,false)}}catch(b){}};this.tooltip.closeAll=function(){var d=["og-account-login","og-user-bar-status"];for(var b in d){a.obj.tooltip.close(d[b])}};this.tooltip.arrow=function(d,b){if(arguments.length==2&&!b){d.find("div.og-account-login-arrow").removeClass("arrow-up").addClass("arrow-down");$(".fyre-user-loggedout").removeClass("lf-arrow-up").addClass("lf-arrow-down")}else{d.find("div.og-account-login-arrow").removeClass("arrow-down").addClass("arrow-up");$(".fyre-user-loggedout").removeClass("lf-arrow-down").addClass("lf-arrow-up")}};this.session.facebook=function(){var d=500,b=350;var g=(screen.width/2)-(d/2);var f=(screen.height/2)-(b/2);window.open(a.base_url+"/session/facebook/","ConnectWithFB","width="+d+",height="+b+",status=0,toolbar=0,scrollbars=1,top="+f+",left="+g)};this.silent=function(b){if($(b).is(":checked")){$.get(a.base_url+"/silent/")}};this.share=function(b){if(arguments.length==0){b=true}var d;if(b){d="on";$(".social-share-status-off").removeClass("active");$(".social-share-status-on").addClass("active")}else{d="off";$(".social-share-status-on").removeClass("active");$(".social-share-status-off").addClass("active")}a.obj.tooltip.closeAll();$.get(a.base_url+"/share/"+d,function(g){try{a.obj.modal.box.overlay().close()}catch(f){}if(g.success){a.obj.settings.account.view.userBar("user")}else{if(g.message=="NOT_CONNECTED"){a.obj.modal.connect()}}})};this.status=function(){$.get(a.base_url+"/status/",function(d){a.status=d;if(d.success){if(d.graph=="silent"){return}if(!d.user){try{FB.getLoginStatus(function(f){if(f.status!="unknown"){a.obj.modal.connect()}},true)}catch(b){}}}})};this.activity.save=function(b){$.get(a.base_url+"/activity/video/"+b,function(d){if(d.post){if($("#og-video-share-info").size()!=0){$("#og-video-share-info").html(d.html).fadeIn()}setTimeout(function(){$("#og-video-share-info").html("").fadeOut()},30000)}a.obj.invoke(a.obj.callback.onActivityRecord,d)})};this.activity.load=function(){$.get(a.base_url+"/activity/list/",function(b){$("#id-og-tip-shared-activities .activities-content-wrapper").html(b.html)})};this.activity.videoInfoClose=function(){if($("#og-video-share-info").size()!=0){$("#og-video-share-info").html("").hide()}};this.activity.remove=function(b){$.get(a.base_url+"/activity/"+b+"/remove/",function(d){if(d.success&&d.removed){$("a[rel='og-activity-id-"+b+"'].share-type-1").html("not shared").removeClass("activity-share-btn").addClass("not-shared");$("a[rel='og-activity-id-"+b+"'].share-type-2").remove();$("div[rel='og-activity-text-"+b+"']").html("not shared")}else{if(d.message=="NOT_CONNECTED"){a.obj.modal.connect()}}})}};var graph=new CBS.V2.Graph();if(typeof CBSAccount=="undefined"){graph.settings.account=new CBSAccount}else{graph.settings.account=CBSAccount}Array.prototype.jsonClass=function(){var b=this;var h=function(){var k=arguments;var m;for(var n=0;n<b.length;n++){if(typeof b[n]=="object"){for(var l in b[n]){this[l]=this[l]!=m?this[l]:b[n][l]}}if(typeof b[n]!="string"||k[n]===m){continue}this[b[n]]=k[n]}};var f=false;for(var g=0;g<=b.length;g++){var d=b[g]||h;if(typeof d=="function"){d.prototype=f||d.prototype;f=new d()}}h.addMembers=function(j){for(var a in j){h.prototype[a]=j[a]}};return h};var debugDomainName="";function debugDomain(){var a=""+document.location;if(a.indexOf("local.colbert.com")!=-1){a=".colbert.com"}else{if(a.indexOf(".colbertlateshow.com")!=-1){a=".colbertlateshow.com"}else{a=".cbs.com"}}debugDomainName=a}debugDomain();function getHPCookie(a){var b=document.cookie.indexOf(a+"=");return unescape(document.cookie.substring(b+a.length+1,b+a.length+2))}var daysSince="";var repeatVisitor="";var currentPath=document.location.pathname;var pageURL=currentPath.toString();var windowURL=window.location.href;var sliceURL=windowURL.indexOf(pageURL);sliceURL=sliceURL+pageURL.length;var currentURL=windowURL.substring(sliceURL);var pageurlName=document.location.pathname;if(pageurlName=="/"){pageurlName="/index"}pageurlLength=pageurlName.length;slashcheck=pageurlName.charAt(pageurlLength-1);if(slashcheck=="/"){pageurlName=pageurlName+"index"}if(pageurlName.indexOf("index.php")!=-1){chop=pageurlName.split("index.php");pageurlName=chop[0]+"index"}if(pageurlName.indexOf("index.shtml")!=-1){chop=pageurlName.split("index.shtml");pageurlName=chop[0]+"index"}if(pageurlName.indexOf("index.html")!=-1){chop=pageurlName.split("index.html");pageurlName=chop[0]+"index"}var date=new Date("23 Oct 2007 22:36:18 +0000");var date=new Date();var days=new Array("Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday");var pageHour=date.getHours()+":00";var pageDay=days[date.getDay()];var serverName="www.cbs.com";var userID="Anonymous";function checkLoginCookie(){if(document.cookie.indexOf("cbscomm_name")!=-1){userID="Named"}else{userID="Anonymous"}}checkLoginCookie();function setGenAd(){vTag=defaultVTag}function getRand(){var a=new Date();randomnum=parseInt(a.getTime()+(Math.random()*100));return randomnum}var ord=getRand();shuffle=function(f){for(var b,a,d=f.length;d;b=parseInt(Math.random()*d),a=f[--d],f[d]=f[b],f[b]=a){}return f};function randAdvCookie(){if(document.cookie.indexOf("CBS_ADV_VAL")!=-1){}else{myArray=new Array("a","b","c","d");shuffle(myArray);var a=myArray[0];document.cookie="CBS_ADV_VAL="+a+";domain="+debugDomainName+";path=/"}}randAdvCookie();function randAdvSubsesCookie(){if(document.cookie.indexOf("CBS_ADV_SUBSES_VAL")!=-1){}else{myArray=new Array("1","2","3","4");shuffle(myArray);var a=myArray[0];document.cookie="CBS_ADV_SUBSES_VAL="+a+";domain="+debugDomainName+";path=/"}}randAdvSubsesCookie();function getAdvCookie(a){var b=document.cookie.indexOf(a+"=");return unescape(document.cookie.substring(b+a.length+1,b+a.length+2))}var newAd="";var defaultAd="";var defaultVTag="";function genAd(h,E,C){if(typeof h=="undefined"){alert("You must define ad size")}if(typeof E=="undefined"){E=0}var u=false;var G=false;var l=false;var I=false;var i=false;var H="6";var L="presenting";var t=E;var K=C;if(typeof(K)=="undefined"){K=""}if(t=="r4"){if(document.cookie.indexOf("CBS_ADV_VAL")!=-1){var J=getAdvCookie("CBS_ADV_VAL");switch(J){case"a":var q=";adv=a";break;case"b":var q=";adv=b";break;case"c":var q=";adv=c";break;case"d":var q=";adv=d";break;case"e":var q=";adv=e";break;case"f":var q=";adv=f";break;default:var q="";break}}}else{if(t=="tko"){u=true;if(document.cookie.indexOf("CBS_ADV_VAL")!=-1){var J=getAdvCookie("CBS_ADV_VAL");switch(J){case"a":var q=";adv=a";break;case"b":var q=";adv=b";break;case"c":var q=";adv=c";break;case"d":var q=";adv=d";break;case"e":var q=";adv=e";break;case"f":var q=";adv=f";break;default:var q="";break}}}else{if(t=="lbtko"){l=true;if(document.cookie.indexOf("CBS_ADV_VAL")!=-1){var J=getAdvCookie("CBS_ADV_VAL");switch(J){case"a":var q=";adv=a";break;case"b":var q=";adv=b";break;case"c":var q=";adv=c";break;case"d":var q=";adv=d";break;case"e":var q=";adv=e";break;case"f":var q=";adv=f";break;default:var q="";break}}}else{if(t=="bgtko"){i=true;if(document.cookie.indexOf("CBS_ADV_VAL")!=-1){var J=getAdvCookie("CBS_ADV_VAL");switch(J){case"a":var q=";adv=a";break;case"b":var q=";adv=b";break;case"c":var q=";adv=c";break;case"d":var q=";adv=d";break;case"e":var q=";adv=e";break;case"f":var q=";adv=f";break;default:var q="";break}}}else{if(t=="hptko"){G=true;if(document.cookie.indexOf("CBS_ADV_VAL")!=-1){var J=getAdvCookie("CBS_ADV_VAL");switch(J){case"a":var q=";adv=a";break;case"b":var q=";adv=b";break;case"c":var q=";adv=c";break;case"d":var q=";adv=d";break;case"e":var q=";adv=e";break;case"f":var q=";adv=f";break;default:var q="";break}}}else{if(t=="lbhptko"){I=true;if(document.cookie.indexOf("CBS_ADV_VAL")!=-1){var J=getAdvCookie("CBS_ADV_VAL");switch(J){case"a":var q=";adv=a";break;case"b":var q=";adv=b";break;case"c":var q=";adv=c";break;case"d":var q=";adv=d";break;case"e":var q=";adv=e";break;case"f":var q=";adv=f";break;default:var q="";break}}}else{if(t=="f4"){H="2";L="feature";if(document.cookie.indexOf("CBS_ADV_VAL")!=-1){var J=getAdvCookie("CBS_ADV_VAL");switch(J){case"a":var q=";adv=a";break;case"b":var q=";adv=b";break;case"c":var q=";adv=c";break;case"d":var q=";adv=d";break;case"e":var q=";adv=e";break;case"f":var q=";adv=f";break;default:var q="";break}}}}}}}}}var a=h.split("x");var b=a[0];var f=a[1];adTile=1;if(h=="728x90"){adTile=1}else{if(h=="160x600"){adTile=3}else{if(h=="300x250"){adTile=4}else{if(h=="300x600"){adTile=5}else{if(h=="985x40"){adTile=7}else{if(h=="300x60"){adTile=8}else{if(h=="234x60"){}else{if(h=="300x43"){adTile=2}else{if(h=="1185x800"){adTile=7}else{if(h=="160x86"){adTile=3}else{if(h=="300x150"){adTile=3}}}}}}}}}}}var A="0";var z="ist";if(u==true){var x='<SCRIPT language="JavaScript" SRC="http://ad.doubleclick.net/adj/'+vTagTakeover+";"+userIDTakeover+";prod=takeover;sz="+h+";tile=1"+q+";abr=!webtv;ord="+ord+'?"></SCRIPT>'}else{if(l==true){var r='<SCRIPT language="JavaScript" SRC="http://ad.doubleclick.net/adj/'+vTagTakeover+";"+userIDTakeover+";prod=leavebehind;sz="+h+";tile=1"+q+";abr=!webtv;ord="+ord+'?"></SCRIPT>'}else{if(G==true){var d='<SCRIPT language="JavaScript" SRC="http://ad.doubleclick.net/adj/'+vTagTakeover+";"+userIDTakeover+";prod=takeover;sz="+h+q+ord+'?"></SCRIPT>'}else{if(I==true){var O='<SCRIPT language="JavaScript" SRC="http://ad.doubleclick.net/adj/'+vTagTakeover+";"+userIDTakeover+";prod=leavebehind;sz="+h+q+ord+'?"></SCRIPT>'}else{if(i==true){var w='<SCRIPT language="JavaScript" SRC="http://ad.doubleclick.net/adj/'+vTag+";sec="+A+";dcopt="+z+";sz=1x1;tile="+(adTile++)+q+";abr=!webtv;ord="+ord+'?"></SCRIPT>'}else{if(h=="160x86"){var m='<SCRIPT language="JavaScript" SRC="http://ad.doubleclick.net/adj/'+vTag+";sec="+A+";sz="+h+";tile="+H+";prod="+L+";dcopt="+z+q+";abr=!webtv;ord="+ord+'?"></SCRIPT>';newAd=m}else{if(h=="300x150"){var m='<SCRIPT language="JavaScript" SRC="http://ad.doubleclick.net/adj/'+vTag+";sec="+A+";sz="+h+";tile="+H+";prod="+L+";dcopt="+z+q+";abr=!webtv;ord="+ord+'?"></SCRIPT>';newAd=m}else{if(h=="300x250"){if(K==""){var k={SP:"16",POS:"100"};cbsiGetAd(k)}else{if(K=="200"){var g={SP:"16",POS:"200"};cbsiGetAd(g)}}}else{if(h=="120x60"){if(K==""){var o={SP:"139",POS:"100"};cbsiGetAd(o)}else{if(K=="200"){var j={SP:"139",POS:"200"};cbsiGetAd(j)}}}else{if(h=="300x600"){var F={SP:"122",POS:"100"};cbsiGetAd(F)}else{if(h=="160x600"){var B={SP:"18",POS:"100"};cbsiGetAd(B)}else{if(h=="234x60"){var y={SP:"63",POS:"100"};cbsiGetAd(y)}else{if(h=="981x300"){var s={SP:"203",POS:"100"};cbsiGetAd(s)}else{if(h=="728x90"){if(K==""){var v={SP:"15",POS:"100"};cbsiGetAd(v)}else{if(K=="200"){var p={SP:"15",POS:"200"};cbsiGetAd(p)}}}else{if(h=="1185x800"){var M={SP:"205",POS:"100"}}else{if(h=="1600x1000"){var n={SP:"119",POS:"100"};cbsiGetAd(n)}else{if(h=="970x418"){var D={SP:"234",POS:"100"};cbsiGetAd(D)}else{var m='<SCRIPT language="JavaScript" SRC="http://ad.doubleclick.net/adj/'+vTag+";sec="+A+";sz="+h+";tile="+(adTile++)+";dcopt="+z+q+";abr=!webtv;ord="+ord+'?"></SCRIPT>';newAd=m}}}}}}}}}}}}}}}}}try{defaultAd="http://ad.doubleclick.net/adj/"+vTag+";sec=0;sz=300x250;tile=4;dcopt=ist"+q+";abr=!webtv;ord="+ord+"?"}catch(N){}}function checkAd(){alert(newAd)}function checkDART(){var b=newAd.match(/SRC="(.*)"/);if(b){alert(b[1])}else{alert(newAd)}}var recapSeasonValue="";var recapEpisodeValue="";var recapURL="";function extractUrlFragment(d){var b=d;if(b.indexOf("recaps")>-1){var g=b.indexOf("recaps")+7;var a=b.substr(g);var f=a.indexOf("/");a=a.substr(0,f);if(a.length==3){var i=a.substr(0,1);recapSeasonValue=i;var h=a.substr(1);if(h.indexOf("0")==0){h=h.substr(1)}recapEpisodeValue=h}if(a.length==4){var i=a.substr(0,2);recapSeasonValue=i;var h=a.substr(2);if(h.indexOf("0")==0){h=h.substr(1)}recapEpisodeValue=h}}}function refreshDFPAds(a){if(googletag!=="undefined"){if(a!=="undefined"&&a instanceof Array){for(var b=0;b<a.length;b++){googletag.cmd.push(function(){googletag.pubads().refresh(a[b])})}}else{googletag.cmd.push(function(){googletag.pubads().refresh()})}}}CBS.Registry.homepage=true;(function(d){var a=function(m,l){var j=d.extend({},d.fn.cbsmarquee.defaults,l);var i={cS:0,cI:"",totalSlides:0,run:false,paused:false,stop:false};var g=d(m);g.data("cbsSlider:vars",i);g.css("position","relative");g.addClass("nivoSlider");var h=g.children().not("div");h.each(function(){var n=d(this);var k="";if(!n.is("img")){if(n.is("a")){n.addClass("nivo-imageLink");k=n}n=n.find("img:first")}if(k!=""){k.css("display","none")}n.css("display","none");i.totalSlides++});if(j.startSlide>0){if(j.startSlide>=i.totalSlides){j.startSlide=i.totalSlides-1}i.cS=j.startSlide}if(d(h[i.cS]).is("img")){i.cI=d(h[i.cS])}else{i.cI=d(h[i.cS]).find("img:first")}if(d(h[i.cS]).is("a")){d(h[i.cS]).css("display","block")}g.css("background",'url("'+i.cI.attr("src")+'") no-repeat');if(j.pauseOnHover){g.find("a").focus(function(){i.paused=true;clearInterval(f);f="";d(document).bind("keydown",function(k){if(k.keyCode==39){d("a.nivo-nextNav",g).trigger("click")}if(k.keyCode==37){d("a.nivo-prevNav",g).trigger("click")}})});g.find("a").focusout(function(){i.paused=false;if(f==""&&!j.manualAdvance){f=setInterval(function(){b(g,h,j,false)},j.pauseTime)}});g.hover(function(){i.paused=true;clearInterval(f);f=""},function(){i.paused=false;if(f==""&&!j.manualAdvance){f=setInterval(function(){b(g,h,j,false)},j.pauseTime)}})}g.bind("cbsSlider:animFinished",function(){i.run=false;d(h).each(function(){if(d(this).is("a")){d(this).css("display","none")}});if(d(h[i.cS]).is("a")){d(h[i.cS]).css("display","block")}if(f==""&&!i.paused&&!j.manualAdvance){f=setInterval(function(){b(g,h,j,false)},j.pauseTime)}j.afterChange.call(this)});var f=0;if(!j.manualAdvance&&h.length>1){f=setInterval(function(){b(g,h,j,false)},j.pauseTime)}if(j.directionNav){g.append('<div class="nivo-directionNav"><a class="nivo-prevNav">'+j.prevText+'</a><a class="nivo-nextNav">'+j.nextText+"</a></div>");if(j.directionNavHide){d(".nivo-directionNav",g).hide();g.hover(function(){d(".nivo-directionNav",g).show()},function(){d(".nivo-directionNav",g).hide()})}d("a.nivo-prevNav",g).live("click",function(){if(i.run){return false}clearInterval(f);f="";i.cS-=2;b(g,h,j,"prev")});d("a.nivo-nextNav",g).live("click",function(){if(i.run){return false}clearInterval(f);f="";b(g,h,j,"next")})}if(j.pauseOnHover){g.hover(function(){i.paused=true;clearInterval(f);f=""},function(){i.paused=false;if(f==""&&!j.manualAdvance){f=setInterval(function(){b(g,h,j,false)},j.pauseTime)}})}g.bind("cbsSlider:animFinished",function(){i.run=false;d(h).each(function(){if(d(this).is("a")){d(this).css("display","none")}});if(d(h[i.cS]).is("a")){d(h[i.cS]).css("display","block")}if(f==""&&!i.paused&&!j.manualAdvance){f=setInterval(function(){b(g,h,j,false)},j.pauseTime)}j.afterChange.call(this)})};var b=function(f,i,j,h){var g=f.data("cbsSlider:vars");if(g&&(g.cS==g.totalSlides-1)){j.lastSlide.call(this)}if((!g||g.stop)&&!h){return false}j.beforeChange.call(this);if(!h){f.css("background",'url("'+g.cI.attr("src")+'") no-repeat')}else{if(h=="prev"){f.css("background",'url("'+g.cI.attr("src")+'") no-repeat')}if(h=="next"){f.css("background",'url("'+g.cI.attr("src")+'") no-repeat')}}g.cS++;if(g.cS==g.totalSlides){g.cS=0;j.slideshowEnd.call(this)}if(g.cS<0){g.cS=(g.totalSlides-1)}if(d(i[g.cS]).is("img")){g.cI=d(i[g.cS])}else{g.cI=d(i[g.cS]).find("img:first")}j.onChangeSlide.call(this);if(j.controlNav){d(".nivo-controlNav a",f).removeClass("active");d(".nivo-controlNav a:eq("+g.cS+")",f).addClass("active")}d(".nivo-slice",f).remove();d(".nivo-box",f).remove();g.run=true;f.append(d('<div class="nivo-slice"></div>').css({left:"0px",width:(g.cI.attr("width"))+"px",height:"0px",opacity:"0",background:'url("'+g.cI.attr("src")+'") no-repeat -'+0+"px 0%"}));var l=d(".nivo-slice",f);l.css({height:"100%",width:f.width()+"px"});l.animate({opacity:"1.0"},(j.animSpeed*2),"",function(){f.trigger("cbsSlider:animFinished")});j.afterLoad.call(this);return this};d.fn.cbsmarquee=function(f){return this.each(function(){var g=d(this);if(g.data("cbsslider")){return g.data("cbsslider")}var h=new a(this,f);g.data("cbsslider",h)})};d.fn.cbsmarquee.defaults={animSpeed:500,pauseTime:3000,slices:15,startSlide:0,directionNav:true,directionNavHide:false,manualAdvance:false,prevText:"Prev",nextText:"Next",onChangeSlide:function(){},beforeChange:function(){},afterChange:function(){},slideshowEnd:function(){},lastSlide:function(){},afterLoad:function(){}}})(jQuery);$(function(){var a="cbs-marquee-wrapper";var g=1;var f;var b=function(){$(".cbs-show-marquee-buylink").clearQueue().animate({opacity:0},300,function(){$(".cbs-show-marquee-buylink").hide(0,function(){$('.nivo-lnkContainer[data-slidenum="'+g+'"] > .cbs-show-marquee-buylink').show().clearQueue().animate({opacity:1},500)})})};var d=function(){$(".cbs-show-marquee-buylink").clearQueue().hide(0,function(){$('.nivo-lnkContainer[data-slidenum="'+g+'"] > .cbs-show-marquee-buylink').clearQueue().show(0).css({opacity:1})})};$("#cbs-marquee-wrapper").cbsmarquee({directionNav:true,pauseOnHover:true,animSpeed:500,pauseTime:6000,onChangeSlide:function(){var h=$("#"+a);f=parseInt((h.data("cbsSlider:vars").totalSlides));g=parseInt((h.data("cbsSlider:vars").cS)+1);if($.browser.msie&&parseInt($.browser.version)<8){d()}else{if($(".nivo-lnkContainer").length==f){d()}else{if($('.nivo-lnkContainer[data-slidenum="'+g+'"]').length==0){b()}else{if($('.nivo-lnkContainer[data-slidenum="'+g+'"]').length==1&&$('.nivo-lnkContainer[data-slidenum="'+(g-1)+'"]').length==0){b()}else{d()}}}}}});d();$(".buyLink").click(function(){$(this).parents("a").click(function(){return false})})});try{$(".cbs-shows-scrollable div.content-pane").scrollable({circular:true,next:".c-next",prev:".c-prev"})}catch(e){}function showVideo(b,d){var f="",a=$("#marquee_overlay");if(arguments.length==2){f=d}a.remove();$("body").append('<div id="marquee_overlay"><div class="close">Close</div><div class="contentWrap"></div></div>');a.overlay({mask:{color:"#000",loadSpeed:200,opacity:1},closeOnClick:false,closeOnEsc:true,top:84,load:true,onClose:function(){$("#marquee_overlay").remove();$("#exposeMask").remove();$("body").css("overflow","auto")},onLoad:function(){$("body").css("overflow","hidden");this.getOverlay().insertAfter("#exposeMask");$("#marquee_overlay").find("div.contentWrap").load("/home/video/"+b+"/"+f)}}).load()}function getCookie(b){var d,a,g,f=document.cookie.split(";");for(d=0;d<f.length;d++){a=f[d].substr(0,f[d].indexOf("="));g=f[d].substr(f[d].indexOf("=")+1);a=a.replace(/^\s+|\s+$/g,"");if(a==b){return unescape(g)}}return null}if(window.location!=window.parent.location&&typeof ClickTaleContext=="undefined"){window.parent.location="http://www.cbs.com"}var _cbs_adv=getCookie("CBS_ADV_VAL");try{if(getCookie("CBS_ADV_VAL").indexOf("page")==-1){document.cookie="CBS_ADV_VAL="+escape(getCookie("CBS_ADV_VAL")+";page=cbshome")+";domain=.cbs.com;path=/"}}catch(e){}window.onunload=function(){document.cookie="CBS_ADV_VAL="+escape(_cbs_adv)+";domain=.cbs.com;path=/"};CBS.NoFrame();$.fn.homepageCarousel=function(f,d){var b="/carousels/homepage/show/{showId}/offset/{offset}/limit/{limit}/",a={id:"full-ep-carousel",endPoint:b,filter:f,saveState:false,templates:d};return $(this).bind("videoDataLoadError",function(g,h){h.showMessage("Sorry, no videos available")}).videoCarousel(a)};DW_onid="1";DW_page_type="2000";var ARCHIVES="19677";var CLASSICS="19655";var DAYTIME="19651";var FORUM="19402";var GAME="19798";var LATE_NIGHT="19652";var ORIGINALS="19653";var PRIMETIME="19650";var SPECIALS="19654";var SPONSORED_MICRO_SITE="19648";var NON_SPONSORED_MICRO_SITE="19649";var CBS_SPORTS="31133";var CBS_NEWS="31132";var CBS_VIDEO="31152";var CBS_COMMUNITY="31130";var PLATFORM_SERVICES="35373";var HOME="6710";var VIDEO="6711";var COMMUNITY="6724";var PHOTOS="6714";var PHOTOS_INDIVIDUAL="6715";var VIDEO_LISTICLE_MAIN="6810";var VIDEO_LISTICLE_DETAIL="6811";var RECAPS="6712";var RECAPS_INDIVIDUAL="6713";var BIO="6717";var BIO_INDIVIDUAL="6718";var FANTASY="6720";var ABOUT="6719";var BLOG="6738";var BLOG_DETAIL="6814";var SOCIAL_MEDIA_EMBED="6813";var SITE_INDEX="6727";var FORUM="6722";var POLLS="6723";var INTERVIEWS="6732";var INTERVIEWS_INDIVIDUAL="6753";var VIEWING_ROOM="6725";var VIEWING_ROOM_INDIVIDUAL="6716";var REGISTER_INDIVIDUAL="6754";var UPLOAD="6761";var COLLECTIONS="6747";var VOTE="6735";var TICKETS="6741";var AIRDATES="6743";var ONE_OFF="6751";var RULES="6795";var GAMES="6733";var GAMES_MAIN="6728";var GAMES_LIST="6729";var GAMES_PAGE="6730";var SWEEPSTAKES="6740";var ARCADE="6765";var BOARDCARD="6763";var CASTING="6744";var FAQS="6749";var FEEDBACK="6750";var FRONTDOOR="2000";var HD="6711";var NEWSLETTER="6739";var PRINTABLE_INDIVIDUAL="6752";var PROMOTION="6736";var PUZZLE="6764";var SOCIALROOM="6725";var WEBISODES="6755";var FOLLOW="6777";var PHILS_DIARY_INDIVIDUAL="6745";var PHILS_RIDE_INDIVIDUAL="6745";var PLAYER_OF_THE_WEEK="6726";var PONDEROSA_INDIVIDUAL="6745";var NOMINEES="6742";var FAN_PANEL="6734";var ELIMINATION_STATION_INDIVIDUAL="6745";var SHOW="19401";var FEATURE="19595";var UTILITY="19596";var VIDEO_INDIVIDUAL="6727";var FORUM_TOPIC="6723";var WATCH_AND_VOTE="6746";var VIDEO_CHAT_INDIVIDUAL="6727";var STARS="6746";var SPECIAL_VIDEOS="6745";var SPORTS="6766";var SPONSORED_SECTION="6748";var RECIPES_INDIVIDUAL="6759";var SCHEDULE_INDIVIDUAL="6762";var PARTNER_LANDING="6731";var MUSIC="6760";var INTERACT="6767";var MAGAZINE_EXCERPT="6684";var HOUSECALLS="6737";var HOUSECALLS_INDIVIDUAL="6727";var BOOK_EXCERPT="6683";if(typeof DW_onid=="undefined"){DW_onid=""}else{DW_onid=eval(DW_onid)}if(typeof DW_subonid!="undefined"){DW_onid+=":"}if(typeof DW_subonid=="undefined"){DW_subonid=""}else{DW_subonid=DW_subonid}if(typeof DW_subsub=="undefined"){DW_subsub=""}else{DW_subsub=":"+eval(DW_subsub)}if(DW_subsub==""){if(DW_subonid==""){onidFinal=DW_onid}else{onidFinal=DW_subonid}}else{onidFinal=DW_subsub.replace(":","")}if(typeof DW_page_type=="undefined"){DW_page_type=""}else{DW_page_type=eval(DW_page_type)}if(typeof DW_adnode=="undefined"){if(DW_subsub!=""){DW_adnode=DW_subsub.replace(":","")}else{DW_adnode=DW_subonid.replace(":","")}}else{DW_adnode=""}if(typeof(DW_siteid)=="undefined"){var DW_siteid="164"}var ncat=DW_onid+DW_subonid+DW_subsub+":";var DW_ptid=DW_page_type;var DW_title=document.title;function read_cookie(b){var a=document.cookie.match("(^|;) ?"+b+"=([^;]*)(;|$)");if(a){return(unescape(a[2]))}else{return null}}var DW_ursuid=read_cookie("cbscomm_u");function getAdvCookie(a){var b=document.cookie.indexOf(a+"=");return unescape(document.cookie.substring(b+a.length+1,b+a.length+2))}if((document.location.href=="http://www.cbs.com/")||(document.location.href=="http://cbsstatic.dev.drt.cbsig.net/")||(document.location.href=="http://integ-www.cbs.com/")||(document.location.href=="http://170.20.125.193/")){DW_adnode="1";DW_ptid="2000"}if(typeof cbsiRegisterAdGlobals!="undefined"&&typeof cbsiSetDeferredLocalPage!="undefined"&&typeof cbsiGetAd!="undefined"){var cbsiAdGlobal=new Object();if(typeof dvar_genre=="undefined"){dvar_genre=""}cbsiAdGlobal.SITE=DW_siteid;cbsiAdGlobal.PTYPE=DW_ptid;cbsiAdGlobal.BRAND="57";cbsiAdGlobal.DVAR_SESSION=getAdvCookie("CBS_ADV_VAL");cbsiAdGlobal.DVAR_GENRE=dvar_genre;if(typeof(bypasskey)!="undefined"){cbsiAdGlobal.BYPASSKEY=bypasskey}cbsiAdGlobal.NCAT=ncat;if((window.location.hostname=="shadow.cbs.com")||(window.location.hostname=="stage-3.cbs.com")||(window.location.hostname=="10.0.2.2")){cbsiAdGlobal.AD_HOST="madstage.cbs.com"}else{cbsiAdGlobal.STAGING="0"}cbsiAdGlobal.NODE=DW_adnode;cbsiRegisterAdGlobals(cbsiAdGlobal);cbsiSetDeferredLocalPage("/assets/local_file.html");var cbsiad16_100={SP:"16",POS:"100",WIDTH:"300",HEIGHT:"260",CALLBACK:{onembed:onEmbedCallback,onload:onLoadCallback},REFRESH:"1"};var cbsiad16_200={SP:"16",POS:"200",WIDTH:"300",HEIGHT:"260",REFRESH:"1"};var cbsiad15_100={SP:"15",POS:"100",CALLBACK:{onembed:onEmbedCallback,onload:onLoadCallback},REFRESH:"1"};var cbsiad15_200={SP:"15",POS:"200",WIDTH:"738",HEIGHT:"90",REFRESH:"1"};var cbsiad119_100={SP:"119",POS:"100",REFRESH:"1"};var cbsiad119_200={SP:"119",POS:"200",REFRESH:"1"};var cbsiad234_100={SP:"234",POS:"100",CALLBACK:{onembed:onEmbedCallback,onload:onLoadCallback},REFRESH:"1"};var cbsiad234_200={SP:"234",POS:"200",CALLBACK:{onembed:onEmbedCallback,onload:onLoadCallback},REFRESH:"1"};var cbsiad63_100={SP:"63",POS:"100",CALLBACK:{onembed:onEmbedCallback,onload:onLoadCallback},REFRESH:"1"};var cbsiad110_100={SP:"110",POS:"100",CALLBACK:{onembed:onEmbedCallback,onload:onLoadCallback},REFRESH:"1"};var cbsiad162_100={SP:"162",POS:"100",CALLBACK:{onembed:onEmbedCallback,onload:onLoadCallback},REFRESH:"1"};var cbsiad266_100={SP:"266",POS:"100",CALLBACK:{onembed:onEmbedCallback,onload:onLoadCallback},REFRESH:"1"};var cbsiad80_100={SP:"80",POS:"100",REFRESH:"0"}}function onEmbedCallback(a){jQuery("#"+a.divId).css({opacity:"0"})}function onLoadCallback(a){var b=jQuery("#"+a.divId+" div.adHolder").children().size();if((a.divId=="cbs-pushdown")&&(b>1)){}jQuery("#"+a.divId).animate({opacity:"1"},700);if(a.isBlank==1){jQuery("#"+a.divId).css({overflow:"hidden"});jQuery("#"+a.divId).animate({height:"0"},1500)}if((a.isBlank==0)&&(a.divId=="ads_magnet")){jQuery("#"+a.divId).css({width:"100%"})}if((a.isBlank==1)&&(a.divId=="cbs-ad-300x250-0")){jQuery(".cbs-show-content-right").css({"padding-top":"24px"})}}if(typeof($)!="undefined"){$(function(){$("ul.sub-nav-group a.show-nav-link").click(function(d){var b=$(this).closest(":has(h4)").find(".cbs-show-category").text();var a=$(this).text();om.trackClick({item:"global_nav|shows|"+b+"|"+a+"|click"})});$(".nav-menu li.nav-item>a").click(function(a){om.trackClick({item:"global_nav|"+$(this).text()+"|click"})});$("ul#user-bar-wrapper").find("a#lnk-gbl-signup").click(function(a){om.trackClick({item:"header|sign up|click"})})})}(function(h,k,l){var i=h.fn.jquery.split(".");var n=false;function b(){return false}if(parseInt(i[0])===1){if(parseInt(i[1])<8){n=true;h.fn.addBack=function(o){return this.add(o==null?this.prevObject:this.prevObject.filter(o))};h.fn.on=h.fn.bind;h.fn.off=function(q,o,s){var p,r;if(q&&q.preventDefault&&q.handleObj){p=q.handleObj;jQuery(q.delegateTarget).off(p.namespace?p.origType+"."+p.namespace:p.origType,p.selector,p.handler);return this}if(typeof q==="object"){for(r in q){this.off(r,o,q[r])}return this}if(o===false||typeof o==="function"){s=o;o=undefined}if(s===false){s=b}return this.each(function(){jQuery.event.remove(this,q,s,o)})};jQuery.expr[":"].focus=function(o){return o===l.activeElement&&(o.type||o.href)}}}var j="accessibleMegaMenu",g={uuidPrefix:"accessible-megamenu",menuClass:"accessible-megamenu",topNavItemClass:"accessible-megamenu-top-nav-item",panelClass:"accessible-megamenu-panel",panelGroupClass:"accessible-megamenu-panel-group",hoverClass:"hover",focusClass:"focus",openClass:"open"},a={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38,keyMap:{48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",190:"."}};function d(p,o){this.element=p;this.settings=h.extend({},g,o);this._defaults=g;this._name=j;this.init()}d.prototype=(function(){var o=0,x=1000,u="",v=typeof k.hasOwnProperty==="function"&&!!k.hasOwnProperty("ontouchstart"),p,y,B,z,D,A,r,E,q,s,C,t,w;p=function(F){return h(F).closest(":data(plugin_"+j+")").data("plugin_"+j)};y=function(F){F=h(F);var G=this.settings;if(!F.attr("id")){F.attr("id",G.uuidPrefix+"-"+new Date().getTime()+"-"+(++o))}};B=function(G,L){var N=h(G.target),M=this,J=this.settings,H=this.menu,I=N.closest("."+J.topNavItemClass),F=N.hasClass(J.panelClass)?N:N.closest("."+J.panelClass),K;w.call(this,L);h("html").off("mouseup.outside-accessible-megamenu, touchend.outside-accessible-megamenu, mspointerup.outside-accessible-megamenu, pointerup.outside-accessible-megamenu",D);H.find("[aria-expanded]."+this.settings.panelClass).off("DOMAttrModified.accessible-megamenu");if(L){I=H.find("."+J.topNavItemClass+" ."+J.openClass+":first").closest("."+J.topNavItemClass);if(!(I.is(G.relatedTarget)||I.has(G.relatedTarget).length>0)){if((G.type==="mouseout"||G.type==="focusout")&&I.has(l.activeElement).length>0){return}I.find("[aria-expanded]").attr("aria-expanded","false").removeClass(J.openClass).filter("."+J.panelClass).attr("aria-hidden","true");if((G.type==="keydown"&&G.keyCode===a.ESCAPE)||G.type==="DOMAttrModified"){K=I.find(":tabbable:first");setTimeout(function(){H.find("[aria-expanded]."+M.settings.panelClass).off("DOMAttrModified.accessible-megamenu");K.focus();M.justFocused=false},99)}}else{if(I.length===0){H.find("[aria-expanded=true]").attr("aria-expanded","false").removeClass(J.openClass).filter("."+J.panelClass).attr("aria-hidden","true")}}}else{clearTimeout(M.focusTimeoutID);I.siblings().find("[aria-expanded]").attr("aria-expanded","false").removeClass(J.openClass).filter("."+J.panelClass).attr("aria-hidden","true");I.find("[aria-expanded]").attr("aria-expanded","true").addClass(J.openClass).filter("."+J.panelClass).attr("aria-hidden","false");if(G.type==="mouseover"&&N.is(":tabbable")&&I.length===1&&F.length===0&&H.has(l.activeElement).length>0){N.focus();M.justFocused=false}w.call(M)}};z=function(H){var I=h(H.target),G=I.closest("."+this.settings.topNavItemClass),F=I.closest("."+this.settings.panelClass);if(G.length===1&&F.length===0&&G.find("."+this.settings.panelClass).length===1){if(!I.hasClass(this.settings.openClass)){H.preventDefault();H.stopPropagation();B.call(this,H)}else{if(this.justFocused){H.preventDefault();H.stopPropagation();this.justFocused=false}else{if(v){H.preventDefault();H.stopPropagation();B.call(this,H,I.hasClass(this.settings.openClass))}}}}};D=function(F){if(this.menu.has(h(F.target)).length===0){F.preventDefault();F.stopPropagation();B.call(this,F,true)}};A=function(F){if(F.originalEvent.attrName==="aria-expanded"&&F.originalEvent.newValue==="false"&&h(F.target).hasClass(this.settings.openClass)){F.preventDefault();F.stopPropagation();B.call(this,F,true)}};r=function(F){clearTimeout(this.focusTimeoutID);h(F.target).addClass(this.settings.focusClass).on("click.accessible-megamenu",h.proxy(z,this));this.justFocused=true;if(this.panels.filter("."+this.settings.openClass).length){B.call(this,F)}};E=function(I){this.justFocused=false;var H=this,J=h(I.target),G=J.closest("."+this.settings.topNavItemClass),F=false;J.removeClass(this.settings.focusClass).off("click.accessible-megamenu",z);if(k.cvox){H.focusTimeoutID=setTimeout(function(){k.cvox.Api.getCurrentNode(function(K){if(G.has(K).length){clearTimeout(H.focusTimeoutID)}else{H.focusTimeoutID=setTimeout(function(M,N,L){B.call(M,N,L)},275,H,I,true)}})},25)}else{H.focusTimeoutID=setTimeout(function(){B.call(H,I,true)},300)}};q=function(U){var N=(this.constructor===d)?this:p(this),X=N.settings,Z=h(h(this).is("."+X.hoverClass+":tabbable")?this:U.target),G=N.menu,L=N.topnavitems,R=Z.closest("."+X.topNavItemClass),F=G.find(":tabbable"),P=Z.hasClass(X.panelClass)?Z:Z.closest("."+X.panelClass),M=P.find("."+X.panelGroupClass),W=Z.closest("."+X.panelGroupClass),S,I=U.keyCode||U.which,K,V,T,O,Q=false,H=a.keyMap[U.keyCode]||"",J,Y=(R.length===1&&P.length===0);if(Z.is("input:focus, select:focus, textarea:focus, button:focus")){return}if(Z.is("."+X.hoverClass+":tabbable")){h("html").off("keydown.accessible-megamenu")}switch(I){case a.ESCAPE:B.call(N,U,true);break;case a.DOWN:U.preventDefault();if(Y){B.call(N,U);Q=(R.find("."+X.panelClass+" :tabbable:first").focus().length===1)}else{Q=(F.filter(":gt("+F.index(Z)+"):first").focus().length===1)}if(!Q&&k.opera&&opera.toString()==="[object Opera]"&&(U.ctrlKey||U.metaKey)){F=h(":tabbable");V=F.index(Z);Q=(h(":tabbable:gt("+h(":tabbable").index(Z)+"):first").focus().length===1)}break;case a.UP:U.preventDefault();if(Y&&Z.hasClass(X.openClass)){B.call(N,U,true);S=L.filter(":lt("+L.index(R)+"):last");if(S.children("."+X.panelClass).length){Q=(S.children().attr("aria-expanded","true").addClass(X.openClass).filter("."+X.panelClass).attr("aria-hidden","false").find(":tabbable:last").focus()===1)}}else{if(!Y){Q=(F.filter(":lt("+F.index(Z)+"):last").focus().length===1)}}if(!Q&&k.opera&&opera.toString()==="[object Opera]"&&(U.ctrlKey||U.metaKey)){F=h(":tabbable");V=F.index(Z);Q=(h(":tabbable:lt("+h(":tabbable").index(Z)+"):first").focus().length===1)}break;case a.RIGHT:U.preventDefault();if(Y){Q=(L.filter(":gt("+L.index(R)+"):first").find(":tabbable:first").focus().length===1)}else{if(M.length&&W.length){Q=(M.filter(":gt("+M.index(W)+"):first").find(":tabbable:first").focus().length===1)}if(!Q){Q=(R.find(":tabbable:first").focus().length===1)}}break;case a.LEFT:U.preventDefault();if(Y){Q=(L.filter(":lt("+L.index(R)+"):last").find(":tabbable:first").focus().length===1)}else{if(M.length&&W.length){Q=(M.filter(":lt("+M.index(W)+"):last").find(":tabbable:first").focus().length===1)}if(!Q){Q=(R.find(":tabbable:first").focus().length===1)}}break;case a.TAB:V=F.index(Z);if(U.shiftKey&&Y&&Z.hasClass(X.openClass)){B.call(N,U,true);S=L.filter(":lt("+L.index(R)+"):last");if(S.children("."+X.panelClass).length){Q=S.children().attr("aria-expanded","true").addClass(X.openClass).filter("."+X.panelClass).attr("aria-hidden","false").find(":tabbable:last").focus()}}else{if(U.shiftKey&&V>0){Q=(F.filter(":lt("+V+"):last").focus().length===1)}else{if(!U.shiftKey&&V<F.length-1){Q=(F.filter(":gt("+V+"):first").focus().length===1)}else{if(k.opera&&opera.toString()==="[object Opera]"){F=h(":tabbable");V=F.index(Z);if(U.shiftKey){Q=(h(":tabbable:lt("+h(":tabbable").index(Z)+"):last").focus().length===1)}else{Q=(h(":tabbable:gt("+h(":tabbable").index(Z)+"):first").focus().length===1)}}}}}if(Q){U.preventDefault()}break;case a.SPACE:if(Y){U.preventDefault();z.call(N,U)}break;default:clearTimeout(this.keydownTimeoutID);u+=H!==u?H:"";if(u.length===0){return}this.keydownTimeoutID=setTimeout(function(){u=""},x);if(Y&&!Z.hasClass(X.openClass)){F=F.filter("."+X.topNavItemClass+" > :tabbable")}else{F=R.find(":tabbable")}if(U.shiftKey){F=h(F.get().reverse())}for(V=0;V<F.length;V++){T=F.eq(V);if(T.is(Z)){K=(u.length===1)?V+1:V;break}}J=new RegExp("^"+u.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),"i");for(V=K;V<F.length;V++){T=F.eq(V);O=h.trim(T.text());if(J.test(O)){Q=true;T.focus();break}}if(!Q){for(V=0;V<K;V++){T=F.eq(V);O=h.trim(T.text());if(J.test(O)){T.focus();break}}}break}N.justFocused=false};s=function(F){this.mouseTimeoutID=setTimeout(function(){clearTimeout(this.focusTimeoutID)},1)};C=function(F){clearTimeout(this.mouseTimeoutID);h(F.target).addClass(this.settings.hoverClass);B.call(this,F);if(h(F.target).is(":tabbable")){h("html").on("keydown.accessible-megamenu",h.proxy(q,F.target))}};t=function(G){var F=this;h(G.target).removeClass(F.settings.hoverClass);F.mouseTimeoutID=setTimeout(function(){B.call(F,G,true)},250);if(h(G.target).is(":tabbable")){h("html").off("keydown.accessible-megamenu")}};w=function(F){var G=this.menu;if(F){h("html").off("mouseup.outside-accessible-megamenu, touchend.outside-accessible-megamenu, mspointerup.outside-accessible-megamenu,  pointerup.outside-accessible-megamenu",D);G.find("[aria-expanded]."+this.settings.panelClass).off("DOMAttrModified.accessible-megamenu",A)}else{h("html").on("mouseup.outside-accessible-megamenu, touchend.outside-accessible-megamenu, mspointerup.outside-accessible-megamenu,  pointerup.outside-accessible-megamenu",h.proxy(D,this));G.find("[aria-expanded=true]."+this.settings.panelClass).on("DOMAttrModified.accessible-megamenu",h.proxy(A,this))}};return{constructor:d,init:function(){var I=this,H=this.settings,G=this.justFocused=false,K=this.nav=h(this.element),J=this.menu=K.children().first(),F=this.topnavitems=J.children();K.attr("role","navigation");J.addClass(H.menuClass);F.each(function(N,M){var L,O;M=h(M);M.addClass(H.topNavItemClass);L=M.find(":tabbable:first");O=M.children(":not(:tabbable):last");y.call(I,L);if(O.length){y.call(I,O);L.attr({"aria-haspopup":true,"aria-owns":O.attr("id"),"aria-controls":O.attr("id"),"aria-expanded":false});O.attr({role:"group","aria-expanded":false,"aria-hidden":true}).addClass(H.panelClass).not("[aria-labelledby]").attr("aria-labelledby",L.attr("id"))}});this.panels=J.find("."+H.panelClass);J.on("focusin.accessible-megamenu",":tabbable, :focusable, ."+H.panelClass,h.proxy(r,this)).on("focusout.accessible-megamenu",":tabbable, :focusable, ."+H.panelClass,h.proxy(E,this)).on("keydown.accessible-megamenu",h.proxy(q,this)).on("mouseover.accessible-megamenu",h.proxy(C,this)).on("mouseout.accessible-megamenu",h.proxy(t,this)).on("mousedown.accessible-megamenu",h.proxy(s,this));if(v){J.on("touchstart.accessible-megamenu",h.proxy(z,this))}J.find("hr").attr("role","separator")},getDefaults:function(){return this._defaults},getOption:function(F){return this.settings[F]},getAllOptions:function(){return this.settings},setOption:function(G,H,F){this.settings[G]=H;if(F){this.init()}}}}());h.fn[j]=function(o){return this.each(function(){if(!h.data(this,"plugin_"+j)){h.data(this,"plugin_"+j,new d(this,o))}})};function f(o){return h.expr.filters.visible(o)&&!h(o).parents().addBack().filter(function(){return h.css(this,"visibility")==="hidden"}).length}function m(q,o){var s,r,p;if(n){q="nodeName" in q?q:q.element}var t=q.nodeName.toLowerCase();if("area"===t){s=q.parentNode;r=s.name;if(!q.href||!r||s.nodeName.toLowerCase()!=="map"){return false}p=h("img[usemap=#"+r+"]")[0];return !!p&&f(p)}return(/input|select|textarea|button|object/.test(t)?!q.disabled:"a"===t?q.href||o:o)&&f(q)}h.extend(h.expr[":"],{data:h.expr.createPseudo?h.expr.createPseudo(function(o){return function(p){return !!h.data(p,o)}}):function(q,p,o){return !!h.data(q,o[3])},focusable:function(o){return m(o,!isNaN(h.attr(o,"tabindex")))},tabbable:function(q){if(n){q="nodeName" in q?q:q.element}var o=h.attr(q,"tabindex"),p=isNaN(o);return(p||o>=0)&&m(q,!p)}})}(jQuery,window,document));if(typeof CBSJSTemplates=="undefined"){var CBSJSTemplates={render:function(b,a){return b(a)}}}(function(){function thumb(url,width){if(typeof url!="string"){return""}return url.replace("http://thumbnails.cbsig.net","http://wwwimage.cbsstatic.com/thumbnails/videos/w"+width)}function truncate(str,length){if(typeof str=="undefined"){return""}return str.length<=length?str:str.substring(0,length)+"..."}function videoUrl(video,baseUrl){return typeof baseUrl=="undefined"?video.url:baseUrl+video.raw_url}function videoTitleSub(video){var fullEp=video.type=="Full Episode";var title=(fullEp?"Aired ":"Posted ")+video.airdate+'<span class="separator">|</span>';if(fullEp&&video.season_number&&video.episode_number){title+="S"+video.season_number+" Ep"+video.episode_number}title+=" ("+video.duration+")";return title}CBSJSTemplates.fullEpisodeCarousel={2:function(args){return CBSJSTemplates.render(function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){__p+="<li>";c=data.length;for(var i=0;i<2;i++){if(i<c){var video=data[i];__p+='<a class="wp-tooltip" title="'+((__t=(video.title))==null?"":__t)+'" href="'+((__t=(videoUrl(video,baseUrl)))==null?"":__t)+'"><div class="video bigbox'+((__t=(i==1?" last":""))==null?"":__t)+'" id="'+((__t=(video.content_id))==null?"":__t)+'">';if(video.status!=="AVAILABLE"){__p+='<div class="svod-label wp-sprite"></div>'}__p+='<div class="caption wp-sprite"><span class="show-title wp-font-mavenpro">'+((__t=(truncate(video.series_title,33)))==null?"":__t)+'</span><span class="ep-title wp-font-istokweb">'+((__t=(videoTitleSub(video)))==null?"":__t)+'</span></div><img src="'+((__t=(thumb(video.thumb.large,443)))==null?"":__t)+'" /></div></a>'}else{__p+='<div class="video bigbox last"><div class="blank-video"><img src="/assets/images/2012/r1/show/watch_page/carousel/blank-video.jpg" /></div></div>'}__p+=""}__p+="</li>"}return __p},args)},5:function(args){return CBSJSTemplates.render(function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){__p+='<li><a class="wp-tooltip" title="'+((__t=(data[0].title))==null?"":__t)+'" href="'+((__t=(videoUrl(data[0],baseUrl)))==null?"":__t)+'"><div class="video bigbox" id="'+((__t=(data[0].content_id))==null?"":__t)+'">';if(data[0].status!=="AVAILABLE"){__p+='<div class="svod-label wp-sprite"></div>'}__p+='<div class="caption wp-sprite"><span class="show-title wp-font-mavenpro">'+((__t=(truncate(data[0].series_title,33)))==null?"":__t)+'</span><span class="ep-title wp-font-sec wp-font-istokweb">'+((__t=(videoTitleSub(data[0])))==null?"":__t)+'</span></div><img src="'+((__t=(thumb(data[0].thumb.large,443)))==null?"":__t)+'" /></div></a>';c=data.length;for(var i=1;i<5;i++){if(i<c){var video=data[i];__p+='<a class="wp-tooltip" title="'+((__t=(video.title))==null?"":__t)+'" href="'+((__t=(videoUrl(video,baseUrl)))==null?"":__t)+'"><div class="video smallbox'+((__t=(i==2||i==4?" last":""))==null?"":__t)+'" id="'+((__t=(video.content_id))==null?"":__t)+'">';if(video.status!=="AVAILABLE"){__p+='<div class="svod-label wp-sprite"></div>'}__p+='<div class="caption wp-sprite"><span class="show-title wp-font-mavenpro">'+((__t=(truncate(video.series_title,23)))==null?"":__t)+'</span><span class="ep-title wp-font-istokweb">'+((__t=(videoTitleSub(video)))==null?"":__t)+'</span></div><img src="'+((__t=(thumb(video.thumb.large,210)))==null?"":__t)+'" /></div></a>'}else{__p+='<div class="video smallbox'+((__t=(i==2||i==4?" last":""))==null?"":__t)+'"><div class="blank-video"><img src="/assets/images/2012/r1/show/watch_page/carousel/blank-video.jpg" /></div></div>'}__p+=""}__p+="</li>"}return __p},args)},8:function(args){return CBSJSTemplates.render(function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){__p+="<li>";c=data.length;for(var i=0;i<8;i++){if(i<c){var video=data[i];__p+='<a class="wp-tooltip" title="'+((__t=(video.title))==null?"":__t)+'" href="'+((__t=(videoUrl(video,baseUrl)))==null?"":__t)+'"><div class="video smallbox'+((__t=(i==3||i==7?" last":""))==null?"":__t)+'" id="'+((__t=(video.content_id))==null?"":__t)+'">';if(video.status!=="AVAILABLE"){__p+='<div class="svod-label wp-sprite"></div>'}__p+='<div class="caption wp-sprite"><span class="show-title wp-font-mavenpro">'+((__t=(truncate(video.series_title,23)))==null?"":__t)+'</span><span class="ep-title wp-font-istokweb">'+((__t=(videoTitleSub(video)))==null?"":__t)+'</span></div><img src="'+((__t=(thumb(video.thumb.large,210)))==null?"":__t)+'" /></div></a>'}else{__p+='<div class="video smallbox'+((__t=(i==3||i==7?" last":""))==null?"":__t)+'"><div class="blank-video"><img src="/assets/images/2012/r1/show/watch_page/carousel/blank-video.jpg" /></div></div>'}__p+=""}__p+="</li>"}return __p},args)}};CBSJSTemplates.carousel={filter:function(args){return CBSJSTemplates.render(function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){__p+='<div class="filter-header"><span class="current-filter">'+((__t=(currentItem))==null?"":__t)+'</span><div class="arrow-down"></div></div><ul></ul>'}return __p},args)},filterItem:function(args){return CBSJSTemplates.render(function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){__p+="<li>"+((__t=(title))==null?"":__t)+"</li>"}return __p},args)},layout:function(args){return CBSJSTemplates.render(function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){__p+='<h2 class="video-section-title">'+((__t=(title))==null?"":__t)+'</h2><div class="video-carousel-box"><div class="carousel-filter"></div><div class="wrap"><ul class="jcarousel-skin-cbs"></ul></div><div class="message-box"></div></div>'}return __p},args)}}}());
/*!
 * jCarousel - Riding carousels with jQuery
 *   http://sorgalla.com/jcarousel/
 *
 * Copyright (c) 2006 Jan Sorgalla (http://sorgalla.com)
 * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
 * and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
 *
 * Built on top of the jQuery library
 *   http://jquery.com
 *
 * Inspired by the "Carousel Component" by Bill Scott
 *   http://billwscott.com/carousel/
 */
(function(b){var h={vertical:!1,rtl:!1,start:1,offset:1,size:null,scroll:3,visible:null,animation:"normal",easing:"swing",auto:0,wrap:null,initCallback:null,setupCallback:null,reloadCallback:null,itemLoadCallback:null,itemFirstInCallback:null,itemFirstOutCallback:null,itemLastInCallback:null,itemLastOutCallback:null,itemVisibleInCallback:null,itemVisibleOutCallback:null,animationStepCallback:null,buttonNextHTML:"<div></div>",buttonPrevHTML:"<div></div>",buttonNextEvent:"click",buttonPrevEvent:"click",buttonNextCallback:null,buttonPrevCallback:null,itemFallbackDimension:null},a=!1;b(window).bind("load.jcarousel",function(){a=!0});b.jcarousel=function(r,p){this.options=b.extend({},h,p||{});this.autoStopped=this.locked=!1;this.buttonPrevState=this.buttonNextState=this.buttonPrev=this.buttonNext=this.list=this.clip=this.container=null;if(!p||p.rtl===void 0){this.options.rtl=(b(r).attr("dir")||b("html").attr("dir")||"").toLowerCase()=="rtl"}this.wh=!this.options.vertical?"width":"height";this.lt=!this.options.vertical?this.options.rtl?"right":"left":"top";for(var q="",o=r.className.split(" "),m=0;m<o.length;m++){if(o[m].indexOf("jcarousel-skin")!=-1){b(r).removeClass(o[m]);q=o[m];break}}r.nodeName.toUpperCase()=="UL"||r.nodeName.toUpperCase()=="OL"?(this.list=b(r),this.clip=this.list.parents(".jcarousel-clip"),this.container=this.list.parents(".jcarousel-container")):(this.container=b(r),this.list=this.container.find("ul,ol").eq(0),this.clip=this.container.find(".jcarousel-clip"));if(this.clip.size()===0){this.clip=this.list.wrap("<div></div>").parent()}if(this.container.size()===0){this.container=this.clip.wrap("<div></div>").parent()}q!==""&&this.container.parent()[0].className.indexOf("jcarousel-skin")==-1&&this.container.wrap('<div class=" '+q+'"></div>');this.buttonPrev=b(".jcarousel-prev",this.container);if(this.buttonPrev.size()===0&&this.options.buttonPrevHTML!==null){this.buttonPrev=b(this.options.buttonPrevHTML).appendTo(this.container)}this.buttonPrev.addClass(this.className("jcarousel-prev"));this.buttonNext=b(".jcarousel-next",this.container);if(this.buttonNext.size()===0&&this.options.buttonNextHTML!==null){this.buttonNext=b(this.options.buttonNextHTML).appendTo(this.container)}this.buttonNext.addClass(this.className("jcarousel-next"));this.clip.addClass(this.className("jcarousel-clip")).css({position:"relative"});this.list.addClass(this.className("jcarousel-list")).css({overflow:"hidden",position:"relative",top:0,margin:0,padding:0}).css(this.options.rtl?"right":"left",0);this.container.addClass(this.className("jcarousel-container")).css({position:"relative"});!this.options.vertical&&this.options.rtl&&this.container.addClass("jcarousel-direction-rtl").attr("dir","rtl");var g=this.options.visible!==null?Math.ceil(this.clipping()/this.options.visible):null,q=this.list.children("li"),n=this;if(q.size()>0){var l=0,k=this.options.offset;q.each(function(){n.format(this,k++);l+=n.dimension(this,g)});this.list.css(this.wh,l+100+"px");if(!p||p.size===void 0){this.options.size=q.size()}}this.container.css("display","block");this.buttonNext.css("display","block");this.buttonPrev.css("display","block");this.funcNext=function(){n.next()};this.funcPrev=function(){n.prev()};this.funcResize=function(){n.resizeTimer&&clearTimeout(n.resizeTimer);n.resizeTimer=setTimeout(function(){n.reload()},100)};this.options.initCallback!==null&&this.options.initCallback(this,"init");!a&&b.browser.safari?(this.buttons(!1,!1),b(window).bind("load.jcarousel",function(){n.setup()})):this.setup()};var d=b.jcarousel;d.fn=d.prototype={jcarousel:"0.2.8"};d.fn.extend=d.extend=b.extend;d.fn.extend({setup:function(){this.prevLast=this.prevFirst=this.last=this.first=null;this.animating=!1;this.tail=this.resizeTimer=this.timer=null;this.inTail=!1;if(!this.locked){this.list.css(this.lt,this.pos(this.options.offset)+"px");var f=this.pos(this.options.start,!0);this.prevFirst=this.prevLast=null;this.animate(f,!1);b(window).unbind("resize.jcarousel",this.funcResize).bind("resize.jcarousel",this.funcResize);this.options.setupCallback!==null&&this.options.setupCallback(this)}},reset:function(){this.list.empty();this.list.css(this.lt,"0px");this.list.css(this.wh,"10px");this.options.initCallback!==null&&this.options.initCallback(this,"reset");this.setup()},reload:function(){this.tail!==null&&this.inTail&&this.list.css(this.lt,d.intval(this.list.css(this.lt))+this.tail);this.tail=null;this.inTail=!1;this.options.reloadCallback!==null&&this.options.reloadCallback(this);if(this.options.visible!==null){var g=this,j=Math.ceil(this.clipping()/this.options.visible),f=0,i=0;this.list.children("li").each(function(k){f+=g.dimension(this,j);k+1<g.first&&(i=f)});this.list.css(this.wh,f+"px");this.list.css(this.lt,-i+"px")}this.scroll(this.first,!1)},lock:function(){this.locked=!0;this.buttons()},unlock:function(){this.locked=!1;this.buttons()},size:function(f){if(f!==void 0){this.options.size=f,this.locked||this.buttons()}return this.options.size},has:function(g,j){if(j===void 0||!j){j=g}if(this.options.size!==null&&j>this.options.size){j=this.options.size}for(var f=g;f<=j;f++){var i=this.get(f);if(!i.length||i.hasClass("jcarousel-item-placeholder")){return !1}}return !0},get:function(f){return b(">.jcarousel-item-"+f,this.list)},add:function(g,n){var f=this.get(g),m=0,l=b(n);if(f.length===0){for(var i,k=d.intval(g),f=this.create(g);;){if(i=this.get(--k),k<=0||i.length){k<=0?this.list.prepend(f):i.after(f);break}}}else{m=this.dimension(f)}l.get(0).nodeName.toUpperCase()=="LI"?(f.replaceWith(l),f=l):f.empty().append(n);this.format(f.removeClass(this.className("jcarousel-item-placeholder")),g);l=this.options.visible!==null?Math.ceil(this.clipping()/this.options.visible):null;m=this.dimension(f,l)-m;g>0&&g<this.first&&this.list.css(this.lt,d.intval(this.list.css(this.lt))-m+"px");this.list.css(this.wh,d.intval(this.list.css(this.wh))+m+"px");return f},remove:function(g){var i=this.get(g);if(i.length&&!(g>=this.first&&g<=this.last)){var f=this.dimension(i);g<this.first&&this.list.css(this.lt,d.intval(this.list.css(this.lt))+f+"px");i.remove();this.list.css(this.wh,d.intval(this.list.css(this.wh))-f+"px")}},next:function(){this.tail!==null&&!this.inTail?this.scrollTail(!1):this.scroll((this.options.wrap=="both"||this.options.wrap=="last")&&this.options.size!==null&&this.last==this.options.size?1:this.first+this.options.scroll)},prev:function(){this.tail!==null&&this.inTail?this.scrollTail(!0):this.scroll((this.options.wrap=="both"||this.options.wrap=="first")&&this.options.size!==null&&this.first==1?this.options.size:this.first-this.options.scroll)},scrollTail:function(f){if(!this.locked&&!this.animating&&this.tail){this.pauseAuto();var g=d.intval(this.list.css(this.lt)),g=!f?g-this.tail:g+this.tail;this.inTail=!f;this.prevFirst=this.first;this.prevLast=this.last;this.animate(g)}},scroll:function(f,g){!this.locked&&!this.animating&&(this.pauseAuto(),this.animate(this.pos(f),g))},pos:function(B,z){var A=d.intval(this.list.css(this.lt));if(this.locked||this.animating){return A}this.options.wrap!="circular"&&(B=B<1?1:this.options.size&&B>this.options.size?this.options.size:B);for(var y=this.first>B,w=this.options.wrap!="circular"&&this.first<=1?1:this.first,t=y?this.get(w):this.get(this.last),x=y?w:w-1,v=null,u=0,s=!1,r=0;y?--x>=B:++x<B;){v=this.get(x);s=!v.length;if(v.length===0&&(v=this.create(x).addClass(this.className("jcarousel-item-placeholder")),t[y?"before":"after"](v),this.first!==null&&this.options.wrap=="circular"&&this.options.size!==null&&(x<=0||x>this.options.size))){t=this.get(this.index(x)),t.length&&(v=this.add(x,t.clone(!0)))}t=v;r=this.dimension(v);s&&(u+=r);if(this.first!==null&&(this.options.wrap=="circular"||x>=1&&(this.options.size===null||x<=this.options.size))){A=y?A+r:A-r}}for(var w=this.clipping(),q=[],f=0,p=0,t=this.get(B-1),x=B;++f;){v=this.get(x);s=!v.length;if(v.length===0){v=this.create(x).addClass(this.className("jcarousel-item-placeholder"));if(t.length===0){this.list.prepend(v)}else{t[y?"before":"after"](v)}if(this.first!==null&&this.options.wrap=="circular"&&this.options.size!==null&&(x<=0||x>this.options.size)){t=this.get(this.index(x)),t.length&&(v=this.add(x,t.clone(!0)))}}t=v;r=this.dimension(v);if(r===0){throw Error("jCarousel: No width/height set for items. This will cause an infinite loop. Aborting...")}this.options.wrap!="circular"&&this.options.size!==null&&x>this.options.size?q.push(v):s&&(u+=r);p+=r;if(p>=w){break}x++}for(v=0;v<q.length;v++){q[v].remove()}u>0&&(this.list.css(this.wh,this.dimension(this.list)+u+"px"),y&&(A-=u,this.list.css(this.lt,d.intval(this.list.css(this.lt))-u+"px")));u=B+f-1;if(this.options.wrap!="circular"&&this.options.size&&u>this.options.size){u=this.options.size}if(x>u){f=0;x=u;for(p=0;++f;){v=this.get(x--);if(!v.length){break}p+=this.dimension(v);if(p>=w){break}}}x=u-f+1;this.options.wrap!="circular"&&x<1&&(x=1);if(this.inTail&&y){A+=this.tail,this.inTail=!1}this.tail=null;if(this.options.wrap!="circular"&&u==this.options.size&&u-f+1>=1&&(y=d.intval(this.get(u).css(!this.options.vertical?"marginRight":"marginBottom")),p-y>w)){this.tail=p-w-y}if(z&&B===this.options.size&&this.tail){A-=this.tail,this.inTail=!0}for(;B-->x;){A+=this.dimension(this.get(B))}this.prevFirst=this.first;this.prevLast=this.last;this.first=x;this.last=u;return A},animate:function(i,l){if(!this.locked&&!this.animating){this.animating=!0;var g=this,k=function(){g.animating=!1;i===0&&g.list.css(g.lt,0);!g.autoStopped&&(g.options.wrap=="circular"||g.options.wrap=="both"||g.options.wrap=="last"||g.options.size===null||g.last<g.options.size||g.last==g.options.size&&g.tail!==null&&!g.inTail)&&g.startAuto();g.buttons();g.notify("onAfterAnimation");if(g.options.wrap=="circular"&&g.options.size!==null){for(var f=g.prevFirst;f<=g.prevLast;f++){f!==null&&!(f>=g.first&&f<=g.last)&&(f<1||f>g.options.size)&&g.remove(f)}}};this.notify("onBeforeAnimation");if(!this.options.animation||l===!1){this.list.css(this.lt,i+"px"),k()}else{var j=!this.options.vertical?this.options.rtl?{right:i}:{left:i}:{top:i},k={duration:this.options.animation,easing:this.options.easing,complete:k};if(b.isFunction(this.options.animationStepCallback)){k.step=this.options.animationStepCallback}this.list.animate(j,k)}}},startAuto:function(f){if(f!==void 0){this.options.auto=f}if(this.options.auto===0){return this.stopAuto()}if(this.timer===null){this.autoStopped=!1;var g=this;this.timer=window.setTimeout(function(){g.next()},this.options.auto*1000)}},stopAuto:function(){this.pauseAuto();this.autoStopped=!0},pauseAuto:function(){if(this.timer!==null){window.clearTimeout(this.timer),this.timer=null}},buttons:function(g,i){if(g==null&&(g=!this.locked&&this.options.size!==0&&(this.options.wrap&&this.options.wrap!="first"||this.options.size===null||this.last<this.options.size),!this.locked&&(!this.options.wrap||this.options.wrap=="first")&&this.options.size!==null&&this.last>=this.options.size)){g=this.tail!==null&&!this.inTail}if(i==null&&(i=!this.locked&&this.options.size!==0&&(this.options.wrap&&this.options.wrap!="last"||this.first>1),!this.locked&&(!this.options.wrap||this.options.wrap=="last")&&this.options.size!==null&&this.first==1)){i=this.tail!==null&&this.inTail}var f=this;this.buttonNext.size()>0?(this.buttonNext.unbind(this.options.buttonNextEvent+".jcarousel",this.funcNext),g&&this.buttonNext.bind(this.options.buttonNextEvent+".jcarousel",this.funcNext),this.buttonNext[g?"removeClass":"addClass"](this.className("jcarousel-next-disabled")).attr("disabled",g?!1:!0),this.options.buttonNextCallback!==null&&this.buttonNext.data("jcarouselstate")!=g&&this.buttonNext.each(function(){f.options.buttonNextCallback(f,this,g)}).data("jcarouselstate",g)):this.options.buttonNextCallback!==null&&this.buttonNextState!=g&&this.options.buttonNextCallback(f,null,g);this.buttonPrev.size()>0?(this.buttonPrev.unbind(this.options.buttonPrevEvent+".jcarousel",this.funcPrev),i&&this.buttonPrev.bind(this.options.buttonPrevEvent+".jcarousel",this.funcPrev),this.buttonPrev[i?"removeClass":"addClass"](this.className("jcarousel-prev-disabled")).attr("disabled",i?!1:!0),this.options.buttonPrevCallback!==null&&this.buttonPrev.data("jcarouselstate")!=i&&this.buttonPrev.each(function(){f.options.buttonPrevCallback(f,this,i)}).data("jcarouselstate",i)):this.options.buttonPrevCallback!==null&&this.buttonPrevState!=i&&this.options.buttonPrevCallback(f,null,i);this.buttonNextState=g;this.buttonPrevState=i},notify:function(f){var g=this.prevFirst===null?"init":this.prevFirst<this.first?"next":"prev";this.callback("itemLoadCallback",f,g);this.prevFirst!==this.first&&(this.callback("itemFirstInCallback",f,g,this.first),this.callback("itemFirstOutCallback",f,g,this.prevFirst));this.prevLast!==this.last&&(this.callback("itemLastInCallback",f,g,this.last),this.callback("itemLastOutCallback",f,g,this.prevLast));this.callback("itemVisibleInCallback",f,g,this.first,this.last,this.prevFirst,this.prevLast);this.callback("itemVisibleOutCallback",f,g,this.prevFirst,this.prevLast,this.first,this.last)},callback:function(t,r,s,q,o,l,p){if(!(this.options[t]==null||typeof this.options[t]!="object"&&r!="onAfterAnimation")){var n=typeof this.options[t]=="object"?this.options[t][r]:this.options[t];if(b.isFunction(n)){var m=this;if(q===void 0){n(m,s,r)}else{if(o===void 0){this.get(q).each(function(){n(m,this,q,s,r)})}else{for(var t=function(f){m.get(f).each(function(){n(m,this,f,s,r)})},g=q;g<=o;g++){g!==null&&!(g>=l&&g<=p)&&t(g)}}}}}},create:function(f){return this.format("<li></li>",f)},format:function(g,j){for(var g=b(g),f=g.get(0).className.split(" "),i=0;i<f.length;i++){f[i].indexOf("jcarousel-")!=-1&&g.removeClass(f[i])}g.addClass(this.className("jcarousel-item")).addClass(this.className("jcarousel-item-"+j)).css({"float":this.options.rtl?"right":"left","list-style":"none"}).attr("jcarouselindex",j);return g},className:function(f){return f+" "+f+(!this.options.vertical?"-horizontal":"-vertical")},dimension:function(g,j){var f=b(g);if(j==null){return !this.options.vertical?f.outerWidth(!0)||d.intval(this.options.itemFallbackDimension):f.outerHeight(!0)||d.intval(this.options.itemFallbackDimension)}else{var i=!this.options.vertical?j-d.intval(f.css("marginLeft"))-d.intval(f.css("marginRight")):j-d.intval(f.css("marginTop"))-d.intval(f.css("marginBottom"));b(f).css(this.wh,i+"px");return this.dimension(f)}},clipping:function(){return !this.options.vertical?this.clip[0].offsetWidth-d.intval(this.clip.css("borderLeftWidth"))-d.intval(this.clip.css("borderRightWidth")):this.clip[0].offsetHeight-d.intval(this.clip.css("borderTopWidth"))-d.intval(this.clip.css("borderBottomWidth"))},index:function(f,g){if(g==null){g=this.options.size}return Math.round(((f-1)/g-Math.floor((f-1)/g))*g)+1}});d.extend({defaults:function(f){return b.extend(h,f||{})},intval:function(f){f=parseInt(f,10);return isNaN(f)?0:f},windowLoaded:function(){a=!0}});b.fn.jcarousel=function(g){if(typeof g=="string"){var i=b(this).data("jcarousel"),f=Array.prototype.slice.call(arguments,1);return i[g].apply(i,f)}else{return this.each(function(){var j=b(this).data("jcarousel");j?(g&&b.extend(j.options,g),j.reload()):b(this).data("jcarousel",new d(this,g))})}}})(jQuery);$.fn.carousel=function(a){return new CBS.V2.Carousel($(this),a)};$.fn.videoCarousel=function(n){var f="/carousels/videosBySection/{sectionId}/offset/{offset}/limit/{limit}/xs/{excludeShow}/";var m,h,a;i();j();var l=new CBS.V2.Carousel($(this),n);$(this).bind("scrollSuccess",function(){try{b();d.trackPageImpression("1")}catch(o){}});$(this).bind("videoDataInit",function(){try{d.trackPageImpression("0")}catch(o){}});$(this).bind("pageRender",function(o,p){try{g();k(p)}catch(q){}});function g(){$("li.jcarousel-item .video.smallbox").fixImages({css:{width:"210px",height:"118px"}});$("li.jcarousel-item .video.bigbox").fixImages({css:{width:"inherit",height:"inherit"}})}function k(o){$.each(o,function(p,q){var r=q.content_id;$("#"+r).closest("a").click(function(u){u.preventDefault();var s=$(this).attr("href");var v=$(this).index()+1;d.trackThumbClick(s,r,v);var t=$(this).attr("target");setTimeout(function(){var w=a!==false&&(a===true||q.type=="Full Episode");if(/Android|iPad|IEMobile/i.test(navigator.userAgent)&&w){require(["utils/cbs.utils.deeplinking"],function(x){x.go(s)})}else{if(t=="_blank"){window.open(s)}else{document.location=s}}},50)})})}var d=(function(v){var o=($("div.v2c").index(v)+1).toString();var t=v.attr("id");var u=$("a.cbs-show-logo").attr("title");function s(x){try{DW.levt("ria","log",$.extend({mapp:"video_carousel",comptyp:"carousel",comp:l.getTitle(),s6:u,s7:o,s8:l.getCurrentItem(),s9:q(),s13:t},x))}catch(w){}}function r(){return l.getCurrentData()}function q(){return l.getLayoutTypeByCount(r().length)}function p(){var w=[];$.each(r(),function(x,y){w.push(y.content_id)});return w}return{trackPageImpression:function(w){s({riaevent:"view",objtyp:"",objnm:"",s10:p(),si1:w})},trackThumbClick:function(w,z,y){var x=window.location.protocol+"//"+window.location.hostname+w;s({riaevent:"click",objtyp:"slot",objnm:y,s11:z,s12:x})}}})($(this));function i(){if(typeof n=="object"){m=n.id;n.data=n.videos;if(!n.templateVars){n.templateVars={}}n.templateVars.baseUrl=typeof n.baseUrl=="string"?"/"+n.baseUrl.replace(/^\/+|\/+$/g,""):undefined;if(!n.templates){n.templates="videoCarousel";$(this).bind("layoutChange",function(p,q){if(q.getLayout()==4){q.setTemplates("seasonsVideoCarousel");q.setScroll(4)}})}}else{m=n;n={}}var o;if(typeof n.endPoint!="undefined"){o=n.endPoint}else{o=f}n.endPoint=o.replace("{sectionId}",m).replace("{excludeShow}",typeof n.excludeShow!="undefined"&&n.excludeShow?"1":"0");h=n.saveState===false;a=n.deepLink}function j(){if(h){return}var o=sessionStorage.getItem("video-carousel-state-"+m);if(o){o=JSON.parse(o);if(typeof o=="object"){if("layout" in o&&!("layout" in n)){n.layout=o.layout;n.suppressLayoutSwitch=false}if("page" in o){n.start=o.page}}}}function b(){if(h){return}sessionStorage.setItem("video-carousel-state-"+m,JSON.stringify({page:l.getCurrentItem(),layout:l.getLayout()}))}return l};$.fn.archiveCarousel=function(a){var h="/carousels/videosArchive/{pid}/offset/{offset}/limit/{limit}/";var d,b={templates:"archiveVideoCarousel"};g();var f=new CBS.V2.Carousel($(this),b);$(this).bind("scrollSuccess",function(i,j){sessionStorage.setItem("video-carousel-state-"+d,JSON.stringify({page:j.getCurrentItem(),layout:j.getLayout()}))});function g(){if(typeof a=="object"){d=a.id;b.data=a.videos;b.layout=a.layout;b.total=a.total;b.title=a.title;b.templateVars={baseUrl:typeof a.baseUrl=="string"?"/"+a.baseUrl.replace(/^\/+|\/+$/g,""):undefined}}else{d=a}b.endPoint=h.replace("{pid}",d)}return f};CBS.declareNS("CBS.V2.Carousel");CBS.V2.Carousel=function(A,D){var am="/assets/js/jCarousel/jquery.jcarousel.min.js";var p="/assets/js/jquery.touchwipe.min.js";var U="/assets/js/templates/";var W=1;var Z=2;var at=1;var aa=1;var M,k,P,K,ao=[],ap,m,E,g={};var R,z,ae,O;var d,G,o,ac,h,ad,N;var ah=0,Y=0;var x,ag,X,l=false,u=false,b=this,T=false,an=false;var H=false,af=false;var J=false;var n=true;var C;this.refreshCarousel=function(){h.reload(true)};this.getLayoutTypeByCount=function(av){if(J){return M}if(av<1){throw"Items count should be positive"}for(var au in d){if(d.hasOwnProperty(au)&&av<=au){return au}}throw"Incorrect items count: "+av};ak();j();function ak(){if(D.layout&&D.suppressLayoutSwitch!==false){J=true}r(D.layout);if(typeof D.buffer!="undefined"){Z=D.buffer}P=typeof D.title!="undefined"?D.title:"";E=typeof D.start!="undefined"?D.start:1;if(typeof D.total!="undefined"){K=D.total}if(typeof D.staticData!="undefined"){g=D.staticData}if(typeof D.data!="undefined"){t(D.data,0)}if(typeof D.endPoint=="string"){ap=m=D.endPoint}else{m=null;if(ao.length<1){throw"No data or endpoint provided"}K=ao.length;u=true}if(typeof D.filter!="undefined"){R=D.filter;z=D.filterIndexOverride;if(D.filterSortOrder&&["asc","desc"].indexOf(D.filterSortOrder.toLowerCase())>-1){O=D.filterSortOrder.toLowerCase()}ae=D.filterSortBy}if(D.scroll){aa=D.scroll}n=D.usePushState!==false}function j(){G=typeof D.templateVars=="object"?D.templateVars:{};if(typeof D.templates=="string"){var au=D.templates;if(typeof CBSJSTemplates=="undefined"||CBSJSTemplates[au]=="undefined"){$.getScript(U+au,av(CBSJSTemplates[au]))}else{av(CBSJSTemplates[au])}}else{if(typeof D.templates=="object"){av(D.templates)}else{throw"No templates passed"}}function av(aw){d=aw;if(typeof CBSJSTemplates.carousel!="undefined"){o=CBSJSTemplates.carousel}aj()}}function aj(){q();s();ac=A.find(".jcarousel-skin-cbs");if(ao.length>0){ah=1;Y=L(1,ao)}if(typeof $.jcarousel=="undefined"){$.getScript(am,w)}else{w()}if("ontouchstart" in document.documentElement){if(typeof $.touchwipe=="undefined"){$.getScript(p,ab)}else{ab()}}$(window).resize(function(){var au=A.find(".jcarousel-clip").width();if(C&&(C!=au)){if(H){b.refreshCarousel()}else{af=true}}C=au})}function r(au){M=au;k=I(au);if(M&&h){A.trigger("layoutChange",[b])}}function I(au){return au||8}function F(){var av=0;for(var au in g){if(g.hasOwnProperty(au)){av++}}return K+av}this.getLayout=function(){return M};this.getTitle=function(){return P};this.getCurrentItem=function(){return X};this.getFirstItem=function(){return ah};this.getLastItem=function(){return Y};this.isEnd=function(){return u};this.getCurrentData=function(){var au=f(X);return ao.slice(au.firstRecord,au.lastRecord+1)};this.setTemplates=function(au){d=CBSJSTemplates[au]};this.setScroll=function(au){h.options.scroll=au};function w(){ac.jcarousel({itemFallbackDimension:882,scroll:aa,start:E,initCallback:function(au,av){if(av=="init"){h=au;x=A.find(".jcarousel-next");ag=A.find(".jcarousel-prev");x.click(function(){v()});ag.click(function(){al()});i(E)}},setupCallback:function(){H=true;if(af){b.refreshCarousel()}},itemFirstInCallback:function(au,aw,av,ax){X=av;if(l){return}if(av>=ah&&av<=Y){try{A.trigger("scrollSuccess",[b])}catch(ay){}B(av);S(av)}else{if(ax!="init"){h.scroll(av*(ax=="next")?-1:1)}}},buttonNextEvent:null,buttonPrevEvent:null})}function v(){if(!l){h.next()}}function al(){if(!l){h.prev()}}function ab(){ac.touchwipe({wipeLeft:function(){v()},wipeRight:function(){al()}})}function i(au){ah=Math.max(1,au-Z*W);Q(f(ah).firstRecord,(Z*2+1)*k,function(av){aq();Y=L(ah,av);if(Y<au){h.scroll(Y)}A.trigger("videoDataInit",[av,b])})}function B(au){var av=f(Y);if(av.distance(au)<at&&!(u&&av.lastRecord>=N)){l=true;Q(av.lastRecord+1,(Z-at+1)*k,function(aw){Y=L(Y+1,aw);var ax=Math.max(1,au-Z*W);V(ah,ax-1);ah=ax;l=false})}}function S(av){var aw=f(ah);if(aw.distance(av)<at&&aw.firstRecord>0){l=true;ah=Math.max(1,(aw.index-1)*W+1-Z*W);aw=f(ah);var au=Math.min((Z-at+1)*k,aw.distance(av)*k);Q(aw.firstRecord,au,function(ay){L(ah,ay);var ax=av+Z*W;V(ax+1,Y);Y=ax;l=false})}}function f(aw){var au=Math.ceil(aw/W);var av=(au-1)*k;var ax=au*k-1;function ay(az){return Math.abs((aw-az)/W)}return{index:au,firstRecord:av,lastRecord:ax,distance:ay}}function V(aw,av){if(aw<1){return}for(var au=aw;au<=av;au++){h.remove(au)}}function ar(ay,au){var ax={},aw=0;for(var av in g){if(!g.hasOwnProperty(av)){continue}if(av>=ay&&av<=ay+au){ax[av]=g[av];aw++}}return{length:aw,insertInto:function(aA){for(var az in ax){if(!ax.hasOwnProperty(az)){continue}aA.splice(az-ay,0,ax[az])}return aA}}}function Q(aw,au,ax){if(aw>N&&u){throw"Undefined offset: "+aw}if(typeof ad=="undefined"||aw<ad||aw+au-1>N&&!u){if(m){var av=ar(aw,au);a(aw,au-av.length,function(ay){ax(av.insertInto(ay))})}}else{ax(ao.slice(aw,aw+au))}}function a(aw,au,ax){var av={};if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)){av.m=1}$.getJSON(m.replace("{offset}",aw).replace("{limit}",au),av,function(az){if(typeof az=="object"&&az.success&&typeof az.result!="undefined"&&typeof az.result.data!="undefined"&&az.result.data.length>0){var ay=az.result;if(!M&&ay.layout){r(ay.layout)}if(P==""){P=ay.title;A.find(".video-section-title").html(P)}if(K!=ay.total&&typeof ay.total!="undefined"){K=ay.total}t(ay.data,aw);if(typeof ax=="function"){ax(ay.data)}A.trigger("videoDataLoad",[ay.data])}else{A.trigger("videoDataLoadError",[b,az])}})}function aq(){if(T&&h){T=false;h.options.start=1;h.reset();h.size(0);ai();an=true}}this.showMessage=function(au){A.find(".message-box").html(au).show()};function ai(){A.find(".message-box").hide()}function t(av,ax){if(typeof ad=="undefined"||ax<ad){ad=ax}for(var au=0,aw=ax;au<av.length;aw++){if(typeof g[aw]!="undefined"){ao[aw]=g[aw]}else{ao[aw]=av[au];au++}}if(typeof N=="undefined"||aw-1>N){N=aw-1}u=N>=F()-1}function q(){var au;if(typeof d.layout!="undefined"){au=d.layout}else{if(o){au=o.layout}else{throw new Error("No layout defined: either use your own or include shared carousel templates")}}A.html(au($.extend(true,{title:P},G)))}function s(){if(!$.isArray(R)||R.length<1||!o){return}var av=A.find(".carousel-filter");if(av.length==0){return}aC();var ay=au();var az=R[ay];if(az){if(az.season){aB(az,true)}if(az.title){av.html(o.filter({currentItem:az.title}))}}var aA=av.find("ul");$.each(R,function(aD,aF){var aE=$(o.filterItem(aF));if(aD==ay){aE.addClass("active")}aA.append(aE);aE.click(function(){aA.children().removeClass("active");aE.addClass("active");if(aF.season){aB(aF)}ax(aF)})});av.find(".filter-header").click(function(){av.toggleClass("active")});$("html").click(function(){av.removeClass("active")});av.click(function(aD){aD.stopPropagation()});aw(az);function aC(){if(ae&&O){R.sort(function(aE,aD){var aG=aE[ae],aF=aD[ae];if(ae!="title"){aG=parseInt(aG),aF=parseInt(aF)}switch(O){case"asc":return aG<aF?-1:1;break;case"desc":return aF<aG?-1:1;break}})}}function au(){if(typeof z=="number"){return z}else{if(typeof z=="object"){for(var aE=0;aE<R.length;aE++){var aD=true;for(var aF in z){if(z.hasOwnProperty(aF)){if(z[aF]!=R[aE][aF]){aD=false;break}}}if(aD){return aE}}}}return 0}function ax(aD){av.removeClass("active").find(".current-filter").html(aD.title);ao=[];ad=N=undefined;u=false;P="";T=true;aw(aD);i(1)}function aw(aE){m=ap;for(var aD in aE){if(aE.hasOwnProperty(aD)&&aD!="title"){m=m.replace("{"+aD+"}",aE[aD])}}}function aB(aE,aD){if(!n){return}if(Modernizr.history){var aF=window.location.pathname.replace(/season\/\d\/*/ig,"");if(aF.lastIndexOf("/")==(aF.length-1)){aF=aF.substr(0,aF.lastIndexOf("/"))}if(aD){window.history.replaceState(aE,document.title+" "+aE.title,window.location)}else{window.history.pushState(aE,document.title+" "+aE.title,aF+"/season/"+aE.season+"/")}}}if(Modernizr.history){$(window).bind("popstate",function(aD){if(typeof aD.originalEvent!=="undefined"&&aD.originalEvent.state&&typeof aD.originalEvent.state.season!=="undefined"&&aD.originalEvent.state.season>0){ax(aD.originalEvent.state)}})}}function L(au,aw){var av=au;for(var ay=0,ax=k;ax<=aw.length;ay+=k,ax+=k){av+=y(av,aw.slice(ay,ax))}if(ay<aw.length&&u){av+=y(av,aw.slice(ay,aw.length))}return av-1}function y(ax,av){var aA=b.getLayoutTypeByCount(av.length);var aB=u&&f(ax).lastRecord>=N;var ay={data:av,last:aB};for(var az in G){if(G.hasOwnProperty(az)){ay[az]=G[az]}}var aC=$(d[aA](ay));if(an){aC.addClass("hidden")}var aw=ax;if(typeof h!="undefined"){aC.each(function(){h.add(aw,$(this));aw++});if(--aw>h.size()){h.size(aw)}}else{ac.append(aC)}A.trigger("pageRender",[av,ax,aC]);if(an){an=false;aC.addClass("ready");if(!Modernizr.csstransitions){aC.fadeIn()}}var au=aw-ax+1;if(!aB){W=au}return au}};window.Modernizr=function(ah,ag,af){function H(b){Z.cssText=b}function G(f,d){return H(prefixes.join(f+";")+(d||""))}function F(f,d){return typeof f===d}function E(f,d){return !!~(""+f).indexOf(d)}function S(g,f){for(var i in g){var h=g[i];if(!E(h,"-")&&Z[h]!==af){return f=="pfx"?h:!0}}return !1}function Q(h,g,k){for(var j in h){var i=g[h[j]];if(i!==af){return k===!1?h[j]:F(i,"function")?i.bind(k||g):i}}return !1}function O(g,f,j){var i=g.charAt(0).toUpperCase()+g.slice(1),h=(g+" "+V.join(i+" ")+i).split(" ");return F(f,"string")||F(f,"undefined")?S(h,f):(h=(g+" "+U.join(i+" ")+i).split(" "),Q(h,f,j))}var ae="2.7.0",ad={},ac=ag.documentElement,ab="modernizr",aa=ag.createElement(ab),Z=aa.style,Y,X={}.toString,W="Webkit Moz O ms",V=W.split(" "),U=W.toLowerCase().split(" "),T={},R={},P={},N=[],M=N.slice,K,J={}.hasOwnProperty,I;!F(J,"undefined")&&!F(J.call,"undefined")?I=function(f,d){return J.call(f,d)}:I=function(f,d){return d in f&&F(f.constructor.prototype[d],"undefined")},Function.prototype.bind||(Function.prototype.bind=function(a){var h=this;if(typeof h!="function"){throw new TypeError}var g=M.call(arguments,1),f=function(){if(this instanceof f){var b=function(){};b.prototype=h.prototype;var i=new b,d=h.apply(i,g.concat(M.call(arguments)));return Object(d)===d?d:i}return h.apply(a,g.concat(M.call(arguments)))};return f}),T.csstransitions=function(){return O("transition")};for(var L in T){I(T,L)&&(K=L.toLowerCase(),ad[K]=T[L](),N.push((ad[K]?"":"no-")+K))}return ad.addTest=function(g,f){if(typeof g=="object"){for(var h in g){I(g,h)&&ad.addTest(h,g[h])}}else{g=g.toLowerCase();if(ad[g]!==af){return ad}f=typeof f=="function"?f():f,typeof enableClasses!="undefined"&&enableClasses&&(ac.className+=" "+(f?"":"no-")+g),ad[g]=f}return ad},H(""),aa=Y=null,ad._version=ae,ad._domPrefixes=U,ad._cssomPrefixes=V,ad.testProp=function(b){return S([b])},ad.testAllProps=O,ad}(this,this.document);if(typeof CBSJSTemplates=="undefined"){var CBSJSTemplates={render:function(b,a){return b(a)}}}(function(){CBSJSTemplates.account={login:function(args){return CBSJSTemplates.render(function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){__p+="";_title="Sign Into CBS";_copy="";_formId="id-v2_5-account-login-form";_gpId="id-gp-login-btn";signup_link="/user/signup/";var inline=typeof loginBoxInline!="undefined"&&loginBoxInline;if(!inline){if(CBS.Registry.login.ui.title!=""){_title=CBS.Registry.login.ui.title}if(CBS.Registry.login.ui.copy!=""){_copy=CBS.Registry.login.ui.copy}if(CBS.Registry.login.ui.signup_link!=""){signup_link=CBS.Registry.login.ui.signup_link}}else{_formId="id-v2_5-account-login-form-inline";_gpId="id-gp-login-btn-inline"}if(typeof loginBoxTitle!="undefined"){_title=loginBoxTitle}if(typeof loginBoxCopy!="undefined"){_copy=loginBoxCopy}if(typeof loginBoxFormId!="undefined"){_formId=loginBoxFormId}if(typeof loginBoxSignUpUrl!="undefined"){signup_link=loginBoxSignUpUrl}__p+="";if(inline){__p+='<div class="cbs-box-wrapper box-login-wrapper inline">'}else{__p+='<div id="id-box-tip-user-login" class="cbs-box-wrapper box-login-wrapper"><div class="box-arrow-up"></div>'}__p+="<div "+((__t=(!inline?"":id="id-cbs-box-login"))==null?"":__t)+' class="cbs-box login"><div class="head"><div class="gutter"><h2>'+((__t=(_title))==null?"":__t)+"</h2>";if(!inline){__p+='<div class="close"></div>'}__p+='<div class="clear"></div></div></div><div class="body"><div class="gutter"><div class="login-wrapper">';if(_copy!=""){__p+='<div class="copy-wrapper"><div class="section-info">'+((__t=(_copy))==null?"":__t)+"</div></div>"}__p+='<div class="social-wrapper"><div class="section-info with-social">With Social Account</div><div class="social-icons"><div class="si"><a href="javascript:void(0);" title="Login with Facebook" class="ico fb" onclick="CBSAccount.session.facebook();">FB</a></div><div class="si"><a href="javascript:void(0);" title="Login with Twitter" class="ico tw" onclick="CBSAccount.session.twitter(true);">TW</a></div><div class="si"><div id="'+((__t=(_gpId))==null?"":__t)+'" class="ico gp"><span class="buttonText">Google</span></div></div></div><div class="clear"></div></div><div class="email-wrapper"><div class="form-error"></div><div class="section-info with-email">With Email</div><form id="'+((__t=(_formId))==null?"":__t)+'" action="" method="POST" class="form"><fieldset>';if(inline){__p+="<div>"}__p+='<div class="form-field '+((__t=(inline?"left":""))==null?"":__t)+'"><input id="j_username" name="j_username" placeholder="Email" maxlength="80" type="text"/></div><div class="form-field '+((__t=(inline?"right":""))==null?"":__t)+'"><input id="j_password" name="j_password" placeholder="Password" maxlength="50" autocomplete="off" type="password"/></div>';if(inline){__p+='<div class="clear"></div></div>'}__p+='<div class="form-action"><a href="javascript:void(0);" onclick="CBSAccount.View.LoginBox.forgot_password();" class="lnk-misc">Forgot Password</a><a href="javascript:void(0);" onclick="CBSAccount.session.loginToHttps(\''+((__t=(_formId))==null?"":__t)+'\');" class="btn-blue right-align">Sign In</a><div class="clear"></div></div><input type="hidden" name="_remember_me" value="1"/>';if(CBS.Registry.login.authToken){__p+='<input type="hidden" name="tk_trp" value="'+((__t=(CBS.Registry.login.authToken))==null?"":__t)+'" />'}__p+='<div class="form-action last"><div class="lnk-misc signup-help-text">Don\'t have an account? <br/>Create one for FREE!</div><a href="'+((__t=(signup_link))==null?"":__t)+'" class="btn-blue right-align">Sign Up</a><div class="clear"></div></div><div class="pos-or">Or</div></fieldset></form></div></div><div class="forgot-pass-wrapper"><h2>Forgot Your Password?</h2><div class="info-text"><div class="form-success">Instructions to change your password should arrive in your inbox in a few moment.</div>Enter your email address below and we\'ll send you an email with instructions to create a new password.</div><form id="id-v2_5-forgot-password-form" action="" class="form" method="post"><fieldset><div class="form-field"><input name="email" placeholder="Email" maxlength="80" type="text" autocomplete="off"/><span class="err__" data-for="err-email"></span></div><div class="form-action"><a href="javascript:CBSAccount.View.LoginBox.cancel_forgot_password();" class="lnk-misc" data-role="to-login">Cancel</a><a href="javascript:void(0);" onclick="CBSAccount.session.forgotPassword();" class="btn-blue right-align">Send Password</a><div class="clear"></div></div></fieldset></form></div><div class="forgot-pass-success-wrapper"><h2>Email Sent</h2><div class="info-text">Instructions to change your password should arrive in your inbox in a few moments.</div><div class="form"><div class="form-action"><a href="javascript:CBSAccount.View.LoginBox.cancel_forgot_password();" class="btn-blue right-align" data-role="to-login">Back to Sign In</a><div class="clear"></div></div></div></div></div></div></div></div>'}return __p},args)},optin:function(args){return CBSJSTemplates.render(function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){__p+="";_title="Complete Your Profile";_copy="";_formId="id-v2_5-account-optin-form";var inline=typeof loginBoxInline!="undefined"&&loginBoxInline;if(!inline){if(CBS.Registry.login.ui.title!=""){_title=CBS.Registry.login.ui.title}if(CBS.Registry.login.ui.copy!=""){_copy=CBS.Registry.login.ui.copy}if(CBS.Registry.login.ui.signup_link!=""){signup_link=CBS.Registry.login.ui.signup_link}}else{_formId="id-v2_5-account-optin-form"}if(typeof loginBoxTitle!="undefined"){_title=loginBoxTitle}if(typeof loginBoxCopy!="undefined"){_copy=loginBoxCopy}if(typeof loginBoxFormId!="undefined"){_formId=loginBoxFormId}if(typeof loginBoxSignUpUrl!="undefined"){signup_link=loginBoxSignUpUrl}__p+="";if(inline){__p+='<div class="cbs-box-wrapper box-login-wrapper inline optin">'}else{__p+='<div id="id-box-tip-user-optin" class="cbs-box-wrapper box-optin-wrapper"><div class="box-arrow-up"></div>'}__p+="<div "+((__t=(!inline?"":id="id-cbs-box-optin"))==null?"":__t)+' class="cbs-box login"><div class="head"><div class="gutter closeBox"><h2>'+((__t=(_title))==null?"":__t)+"</h2>";if(!inline){__p+='<div class="close"></div>'}__p+='<div class="clear"></div></div></div><div class="body"><div class="gutter"><div class="login-wrapper">';if(_copy!=""){__p+='<div class="copy-wrapper"><div class="section-info">'+((__t=(_copy))==null?"":__t)+"</div></div>"}__p+='<form id="'+((__t=(_formId))==null?"":__t)+'" action="" method="POST" class="form"><fieldset>';if(obj.hasGender==false){__p+='<div class="left gender"><div class="form-field  gender"><label>Gender</label><select name="gender"><option value="">Select</option><option value="Male">Male</option><option value="Female">Female</option></select><span class="err__"></span></div></div>'}__p+="";if(obj.optIn!=false){__p+='<h2>Our Terms Have Changed</h2><div class="form-field  gender"><p class="policies"><input type="checkbox" class="selector-btns" name="_agree" title="You must agree to the Terms of Use and Privacy Policy">I have read and agree to the <a href="https://cbsi.secure.force.com/CBSi/articles/FAQ/CBSi-Terms-of-Use?template=template_tougl&referer=tougl.com&data=&cfs=default" target="_blank">Terms of Use</a> and <a href="https://cbsi.secure.force.com/CBSi/articles/FAQ/Privacy-Policy?categories=CBS_Interactive%3AmPrivacy&template=template_mobilePrivacy&referer=mobileprivacy.com&data=&cfs=default" target="_blank">Privacy Policy</a>. I understand that, on occasion, I will receive the CBS e-mail newsletter with updates, alerts and promotions.<span class="err__ autoWidth"></span></p>   </div><div class="clear"></div>'}__p+='<div><a class="btn-blue" href="javascript:void(0);" onclick="CBS.Account.view.saveSettings();">Submit</a></div></fieldset></form>';if(obj.message!=undefined){__p+='<div class="msgOptin" style="display: none">'+((__t=(obj.message))==null?"":__t)+"</div>"}__p+="</div></div></div> </div>"}return __p},args)},passwordPrompt:function(args){return CBSJSTemplates.render(function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){__p+='<div class="password-prompt"><label for="password-prompt-input">Please enter your password</label><div class="error message hide"></div><input type="password" id="password-prompt-input" /><a class="ui-try-button-sm submit-password">Submit</a></div>'}return __p},args)},register:function(args){return CBSJSTemplates.render(function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){__p+=""}return __p},args)}}}());CBS.declareNS("CBS.V3.Tealium");CBS.V3.Tealium=function(){this.attachClickEvents=function(a){$.ajax({url:"/tracking/tealium/map/"+a,type:"POST",data:{},dataType:"json",error:function(){},success:function(d){var b=jQuery.parseJSON(d.map);$.each(b,function(g,f){$(f.selector).live(f.event,function(){var i={event_type:f.event_type,self:this};$.each(f.varPairs,function(j,l){i[l.key]=((l.value).search(/f:/)>-1)?new Function("arg",(l.value).replace(/f:/,""))():l.value});utag.link(i);if(typeof f.callback==="string"){var h=new Function("clickData","self",f.callback);h(i,this)}})})}})}};var Tealium=new CBS.V3.Tealium();CBS.declareNS("CBS.V2.CustomSearchTealium");CBS.V2.CustomSearchTealium=function(){this.initTealium=function(){if(typeof Tealium==="undefined"&&typeof customSearchTealium==="object"){setTimeout(function(){customSearchTealium.initTealium()},100)}else{Tealium.attachClickEvents("search/1")}};this.getTealiumData=function(b){var d=[];d.push("search drop down");d.push(a(b).keyword);d.push(a(b).item_type(b));d.push(a(b).item_name());return d.join("|")};var a=function(b){return{keyword:document.getElementById("ui-site-search-box").value,item_type:function(d){return(d==="video"||d==="text")?d:"more results"},item_name:function(){return $("#search-name").data("title")}}}};var customSearchTealium=new CBS.V2.CustomSearchTealium();customSearchTealium.initTealium();CBS.declareNS("CBS.Search");(function(){$.getScript("/assets/js/templates/searchAutoComplete.js");CBS.Search={container_id:"#ui-search-autocomplete",AutoComplete:function(b){b=b.url_encode();if(b.length>=3){$.ajax({url:"/sitesearch/term?q="+b,dataType:"json",success:function(d){if(d.success){if(d.results!="EMPTY"){CBS.Search.AutoCompleteResults(d.results,b)}}},error:function(){$("#ui-search-wrapper").removeClass("entering")}})}else{$(this.container_id).hide();$("#ui-search-wrapper").removeClass("entering")}},AutoCompleteResults:function(d,b){$("#ui-search-wrapper").addClass("entering");$(this.container_id).html(CBSJSTemplates.searchAutoComplete.autocomplete_popup1({data:d,aSearch:b}));$(this.container_id).show();this.AttachTitleTracking()},AttachTitleTracking:function(){$(this.container_id+" a").live("mousedown",function(b){b.stopPropagation();var d="";if($(this).hasClass("search-featured-video-videobox")||$(this).parent().hasClass("search-shows-list")){d=$(this).attr("title")}if($(this).children(":first").hasClass("search-more-btn")){d="more results"}$("#search-name").data("title",d)})}};var a="";$(document).keydown(function(b){if(b.keyCode==27){a=document.getElementById("ui-site-search-box").value;document.getElementById("ui-site-search-box").value="";$("#ui-search-autocomplete").hide();$("#ui-search-wrapper").removeClass("entering")}});$(document).keyup(function(b){if(b.keyCode==27){document.getElementById("ui-site-search-box").value=a}})})();CBS.declareNS("CBS.Tracking");(function(){CBS.Tracking={utag_data:{},setMvpdParner:function(){var b=window.localStorage.getItem("mvpd_chosen_obj"),a=window.localStorage.getItem("mvpd_authz");if(b&&a){this.utag_data.mvpdPartner=JSON.parse(b).name}},SetTracking:function(a){if(CBS.Registry.platform.isMobile){this.utag_data.deviceType="mobile"}else{this.utag_data.deviceType="desktop"}if(typeof DW_ptid!="undefined"){this.utag_data.pageTypeId=DW_ptid.toString().replace(/\:/g,"")}if(typeof DW_onid!="undefined"){this.utag_data.pageOntologyId=String(DW_onid).replace(":","")}this.utag_data.siteType="responsive web";if(typeof a.tealium.showTitle!="undefined"){this.utag_data.showTitle=a.tealium.showTitle}if(typeof a.DW_page_type!="undefined"){this.utag_data.pageType=a.DW_page_type;this.utag_data.pageType=this.utag_data.pageType.toLowerCase();this.utag_data.articleType=this.utag_data.pageType}if(typeof dvar_daypart!="undefined"&&typeof dvar_genre!="undefined"&&typeof dvar_seccategory!="undefined"&&typeof this.utag_data.showTitle!="undefined"){if(this.utag_data.showTitle!=null){this.utag_data.siteHier=dvar_daypart+"|"+dvar_genre+"|"+this.utag_data.showTitle.toLowerCase().replace("!","")+"|"+dvar_seccategory}this.utag_data.showSecCategory=dvar_seccategory;this.utag_data.showGenre=dvar_genre;this.utag_data.siteSection=this.utag_data.showDaypart=dvar_daypart}else{if(typeof dvar_genre!="undefined"&&typeof this.utag_data.showTitle!="undefined"){this.utag_data.siteHier=dvar_genre+"|"+this.utag_data.showTitle;this.utag_data.siteSection=this.utag_data.showGenre=dvar_genre}else{this.utag_data.siteSection=this.utag_data.siteHier=this.utag_data.pageType}}$.extend(this.utag_data,a.tealium);if(typeof this.utag_data.section!="undefined"){this.utag_data.siteSection=this.utag_data.section}if(typeof this.utag_data.registrationDriver!="undefined"){this.utag_data.userRegDriver=this.utag_data.registrationDriver}if(typeof a.__CBS_HOME__=="undefined"){this.utag_data.show=this.utag_data.showTitle}this.utag_data.userRegId=CBS.Registry.user.id||"";this.utag_data.pageViewGuid=DW.pageParams.pguid||"";if(typeof a.BK_sb!="undefined"){this.utag_data.BK_sb=a.BK_sb}if(typeof a.__CBS_HOME__=="undefined"){this.utag_data.show=this.utag_data.showTitle}if(DW_siteid){this.utag_data.site_id=DW_siteid}try{if(typeof a.__CBS_HOME__!="undefined"){this.utag_data.path="other/homepage/home";this.utag_data.pageType="front_door";if(typeof a.userType!="undefined"){this.utag_data.userType=a.userType}}else{if(typeof a.tealium.showTitle!="undefined"){arr_pieces=[dvar_daypart.replace(/ /gi,"-"),a.tealium.showTitle.replace(/ /gi,"-").replace(/[\[\]']+|&|:|;|!|\+/gi,"").toLocaleLowerCase(),dvar_seccategory.replace(/ /gi,"-").replace("'","")];this.utag_data.showSecCategory=dvar_seccategory;if(typeof this.utag_data.path=="undefined"){this.utag_data.path=arr_pieces.join("/")}this.utag_data.showSecCategory=dvar_seccategory}else{if(typeof a.userType!="undefined"){this.utag_data.userType=a.userType}}}}catch(b){console.log(b)}CBS.Registry.context_override=$.extend(CBS.Registry.context_override,a.tealiumOverride);if(CBS.Registry.context_override){this.utag_data=$.extend(this.utag_data,CBS.Registry.context_override)}if(document.location.href.indexOf("/all-access")>1||document.location.href.indexOf("/live-tv")>1){if(typeof this.utag_data.order_refnum!="undefined"){this.utag_data.purchaseOrderRefNum=this.utag_data.order_refnum}if(typeof this.utag_data.show!="undefined"){this.utag_data.show="";this.utag_data.showId="";this.utag_data.showTitle=""}if(typeof this.utag_data.eventType!="undefined"){this.utag_data.pageEvent=this.utag_data.eventType}if(typeof this.utag_data.siteSection!="undefined"){var d=this.utag_data.siteSection.split("|");this.utag_data.siteHier=this.utag_data.siteSection;this.utag_data.siteSection=d[0]}}this.setMvpdParner();return this.setOverrides(this.utag_data)},setOverrides:function(a){if(document.location.href.indexOf("/schedule")>1||(document.location.href.indexOf("/watch")>1&&document.location.href.indexOf("/watch_magazine")<1)||this.utag_data.showTitle=="show listings"||document.location.href.indexOf("/user/mycbs")>1||document.location.href.indexOf("/user/signup")>1){this.utag_data.showTitle=null;this.utag_data.showId=null;this.utag_data.articleType=null}if(document.location.href.indexOf("/user/mycbs")>1){this.utag_data.pageType="mycbs"}if((document.location.href.indexOf("/watch")>1)&&(document.location.href.indexOf("/watch_magazine")<1)){this.utag_data.siteSection="other";this.utag_data.siteHier="other|other|watch|home";this.utag_data.pageType="video_door"}if(this.utag_data.showTitle=="show listings"){this.utag_data.pageType="category_doors"}if(document.location.href.indexOf("/roku")>1){this.utag_data.pageType="roku_activation";this.utag_data.siteHier="home|roku_activation"}if(document.location.href.indexOf("/rokusweeps")>1){this.utag_data.pageType="roku_sweeps";this.utag_data.siteHier="home|roku_sweeps"}if(document.location.href.indexOf("/holidaysweeps")>1){this.utag_data.pageType="holiday_sweeps";this.utag_data.siteHier="sweepstakes|holiday_sweeps"}return a},setViewTracking:function(){try{this.getPageGuid()}catch(a){}},setTrackSocialClick:function(a){try{om.trackSocialClick({socialService:a})}catch(b){console.log(b)}},clickTrackButton:function(a){try{om.trackClick({item:utag_data.showId+"|"+utag_data._pageType+"|"+a})}catch(b){}},mt_rand:function(b,a){var d=arguments.length;if(d===0){b=0;a=2147483647}else{if(d===1){throw new Error("Warning: mt_rand() expects exactly 2 parameters, 1 given")}else{b=parseInt(b,10);a=parseInt(a,10)}}return Math.floor(Math.random()*(a-b+1))+b},getPageGuid:function(){require(["jquery","_cbs"],function(g){var b=uuid.v4();om.trackView({pageViewGuid:b});try{var d=window.location.href;var a="";var f="";window.__page_uuid=b;DW.pageParams={siteid:DW_siteid,onid:onidFinal,ptid:DW_ptid,ctype:a,cval:f,pguid:b,viewguid:b,ursuid:DW_ursuid};DW.clear();googletag.pubads().setTargeting("vguid",b)}catch(h){}})}}})();