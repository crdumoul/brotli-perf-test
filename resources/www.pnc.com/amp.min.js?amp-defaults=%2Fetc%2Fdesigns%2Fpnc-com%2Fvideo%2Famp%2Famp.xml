Array.prototype.indexOf||(Array.prototype.indexOf=function(c,a){if(void 0===this||null===this)throw new TypeError('"this" is null or not defined');var b=this.length>>>0;a=+a||0;Infinity===Math.abs(a)&&(a=0);0>a&&(a+=b,0>a&&(a=0));for(;a<b;a++)if(this[a]===c)return a;return-1});
Date.now||(Date.now=function(){return +new Date});
if(!Function.prototype.bind){Function.prototype.bind=function(e){function s(){}if(typeof this!=="function"){throw new TypeError("Bind must be called on a function")}var t=[].slice,n=t.call(arguments,1),r=this,i=function(){return r.apply(this instanceof s?this:e||{},n.concat(t.call(arguments)))};s.prototype=r.prototype;i.prototype=new s;return i}}
if(typeof JSON!=="object"){JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());
(function(n){function i(a,d){this.setNotifyMethod(a);this.setNotifyContext(d)}function j(a,d,b){this.name=a;this.body=d;this.type=b}function k(){}function m(){}function l(){this.subCommands=[];this.initializeMacroCommand()}function g(a,d){this.mediatorName=a||this.constructor.NAME;this.viewComponent=d}function h(a,d){this.proxyName=a||this.constructor.NAME;null!=d&&this.setData(d)}function b(a){if(null!=b.instanceMap[a])throw Error(b.MULTITON_MSG);this.initializeNotifier(a);b.instanceMap[a]=this;
this.initializeFacade()}function c(a){if(null!=c.instanceMap[a])throw Error(c.MULTITON_MSG);this.multitonKey=a;c.instanceMap[this.multitonKey]=this;this.mediatorMap=[];this.observerMap=[];this.initializeView()}function e(a){if(e.instanceMap[a])throw Error(e.MULTITON_MSG);this.multitonKey=a;e.instanceMap[a]=this;this.proxyMap=[];this.initializeModel()}function f(a){if(null!=f.instanceMap[a])throw Error(f.MULTITON_MSG);this.multitonKey=a;f.instanceMap[this.multitonKey]=this;this.commandMap=[];this.initializeController()}
function p(a,d,b){for(var a=a.split("."),b=b||o.global,c,e,f=0,g=a.length;f<g;f++)c=b,e=a[f],b=null==b[e]?b[e]={}:b[e];return null==d?b:c[e]=d}null==n&&(n=window);if(!n.puremvc){i.prototype.setNotifyMethod=function(a){this.notify=a};i.prototype.setNotifyContext=function(a){this.context=a};i.prototype.getNotifyMethod=function(){return this.notify};i.prototype.getNotifyContext=function(){return this.context};i.prototype.notifyObserver=function(a){this.getNotifyMethod().call(this.getNotifyContext(),
a)};i.prototype.compareNotifyContext=function(a){return a===this.context};i.prototype.notify=null;i.prototype.context=null;j.prototype.getName=function(){return this.name};j.prototype.setBody=function(a){this.body=a};j.prototype.getBody=function(){return this.body};j.prototype.setType=function(a){this.type=a};j.prototype.getType=function(){return this.type};j.prototype.toString=function(){var a="Notification Name: "+this.getName(),a=a+("\nBody:"+(null==this.body?"null":this.body.toString()));return a+=
"\nType:"+(null==this.type?"null":this.type)};j.prototype.name=null;j.prototype.type=null;j.prototype.body=null;k.prototype.sendNotification=function(a,d,b){var c=this.getFacade();c&&c.sendNotification(a,d,b)};k.prototype.initializeNotifier=function(a){this.multitonKey=""+a;this.facade=this.getFacade()};k.prototype.getFacade=function(){if(null==this.multitonKey)throw Error(k.MULTITON_MSG);return b.getInstance(this.multitonKey)};k.prototype.multitonKey=null;k.MULTITON_MSG="multitonKey for this Notifier not yet initialized!";
m.prototype=new k;m.prototype.constructor=m;m.prototype.execute=function(){};l.prototype=new k;l.prototype.constructor=l;l.prototype.subCommands=null;l.prototype.initializeMacroCommand=function(){};l.prototype.addSubCommand=function(a){this.subCommands.push(a)};l.prototype.execute=function(a){for(;0<this.subCommands.length;){var d=new (this.subCommands.shift());d.initializeNotifier(this.multitonKey);d.execute(a)}};g.NAME="Mediator";g.prototype=new k;g.prototype.constructor=g;g.prototype.getMediatorName=
function(){return this.mediatorName};g.prototype.setViewComponent=function(a){this.viewComponent=a};g.prototype.getViewComponent=function(){return this.viewComponent};g.prototype.listNotificationInterests=function(){return[]};g.prototype.handleNotification=function(){};g.prototype.onRegister=function(){};g.prototype.onRemove=function(){};g.prototype.mediatorName=null;g.prototype.viewComponent=null;h.NAME="Proxy";h.prototype=new k;h.prototype.constructor=h;h.prototype.getProxyName=function(){return this.proxyName};
h.prototype.setData=function(a){this.data=a};h.prototype.getData=function(){return this.data};h.prototype.onRegister=function(){};h.prototype.onRemove=function(){};h.prototype.proxyName=null;h.prototype.data=null;b.prototype.initializeFacade=function(){this.initializeModel();this.initializeController();this.initializeView()};b.getInstance=function(a){if(null==a)return null;null==b.instanceMap[a]&&(b.instanceMap[a]=new b(a));return b.instanceMap[a]};b.prototype.initializeController=function(){if(null==
this.controller)this.controller=f.getInstance(this.multitonKey)};b.prototype.initializeModel=function(){if(null==this.model)this.model=e.getInstance(this.multitonKey)};b.prototype.initializeView=function(){if(null==this.view)this.view=c.getInstance(this.multitonKey)};b.prototype.registerCommand=function(a,d){this.controller.registerCommand(a,d)};b.prototype.removeCommand=function(a){this.controller.removeCommand(a)};b.prototype.hasCommand=function(a){return this.controller.hasCommand(a)};b.prototype.registerProxy=
function(a){this.model.registerProxy(a)};b.prototype.retrieveProxy=function(a){return this.model.retrieveProxy(a)};b.prototype.removeProxy=function(a){var d=null;null!=this.model&&(d=this.model.removeProxy(a));return d};b.prototype.hasProxy=function(a){return this.model.hasProxy(a)};b.prototype.registerMediator=function(a){null!=this.view&&this.view.registerMediator(a)};b.prototype.retrieveMediator=function(a){return this.view.retrieveMediator(a)};b.prototype.removeMediator=function(a){var d=null;
null!=this.view&&(d=this.view.removeMediator(a));return d};b.prototype.hasMediator=function(a){return this.view.hasMediator(a)};b.prototype.sendNotification=function(a,d,b){this.notifyObservers(new j(a,d,b))};b.prototype.notifyObservers=function(a){null!=this.view&&this.view.notifyObservers(a)};b.prototype.initializeNotifier=function(a){this.multitonKey=a};b.hasCore=function(a){return null!=b.instanceMap[a]};b.removeCore=function(a){null!=b.instanceMap[a]&&(e.removeModel(a),c.removeView(a),f.removeController(a),
delete b.instanceMap[a])};b.prototype.controller=null;b.prototype.model=null;b.prototype.view=null;b.prototype.multitonKey=null;b.instanceMap=[];b.MULTITON_MSG="Facade instance for this Multiton key already constructed!";c.prototype.initializeView=function(){};c.getInstance=function(a){if(null==a)return null;null==c.instanceMap[a]&&(c.instanceMap[a]=new c(a));return c.instanceMap[a]};c.prototype.registerObserver=function(a,d){null!=this.observerMap[a]?this.observerMap[a].push(d):this.observerMap[a]=
[d]};c.prototype.notifyObservers=function(a){if(null!=this.observerMap[a.getName()]){for(var d=this.observerMap[a.getName()],b=[],c,e=0;e<d.length;e++)c=d[e],b.push(c);for(e=0;e<b.length;e++)c=b[e],c.notifyObserver(a)}};c.prototype.removeObserver=function(a,d){for(var b=this.observerMap[a],c=0;c<b.length;c++)if(!0==b[c].compareNotifyContext(d)){b.splice(c,1);break}0==b.length&&delete this.observerMap[a]};c.prototype.registerMediator=function(a){if(null==this.mediatorMap[a.getMediatorName()]){a.initializeNotifier(this.multitonKey);
this.mediatorMap[a.getMediatorName()]=a;var d=a.listNotificationInterests();if(0<d.length)for(var b=new i(a.handleNotification,a),c=0;c<d.length;c++)this.registerObserver(d[c],b);a.onRegister()}};c.prototype.retrieveMediator=function(a){return this.mediatorMap[a]};c.prototype.removeMediator=function(a){var d=this.mediatorMap[a];if(d){for(var b=d.listNotificationInterests(),c=0;c<b.length;c++)this.removeObserver(b[c],d);delete this.mediatorMap[a];d.onRemove()}return d};c.prototype.hasMediator=function(a){return null!=
this.mediatorMap[a]};c.removeView=function(a){delete c.instanceMap[a]};c.prototype.mediatorMap=null;c.prototype.observerMap=null;c.instanceMap=[];c.prototype.multitonKey=null;c.MULTITON_MSG="View instance for this Multiton key already constructed!";e.prototype.initializeModel=function(){};e.getInstance=function(a){if(null==a)return null;null==e.instanceMap[a]&&(e.instanceMap[a]=new e(a));return e.instanceMap[a]};e.prototype.registerProxy=function(a){a.initializeNotifier(this.multitonKey);this.proxyMap[a.getProxyName()]=
a;a.onRegister()};e.prototype.retrieveProxy=function(a){return this.proxyMap[a]};e.prototype.hasProxy=function(a){return null!=this.proxyMap[a]};e.prototype.removeProxy=function(a){var b=this.proxyMap[a];b&&(this.proxyMap[a]=null,b.onRemove());return b};e.removeModel=function(a){delete e.instanceMap[a]};e.prototype.proxyMap=null;e.instanceMap=[];e.MULTITON_MSG="Model instance for this Multiton key already constructed!";f.prototype.initializeController=function(){this.view=c.getInstance(this.multitonKey)};
f.getInstance=function(a){if(null==a)return null;null==this.instanceMap[a]&&(this.instanceMap[a]=new this(a));return this.instanceMap[a]};f.prototype.executeCommand=function(a){var b=this.commandMap[a.getName()];null!=b&&(b=new b,b.initializeNotifier(this.multitonKey),b.execute(a))};f.prototype.registerCommand=function(a,b){null==this.commandMap[a]&&this.view.registerObserver(a,new i(this.executeCommand,this));this.commandMap[a]=b};f.prototype.hasCommand=function(a){return null!=this.commandMap[a]};
f.prototype.removeCommand=function(a){this.hasCommand(a)&&(this.view.removeObserver(a,this),this.commandMap[a]=null)};f.removeController=function(a){delete this.instanceMap[a]};f.prototype.view=null;f.prototype.commandMap=null;f.prototype.multitonKey=null;f.instanceMap=[];f.MULTITON_MSG="controller key for this Multiton key already constructed";var o={global:function(){return this}(),extend:function(a,b){if("function"!==typeof a)throw new TypeError("#extend- child should be Function");if("function"!==
typeof b)throw new TypeError("#extend- parent should be Function");if(b!==a){var c=new Function;c.prototype=b.prototype;a.prototype=new c;return a.prototype.constructor=a}},decorate:function(a,b){for(var c in b)a[c]=b[c];return a}};n.puremvc={View:c,Model:e,Controller:f,SimpleCommand:m,MacroCommand:l,Facade:b,Mediator:g,Observer:i,Notification:j,Notifier:k,Proxy:h,define:function(a,b,c){a||(a={});var e=a.name,f=a.parent,g="function"===typeof f,h=a.scope||null;if("parent"in a&&!g)throw new TypeError("Class parent must be Function");
if(a.hasOwnProperty("constructor")){if(a=a.constructor,"function"!==typeof a)throw new TypeError("Class constructor must be Function");}else a=g?function(){f.apply(this,arguments)}:new Function;g&&o.extend(a,f);if(b)g=a.prototype,o.decorate(g,b),g.constructor=a;c&&o.decorate(a,c);if(e){if("string"!==typeof e)throw new TypeError("Class name must be primitive string");p(e,a,h)}return a},declare:p}}})(this);
/*	SWFObject v2.2 <http://code.google.com/p/swfobject/> 
	is released under the MIT License <http://www.opensource.org/licenses/mit-license.php> 
*/
var swfobject=function(){var D="undefined",r="object",S="Shockwave Flash",W="ShockwaveFlash.ShockwaveFlash",q="application/x-shockwave-flash",R="SWFObjectExprInst",x="onreadystatechange",O=window,j=document,t=navigator,T=false,U=[h],o=[],N=[],I=[],l,Q,E,B,J=false,a=false,n,G,m=true,M=function(){var aa=typeof j.getElementById!=D&&typeof j.getElementsByTagName!=D&&typeof j.createElement!=D,ah=t.userAgent.toLowerCase(),Y=t.platform.toLowerCase(),ae=Y?/win/.test(Y):/win/.test(ah),ac=Y?/mac/.test(Y):/mac/.test(ah),af=/webkit/.test(ah)?parseFloat(ah.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,X=!+"\v1",ag=[0,0,0],ab=null;if(typeof t.plugins!=D&&typeof t.plugins[S]==r){ab=t.plugins[S].description;if(ab&&!(typeof t.mimeTypes!=D&&t.mimeTypes[q]&&!t.mimeTypes[q].enabledPlugin)){T=true;X=false;ab=ab.replace(/^.*\s+(\S+\s+\S+$)/,"$1");ag[0]=parseInt(ab.replace(/^(.*)\..*$/,"$1"),10);ag[1]=parseInt(ab.replace(/^.*\.(.*)\s.*$/,"$1"),10);ag[2]=/[a-zA-Z]/.test(ab)?parseInt(ab.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else{if(typeof O.ActiveXObject!=D){try{var ad=new ActiveXObject(W);if(ad){ab=ad.GetVariable("$version");if(ab){X=true;ab=ab.split(" ")[1].split(",");ag=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)]}}}catch(Z){}}}return{w3:aa,pv:ag,wk:af,ie:X,win:ae,mac:ac}}(),k=function(){if(!M.w3){return}if((typeof j.readyState!=D&&j.readyState=="complete")||(typeof j.readyState==D&&(j.getElementsByTagName("body")[0]||j.body))){f()}if(!J){if(typeof j.addEventListener!=D){j.addEventListener("DOMContentLoaded",f,false)}if(M.ie&&M.win){j.attachEvent(x,function(){if(j.readyState=="complete"){j.detachEvent(x,arguments.callee);f()}});if(O==top){(function(){if(J){return}try{j.documentElement.doScroll("left")}catch(X){setTimeout(arguments.callee,0);return}f()})()}}if(M.wk){(function(){if(J){return}if(!/loaded|complete/.test(j.readyState)){setTimeout(arguments.callee,0);return}f()})()}s(f)}}();function f(){if(J){return}try{var Z=j.getElementsByTagName("body")[0].appendChild(C("span"));Z.parentNode.removeChild(Z)}catch(aa){return}J=true;var X=U.length;for(var Y=0;Y<X;Y++){U[Y]()}}function K(X){if(J){X()}else{U[U.length]=X}}function s(Y){if(typeof O.addEventListener!=D){O.addEventListener("load",Y,false)}else{if(typeof j.addEventListener!=D){j.addEventListener("load",Y,false)}else{if(typeof O.attachEvent!=D){i(O,"onload",Y)}else{if(typeof O.onload=="function"){var X=O.onload;O.onload=function(){X();Y()}}else{O.onload=Y}}}}}function h(){if(T){V()}else{H()}}function V(){var X=j.getElementsByTagName("body")[0];var aa=C(r);aa.setAttribute("type",q);var Z=X.appendChild(aa);if(Z){var Y=0;(function(){if(typeof Z.GetVariable!=D){var ab=Z.GetVariable("$version");if(ab){ab=ab.split(" ")[1].split(",");M.pv=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)]}}else{if(Y<10){Y++;setTimeout(arguments.callee,10);return}}X.removeChild(aa);Z=null;H()})()}else{H()}}function H(){var ag=o.length;if(ag>0){for(var af=0;af<ag;af++){var Y=o[af].id;var ab=o[af].callbackFn;var aa={success:false,id:Y};if(M.pv[0]>0){var ae=c(Y);if(ae){if(F(o[af].swfVersion)&&!(M.wk&&M.wk<312)){w(Y,true);if(ab){aa.success=true;aa.ref=z(Y);ab(aa)}}else{if(o[af].expressInstall&&A()){var ai={};ai.data=o[af].expressInstall;ai.width=ae.getAttribute("width")||"0";ai.height=ae.getAttribute("height")||"0";if(ae.getAttribute("class")){ai.styleclass=ae.getAttribute("class")}if(ae.getAttribute("align")){ai.align=ae.getAttribute("align")}var ah={};var X=ae.getElementsByTagName("param");var ac=X.length;for(var ad=0;ad<ac;ad++){if(X[ad].getAttribute("name").toLowerCase()!="movie"){ah[X[ad].getAttribute("name")]=X[ad].getAttribute("value")}}P(ai,ah,Y,ab)}else{p(ae);if(ab){ab(aa)}}}}}else{w(Y,true);if(ab){var Z=z(Y);if(Z&&typeof Z.SetVariable!=D){aa.success=true;aa.ref=Z}ab(aa)}}}}}function z(aa){var X=null;var Y=c(aa);if(Y&&Y.nodeName=="OBJECT"){if(typeof Y.SetVariable!=D){X=Y}else{var Z=Y.getElementsByTagName(r)[0];if(Z){X=Z}}}return X}function A(){return !a&&F("6.0.65")&&(M.win||M.mac)&&!(M.wk&&M.wk<312)}function P(aa,ab,X,Z){a=true;E=Z||null;B={success:false,id:X};var ae=c(X);if(ae){if(ae.nodeName=="OBJECT"){l=g(ae);Q=null}else{l=ae;Q=X}aa.id=R;if(typeof aa.width==D||(!/%$/.test(aa.width)&&parseInt(aa.width,10)<310)){aa.width="310"}if(typeof aa.height==D||(!/%$/.test(aa.height)&&parseInt(aa.height,10)<137)){aa.height="137"}j.title=j.title.slice(0,47)+" - Flash Player Installation";var ad=M.ie&&M.win?"ActiveX":"PlugIn",ac="MMredirectURL="+O.location.toString().replace(/&/g,"%26")+"&MMplayerType="+ad+"&MMdoctitle="+j.title;if(typeof ab.flashvars!=D){ab.flashvars+="&"+ac}else{ab.flashvars=ac}if(M.ie&&M.win&&ae.readyState!=4){var Y=C("div");X+="SWFObjectNew";Y.setAttribute("id",X);ae.parentNode.insertBefore(Y,ae);ae.style.display="none";(function(){if(ae.readyState==4){ae.parentNode.removeChild(ae)}else{setTimeout(arguments.callee,10)}})()}u(aa,ab,X)}}function p(Y){if(M.ie&&M.win&&Y.readyState!=4){var X=C("div");Y.parentNode.insertBefore(X,Y);X.parentNode.replaceChild(g(Y),X);Y.style.display="none";(function(){if(Y.readyState==4){Y.parentNode.removeChild(Y)}else{setTimeout(arguments.callee,10)}})()}else{Y.parentNode.replaceChild(g(Y),Y)}}function g(ab){var aa=C("div");if(M.win&&M.ie){aa.innerHTML=ab.innerHTML}else{var Y=ab.getElementsByTagName(r)[0];if(Y){var ad=Y.childNodes;if(ad){var X=ad.length;for(var Z=0;Z<X;Z++){if(!(ad[Z].nodeType==1&&ad[Z].nodeName=="PARAM")&&!(ad[Z].nodeType==8)){aa.appendChild(ad[Z].cloneNode(true))}}}}}return aa}function u(ai,ag,Y){var X,aa=c(Y);if(M.wk&&M.wk<312){return X}if(aa){if(typeof ai.id==D){ai.id=Y}if(M.ie&&M.win){var ah="";for(var ae in ai){if(ai[ae]!=Object.prototype[ae]){if(ae.toLowerCase()=="data"){ag.movie=ai[ae]}else{if(ae.toLowerCase()=="styleclass"){ah+=' class="'+ai[ae]+'"'}else{if(ae.toLowerCase()!="classid"){ah+=" "+ae+'="'+ai[ae]+'"'}}}}}var af="";for(var ad in ag){if(ag[ad]!=Object.prototype[ad]){af+='<param name="'+ad+'" value="'+ag[ad]+'" />'}}aa.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+ah+">"+af+"</object>";N[N.length]=ai.id;X=c(ai.id)}else{var Z=C(r);Z.setAttribute("type",q);for(var ac in ai){if(ai[ac]!=Object.prototype[ac]){if(ac.toLowerCase()=="styleclass"){Z.setAttribute("class",ai[ac])}else{if(ac.toLowerCase()!="classid"){Z.setAttribute(ac,ai[ac])}}}}for(var ab in ag){if(ag[ab]!=Object.prototype[ab]&&ab.toLowerCase()!="movie"){e(Z,ab,ag[ab])}}aa.parentNode.replaceChild(Z,aa);X=Z}}return X}function e(Z,X,Y){var aa=C("param");aa.setAttribute("name",X);aa.setAttribute("value",Y);Z.appendChild(aa)}function y(Y){var X=c(Y);if(X&&X.nodeName=="OBJECT"){if(M.ie&&M.win){X.style.display="none";(function(){if(X.readyState==4){b(Y)}else{setTimeout(arguments.callee,10)}})()}else{X.parentNode.removeChild(X)}}}function b(Z){var Y=c(Z);if(Y){for(var X in Y){if(typeof Y[X]=="function"){Y[X]=null}}Y.parentNode.removeChild(Y)}}function c(Z){var X=null;try{X=j.getElementById(Z)}catch(Y){}return X}function C(X){return j.createElement(X)}function i(Z,X,Y){Z.attachEvent(X,Y);I[I.length]=[Z,X,Y]}function F(Z){var Y=M.pv,X=Z.split(".");X[0]=parseInt(X[0],10);X[1]=parseInt(X[1],10)||0;X[2]=parseInt(X[2],10)||0;return(Y[0]>X[0]||(Y[0]==X[0]&&Y[1]>X[1])||(Y[0]==X[0]&&Y[1]==X[1]&&Y[2]>=X[2]))?true:false}function v(ac,Y,ad,ab){if(M.ie&&M.mac){return}var aa=j.getElementsByTagName("head")[0];if(!aa){return}var X=(ad&&typeof ad=="string")?ad:"screen";if(ab){n=null;G=null}if(!n||G!=X){var Z=C("style");Z.setAttribute("type","text/css");Z.setAttribute("media",X);n=aa.appendChild(Z);if(M.ie&&M.win&&typeof j.styleSheets!=D&&j.styleSheets.length>0){n=j.styleSheets[j.styleSheets.length-1]}G=X}if(M.ie&&M.win){if(n&&typeof n.addRule==r){n.addRule(ac,Y)}}else{if(n&&typeof j.createTextNode!=D){n.appendChild(j.createTextNode(ac+" {"+Y+"}"))}}}function w(Z,X){if(!m){return}var Y=X?"visible":"hidden";if(J&&c(Z)){c(Z).style.visibility=Y}else{v("#"+Z,"visibility:"+Y)}}function L(Y){var Z=/[\\\"<>\.;]/;var X=Z.exec(Y)!=null;return X&&typeof encodeURIComponent!=D?encodeURIComponent(Y):Y}var d=function(){if(M.ie&&M.win){window.attachEvent("onunload",function(){var ac=I.length;for(var ab=0;ab<ac;ab++){I[ab][0].detachEvent(I[ab][1],I[ab][2])}var Z=N.length;for(var aa=0;aa<Z;aa++){y(N[aa])}for(var Y in M){M[Y]=null}M=null;for(var X in swfobject){swfobject[X]=null}swfobject=null})}}();return{registerObject:function(ab,X,aa,Z){if(M.w3&&ab&&X){var Y={};Y.id=ab;Y.swfVersion=X;Y.expressInstall=aa;Y.callbackFn=Z;o[o.length]=Y;w(ab,false)}else{if(Z){Z({success:false,id:ab})}}},getObjectById:function(X){if(M.w3){return z(X)}},embedSWF:function(ab,ah,ae,ag,Y,aa,Z,ad,af,ac){var X={success:false,id:ah};if(M.w3&&!(M.wk&&M.wk<312)&&ab&&ah&&ae&&ag&&Y){w(ah,false);K(function(){ae+="";ag+="";var aj={};if(af&&typeof af===r){for(var al in af){aj[al]=af[al]}}aj.data=ab;aj.width=ae;aj.height=ag;var am={};if(ad&&typeof ad===r){for(var ak in ad){am[ak]=ad[ak]}}if(Z&&typeof Z===r){for(var ai in Z){if(typeof am.flashvars!=D){am.flashvars+="&"+ai+"="+Z[ai]}else{am.flashvars=ai+"="+Z[ai]}}}if(F(Y)){var an=u(aj,am,ah);if(aj.id==ah){w(ah,true)}X.success=true;X.ref=an}else{if(aa&&A()){aj.data=aa;P(aj,am,ah,ac);return}else{w(ah,true)}}if(ac){ac(X)}})}else{if(ac){ac(X)}}},switchOffAutoHideShow:function(){m=false},ua:M,getFlashPlayerVersion:function(){return{major:M.pv[0],minor:M.pv[1],release:M.pv[2]}},hasFlashPlayerVersion:F,createSWF:function(Z,Y,X){if(M.w3){return u(Z,Y,X)}else{return undefined}},showExpressInstall:function(Z,aa,X,Y){if(M.w3&&A()){P(Z,aa,X,Y)}},removeSWF:function(X){if(M.w3){y(X)}},createCSS:function(aa,Z,Y,X){if(M.w3){v(aa,Z,Y,X)}},addDomLoadEvent:K,addLoadEvent:s,getQueryParamValue:function(aa){var Z=j.location.search||j.location.hash;if(Z){if(/\?/.test(Z)){Z=Z.split("?")[1]}if(aa==null){return L(Z)}var Y=Z.split("&");for(var X=0;X<Y.length;X++){if(Y[X].substring(0,Y[X].indexOf("="))==aa){return L(Y[X].substring((Y[X].indexOf("=")+1)))}}}return""},expressInstallCallback:function(){if(a){var X=c(R);if(X&&l){X.parentNode.replaceChild(l,X);if(Q){w(Q,true);if(M.ie&&M.win){l.style.display="block"}}if(E){E(B)}}a=false}}}}();



(function(){function pd(){var a,b,c,d=this;b=null;this.getSDK=function(){return b};this.setSDK=function(c){var d;b=c;a();for(d in b)c=b[d],window[d]=c;return b};this.saveSDK=function(a,b){var d,e;if(null!=b&&null!=a&&""!==a){if(null==b.main)for(d in b)if(e=b[d],(null!=e?e.VERSION:void 0)===a){b.main=e;break}null==b.version&&(b.version=a);c.push(b);return this[a]=b}};c=[];this.getVersions=function(){return c.slice()};this.getVersion=function(a){return this[a]};this.setVersion=function(a){b=this.getVersion(a);
if(null==b)return null;this.setSDK(b);return b};this.revert=function(){return this.setSDK(c[0])};this.noConflict=function(){var a;a=this.getSDK();this.revert();return a};this.create=function(){var a;a=function(a,b){this.prototype=a.prototype;return a.apply(this,b)};return function(c){return new a(b.main,arguments)}}();a=function(){var a,c,e;if(null!=(c=window.com)&&null!=(e=c.akamai)&&e.amp)for(a in window)if(c=window[a],(c===window.AMP||c===window.AMPremier)&&null!=(null!=c?c.VERSION:void 0)&&""!==
c.VERSION&&c.VERSION!==(null!=b?b.version:void 0)&&null==d[c.VERSION]){a={};a.main=c;a.com=window.com;window.AMP&&(a.AMP=window.AMP);window.AMPPremier&&(a.AMPremier=window.AMPPremier);window.Utils&&(a.Utils=window.Utils);window.QueryString&&(a.QueryString=window.QueryString);window.QueryParams&&(a.QueryParams=window.QueryParams);d.saveSDK(c.VERSION,a);break}};a()}var id;null==window.AKAMAI_MEDIA_PLAYER&&(window.AKAMAI_MEDIA_PLAYER=new pd);if(null==window.AKAMAI_MEDIA_PLAYER["AMP v4.0.0019"]){id=window.AKAMAI_MEDIA_PLAYER["AMP v4.0.0019"]=
{};var qd=function(a){return{}.hasOwnProperty(a)},f=function(a,b){function c(){this.constructor=a}for(var d in b)qd.call(b,d)&&(a[d]=b[d]);c.prototype=b.prototype;a.prototype=new c;a.__super__=b.prototype;return a},Bb=function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1},rd=function(a,b){return function(){return a.apply(b,arguments)}},e;e={STARTUP:"startup",LOAD:"load",PAUSE_REQUEST:"pauserequest",TOGGLE_PLAY_PAUSE:"togglePlayPause",CHANGE_PLAY_STATE:"chageplaystate",
PLAY_STATE_CHANGE:"playstatechange",TOGGLE_FULL_SCREEN:"toggleFullScreen",CHANGE_DISPLAY_STATE:"chageDisplayState",DISPLAY_STATE_CHANGE:"displayStateChange",FULL_SCREEN_CHANGE:"fullscreenchange",DISABLE_FULL_SCREEN:"disableFullScreen",ENABLE_FULL_SCREEN:"enableFullScreen",LANGUAGE_CHANGE:"languageChange",TOGGLE_ACTIVE:"toggleActive",CHANGE_ACTIVE_STATE:"changeactivestate",ACTIVE_STATE_CHANGE:"activestatechange",CHANGE_MEDIA:"changeMedia",SET_MEDIA:"setmedia",UPDATE_DATA_BINDINGS:"updatedatabindings",
CHANGE_VOLUME:"changevolume",CHANGE_MUTED:"changemuted",SEEK:"seek",CHANGE_DURATION:"changeduration",CHANGE_AUTOPLAY:"changeAutoplay",CHANGE_LOOP:"changeLoop",PLAYBACK_CORE_CHANGE:"playbackCoreChange",CHANGE_PLAYBACK_CORE:"changePlaybackCore",UPDATE_PLAYBACK_CORE:"updatePlaybackCore",START:"start",END:"end",REPLAY:"replay",LOAD_FEED:"loadFeed",REGISTER_PLUGIN:"registerPlugin",REGISTER_PLUGINS:"registerPlugins",PLUGIN_REGISTERED:"pluginRegistered",ADD_LAYER:"addLayer",REMOVE_LAYER:"removeLayer",ADD_OVERLAY:"addOverlay",
REMOVE_OVERLAY:"removeOverlay",ADD_CONTROL:"addControl",REMOVE_CONTROL:"removeControl",ADD_APPLICATION_STATE:"addApplicationState",REMOVE_APPLICATION_STATE:"removeApplicationState",DISPATCH_EVENT:"dispatchEvent",CHANGE_PARAMS:"changeParams",ADD_CUE_POINTS:"addCuePoints",REMOVE_CUE_POINTS:"removeCuePoints",INITIALIZED:"initialized",DISABLE_VIDEO_EVENTS:"disableVideoEvents",ENABLE_VIDEO_EVENTS:"enableVideoEvents",REGISTER_PLAYBACK_CORE:"registerPlaybackCore",REMOVE_PLAYBACK_CORE:"removePlaybackCore",
LOADED_METADATA:"loadedmetadata",READY:"ready",ERROR:"error",ENDED:"ended",STARTED:"started",DURATION_CHANGE:"durationchange",SEEKING:"seeking",SEEKED:"seeked",TIME_UPDATE:"timeupdate",LOAD_START:"loadstart",LOADED_DATA:"loadeddata",CAN_PLAY:"canplay",CAN_PLAY_THROUGH:"canplaythrough",PROGRESS:"progress",MEDIA_CHANGE:"mediachange",WAITING:"waiting",PLAY:"play",PLAYING:"playing",PAUSE:"pause",PLAY_REQUEST:"playrequest",MEDIUM_CHANGE:"mediumchange",TEMPORAL_TYPE_CHANGE:"temporaltypechange",VOLUME_CHANGE:"volumechange",
FAIL_OVER_ATTEMPT:"failoverattempt",PLAYBACK_TARGET_CHANGE:"playbacktargetchange"};var z=function(a,b){z.__super__.constructor.call(this,this.getModuleName()+"-"+Date.now());this.logger=H;this.config=a;this.moduleMap={};this.viewComponent=b;this.initialize();this.moduleAPI=this.createAPI()};f(z,puremvc.Facade);z.prototype.logger=null;z.prototype.config=null;z.prototype.moduleName=null;z.prototype.moduleMap=null;z.prototype.viewComponent=null;z.prototype.moduleAPI=null;z.prototype.initialize=function(){this.createModel();
this.createController();this.createView()};z.prototype.createModel=function(){this.registerProxy(new C(this.config))};z.prototype.createView=function(){};z.prototype.createController=function(){};z.prototype.createAPI=function(){return new ua(this)};z.prototype.getModuleName=function(){return this.moduleName};z.prototype.getConfig=function(){return this.config};z.prototype.hasModule=function(a){return null!=this.moduleMap[a]};z.prototype.getModules=function(){var a,b,c,d;b={};d=this.moduleMap;for(a in d)c=
d[a],b[a]=c.module;return b};z.prototype.registerModule=function(a){var b,c,d;d=a.getModuleName();null!=a&&null==this.moduleMap[d]&&(b=new va(a),this.moduleMap[d]=b,this.registerMediator(b),b=this.getAPI(),c=a.getAPI(),null!=b&&null!=c&&(b[d]=c),a.onRegister())};z.prototype.retrieveModule=function(a){return this.moduleMap[a].module};z.prototype.removeModule=function(a){var b,c;b=this.moduleMap[a];if(null!=b)return delete this.moduleMap[a],this.removeMediator(a),c=this.getAPI(),null!=(null!=c?c[a]:
void 0)&&delete c[a],b.module.onRemove(),b.module};z.prototype.getAPI=function(){return this.moduleAPI};z.prototype.listNotificationInterests=function(){return[]};z.prototype.listNotificationPublications=function(){return[]};z.prototype.listNotificationEvents=function(){return[]};z.prototype.getViewComponent=function(){return this.viewComponent};z.prototype.setViewComponent=function(a){return this.viewComponent=a};z.prototype.onRegister=function(){};z.prototype.onRemove=function(){};z.prototype.destroy=
function(){var a;null!=this.viewComponent&&(this.viewComponent.innerHTML="",this.viewComponent.className="");puremvc.Facade.removeCore(this.multitonKey);for(a in this)this[a]=null,delete this[a]};var ua=function(a){ua.attachModuleDispatcher(a,new $(this))};ua.attachModuleDispatcher=function(a,b){var c,d;a.registerMediator(b);d=b.dispatcher;c=b.api;c.addEventListener=d.addEventListener.bind(d);c.removeEventListener=d.removeEventListener.bind(d);c.dispatchEvent=d.dispatchEvent.bind(d);!0===a.logger.enabled&&
(c.getModule=function(){return a})};ua.prototype.addEventListener=function(a,b,c){};ua.prototype.dispatchEvent=function(a){};ua.prototype.removeEventListener=function(a,b,c){};var C=function(a){this.config=a;C.__super__.constructor.call(this)};f(C,puremvc.Proxy);C.NAME="ModuleProxy";C.prototype.defaults=null;C.prototype.config=null;C.prototype.initializeNotifier=function(a){C.__super__.initializeNotifier.call(this,a);this.createData()};C.prototype.createData=function(){null!=this.config&&this.setData(this.config)};
C.prototype.getData=function(){return this.data};C.prototype.setData=function(a){var b,c,d,k;d={};k=this.defaults;for(c in k)b=k[c],b=c in a?a[c]:b,d[c]=b;this.data=d;return a};var jd=function(a){var b;a.className=Cb.PREFIX+"player";b=document.createElement("div");b.className=Cb.PREFIX+"install-flash";a.appendChild(b);a=document.createElement("p");a.innerHTML="To view this page ensure that Adobe Flash Player version 10.2.0 or greater is installed.";b.appendChild(a);a=document.createElement("a");a.href=
"http://www.adobe.com/go/getflashplayer";b.appendChild(a);b=document.createElement("img");b.src="//www.adobe.com/images/shared/download_buttons/get_flash_player.gif";b.alt="Get Adobe Flash player";a.appendChild(b)};jd.prototype.getModules=function(){return[]};jd.prototype.getAPI=function(){return{}};var kc=function(){kc.__super__.constructor.call(this)};f(kc,puremvc.SimpleCommand);kc.prototype.execute=function(a){a=this.facade.retrieveProxy(y.NAME).getActiveState()===wa.ACTIVE?wa.INACTIVE:wa.ACTIVE;
this.sendNotification(e.CHANGE_ACTIVE_STATE,a)};var lc=function(){lc.__super__.constructor.call(this)};f(lc,puremvc.SimpleCommand);lc.prototype.execute=function(a){a=this.facade.retrieveProxy(y.NAME).getDisplayState()===aa.FULL_SCREEN?aa.NORMAL:aa.FULL_SCREEN;this.sendNotification(e.CHANGE_DISPLAY_STATE,a)};var Wa=function(){Wa.__super__.constructor.call(this)};f(Wa,puremvc.SimpleCommand);Wa.interval=null;Wa.prototype.execute=function(a){var b,c,d,k=this;d=a.getBody();b=this.facade.retrieveProxy(q.NAME).getCore();
null!=b&&b.webkitSupportsFullscreen&&(a=this.facade.retrieveProxy(y.NAME),a.setDisplayState(d),c={},null!=b.webkitRequestFullScreen?(c.enter=function(){return b.webkitRequestFullScreen()},c.exit=function(){return document.webkitCancelFullScreen()},c.event="onwebkitfullscreenchange",c.element="webkitFullscreenElement"):null!=b.requestFullscreen?(c.enter=function(){return b.requestFullscreen()},c.exit=function(){return document.cancelFullscreen()},c.event="onfullscreenchange",c.element="fullscreenElement"):
null!=b.mozRequestFullScreen?(c.enter=function(){return b.mozRequestFullscreen()},c.exit=function(){return document.mozCancelFullScreen()},c.event="onmozfullscreenchange",c.element="mozFullscreenElement"):null!=b.webkitEnterFullscreen&&(c.enter=function(){return b.webkitEnterFullscreen()},c.exit=function(){return b.webkitExitFullscreen()},c.event=null),d===aa.FULL_SCREEN?(c.enter(),null!=c.event?b[c.event]=function(a){if(null==document[c.element])return k.sendNotification(e.CHANGE_DISPLAY_STATE,aa.NORMAL)}:
(clearInterval(Wa.interval),Wa.interval=setInterval(function(){if(!0!==b.webkitDisplayingFullscreen)return k.sendNotification(e.CHANGE_DISPLAY_STATE,aa.NORMAL),clearInterval(Wa.interval)},100))):d===aa.NORMAL&&(c.exit(),b[c.event]=null,clearInterval(Wa.interval)),this.sendNotification(e.DISPATCH_EVENT,new ba("fullscreenchange",d===aa.FULL_SCREEN)))};var mc=function(){mc.__super__.constructor.call(this)};f(mc,puremvc.SimpleCommand);mc.prototype.execute=function(a){var b,c,d,k=this;this.facade.logger.debug("ChangePlaybackCoreCommand");
d=this.facade.retrieveProxy(q.NAME);c=this.facade.retrieveProxy(m.NAME);b=a.getBody();a=this.facade.getVideo();this.facade.setVideo(b);null!=a&&l.clear(a);a=[];a.push(l.create(b,"timeupdate",function(a){return k.sendNotification(e.TIME_UPDATE,a.target.currentTime)}));a.push(l.create(b,"durationchange",function(a){k.facade.logger.debug("Playback core: durationchange: "+a.target.duration);/Android 4/.test(navigator.userAgent)&&-1!==a.target.src.indexOf(".m3u8")||k.sendNotification(e.CHANGE_DURATION,
a.target.duration)}));a.push(l.create(b,"playing",function(a){k.sendNotification(e.CHANGE_PLAY_STATE,PlayState.PLAYING);k.sendNotification(e.PLAYING)}));a.push(l.create(b,"play",function(a){}));a.push(l.create(b,"pause",function(a){0<a.target.readyState&&k.sendNotification(e.CHANGE_PLAY_STATE,PlayState.PAUSED)}));a.push(l.create(b,e.LOADED_DATA,function(a){k.sendNotification(e.LOADED_DATA)}));a.push(l.create(b,"waiting",function(a){k.sendNotification(e.WAITING)}));a.push(l.create(b,"seeking",function(a){k.sendNotification(e.SEEKING)}));
a.push(l.create(b,"seeked",function(a){k.sendNotification(e.SEEKED)}));a.push(l.create(b,"ended",function(a){k.sendNotification(e.ENDED)}));a.push(l.create(b,"progress",function(a){var b,c;try{c=a.target,b=c.buffered,k.sendNotification(e.PROGRESS,b.end(b.length-1)/c.duration)}catch(d){}}));a.push(l.create(b,"error",function(a){k.sendNotification(e.ERROR,a.target.error)}));a.push(l.create(b,e.LOAD_START,function(a){k.sendNotification(e.LOAD_START)}));a.push(l.create(b,"canplay",function(a){k.sendNotification(e.CAN_PLAY)}));
a.push(l.create(b,"canplaythrough",function(a){k.sendNotification(e.CAN_PLAY_THROUGH);k.sendNotification(e.PROGRESS,c.getDuration())}));a.push(l.create(b,"loadedmetadata",function(a){k.sendNotification(e.ENABLE_FULL_SCREEN);k.sendNotification(e.LOADED_METADATA);/Android 4/.test(navigator.userAgent)&&-1!==a.target.src.indexOf(".m3u8")||k.sendNotification(e.CHANGE_DURATION,b.duration)}));this.sendNotification(e.DISABLE_FULL_SCREEN);d.setVideo(b);d.setHandlers(a)};var nc=function(){nc.__super__.constructor.call(this)};
f(nc,puremvc.SimpleCommand);nc.prototype.execute=function(a){this.facade.retrieveProxy(A.NAME).setAutoplay(a.getBody())};var oc=function(){oc.__super__.constructor.call(this)};f(oc,puremvc.SimpleCommand);oc.prototype.execute=function(a){this.facade.retrieveProxy(A.NAME).setLoop(a.getBody())};var pc=function(){pc.__super__.constructor.call(this)};f(pc,puremvc.SimpleCommand);pc.prototype.execute=function(a){this.facade.retrieveProxy(q.NAME).setVolume(a.getBody())};var Qb=function(){Qb.__super__.constructor.call(this)};
f(Qb,puremvc.SimpleCommand);Qb.prototype.execute=function(a){var b,c,d,k;d=a.getBody();c=this.facade.retrieveProxy(q.NAME);a=this.facade.retrieveProxy(m.NAME);0===d&&a.getType()===h.mimeTypes.m3u8&&(d=0.25);k=this.facade.getVideo();0===k.readyState?(b=function(a){k.removeEventListener("loadedmetadata",b,!1);return c.setCurrentTime(d)},k.addEventListener("loadedmetadata",b,!1)):c.setCurrentTime(d);this.sendNotification(e.CHANGE_PLAY_STATE,PlayState.WAITING)};var qc=function(){qc.__super__.constructor.call(this)};
f(qc,puremvc.SimpleCommand);qc.prototype.execute=function(a){this.facade.retrieveProxy(y.NAME).setSeeking(!0)};var rc=function(){rc.__super__.constructor.call(this)};f(rc,puremvc.SimpleCommand);rc.prototype.execute=function(a){this.facade.retrieveProxy(q.NAME).getSrc();this.facade.retrieveProxy(y.NAME).setSeeking(!1)};var sc=function(){sc.__super__.constructor.call(this)};f(sc,puremvc.SimpleCommand);sc.prototype.execute=function(a){this.facade.retrieveProxy(q.NAME).setCurrentTime(0.25);this.sendNotification(e.PLAY)};
var tc=function(){tc.__super__.constructor.call(this)};f(tc,puremvc.SimpleCommand);tc.prototype.execute=function(a){this.facade.logger.debug("EndCommand",a);a.getBody();a=this.facade.retrieveProxy(q.NAME);a.pause();if(a.getCurrentTime()!==a.getDuration())return a.setCurrentTime(a.getDuration())};var uc=function(){uc.__super__.constructor.call(this)};f(uc,puremvc.SimpleCommand);uc.prototype.execute=function(a){this.facade.logger.debug("StartedCommand");this.facade.retrieveProxy(q.NAME).setStarted(!0)};
var vc=function(){vc.__super__.constructor.call(this)};f(vc,puremvc.SimpleCommand);vc.prototype.execute=function(a){this.facade.logger.debug("WaitingCommand");this.facade.retrieveProxy(y.NAME).getPlayState()!==PlayState.LOADING&&this.sendNotification(e.CHANGE_PLAY_STATE,PlayState.WAITING)};var wc=function(){wc.__super__.constructor.call(this)};f(wc,puremvc.SimpleCommand);wc.prototype.execute=function(a){this.facade.retrieveProxy(q.NAME).setMuted(a.getBody())};var xc=function(){xc.__super__.constructor.call(this)};
f(xc,puremvc.SimpleCommand);xc.prototype.execute=function(a){var b;this.facade.logger.debug("CheckAuthorizationCommand");b=this.facade.retrieveProxy(L.NAME);a=a.getBody();b.setMedia(a);!1===b.getAuthorized()?this.sendNotification(ca.AUTHORIZE,a):this.sendNotification(e.MEDIA_CHANGE,a)};var yc=function(){yc.__super__.constructor.call(this)};f(yc,puremvc.SimpleCommand);yc.prototype.execute=function(a){var b;this.facade.logger.debug("AuthorizedCommand");a=this.facade.retrieveProxy(m.NAME);a.authorized=
!0;b=this.facade.retrieveProxy(L.NAME).createURL(a.getSrc());a.setSrc(b);this.sendNotification(e.MEDIA_CHANGE,a.getData())};var zc=function(){zc.__super__.constructor.call(this)};f(zc,puremvc.SimpleCommand);zc.prototype.execute=function(a){this.facade.logger.debug("InitializedCommand");this.facade.retrieveProxy(q.NAME).initialized=!0};var Ac=function(){Ac.__super__.constructor.call(this)};f(Ac,puremvc.SimpleCommand);Ac.prototype.execute=function(a){var b,c,d,k,e;this.facade.logger.debug("DisableVideoEventsCommand",
a.getBody());a=a.getBody();c=this.facade.retrieveProxy(q.NAME).getHandlers();d=0;for(k=c.length;d<k;d++)b=c[d],(e=b.type,0<=Bb.call(a,e))&&b.unbind()};var Bc=function(){Bc.__super__.constructor.call(this)};f(Bc,puremvc.SimpleCommand);Bc.prototype.execute=function(a){var b,c,d,k,e;this.facade.logger.debug("EnableVideoEventsCommand",a.getBody());a=a.getBody();c=this.facade.retrieveProxy(q.NAME).getHandlers();d=0;for(k=c.length;d<k;d++)b=c[d],(e=b.type,0<=Bb.call(a,e))&&b.bind()};var Cc=function(){Cc.__super__.constructor.call(this)};
f(Cc,puremvc.SimpleCommand);Cc.prototype.execute=function(a){this.facade.logger.debug("RegisterPlaybackCoreCommand");this.facade.retrieveProxy(R.NAME).registerPlaybackCore(a.getBody())};var Dc=function(){Dc.__super__.constructor.call(this)};f(Dc,puremvc.SimpleCommand);Dc.prototype.execute=function(a){this.facade.logger.debug("PlaybackTargetChangeCommand");a="amp"===a.getBody().target?e.REMOVE_APPLICATION_STATE:e.ADD_APPLICATION_STATE;this.sendNotification(a,"remote-playback")};var Xa=function(a,b){this.cssPrefix=
Cb.PREFIX;Xa.__super__.constructor.call(this,a,b)};f(Xa,puremvc.Mediator);Xa.prototype.config=null;Xa.prototype.cssPrefix=null;Xa.prototype.initializeNotifier=function(a){Xa.__super__.initializeNotifier.call(this,a);this.config=(this.facade.app||this.facade).retrieveProxy(C.NAME);this.classList={prefix:this.cssPrefix,element:this.viewComponent,contains:function(a,c){var d,k;null==c&&(c=this.element);d=this.prefix+a;return null!=(null!=(k=c.classList)?k.contains:void 0)?c.classList.contains(d):-1!==
c.className.indexOf(d)},add:function(a,c){var d,k;null==c&&(c=this.element);d=this.prefix+a;null!=(null!=(k=c.classList)?k.add:void 0)?c.classList.add(d):this.contains(a,c)||(c.className=""!==c.className?c.className+(" "+d):d)},remove:function(a,c){var d,k;null==c&&(c=this.element);d=this.prefix+a;null!=(null!=(k=c.classList)?k.remove:void 0)?c.classList.remove(d):this.contains(a,c)&&(d=RegExp(" ?"+d),c.className=c.className.replace(d,""))},toggle:function(a,c){var d;null==c&&(c=this.element);return null!=
(null!=(d=c.classList)?d.toggle:void 0)?c.classList.toggle(this.prefix+a):this.contains(a,c)?this.remome(a,c):this.add(a,c)}}};var na=function(a,b){na.__super__.constructor.call(this,a,b)};f(na,Xa);na.NAME="LocalizedMediator";na.prototype.localizationManager=null;na.prototype.initializeNotifier=function(a){na.__super__.initializeNotifier.call(this,a);this.localizationManager=(this.facade.app||this.facade).retrieveProxy(O.NAME)};var ha=function(a,b){null==b&&(b="div");"string"===typeof b&&(b=document.createElement(b));
ha.__super__.constructor.call(this,a,b)};f(ha,na);ha.NAME="OverlayMediator";ha.prototype.onRegister=function(){ha.__super__.onRegister.call(this);this.sendNotification(e.ADD_OVERLAY,this.viewComponent)};var Ya=function(a){Ya.__super__.constructor.call(this,Ya.NAME,a)};f(Ya,ha);Ya.NAME="EndSlateMediator";Ya.prototype.onRegister=function(){null!=this.config.getEndSlate()&&(this.classList.add("end-slate"),Ya.__super__.onRegister.call(this))};Ya.prototype.listNotificationInterests=function(){return[e.MEDIA_CHANGE]};
Ya.prototype.handleNotification=function(a){var b;switch(a.getName()){case e.MEDIA_CHANGE:b=a.getBody(),a=this.config.getEndSlate(),this.viewComponent.innerHTML="",null!=a&&(a=!0===a.usePoster?b.poster:a.url,null!=a&&""!==a&&(this.viewComponent.innerHTML='\x3cimg src\x3d"'+a+'" class\x3d"end-slate-image" /\x3e'))}};var eb=function(a){eb.__super__.constructor.call(this,eb.NAME,a)};f(eb,ha);eb.NAME="WaitingOverlayMediator";eb.prototype.bar=null;eb.prototype.onRegister=function(){var a;this.classList.add("waiting-overlay");
this.bar=document.createElement("div");this.classList.add("waiting-bar",this.bar);this.viewComponent.appendChild(this.bar);a=document.createElement("div");this.classList.add("waiting-text",a);a.textContent=this.localizationManager.getString(r.MSG_BUFFERING);this.viewComponent.appendChild(a);eb.__super__.onRegister.call(this)};var pb=function(a){pb.__super__.constructor.call(this,pb.NAME,a)};f(pb,ha);pb.NAME="LoadingOverlayMediator";pb.prototype.onRegister=function(){this.classList.add("loading-overlay");
return pb.__super__.onRegister.call(this)};var r=function(){};r.MSG_LIVE="MSG_LIVE";r.MSG_REPLAY="MSG_REPLAY";r.MSG_BUFFERING="MSG_BUFFERING_TEXT";r.MSG_CC="MSG_CC";r.MSG_CC_TITLE="MSG_CC_TITLE";r.MSG_CC_LANGUAGE="MSG_CC_LANGUAGE";r.MSG_CC_PRESETS="MSG_CC_PRESETS";r.MSG_CC_FONT="MSG_CC_FONT";r.MSG_CC_EDGE="MSG_CC_EDGE";r.MSG_CC_SIZE="MSG_CC_SIZE";r.MSG_CC_SCROLL="MSG_CC_SCROLL";r.MSG_CC_COLOR="MSG_CC_COLOR";r.MSG_CC_BACKGROUND="MSG_CC_BACKGROUND";r.MSG_CC_EDGE="MSG_CC_EDGE";r.MSG_CC_WINDOW="MSG_CC_WINDOW";
r.MSG_CC_OPACITY="MSG_CC_OPACITY";r.MSG_CC_SHOW_ADVANCED="MSG_CC_SHOW_ADVANCED";r.MSG_CC_HIDE_ADVANCED="MSG_CC_HIDE_ADVANCED";r.MSG_CC_RESET="MSG_CC_RESET";r.MSG_CC_CANCEL="MSG_CC_CANCEL";r.MSG_CC_APPLY="MSG_CC_APPLY";r.MSG_SECONDS="MSG_SECONDS";var Ja=function(a){Ja.__super__.constructor.call(this,Ja.NAME,a)};f(Ja,ha);Ja.NAME="ReplayOverlayMediator";Ja.prototype.replay=null;Ja.prototype.icon=null;Ja.prototype.label=null;Ja.prototype.onRegister=function(){var a=this;this.classList.add("replay-overlay");
this.replay=document.createElement("div");this.classList.add("replay-button",this.replay);this.viewComponent.appendChild(this.replay);l.create(this.replay,l.CLICK,function(b){b.stopImmediatePropagation();a.sendNotification(e.REPLAY);return!1});this.icon=document.createElement("span");this.classList.add("replay-icon",this.icon);this.replay.appendChild(this.icon);this.label=document.createElement("span");this.classList.add("replay-label",this.label);this.label.textContent=this.localizationManager.getString(r.MSG_REPLAY);
this.replay.appendChild(this.label);Ja.__super__.onRegister.call(this)};var Ec=function(){Ec.__super__.constructor.call(this)};f(Ec,puremvc.SimpleCommand);Ec.prototype.execute=function(a){a="persistent"!==this.facade.retrieveProxy(A.NAME).getControls().mode?a.getBody():wa.ACTIVE;this.facade.retrieveProxy(y.NAME).setActiveState(a)};var S=function(a){S.__super__.constructor.call(this,a)};f(S,C);S.NAME=C.NAME;S.prototype.bindings=null;S.prototype.configurationName=null;S.prototype.configurationData=
null;S.prototype.contextName=null;S.prototype.contextData=null;S.prototype.value=null;S.prototype.getConfigurationName=function(){return this.configurationName};S.prototype.getConfigurationData=function(){return this.configurationData.value||{}};S.prototype.getContextName=function(){return this.contextName};S.prototype.getContextData=function(){return this.contextData};S.prototype.onRegister=function(){var a;a=this.facade.app||this.facade;null==this.configurationName&&(this.configurationName=this.facade.moduleName);
this.bindings=a.retrieveProxy(I.NAME);this.bindings.registerConfiguration(this)};S.prototype.setData=function(a){var b,c,d;this.data={};d=this.defaults;for(b in d)c=d[b],this.data[b]=b in a?a[b]:c;this.configurationData=new fb(this.data);return this.data};S.prototype.getValue=function(a){var b;this.bindings.update();this.value[a]=null!=(b=this.configurationData.data[a])?b.compile(this.bindings.getData()):void 0;return this.value[a]};S.prototype.compile=function(a,b){null==b&&(b=!1);if(null==this.configurationData)return null;
null==a&&(a=this.bindings.getData());null!=this.contextName&&null!=this.contextData&&(a=h.clone(a),a[this.contextName]=this.contextData);this.configurationData.compile(a,b);return this.value=this.configurationData.value};var Ka=function(){Ka.__super__.constructor.call(this)};f(Ka,puremvc.SimpleCommand);Ka.prototype.ads=null;Ka.prototype.initializeNotifier=function(a){Ka.__super__.initializeNotifier.call(this,a);this.ads=this.facade.retrieveProxy(C.NAME)};var Fc=function(){Fc.__super__.constructor.call(this)};
f(Fc,Ka);Fc.prototype.execute=function(a){this.facade.logger.debug("AdContentEndedCommand");this.ads.contentEnded()};var Za=function(){Za.__super__.constructor.call(this)};f(Za,puremvc.MacroCommand);Za.prototype.ads=null;Za.prototype.initializeNotifier=function(a){Za.__super__.initializeNotifier.call(this,a);this.ads=this.facade.retrieveProxy(w.NAME)};Za.prototype.initializeMacroCommand=function(){this.addSubCommand(Db)};Za.prototype.execute=function(a){Za.__super__.execute.call(this,a);this.facade.logger.debug("AdStartCommand");
a=this.facade.app.retrieveProxy(q.NAME).initialized;!1===a&&this.facade.app.sendNotification(e.INITIALIZED);!1!==a&&this.facade.isFullscreenDevice()||this.facade.app.video.load();this.ads.start();this.facade.app.sendNotification(e.CHANGE_PLAY_STATE,PlayState.PLAYING)};var Rb=function(){Rb.__super__.constructor.call(this)};f(Rb,Ka);Rb.prototype.execute=function(a){this.facade.logger.debug("AdPlayCommand");!1===this.ads.getStarted()?this.sendNotification(e.START,!0):(this.ads.play(),this.facade.app.sendNotification(e.CHANGE_PLAY_STATE,
PlayState.PLAYING))};var Sb=function(){Sb.__super__.constructor.call(this)};f(Sb,Ka);Sb.prototype.execute=function(a){this.facade.logger.debug("AdPauseCommand");this.ads.pause();this.facade.app.sendNotification(e.CHANGE_PLAY_STATE,PlayState.PAUSED)};var Tb=function(){Tb.__super__.constructor.call(this)};f(Tb,Ka);Tb.prototype.execute=function(a){this.facade.logger.debug("AdTogglePlayPauseCommand");a=this.ads.getPaused()||!1===this.ads.getStarted()?e.PLAY:e.PAUSE;this.sendNotification(a,!0)};var Ub=
function(){Ub.__super__.constructor.call(this)};f(Ub,puremvc.SimpleCommand);Ub.prototype.execute=function(a){this.facade.logger.debug("EndedCommand",a);!0===this.facade.retrieveProxy(A.NAME).getLoop()?this.sendNotification(e.REPLAY):(this.sendNotification(e.CHANGE_PLAY_STATE,PlayState.ENDED),this.sendNotification(e.CHANGE_ACTIVE_STATE,wa.ACTIVE))};var Vb=function(){Vb.__super__.constructor.call(this)};f(Vb,puremvc.SimpleCommand);Vb.prototype.execute=function(a){var b,c;this.facade.logger.debug("StartCommand");
c=this.facade.retrieveProxy(q.NAME);b=this.facade.retrieveProxy(m.NAME);encodeURI(b.getSrc())!==c.getSrc()&&this.sendNotification(e.UPDATE_PLAYBACK_CORE);this.sendNotification(e.STARTED,a.getBody());this.sendNotification(e.PLAY,a.getBody());this.sendNotification(e.CHANGE_ACTIVE_STATE,wa.INACTIVE)};var gb=function(){gb.__super__.constructor.call(this)};f(gb,puremvc.MacroCommand);gb.prototype.initializeMacroCommand=function(){this.addSubCommand(Db)};gb.prototype.execute=function(a){var b,c;this.facade.logger.debug("PlayCommand");
gb.__super__.execute.call(this,a);c=a.getBody();a=this.facade.retrieveProxy(m.NAME);b=this.facade.retrieveProxy(q.NAME);c&&!0!==b.initialized&&this.sendNotification(e.INITIALIZED);!0===b.initialized&&(a.getSrc()||a.getSource())&&(b.getStarted()?b.play():this.sendNotification(e.START))};var Eb=function(){Eb.__super__.constructor.call(this)};f(Eb,puremvc.SimpleCommand);Eb.prototype.execute=function(a){this.facade.retrieveProxy(q.NAME).pause();this.sendNotification(e.CHANGE_ACTIVE_STATE,wa.ACTIVE)};
var qb=function(){qb.__super__.constructor.call(this)};f(qb,puremvc.SimpleCommand);qb.prototype.execute=function(a){var b,c;this.facade.logger.debug("TogglePlayPauseCommand");a=this.facade.retrieveProxy(y.NAME);c=this.facade.retrieveProxy(q.NAME);switch(a.getPlayState()){case PlayState.ENDED:b=e.REPLAY;break;case PlayState.PAUSED:b=c.getStarted()?e.PLAY:e.START;break;case PlayState.READY:b=e.START;break;case PlayState.PLAYING:case PlayState.WAITING:b=e.PAUSE}this.sendNotification(b,!0)};var Gc=function(){Gc.__super__.constructor.call(this)};
f(Gc,Ka);Gc.prototype.execute=function(a){this.facade.logger.debug("AdContentStartedCommand");this.ads.contentStarted()};var K=function(a){K.__super__.constructor.call(this,a)};f(K,S);K.NAME=C.NAME;K.prototype.enabled=!0;K.prototype.loaded=!1;K.prototype.plugin=null;K.prototype.load=function(a){var b,c=this;b=this.getScript();null!=b?h.loadAMPScript(b,function(){c.loaded=!0;"function"===typeof a&&a(!0)}):(this.loaded=!1,"function"===typeof a&&a(!1))};K.prototype.getLoaded=function(){return this.loaded};
K.prototype.getScript=function(){var a;a=this.getConfigurationData().plugin;return null!=a?a.js||a:""};K.prototype.setEnabled=function(a){return this.enabled=a};K.prototype.getEnabled=function(){return this.enabled};K.prototype.createPlugin=function(){};K.prototype.initialize=function(){this.plugin=this.createPlugin()};K.prototype.error=function(a){this.facade.logger.error("[AMP "+this.facade.getModuleName().toUpperCase()+" Error]",a)};var w=function(a){w.__super__.constructor.call(this,a)};f(w,K);
w.NAME=K.NAME;w.prototype.inprogress=!1;w.prototype.paused=!1;w.prototype.started=!1;w.prototype.companions=null;w.prototype.loadedMetadata=!1;w.prototype.adVO=null;w.prototype.contextName="ad";w.prototype.getContextData=function(){return this.adVO||{}};w.prototype.setLoadedMetadata=function(a){return this.loadedMetadata=a};w.prototype.getLoadedMetadata=function(){return this.loadedmetadata};w.prototype.setCompanions=function(a){this.companions=a;this.sendNotification("adcompanion",this);return a};
w.prototype.getCompanions=function(){return this.companions};w.prototype.getInProgress=function(){return this.inprogress};w.prototype.setInProgress=function(a){return this.inprogress=a};w.prototype.getStarted=function(){return this.started};w.prototype.setStarted=function(a){return this.started=a};w.prototype.getPaused=function(){return this.paused};w.prototype.setPaused=function(a){return this.paused=a};w.prototype.play=function(){this.setPaused(!1);this.sendNotification("adplay")};w.prototype.pause=
function(){this.setPaused(!0);this.sendNotification("adpause")};w.prototype.breakStart=function(){};w.prototype.breakEnd=function(){this.setInProgress(!1);this.reset()};w.prototype.error=function(a){var b;b=("function"===typeof a.getMessage?a.getMessage():void 0)||a.message;this.facade.logger.error("[AMP AD ERROR]",""+b+" Skipping ad content.",a);this.sendNotification("aderror",a);this.sendNotification("adbreakend")};w.prototype.engage=function(a){!1!==this.getEnabled()&&(this.setStarted(!1),this.getInProgress()&&
(this.reset(),this.facade.app.sendNotification(e.REMOVE_APPLICATION_STATE,"ad-mode")),this.facade.app.removeCommand(e.START),this.facade.app.removeCommand(e.PLAY),this.facade.app.removeCommand(e.PAUSE),this.facade.app.removeCommand(e.ENDED),this.facade.app.removeCommand(e.TOGGLE_PLAY_PAUSE),this.facade.app.removeCommand(M.PLAY),this.facade.app.removeCommand(M.PAUSE),this.facade.app.removeCommand(M.TOGGLE_PLAY_PAUSE),this.facade.isFullscreenDevice()&&this.facade.app.removeCommand(e.CHANGE_DURATION),
this.facade.removeCommand(e.STARTED),this.facade.removeCommand(e.ENDED),this.facade.registerCommand(e.START,Za),this.facade.registerCommand(e.PLAY,Rb),this.facade.registerCommand(e.PAUSE,Sb),this.facade.registerCommand(e.TOGGLE_PLAY_PAUSE,Tb),this.facade.registerCommand(M.PLAY,Rb),this.facade.registerCommand(M.PAUSE,Sb),this.facade.registerCommand(M.TOGGLE_PLAY_PAUSE,Tb))};w.prototype.reset=function(){this.facade.removeCommand(e.START);this.facade.removeCommand(e.PLAY);this.facade.removeCommand(e.PAUSE);
this.facade.removeCommand(e.TOGGLE_PLAY_PAUSE);this.facade.removeCommand(M.PLAY);this.facade.removeCommand(M.PAUSE);this.facade.removeCommand(M.TOGGLE_PLAY_PAUSE);this.facade.app.registerCommand(e.START,Vb);this.facade.app.registerCommand(e.PLAY,gb);this.facade.app.registerCommand(e.PAUSE,Eb);this.facade.app.registerCommand(e.ENDED,Ub);this.facade.app.registerCommand(e.TOGGLE_PLAY_PAUSE,qb);this.facade.app.registerCommand(M.PLAY,gb);this.facade.app.registerCommand(M.PAUSE,Eb);this.facade.app.registerCommand(M.TOGGLE_PLAY_PAUSE,
qb);this.facade.isFullscreenDevice()&&this.facade.app.registerCommand(e.CHANGE_DURATION,Wb);this.facade.registerCommand(e.STARTED,Gc);this.facade.registerCommand(e.ENDED,Fc)};w.prototype.start=function(){if(!1===this.getEnabled())return this.sendNotification("adbreakend"),!1;this.setStarted(!0);return!0};w.prototype.contentPlay=function(){this.facade.app.sendNotification(e.PLAY,!0)};w.prototype.contentPause=function(){this.facade.app.video.pause()};w.prototype.contentStarted=function(){};w.prototype.contentEnded=
function(){};var t=function(a,b){ua.attachModuleDispatcher(a,new hb(this,b));this.getContainer=function(){return a.getViewComponent()};this.getVideo=function(){return a.getVideo()};this.getConfig=function(){return a.getConfig()};this.destroy=function(){return a.destroy()}};f(t,ua);t.prototype.getContainer=function(){};t.prototype.getVideo=function(){};t.prototype.getConfig=function(){};t.prototype.evaluateBinding=function(){};t.prototype.canPlayType=function(){};t.prototype.load=function(){};t.prototype.play=
function(){};t.prototype.replay=function(){};t.prototype.pause=function(){};t.prototype.end=function(){};t.prototype.setParams=function(a){};t.prototype.getParams=function(){};t.prototype.setAutoplay=function(a){};t.prototype.getAutoplay=function(){};t.prototype.setLoop=function(a){};t.prototype.getLoop=function(){};t.prototype.setMuted=function(a){};t.prototype.getMuted=function(){};t.prototype.mute=function(){return this.setMuted(!0)};t.prototype.unmute=function(){return this.setMuted(!1)};t.prototype.setMedia=
function(a){};t.prototype.getMedia=function(){};t.prototype.setCurrentTime=function(a){};t.prototype.getCurrentTime=function(){};t.prototype.getDuration=function(){};t.prototype.setSrc=function(a){};t.prototype.getSrc=function(){};t.prototype.setSource=function(a){};t.prototype.getSource=function(){};t.prototype.setVolume=function(a){};t.prototype.getVolume=function(){};t.prototype.getSeeking=function(){};t.prototype.getPaused=function(){};t.prototype.getEnded=function(){};t.prototype.enterFullScreen=
function(){};t.prototype.exitFullScreen=function(){};t.prototype.destroy=function(){};var kd=function(a,b){var c,d,k,D;kd.__super__.constructor.call(this,a,b);k=a.retrieveProxy(m.NAME);c=a.retrieveProxy(I.NAME);d=a.retrieveProxy(A.NAME);D=a.retrieveProxy(oa.NAME);this.evaluateBinding=c.evaluateBinding.bind(c);this.canPlayType=function(b){return a.retrieveProxy(q.NAME).canPlayType(b)};this.load=function(){a.sendNotification(e.LOAD)};this.play=function(){a.sendNotification(e.PLAY,!0)};this.replay=function(){a.sendNotification(e.REPLAY)};
this.pause=function(){a.sendNotification(e.PAUSE)};this.end=function(){a.sendNotification(e.END)};this.setParams=function(b){a.sendNotification(e.CHANGE_PARAMS,b);return b};this.getParams=D.getData.bind(D);this.setAutoplay=function(b){a.sendNotification(e.CHANGE_AUTOPLAY,b);return b};this.getAutoplay=d.getAutoplay.bind(d);this.setLoop=function(b){a.sendNotification(e.CHANGE_LOOP,b);return b};this.getLoop=d.getLoop.bind(d);this.setMuted=function(b){a.sendNotification(e.CHANGE_MUTED,b);return b};this.getMuted=
function(){return a.retrieveProxy(q.NAME).getMuted()};this.setMedia=function(b){a.sendNotification(e.SET_MEDIA,b);return b};this.getMedia=k.getData.bind(k);this.setCurrentTime=function(b){a.sendNotification(e.SEEK,b);return b};this.getCurrentTime=function(){return a.retrieveProxy(q.NAME).getCurrentTime()};this.getDuration=k.getDuration.bind(k);this.setSrc=function(b){a.sendNotification(e.SET_MEDIA,{src:b});return b};this.getSrc=function(){return a.retrieveProxy(q.NAME).getSrc()};this.setSource=function(b){a.sendNotification(e.SET_MEDIA,
{source:b});return b};this.getSource=k.getSource.bind(k);this.setVolume=function(b){a.sendNotification(e.CHANGE_VOLUME,b);return b};this.getVolume=function(){return a.retrieveProxy(q.NAME).getVolume()};this.getSeeking=function(){return a.retrieveProxy(q.NAME).getSeeking()};this.getPaused=function(){return a.retrieveProxy(q.NAME).getPaused()};this.getEnded=function(){return a.retrieveProxy(q.NAME).getEnded()};this.enterFullScreen=function(){a.sendNotification(e.CHANGE_DISPLAY_STATE,aa.FULL_SCREEN)};
this.exitFullScreen=function(){a.sendNotification(e.CHANGE_DISPLAY_STATE,aa.NORMAL)}};f(kd,t);var T=function(a,b,c){this.dispatcher=c;T.__super__.constructor.call(this,a,b)};f(T,z);T.prototype.moduleName="amp";T.prototype.playerType=null;T.prototype.dispatcher=null;T.prototype.config=null;T.prototype.video=null;T.prototype.getVideo=function(){return this.video};T.prototype.setVideo=function(a){return this.video=a};T.prototype.getPlayerType=function(){return this.playerType};T.prototype.createPlugins=
function(){var a,b,c,d,k,e,g;k=[];e=this.getPlayerType();g=v.plugins;for(c in g)if(a=g[c],c in this.config&&(b=this.config[c],null!=b&&!1!==b.enabled))if(a=a[e],null==a)this.logger.debug("Plugin could not be found: "+c);else try{d=new a(this,b),k.push(d)}catch(n){this.logger.error("Plugin could not be created: "+c+". "+n)}this.sendNotification(ib.REGISTER_PLUGINS,k);return k};T.prototype.createVideo=function(){return null};T.prototype.initialize=function(){T.__super__.initialize.call(this);this.video=
this.createVideo();this.createPlugins()};T.prototype.listNotificationEvents=function(){return T.__super__.listNotificationEvents.call(this).concat([e.LOAD_START,e.TIME_UPDATE,e.DURATION_CHANGE,e.ERROR,e.LOADED_METADATA,e.WAITING,e.SEEKING,e.SEEKED,e.ENDED,e.PROGRESS,e.CAN_PLAY,e.CAN_PLAY_THROUGH,e.PAUSE,e.PLAY,e.PLAYING,e.STARTED,e.PLAY_REQUEST,e.READY,e.MEDIUM_CHANGE,e.TEMPORAL_TYPE_CHANGE,e.MEDIA_CHANGE,e.FULL_SCREEN_CHANGE,e.VOLUME_CHANGE,e.FAIL_OVER_ATTEMPT,e.PLAYBACK_TARGET_CHANGE,e.PLAY_STATE_CHANGE,
ca.AUTHORIZE,ca.AUTHORIZED])};var $a=function(a,b,c){$a.__super__.constructor.call(this,a,b,c)};f($a,T);$a.prototype.playerType="html";$a.prototype.createAPI=function(){return new kd(this,this.dispatcher)};$a.prototype.createVideo=function(){var a;a=document.createElement("video");null==a.dataset&&(a.dataset={});this.sendNotification(e.CHANGE_PLAYBACK_CORE,a);return a};$a.prototype.createModel=function(){var a,b;b=new I;this.registerProxy(b);this.registerProxy(new L);this.registerProxy(new A(this.config));
this.registerProxy(new O(this.config));a=new y;this.registerProxy(a);a.setRenderMode(sd.HTML);a=new q;this.registerProxy(a);this.registerProxy(new m);this.registerProxy(new R(a));this.registerProxy(new oa(this.config.params));b.initialize()};$a.prototype.createView=function(){var a,b=this;a=this.getViewComponent();this.registerMediator(new U(a,"html5"));this.registerMediator(new xa);this.registerMediator(new ya);this.registerMediator(new pa);a=new La;this.registerMediator(a);l.create(a.viewComponent,
l.CLICK,function(){b.sendNotification(e.TOGGLE_ACTIVE)});this.registerMediator(new pb);this.registerMediator(new eb);this.registerMediator(new Ja);this.registerMediator(new Ya);this.registerMediator(new qa);this.registerMediator(new za)};$a.prototype.createController=function(){this.registerCommand(e.TOGGLE_PLAY_PAUSE,qb);this.registerCommand(e.PLAY,gb);this.registerCommand(e.PAUSE,Eb);this.registerCommand(e.CHANGE_PLAY_STATE,Xb);this.registerCommand(e.TOGGLE_FULL_SCREEN,lc);this.registerCommand(e.CHANGE_DISPLAY_STATE,
Wa);this.registerCommand(e.TOGGLE_ACTIVE,kc);this.registerCommand(e.CHANGE_ACTIVE_STATE,Ec);this.registerCommand(e.CHANGE_MEDIA,Yb);this.registerCommand(e.MEDIA_CHANGE,Zb);this.registerCommand(e.SET_MEDIA,$b);this.registerCommand(e.UPDATE_DATA_BINDINGS,ac);this.registerCommand(e.CHANGE_PLAYBACK_CORE,mc);this.registerCommand(e.UPDATE_PLAYBACK_CORE,bc);this.registerCommand(e.START,Vb);this.registerCommand(e.STARTED,uc);this.registerCommand(e.SEEK,Qb);this.registerCommand(e.SEEKING,qc);this.registerCommand(e.SEEKED,
rc);this.registerCommand(e.CHANGE_VOLUME,pc);this.registerCommand(e.CHANGE_MUTED,wc);this.registerCommand(e.CHANGE_AUTOPLAY,nc);this.registerCommand(e.CHANGE_LOOP,oc);this.registerCommand(e.END,tc);this.registerCommand(e.ENDED,Ub);this.registerCommand(e.REPLAY,sc);this.registerCommand(e.ERROR,cc);this.registerCommand(e.READY,dc);this.registerCommand(e.WAITING,vc);this.registerCommand(e.CHANGE_DURATION,Wb);this.registerCommand(e.CHANGE_PARAMS,ec);this.registerCommand(ca.CHECK_AUTHORIZATION,xc);this.registerCommand(ca.AUTHORIZED,
yc);this.registerCommand(ca.SET_KEY,fc);this.registerCommand(ca.SET_TOKEN,gc);this.registerCommand(e.INITIALIZED,zc);this.registerCommand(e.ENABLE_VIDEO_EVENTS,Bc);this.registerCommand(e.DISABLE_VIDEO_EVENTS,Ac);this.registerCommand(e.REGISTER_PLAYBACK_CORE,Cc);this.registerCommand(M.TOGGLE_PLAY_PAUSE,qb);this.registerCommand(M.SEEK,Qb);this.registerCommand(e.PLAYBACK_TARGET_CHANGE,Dc)};var P=function(){};P.createTextContent=function(a,b){return/[\&<>]/.test(b)?a.createCDATASection(b):a.createTextNode(b)};
P.updateTextContent=function(a,b){var c;c=P.createTextContent(a.ownerDocument,b);a.removeChild(a.childNodes[0]);a.appendChild(c);return a};P.serialize=function(a){var b;if(null!=a){if("string"===typeof a)return a;try{return b=new XMLSerializer,b.serializeToString(a)}catch(c){try{return document.implementation.createLSSerializer(),xmlSerializer.writeToString(a)}catch(d){try{return a.xml}catch(k){}}}}};P.parse=function(a){var b;window.DOMParser?(b=new DOMParser,b=b.parseFromString(a,"text/xml")):(b=
new ActiveXObject("Microsoft.XMLDOM"),b.async=!1,b.loadXML(a));return b};var gc=function(){gc.__super__.constructor.call(this)};f(gc,puremvc.SimpleCommand);gc.prototype.execute=function(a){var b;b=this.facade.retrieveProxy(L.NAME);a=a.getBody();b.setToken(a);b.setAuthorized(!0)};var fc=function(){fc.__super__.constructor.call(this)};f(fc,puremvc.SimpleCommand);fc.prototype.execute=function(a){var b;b=this.facade.retrieveProxy(L.NAME);a=a.getBody();b.setKey(a)};var jb=function(a){this.config=a;jb.__super__.constructor.call(this,
this.constructor.NAME)};f(jb,puremvc.Mediator);jb.prototype.config=null;jb.NAME="LocalizationWrapper";jb.prototype.listNotificationInterests=function(){return[s.CREATE_FLASH_VARS,s.CREATE_XML]};jb.prototype.handleNotification=function(a){var b,c,d,k,e,g,n,f;jb.__super__.handleNotification.call(this,a);e=a.getName();a=a.getBody();switch(e){case s.CREATE_FLASH_VARS:d=a.flashvars;c=a.config;null!=c.language&&(d.locale_setting=c.language);break;case s.CREATE_XML:for(c in e=a.xml,b=e.getElementsByTagName("application")[0],
a=e.getElementsByTagName("locales")[0],null==a&&(a=e.createElement("locales"),b.appendChild(a)),f=this.config.locales,f)for(d in k=f[c],b=e.createElement("locale"),b.setAttribute("id",c),a.appendChild(b),k)n=k[d],g=e.createElement("property"),g.setAttribute("key",d),n=P.createTextContent(e,n),g.appendChild(n),b.appendChild(g)}};var U=function(a,b){U.__super__.constructor.call(this,this.constructor.NAME,a);this.layers=[];null!=b&&(this.type=b)};f(U,Xa);U.NAME="PlayerMediator";U.prototype.core=null;
U.prototype.medium=null;U.prototype.layers=null;U.prototype.type=null;U.prototype.ready=!1;U.prototype.classList=null;U.prototype.onRegister=function(){var a;U.__super__.onRegister.call(this);this.classList.add("player");this.classList.add(this.type);a=h.getDevice();if(null!=a)return this.classList.add(a)};U.prototype.listNotificationInterests=function(){return[e.DISPLAY_STATE_CHANGE,e.ACTIVE_STATE_CHANGE,e.PLAY_STATE_CHANGE,e.ADD_APPLICATION_STATE,e.REMOVE_APPLICATION_STATE,e.MEDIUM_CHANGE,e.DURATION_CHANGE,
e.TEMPORAL_TYPE_CHANGE,e.ADD_LAYER,e.REMOVE_LAYER,e.READY]};U.prototype.handleNotification=function(a){var b,c,d;b=a.getName();a=a.getBody();switch(b){case e.ACTIVE_STATE_CHANGE:case e.PLAY_STATE_CHANGE:case e.DISPLAY_STATE_CHANGE:case e.MEDIUM_CHANGE:b=a.newState;a=a.oldState;null!=a&&this.classList.contains(a)&&this.classList.remove(a);null!=b&&this.classList.add(b);break;case e.ADD_APPLICATION_STATE:this.classList.add(a);break;case e.REMOVE_APPLICATION_STATE:this.classList.remove(a);break;case e.TEMPORAL_TYPE_CHANGE:"live"===
a?this.sendNotification(e.ADD_APPLICATION_STATE,"live"):this.sendNotification(e.REMOVE_APPLICATION_STATE,"live");break;case e.DURATION_CHANGE:3600<a?this.sendNotification(e.ADD_APPLICATION_STATE,"long-form"):this.sendNotification(e.REMOVE_APPLICATION_STATE,"long-form");break;case e.ADD_LAYER:this.addLayer(a);break;case e.REMOVE_LAYER:this.removeLayer(a);break;case e.READY:for(this.ready=!0,d=this.layers,b=0,c=d.length;b<c;b++)a=d[b],this.viewComponent.contains(a)||this.viewComponent.appendChild(a)}};
U.prototype.addLayer=function(a){this.layers.push(a);this.ready&&this.viewComponent.appendChild(a)};U.prototype.removeLayer=function(a){this.viewComponent.contains(a)&&this.viewComponent.removeChild(a);a=this.layers.indexOf(a);0<=a&&this.layers.splice(a,1)};var rb=function(a){rb.__super__.constructor.call(this,a,this.type)};f(rb,U);rb.NAME="FlashPlayerMediator";rb.prototype.type="flash";rb.prototype.addLayer=function(a){rb.__super__.addLayer.call(this,a);-1===a.className.indexOf("video-layer")||this.viewComponent.contains(a)||
this.viewComponent.appendChild(a)};var Fb=function(){Fb.__super__.constructor.call(this)};f(Fb,puremvc.SimpleCommand);Fb.prototype.getProxy=function(){return this.facade.retrieveProxy(x.NAME)};var Hc=function(){Hc.__super__.constructor.call(this)};f(Hc,Fb);Hc.prototype.execute=function(a){this.facade.logger.debug("AISPauseCommand");a=this.getProxy();a.vcsSet(a.currentTime)};var Ic=function(){Ic.__super__.constructor.call(this)};f(Ic,Fb);Ic.prototype.execute=function(a){this.facade.logger.debug("AISEndedCommand");
this.getProxy().vcsSet(0)};var Jc=function(){};Jc.setCookie=function(a,b,c,d,k){var e;b=escape(b);null!=c&&(e=new Date,e.setDate(e.getDate()+c),b+="; expires\x3d"+e.toUTCString());null!=k&&(b+="; domain\x3d"+k);null!=d&&(b+="; path\x3d"+d);return document.cookie=a+"\x3d"+b};Jc.getCookie=function(a){var b,c,d,k,e,g;c=document.cookie.split(";");e=0;for(g=c.length;e<g;e++)if(b=c[e],d=b.indexOf("\x3d"),k=b.substr(0,d).replace(/^\s+|\s+$/g,""),b=unescape(b.substr(d+1)),k===a)return b};Jc.deleteCookie=
function(a){return this.setCookie(a,"",-1)};var Kc=function(){Kc.__super__.constructor.call(this)};f(Kc,Fb);Kc.prototype.execute=function(a){var b;b=this.getProxy();a=Math.floor(a.getBody());0!==a&&0===a%30&&a!==b.currentTime&&b.vcsSet(a);b.currentTime=a};var x=function(a){x.__super__.constructor.call(this,a)};f(x,K);x.NAME=C.NAME;x.prototype.client=null;x.prototype.currentTime=null;x.prototype.idps=null;x.prototype.idp=null;x.prototype.token=null;x.prototype.authz=null;x.prototype.defaults={plugin:null,
platformID:null,resourceID:null,contentID:null,responseTargets:null,logos:{base:null,group:null,key:"full"}};x.prototype.getScript=function(){return this.value.plugin};x.prototype.initialize=function(){this.client=window.ais_client;this.client.setLogging(this.facade.logger.enabled);this.client.setPlatformId(this.value.platformID);this.client.setUseCache(!/MSIE [7-8]/.test(navigator.userAgent));this.client.assignhandler("bounce",this.bounceHandler.bind(this));this.client.assignhandler("chooser",this.chooserHandler.bind(this));
this.client.assignhandler("init",this.initHandler.bind(this));this.client.assignhandler("authz_query",this.authz_queryHandler.bind(this));this.client.assignhandler("identity",this.identityHandler.bind(this));this.client.assignhandler("logout_result",this.logoutHandler.bind(this));this.client.assignhandler("vcs",this.vcsHandler.bind(this));window.onunload=function(){}};x.prototype.authorize=function(){this.token=this.authz=null;this.disengage();this.sendNotification("startAuthentication")};x.prototype.authorized=
function(a){null==a&&(a=this.token);this.engage();this.sendNotification("authenticationComplete");this.sendNotification(ca.AUTHORIZED,a)};x.prototype.play=function(a){this.sendNotification(e.INITIALIZED);this.sendNotification(e.PLAY);if(null!=a)return this.sendNotification(e.SEEK,a)};x.prototype.engage=function(){this.facade.registerCommand(e.TIME_UPDATE,Kc);this.facade.registerCommand(e.PAUSE,Hc);this.facade.registerCommand(e.ENDED,Ic)};x.prototype.disengage=function(){this.facade.removeCommand(e.TIME_UPDATE);
this.facade.removeCommand(e.PAUSE);this.facade.removeCommand(e.ENDED)};x.prototype.logout=function(){var a,b,c;a=(null!=(b=this.idp.window_display)?b.method:void 0)||"redirect";b=this.getTarget(a);this.setRedirect(a);switch(a){case "redirect":window.open(this.client.logoutFormat(b),"_top");break;case "popup":c=this.idp.window_display.width||320,a=this.idp.window_display.height||240,window.open(this.client.logoutFormat(b),"ais_popup","width\x3d"+c+",height\x3d"+a)}};x.prototype.bounce=function(a){this.client.bounce()};
x.prototype.init=function(a){this.client.init()};x.prototype.choose=function(){this.client.chooser()};x.prototype.resourceAccess=function(a){null==a&&(a=this.value.resourceID);this.client.resourceAccess(a)};x.prototype.vcsSet=function(a){a=h.formatTimecode(a);return this.client.vcsSet(this.value.contentID,a)};x.prototype.bounceHandler=function(a,b){var c;c="true"===b.authenticated.toString();!1===c?(this.sendNotification(e.DISPATCH_EVENT,new ba("authenticationfailed")),this.choose()):!0===c&&this.init()};
x.prototype.initHandler=function(a,b){var c,d,k,D;this.facade.logger.debug(a,b);this.idp=b.idps;this.facade.idps={};k=b.idps;for(c in k){k=k[c];this.facade.idps.key=c;for(d in k)D=k[d],this.facade.idps[d]=D;break}for(c in b)k=b[c],"idps"!==c&&null!=k&&(this.facade[c]=k);this.facade.idps.logo=this.value.logos.base+this.facade.idps.logos[this.value.logos.key];this.facade.app.sendNotification(e.REMOVE_APPLICATION_STATE,"authenticating");this.sendNotification("aisauthenticated",this.facade.idps);this.resourceAccess(this.value.resourceID)};
x.prototype.chooserHandler=function(a,b){this.facade.logger.debug(a,b.authenticated);this.facade.sendNotification(e.ADD_APPLICATION_STATE,"authenticating");b.possible_idps=this.idps=this.sort(b.possible_idps,"value","display_name");this.sendNotification("chooseAuthProvider",b)};x.prototype.launchIDPLogin=function(a){var b,c,d;this.sendNotification("aisathenticating",!0);b=this.idps[a];c=(null!=(d=b.window_display)?d.method:void 0)||"redirect";d=this.getTarget(c);this.setRedirect(c);switch(c){case "redirect":window.open(this.client.loginFormat(a,
d),"_top");break;case "popup":c=b.window_display.width||320,b=b.window_display.height||240,window.open(this.client.loginFormat(a,d),"ais_popup","width\x3d"+c+",height\x3d"+b)}};x.prototype.identityHandler=function(a,b){this.facade.logger.debug(a,b)};x.prototype.authz_queryHandler=function(a,b){var c;this.facade.logger.debug(a,b);c="true"===b.authorization.toString();!1===c?(this.sendNotification(ca.AUTHORIZATION_FAILED),this.authorize()):!0===c&&(this.authz=b,c={mvpdName:this.facade.idps.name,viewerId:this.client.aisuid,
"std:viewerId":this.client.aisuid},this.facade.app.sendNotification("mediaanalytics:setDimensions",c),this.facade.viewerId=this.client.aisuid,c=b.resource,null!=c&&(this.facade.resource=c),this.token="hdnea\x3d"+b.security_token,this.sendNotification(ca.SET_KEY,"hdnea\x3d"),this.sendNotification(ca.SET_TOKEN,b.security_token),this.sendNotification("aisathenticating",!1),null!=this.value.contentID?this.client.vcsGet(this.value.contentID):this.authorized(this.token))};x.prototype.logoutHandler=function(a,
b){top.location.href=top.location.href};x.prototype.vcsHandler=function(a,b){"get"===b.operation&&("00:00:00"===b.ph_pos||"00:00"===b.ph_pos?(this.client.vcsSet(this.value.contentID,b.ph_pos),this.authorized(this.token)):this.sendNotification("choosePlayOptions",h.flattenTimecode(b.ph_pos)))};x.prototype.sort=function(a,b,c){var d,k,e,g,n;g={};d=[];k=0;for(e in a)n=a[e],d[k]={key:e,value:n[c]},k++;d.sort(function(a,c){var d,k;d="value"===b?a.value.toLowerCase():a.key.toLowercase();k="value"===b?c.value.toLowerCase():
c.key.toLowercase();return d<k?-1:d>k?1:0});k=c=0;for(e=d.length;c<e;k=++c)k=d[k],g[k.key]=a[k.key];return g};x.prototype.setRedirect=function(a){var b,c,d;try{b=/\/dev\./,d=window.top.location.href||window.top.location,c=b.test(d)?d.replace(b,"/"):null,Jc.setCookie(this.getTarget(a),d,1,"/",c)}catch(k){}};x.prototype.getTarget=function(a){null==a&&(a="redirect");return this.value.responseTargets[a]};var sb=function(){sb.__super__.constructor.call(this,this.constructor.NAME,{})};f(sb,puremvc.Proxy);
sb.NAME="FlashMediaProxy";sb.prototype.getSrc=function(){return this.data.src};sb.prototype.setSrc=function(a){return this.data.src=a};var Lc=function(){Lc.__super__.constructor.call(this)};f(Lc,puremvc.SimpleCommand);Lc.prototype.execute=function(a){var b,c;this.facade.logger.debug("FlashAuthorizedCommand");a=this.facade.retrieveProxy(sb.NAME);b=this.facade.retrieveProxy(L.NAME);c=a.getSrc()||"";-1===c.indexOf(".smil")&&(c=b.createURL(c));a.setSrc(c);this.facade.video.authenticationComplete({media:a.getData()})};
var $=function(a,b){this.api=a;this.dispatcher=null!=b?b:new Aa(this.api);$.__super__.constructor.call(this,name,this)};f($,puremvc.Mediator);$.NAME="ModuleDispatcher";$.prototype.dispatcher=null;$.prototype.api=null;$.prototype.onRegister=function(){var a,b=this;a=this.dispatcher.dispatchEvent;this.dispatcher.dispatchEvent=function(c){b.log(b.getMessage(c),c);a(c)}};$.prototype.listNotificationInterests=function(){return[e.DISPATCH_EVENT].concat(this.facade.listNotificationEvents())};$.prototype.handleNotification=
function(a){var b;b=a.getName();a=a.getBody();b===e.DISPATCH_EVENT?this.dispatchEvent(a):this.dispatchEvent(this.createEvent(this.getType(b),a))};$.prototype.createEvent=function(a,b){return new ba(a,b)};$.prototype.dispatchEvent=function(a){this.dispatcher.dispatchEvent(a)};$.prototype.getType=function(a){return a.replace(RegExp("^"+this.facade.getModuleName()),"")};$.prototype.getMessage=function(a){return"["+this.facade.getModuleName().toUpperCase()+" EVENT]"};$.prototype.log=function(a,b){null!=
a&&null!=b&&(null!=b.data?this.facade.logger.log(a,b.type,b,b.data):this.facade.logger.log(a,b.type,b))};var s={READY:"jsApiReady",RESET:"mediaPlayerReset",LOADING:"mediaPlayerLoading",PLAYER_ERROR:"mediaPlayerError",MEDIA_ERROR:"mediaError",ERROR_STREAM_NOT_FOUND:"mediaPlayerErrorStreamNotFound",CAPABILITY_CHANGE:"mediaPlayerCapabilityChange",PLAYBACK_OPEN:"mediaPlayerPlaybackOpen",PLAYING:"mediaPlayerPlaying",ENDED:"mediaPlayerPlaybackSequenceComplete",PAUSED:"mediaPlayerPaused",BUFFERING:"mediaPlayerBuffering",
DURATION_CHANGE:"mediaPlayerDurationChange",TIME_UPDATE:"mediaPlayerPlayheadUpdate",SEEKING_CHANGE:"mediaPlayerSeekingChange",ERROR:"error",VOLUME_CHANGE:"mediaPlayerVolumeChanged",PLAY_STATE_CHANGE:"mediaPlayerPlayStateChange",STATE_CHANGE:"mediaPlayerStateChange",CAPTION_DATA_CHANGE:"mediaPlayerCaptiondataChange",FAIL_OVER_ATTEMPT:"mediaPlayerFailoverAttempt",PLAY:"mediaPlayerResumeOrPausePlayback",APPLICATION_STATE_CHANGE:"mediaPlayerApplicationStateChange",INITIALIZED:"mediaPlayerInitialized",
FULLSCREEN_CHANGE:"mediaPlayerFullscreenChange",AUTHORIZE:"mediaPlayerAuthenticate",CAPTIONING_REQUEST:"mediaPlayerCaptioningRequest",CAPTION_LANG_CHANGE:"mediaPlayerCaptionLangChange",RECOMMENDATIONS_LOADED:"mediaPlayerRecommendationsLoaded",RECOMMENDATION_SELECTED:"mediaPlayerRecommendationSelected",SHARE:"mediaPlayerShare",SHARE_REQUEST:"mediaPlayerShareRequest",AUTO_ADVANCE:"mediaPlayerAutoAdvance",CREATE_FLASH_VARS:"createFlashVars",CREATE_XML:"createXML",FLASH_CREATED:"flashCreated",PLAY_REQUEST:"mediaPlayerPlaybackSequenceInitiated",
FEED_LOADED:"mediaPlayerFeedLoaded"},hb=function(a,b){hb.__super__.constructor.call(this,a,b)};f(hb,$);hb.NAME="PlayerDispatcher";hb.prototype.dispatchEvent=function(a){a.player=this.facade.parent;this.dispatcher.dispatchEvent(a)};hb.prototype.getMessage=function(a){if("timeupdate"!==a.type&&"progress"!==a.type)return hb.__super__.getMessage.call(this,a)};var Gb=function(a,b){Gb.__super__.constructor.call(this,a,b)};f(Gb,hb);Gb.NAME="FlashPlayerDispatcher";Gb.prototype.getMessage=function(a){if(a.type!==
s.TIME_UPDATE&&a.type!==s.CAPTION_DATA_CHANGE&&"adComponentPlaybackProgress"!==a.type&&"adComponentTimeElapsed"!==a.type)return Gb.__super__.getMessage.call(this,a)};var Mc=function(a,b){ua.attachModuleDispatcher(a,new Gb(this,b));this.getContainer=function(){return a.getViewComponent()};this.getVideo=function(){return a.getVideo()};this.getConfig=function(){return a.getConfig()};this.destroy=function(){return a.destroy()};this.getFlashXML=function(){var b,d;b=unescape(a.flashvars.settings_xml);d=
P.parse(b);d.toString=function(){return b};return d};this.getFlashVars=function(){return a.flashvars};this.evaluateBinding=function(b){return a.video.evaluateBinding(b)};this.canPlayType=function(a){return 0<=Bb.call(h.flashTypes,a)?"maybe":""};this.replay=function(){a.video.replay()};this.pause=function(){a.video.pause()};this.end=function(){a.video.stopPlayer()};this.getCurrentTime=function(b){return a.video.getCurrentTime()};this.setCurrentTime=function(b){a.video.jumpToTime(b);return b};this.getParams=
function(){return a.video.getParams()};this.setParams=function(b){a.video.setParams(b);return b};this.getVolume=function(){return a.video.getVolume()};this.setVolume=function(b,d){a.video.setVolume(b,d||"");return b};this.getDuration=function(){return a.video.getDuration()};this.exitFullScreen=function(){a.video.exitFullScreen()};this.setMedia=a.setMedia.bind(a);this.getMedia=a.getMedia.bind(a);this.load=a.load.bind(a);this.play=a.play.bind(a);this.setMuted=a.setMuted.bind(a);this.getMuted=a.getMuted.bind(a);
this.getSrc=a.getSrc.bind(a);this.setSrc=a.setSrc.bind(a);this.setAutoplay=a.setAutoplay.bind(a);this.getAutoplay=a.getAutoplay.bind(a);this.getMedium=a.getMedium.bind(a);this.setMedium=a.setMedium.bind(a);this.setSource=a.setSource.bind(a);this.getSource=a.getSource.bind(a);this.getSeeking=a.getSeeking.bind(a);this.getPaused=a.getPaused.bind(a);this.getEnded=a.getEnded.bind(a)};f(Mc,t);Mc.prototype.getFlashXML=function(){};Mc.prototype.getFlashVars=function(){};var p=function(a,b,c){var d,k,e,g=
this;this.flashObjectID+=Date.now();this.plugins={};p.__super__.constructor.call(this,a,b,c);this.debug=/debug\=true/.test(location.search);this.media={};a=this.config.flash||{};b=!0===(null!=(d=a["static"])?d.enabled:void 0)?a["static"]:a;k=this.debug&&null!=b.debug?b.debug:b.swf||"amp.swf";e=a.version||"10.1";b=a.expressInstallSWF||"playerProductInstall.swf";c=this.createParams(a);d=this.createAttributes(a);this.flashvars=this.createFlashVars(a);null==this.flashvars.settings_url&&(this.flashvars.settings_xml=
this.createXML(this.config));swfobject.embedSWF(k,this.flashObjectID,"100%","100%",e,b,this.flashvars,c,d,function(a){g.createdHandler(a)})};f(p,T);p.prototype.playerType="flash";p.prototype.flashObjectID="flashObject";p.prototype.playState=null;p.prototype.loaded=!1;p.prototype.flashvars=null;p.prototype.seeking=!1;p.prototype.paused=!1;p.prototype.ended=!1;p.prototype.media=null;p.prototype.muted=!1;p.prototype.autoplay=!1;p.prototype.plugins=null;p.prototype.debug=!1;p.prototype.started=!1;p.prototype.createAPI=
function(){return new Mc(this,this.dispatcher)};p.prototype.createModel=function(){this.registerProxy(new I);this.registerProxy(new L);this.registerProxy(new sb)};p.prototype.createView=function(){this.registerMediator(new rb(this.getViewComponent()));this.registerMediator(new ya);this.registerMediator(new La);this.registerMediator(new jb(this.config))};p.prototype.createController=function(){this.registerCommand(ca.AUTHORIZED,Lc);this.registerCommand(ca.SET_TOKEN,gc);this.registerCommand(ca.SET_KEY,
fc)};p.prototype.createVideo=function(){var a;a=document.createElement("div");a.id=a.name=this.flashObjectID;this.sendNotification(e.PLAYBACK_CORE_CHANGE,a);return a};p.prototype.createParams=function(a){var b;b={allowFullScreen:!0,allowScriptAccess:"always",wmode:"direct",bgColor:"#000000"};null!=a.params&&(null!=a.params.allowFullScreen&&(b.allowFullScreen=a.params.allowFullScreen),null!=a.params.allowScriptAccess&&(b.allowScriptAccess=a.params.allowScriptAccess),null!=a.params.wmode&&(b.wmode=
a.params.wmode),null!=a.params.bgColor&&(b.bgColor=a.params.bgColor));"direct"===b.wmode&&/MSIE/.test(navigator.userAgent)&&(b.wmode="transparent");return b};p.prototype.getModules=function(){return this.plugins};p.prototype.createPlugins=function(){var a,b,c;c=v.plugins;for(b in c)if(a=c[b],b in this.config&&!1!==this.config[b].enabled)if(a=a[this.getPlayerType()],null==a)this.logger.debug("Plugin could not be found: "+b);else try{this.plugins[b]=new a(this,this.config[b]),this.registerMediator(this.plugins[b]),
this.logger.debug("Plugin loaded: "+b)}catch(d){this.logger.error("Plugin could not be loaded: "+b)}};p.prototype.createAttributes=function(a){var b;b={id:this.flashObjectID,name:this.flashObjectID};null!=a.attributes&&(null!=a.attributes.id&&(b.id=a.attributes.id),null!=a.attributes.name&&(b.name=a.attributes.name));return b};p.prototype.createFlashVars=function(a){var b,c,d,k;b={};null!=this.config.autoplay&&(this.setAutoplay(this.config.autoplay),b.auto_play=this.config.autoplay);null!=this.config.rules&&
h.mergeRules(this.config.rules);b.hinting_rules=escape(JSON.stringify(h.rules));null!=this.config.media&&(null!=this.config.media.src&&(this.setSrc(this.config.media.src),b.video_url=escape(this.config.media.src)),null!=this.config.media.source&&0<this.config.media.source.length&&(this.setSource(this.config.media.source),b.video_url=escape(this.media.src)),null!=this.config.media.medium&&(this.setMedium(this.config.media.medium),b.medium=this.config.media.medium),null!=this.config.media.title&&(b.title=
escape(this.config.media.title)),null!=this.config.media.poster&&(b.poster=escape(this.config.media.poster)),null!=this.config.media.temporalType&&(b.temporalType=this.config.media.temporalType));"audio"===this.getMedium()&&(b.controls=!0,b.auto_hide=-1);null!=(null!=(d=this.config.ima)?null!=(k=d.overlay)?k.delay:void 0:void 0)&&(b.overlay_ad_delay=this.config.ima.overlay.delay);null!=this.config.volume&&(b.volume=h.clamp(this.config.volume,0,1));null!=this.config.target&&(b.external_target=this.config.target);
null!=this.config.name&&(b.core_player_name=this.config.name);null!=this.config.domain&&(b.embed_domain=b.domain=this.config.domain);b.auto_replay=!0===this.config.loop;null!=this.config.ticker&&!1!==this.config.ticker.enabled&&(null!=this.config.ticker.url&&(b.ticker_text_url=this.config.ticker.url),null!=this.config.ticker.interval&&(b.ticker_polling_interval=this.config.ticker.interval),null!=this.config.ticker.speed&&(b.ticker_speed=this.config.ticker.speed));null!=this.config.fullscreen&&(b.fullscreen_enabled=
!1!==this.config.fullscreen.enabled);null!=this.config.params&&(b.params=escape(JSON.stringify(this.config.params)));null!=this.config.version&&(b.context_menu_label=this.config.version);b.show_play_button_overlay=!1;b.auto_play_list=!1;b.next_video_timer=0;null==b.context_menu_mode&&(b.context_menu_mode=!0===this.debug?"long":"short");this.sendNotification(s.CREATE_FLASH_VARS,{flashvars:b,config:this.config});if(null!=a.vars)for(c in d=a.vars,d)a=d[c],b[c]=a;return b};p.prototype.createXML=function(a){var b,
c,d,k,e,g;k=P.parse(a.flash.xml);this.sendNotification(s.CREATE_XML,{config:a,xml:k});b=k.getElementsByTagName("plugin");d=a.flash["static"];if(!0===(null!=d?d.enabled:void 0)&&null!=d.plugins)for(e=0,g=b.length;e<g;e++)a=b[e],null!=(c=d.plugins[a.getAttribute("id")])&&(a.setAttribute("type","static"),P.updateTextContent(a,c));else if(!0===this.debug)for(d=0,e=b.length;d<e;d++)a=b[d],"AkamaiAdvancedStreamingPlugin"===a.getAttribute("id")&&(c=a.textContent||a.text,P.updateTextContent(a,c.replace("AkamaiAdvancedStreamingPlugin.swf",
"AkamaiAdvancedStreamingPlugin-logging.swf")));b=P.serialize(k);b=b.match(/<application>[\w\W\s\S\d\D]*<\/application>/)[0]||b;b=b.replace(/[\n\r\t]/g,"");return escape(b)};p.prototype.createdHandler=function(a){var b=this;this.video=a.ref;this.video.className="video";this.video.eventHandler=function(a,d){return b.eventHandler(a,d)};this.sendNotification(s.FLASH_CREATED);null!=this.getMedium()&&this.setMedium(this.media.medium)};p.prototype.eventHandler=function(a,b){var c,d,k;try{switch(a){case s.INITIALIZED:k=
d="ready";break;case s.RESET:d="ready";this.started=!1;break;case s.LOADING:k="loadstart";break;case s.PLAYER_ERROR:k=d="error";break;case s.MEDIA_ERROR:k=d="error";break;case s.ERROR_STREAM_NOT_FOUND:k=d="error";break;case s.CAPABILITY_CHANGE:c=b.type;"canPlayChange"===c&&!0===b.enabled?(k="canplay",this.loaded=!0):"canSeekChange"===c&&!0===b.enabled?k="canplaythrough":"temporalChange"===c&&!0===b.enabled&&(k="loadedmetadata");break;case s.PLAYBACK_OPEN:k="started";this.started=!0;break;case s.PLAYING:this.started||
this.sendNotification("play",b);k=d="playing";this.paused=this.ended=!1;break;case s.PLAY_REQUEST:k="playrequest";break;case s.PLAY:"paused"!==this.playState&&this.started&&(k="play");break;case s.ENDED:k=d="ended";this.ended=!0;break;case s.PAUSED:k="pause";d="paused";this.paused=!0;break;case s.BUFFERING:"ended"!==this.className&&(k=d="waiting");break;case s.DURATION_CHANGE:isNaN(b.time)||(k="durationchange",b=b.time);break;case s.VOLUME_CHANGE:k="volumechange";break;case s.TIME_UPDATE:k="timeupdate";
break;case s.SEEKING_CHANGE:k=b.seeking?"seeking":"seeked";this.seeking=b.seeking;break;case s.FULLSCREEN_CHANGE:k="fullscreenchange";b="fullScreen"===b.displayState;break;case s.FAIL_OVER_ATTEMPT:k="failoverattempt";break;case s.ERROR:this.logger.error(b),k=d="error"}this.sendNotification(e.DISPATCH_EVENT,{type:a,data:b,player:this.parent});this.sendNotification(a,b);null!=k&&this.sendNotification(k,b);null!=d&&this.setPlayState(d)}catch(D){this.logger.error("Flash Event Error:",D)}};p.prototype.setPlayState=
function(a){var b;if(a!==this.playState)return b={newState:a,oldState:this.playState},this.playState=a,this.sendNotification(e.PLAY_STATE_CHANGE,b),a};p.prototype.setMedia=function(a){if(a!==this.media)return this.media=a,null!=this.playState&&this.setPlayState("ready"),null!=a.src&&this.setSrc(a.src),null!=a.source&&0<a.source.length&&this.setSource(a.source),this.sendNotification(e.MEDIA_CHANGE,a),this.loaded=!0,null==a.autoplay&&(a.autoplay=this.autoplay),this.video.loadURL(this.media.src,a),a};
p.prototype.getMedia=function(){return this.media};p.prototype.load=function(){this.loaded=!0;this.video.loadURL(this.media.src)};p.prototype.play=function(){this.loaded?this.video.unpause():this.load()};p.prototype.setMuted=function(a){this.muted=a;try{!0===a?this.video.mute():this.video.unmute()}catch(b){this.logger.error(b)}return a};p.prototype.getMuted=function(){return this.muted};p.prototype.getSrc=function(a){return this.video.getURL()};p.prototype.setSrc=function(a){this.media.src=a;this.loaded=
!1;this.setMedium(h.getMimeType(a));return a};p.prototype.setAutoplay=function(a){return this.autoplay=a};p.prototype.getAutoplay=function(){return this.autoplay};p.prototype.getMedium=function(){return this.media.medium};p.prototype.setMedium=function(a){var b,c;if(a!==this.media.medium)return null!=this.media.medium&&null!=this.media.medium&&(c="medium-"+this.media.medium),b=this.media.medium=/audio/.test(a)?"audio":"video",this.sendNotification(e.MEDIUM_CHANGE,{newState:"medium-"+b,oldState:c}),
a};p.prototype.setSource=function(a){var b,c=this;if(!(null==a||1>a.length)){this.media.source=a;this.loaded=!1;b=h.selectSource(a,function(a){return c.canPlayType(a)});if(null!=(null!=b?b.src:void 0)&&""!==b.src)this.setSrc(b.src),"undefined"!==typeof type&&null!==type&&this.setMedium(type);else throw Error("No valid source could be found");return a}};p.prototype.getSource=function(a){return this.media.source};p.prototype.getSeeking=function(){return this.seeking};p.prototype.getPaused=function(){return this.paused};
p.prototype.getEnded=function(){return this.ended};p.prototype.getFlashXML=function(){return P.parse(this.getConfigXMLString())};p.prototype.getFlashVars=function(){return this.flashvars};p.prototype.evaluateBinding=function(a){return this.video.evaluateBinding(a)};p.prototype.canPlayType=function(a){return 0<=Bb.call(h.flashTypes,a)?"maybe":""};p.prototype.replay=function(){this.video.replay()};p.prototype.pause=function(){this.video.pause()};p.prototype.end=function(){this.video.stopPlayer()};p.prototype.getCurrentTime=
function(a){return this.video.getCurrentTime()};p.prototype.setCurrentTime=function(a){this.video.jumpToTime(a);return a};p.prototype.getParams=function(){return this.video.getParams()};p.prototype.setParams=function(a){this.video.setParams(a);return a};p.prototype.getVolume=function(){return this.video.getVolume()};p.prototype.setVolume=function(a){this.video.setVolume(a);return a};p.prototype.getDuration=function(){return this.video.getDuration()};p.prototype.exitFullScreen=function(){this.video.exitFullScreen()};
var va=function(a){this.module=a;va.__super__.constructor.call(this,a.getModuleName(),this)};f(va,puremvc.Mediator);va.prototype.module=null;va.prototype.mediator=null;va.prototype.initializeNotifier=function(a){var b,c=this;va.__super__.initializeNotifier.call(this,a);b=this.module.listNotificationPublications();null!=b&&(this.mediator=new puremvc.Mediator(this.facade.getModuleName()),this.mediator.listNotificationInterests=function(){return b},this.mediator.handleNotification=function(a){c.facade.sendNotification(a.getName(),
a.getBody(),a.getType())})};va.prototype.onRegister=function(){null!=this.mediator&&this.module.registerMediator(this.mediator)};va.prototype.onRemove=function(){null!=this.mediator&&this.module.removeMeditator(this.mediator)};va.prototype.listNotificationInterests=function(){return this.module.listNotificationInterests()};va.prototype.handleNotification=function(a){this.module.sendNotification(a.getName(),a.getBody(),a.getType())};var ib={REGISTER_PLUGINS:"registerPlugins",PLUGIN_REGISTERED:"pluginRegistered"},
l=function(a,b,c){var d;this.target=a;this.type=b;this.handler=c;this.trigger=rd(this.trigger,this);l.instances.push(this);this.types=[];(d=this.type,0<=Bb.call(l.EVENTS,d))?h.isTouchDevice()?(this.types.push(l.TOUCH_EVENTS[this.type]),this.type===l.TOUCH_EVENTS[1]&&this.types.push(l.TOUCH_EVENTS[4])):this.types.push(l.MOUSE_EVENTS[this.type]):this.type instanceof Array?this.types=this.type:this.types.push(this.type);this.bind()};l.PRESS=0;l.RELEASE=1;l.MOVE=2;l.CLICK=3;l.EVENTS=[l.PRESS,l.RELEASE,
l.MOVE,l.CLICK];l.MOUSE_EVENTS=["mousedown","mouseup","mousemove","click"];l.TOUCH_EVENTS=["touchstart","touchend","touchmove","click","touchcancel"];l.instances=[];l.create=function(a,b,c){return new l(a,b,c)};l.bind=function(a,b){var c,d,k,e;e=l.instances;c=d=0;for(k=e.length;d<k;c=++d)c=e[c],c.target===a&&(null!=b&&c.type!==b||c.bind())};l.unbind=function(a,b){var c,d,k,e;e=l.instances;c=d=0;for(k=e.length;d<k;c=++d)c=e[c],c.target===a&&(null!=b&&c.type!==b||c.unbind())};l.clear=function(a,b){var c,
d,k,e,g;g=l.instances;c=k=0;for(e=g.length;k<e;c=++k)d=g[c],(null!=d?d.target:void 0)!==a||null!=b&&d.type!==b||(d.clear(),l.instances.splice(c,1))};l.prototype.types=null;l.prototype.bind=function(){var a,b,c,d;d=this.types;b=0;for(c=d.length;b<c;b++)a=d[b],null!=this.target.addEventListener?this.target.addEventListener(a,this.trigger,!1):null!=this.target.attachEvent&&this.target.attachEvent("on"+a,this.trigger)};l.prototype.unbind=function(){var a,b,c,d;d=this.types;b=0;for(c=d.length;b<c;b++)a=
d[b],null!=this.target.removeEventListener?this.target.removeEventListener(a,this.trigger):null!=this.target.attachEvent&&this.target.removeEvent("on"+a,this.trigger)};l.prototype.clear=function(){this.unbind();this.types=this.type=this.handler=this.target=null};l.prototype.trigger=function(a){this.handler(a)};var ab=function(){ab.__super__.constructor.call(this);null==this.contextName&&(this.contextName=this.constructor.NAME)};f(ab,puremvc.Proxy);ab.prototype.contextName=null;ab.prototype.contextData=
null;ab.prototype.getContextName=function(){return this.contextName};ab.prototype.getContextData=function(){return this.contextData};var Db=function(){Db.__super__.constructor.call(this)};f(Db,puremvc.SimpleCommand);Db.prototype.execute=function(a){this.sendNotification(e.PLAY_REQUEST)};var tb=function(a){tb.__super__.constructor.call(this,a)};f(tb,$);tb.NAME="PluginDispatcher";tb.prototype.dispatchEvent=function(a){a.player=this.facade.app.parent;this.dispatcher.dispatchEvent(a)};tb.prototype.getMessage=
function(a){return tb.__super__.getMessage.call(this,a).replace("[","["+this.facade.app.getModuleName().toUpperCase()+" ")};var O=function(a){var b,c;O.__super__.constructor.call(this);if(a&&(null!=a.language&&(this.data.language=a.language),null!=a.locales))for(c in a.locales)if(null!=this.data.locales[c])for(b in a.locales[c])this.data.locales[c][b]=a.locales[c][b];else this.data.locales[c]=a.locales[c];this.setLocale(this.data.language)};f(O,ab);O.NAME="LocalizationProxy";O.prototype.contextName=
"l10n";O.prototype.data={language:navigator.language,locales:{en:{MSG_LIVE:"LIVE",MSG_REPLAY:"Replay",MSG_BUFFERING:"buffering...",MSG_CC:"CC",MSG_CC_TITLE:"Captions",MSG_CC_LANGUAGE:"Track :",MSG_CC_PRESETS:"Presets :",MSG_CC_FONT:"Font :",MSG_CC_EDGE:"Edge :",MSG_CC_SIZE:"Size :",MSG_CC_SCROLL:"Scroll :",MSG_CC_COLOR:"Color :",MSG_CC_BACKGROUND:"Background :",MSG_CC_WINDOW:"Window :",MSG_CC_OPACITY:"Opacity :",MSG_CC_SHOW_ADVANCED:"Show Advanced Settings",MSG_CC_HIDE_ADVANCED:"Hide Advanced Settings",
MSG_CC_RESET:"Default",MSG_CC_CANCEL:"Cancel",MSG_CC_APPLY:"Apply",MSG_CLOSE:"close",MSG_EN:"English",MSG_ES:"Spanish",MSG_DE:"German",MSG_FR:"French",MSG_IT:"Italian",MSG_RU:"Russian"}}};O.prototype.locale=null;O.prototype.getContextData=function(){return this.locale};O.prototype.getLanguage=function(){return this.data.language};O.prototype.setLanguage=function(a){this.data.language=a;this.setLocale(a);this.sendNotification(e.LANGUAGE_CHANGED,a);return a};O.prototype.setLocale=function(a){this.locale=
this.data.locales[a];null==this.locale&&(this.locale=this.data.locales[a.substring(0,2)]);return a};O.prototype.getLocales=function(){return this.data.locales};O.prototype.setLocales=function(a){return this.data.locales=a};O.prototype.getString=function(a){return(this.locale||this.data.locales.en)[a]||""};O.prototype.getLanguageString=function(a){var b;if("string"!==typeof a||null==a||""===a)return"";b="MSG_"+a.toUpperCase();b=this.getString(b);""===b&&(a=a.split("-").shift(),b="MSG_"+a.toUpperCase(),
b=this.getString(b));return b};var Ma=function(a,b){null==b&&(b="div");"string"===typeof b&&(b=document.createElement(b));Ma.__super__.constructor.call(this,a,b)};f(Ma,na);Ma.NAME="LayerMediator";Ma.prototype.onRegister=function(){Ma.__super__.onRegister.call(this);this.classList.add("layer");this.sendNotification(e.ADD_LAYER,this.viewComponent)};var La=function(a,b){La.__super__.constructor.call(this,b,a)};f(La,Ma);La.NAME="OverlayLayerMediator";La.prototype.onRegister=function(){La.__super__.onRegister.call(this);
this.classList.add("overlays-layer")};La.prototype.listNotificationInterests=function(){return[e.ADD_OVERLAY,e.REMOVE_OVERLAY]};La.prototype.handleNotification=function(a){var b;b=a.getName();a=a.getBody();switch(b){case e.ADD_OVERLAY:this.viewComponent.appendChild(a);break;case e.REMOVE_OVERLAY:this.viewComponent.removeChild(a)}};var ca={CHECK_AUTHORIZATION:"checkAuthorization",AUTHORIZATION_FAILED:"authorizationfailed",AUTHORIZE:"authorize",AUTHORIZED:"authorized",SET_TOKEN:"settoken",SET_KEY:"setkey"},
L=function(){L.__super__.constructor.call(this,this.constructor.NAME,{});this.setupHDN1()};f(L,puremvc.Proxy);L.NAME="SecurityProxy";L.prototype.setupHDN1=function(){var a=this;return window.retrieveToken=function(b,c){var d;a.facade.logger.debug("HDN1: Token Requested",b,c);d=a.getToken();null!=d?a.facade.video.tokenRetrievalSuccess("\x26primaryToken\x3d"+d):a.sendNotification(ca.AUTHORIZE);return!0}};L.prototype.getKey=function(){return this.data.key};L.prototype.setKey=function(a){return this.data.key=
a};L.prototype.getToken=function(){return this.data.token};L.prototype.setToken=function(a){return this.data.token=a};L.prototype.getSecret=function(){var a;if(null==this.data.token)return null;a="";null!=this.data.key&&(a+=this.data.key);return a+=this.data.token};L.prototype.createURL=function(a){var b;b=this.getSecret();null!=b&&(a+=/\?/.test(a)?"\x26":"?",a+=b);return a};L.prototype.getAuthorized=function(){return this.data.authorized};L.prototype.setAuthorized=function(a){return this.data.authorized=
a};L.prototype.getProvider=function(){return this.data.provider};L.prototype.setProvider=function(a){return this.data.provider=a};var Xb=function(){Xb.__super__.constructor.call(this)};f(Xb,puremvc.SimpleCommand);Xb.prototype.execute=function(a){var b;b=this.facade.retrieveProxy(y.NAME);a=a.getBody();b.setPlayState(a)};var Zb=function(){Zb.__super__.constructor.call(this)};f(Zb,puremvc.SimpleCommand);Zb.prototype.execute=function(a){var b,c;this.facade.logger.debug("MediaChangeCommand",a.getBody());
b=a.getBody();this.sendNotification(e.UPDATE_PLAYBACK_CORE,!1);c=this.facade.retrieveProxy(q.NAME);a=this.facade.retrieveProxy(A.NAME);!0===(c.initialized&&(a.getAutoplay()||!0===b.autoplay))&&this.sendNotification(e.START)};var bc=function(){bc.__super__.constructor.call(this)};f(bc,puremvc.SimpleCommand);bc.prototype.execute=function(a){var b,c;this.facade.logger.debug("UpdatePlaybackCoreCommand");b=this.facade.retrieveProxy(m.NAME);this.facade.retrieveProxy(R.NAME).setPlaybackType(b.getType());
c=this.facade.retrieveProxy(q.NAME);b=b.getSrc();null!=b&&""!==b&&"undefined"!==b&&(c.setSrc(b),a=null!=a.getBody()?a.getBody():!0,!0===a&&c.load())};var Wb=function(){Wb.__super__.constructor.call(this)};f(Wb,puremvc.SimpleCommand);Wb.prototype.execute=function(a){var b;this.facade.logger.debug("ChangeDurationCommand",a.getBody());a=a.getBody();b=this.facade.retrieveProxy(m.NAME);b.getDuration()!==a&&b.setDuration(a)};var cc=function(){cc.__super__.constructor.call(this)};f(cc,puremvc.SimpleCommand);
cc.prototype.execute=function(a){var b;b=this.facade.retrieveProxy(q.NAME).getCore();l.clear(b);this.facade.logger.error("[AMP ERROR]",a.getBody());this.sendNotification(e.CHANGE_PLAY_STATE,PlayState.ERROR)};var dc=function(){dc.__super__.constructor.call(this)};f(dc,puremvc.SimpleCommand);dc.prototype.execute=function(a){var b,c;this.facade.logger.debug("ReadyCommand");a=null!=(b=this.facade.config)?b.volume:void 0;null!=a&&this.sendNotification(e.CHANGE_VOLUME,a);this.sendNotification(e.CHANGE_DISPLAY_STATE,
aa.NORMAL);this.sendNotification(e.CHANGE_PLAY_STATE,PlayState.READY);this.sendNotification(e.CHANGE_ACTIVE_STATE,wa.ACTIVE);b=null!=(c=this.facade.config)?c.media:void 0;null!=b&&this.sendNotification(e.SET_MEDIA,b)};var ac=function(){ac.__super__.constructor.call(this)};f(ac,puremvc.SimpleCommand);ac.prototype.execute=function(a){this.facade.logger.debug("UpdateDataBindingsCommand");a=a.getBody()||{};this.facade.retrieveProxy(I.NAME).compile(a.contexts,a.suppressErrors)};var ec=function(){ec.__super__.constructor.call(this)};
f(ec,puremvc.SimpleCommand);ec.prototype.execute=function(a){this.facade.logger.debug("ChangeParamsCommand",a.getBody());a=a.getBody();this.facade.retrieveProxy(oa.NAME).setData(a);this.sendNotification(e.UPDATE_DATA_BINDINGS,{suppressErrors:!0})};var $b=function(){$b.__super__.constructor.call(this)};f($b,puremvc.SimpleCommand);$b.prototype.execute=function(a){var b;a=a.getBody();this.facade.logger.debug("SetMediaCommand",a);this.sendNotification(e.CHANGE_MEDIA,a);b=this.facade.retrieveProxy(m.NAME);
a=b.getData();!0===b.authorized&&this.sendNotification(e.MEDIA_CHANGE,a)};var Yb=function(){Yb.__super__.constructor.call(this)};f(Yb,puremvc.SimpleCommand);Yb.prototype.execute=function(a){var b;this.facade.logger.debug("ChangeMediaCommand",a.getBody());a=a.getBody();b=this.facade.retrieveProxy(m.NAME);this.sendNotification(e.CHANGE_PLAY_STATE,PlayState.READY);this.sendNotification(e.CHANGE_ACTIVE_STATE,wa.ACTIVE);b.setData(a);this.sendNotification(e.UPDATE_DATA_BINDINGS);this.sendNotification(ca.AUTHORIZE)};
var pa=function(a){pa.__super__.constructor.call(this,pa.NAME,a)};f(pa,Ma);pa.NAME="PosterMediator";pa.prototype.poster=null;pa.prototype.clickHandler=null;pa.prototype.onRegister=function(){var a=this;this.classList.add("poster-layer");this.poster=document.createElement("div");this.classList.add("poster-content",this.poster);this.viewComponent.appendChild(this.poster);this.clickHandler=l.create(this.viewComponent,l.CLICK,function(b){b.stopImmediatePropagation();b.preventDefault();a.sendNotification(e.TOGGLE_PLAY_PAUSE,
!0);return!1});pa.__super__.onRegister.call(this)};pa.prototype.listNotificationInterests=function(){return[e.CHANGE_MEDIA]};pa.prototype.handleNotification=function(a){switch(a.getName()){case e.CHANGE_MEDIA:this.poster.innerHTML="",a=a.getBody().poster,null!=a&&""!==a&&(this.poster.innerHTML='\x3cimg src\x3d"'+a+'" class\x3d"'+this.cssPrefix+'poster-image" /\x3e')}};var za=function(a){za.__super__.constructor.call(this,za.NAME,a)};f(za,Ma);za.NAME="ErrorSlateMediator";za.prototype.message=null;
za.prototype.onRegister=function(){za.__super__.onRegister.call(this);this.classList.add("error-layer");this.message=document.createElement("div");this.classList.add("error-message",this.message);return this.viewComponent.appendChild(this.message)};za.prototype.listNotificationInterests=function(){return[e.ERROR]};za.prototype.handleNotification=function(a){var b;switch(a.getName()){case e.ERROR:a=a.getBody();b="Error: ";switch(a.code){case MediaError.MEDIA_ERR_ABORTED:b+="Media was aborted.";break;
case MediaError.MEDIA_ERR_DECODE:b+="Decode Error.";break;case MediaError.MEDIA_ERR_NETWORK:b+="Network Error.";break;case MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED:b+="Source not supported.";break;default:b+=a}return this.message.textContent=b}};var qa=function(a){qa.__super__.constructor.call(this,qa.NAME,a)};f(qa,ha);qa.NAME="TitleBarMediator";qa.prototype.title=null;qa.prototype.description=null;qa.prototype.onRegister=function(){this.classList.add("title-bar");this.title=document.createElement("div");
this.classList.add("title-text",this.title);this.viewComponent.appendChild(this.title);this.description=document.createElement("div");this.classList.add("description-text",this.description);this.viewComponent.appendChild(this.description);qa.__super__.onRegister.call(this)};qa.prototype.listNotificationInterests=function(){return[e.CHANGE_MEDIA]};qa.prototype.handleNotification=function(a){var b;switch(a.getName()){case e.CHANGE_MEDIA:a=a.getBody();b=a.title;if(null==b||""===b||"undefined"===b)return this.classList.add("hidden");
this.title.innerHTML=b;null!=a.duration&&(this.title.innerHTML+=" - "+h.formatTimecode(a.duration));this.description.innerHTML=a.description?a.description:"";return this.classList.remove("hidden")}};var ub=function(a){ua.attachModuleDispatcher(a,new tb(this));this.getConfig=function(){return a.getConfig()}};f(ub,ua);ub.prototype.getConfig=function(){};var Cb={PREFIX:"akamai-"},X=function(a,b){this.app=a;this.logger=this.app.logger;X.__super__.constructor.call(this,b)};f(X,z);X.NAME="Plugin";X.prototype.app=
null;X.prototype.initialize=function(){this.createModel();this.createController()};X.prototype.createAPI=function(){return new ub(this)};X.prototype.onRegister=function(){var a;a=this.retrieveProxy(K.NAME);null==(null!=a?a.getLoaded:void 0)||a.getLoaded()?this.registered():a.load(this.registered.bind(this))};X.prototype.registered=function(){var a;this.createView();null!=(a=this.retrieveProxy(K.NAME))&&"function"===typeof a.initialize&&a.initialize();this.sendNotification(ib.PLUGIN_REGISTERED,this)};
X.prototype.listNotificationPublications=function(){var a,b;return[e.ADD_LAYER,e.REMOVE_LAYER,e.ADD_OVERLAY,e.REMOVE_OVERLAY,e.ADD_APPLICATION_STATE,e.REMOVE_APPLICATION_STATE].concat(function(){var c;c=[];for(a in ib)b=ib[a],c.push(b);return c}())};var M={TOGGLE_PLAY_PAUSE:"usertogglePlayPause",PLAY:"userplay",PAUSE:"userpause",SEEK:"userseek"},xa=function(){this.plugins=[];this.registered=[];xa.__super__.constructor.call(this,this.constructor.NAME,{})};f(xa,puremvc.Mediator);xa.NAME="PluginAdapter";
xa.prototype.plugins=null;xa.prototype.registered=null;xa.prototype.onRegister=function(){return xa.__super__.onRegister.call(this)};xa.prototype.listNotificationInterests=function(){return[ib.REGISTER_PLUGINS,ib.PLUGIN_REGISTERED]};xa.prototype.handleNotification=function(a){var b,c,d;b=a.getName();a=a.getBody();switch(b){case ib.REGISTER_PLUGINS:d=this.plugins=a;a=0;for(c=d.length;a<c;a++)b=d[a],this.facade.registerModule(b);break;case ib.PLUGIN_REGISTERED:this.registered.push(a),this.facade.logger.debug("Plugin Registered: "+
a.constructor.NAME),this.registered.length===this.plugins.length&&this.sendNotification(e.READY,this.facade.config)}};var ya=function(a){ya.__super__.constructor.call(this,ya.NAME,a)};f(ya,Ma);ya.NAME="VideoMediator";ya.prototype.video=null;ya.prototype.onRegister=function(){this.classList.add("video-layer");ya.__super__.onRegister.call(this)};ya.prototype.listNotificationInterests=function(){return[e.PLAYBACK_CORE_CHANGE]};ya.prototype.handleNotification=function(a){var b;b=a.getName();a=a.getBody();
switch(b){case e.PLAYBACK_CORE_CHANGE:null!=this.video&&this.viewComponent.removeChild(this.video),this.video=a,this.classList.add("video",this.video),this.viewComponent.appendChild(this.video)}};var vb=function(){};vb.prototype.data=null;vb.prototype.value=null;vb.prototype.source=null;vb.prototype.parse=function(a){};vb.prototype.compile=function(a,b){};var I=function(){I.__super__.constructor.call(this,this.constructor.NAME,{});this.data={};this.contextMap={};this.configurationMap={}};f(I,puremvc.Proxy);
I.NAME="DataBindingProxy";I.prototype.contextMap=null;I.prototype.configurationMap=null;I.prototype.paramsProxy=null;I.prototype.initialize=function(){this.paramsProxy=this.facade.retrieveProxy(oa.NAME);this.registerContext(this.facade.retrieveProxy(m.NAME));this.registerContext(this.facade.retrieveProxy(O.NAME));this.registerContext(this.facade.retrieveProxy(R.NAME));return this.update()};I.prototype.registerContext=function(a){null!=a&&(this.contextMap[a.getContextName()]=a)};I.prototype.retrieveContext=
function(a){return this.contextMap[a]};I.prototype.removeContext=function(a){var b;b=this.contextMap[a];delete this.contextMap[a];return b};I.prototype.registerConfiguration=function(a){null!=a&&(this.configurationMap[a.getConfigurationName()]=a,a.compile(this.context,!0))};I.prototype.retrieveConfiguration=function(a){return this.configurationMap[a]};I.prototype.removeConfiguration=function(a){var b;b=this.configurationMap[a];delete this.configurationMap[a];return b};I.prototype.evaluateBinding=
function(a){a=new Na(a);a.compile(this.data);return a.value};I.prototype.update=function(a){var b,c,d,k;this.data.now=Date.now();k=this.contextMap;for(d in k)b=k[d],-1!==(null!=a?"function"===typeof a.indexOf?a.indexOf(d):void 0:void 0)&&(this.data[d]=b.getContextData());this.paramsProxy.compile(this.data);b=this.paramsProxy.value;for(c in b)a=b[c],this.data[c]=a;return this.data};I.prototype.compile=function(a,b){var c,d,k,e,g;null==b&&(b=!1);this.update(a);d=h.clone(this.data);e=this.paramsProxy.getConfigurationName();
g=this.configurationMap;for(k in g)c=g[k],k!==e&&c.compile(d,b)};var Oa=function(a){null!=a&&this.parse(a)};f(Oa,vb);Oa.prototype.data=null;Oa.prototype.value=null;Oa.prototype.source=null;Oa.prototype.parse=function(a){return a instanceof Array?new Hb(a):a instanceof Object?new fb(a):new Na(a)};var Hb=function(a){Hb.__super__.constructor.call(this,a)};f(Hb,Oa);Hb.prototype.parse=function(a){var b,c,d,k;this.data=[];b=d=0;for(k=a.length;d<k;b=++d)c=a[b],this.data[b]=Hb.__super__.parse.call(this,c);
return this.data};Hb.prototype.compile=function(a,b){var c,d,k,e,g;null==a&&(a={});null==b&&(b=!1);this.value=[];g=this.data;c=k=0;for(e=g.length;k<e;c=++k){d=g[c];try{this.value[c]=d.compile(a,b)}catch(n){this.value[c]=null,b||H.error(n)}}return this.value};var hc=function(a){this.message=hc.MESSAGE+a};f(hc,Error);hc.MESSAGE="Tokenization Error: Could not find token value for: ";var Ib=function(a){Ib.__super__.constructor.call(this,a)};f(Ib,Oa);Ib.prototype.parse=function(a){return this.source=this.data=
this.value=a};Ib.prototype.compile=function(a,b){return this.value};var Jb=function(a){Jb.__super__.constructor.call(this,a)};f(Jb,Oa);Jb.prototype.exec=null;Jb.prototype.parse=function(a){this.source=this.data=a;this.exec=new Function("context","var value; with(context){value \x3d "+this.data+";}return value;");return this.data};Jb.prototype.compile=function(a,b){null==a&&(a={});if(null==this.exec)return this.value;try{this.value=this.exec(a)}catch(c){if(this.value=null,!suppressErors)throw new hc(this.data);
}return this.value};var Na=function(a){this.token=RegExp(this.tokenStart.source+"([^#]*)"+this.tokenEnd.source,"g");Na.__super__.constructor.call(this,a)};f(Na,Oa);Na.prototype.exec=null;Na.prototype.tokenStart=/#{/;Na.prototype.tokenEnd=/}/;Na.prototype.token=null;Na.prototype.parse=function(a){var b,c,d,k,e,g;this.source=a;this.data=[];if(this.token.test(this.source)){k=[];c=null;a=this.source.replace(this.token,function(a,b,d,e){k.push(b);c="\x3c\x3c\x3e\x3e";0<d&&d<e.length-a.length&&(c+="\x3c\x3c\x3e\x3e");
return c});b=a.split("\x3c\x3c\x3e\x3e");e=d=0;for(g=b.length;e<g;e++)a=b[e],""===a&&k[d]?(this.data.push(new Jb(k[d])),d++):""!==a&&this.data.push(new Ib(a));1===this.data.length&&(this.data=this.data[0])}else this.data=new Ib(a);return this.data};Na.prototype.compile=function(a,b){var c,d,e,D;null==a&&(a={});null==b&&(b=!1);if(null==this.data)return this.value;try{if(this.data instanceof vb)this.value=this.data.compile(a,b);else for(this.value="",D=this.data,d=0,e=D.length;d<e;d++)c=D[d],this.value+=
c.compile(a,b)}catch(g){if(this.value=null,!b)throw new hc(this.source);}return this.value};var fb=function(a){fb.__super__.constructor.call(this,a)};f(fb,Oa);fb.prototype.parse=function(a){var b,c;this.source=a;this.data={};for(b in a)c=a[b],this.data[b]=fb.__super__.parse.call(this,c);return this.data};fb.prototype.compile=function(a,b){var c,d,e;null==a&&(a={});null==b&&(b=!1);this.value={};e=this.data;for(c in e){d=e[c];try{this.value[c]=d.compile(a,b)}catch(D){this.value[c]=null,H.error(D)}}return this.value};
var Ba=function(){Ba.__super__.constructor.call(this)};f(Ba,puremvc.Proxy);Ba.NAME="PlaybackProxy";Ba.prototype.src=null;Ba.prototype.canPlayType=function(a){return"external"===a};Ba.prototype.getSrc=function(){return this.src};Ba.prototype.setSrc=function(a){null!=a&&""!==a||this.sendNotification(e.ERROR,"The value of src is not supported: "+a);a!==this.src&&(this.src=a);return a};Ba.prototype.play=function(){window.open(this.getSrc(),"_blank")};Ba.prototype.load=function(){};Ba.prototype.setVolume=
function(){};var oa=function(a){oa.__super__.constructor.call(this,a)};f(oa,S);oa.NAME="ParamsProxy";oa.prototype.defaults={};oa.prototype.configurationName="params";oa.prototype.setData=function(a){var b,c;this.data=(null!=(c=this.configurationData)?c.source:void 0)||{};for(b in a)this.data[b]=a[b];this.configurationData=new fb(this.data);return this.data};var ld=function(a,b){ld.__super__.constructor.call(this,a,b);this.evaluateBinding=function(b){var d;return null!=(d=a.retrieveProxy(I.NAME))?
d.evaluateBinding(b):void 0};this.canPlayType=function(a){return"maybe"};this.play=function(){a.sendNotification(e.PLAY)};this.setParams=function(b){a.sendNotification(e.CHANGE_PARAMS,b);return b};this.getParams=function(){return a.retrieveProxy(oa.NAME).getData()};this.setAutoplay=function(a){return!1};this.getAutoplay=function(){return!1};this.setLoop=function(a){return!1};this.getLoop=function(){return!1};this.setMuted=function(a){return!1};this.getMuted=function(){return!1};this.setMedia=function(b){a.sendNotification(e.SET_MEDIA,
b);return b};this.getMedia=function(b){var d;return null!=(d=a.retrieveProxy(m.NAME))?d.getData():void 0};this.setCurrentTime=function(a){return 0};this.getCurrentTime=function(a){return 0};this.getDuration=function(b){return a.retrieveProxy(m.NAME).getDuration()};this.setSrc=function(b){a.sendNotification(e.SET_MEDIA,{src:b});return b};this.getSrc=function(b){return a.retrieveProxy(m.NAME).getSrc()};this.setSource=function(b){a.sendNotification(e.SET_MEDIA,{source:b});return b};this.getSource=function(){return a.retrieveProxy(m.NAME).getSource()};
this.setVolume=function(a){return a};this.getVolume=function(a){return 1};this.getSeeking=function(){return!1};this.getPaused=function(){return!1};this.getEnded=function(){return!1}};f(ld,t);var kb=function(){kb.__super__.constructor.call(this)};f(kb,puremvc.MacroCommand);kb.prototype.initializeMacroCommand=function(){return this.addSubCommand(Db)};kb.prototype.execute=function(a){this.facade.logger.debug("PlayCommand");kb.__super__.execute.call(this,a);this.facade.retrieveProxy(q.NAME).play()};var aa=
{NORMAL:"normal",FULL_SCREEN:"full-screen"},sd={FLASH:"flash",HTML:"html"},wa={ACTIVE:"active",INACTIVE:"inactive"};PlayState={READY:"ready",PLAYING:"playing",PAUSED:"paused",ENDED:"ended",LOADING:"loading",WAITING:"waiting",SEEKING:"seeking",ERROR:"error"};var y=function(){y.__super__.constructor.call(this)};f(y,puremvc.Proxy);y.NAME="ApplicationStateProxy";y.prototype.displayState=null;y.prototype.playState=null;y.prototype.renderMode=null;y.prototype.activeState=null;y.prototype.seeking=!1;y.prototype.getDisplayState=
function(){return this.displayState};y.prototype.setDisplayState=function(a){var b;a!==b&&(b=this.displayState,this.displayState=a,this.sendNotification(e.DISPLAY_STATE_CHANGE,{oldState:b,newState:this.displayState}))};y.prototype.getPlayState=function(){return this.playState};y.prototype.setPlayState=function(a){var b;a!==this.playState&&!0!==this.seeking&&(b=this.playState,this.playState=a,this.sendNotification(e.PLAY_STATE_CHANGE,{oldState:b,newState:this.playState}))};y.prototype.getSeeking=function(){return this.seeking};
y.prototype.setSeeking=function(a){a!==this.seeking&&(this.seeking=a)};y.prototype.getRenderMode=function(){return this.renderMode};y.prototype.setRenderMode=function(a){a!==this.renderMode&&(this.renderMode=a)};y.prototype.getMedium=function(){return this.medium};y.prototype.setMedium=function(a){var b;a!==this.medium&&(b=null!=this.medium?"medium-"+this.medium:this.medium,this.medium=a,this.sendNotification(e.MEDIUM_CHANGE,{oldState:b,newState:"medium-"+this.medium}))};y.prototype.getActiveState=
function(){return this.activeState};y.prototype.setActiveState=function(a){var b;a!==this.activeState&&(b=this.activeState,this.activeState=a,this.sendNotification(e.ACTIVE_STATE_CHANGE,{oldState:b,newState:this.activeState}))};var A=function(a){A.__super__.constructor.call(this,a)};f(A,C);A.NAME=C.NAME;A.prototype.defaults={name:null,autoplay:!1,loop:!1,controls:{},fullscreen:null,target:"_blank",domain:null,endslate:null};A.prototype.setData=function(a){null!=a.rules&&h.mergeRules(a.rules);return A.__super__.setData.call(this,
a)};A.prototype.getAutoplay=function(){return this.data.autoplay};A.prototype.setAutoplay=function(a){return this.data.autoplay=a};A.prototype.getLoop=function(){return this.data.loop};A.prototype.setLoop=function(a){return this.data.loop=a};A.prototype.getEndSlate=function(){return this.data.endslate};A.prototype.setEndSlate=function(a){return this.data.endslate=a};A.prototype.getDomain=function(){return this.data.domain};A.prototype.setDomain=function(a){return this.data.domain=a};A.prototype.getTarget=
function(){return this.data.target};A.prototype.setTarget=function(a){return this.data.target=a};A.prototype.getName=function(){return this.data.name};A.prototype.setName=function(a){return this.data.name=a};A.prototype.getControls=function(){return this.data.controls};A.prototype.setControls=function(a){return this.data.controls=a};A.prototype.getFullscreen=function(){return this.data.fullscreen};A.prototype.setFullscreen=function(a){return this.data.fullscreen=a};var q=function(){q.__super__.constructor.call(this,
q.NAME)};f(q,puremvc.Proxy);q.NAME="PlaybackProxy";q.prototype.data={core:null,muted:!1,started:!1,volume:1,handlers:null};q.prototype.initialized=!1;q.prototype.getCore=function(){return this.facade.getVideo()};q.prototype.getStarted=function(){return this.data.started};q.prototype.setStarted=function(a){return this.data.started=a};q.prototype.getHandlers=function(){return this.data.handlers};q.prototype.setHandlers=function(a){var b,c,d,e;if(null!=this.data.handlers)for(e=this.data.handlers,c=0,
d=e.length;c<d;c++)b=e[c],b.clear();return this.data.handlers=a};q.prototype.getVideo=function(){return this.data.core};q.prototype.setVideo=function(a){if(a!==this.data.core)return this.data.core=a,this.sendNotification(e.PLAYBACK_CORE_CHANGE,this.data.core),this.data.core};q.prototype.canPlayType=function(a){var b;b=this.data.core.canPlayType(a)||"";(/Android 4\.[1-9]/.test(navigator.userAgent)||/Silk\/3/.test(navigator.userAgent))&&a===h.mimeTypes.m3u8&&(b="maybe");return b};q.prototype.getPaused=
function(){return this.data.core.paused};q.prototype.getEnded=function(){return this.data.core.ended};q.prototype.getSeeking=function(){return this.data.core.seeking};q.prototype.getCurrentTime=function(){var a;return null!=(a=this.data.core)?a.currentTime:void 0};q.prototype.setCurrentTime=function(a){if(this.data.core&&a!==this.data.core.currentTime)return this.data.core.currentTime=h.clamp(a,0,this.getDuration())};q.prototype.getSrc=function(){return this.data.core.src};q.prototype.setSrc=function(a){null!=
a&&""!==a||this.sendNotification(e.ERROR,"The value of src is not supported: "+a);a!==this.data.core.src&&(this.data.started=!1,this.data.core.src=a);return a};q.prototype.getVolume=function(){return this.data.core.volume};q.prototype.setVolume=function(a){0<=a&&1>=a&&a!==this.data.core.volume&&this.sendNotification(e.VOLUME_CHANGE,this.data.core.volume=a);return a};q.prototype.getMuted=function(){return this.data.muted};q.prototype.setMuted=function(a){var b;this.data.muted=a;!0===this.data.muted?
(this.data.volume=this.getVolume(),b=0):b=this.data.volume;this.sendNotification(e.CHANGE_VOLUME,b);return a};q.prototype.getDuration=function(a){var b;return null!=(b=this.data.core)?b.duration:void 0};q.prototype.play=function(){this.data.started||(this.data.started=!0);this.data.core.play()};q.prototype.pause=function(){this.data.core.pause()};q.prototype.load=function(){this.data.core.load()};q.prototype.end=function(){this.data.core&&(this.data.core.currentTime=this.data.core.duration)};var R=
function(a){this.defaultPlaybackCore=a;R.__super__.constructor.call(this);this.playbackCoreMap={}};f(R,ab);R.NAME="PlayerProxy";R.prototype.contextName="player";R.prototype.playbackCoreMap=null;R.prototype.defaultPlaybackCore=null;R.prototype.registerPlaybackCore=function(a){null!=a&&(this.playbackCoreMap[a.getPlaybackCoreName()]=a)};R.prototype.retrievePlaybackCore=function(a){return this.playbackCoreMap[a]};R.prototype.removePlaybackCore=function(a){var b;b=this.playbackCoreMap[a];delete this.playbackCoreMap[a];
return b};R.prototype.setPlaybackType=function(a){var b,c,d,e,D;e=this.defaultPlaybackCore;D=this.playbackCoreMap;for(d in D)if(c=D[d],b=c.canPlayType(a),""!==b){e=c;break}b=this.facade.retrieveProxy(q.NAME);b!==e&&(this.facade.removeProxy(q.NAME),this.facade.registerProxy(e),e.setData(b.getData()));return a};R.prototype.canPlayType=function(a){var b,c,d;d=this.playbackCoreMap;for(c in d)if(b=d[c],b=b.canPlayType(a),""!==b)return b;return b=this.defaultPlaybackCore.canPlayType(a)};R.prototype.getContextData=
function(){var a,b,c,d;a=this.facade.retrieveProxy(A.NAME);d=this.facade.retrieveProxy(q.NAME);c=this.facade.retrieveProxy(m.NAME);b=this.facade.getViewComponent();return{width:b.offsetWidth,height:b.offsetHeight,mode:"html5",autoplay:a.getAutoplay(),domain:a.getDomain(),name:a.getName(),currentTime:d.getCurrentTime(),duration:d.getDuration(),timecode:{duration:h.formatTimecode(c.getDuration()),currentTime:h.formatTimecode(d.getCurrentTime())}}};var m=function(){this.data={metadata:{}};m.__super__.constructor.call(this)};
f(m,ab);m.NAME="MediaProxy";m.prototype.contextName="media";m.prototype.data=null;m.prototype.authorized=!0;m.prototype.getContextData=function(){return{width:this.getWidth(),height:this.getHeight(),title:this.getTitle(),description:this.getDescription(),src:this.getSrc(),duration:this.getDuration(),guid:this.getGUID(),isLive:this.getIsLive(),metadata:this.getMetadata(),temporalType:this.getTemporalType(),poster:this.getPoster(),category:this.getCategory()}};m.prototype.setData=function(a){var b;
this.data.autoplay=a.autoplay;this.data.type=a.type;null!=a.source&&this.setSource(a.source);null!=a.src&&this.setSrc(a.src);this.data.title=a.title;this.setDuration(a.duration);this.data.poster=a.poster;this.data.guid=a.guid;this.data.link=a.link;this.data.embed=a.embed;this.data.width=a.width;this.data.height=a.height;this.data.category=a.category;this.data.description=a.description;this.data.status=a.status||{};"blocked"===(null!=(b=this.data.status)?b.state:void 0)&&(this.authorized=!1);this.data.category=
a.category;this.data.metadata=a.metadata||{};null!=a.isLive&&this.setIsLive(a.isLive);null!=a.temporalType?this.setTemporalType(a.temporalType):this.setTemporalType("vod");null!=a.medium&&this.setMedium(a.medium);null!=a.pubDate&&this.setPubDate(a.pubDate);return a};m.prototype.getGUID=function(){return this.data.guid};m.prototype.setGUID=function(a){return this.data.guid=a};m.prototype.getLink=function(){return this.data.link};m.prototype.setLint=function(a){return this.data.link=a};m.prototype.getEmbed=
function(){return this.data.embed};m.prototype.setEmbed=function(a){return this.data.embed=a};m.prototype.getAutoplay=function(){return this.data.autoplay};m.prototype.setAutoplay=function(a){return this.data.autoplay=a};m.prototype.getPubDate=function(){return this.data.pubDate};m.prototype.setPubDate=function(a){return this.data.pubDate=a};m.prototype.getCategory=function(){return this.data.category};m.prototype.setCategory=function(a){return this.data.category=a};m.prototype.getSrc=function(){return this.data.src};
m.prototype.setSrc=function(a){this.data.src=a;if(null!=this.data.src&&null==this.data.type)return this.setType(h.getMimeType(this.data.src))};m.prototype.getType=function(){return this.data.type};m.prototype.setType=function(a){this.data.type=a;a=/audio/.test(this.data.type)?"audio":"video";return this.setMedium(a)};m.prototype.getMedium=function(){return this.data.medium};m.prototype.setMedium=function(a){if(a!==this.data.medium)return this.data.medium=a,this.facade.retrieveProxy(y.NAME).setMedium(a)};
m.prototype.getMetadata=function(){return this.data.metadata};m.prototype.setMetadata=function(a){return this.data.metadata=a};m.prototype.getSource=function(){return this.data.source};m.prototype.setSource=function(a){var b;if(!(null==a||1>a.length)){this.data.source=a;b=this.facade.retrieveProxy(R.NAME);a=h.selectSource(a,function(a){return b.canPlayType(a)});if(null!=(null!=a?a.src:void 0)&&""!==a.src)return this.setSrc(a.src),this.setType(a.type);throw Error("No valid source could be found");
}};m.prototype.getTrack=function(){return this.data.track};m.prototype.setTrack=function(a){return this.data.track=a};m.prototype.getTitle=function(){return this.data.title};m.prototype.setTitle=function(a){return this.data.title=a};m.prototype.getWidth=function(){return this.data.width};m.prototype.setWidth=function(a){return this.data.width=a};m.prototype.getHeight=function(){return this.data.height};m.prototype.setHeight=function(a){return this.data.height=a};m.prototype.getDescription=function(){return this.data.description};
m.prototype.setDescription=function(a){return this.data.description=a};m.prototype.getCategory=function(){return this.data.category};m.prototype.setCategory=function(a){return this.data.category=a};m.prototype.getDuration=function(a){return this.data.duration};m.prototype.setDuration=function(a){if(0!==a&&(a!==this.data.duration&&(this.data.duration=a,this.sendNotification(e.DURATION_CHANGE,a)),Infinity===a))return this.setTemporalType("live")};m.prototype.getPoster=function(a){return this.data.poster};
m.prototype.setPoster=function(a){return this.data.poster=a};m.prototype.getIsLive=function(){return this.data.isLive};m.prototype.setIsLive=function(a){if(a!==this.data.isLive)return this.data.isLive=a};m.prototype.getTemporalType=function(){return this.data.temporalType};m.prototype.setTemporalType=function(a){if(a!==this.data.temporalType)return this.data.temporalType=a,this.sendNotification(e.TEMPORAL_TYPE_CHANGE,a)};var Kb=function(){Kb.__super__.constructor.call(this)};f(Kb,m);Kb.NAME="MediaProxy";
Kb.prototype.setSource=function(a){if(!(null==a||1>a.length))return a=a.filter(function(a){return"external"===a.type}),Kb.__super__.setSource.call(this,a)};var lb=function(a,b,c){lb.__super__.constructor.call(this,a,b,c)};f(lb,T);lb.prototype.playerType="external";lb.prototype.createAPI=function(){return new ld(this,this.dispatcher)};lb.prototype.createModel=function(){var a;this.registerProxy(new O(this.config));this.registerProxy(new y);a=new Ba;this.registerProxy(new R(a));this.registerProxy(new I);
this.registerProxy(new A(this.config));this.registerProxy(a);this.registerProxy(new Kb);this.registerProxy(new oa(this.config.params))};lb.prototype.createView=function(){var a,b=this;this.registerMediator(new U(this.viewComponent,"external"));this.registerMediator(new xa);a=new La;this.registerMediator(a);l.create(a.viewComponent,l.CLICK,function(){return b.sendNotification(e.TOGGLE_ACTIVE)});this.registerMediator(new pa);this.registerMediator(new qa);a=document.createElement("div");this.viewComponent.appendChild(a);
this.registerMediator(new za(a))};lb.prototype.createController=function(){this.registerCommand(e.UPDATE_DATA_BINDINGS,ac);this.registerCommand(e.UPDATE_DATA_BINDINGS,bc);this.registerCommand(e.TOGGLE_PLAY_PAUSE,kb);this.registerCommand(M.TOGGLE_PLAY_PAUSE,kb);this.registerCommand(e.PLAY,kb);this.registerCommand(e.CHANGE_PLAY_STATE,Xb);this.registerCommand(e.SET_MEDIA,$b);this.registerCommand(e.CHANGE_MEDIA,Yb);this.registerCommand(e.MEDIA_CHANGE,Zb);this.registerCommand(e.ERROR,cc);this.registerCommand(e.READY,
dc);this.registerCommand(e.CHANGE_PARAMS,ec)};var mb=function(a){null!=a&&this.decode(a)};mb.decode=function(a){var b;null!=a&&(b={},a=a.replace(/^[^?]*\?/,""),a.replace(/([^?=&]+)(=([^&]*))?/g,function(a,d,e,D){b[decodeURIComponent(d)]=decodeURIComponent(D)}));return b};mb.encode=function(a){var b,c,d;c=[];for(b in a)d=a[b],c.push(""+encodeURIComponent(b)+"\x3d"+encodeURIComponent(d));return c.join("\x26")};mb.prototype.decode=function(a){var b,c;if(null!=a)for(b in c=mb.decode(a),c)a=c[b],this[b]=
a;return c};mb.prototype.encode=function(){return mb.encode(this)};var Aa=function(a){var b;null==a&&(a=this);b={};this.addEventListener=function(a,d){d&&(null==b[a]&&(b[a]=[]),b[a].push(d))};this.dispatchEvent=function(c){var d,e,D,g;e=b[c.type];d=a["on"+c.type];c.target=a;null!=d&&d.apply(this,[c]);if(null!=e)for(D=0,g=e.length;D<g;D++)d=e[D],d.apply(a,[c])};this.removeEventListener=function(a,d){var e,D;if(a in b&&(e=b[a],D=e.indexOf(d),-1!==D))return e.splice(D,1)}};Aa.prototype.addEventListener=
function(a,b,c){};Aa.prototype.dispatchEvent=function(a){};Aa.prototype.removeEventListener=function(a,b,c){};var H=function(){};H.enabled=!1;H.enable=function(a){null==a&&(a=/debug\=true/.test(location.search.toLowerCase()));this.enabled=a;this.enabled||(this.log=this.trace=this.debug=this.info=this.warn=this.error=this.fatal=function(){});return a};H.log=function(){try{console.log.apply(console,arguments)}catch(a){}};H.trace=function(){try{console.trace.apply(console,arguments)}catch(a){}};H.debug=
function(){try{console.log.apply(console,arguments)}catch(a){this.log.apply(this,arguments)}};H.info=function(){try{console.info.apply(console,arguments)}catch(a){}};H.warn=function(){try{console.warn.apply(console,arguments)}catch(a){}};H.error=function(){try{console.error.apply(console,arguments)}catch(a){this.log.apply(this,arguments)}};H.fatal=function(){try{console.fatal.apply(console,arguments)}catch(a){}};var Pa=function(){this.item=[];this.metadata={}};Pa.prototype.title=null;Pa.prototype.link=
null;Pa.prototype.description=null;Pa.prototype.category=null;Pa.prototype.pubDate=null;Pa.prototype.language=null;Pa.prototype.ttl=null;Pa.prototype.item=null;Pa.prototype.metadata=null;var V=function(){this.metadata={}};V.prototype.src=null;V.prototype.source=null;V.prototype.title=null;V.prototype.description=null;V.prototype.link=null;V.prototype.guid=null;V.prototype.pubDate=null;V.prototype.poster=null;V.prototype.thumbnail=null;V.prototype.embed=null;V.prototype.category=null;V.prototype.type=
null;V.prototype.medium=null;V.prototype.duration=null;V.prototype.track=null;V.prototype.metadata=null;V.prototype.scenes=null;var wb=function(a,b){var c,d,e=this;this.date=a;this.label=null!=b?b:this.label;wb.__super__.constructor.call(this);d=null;this.engage=function(a){null==a&&(a=Date.now());a=this.date.getTime()-a;if(0>a)throw Error("Alarm date has past.");if(2147483647<a)throw Error("Invalid alarm date.");this.disengage();d=setTimeout(c,a)};this.disengage=function(){clearTimeout(d)};c=function(){e.dispatchEvent({type:"alarm",
label:e.label})}};f(wb,Aa);wb.prototype.date=null;wb.prototype.label="alarm";wb.prototype.engage=function(a){};wb.prototype.disengage=function(){};var Lb=function(){};Lb.prototype.getFeed=function(a,b,c){return h.getJson(a,b,c)};Lb.prototype.getMediaNode=function(a,b,c){var d,e,f,g;null==c&&(c=!0);f="media-"+b;d=a["media-group"]||a;e=d["media-content"];null!=e&&null!=e[f]?g=e[f]:null!=d[f]?g=d[f]:null!=a[f]?g=a[f]:null!=a[b]&&c&&(g=a[b]);return g};Lb.prototype.createEmbed=function(a){var b,c,d,e,
f,g;try{b=this.getMediaNode(a,"embed");if(null==b)return c;c={};c.url=b["@attributes"].url;c.width=b["@attributes"].width;c.height=b["@attributes"].height;c.params={};b["media-param"]instanceof Array||(b["media-param"]=[b["media-param"]]);g=b["media-param"];e=0;for(f=g.length;e<f;e++)d=g[e],c.params[d["@attributes"].name]=d["#text"]}catch(n){H.error("[AMP Feed Parse Error] embed parse error: "+n.message,n)}return c};Lb.prototype.createFeed=function(a){var b,c,d,e,f,g,n,h,l;try{if(b=a.channel,c=new Pa,
null!=b){c.title=b.title;c.description=b.description;c.language=b.language;c.category=b.category;c.pubDate=new Date(Date.parse(b.pubDate));c.ttl=b.ttl;e=b.item instanceof Array?b.item:[b.item];h=0;for(l=e.length;h<l;h++)d=e[h],g=this.createMedia(d),c.item.push(g);for(f in b)n=b[f],f in c||(c.metadata[f]=n)}}catch(m){H.error("[AMP Feed Parse Error] feed parse error: "+m.message,m)}return c};Lb.prototype.createMedia=function(a){var b,c,d,e,f,g,n,h,l,m,q,p,r,s,t,u,v,w,x;try{n=new V;g=this.getMediaNode(a,
"content");if(g instanceof Array)for(n.source=[],p=0,t=g.length;p<t;p++)d=g[p],l={src:d["@attributes"].url,type:d["@attributes"].type},c=d["media-category"],null!=c&&(b=c["@attributes"],"http://mrss.akamai.com/user_agent_hint"===b.schema&&(f=b.label||c["#text"],null!=f&&""!==f&&(null==l.rules&&(l.rules=[]),l.rules.push(f)))),n.source.push(l),n.medium=d["@attributes"].medium,n.duration=parseFloat(d["@attributes"].duration);else n.type=g["@attributes"].type,n.src=g["@attributes"].url,n.medium=g["@attributes"].medium,
n.duration=parseFloat(g["@attributes"].duration);n.guid=a.guid;n.title=this.getMediaNode(a,"title");n.link=a.link;n.description=this.getMediaNode(a,"description");n.pubDate=new Date(Date.parse(a.pubDate));n.thumbnail=n.poster=null!=(w=this.getMediaNode(a,"thumbnail"))?null!=(x=w["@attributes"])?x.url:void 0:void 0;n.embed=this.createEmbed(a);n.scenes=this.getMediaNode(a,"scenes")["media-scene"];h=this.getMediaNode(a,"status",!1);null!=h&&(n.status={state:h["@attributes"].state,reason:h["@attributes"].reason});
n.category=a.category;n.category instanceof Array||(n.category=[n.category]);h=this.getMediaNode(a,"category",!1);if(null!=h)for(r=0,u=h.length;r<u;r++)c=h[r],null!=c["#text"]&&""!==c["#text"]&&n.category.push(c["#text"]);null!=n.category&&n.category.sort(function(a,b){a=a.toLowerCase();b=b.toLowerCase();return a>b?1:a<b?-1:0});h=this.getMediaNode(a,"subTitle");if(null!=h)for(null==n.track&&(n.track=[]),h instanceof Array||(h=[h]),s=0,v=h.length;s<v;s++)m=h[s],null!=m["@attributes"]&&n.track.push({src:m["@attributes"].href,
type:m["@attributes"].type,kind:"captioning",srclang:m["@attributes"].lang||"en"});c=a.category;c instanceof Array||(c=[c]);n.isLive="live"===a.temporalType||null!=c&&-1!==c.join(",").indexOf("live_stream");n.temporalType=n.isLive?"live":"ondemand";for(e in a)q=a[e],e in n||(n.metadata[e]=q)}catch(y){H.error("[AMP Feed Parse Error] media parse error: "+y.message,y)}return n};var Ca=function(a,b,c){var d,e,f,g,n,l=this;this.url=a;null==b&&(b=!0);this.interval=null!=c?c:1E3;Ca.__super__.constructor.call(this);
f=d=0;n=e=null;this.sync=function(){var a,b=this;a=h.getXHR();a.onreadystatechange=function(c){try{switch(a.readyState){case 1:d=Date.now();break;case 2:if(400<=a.status)throw Error("Sync error ("+a.status+"): "+b.url);Date.now();e=a.getResponseHeader("Date");null!=e?(f=Date.parse(e),b.offset=d-f):b.offset=0;b.dispatchEvent({type:"sync",time:b.now()})}}catch(g){b.offset=0,b.dispatchEvent({type:"error",error:g,xhr:a})}};a.onerror=function(c){b.offset=0;b.dispatchEvent({type:"error",error:c,xhr:a})};
Date.now();a.open("HEAD",this.url,!0);a.send()};this.start=function(){this.stop();this.running=!0;g();n=setInterval(g,this.interval)};this.stop=function(){this.running=!1;clearInterval(n);n=null};g=function(){l.dispatchEvent({type:"tick",time:l.now()})};!0===b&&null!=this.url&&this.sync()};f(Ca,Aa);Ca.prototype.url=null;Ca.prototype.interval=1E3;Ca.prototype.running=!1;Ca.prototype.offset=0;Ca.prototype.now=function(){return Date.now()-this.offset};Ca.prototype.sync=function(){};Ca.prototype.start=
function(){};Ca.prototype.stop=function(){};var ba=function(a,b){this.type=a;null!=b&&(this.data=b)};ba.prototype.type=null;ba.prototype.target=null;ba.prototype.data=null;var Q=function(){Q.__super__.constructor.call(this,this)};f(Q,Aa);Q.prototype.xhr=null;Q.prototype.headers=null;Q.prototype.response=null;Q.prototype.responseXML=null;Q.prototype.responseText=null;Q.prototype.responseType=null;Q.prototype.withCredentials=!1;Q.prototype.readyState=0;Q.prototype.status=null;Q.prototype.open=function(a,
b){var c,d,e=this;try{d=new XMLHttpRequest}catch(f){d=new window.ActiveXObject("Microsoft.XMLHTTP")}Q.isCORS(b)&&(Object.prototype.hasOwnProperty.call(d,"withCredentials")?d.withCredentials=this.withCredentials:"undefined"!==typeof XDomainRequest&&(c=!0,d=new XDomainRequest));if(null!=d){c&&(d.onload=function(a){"function"===typeof d.onreadystatechange&&(d.readyState=4,d.status=200,d.contentType.match(/\/xml/)&&(d.responseXML=new ActiveXObject("Microsoft.XMLDOM"),d.responseXML.async=!1,d.responseXML.loadXML(d.responseText)),
d.onreadystatechange.call(d,a,!1))});d.onreadystatechange=function(a){var b,c;e.readyState=d.readyState;e.dispatchEvent(new ba("readystatechange",d));if(4===d.readyState)if(e.status=d.status,199<(b=d.status)&&400>b){null==d.responseText&&(d.responseText=d.text);e.responseText=d.responseText;if(null!=d.responseXML&&0<(null!=(c=d.responseXML.childNodes)?c.length:void 0))e.response=e.responseXML=d.responseXML,e.responseType="document";else try{e.response=JSON.parse(d.responseText),e.responseType="json"}catch(g){e.response=
d.responseText,e.responseType="text"}e.dispatchEvent(new ba("load",e))}else 0!==e.status&&e.dispatchEvent(new ba("error",e))};try{"undefined"!==typeof d.onerror&&(d.onerror=function(a){e.dispatchEvent(new ba("error",e))})}catch(g){}d.open(a,b)}this.xhr=d};Q.prototype.send=function(a){var b,c,d;if(null!=this.headers)for(b in d=this.headers,d)c=d[b],null!=b&&null!=c&&this.xhr.setRequestHeader(b,c);this.xhr.send(a)};Q.prototype.setRequestHeader=function(a,b){null!=a&&null!=b&&(null==this.headers&&(this.headers=
{}),this.headers[a]=b)};Q.prototype.setRequestHeaders=function(a){return this.headers=a};Q.prototype.getResponseHeader=function(a){var b;return null!=(b=this.xhr)?"function"===typeof b.getResponseHeader?b.getResponseHeader(a):void 0:void 0};Q.prototype.getAllResponseHeaders=function(){var a;return null!=(a=this.xhr)?"function"===typeof a.getAllResponseHeaders?a.getAllResponseHeaders():void 0:void 0};Q.isCORS=function(a){var b,c;b=document.createElement("a");b.href=a;a=""!==b.hostname?b.hostname:location.hostname;
c="0"!==b.port?b.port:location.port;return location.protocol!==(":"!==b.protocol?b.protocol:location.protocol)||location.hostname!==a||location.port!==c&&!(""===location.port&&"80"===c)};var xb=function(){};xb.construct=function(){var a,b,c;c=mb.decode(window.location.search);for(a in c)b=c[a],xb[a]=b;return!0};xb.constructed=xb.construct();xb.serialize=function(a,b){var c,d,e,f;e=[];for(d in a)f=a[d],c=b?b+"["+d+"]":d,e.push("object"===typeof f?this.serialize(f,c):encodeURIComponent(c)+"\x3d"+encodeURIComponent(f));
return e.join("\x26")};var h=function(){};h.blankImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAMAAAAoyzS7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NjI2QkJDQTBCMzQ4MTFFMUFERDJBRkRGQUQwNTcxRTIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NjI2QkJDQTFCMzQ4MTFFMUFERDJBRkRGQUQwNTcxRTIiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDowODg4NjdFQkIzNDgxMUUxQUREMkFGREZBRDA1NzFFMiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDowODg4NjdFQ0IzNDgxMUUxQUREMkFGREZBRDA1NzFFMiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pu0++ecAAAAGUExURf///wAAAFXC034AAAABdFJOUwBA5thmAAAADElEQVR42mJgAAgwAAACAAFPbVnhAAAAAElFTkSuQmCC";
h.flashTypes=["video/mp4","video/x-flv","video/f4m","application/smil","application/smil+xml"];h.mimeTypes={mp4:"video/mp4",flv:"video/x-flv",f4m:"video/f4m",smil:"application/smil",m3u8:"application/x-mpegURL",mp3:"audio/mpeg",json:"application/json",txt:"text/plain",xml:"application/xml",ogv:"video/ogg",webm:"video/webm",mpd:"application/dash+xml",ism:"application/vnd.ms-sstr+xml"};h.rules={flashTablets:{label:"Android 2 \x26 3 or Kindle Fire 1",regexp:"Android [23]|Silk/1"},html5Phones:{label:"iPhone",
regexp:"iPhone"},html5Tablets:{label:"HTML5 Tablets",regexp:"iPad|Android 4|Silk/2"},desktop:{label:"Desktop",regexp:"^((?!iPad|iPhone|Android|BlackBerry|PlayBook|Silk).)*$"}};h.getPlaybackMode=function(a){var b;null==a&&(a=(null!=(b=xb.mode)?b.toLowerCase():void 0)||"auto");if("auto"!==a)return"flash"!==a||this.hasFlash()||(a="none"),a;this.hasFlash()||(a=this.supportsHTML5Video()?"html":"none");"auto"===a&&(a=this.isHTML5()?"html":"flash");return a};h.mergeRules=function(a){var b,c,d;d=[];for(b in a)c=
a[b],d.push(h.rules[b]=c);return d};h.checkRules=function(a){var b,c,d;if(null!=a&&0<a.length)for(c=0,d=a.length;c<d;c++)if(b=a[c],b=h.rules[b])if(b=RegExp(b.regexp),b.test(navigator.userAgent))return!0;return!1};h.selectSource=function(a,b){var c,d,e;d=0;for(e=a.length;d<e;d++)if(c=a[d],h.checkRules(c.rules))return c;d=0;for(e=a.length;d<e;d++)if(c=a[d],""!==b(c.type||h.getMimeType(c.src)))return c;return null};h.getMimeType=function(a){return this.mimeTypes[h.getFileExtension(a)]};h.selectTrack=
function(a,b){var c,d,e,f;e=0;for(f=a.length;e<f;e++)if(c=a[e],c.kind===b){d=c;break}return d};h.isIPhone=function(){return/iPhone/.test(navigator.platform)||/iPhone/.test(navigator.userAgent)};h.isIPad=function(){return/iPad/.test(navigator.platform)||/iPad/.test(navigator.userAgent)};h.isAndroid4=function(){return/Android 4/.test(navigator.userAgent)};h.isKindleFireHD=function(){return/Silk\/2/.test(navigator.userAgent)};h.isKindleFire=function(){return/Silk\/1/.test(navigator.userAgent)};h.isBlackBerry=
function(){return/BlackBerry;|PlayBook|BB10/.test(navigator.userAgent)};h.isFirefoxOS=function(){return/\(Mobile;.*Firefox\//.test(navigator.userAgent)};h.supportsHTML5Video=function(){return null!=document.createElement("video").canPlayType};h.isHTML5=function(){return this.isIOS()||this.isAndroid4()||this.isKindleFireHD()||this.isBlackBerry()||this.isFirefoxOS()};h.isIOS=function(){var a;a=/iPad|iPhone|iPod/i;return a.test(navigator.platform)||a.test(navigator.userAgent)};h.hasFlash=function(){return swfobject.hasFlashPlayerVersion("1")};
h.isFullscreenDevice=function(){return this.isKindleFireHD()||this.isIPhone()};h.getDevice=function(){var a;a=null;this.isIPhone()?a="iphone":this.isIPad()?a="ipad":/Android/.test(navigator.userAgent)?a="android":this.isKindleFireHD()?a="kindlefirehd":this.isKindleFire()?a="kindlefire":/Mac|Win32/.test(navigator.platform)&&(a="desktop");return a};h.xmlToJson=function(a){var b,c,d,e,f;d={};9===a.nodeType&&(a=a.firstChild);if(1===a.nodeType){if(0<a.attributes.length)for(d["@attributes"]={},c=a.attributes,
b=e=0,f=c.length;e<f;b=++e)b=c[b],d["@attributes"][b.nodeName]=b.nodeValue}else if(3===a.nodeType||4===a.nodeType)d=a.nodeValue;if(a.hasChildNodes())for(f=a.childNodes,b=a=0,e=f.length;a<e;b=++a)if(c=f[b],3!==c.nodeType||/\S/.test(c.nodeValue))b=c.nodeName.replace(/:/,"-"),c=this.xmlToJson(c),null==c["@attributes"]&&null!=c["#text"]&&(c=c["#text"]),null==d[b]?d[b]=c:(d[b]instanceof Array||(d[b]=[d[b]]),d[b].push(c));return d};h.getXHR=function(){return new Q};h.get=function(a,b,c){var d;null==b&&
(b={});null==c&&(c=null);d=h.getXHR();null!=b&&(null!=b.withCredentials&&(d.withCredentials=b.withCredentials),null!=b.onload&&(d.onload=b.onload),null!=b.onerror&&(d.onerror=b.onerror));d.open("GET",a);null!=c&&d.setRequestHeaders(c);d.send();return d};h.send=function(a,b,c,d){var e;null==c&&(c={});null==d&&(d={"Content-Type":"String"});e=h.getXHR();null!=c.onload&&(e.onload=c.onload);null!=c.onerror&&(e.onerror=c.onerror);e.open("POST",a);null!=d&&e.setRequestHeaders(d);e.send(b);return e};h.loadAMPScript=
function(a,b){return this.loadScript(a,b,this.getAMPParent())};h.getAMPParent=function(a,b){var c;c=this.getAMPScriptTag();if(null!=c)return c.parentNode;c=document.getElementsByTagName("head");if(null!=(null!=c?c[0]:void 0))return c[0]};h.getAMPScriptTag=function(){var a,b,c,d;b=document.getElementsByTagName("script");c=0;for(d=b.length;c<d;c++)if(a=b[c],/amp(\..*)?\.js/.test(a.src))return a;return null};h.loadScript=function(a,b,c){var d;c=c||document.getElementsByTagName("head")[0];d=document.createElement("script");
d.type="text/javascript";null!=b&&(d.addEventListener?d.onload=function(a){this.onload=null;b()}:d.readyState&&(d.onreadystatechange=function(a){if("loaded"===this.readyState||"complete"===this.readyState)this.onreadystatechange=null,b()}));d.src=a;return c.appendChild(d)};h.loadStyleSheet=function(a){var b,c;b=document.getElementsByTagName("head")[0];c=document.createElement("link");c.rel="stylesheet";c.type="text/css";c.href=a;return b.appendChild(c)};h.read=function(a,b,c,d){var e,f;null==b&&(b=
{});null==c&&(c="");null==d&&(d=[]);try{return f=this.get(a,b,d),e=f.responseText||f.text,c===h.mimeTypes.json?JSON.parse(e):c===h.mimeTypes.xml&&null!=f.responseXML?f.responseXML:e}catch(g){return"undefined"!==typeof console&&null!==console&&"function"===typeof console.error&&console.error("Read Error: ",g),null}};h.getFileExtension=function(a){return a.split(".").pop().replace(/\?.*/,"")};h.getResponseHeader=function(a,b,c){var d;null==c&&(c={});d=h.getXHR();null!=c.onerror&&(d.onerror=c.onerror);
d.open("HEAD",a,!1);d.send();return d.getResponseHeader(b)};h.getResponseHeaders=function(a,b,c){var d,e,f;null==c&&(c={});d=h.getXHR();null!=c.onerror&&(d.onerror=c.onerror);d.open("HEAD",a,!1);d.send();c={};if(null==b)return d.getAllResponseHeaders();e=0;for(f=b.length;e<f;e++)a=b[e],c[a]=d.getResponseHeader(a);return c};h.isTouchDevice=function(){try{return document.createEvent("TouchEvent"),!0}catch(a){return!1}};h.clamp=function(a,b,c){a<b&&(a=b);a>c&&(a=c);return a};h.beacon=function(a){var b;
b=document.getElementById("beaconId");null==b&&(b=document.createElement("img"),b.setAttribute("id","beaconId"),b.setAttribute("height",0),b.setAttribute("width",0),document.body.appendChild(b),b.style.display="none");b.setAttribute("src",a);return b};h.getElementOffset=function(a){var b;b={left:0,top:0};if(a.offsetParent)for(b.left=a.offsetLeft,b.top=a.offsetTop;a=a.offsetParent;)b.left+=a.offsetLeft,b.top+=a.offsetTop;return b};h.override=function(a,b,c){var d;null==c&&(c=!0);if(null==a)return b;
if(null==b)return a;!0===c&&(a=h.clone(a),b=h.clone(b));for(d in b)c=b[d],"object"===typeof c?(null==a[d]&&(a[d]=c instanceof Array?[]:{}),a[d]=h.override(a[d],c,!1)):a[d]=c;return a};h.clone=function(a,b){var c,d,e,f,g,n,h;null==b&&(b=!0);if("object"!==typeof a)c=a;else for(f in c=a instanceof Array?[]:{},a)if(g=a[f],"object"===typeof g&&!0===b)if(g instanceof Array)for(c[f]=[],n=0,h=g.length;n<h;n++)d=g[n],c[f].push(this.clone(d));else for(e in c[f]={},g)d=g[e],c[f][e]=this.clone(d);else c[f]=g;
return c};h.formatTimecode=function(a,b){var c;a=parseInt(a);if(isNaN(a))return"00:00";c=h.formatZeroFill(a%60);a=parseInt(a/60);c=h.formatZeroFill(a%60)+":"+c;a=parseInt(a/60);0<a&&(c=h.formatZeroFill(a)+":"+c);3600<=b&&5===c.length&&(c="00:"+c);return c};h.formatZeroFill=function(a){var b;b=a.toString();10>a&&(b="0"+b);return b};h.flattenTimecode=function(a,b){var c,d,e;null==b&&(b=30);if(null==a||""===a)return NaN;e=a.split(":");c=0;4===e.length?c=parseInt(e.pop())/b:3===e.length&&(e[2]=e[2].replace(",",
"."),-1!==e[2].indexOf(".")&&(d=e[2].split(".")),1<(null!=d?d.length:void 0)&&(e[2]=d[0],c=parseInt(d[1])/1E3));for(d=parseInt(e.pop());0<e.length;)d+=Math.pow(60,e.length)*parseInt(e.shift());return d+c};h.cacheBust=function(a,b,c){var d;null==b&&(b="cacheBust");null==c&&(c=Date.now());d=-1===a.indexOf("?")?"?":"\x26";return a+d+b+"\x3d"+c};h.formatStyleName=function(a){return a.replace(/([A-Z])/,"-$1").toLowerCase()};h.trim=function(a){return a.replace(/^\s*(.*)/,"$1").replace(/(.*)\s*$/,"$1")};
h.getJson=function(a,b,c){var d;d=h.getXHR();d.open("GET",a);d.onload=function(a){a="document"===d.responseType?h.xmlToJson(d.responseXML):d.response;"function"===typeof b&&b(a)};d.onerror=function(a){"function"===typeof c&&c(a)};d.send();return d};h.getSource=function(a,b,c){var d;d=h.getPlaybackMode();h.getJson(a,function(a){var c,e;a=(new Lb).createFeed(a);0<(null!=a?null!=(e=a.item)?e.length:void 0:void 0)&&(c=function(a){return"flash"===d&&-1!==h.flashTypes.indexOf(a)||"html"===d&&-1===h.flashTypes.indexOf(a)?
"maybe":""},c=h.selectSource(a.item[0].source,c));"function"===typeof b&&b(c)},c)};var Y=function(a){Y.__super__.constructor.call(this,a)};f(Y,C);Y.prototype.defaults={mode:"auto",autoHide:3};Y.prototype.timeout=null;Y.prototype.initializeNotifier=function(a){Y.__super__.initializeNotifier.call(this,a);if(null!=this.config.mode)return this.setMode(this.config.mode)};Y.prototype.setMode=function(a){if(this.data.mode===a)return a;"auto"===this.data.mode&&this.stop();this.facade.sendNotification(e.REMOVE_APPLICATION_STATE,
"controls-"+this.data.mode);this.data.mode=a;this.facade.sendNotification(e.ADD_APPLICATION_STATE,"controls-"+this.data.mode);return a};Y.prototype.getMode=function(){return this.data.mode};Y.prototype.setAutoHide=function(a){return this.data.autoHide=a};Y.prototype.getAutoHide=function(){return this.data.autoHide};Y.prototype.start=function(){var a=this;this.stop();this.timeout=setTimeout(function(){"auto"===a.data.mode&&a.facade.sendNotification(e.CHANGE_ACTIVE_STATE,wa.INACTIVE)},1E3*this.data.autoHide)};
Y.prototype.stop=function(){clearTimeout(this.timeout);this.timeout=null};var ka=function(a,b,c,d){this.buttonName=a;this.buttonLabel=b;this.onclick=null!=c?c:this.onclick;null==d&&(d="div");"string"===typeof d&&(d=document.createElement(d));ka.__super__.constructor.call(this,this.constructor.NAME+"-"+this.buttonName,d)};f(ka,na);ka.NAME="ButtonMediator";ka.prototype.buttonName=null;ka.prototype.buttonLabel=null;ka.prototype.buttonClickHandler=null;ka.prototype.icon=null;ka.prototype.label=null;ka.prototype.onclick=
null;ka.prototype.onRegister=function(){ka.__super__.onRegister.call(this);this.classList.add(""+this.buttonName+"-button");this.classList.add("button");this.icon=document.createElement("div");this.classList.add(""+this.buttonName+"-button-icon",this.icon);this.classList.add("button-icon",this.icon);this.classList.add("icon",this.icon);this.viewComponent.appendChild(this.icon);null!=this.buttonLabel&&""!==this.buttonLabel&&(this.label=document.createElement("div"),this.label.textContent=this.buttonLabel,
this.classList.add(""+this.buttonName+"-button-label",this.label),this.classList.add("button-label",this.label),this.classList.add("label",this.label),this.viewComponent.appendChild(this.label));null!=this.buttonClickHandler&&null==this.onclick&&(this.onclick=this.buttonClickHandler.bind(this));null!=this.onclick&&this.viewComponent.addEventListener("click",this.onclick)};var N=function(a,b){this.player=a;this.config=b;N.__super__.constructor.call(this);this.dispatcher=new Aa(this)};f(N,puremvc.Mediator);
N.NAME="PluginWrapper";N.prototype.player=null;N.prototype.config=null;N.prototype.dispatcher=null;N.prototype.createFlashVars=null;N.prototype.createXML=null;N.prototype.getAPI=function(){return this};N.prototype.addEventListener=function(a,b){this.dispatcher.addEventListener(a,b)};N.prototype.dispatchEvent=function(a){"timeupdate"!==a.type&&"timeremaining"!==a.type&&this.player.logger.log("[AMP "+this.constructor.NAME.replace("Wrapper","").toUpperCase()+" EVENT]",a.type,a.data,a);a.player=this.player.parent;
this.dispatcher.dispatchEvent(a)};N.prototype.removeEventListener=function(a,b){this.dispatcher.removeEventListener(a,b)};N.prototype.createProperty=function(a,b,c,d){var e;e=a.createElement("property");e.setAttribute("key",b);null!=d&&d.appendChild(e);if(null!=c)if("object"!==typeof c||c instanceof Array)a=P.createTextContent(a,c.toString()),e.appendChild(a);else for(b in c)d=c[b],this.createProperty(a,b,d,e);return e};N.prototype.listNotificationInterests=function(){return[s.CREATE_FLASH_VARS,s.CREATE_XML]};
N.prototype.handleNotification=function(a){var b;b=a.getName();a=a.getBody();switch(b){case s.CREATE_FLASH_VARS:"function"===typeof this.createFlashVars&&this.createFlashVars(a.flashvars);break;case s.CREATE_XML:"function"===typeof this.createXML&&this.createXML(a.xml)}};var Nc=function(){Nc.__super__.constructor.call(this)};f(Nc,puremvc.SimpleCommand);Nc.prototype.execute=function(a){this.facade.logger.debug("ControlsPlayCommand");this.facade.retrieveProxy(Y.NAME).start()};var Oc=function(){Oc.__super__.constructor.call(this)};
f(Oc,puremvc.SimpleCommand);Oc.prototype.execute=function(a){this.facade.logger.debug("ControlsPauseCommand");this.facade.retrieveProxy(Y.NAME).stop()};var Pc=function(){Pc.__super__.constructor.call(this)};f(Pc,puremvc.SimpleCommand);Pc.prototype.execute=function(a){var b,c;this.facade.logger.debug("ControlsActiveStateChangeCommand");c=this.facade.retrieveProxy(Y.NAME);b=this.facade.app.retrieveProxy(y.NAME);a.getBody().newState===wa.ACTIVE&&b.getPlayState()!==PlayState.READY&&c.start()};var Qc=
function(){Qc.__super__.constructor.call(this)};f(Qc,puremvc.SimpleCommand);Qc.prototype.execute=function(a){this.facade.logger.debug("ControlsAdBreakStartCommand");this.facade.app.getVideo().controls=!1};var Rc=function(){Rc.__super__.constructor.call(this)};f(Rc,puremvc.SimpleCommand);Rc.prototype.execute=function(a){this.facade.logger.debug("ControlsAdBreakEndCommand");this.facade.app.getVideo().controls=!0};var Sc=function(){Sc.__super__.constructor.call(this)};f(Sc,puremvc.SimpleCommand);Sc.prototype.execute=
function(a){this.facade.logger.debug("ControlsChangeMediaCommand");a=a.getBody().poster;null!=a&&""!==a&&(this.facade.app.getVideo().poster=a)};var ea=function(a,b){ea.__super__.constructor.call(this,a,b)};f(ea,N);ea.NAME="ControlsWrapper";ea.prototype.mode="auto";ea.prototype.autoHide=5;ea.prototype.listNotificationInterests=function(){return ea.__super__.listNotificationInterests.apply(this,arguments).concat([e.MEDIUM_CHANGE])};ea.prototype.handleNotification=function(a){var b;ea.__super__.handleNotification.call(this,
a);b=a.getName();a=a.getBody();switch(b){case e.MEDIUM_CHANGE:b=/audio/.test(a)?"persistent":this.mode,this.setMode(b)}};ea.prototype.createFlashVars=function(a){null!=this.config.mode&&(this.mode=a.controls_mode=this.config.mode);return a};ea.prototype.createXML=function(a){var b,c,d,e,f,g;e=a.getElementsByTagName("view")[0];d=a.getElementsByTagName("element");b=null;f=0;for(g=d.length;f<g;f++)if(c=d[f],"controls"===c.getAttribute("id")){b=c;break}null==b&&(b=a.createElement("element"),b.setAttribute("id",
"controls"),e.appendChild(b));null!=b.attributes.autoHideDelay?this.autoHide=b.getAttribute("autoHideDelay"):null!=this.config.autoHide&&(this.autoHide=this.config.autoHide,b.setAttribute("autoHideDelay",this.config.autoHide));return a};ea.prototype.getMode=function(){return this.mode};ea.prototype.setMode=function(a){if(a!==this.mode){try{this.mode=a,this.player.video.setPlayerProperty("controlsMode",a)}catch(b){this.facade.logger.error("Controls Error:",b)}return a}};ea.prototype.getAutoHide=function(){return this.autoHide};
var nb=function(a){nb.__super__.constructor.call(this,this.buttonName,null,null,a)};f(nb,ka);nb.NAME="FullScreenMediator";nb.prototype.buttonName="full-screen";nb.prototype.buttonClickHandler=function(){event.stopImmediatePropagation();this.sendNotification(e.TOGGLE_FULL_SCREEN);return!1};nb.prototype.listNotificationInterests=function(){return[e.DISABLE_FULL_SCREEN,e.ENABLE_FULL_SCREEN]};nb.prototype.handleNotification=function(a){var b;b=a.getName();a.getBody();switch(b){case e.DISABLE_FULL_SCREEN:this.sendNotification(e.ADD_APPLICATION_STATE,
"disable-full-screen");break;case e.ENABLE_FULL_SCREEN:this.sendNotification(e.REMOVE_APPLICATION_STATE,"disable-full-screen")}};var F=function(a){F.__super__.constructor.call(this,F.NAME,a)};f(F,Xa);F.NAME="ProgressMediator";F.prototype.bufferValue=null;F.prototype.progressValue=null;F.prototype.scrubber=null;F.prototype.scrubTime=null;F.prototype.scrubTimeSeparator=null;F.prototype.cuePoints=null;F.prototype.duration=0;F.prototype.scrubbing=!1;F.prototype.value=0;F.prototype.isLive=!1;F.prototype.releaseHandler=
null;F.prototype.dragHandler=null;F.prototype.pressHandler=null;F.prototype.onRegister=function(){var a,b=this;F.__super__.onRegister.call(this);this.classList.add("progress");this.bufferValue=document.createElement("div");this.classList.add("buffer-value",this.bufferValue);this.viewComponent.appendChild(this.bufferValue);this.progressValue=document.createElement("div");this.classList.add("progress-value",this.progressValue);this.viewComponent.appendChild(this.progressValue);a=document.createElement("div");
this.classList.add("seek-bar",a);this.viewComponent.appendChild(a);l.create(a,l.CLICK,function(a){a.stopImmediatePropagation();b.setValue(b.calculateValue(a.clientX));return!1});this.cuePoints=document.createElement("div");this.classList.add("cue-points",this.cuePoints);this.viewComponent.appendChild(this.cuePoints);this.scrubTimeSeparator=document.createElement("div");this.classList.add("scrub-time-separator",this.scrubTimeSeparator);this.viewComponent.appendChild(this.scrubTimeSeparator);this.scrubber=
document.createElement("div");this.classList.add("scrubber",this.scrubber);this.viewComponent.appendChild(this.scrubber);this.pressHandler=l.create(this.scrubber,l.PRESS,function(a){b.dragHandler.bind();b.releaseHandler.bind();b.scrubbing=!0;b.classList.add("scrubbing");a.stopImmediatePropagation();return!1});this.releaseHandler=l.create(window,l.RELEASE,function(a){a.stopImmediatePropagation();b.dragHandler.unbind();b.releaseHandler.unbind();b.setValue(b.value);b.classList.remove("scrubbing");return b.scrubbing=
!1});this.releaseHandler.unbind();this.dragHandler=l.create(window,l.MOVE,function(a){a.stopImmediatePropagation();b.updateValue(b.calculateValue(a.clientX?a.clientX:a.targetTouches[0].screenX));return!1});this.dragHandler.unbind();this.scrubTime=document.createElement("div");this.classList.add("scrub-time",this.scrubTime);this.viewComponent.appendChild(this.scrubTime)};F.prototype.listNotificationInterests=function(){return[e.ENDED,e.MEDIA_CHANGE,e.TIME_UPDATE,e.DURATION_CHANGE,e.PROGRESS,e.ADD_CUE_POINTS,
e.REMOVE_CUE_POINTS]};F.prototype.handleNotification=function(a){var b,c,d,k;b=a.getName();a=a.getBody();switch(b){case e.MEDIA_CHANGE:this.isLive="live"===a.temporalType;this.updateValue(c);this.bufferValue.style.width="0%";break;case e.TIME_UPDATE:this.scrubbing||this.updateValue(a/this.duration);break;case e.PROGRESS:c=h.clamp(100*(a/this.duration),0,100);this.bufferValue.style.width=c+"%";break;case e.DURATION_CHANGE:this.duration=a;break;case e.ENDED:this.updateValue(1);break;case e.ADD_CUE_POINTS:this.removeCuePoints();
d=0;for(k=a.length;d<k;d++)b=a[d],0!==b&&-1!==b&&(c=document.createElement("div"),this.classList.add("cue-point",c),c.style.left=100*(b/this.duration)+"%",this.cuePoints.appendChild(c));break;case e.REMOVE_CUE_POINTS:this.removeCuePoints()}};F.prototype.removeCuePoints=function(){null!=this.cuePoints&&(this.cuePoints.innerHTML="")};F.prototype.setValue=function(a){this.updateValue(a);this.sendNotification(M.SEEK,a*this.duration)};F.prototype.updateValue=function(a){!0===this.isLive&&(a=1);this.value=
h.clamp(a,0,1);!0===this.scrubbing&&(this.scrubTime.textContent=h.formatTimecode(this.value*this.duration));this.progressValue.style.width=this.scrubber.style.left=this.scrubTime.style.left=this.scrubTimeSeparator.style.left=""+(100*this.value).toFixed(2)+"%"};F.prototype.calculateValue=function(a){return h.clamp((a-h.getElementOffset(this.viewComponent).left)/this.viewComponent.offsetWidth,0,1)};var ia=function(a){ia.__super__.constructor.call(this,ia.NAME,a)};f(ia,na);ia.NAME="TimeDisplayMediator";
ia.prototype.currentTimeText=null;ia.prototype.currentTime=0;ia.prototype.separator=null;ia.prototype.durationText=null;ia.prototype.duration=null;ia.prototype.onRegister=function(){var a;ia.__super__.onRegister.call(this);this.classList.add("time-display");a=document.createElement("div");this.classList.add("live-display",a);a.textContent=this.localizationManager.getString(r.MSG_LIVE);this.viewComponent.appendChild(a);this.currentTimeText=document.createElement("div");this.classList.add("current-time-display",
this.currentTimeText);this.currentTimeText.textContent="00:00";this.viewComponent.appendChild(this.currentTimeText);this.separator=document.createElement("div");this.classList.add("separator-display",this.separator);this.separator.textContent=" / ";this.viewComponent.appendChild(this.separator);this.durationText=document.createElement("div");this.classList.add("duration-display",this.durationText);this.durationText.textContent="00:00";this.viewComponent.appendChild(this.durationText)};ia.prototype.listNotificationInterests=
function(){return[e.TIME_UPDATE,e.DURATION_CHANGE,e.ENDED]};ia.prototype.handleNotification=function(a){this.facade.retrieveProxy(m.NAME);switch(a.getName()){case e.TIME_UPDATE:this.currentTime=a.getBody();this.currentTimeText.textContent=h.formatTimecode(this.currentTime,this.duration);break;case e.DURATION_CHANGE:this.duration=a.getBody();this.currentTimeText.textContent=h.formatTimecode(this.currentTime,this.duration);this.durationText.textContent=h.formatTimecode(this.duration);break;case e.ENDED:this.currentTimeText.textContent=
this.durationText.textContent=h.formatTimecode(this.duration)}};var Mb=function(a){Mb.__super__.constructor.call(this,this.buttonName,null,null,a)};f(Mb,ka);Mb.NAME="PlayPauseMediator";Mb.prototype.buttonName="play-pause";Mb.prototype.buttonClickHandler=function(a){a.stopImmediatePropagation();this.sendNotification(M.TOGGLE_PLAY_PAUSE);return!1};var B=function(){B.__super__.constructor.call(this)};f(B,Aa);B.UNINITIALIZED=0;B.LOADING=1;B.LOADED=2;B.AMP_DEFAULTS="amp-defaults";B.getConfigURL=function(){var a;
a=h.getAMPScriptTag();return null!=a&&(a=a.src,-1!==a.indexOf("?")&&(a=mb.decode(a),null!=a[this.AMP_DEFAULTS]))?a[this.AMP_DEFAULTS]:null};B.parseModule=function(a){var b,c,d,e;c={};a=a.childNodes;d=0;for(e=a.length;d<e;d++)b=a[d],1===(null!=b?b.nodeType:void 0)&&(c[b.nodeName]=this.parseItem(b));return c};B.parseItem=function(a){var b,c,d,e;b=(""+a.getAttribute("type")).toLowerCase();c=a.textContent||a.text||a.innerText;if("object"!==b&&"array"!==b&&/#\{.*\}/.test(c))return c;switch(b){case "object":c=
this.parseModule(a);break;case "array":c=[];b=a.childNodes;d=0;for(e=b.length;d<e;d++)a=b[d],1===a.nodeType&&c.push(this.parseItem(a));break;case "boolean":c="true"===c.toLowerCase();break;case "number":c=parseFloat(c)}return c};B.loadHead=function(a,b){var c,d,e,f,g,n,l,m,q,p,r;e=h.getAMPParent();n=function(a){var b;b=document.createElement("script");b.type="text/javascript";b.src=a;b.addEventListener?b.addEventListener("load",m,!1):b.readyState&&(b.onreadystatechange=m);e.appendChild(b)};m=function(){l++;
return l<c?n(q[l]):"function"===typeof b?b():void 0};if(null!=a.links&&0<a.links.length)for(g=a.links,p=0,r=g.length;p<r;p++)f=g[p],d=document.createElement("link"),d.rel="stylesheet",d.type="text/css",d.href=f,e.appendChild(d);null!=a.scripts&&0<a.scripts.length?(q=a.scripts,l=-1,c=q.length,m()):"function"===typeof b&&b()};B.prototype.url=null;B.prototype.data=null;B.prototype.xml=null;B.prototype.readyState=B.UNINITIALIZED;B.prototype.loaded=!1;B.prototype.loadURL=function(a,b){var c=this;null==
b&&(b=!1);if(null==a&&(a=B.getConfigURL(),null==a))return;this.url=a;this.setReadyState(B.LOADING);h.get(a,{withCredentials:b,onload:function(a){a=a.data;"document"===a.responseType?(c.xml=a.responseXML,a=7!==c.xml.firstChild.nodeType?c.xml.firstChild:c.xml.childNodes[1],a=B.parseModule(a)):a=a.response;c.loadModule(a)},onerror:function(a){c.dispatchEvent(new ba("error",a));H.error(a)}})};B.prototype.loadModule=function(a){var b=this;null!=a.head?B.loadHead(a.head,function(){b.loadData(a.config)}):
this.loadData(a.config)};B.prototype.loadData=function(a){this.data=a;this.setReadyState(B.LOADED)};B.prototype.load=function(a,b){null==b&&(b=!1);"object"===typeof a?this.loadModule(a):null!=a&&"string"!==typeof a||this.loadURL(a,b)};B.prototype.setReadyState=function(a){this.readyState=a;this.dispatchEvent(new ba("readystatechange",a));a!==B.LOADED||this.loaded||(this.loaded=!0,this.dispatchEvent(new ba("load",this.data)))};var Qa=function(a){Qa.__super__.constructor.call(this,Qa.NAME,a)};f(Qa,
Ma);Qa.NAME="ControlsMediator";Qa.prototype.controlPanel=null;Qa.prototype.onRegister=function(){var a,b;Qa.__super__.onRegister.call(this);this.classList.add("controls-layer");a=document.createElement("div");this.viewComponent.appendChild(a);this.facade.registerMediator(new Mb(a));a=document.createElement("div");this.viewComponent.appendChild(a);this.facade.registerMediator(new ia(a));b=document.createElement("div");this.classList.add("progress-area",b);this.viewComponent.appendChild(b);a=document.createElement("div");
b.appendChild(a);this.facade.registerMediator(new F(a));a=document.createElement("div");this.classList.add("separator",a);this.viewComponent.appendChild(a)};Qa.prototype.listNotificationInterests=function(){return[e.READY,e.ADD_CONTROL,e.REMOVE_CONTROL,"controlpanelvisibilitychange"]};Qa.prototype.handleNotification=function(a){var b,c,d;c=a.getName();b=a.getBody();switch(c){case e.READY:!1!==(null!=(d=b.fullscreen)?d.enabled:void 0)&&(b=document.createElement("div"),this.viewComponent.appendChild(b),
this.facade.registerMediator(new nb(b)));break;case e.ADD_CONTROL:this.viewComponent.appendChild(b);break;case e.REMOVE_CONTROL:this.viewComponent.appendChild(b);break;case "controlpanelvisibilitychange":a=puremvc.Facade.getInstance(a.getType()),!0===b?(null!=this.controlPanel&&this.controlPanel!==a&&this.controlPanel.sendNotification("controlpanelchangevisibility",!1),this.controlPanel=a):this.controlPanel===a&&(this.controlPanel=null)}};var yb=function(a){yb.__super__.constructor.call(this,a);a=
a.retrieveProxy(Y.NAME);this.setMode=a.setMode.bind(a);this.getMode=a.getMode.bind(a);this.setAutoHide=a.setAutoHide.bind(a);this.getAutoHide=a.getAutoHide.bind(a)};f(yb,ub);yb.prototype.setMode=function(a){};yb.prototype.getMode=function(){};yb.prototype.setAutoHide=function(a){};yb.prototype.getAutoHide=function(){};var v=function(a,b,c){var d,e,f,g,n=this;"string"===typeof a&&(a=document.getElementById(a));d=f=null;e=new Aa(this);this.addEventListener=function(a,b,c){e.addEventListener(a,b,c)};
this.dispatchEvent=function(a){a.player=this;e.dispatchEvent(a)};this.removeEventListener=function(a,b,c){e.removeEventListener(a,b,c)};null!=c&&this.addEventListener("ready",c);g=function(){var c,g,l;null!=v.defaults.data&&(b=h.override(v.defaults.data,b));n.version=n.getVersion();b.mode=h.getPlaybackMode(b.mode);null==b.version&&(b.version=n.version);null==a.dataset&&(a.dataset={});a.dataset.version=n.version;H.log(n.version);switch(b.mode){case "html":f=n.createHTMLPlayer(b,a,e);break;case "flash":f=
n.createFlashPlayer(b,a,e);break;case "external":f=n.createExternalPlayer(b,a,e);break;case "none":f=n.createInstallPlayer(a)}f.parent=n;d="function"===typeof f.getAPI?f.getAPI():void 0;if(null!=d)for(g in d)c=d[g],null==n[g]&&(n[g]=c);l=f.getModules();for(g in l)c=l[g],d="function"===typeof c.getAPI?c.getAPI():void 0,n[g]=d||c,c="function"===typeof c.getFeatureName?c.getFeatureName():void 0,null!=c&&(n[c]=n[g]);try{a.amp=n}catch(m){H.error(m)}};this.getVersion=function(){return v.VERSION};H.enable(null!=
(null!=b?b.debug:void 0)?b.debug:null);(function(){var a;"string"===typeof b&&(a=h.get(b),b=JSON.parse(a.responseText));v.defaults.readyState!==B.LOADED?(null!=B.getConfigURL()&&v.defaults.readyState===B.UNINITIALIZED&&v.loadDefaults(),v.defaults.addEventListener("load",function(a){g()})):g()})()};v.prototype.createFlashPlayer=function(a,b,c){return new p(a,b,c)};v.prototype.createHTMLPlayer=function(a,b,c){return new $a(a,b,c)};v.prototype.createExternalPlayer=function(a,b,c){return new lb(a,b,c)};
v.prototype.createInstallPlayer=function(a){return new jd(a)};v.VERSION="AMP v4.0.0019";v.defaults=new B;v.plugins=[];v.loadDefaults=function(a,b){null==b&&(b=!1);this.defaults.load(a,b)};v.getPlaybackMode=function(){return h.getPlaybackMode()};v.registerPlugin=function(a,b,c){var d;null==(d=this.plugins)[a]&&(d[a]={});this.plugins[a][b]=c};var ic=function(){return ic.__super__.constructor.apply(this,arguments)};f(ic,N);ic.NAME="PlayOverlayWrapper";ic.prototype.createFlashVars=function(a){a.show_play_button_overlay=
null!=this.config.enabled?this.config.enabled:!0;return a};v.registerPlugin("playoverlay","flash",ic);var zb=function(a){zb.__super__.constructor.call(this,zb.NAME,a)};f(zb,ha);zb.NAME="PlayOverlayMediator";zb.prototype.onRegister=function(){var a=this;l.create(this.viewComponent,l.CLICK,function(b){b.stopImmediatePropagation();b.preventDefault();a.sendNotification(M.TOGGLE_PLAY_PAUSE);return!1});this.classList.add("play-overlay");return zb.__super__.onRegister.call(this)};var fa=function(a,b){fa.__super__.constructor.call(this,
a,b)};f(fa,X);fa.NAME="ControlsPlugin";fa.prototype.moduleName="controls";fa.prototype.initialize=function(){!0===this.config["native"]?(this.app.getVideo().controls=!0,this.app.sendNotification(e.ADD_APPLICATION_STATE,"controls-native"),this.registerCommand(e.CHANGE_MEDIA,Sc),this.registerCommand("adbreakstart",Qc),this.registerCommand("adbreakend",Rc),this.createAPI=this.createView=function(){}):fa.__super__.initialize.call(this)};fa.prototype.createController=function(){this.registerCommand(e.PLAY,
Nc);this.registerCommand(e.PAUSE,Oc);this.registerCommand(e.ACTIVE_STATE_CHANGE,Pc)};fa.prototype.createModel=function(){this.registerProxy(new Y(this.config))};fa.prototype.createAPI=function(){return new yb(this)};fa.prototype.createView=function(){this.registerMediator(new Qa)};fa.prototype.listNotificationInterests=function(){return[e.MEDIA_CHANGE,e.TIME_UPDATE,e.DURATION_CHANGE,e.PROGRESS,e.ENDED,e.ADD_CUE_POINTS,e.REMOVE_CUE_POINTS,e.DISABLE_FULL_SCREEN,e.ENABLE_FULL_SCREEN,e.READY,e.ADD_CONTROL,
e.REMOVE_CONTROL,e.ACTIVE_STATE_CHANGE,e.PLAY,e.PAUSE,"adbreakstart","adbreakend",e.CHANGE_MEDIA,"controlpanelvisibilitychange"]};fa.prototype.listNotificationPublications=function(){return fa.__super__.listNotificationPublications.call(this).concat([e.CHANGE_ACTIVE_STATE,e.TOGGLE_FULL_SCREEN,M.TOGGLE_PLAY_PAUSE,M.SEEK])};v.registerPlugin("controls","html",fa);v.registerPlugin("controls","flash",ea);v.registerPlugin("controls","external",fa);var J=function(a,b,c,d){this.url=a;this.interval=null!=
b?b:1E4;this.type=null!=c?c:null;this.headers=null!=d?d:null;J.__super__.constructor.call(this)};f(J,Aa);J.prototype.timeout=null;J.prototype.interval=null;J.prototype.url=null;J.prototype.lastModified=null;J.prototype.contentLenght=null;J.prototype.data=null;J.prototype.text=null;J.prototype.type=null;J.prototype.headers=null;J.prototype.useHeadRequest=!0;J.prototype.xhr=null;J.prototype.start=function(){null!=this.url&&""!==this.url&&this.poll()};J.prototype.poll=function(){var a,b=this;a=h.getXHR();
this.useHeadRequest?(a.onload=function(c){var d;304===a.status?b.invoke():(d=a.getResponseHeader("Last-Modified"),c=a.getResponseHeader("Content-Length"),null==d&&null==c||null!=d&&d!==b.lastModified||null!=c&&c!==b.contentLength?(b.lastModified=d,b.contentLength=c,b.updateData()):b.invoke())},a.onerror=function(a){b.error(a)},a.open("HEAD",h.cacheBust(this.url),!1),this.applyHeaders(),null!=this.lastModified&&a.setRequestHeader("If-Modified-Since",this.lastModified),a.send()):this.updateData()};
J.prototype.applyHeaders=function(){null!=this.headers&&this.xhr.setRequestHeaders(this.headers)};J.prototype.updateData=function(){var a,b=this;a=h.getXHR();a.open("GET",h.cacheBust(this.url),!0);a.onload=function(c){b.setText(a.responseText);b.invoke()};a.onerror=function(a){b.error(a)};this.applyHeaders();return a.send()};J.prototype.setText=function(a){var b;if(a!==this.text){b=this.text=a;if(this.type===h.mimeTypes.json)try{b=this.xhr.response}catch(c){b=this.text}this.setData(b)}return a};J.prototype.setData=
function(a){a!==this.data&&(this.data=a,this.dispatchEvent(new ba("datachanged",this.data)));return a};J.prototype.error=function(a){H.error(event);this.stop()};J.prototype.invoke=function(){var a=this;this.stop();this.timeout=setTimeout(function(){a.poll()},this.interval)};J.prototype.stop=function(){clearTimeout(this.timeout)};var Nb=function(){return Nb.__super__.constructor.apply(this,arguments)};f(Nb,N);Nb.NAME="EventManagementWrapper";Nb.prototype.createFlashVars=function(a){null!=this.config.enabled&&
(a.eventmanagementstates_enabled=this.config.enabled);null!=this.config.url&&(a.eventmanagementstates_status_url=this.config.url);null!=this.config.interval&&(a.eventmanagementstates_status_interval=this.config.interval);return a};Nb.prototype.createXML=function(a){var b,c,d,e,f,g,n;b=a.getElementsByTagName("application")[0];c=a.getElementsByTagName("eventmanagementstates");null==c||0===c.length?(c=a.createElement("eventmanagementstates"),b.appendChild(c)):c=c[0];b=a.createElement("states");c.appendChild(b);
n=this.config.states;f=0;for(g=n.length;f<g;f++)e=n[f],c=a.createElement("state"),b.appendChild(c),d=a.createElement("property"),d.setAttribute("key","ID"),d.appendChild(P.createTextContent(a,e.id)),c.appendChild(d),d=a.createElement("property"),d.setAttribute("key","POSTER_SRC"),d.appendChild(P.createTextContent(a,e.poster)),c.appendChild(d),null!=e.url&&(d=a.createElement("property"),d.setAttribute("key","URL"),d.appendChild(P.createTextContent(a,e.url)),c.appendChild(d));return a};var Ra=function(a){Ra.__super__.constructor.call(this,
Ra.NAME,a)};f(Ra,ha);Ra.NAME="EventManagementMediator";Ra.prototype.poster=null;Ra.prototype.onRegister=function(){this.classList.add("event-management");this.classList.add("hidden");this.poster=document.createElement("img");this.classList.add("event-poster",this.poster);Ra.__super__.onRegister.call(this)};Ra.prototype.listNotificationInterests=function(){return["eventStateChanged"]};Ra.prototype.handleNotification=function(a){switch(a.getName()){case "eventStateChanged":a=a.getBody(),"on"!==a.id?
(null!=a.poster&&(this.poster.src=a.poster,this.viewComponent.appendChild(this.poster)),this.classList.remove("hidden"),this.sendNotification(e.PAUSE),this.sendNotification(e.CHANGE_DISPLAY_STATE,aa.NORMAL)):(this.viewComponent.contains(this.poster)&&this.viewComponent.removeChild(this.poster),this.classList.add("hidden"))}};var Tc=function(){Tc.__super__.constructor.call(this)};f(Tc,puremvc.SimpleCommand);Tc.prototype.execute=function(a){var b;this.facade.logger.debug("EventManagementPlayCommand");
(null!=(b=this.facade.retrieveProxy(W.NAME).getState())?b.id:void 0)!==W.ON.id&&this.sendNotification(e.PAUSE)};var W=function(a){var b=this;W.__super__.constructor.call(this,a);this.poller=new J;this.poller.ondatachanged=function(a){var d,e,f,g;a=a.data;if("on"===a)d=W.ON;else for(g=b.data.states,e=0,f=g.length;e<f&&(d=g[e],d.id!==a);e++);if(null!=d)return b.setState(d)}};f(W,C);W.NAME=C.NAME;W.ON={id:"on"};W.prototype.defaults={url:null,interval:null,states:null,enabled:!1};W.prototype.poller=null;
W.prototype.state=null;W.prototype.initialize=function(){!0===this.data.enabled&&(this.setURL(this.data.url),this.setInterval(this.data.interval),this.poller.start())};W.prototype.setURL=function(a){return this.data.url=this.poller.url=a};W.prototype.getURL=function(){return this.data.url};W.prototype.getInterval=function(){return this.data.interval};W.prototype.setInterval=function(a){this.data.interval=this.poller.interval=1E3*a;return a};W.prototype.setState=function(a){this.state=a;this.sendNotification("eventStateChanged",
a);return a};W.prototype.getState=function(){return this.state};var la=function(a){la.__super__.constructor.call(this,a)};f(la,K);la.NAME=C.NAME;la.prototype.defaults={config:null,dimensions:null,plugin:{js:"http://79423.analytics.edgesuite.net/html5/akamaihtml5-min.js"}};la.prototype.initialize=function(){try{window.akamaiSetVideoObject(this.facade.app.getVideo())}catch(a){this.facade.logger.error("[AMP MEDIA ANALYTICS ERROR]","Could not set video tag",a)}};la.prototype.setDimensions=function(a){var b,
c,d;b=this.configurationData.source.dimensions;for(c in a)d=a[c],null!=d&&(b[c]=d);this.configurationData.parse(this.configurationData.source);this.applyDimensions(b);return a};la.prototype.applyDimensions=function(a){var b,c;if(null!=window.setAkamaiMediaAnalyticsData)try{for(b in a)c=a[b],setAkamaiMediaAnalyticsData(b,c)}catch(d){this.facade.logger.error("[AMP MEDIA ANALYTICS ERROR]","Could not set dimensions:",d)}};la.prototype.setMedia=function(a){var b,c;b=null!=(null!=(c=a.mediaanalytics)?c.dimensions:
void 0)?h.override(this.value.dimensions,a.mediaanalytics.dimensions):this.value.dimensions;this.applyDimensions(b);return a};var Sa=function(a,b){Sa.__super__.constructor.call(this,a,b)};f(Sa,X);Sa.NAME="PlayOverlayPlugin";Sa.prototype.moduleName="playoverlay";Sa.prototype.createModel=function(){};Sa.prototype.createView=function(){this.registerMediator(new zb)};Sa.prototype.listNotificationPublications=function(){return Sa.__super__.listNotificationPublications.call(this).concat([M.TOGGLE_PLAY_PAUSE])};
v.registerPlugin("playoverlay","html",Sa);v.registerPlugin("playoverlay","external",Sa);var Da=function(a,b){Da.__super__.constructor.call(this,a,b)};f(Da,N);Da.NAME="MediaAnalyticsWrapper";Da.prototype.listNotificationInterests=function(){return Da.__super__.listNotificationInterests.call(this).concat([e.MEDIA_CHANGE,"mediaanalytics:setDimensions"])};Da.prototype.createFlashVars=function(a){var b,c,d,e;b=null!=(d=this.player.config)?null!=(e=d.media)?e.mediaanalytics:void 0:void 0;if(null!=b)for(c in b)d=
b[c],a["report_"+c]=d;return a};Da.prototype.createXML=function(a){var b,c,d,e,f;b=a.getElementsByTagName("application")[0];d=a.getElementsByTagName("metrics")[0];null==d&&(d=a.createElement("metrics"),b.appendChild(d));b=a.createElement("vendor");b.setAttribute("id","akamai");d.appendChild(b);null!=this.config.config&&(d=a.createElement("property"),d.setAttribute("key","MEDIA_ANALYTICS_BEACON"),d.appendChild(P.createTextContent(a,this.config.config)),b.appendChild(d),f=(null!=(c=this.config.plugin)?
c.swf:void 0)||"http://79423.analytics.edgesuite.net/csma/plugin/csma.swf",d=a.createElement("property"),d.setAttribute("key","MEDIA_ANALYTICS_PLUGIN_PATH"),d.appendChild(P.createTextContent(a,f)),b.appendChild(d));if(null!=this.config.dimensions)for(e in c=a.createElement("property"),c.setAttribute("key","dimensions"),b.appendChild(c),f=this.config.dimensions,f)b=f[e],d=a.createElement("property"),d.setAttribute("key",e),d.appendChild(P.createTextContent(a,b)),c.appendChild(d);return a};Da.prototype.handleNotification=
function(a){var b,c,d;Da.__super__.handleNotification.call(this,a);c=a.getName();a=a.getBody();switch(c){case e.MEDIA_CHANGE:if(null!=(null!=(d=a.mediaanalytics)?d.dimensions:void 0))for(b in a.dimensions=[],d=a.mediaanalytics.dimensions,d)c=d[b],a.dimensions.push({key:b,value:c});break;case "mediaanalytics:setDimensions":this.setDimensions(a)}};Da.prototype.setDimensions=function(a){this.player.video.setPlayerProperty("maDimensions",a);return a};var Uc=function(){Uc.__super__.constructor.call(this)};
f(Uc,puremvc.SimpleCommand);Uc.prototype.execute=function(a){this.facade.logger.debug("MediaAnalyticsChangeMediaCommand");a=a.getBody();this.facade.retrieveProxy(la.NAME).setMedia(a)};var Vc=function(){Vc.__super__.constructor.call(this)};f(Vc,puremvc.SimpleCommand);Vc.prototype.execute=function(a){this.facade.logger.debug("MediaAnalyticsAdBreakStartCommand");this.facade.app.getVideo().dataset.isad=!0};var Wc=function(){Wc.__super__.constructor.call(this)};f(Wc,puremvc.SimpleCommand);Wc.prototype.execute=
function(a){this.facade.logger.debug("MediaAnalyticsAdBreakEndCommand");this.facade.app.getVideo().dataset.isad=!1};var Xc=function(){Xc.__super__.constructor.call(this)};f(Xc,puremvc.SimpleCommand);Xc.prototype.execute=function(a){var b,c;this.facade.logger.debug("MediaAnalyticsAdLoadedCommand");try{c=a.getBody(),b={adDuration:c.duration,adPartnerId:c.partner,adTitle:c.title,adId:c.id},"function"===typeof akamaiHandleAdLoaded&&akamaiHandleAdLoaded(b)}catch(d){this.facade.logger.error("[AMP MEDIA ANALYTICS ERROR]",
d)}};var Yc=function(){Yc.__super__.constructor.call(this)};f(Yc,puremvc.SimpleCommand);Yc.prototype.execute=function(a){this.facade.logger.debug("MediaAnalyticsAdStartCommand");try{"function"===typeof akamaiHandleAdStarted&&akamaiHandleAdStarted()}catch(b){this.facade.logger.error("[AMP MEDIA ANALYTICS ERROR]",b)}};var Zc=function(){Zc.__super__.constructor.call(this)};f(Zc,puremvc.SimpleCommand);Zc.prototype.execute=function(a){var b;a=a.getBody();a=Math.round(100*(a.currentTime/a.duration));b=
this.facade.retrieveProxy(la.NAME);try{25<=a&&25>b.percent?(this.facade.logger.debug("MediaAnalytics: First Quartile"),"function"===typeof akamaiHandleAdFirstQuartile&&akamaiHandleAdFirstQuartile()):50<=a&&50>b.percent?(this.facade.logger.debug("MediaAnalytics: Second Quartile"),"function"===typeof akamaiHandleAdMidpoint&&akamaiHandleAdMidpoint()):75<=a&&75>b.percent&&(this.facade.logger.debug("MediaAnalytics: Third Quartile"),"function"===typeof akamaiHandleAdThirdQuartile&&akamaiHandleAdThirdQuartile())}catch(c){this.facade.logger.error("[AMP MEDIA ANALYTICS ERROR]",
c)}b.percent=a};var $c=function(){$c.__super__.constructor.call(this)};f($c,puremvc.SimpleCommand);$c.prototype.execute=function(a){this.facade.logger.debug("MediaAnalyticsAdEndCommand");try{"function"===typeof akamaiHandleAdCompleted&&akamaiHandleAdCompleted()}catch(b){this.facade.logger.error("[AMP MEDIA ANALYTICS ERROR]",b)}this.facade.app.getVideo().dataset.isad=!0};var ad=function(){ad.__super__.constructor.call(this)};f(ad,puremvc.SimpleCommand);ad.prototype.execute=function(a){this.facade.logger.debug("MediaAnalyticsSetDimensionsCommand");
a=a.getBody();this.facade.retrieveProxy(la.NAME).setDimensions(a)};var bb=function(a,b,c){this.startTime=a;this.endTime=b;this.id=c};bb.prototype.id=null;bb.prototype.startTime=null;bb.prototype.endTime=null;bb.prototype.text=null;bb.prototype.html=null;bb.prototype.align=null;var bd=function(a){bd.__super__.constructor.call(this,a);this.setDimensions=function(b){a.retrieveProxy(la.NAME).setDimensions(b);return b}};f(bd,ub);bd.prototype.setDimensions=function(a){};var md=function(){};md.prototype.parse=
function(a,b){var c,d,e,f,g,n,l,m,p;b=b.replace(/\r/g,"");d=b.split("\n\n");m=0;for(p=d.length;m<p;m++){c=d[m];c=c.split("\n");try{f=c[0],l=c[1].match(/([0-9:\,]+)\s*--\x3e\s*([0-9:\,]+)/).slice(1),g=h.flattenTimecode(l[0]),e=h.flattenTimecode(l[1]),n=c.slice(2)}catch(q){H.warn("SRT Parsing Warning")}c=new bb(g,e,"cue_"+f);c.html="\x3cp\x3e"+n.join("\x3cbr /\x3e")+"\x3c/p\x3e";c.text=n.join("\n");a.cues.push(c)}return a};var nd=function(){};nd.prototype.parse=function(a,b){var c,d;Array.prototype.slice.call(b.querySelectorAll("styling style")).forEach(function(b,
c,d){var e;e="";c=b.getAttribute("id")||b.getAttribute("xml:id");Array.prototype.slice.call(b.attributes).forEach(function(a,b,c){if("tts"===a.prefix)return e+=h.formatStyleName(a.localName)+":"+a.nodeValue+";"});a.styles[c]=e});Array.prototype.slice.call(b.querySelectorAll("body [style]")).forEach(function(b,c,d){c=b.getAttribute("style");b.setAttribute("style",a.styles[c])});d=b.querySelector("tt");d=d.getAttribute("lang")||d.getAttribute("xml:lang");if(void 0===a.language||null===a.language)a.language=
d;c=Array.prototype.slice.call(b.querySelectorAll("body p[begin]"));c.forEach(function(b,d,e){var f;e=b.getAttribute("begin");b.removeAttribute("begin");null!=b.getAttribute("end")?(f=b.getAttribute("end"),b.removeAttribute("end")):null!=c[d+1]&&(f=c[d+1].getAttribute("begin"));d=new bb(h.flattenTimecode(e),h.flattenTimecode(f),"cue_"+d);f=b.getAttributeNS("http://www.w3.org/ns/ttml#styling","textAlign");null!=f&&(d.align="center"===f?"middle":f,b.removeAttributeNS("http://www.w3.org/ns/ttml#styling",
"textAlign"));b=P.serialize(b);b=b.replace(/\s*xmlns="[^"]*"/,"");d.html=b;b=b.replace(/^<p[^>]*>/,"");b=b.replace(/<\/p>$/,"");b=b.replace(/<br\/>/,"\n");b=b.replace(/<span style="([^"]*)"/,"\x3cc.$1");b=b.replace(/<\/span>/,"\x3c/c\x3e");d.text=b;a.cues.push(d)});return a};var ra=function(a,b){ra.__super__.constructor.call(this,a,b)};f(ra,X);ra.NAME="EventManagementPlugin";ra.prototype.moduleName="eventmanagement";ra.prototype.createModel=function(){this.registerProxy(new W(this.config))};ra.prototype.createController=
function(){this.registerCommand(e.PLAY,Tc)};ra.prototype.createView=function(){this.registerMediator(new Ra)};ra.prototype.listNotificationInterests=function(){return[e.PLAY]};ra.prototype.listNotificationPublications=function(){return ra.__super__.listNotificationPublications.call(this).concat([e.CHANGE_DISPLAY_STATE,e.PAUSE,"eventStateChanged"])};ra.prototype.listNotificationEvents=function(){return["eventStateChanged"]};v.registerPlugin("eventmanagement","html",ra);v.registerPlugin("eventmanagement",
"flash",Nb);var cb=function(a,b){cb.__super__.constructor.call(this,a,b)};f(cb,N);cb.NAME="CaptioningWrapper";cb.prototype.hidden=!0;cb.prototype.listNotificationInterests=function(){return[s.CREATE_FLASH_VARS,s.CREATE_XML,e.MEDIA_CHANGE,s.CAPTIONING_REQUEST,s.CAPTION_LANG_CHANGE]};cb.prototype.handleNotification=function(a){var b,c,d,f;c=a.getName();a=a.getBody();switch(c){case s.CAPTION_LANG_CHANGE:f="";break;case s.CAPTIONING_REQUEST:this.setHidden(!this.getHidden());f="visibilitychange";a=a.enabled;
break;case s.CREATE_XML:c=a.xml;d=null!=(b=this.config.flash)?b.subply:void 0;null!=d&&(null!=d.timeMethod&&(b=c.getElementsByTagName("player")[0],b.setAttribute("subply_time_method",d.timeMethod)),null!=d.plugin&&(b=c.getElementsByTagName("application")[0],d=c.getElementsByTagName("subply")[0],null==d&&(d=c.createElement("subply"),b.appendChild(d)),this.createProperty(c,"SUBPLY_URL",this.config.flash.subply.plugin,d)));break;case s.CREATE_FLASH_VARS:b=a.flashvars;c=a.config;null!=(null!=(d=c.media)?
d.track:void 0)&&(d=h.selectTrack(c.media.track,"captions"),null!=d.src&&""!==d.src&&(b.caption_url=d.src),b.caption_type=null!=d.type?encodeURIComponent(d.type):"application/ttml+xml");break;case e.MEDIA_CHANGE:b=a,null!=b.track&&(d=h.selectTrack(b.track,"captions"),null!=(null!=d?d.src:void 0)&&""!==d.src&&(b.captioningUrl=d.src),b.captioningType=d.type||"application/ttml+xml")}null!=f&&this.dispatchEvent(new ba(f,a))};cb.prototype.getHidden=function(){return this.hidden};cb.prototype.setHidden=
function(a){return this.hidden=a};v.registerPlugin("captioning","flash",cb);var Ab=function(a,b){Ab.__super__.constructor.call(this,a,b)};f(Ab,ha);Ab.NAME="PluginMediator";Ab.prototype.initializeNotifier=function(a){Ab.__super__.initializeNotifier.call(this,a);this.plugin=this.facade.retrieveProxy(C.NAME);this.media=this.facade.app.retrieveProxy(m.NAME)};var G=function(a){G.__super__.constructor.call(this,G.NAME,a)};f(G,na);G.NAME="CaptioningHTMLMediator";G.prototype.captioningObject={"default":{fontFamily:"Arial",
size:"1.3em",fontColor:"rgba(255,255,255,1)",edgeType:null,edgeColor:"rgba(0, 0, 0, 0)",backgroundColor:"rgba(0,0,0,0)",windowColor:"rgba(0,0,0,0.5)"},appliedStyleText:"",selected:{fontFamily:null,size:null,fontColor:null,edgeType:null,edgeColor:null,backgroundColor:null,windowColor:null},preset1:{fontFamily:"Arial,sans-serif",size:"1.3em",fontColor:"rgba(255,255,255,1)",edgeType:null,edgeColor:"rgba(0, 0, 0, 0)",backgroundColor:"rgba(0,0,0,0)",windowColor:"rgba(0,0,0,0)"},preset2:{fontFamily:"Arial,sans-serif",
size:"1.3em",fontColor:"rgba(255,255,0,1)",edgeType:null,edgeColor:"rgba(0, 0, 0, 0)",backgroundColor:"rgba(0,0,0,0)",windowColor:"rgba(0,0,0,0)"},preset3:{fontFamily:"Arial,sans-serif",size:"1.3em",fontColor:"rgba(255,255,255,1)",edgeType:null,edgeColor:"rgba(0, 0, 0, 0)",backgroundColor:"rgba(0,0,0,1)",windowColor:"rgba(0,0,0,0)"},preset4:{fontFamily:"Arial,sans-serif",size:"1.3em",fontColor:"rgba(255,255,0,1)",edgeType:null,edgeColor:"rgba(0, 0, 0, 1)",backgroundColor:"rgba(0,0,0,0)",windowColor:"rgba(0,0,0,0.5)"},
instance:null};G.prototype.captionText=null;G.prototype.settingsUiVisible=!1;G.prototype.captionningStyle=null;G.prototype.swatchColorCurr=null;G.prototype.swatchOpacityCurr=null;G.prototype.colorPicker=null;G.prototype.colorPickerOpacity=null;G.prototype.advancedSettingContainer=null;G.prototype.list={font:null,language:null,edge:null,size:null,scroll:null};G.prototype.picker={color:null,background:null,edge:null,window:null};G.prototype.toggle={ON:null,OFF:null,disabled:!1};G.prototype.onRegister=
function(){var a,b,c,d,e,f,g=this;this.captionText=document.createElement("div");this.classList.add("caption-text",this.captionText);this.viewComponent.appendChild(this.captionText);d=document.createElement("div");this.classList.add("captioning-settings",d);c=document.createElement("div");this.classList.add("captioning-titlebar",c);a=document.createElement("span");this.classList.add("captioning-title",a);a.innerHTML=this.localizationManager.getString(r.MSG_CC_TITLE);c.appendChild(a);this.toggle.ON=
document.createElement("button");this.classList.add("captioning-toggle-btn",this.toggle.ON);this.toggle.ON.innerHTML="ON";l.create(this.toggle.ON,l.CLICK,function(a){a.stopImmediatePropagation();g.toggle.disabled||g.toggleButtonHandler(!0);return!1});this.toggle.OFF=document.createElement("button");this.classList.add("captioning-toggle-btn",this.toggle.OFF);this.toggle.disabled||this.classList.add("captioning-floater-btnselected",this.toggle.OFF);this.toggle.OFF.innerHTML="OFF";l.create(this.toggle.OFF,
l.CLICK,function(a){a.stopImmediatePropagation();g.toggle.disabled||g.toggleButtonHandler(!1);return!1});c.appendChild(this.toggle.OFF);c.appendChild(this.toggle.ON);d.appendChild(c);c=document.createElement("div");this.classList.add("captioning-row",c);a=document.createElement("span");this.classList.add("captioning-label",a);a.innerHTML=this.localizationManager.getString(r.MSG_CC_LANGUAGE);c.appendChild(a);this.list.language=document.createElement("select");this.classList.add("captioning-dropdown",
this.list.language);this.languageListPopulate();l.create(this.list.language,"change",function(a){var b;a.stopImmediatePropagation();b="None"!==a.target.selectedValue;g.sendNotification(u.VISIBILITY_CHANGE,b);b&&g.facade.moduleAPI.setTrack(g.facade.moduleAPI.selectTrackByIndex(a.target.selectedIndex));return!1});c.appendChild(this.list.language);a=document.createElement("span");this.classList.add("captioning-label",a);a.innerHTML=this.localizationManager.getString(r.MSG_CC_PRESETS);c.appendChild(a);
a=document.createElement("div");this.classList.add("captioning-preset",a);this.classList.add("captioning-preset1",a);a.innerHTML="Aa";b=document.createElement("div");this.classList.add("captioning-preset",b);this.classList.add("captioning-preset2",b);b.innerHTML="Aa";e=document.createElement("div");this.classList.add("captioning-preset",e);this.classList.add("captioning-preset3",e);e.innerHTML="Aa";f=document.createElement("div");this.classList.add("captioning-preset",f);this.classList.add("captioning-preset4",
f);f.innerHTML="Aa";l.create(a,l.CLICK,function(a){a.stopImmediatePropagation();g.captioningObject.selected=g.cloneObject(g.captioningObject.preset1);g.applyCaptioningStyle();return!1});l.create(b,l.CLICK,function(a){a.stopImmediatePropagation();g.captioningObject.selected=g.cloneObject(g.captioningObject.preset2);g.applyCaptioningStyle();return!1});l.create(e,l.CLICK,function(a){a.stopImmediatePropagation();g.captioningObject.selected=g.cloneObject(g.captioningObject.preset3);g.applyCaptioningStyle();
return!1});l.create(f,l.CLICK,function(a){a.stopImmediatePropagation();g.captioningObject.selected=g.cloneObject(g.captioningObject.preset4);g.applyCaptioningStyle();return!1});c.appendChild(a);c.appendChild(b);c.appendChild(e);c.appendChild(f);d.appendChild(c);this.advancedSettingContainer=document.createElement("div");c=document.createElement("div");this.classList.add("captioning-row",c);a=document.createElement("span");this.classList.add("captioning-label",a);a.innerHTML=this.localizationManager.getString(r.MSG_CC_FONT);
c.appendChild(a);this.list.font=document.createElement("select");this.classList.add("captioning-dropdown",this.list.font);a=document.createElement("option");a.innerHTML="Arial";a.value="Arial,sans-serif";this.list.font.appendChild(a);a=document.createElement("option");a.innerHTML="Times New Roman";this.list.font.appendChild(a);a=document.createElement("option");a.innerHTML="Courier";this.list.font.appendChild(a);a=document.createElement("option");a.innerHTML="Georgia";this.list.font.appendChild(a);
a=document.createElement("option");a.innerHTML="Helvetica";this.list.font.appendChild(a);a=document.createElement("option");a.innerHTML="Verdana";this.list.font.appendChild(a);a=document.createElement("option");a.innerHTML="Impact";this.list.font.appendChild(a);a=document.createElement("option");a.innerHTML="Comic Sans Serif";this.list.font.appendChild(a);l.create(this.list.font,"change",function(a){a.stopImmediatePropagation();g.captioningObject.selected.fontFamily=a.target.value;g.applyCaptioningStyle(!1);
return!1});c.appendChild(this.list.font);a=document.createElement("span");this.classList.add("captioning-label",a);a.innerHTML=this.localizationManager.getString(r.MSG_CC_EDGE);c.appendChild(a);this.list.edge=document.createElement("select");this.classList.add("captioning-dropdown",this.list.edge);a=document.createElement("option");a.innerHTML="none";a.value="none";this.list.edge.appendChild(a);a=document.createElement("option");a.innerHTML="Right drop shadow";a.value="text-shadow: 3px 3px 2px";this.list.edge.appendChild(a);
a=document.createElement("option");a.innerHTML="Left drop shadow";a.value="text-shadow: -3px 3px 2px";this.list.edge.appendChild(a);a=document.createElement("option");a.innerHTML="Uniform";a.value="text-shadow: 0px 0px 4px";this.list.edge.appendChild(a);a=document.createElement("option");a.innerHTML="Raised";a.value="text-shadow: 0px 1px 1px";this.list.edge.appendChild(a);a=document.createElement("option");a.innerHTML="Depressed";a.value="text-shadow: 0px 1px 0px";this.list.edge.appendChild(a);l.create(this.list.edge,
"change",function(a){a.stopImmediatePropagation();g.captioningObject.selected.edgeType=a.target.value;g.applyCaptioningStyle(!1);return!1});c.appendChild(this.list.edge);this.advancedSettingContainer.appendChild(c);c=document.createElement("div");this.classList.add("captioning-row",c);a=document.createElement("span");this.classList.add("captioning-label",a);a.innerHTML=this.localizationManager.getString(r.MSG_CC_SIZE);c.appendChild(a);this.list.size=document.createElement("select");this.classList.add("captioning-dropdown",
this.list.size);a=document.createElement("option");a.innerHTML="Small";a.value=".8em";this.list.size.appendChild(a);a=document.createElement("option");a.innerHTML="Medium";a.value="1.3em";this.list.size.appendChild(a);a=document.createElement("option");a.innerHTML="Large";a.value="2.3em";this.list.size.appendChild(a);this.list.size.selectedIndex=1;c.appendChild(this.list.size);l.create(this.list.size,"change",function(a){a.stopImmediatePropagation();g.captioningObject.selected.size=a.target.value;
g.applyCaptioningStyle(!1);return!1});a=document.createElement("span");this.classList.add("captioning-label",a);a.innerHTML=this.localizationManager.getString(r.MSG_CC_SCROLL);c.appendChild(a);this.list.scroll=document.createElement("select");this.classList.add("captioning-dropdown",this.list.scroll);a=document.createElement("option");a.innerHTML="Roll up";this.list.scroll.appendChild(a);a=document.createElement("option");a.innerHTML="Roll down";this.list.scroll.appendChild(a);l.create(this.list.scroll,
"change",function(a){a.stopImmediatePropagation();return!1});c.appendChild(this.list.scroll);this.advancedSettingContainer.appendChild(c);c=document.createElement("div");this.classList.add("captioning-row",c);a=document.createElement("span");this.classList.add("captioning-label-small",a);a.innerHTML=this.localizationManager.getString(r.MSG_CC_COLOR);this.picker.color=document.createElement("div");this.classList.add("captioning-color-picker",this.picker.color);this.picker.color.style.backgroundColor=
this.captioningObject["default"].fontColor;l.create(this.picker.color,l.CLICK,function(a){var b;a.stopImmediatePropagation();g.colorPicker.style.display="block"===g.colorPicker.style.display?"none":"block";"block"===g.colorPicker.style.display&&(null!=(a=g.swatchColorCurr)&&(a.style.borderColor="rgba(0,0,0,0.3)"),g.colorPicker.style.left="152px",g.colorPicker.name="fontColor",g.captioningObject.instance=g.picker.color,-1!==g.picker.color.style.backgroundColor.indexOf("rgba")&&(b=g.picker.color.style.backgroundColor.replace(/^rgba?\(|\s+|\)$/g,
"").split(",")[3]),g.colorPickerOpacity.value=null!=b?b:1);return!1});c.appendChild(a);c.appendChild(this.picker.color);a=document.createElement("span");this.classList.add("captioning-label-small",a);a.innerHTML=this.localizationManager.getString(r.MSG_CC_BACKGROUND);this.picker.background=document.createElement("div");this.classList.add("captioning-color-picker",this.picker.background);this.picker.background.style.backgroundColor=this.captioningObject["default"].backgroundColor;l.create(this.picker.background,
l.CLICK,function(a){var b;a.stopImmediatePropagation();g.colorPicker.style.display="block"===g.colorPicker.style.display?"none":"block";"block"===g.colorPicker.style.display&&(null!=(a=g.swatchColorCurr)&&(a.style.borderColor="rgba(0,0,0,0.3)"),g.colorPicker.style.left="264px",g.colorPicker.name="backgroundColor",g.captioningObject.instance=g.picker.background,-1!==g.picker.background.style.backgroundColor.indexOf("rgba")&&(b=g.picker.background.style.backgroundColor.replace(/^rgba?\(|\s+|\)$/g,"").split(",")[3]),
g.colorPickerOpacity.value=null!=b?b:1);return!1});c.appendChild(a);c.appendChild(this.picker.background);a=document.createElement("span");this.classList.add("captioning-label-small",a);a.innerHTML=this.localizationManager.getString(r.MSG_CC_EDGE);this.picker.edge=document.createElement("div");this.classList.add("captioning-color-picker",this.picker.edge);this.picker.edge.style.backgroundColor=this.captioningObject["default"].edgeColor;l.create(this.picker.edge,l.CLICK,function(a){var b;a.stopImmediatePropagation();
g.colorPicker.style.display="block"===g.colorPicker.style.display?"none":"block";"block"===g.colorPicker.style.display&&(null!=(a=g.swatchColorCurr)&&(a.style.borderColor="rgba(0,0,0,0.3)"),g.colorPicker.style.left="212px",g.colorPicker.name="edgeColor",g.captioningObject.instance=g.picker.edge,-1!==g.picker.edge.style.backgroundColor.indexOf("rgba")&&(b=g.picker.edge.style.backgroundColor.replace(/^rgba?\(|\s+|\)$/g,"").split(",")[3]),g.colorPickerOpacity.value=null!=b?b:1);return!1});c.appendChild(a);
c.appendChild(this.picker.edge);a=document.createElement("span");this.classList.add("captioning-label-small",a);a.innerHTML=this.localizationManager.getString(r.MSG_CC_WINDOW);this.picker.window=document.createElement("div");this.classList.add("captioning-color-picker",this.picker.window);this.picker.window.style.backgroundColor=this.captioningObject["default"].windowColor;l.create(this.picker.window,l.CLICK,function(a){var b;a.stopImmediatePropagation();g.colorPicker.style.display="block"===g.colorPicker.style.display?
"none":"block";"block"===g.colorPicker.style.display&&(null!=(a=g.swatchColorCurr)&&(a.style.borderColor="rgba(0,0,0,0.3)"),g.colorPicker.style.left="300px",g.colorPicker.name="windowColor",g.captioningObject.instance=g.picker.window,-1!==g.picker.window.style.backgroundColor.indexOf("rgba")&&(b=g.picker.window.style.backgroundColor.replace(/^rgba?\(|\s+|\)$/g,"").split(",")[3]),g.colorPickerOpacity.value=null!=b?b:1);return!1});c.appendChild(a);c.appendChild(this.picker.window);this.advancedSettingContainer.appendChild(c);
this.classList.add("captioning-advanced-container",this.advancedSettingContainer);d.appendChild(this.advancedSettingContainer);c=document.createElement("div");this.classList.add("caption-text",c);this.classList.add("caption-text-preview",c);a=document.createElement("p");a.innerHTML="Lorem ipsum dolor sit amet";c.appendChild(a);d.appendChild(c);c=document.createElement("div");this.classList.add("captioning-footer-container",c);a=document.createElement("button");this.classList.add("captioning-footer-button",
a);a.innerHTML=this.localizationManager.getString(r.MSG_CC_APPLY);b=document.createElement("button");this.classList.add("captioning-footer-button",b);b.innerHTML=this.localizationManager.getString(r.MSG_CC_CANCEL);e=document.createElement("button");this.classList.add("captioning-footer-button",e);e.innerHTML=this.localizationManager.getString(r.MSG_CC_RESET);f=document.createElement("button");this.classList.add("captioning-advanced-button",f);f.innerHTML=this.localizationManager.getString(r.MSG_CC_SHOW_ADVANCED);
c.appendChild(a);c.appendChild(b);c.appendChild(e);450<this.facade.app.getViewComponent().clientWidth&&c.appendChild(f);l.create(a,l.CLICK,function(a){a.stopImmediatePropagation();localStorage.setItem(Cb.PREFIX+"captioningDefault",JSON.stringify(g.captioningObject.selected));g.sendNotification(u.SETTINGS_VISIBILITY_CHANGE,g.settingsUiVisible);g.applyCaptioningStyle(!1,!0);g.sendNotification(u.SETTINGS_CHANGE,g.captioningObject.selected);return!1});l.create(b,l.CLICK,function(a){a.stopImmediatePropagation();
g.sendNotification(u.SETTINGS_VISIBILITY_CHANGE,g.settingsUiVisible);return!1});l.create(e,l.CLICK,function(a){a.stopImmediatePropagation();g.colorPicker.style.display="none";g.applyCaptioningStyle(!0);return!1});l.create(f,l.CLICK,function(a){a.stopImmediatePropagation();"block"===g.advancedSettingContainer.style.display?(a.target.innerHTML=g.localizationManager.getString(r.MSG_CC_SHOW_ADVANCED),g.advancedSettingContainer.style.display="none",g.colorPicker.style.display="none"):(a.target.innerHTML=
g.localizationManager.getString(r.MSG_CC_HIDE_ADVANCED),g.advancedSettingContainer.style.display="block");return!1});d.appendChild(c);this.viewComponent.appendChild(d);this.captionningStyle=document.createElement("style");this.captionningStyle.type="text/css";document.getElementsByTagName("head")[0].appendChild(this.captionningStyle);d="#000000 #660000 #990000 #ff0000 #000066 #660066 #990066 #ff0066 #006600 #666600 #996600 #ff6600 #006666 #666666 #996666 #ff6666 #009900 #669966 #999900 #ff9900 #009966 #669966 #999966 #ff9966 #00ff00 #66ff00 #99ff00 #ffff00 #00ff66 #66ff66 #99ff66 #ffff66 #000099 #660099 #990099 #ff0099 #0000ff #6600ff #9900ff #ff00ff #006699 #666699 #996699 #ff6699 #0066ff #6666ff #9966ff #ff66ff #009999 #669999 #999999 #ff9999 #0099ff #6699ff #9999ff #ff99ff #0099ff #66ff99 #99ff99 #ffff99 #00ffff #66ffff #99ffff #ffffff".split(" ");
this.colorPicker=document.createElement("div");this.classList.add("colorpicker-palette",this.colorPicker);c=document.createElement("div");this.classList.add("colorpicker-swatch",c);c.innerHTML="\x26nbsp;";a=0;for(b=d.length;a<b;a++)e=d[a],c.style.backgroundColor=e,e=c.cloneNode(),l.create(e,l.CLICK,function(a){a.stopImmediatePropagation();null!==g.swatchColorCurr&&(g.swatchColorCurr.style.borderColor="rgba(0,0,0,0.3)");g.swatchColorCurr=a.target;g.swatchColorCurr.style.borderColor="rgba(255, 50, 50, 1)";
g.captioningObject.instance.style.backgroundColor=g.captioningObject.selected[g.colorPicker.name]=g.toRGBA(a.target.style.backgroundColor);g.applyCaptioningStyle(!1);return!1}),this.colorPicker.appendChild(e);this.colorPickerOpacity=document.createElement("input");this.colorPickerOpacity.type="range";this.classList.add("colorpicker-slider",this.colorPickerOpacity);this.colorPickerOpacity.min=0;this.colorPickerOpacity.max=1;this.colorPickerOpacity.step=0.1;this.colorPickerOpacity.value=1;l.create(this.colorPickerOpacity,
"change",function(a){a.stopImmediatePropagation();g.captioningObject.instance.style.backgroundColor=g.captioningObject.selected[g.colorPicker.name]=g.toRGBA(g.captioningObject.instance.style.backgroundColor);g.applyCaptioningStyle(!1);return!1});d=document.createElement("span");this.classList.add("opacity-label",d);d.innerHTML=this.localizationManager.getString(r.MSG_CC_OPACITY);this.colorPicker.appendChild(d);this.colorPicker.appendChild(this.colorPickerOpacity);this.swatchOpacityCurr=this.colorPickerOpacity;
this.viewComponent.appendChild(this.colorPicker);l.create(document,l.CLICK,function(a){a.stopImmediatePropagation();"akamai-colorpicker-palette"!==a.target.className&&"akamai-opacity-label"!==a.target.className&&"akamai-colorpicker-slider"!==a.target.className&&"none"!==g.colorPicker.style.display&&(g.colorPicker.style.display="none");return!1});null!=localStorage.getItem(Cb.PREFIX+"captioningDefault")?(this.captioningObject.selected=JSON.parse(localStorage.getItem(Cb.PREFIX+"captioningDefault")),
this.applyCaptioningStyle(!1)):(d=!(null!=this.facade.config.style||"undefined"!==this.facade.config.style),d||(this.captioningObject.selected=this.cloneObject(this.facade.config.style)),this.applyCaptioningStyle(d));G.__super__.onRegister.call(this)};G.prototype.toRGBA=function(a){a=a.replace(/^rgba?\(|\s+|\)$/g,"").split(",");return"rgba("+a[0]+","+a[1]+","+a[2]+","+this.swatchOpacityCurr.value+")"};G.prototype.languageListPopulate=function(){var a,b,c,d,e;c=this.facade.moduleAPI.getTracks();this.list.language.innerHTML=
"";d=0;for(e=c.length;d<e;d++)a=c[d],b=document.createElement("option"),a=a.language,a=this.facade.app.retrieveProxy(O.NAME).getLanguageString(a),b.innerHTML=a,null!=a&&""!==a&&this.list.language.appendChild(b);this.toggle.disabled=0===this.list.language.childElementCount;this.toggle.disabled&&(b=document.createElement("option"),b.innerHTML="None",this.list.language.appendChild(b))};G.prototype.cloneObject=function(a){var b,c;b={};for(c in a)b[c]=a[c];return b};G.prototype.applyCaptioningStyle=function(a,
b){var c,d,e,f,g,h;null==a&&(a=!1);null==b&&(b=!1);a?(this.captioningObject.selected=this.cloneObject(this.captioningObject["default"]),this.list.font.value=this.captioningObject["default"].fontFamily,this.list.edge.value=null!=this.captioningObject["default"].edgeType?this.captioningObject["default"].edgeType:"none",this.list.size.value=this.captioningObject["default"].size,this.picker.color.style.backgroundColor=this.captioningObject["default"].fontColor,this.picker.background.style.backgroundColor=
this.captioningObject["default"].backgroundColor,this.picker.edge.style.backgroundColor=this.captioningObject["default"].edgeColor,this.picker.window.style.backgroundColor=this.captioningObject["default"].windowColor):(null!=this.captioningObject.selected.fontFamily&&(this.list.font.value=this.captioningObject.selected.fontFamily),this.list.edge.value=null!=this.captioningObject.selected.edgeType?this.captioningObject.selected.edgeType:"none",null!=this.captioningObject.selected.size&&(this.list.size.value=
this.captioningObject.selected.size),this.picker.color.style.backgroundColor=this.captioningObject.selected.fontColor,null!=this.captioningObject.selected.backgroundColor&&(this.picker.background.style.backgroundColor=this.captioningObject.selected.backgroundColor),null!=this.captioningObject.selected.edgeColor&&(this.picker.edge.style.backgroundColor=this.captioningObject.selected.edgeColor),null!=this.captioningObject.selected.windowColor&&(this.picker.window.style.backgroundColor=this.captioningObject.selected.windowColor));
f="font-family: "+(a?this.captioningObject["default"].fontFamily:this.list.font.value)+" ;";e=(a?this.captioningObject["default"].edgeType+this.captioningObject["default"].edgeColor:this.list.edge.value+" "+this.picker.edge.style.backgroundColor)+";";g="font-size: "+(a?this.captioningObject["default"].size:this.list.size.value)+" ;";d="color: "+(a?this.captioningObject["default"].fontColor:this.picker.color.style.backgroundColor)+" ;";c="background-color: "+(a?this.captioningObject["default"].backgroundColor:
this.picker.background.style.backgroundColor)+" ;";h="background-color: "+(a?this.captioningObject["default"].windowColor:this.picker.window.style.backgroundColor)+" ;";this.captionningStyle.innerHTML=b?this.captioningObject.appliedStyleText=".akamai-caption-text { "+f+g+e+h+" }.akamai-caption-text p { "+d+c+" }":this.captioningObject.appliedStyleText+".akamai-caption-text-preview { "+f+g+e+h+" }.akamai-caption-text-preview p { "+d+c+" }"};G.prototype.toggleButtonHandler=function(a){null==a&&(a=!1);
a?(this.classList.add("captioning-floater-btnselected",this.toggle.ON),this.classList.remove("captioning-floater-btnselected",this.toggle.OFF)):(this.classList.add("captioning-floater-btnselected",this.toggle.OFF),this.classList.remove("captioning-floater-btnselected",this.toggle.ON));this.sendNotification(u.VISIBILITY_CHANGE,a);this.sendNotification(od.UPDATE_SETTINGS,{captioning:{hidden:!a}})};G.prototype.listNotificationInterests=function(){return[u.CUE_CHANGE,u.SETTINGS_VISIBILITY_CHANGE,u.TOGGLE_SETTINGS_VISIBILITY,
u.SETTINGS_CHANGE]};G.prototype.handleNotification=function(a){var b,c,d,f;b=a.getName();a=a.getBody();switch(b){case u.CUE_CHANGE:b="";d=0;for(f=a.length;d<f;d++)c=a[d],b+=c.html;this.captionText.innerHTML=b;break;case u.SETTINGS_VISIBILITY_CHANGE:case u.TOGGLE_SETTINGS_VISIBILITY:this.settingsUiVisible&&(this.colorPicker.style.display="none");(this.settingsUiVisible=!this.settingsUiVisible)&&1===this.list.language.length&&this.languageListPopulate();a=this.settingsUiVisible?e.ADD_APPLICATION_STATE:
e.REMOVE_APPLICATION_STATE;this.sendNotification(a,"cc-setting-active");break;case u.SETTINGS_CHANGE:this.captioningObject.selected=a,this.applyCaptioningStyle(!1,!0)}};var Z=function(){var a,b=this;this.captions=[];this.head=document.getElementsByTagName("head")[0];a=window.com||{};a.akamai=a.akamai||{};a.akamai.amp=a.akamai.amp||{};a.akamai.amp.plugins=a.akamai.amp.plugins||{};a.akamai.amp.plugins.subply=a.akamai.amp.plugins.subply||{};a.akamai.amp.plugins.subply.response=function(a){b.parse(a);
b.poll()};null==window.com&&(window.com=a);Z.__super__.constructor.call(this,this.constructor.NAME)};f(Z,puremvc.Proxy);Z.NAME="LiveCaptionProxy";Z.prototype.data={base:"http://test.plymedia.com.s3.amazonaws.com/online/Akamai_",interval:1E3};Z.prototype.caption=null;Z.prototype.head=null;Z.prototype.script=null;Z.prototype.timeout=null;Z.prototype.getURL=function(){return this.data.url};Z.prototype.setURL=function(a){return this.data.url=a};Z.prototype.start=function(){this.send()};Z.prototype.poll=
function(){var a=this;setTimeout(function(){a.send()},this.data.interval||1E3)};Z.prototype.send=function(){null!=this.script&&this.head.removeChild(this.script);this.script=document.createElement("script");this.script.src=this.data.base+this.data.url+".js?nocache\x3d"+Date.now();this.head.appendChild(this.script)};Z.prototype.stop=function(){clearTimeout(timeout)};Z.prototype.parse=function(a){var b,c,d,e;if(a.Stream===this.data.url&&!(null!=this.caption&&this.caption.id>=a.Ticks)){this.caption=
new bb(h.flattenTimecode(a.From),h.flattenTimecode(a.To),a.Ticks);this.caption.text=a.Text;b="";e=a.Text.split("\n");c=0;for(d=e.length;c<d;c++)a=e[c],""!==b&&(b+="\x3cbr /\x3e"),b+="\x3cspan\x3e"+a+"\x3c/span\x3e";this.caption.html="\x3cp\x3e"+b+"\x3c/p\x3e";this.sendNotification(u.CUE_CHANGE,[this.caption]);return this.caption}};var Ta=function(a){Ta.__super__.constructor.call(this,Ta.NAME,a)};f(Ta,na);Ta.NAME="CaptioningNativeMediator";Ta.prototype.video=null;Ta.prototype.index=-1;Ta.prototype.plugin=
null;Ta.prototype.onRegister=function(){this.video=this.facade.app.video;this.plugin=this.facade.retrieveProxy(E.NAME)};Ta.prototype.listNotificationInterests=function(){return[u.VISIBILITY_CHANGE,u.TRACK_SELECTED,u.TRACKS_LOADED]};Ta.prototype.handleNotification=function(a){var b,c,d,e,f,g,h,l;b=a.getBody();switch(a.getName()){case u.TRACKS_LOADED:e=0;for(g=b.length;e<g;e++)if(c=b[e],"captions"===c.kind||"subtitles"===c.kind)for(a=this.video.addTextTrack(c.kind,c.label,c.srclang),l=c.cues,f=0,h=
l.length;f<h;f++)c=l[f],d=new TextTrackCue(c.startTime,c.endTime,c.text),c.id=c.id,a.addCue(d);break;case u.TRACK_SELECTED:-1<this.index&&(this.video.textTracks[this.index].mode="hidden");this.index=this.plugin.getTracks().indexOf(b);this.plugin.getHidden()||(this.video.textTracks[this.index].mode="showing");break;case u.VISIBILITY_CHANGE:this.video.textTracks[this.index].mode=this.plugin.getHidden()?"hidden":"showing"}};var cd=function(){cd.__super__.constructor.call(this)};f(cd,puremvc.SimpleCommand);
cd.prototype.execute=function(a){var b,c,d,e,f,g;e=a.getBody();b=this.facade.retrieveProxy(E.NAME).getTrack();if(null!=b){a=b.activeCues;d=b.cues;b=!1;f=0;for(g=d.length;f<g;f++)c=d[f],e>=c.startTime&&e<c.endTime?0<=Bb.call(a,c)||(a.push(c),b=!0):(c=a.indexOf(c),-1!==c&&(a.splice(c,1),b=!0));!0===b&&this.sendNotification(u.CUE_CHANGE,a)}};var dd=function(){dd.__super__.constructor.call(this)};f(dd,puremvc.SimpleCommand);dd.prototype.execute=function(a){var b;a=a.getBody();b=this.facade.retrieveProxy(E.NAME);
null!=a.track&&b.setTracks(a.track);null!=a.track&&this.sendNotification(u.ENABLED,!0)};var ed=function(){ed.__super__.constructor.call(this)};f(ed,puremvc.SimpleCommand);ed.prototype.execute=function(a){this.facade.retrieveProxy(E.NAME).setHidden(!a.getBody())};var od={SETTING_CHANGE:"settingchange",UPDATE_SETTINGS:"updatesettings"},fd=function(){fd.__super__.constructor.call(this)};f(fd,puremvc.SimpleCommand);fd.prototype.execute=function(a){var b,c;this.facade.logger.debug("CaptioningStartedCommand");
a=this.facade.retrieveProxy(E.NAME);b=a.getTrack();null==b&&0<(null!=(c=a.getTracks())?c.length:void 0)&&(b=a.autoSelectTrack());!0===(null!=b?b.isLive:void 0)&&(this.facade.removeCommand(e.TIME_UPDATE),a=this.facade.retrieveProxy(Z.NAME),null==a&&(a=new Z,this.facade.registerProxy(a)),a.setURL(b.src),a.start())};var Ua=function(a){Ua.__super__.constructor.call(this,Ua.NAME,a)};f(Ua,Ab);Ua.NAME="CaptioningMediator";Ua.prototype.captionButton=null;Ua.prototype.onRegister=function(){var a=this;this.classList.add("captioning-overlay");
this.captionButton=document.createElement("div");this.classList.add("caption-button",this.captionButton);this.captionButton.textContent=this.localizationManager.getString(r.MSG_CC);l.create(this.captionButton,l.CLICK,function(b){b.stopImmediatePropagation();"embedded"===a.plugin.getTrack().type?a.sendNotification(u.VISIBILITY_CHANGE,a.plugin.getHidden()):a.sendNotification(u.SETTINGS_VISIBILITY_CHANGE,a.plugin.getHidden());return!1});this.sendNotification(e.ADD_CONTROL,this.captionButton);Ua.__super__.onRegister.call(this)};
Ua.prototype.listNotificationInterests=function(){return[u.VISIBILITY_CHANGE,u.ENABLED,u.TRACK_SELECTED]};Ua.prototype.handleNotification=function(a){var b,c,d;c=(b=a.getBody())?e.ADD_APPLICATION_STATE:e.REMOVE_APPLICATION_STATE;switch(a.getName()){case u.TRACK_SELECTED:d="cc-embedded";c="embedded"===b.type?e.ADD_APPLICATION_STATE:e.REMOVE_APPLICATION_STATE;break;case u.VISIBILITY_CHANGE:d="cc-active";break;case u.ENABLED:d="cc-enabled"}this.sendNotification(c,d)};CaptionParsers={"application/ttml+xml":new nd,
"application/x-subrip":new md};var u={VISIBILITY_CHANGE:"captioningvisibilitychange",ENABLED:"captioningEnabled",TRACKS_LOADED:"captioningTracksLoaded",TRACK_SELECTED:"captioningTrackSelected",CUE_CHANGE:"captioningCueChange",SETTINGS_VISIBILITY_CHANGE:"captioningsettingsvisibility",TOGGLE_SETTINGS_VISIBILITY:"togglesettingsvisibility",SETTINGS_CHANGE:"captioningsettingschange"},Va=function(a,b){var c,d=this;this.kind=a.kind;this.type=a.type;this.src=a.src;this.language=a.srclang;this.label=a.label||
this.srclang||this.kind;this.cues=a.cues||[];this.styles=a.styles||{};this.activeCues=[];this.isLive=/live-subply/.test(this.type);null==this.src||""===this.src||this.isLive?setTimeout(b,1):c=h.get(this.src,{onload:function(){try{CaptionParsers[d.type].parse(d,c.response)}catch(a){H.error("Could not parse caption track: "+d.src);return}"function"===typeof b&&b()},onerror:function(){H.error("Could not load caption track: "+d.src)}})};Va.prototype.kind=null;Va.prototype.src=null;Va.prototype.language=
null;Va.prototype.cues=null;Va.prototype.label=null;Va.prototype.activeCues=null;Va.prototype.type=null;Va.prototype.styles=null;Va.prototype.isLive=!1;var E=function(a){this.activeCaptions=[];this.providers={};this.tracks=[];E.__super__.constructor.call(this,a)};f(E,K);E.NAME=C.NAME;E.prototype.defaults={};E.prototype.hidden=!0;E.prototype.tracks=null;E.prototype.track=null;E.prototype.activeCaptions=null;E.prototype.captions=null;E.prototype.loaded=!0;E.prototype.useNative=function(){var a;return null!=
this.facade.app.video.textTracks&&3===(null!=(a=window.TextTrackCue)?a.length:void 0)};E.prototype.getTracks=function(){return this.tracks};E.prototype.setTracks=function(a){var b,c,d,e,f,g,h=this;this.tracks=[];this.track=null;b=a.length;d=0;e=function(){d++;d===b&&(h.sendNotification(u.TRACKS_LOADED,h.tracks),h.autoSelectTrack())};f=0;for(g=a.length;f<g;f++)c=a[f],c=new Va(c,e),this.tracks.push(c);return a};E.prototype.getTrack=function(){return this.track};E.prototype.setTrack=function(a){this.track=
a;this.captions=this.track.cues;this.activeCaptions=[];this.sendNotification(u.TRACK_SELECTED,this.track);return a};E.prototype.selectTrackByIndex=function(a){var b;0<=a&&a<this.tracks.length&&(b=this.tracks[a],this.setTrack(b));return b};E.prototype.selectTrackByLanguage=function(a){var b,c,d,e,f;f=this.tracks;d=0;for(e=f.length;d<e;d++)if(b=f[d],b.language===a){c=b;break}null!=c&&this.setTrack(c);return c};E.prototype.getHidden=function(){return this.hidden};E.prototype.setHidden=function(a){return this.hidden=
a};E.prototype.autoSelectTrack=function(){var a,b,c;a=null!=(c=this.facade.app.retrieveProxy(O.NAME))?c.getLanguage():void 0;null!=a&&(a=a.split("-").shift(),b=this.selectTrackByLanguage(a));null==b&&(b=this.tracks[0],this.setTrack(b));return b};var Ea=function(a,b){Ea.__super__.constructor.call(this,a,b)};f(Ea,X);Ea.NAME="MediaAnalyticsPlugin";Ea.prototype.moduleName="mediaanalytics";Ea.prototype.createModel=function(){this.registerProxy(new la(this.config))};Ea.prototype.createController=function(){this.registerCommand(e.MEDIA_CHANGE,
Uc);this.registerCommand("adbreakstart",Vc);this.registerCommand("adbreakend",Wc);this.registerCommand("adloaded",Xc);this.registerCommand("adstarted",Yc);this.registerCommand("adtimeupdate",Zc);this.registerCommand("adended",$c);this.registerCommand("mediaanalytics:setDimensions",ad)};Ea.prototype.createAPI=function(){return new bd(this)};Ea.prototype.onRegister=function(){window.AKAMAI_MEDIA_ANALYTICS_CONFIG_FILE_PATH=this.config.config;Ea.__super__.onRegister.call(this)};Ea.prototype.listNotificationInterests=
function(){return[e.MEDIA_CHANGE,"adbreakstart","adbreakend","adloaded","adstarted","adtimeupdate","adended","mediaanalytics:setDimensions"]};v.registerPlugin("mediaanalytics","html",Ea);v.registerPlugin("mediaanalytics","flash",Da);var Fa=function(a){var b;Fa.__super__.constructor.call(this,a);b=a.retrieveProxy(E.NAME);this.getHidden=b.getHidden.bind(b);this.setHidden=function(b){a.sendNotification(u.VISIBILITY_CHANGE,b);return b};this.getTracks=b.getTracks.bind(b);this.getTrack=b.getTrack.bind(b);
this.setTrack=b.setTrack.bind(b);this.selectTrackByIndex=b.selectTrackByIndex.bind(b);this.selectTrackByLanguage=b.selectTrackByLanguage.bind(b);this.changeSettings=function(b){a.sendNotification(u.SETTINGS_CHANGE,b);return b}};f(Fa,ub);Fa.prototype.getHidden=function(){};Fa.prototype.setHidden=function(a){};Fa.prototype.getTracks=function(){};Fa.prototype.getTrack=function(){};Fa.prototype.setTrack=function(a){};Fa.prototype.selectTrackByIndex=function(a){};Fa.prototype.selectTrackByLanguage=function(a){};
Fa.prototype.changeSettings=function(a){};var Ga=function(a,b){Ga.__super__.constructor.call(this,a,b)};f(Ga,X);Ga.NAME="Feature";Ga.prototype.featureName=null;Ga.prototype.getFeatureName=function(){return this.featureName};Ga.prototype.registerFeature=function(){null!=this.getFeatureName()&&this.app.sendNotification("registerfeature",this)};Ga.prototype.onRegister=function(){this.registerFeature();Ga.__super__.onRegister.call(this)};Ga.prototype.listNotificationPublications=function(){return Ga.__super__.listNotificationPublications.call(this).concat(["registerfeature"])};
var Ob=function(){return Ob.__super__.constructor.apply(this,arguments)};f(Ob,N);Ob.NAME="BrandingWrapper";Ob.prototype.createFlashVars=function(a){null!=this.config.id&&(a.branding=this.config.id);return a};Ob.prototype.createXML=function(a){var b,c,d,e,f,g,h,l;if(null!=(null!=(b=this.config)?b.logo:void 0)){b="background-image: url('"+this.config.logo+"');";e=a.getElementsByTagName("element");h=0;for(l=e.length;h<l;h++)d=e[h],f=d.getAttribute("id"),"logo"===f?g=d:"controls"===f&&(c=d);null==g?(g=
a.createElement("element"),g.setAttribute("id","logo"),g.setAttribute("style","width: 150px; height: 53px; right: 15px; top: 15px; opacity: 0.5; "+b),c.appendChild(g)):(c=g.getAttribute("style"),c=-1!==c.indexOf("background-image:")?c.replace(/background-image: [A-Za-z0-9_\-\.\/\\;\(\)"']+/,b):b+c,g.setAttribute("style",c))}return a};var sa=function(a){sa.__super__.constructor.call(this,sa.NAME,a)};f(sa,ha);sa.NAME="BrandingMediator";sa.prototype.logo=null;sa.prototype.text=null;sa.prototype.container=
null;sa.prototype.onRegister=function(){this.classList.add("branding-overlay");this.container=document.createElement("div");this.classList.add("branding-container",this.container);this.viewComponent.appendChild(this.container);this.logo=document.createElement("img");this.classList.add("branding-image",this.logo);this.classList.add("hidden",this.logo);this.container.appendChild(this.logo);this.text=document.createElement("div");this.classList.add("branding-text",this.text);this.container.appendChild(this.text);
sa.__super__.onRegister.call(this)};sa.prototype.listNotificationInterests=function(){return[e.READY]};sa.prototype.handleNotification=function(a){switch(a.getName()){case e.READY:a=a.getBody().branding;if(null==a)break;null!=a.logo?(this.logo.src=a.logo,this.classList.remove("hidden",this.logo)):this.classList.add("hidden",this.logo);a=this.config.getDomain();null!=a&&0!==a.indexOf("http")&&(a=location.protocol+"//"+a,this.text.innerHTML='\x3cspan\x3eView all \x3ca href\x3d"'+a+'" target\x3d"'+this.config.getTarget()+
'"\x3e'+this.config.getDomain()+"\x3c/a\x3e videos.")}};var ga=function(a){ga.__super__.constructor.call(this,a)};f(ga,C);ga.NAME=C.NAME;ga.prototype.defaults={id:null,title:null,link:null,logo:null,target:null};ga.prototype.getID=function(){return this.data.id};ga.prototype.setID=function(a){return this.data.id=a};ga.prototype.getTarget=function(){return this.data.target};ga.prototype.setTarget=function(a){return this.data.target=a};ga.prototype.getTitle=function(){return this.data.title};ga.prototype.setTitle=
function(a){return this.data.title=a};ga.prototype.getLink=function(){return this.data.link};ga.prototype.setLink=function(a){return this.data.link=a};ga.prototype.getLogo=function(){return this.data.logo};ga.prototype.setLogo=function(a){return this.data.logo=a};var ja=function(a,b){ja.__super__.constructor.call(this,a,b)};f(ja,Ga);ja.NAME="CaptioningPlugin";ja.prototype.featureName="captioning";ja.prototype.moduleName="captioning";ja.prototype.createController=function(){this.registerCommand(e.CHANGE_MEDIA,
dd);this.registerCommand(e.STARTED,fd);this.registerCommand(e.TIME_UPDATE,cd);this.registerCommand(u.VISIBILITY_CHANGE,ed)};ja.prototype.createModel=function(){this.registerProxy(new E(this.config))};ja.prototype.createView=function(){var a;a=new Ua;this.registerMediator(a);this.registerMediator(new G(a.viewComponent))};ja.prototype.createAPI=function(){return new Fa(this)};ja.prototype.listNotificationInterests=function(){return[e.CHANGE_MEDIA,e.STARTED,e.TIME_UPDATE,u.TOGGLE_SETTINGS_VISIBILITY]};
ja.prototype.listNotificationPublications=function(){var a,b;return ja.__super__.listNotificationPublications.call(this).concat(function(){var c;c=[];for(a in u)b=u[a],b!==u.TOGGLE_SETTINGS_VISIBILITY&&c.push(b);return c}()).concat([e.ADD_CONTROL,e.REMOVE_CONTROL,od.UPDATE_SETTINGS])};ja.prototype.listNotificationEvents=function(){return[u.VISIBILITY_CHANGE,u.ENABLED]};v.registerPlugin("captioning","html",ja);var jc=function(a){jc.__super__.constructor.call(this,a);a=a.retrieveProxy(w.NAME);this.getHidden=
a.getHidden.bind(a);this.setHidden=function(a){this.sendNotification("statsvisibilitychange",a);return a}};f(jc,ub);jc.prototype.getHidden=function(){};jc.prototype.setHidden=function(a){};var ta=function(a){ta.__super__.constructor.call(this,a)};f(ta,C);ta.NAME=C.NAME;ta.prototype.defaults={url:null};ta.prototype.hidden=!0;ta.prototype.getURL=function(){return this.data.url};ta.prototype.setURL=function(a){return this.data.url=a};ta.prototype.getHidden=function(){return this.hidden};ta.prototype.setHidden=
function(a){return this.hidden=a};ta.prototype.invoke=function(){var a,b=this;if(null!=this.data.url)return a=h.get(this.data.url,{onload:function(){null!=a.response&&b.sendNotification("bitratesUpdate",a.response)},onerror:function(a){return b.sendNotification("bitratesUpdate",null)}})};var gd=function(){gd.__super__.constructor.call(this)};f(gd,puremvc.SimpleCommand);gd.prototype.execute=function(a){var b;this.facade.logger.debug("StatsVisibilityChangeCommand");b=this.facade.retrieveProxy(ta.NAME);
b.setHidden(a.getBody());b.setURL(""+this.facade.app.parent.getSrc());!1===a.getBody()&&b.invoke()};var da=function(a){da.__super__.constructor.call(this,da.NAME,a)};f(da,Ab);da.NAME="StatsMediator";da.prototype.statsText=null;da.prototype.statsButton=null;da.prototype.bitrateText=null;da.prototype.bitrateArr=null;da.prototype.onRegister=function(){var a=this;this.sendNotification(e.ADD_APPLICATION_STATE,"stats");this.classList.add("stats-overlay");this.classList.add("hidden");this.statsFormat=document.createElement("div");
this.classList.add("stats-text",this.statsFormat);this.viewComponent.appendChild(this.statsFormat);this.statsBitRate=document.createElement("div");this.classList.add("stats-text",this.statsBitRate);this.viewComponent.appendChild(this.statsBitRate);this.statsPlayBack=document.createElement("div");this.classList.add("stats-text",this.statsPlayBack);this.viewComponent.appendChild(this.statsPlayBack);this.statsAnalytics=document.createElement("div");this.classList.add("stats-text",this.statsAnalytics);
this.viewComponent.appendChild(this.statsAnalytics);this.statsButton=document.createElement("div");this.classList.add("stats-button",this.statsButton);l.create(this.statsButton,l.CLICK,function(b){b.stopImmediatePropagation();a.sendNotification("statsvisibilitychange",!a.plugin.getHidden());return!1});this.sendNotification(e.ADD_CONTROL,this.statsButton);da.__super__.onRegister.call(this)};da.prototype.listNotificationInterests=function(){return["statsvisibilitychange","bitratesUpdate"]};da.prototype.handleNotification=
function(a){var b;b=a.getName();a=a.getBody();switch(b){case "statsvisibilitychange":this.plugin.getHidden()?this.classList.add("hidden"):(this.classList.remove("hidden"),this.statsBitRate.innerHTML="\x3cb class\x3d'"+this.classList.prefix+"stats-header'\x3eAdaptive Bitrate Renditions\x3c/b\x3eLoading...",this.renderStats());break;case "bitratesUpdate":null!=a?this.constructBitrateText(a):this.statsBitRate.innerHTML="\x3cb class\x3d'"+this.classList.prefix+"stats-header'\x3eAdaptive Bitrate Renditions\x3c/b\x3eNot Available"}};
da.prototype.renderStats=function(){var a,b,c,d;a=this.facade.app.getAPI();b=void 0===a.getMedia()?"Not Available":a.getMedia().type;d=""===a.getSrc()||null===a.getSrc()?"Not Available":a.getSrc();c=""!==h.getPlaybackMode()&&null!==h.getPlaybackMode()&&-1!==h.getPlaybackMode().indexOf("html")?"HTML5 Video: "+h.getDevice()+", "+this.facade.app.parent.version:"Not Available";a=""===this.facade.app.parent.mediaanalytics.getConfig().config||null===this.facade.app.parent.mediaanalytics.getConfig().config?
"Not Available":this.facade.app.parent.mediaanalytics.getConfig().config;this.statsFormat.innerHTML="\x3cb class\x3d'"+this.classList.prefix+"stats-header'\x3eStream\x3c/b\x3eFormat: "+b+"\x3cbr/\x3eURL: "+d;this.statsPlayBack.innerHTML="\x3cb class\x3d'"+this.classList.prefix+"stats-header'\x3ePlayback\x3c/b\x3e"+c;this.statsAnalytics.innerHTML="\x3cb class\x3d'"+this.classList.prefix+"stats-header'\x3eAnalytics\x3c/b\x3e"+a};da.prototype.constructBitrateText=function(a){var b,c,d,e,f;this.bitrateArr=
[];this.bitrateText="";this.bitrateArr=function(){var b,d,e,f;e=a.split("#");f=[];b=0;for(d=e.length;b<d;b++)c=e[b],-1!==c.indexOf("BANDWIDTH")&&-1!==c.indexOf("RESOLUTION")&&f.push(this.parseBitrate(c));return f}.call(this);this.bitrateArr.sort(function(a,b){return a.bitrate<b.bitrate?-1:a.bitrate>b.bitrate?1:0});f=this.bitrateArr;b=d=0;for(e=f.length;d<e;b=++d)c=f[b],this.bitrateText+=b+1+". "+c.bitrate+" kbps "+c.res+"\x3cbr/\x3e";""===this.bitrateText&&(this.bitrateText="Not Available");this.statsBitRate.innerHTML=
"\x3cb class\x3d'"+this.classList.prefix+"stats-header'\x3eAdaptive Bitrate Renditions\x3c/b\x3e"+this.bitrateText};da.prototype.parseBitrate=function(a){var b,c,d;c=a.indexOf("BANDWIDTH");b=a.indexOf(",",c+10);b=a.slice(c+10,b);d=a.indexOf("RESOLUTION");c=a.indexOf(",",d+10);a=a.slice(d+11,c);return{bitrate:parseInt(b)/1E3,res:a}};var ma=function(a){this.supportedTypes=null!=a?a:[];ma.__super__.constructor.call(this)};f(ma,q);ma.prototype.supportedTypes=null;ma.prototype.src=null;ma.prototype.playbackCoreName=
null;ma.prototype.getPlaybackCoreName=function(){return this.playbackCoreName};ma.prototype.getSupportedTypes=function(){return this.supportedTypes};ma.prototype.setSupportedTypes=function(a){return this.supportedTypes=a};ma.prototype.getSrc=function(){return this.src};ma.prototype.setSrc=function(a){var b;null!=a&&""!==a||this.facade.sendNotification(e.ERROR,"The value of src is not supported: "+a);a!==this.getSrc()&&(this.src=a);b=this.facade.retrieveProxy(m.NAME).getType();this.createPlayer(b);
return a};ma.prototype.createPlayer=function(a){};ma.prototype.canPlayType=function(a){return-1!==this.getSupportedTypes().indexOf(a)?"maybe":""};var db=function(a){db.__super__.constructor.call(this,a)};f(db,ma);db.prototype.initialized=!0;db.prototype.playbackCoreName="dash";db.prototype.context=null;db.prototype.player=null;db.prototype.createPlayer=function(a){this.context=new Dash.di.DashContext;this.player=new MediaPlayer(this.context);this.player.startup();this.player.addEventListener("error",
this.onError.bind(this));this.player.debug.setLogToBrowserConsole(!1);this.player.attachView(this.facade.getVideo());this.player.setAutoPlay(!1);this.player.attachSource(this.getSrc())};db.prototype.onError=function(a){this.facade.logger.error("DASH JS Playback Error:",error)};var hd=function(){hd.__super__.constructor.call(this)};f(hd,puremvc.SimpleCommand);hd.prototype.execute=function(a){var b,c,d,f,h=this;d=a.getBody();a=this.facade.retrieveProxy(q.NAME).getCore();null!=a&&a.webkitSupportsFullscreen&&
(c=this.facade.retrieveProxy(y.NAME),c.setDisplayState(d),b={},f=this.facade.viewComponent,null!=f.requestFullscreen?(b.enter=function(){return f.requestFullscreen()},b.exit=function(){return document.cancelFullscreen()},b.event="onfullscreenchange",b.element="fullscreenElement"):null!=f.webkitRequestFullScreen?(b.enter=function(){return f.webkitRequestFullScreen()},b.exit=function(){return document.webkitCancelFullScreen()},b.event="onwebkitfullscreenchange",b.element="webkitFullscreenElement"):
null!=f.mozRequestFullScreen?(b.enter=function(){return f.mozRequestFullscreen()},b.exit=function(){return document.mozCancelFullScreen()},b.event="onmozfullscreenchange",b.element="mozFullscreenElement"):null!=f.msRequestFullScreen&&(b.enter=function(){return f.msRequestFullscreen()},b.exit=function(){return document.msCancelFullScreen()},b.event="onmozfullscreenchange",b.element="mozFullscreenElement"),d===aa.FULL_SCREEN?(b.enter(),null!=b.event&&(a[b.event]=function(a){if(null==document[b.element])return h.sendNotification(e.CHANGE_DISPLAY_STATE,
aa.NORMAL)})):d===aa.NORMAL&&(b.exit(),a[b.event]=null),this.facade.dispatchEvent(new ba("fullscreenchange",d===aa.FULL_SCREEN)))};var Ha=function(a,b){Ha.__super__.constructor.call(this,a,b)};f(Ha,X);Ha.NAME="BrandingPlugin";Ha.prototype.moduleName="branding";Ha.prototype.createModel=function(){this.registerProxy(new ga(this.config))};Ha.prototype.createView=function(){this.registerMediator(new sa)};Ha.prototype.onRegister=function(){null!=this.config.id&&this.sendNotification(e.ADD_APPLICATION_STATE,
"branding-"+this.config.id);Ha.__super__.onRegister.call(this)};Ha.prototype.listNotificationInterests=function(){return[e.READY]};v.registerPlugin("branding","html",Ha);v.registerPlugin("branding","flash",Ob);v.registerPlugin("branding","external",Ha);var Pb=function(a){Pb.__super__.constructor.call(this,a)};f(Pb,K);Pb.NAME=C.NAME;Pb.prototype.defaults={plugin:null,types:["application/dash+xml"]};Pb.prototype.initialize=function(){var a,b;window.MediaSource=window.MediaSource||window.WebKitMediaSource;
null!=window.MediaSource&&(this.sendNotification(Notification.INITIALIZED),a=new db(this.getConfigurationData().types),b=this.facade.app.retrieveProxy(R.NAME),b.registerPlaybackCore(a))};var Ia=function(a,b){Ia.__super__.constructor.call(this,a,b)};f(Ia,X);Ia.NAME="StatsPlugin";Ia.prototype.moduleName="stats";Ia.prototype.createModel=function(){this.registerProxy(new ta(this.config))};Ia.prototype.createController=function(){this.registerCommand("statsvisibilitychange",gd)};Ia.prototype.createView=
function(){this.registerMediator(new da)};Ia.prototype.createAPI=function(){return new jc(this)};Ia.prototype.listNotificationPublications=function(){return Ia.__super__.listNotificationPublications.call(this).concat([e.ADD_CONTROL,e.REMOVE_CONTROL])};v.registerPlugin("stats","html",Ia);var ob=function(a,b){ob.__super__.constructor.call(this,a,b)};f(ob,X);ob.NAME="DASHPlugin";ob.prototype.moduleName="dash";ob.prototype.createModel=function(){this.registerProxy(new Pb(this.config))};ob.prototype.registered=
function(){this.app.registerCommand(e.CHANGE_DISPLAY_STATE,hd);ob.__super__.registered.call(this)};v.registerPlugin("dash","html",ob);id.akamai={amp:{AMP:v,utils:{Utils:h,QueryString:xb,Clock:Ca,Alarm:wb}}};window.AKAMAI_MEDIA_PLAYER.saveSDK("AMP v4.0.0019",id)}window.AKAMAI_MEDIA_PLAYER.setVersion("AMP v4.0.0019")})();