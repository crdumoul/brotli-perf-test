(function($,window){var webProtocol=window.location.protocol||"http:",addressPrefix="//secure-",baseaddr=".imrworldwide.com/",configGlobalFile="glcfg500.js",configGlobalVer="500",collectionAddress="http://secure-us.imrworldwide.com/",defaultNielsenDomain="imrworldwide.com",cacheBusterRefreshMilliseconds=86400000,__instance=$.getInstances?$.getInstances():{},maxNumberOfAssetInstances=1,numSecToUpdateAssets=5,startGlobalTime=0,currentGlobalTime=0,currentGlobalSeconds=0,isBuilt=false,BUILDVERSION="5.0.0.3";Date.now=Date.now||function(){return+new Date;};$.isBuilt=function(){return isBuilt};$.getInstance=function(passedName){var name=(typeof passedName!=='undefined'&&(typeof passedName=="string"||typeof passedName=="object"&&passedName.constructor===String))?passedName:"default";if(!__instance.hasOwnProperty(name)){__instance[name]=CMB(name);}return __instance[name];};$.setTotalNumAssetsAllowed=function(val){maxNumberOfAssetInstances=isNaN(val)?val:parseInt(val,10);};$.getAddress=function(){return collectionAddress;};$.getInstances=function(){return __instance;};$.loadXmlString=function(txt){try{var xmlDoc=new ActiveXObject("Microsoft.XMLDOM");xmlDoc.async="false";xmlDoc.loadXML(txt);return(xmlDoc);}catch(e){try{var parser=new DOMParser();xmlDoc=parser.parseFromString(txt,"text/xml");return(xmlDoc);}catch(e){}}return(null);};$.isNielsenTag=function(url){var retVal=false;if(typeof(url)!=="undefined"){var index1=url.indexOf("?"),index2=url.indexOf(defaultNielsenDomain);if(index2> -1&&index2<index1){retVal=true;}}return retVal;};$.getVersion=function(){return configGlobalVer;};$.send=function(element){console.log(element.parentNode);};$.browserSafeAddEventListener=function(obj){if(obj.element.addEventListener){obj.element.addEventListener(obj.eventType,obj.func,obj.useCapture);}else if(obj.element.attachEvent){obj.element.attachEvent("on"+obj.eventType,obj.func);}};$.browserSafeRemoveEventListener=function(obj){if(obj.element.removeEventListener){obj.element.removeEventListener(obj.eventType,obj.func,obj.useCapture);}else if(obj.element.detachEvent){obj.element.detachEvent("on"+obj.eventType,obj.func);}};function globalTickUpdate(){currentGlobalTime=Date.now();currentGlobalSeconds=Math.ceil((currentGlobalTime-startGlobalTime)/1000);};function emitAssetEvents(){if((currentGlobalSeconds%numSecToUpdateAssets)===0){for(var i in __instance){var l_cmb=__instance[i];for(var j in l_cmb.assetIds){var l_obj=l_cmb.assetIds[j].evtParams;if(l_obj.param1.type==="static"){l_cmb.ggPM("14",l_obj.param1,l_obj.param2,l_obj.param3,l_obj.param4);l_cmb.ggPM("48",(l_cmb.assetIds[j].lastTimeStamp-l_cmb.assetIds[j].startTimeStamp),"","","");}}}}};function CMB(passedName){var config,configParams,listeners={},ggEventQue=[],_id=String(Date.now())+Math.round(Math.random()*10000),container;var self={name:passedName,initialized:false,assetIds:{},modules:{}};self.GetName=function(){return self.name;};self.Initialized=function(val){if(typeof val!=='undefined'){self.initialized=val;}else{return self.initialized;}};function removeAsset(paramObj){if(typeof paramObj!=='undefined'&&paramObj.target.param1.hasOwnProperty("assetid")){delete self.assetIds[paramObj.target.param1.assetid];}};function releaseAsset(asset){var refToOldObj=self.assetIds[asset.id];var secPassed=Math.ceil((refToOldObj.lastTimeStamp-refToOldObj.startTimeStamp/1000));self.ggPM("14",refToOldObj.evtParams.param1,refToOldObj.evtParams.param2,refToOldObj.evtParams.param3,refToOldObj.evtParams.param4);self.ggPM("48",secPassed,"","","");self.ggPM("56",refToOldObj.evtParams.param1,refToOldObj.evtParams.param2,refToOldObj.evtParams.param3,refToOldObj.evtParams.param4);};function handleUpdateOfAssets(paramObj){if(self.GLCFG&&self.GLCFG.PLDCR&&typeof paramObj!=='undefined'&&paramObj.target.param1.hasOwnProperty("assetid")){var oldestAssetFound=undefined,assetToStore={id:paramObj.target.param1.assetid,evtParams:paramObj.target,startTimeStamp:"",lastTimeStamp:""};if(Object.keys(self.assetIds).length>0&&self.assetIds.hasOwnProperty(assetToStore.id)){self.assetIds[assetToStore.id].lastTimeStamp=self.GLCFG.PLDCR.latestDcrTick()||0;}else{if(Object.keys(self.assetIds).length>=maxNumberOfAssetInstances){for(var i in self.assetIds){if(self.assetIds.hasOwnProperty(i)){var tempObj=self.assetIds[i];if(oldestAssetFound!==undefined&&tempObj.startTimeStamp<oldestAssetFound.startTimeStamp){oldestAssetFound=tempObj;}else if(oldestAssetFound===undefined){oldestAssetFound=self.assetIds[i];}}}releaseAsset(oldestAssetFound);}assetToStore.startTimeStamp=assetToStore.lastTimeStamp=self.GLCFG.PLDCR.latestDcrTick();self.assetIds[assetToStore.id]=assetToStore;}}};$.browserSafeAddEventListener({element:window,eventType:"beforeunload",useCapture:false,func:function(e){var assetRefs=[],i;for(i in self.assetIds){if(self.assetIds.hasOwnProperty(i)){assetRefs.push(self.assetIds[i]);}}for(i=0;i<assetRefs.length;i++){releaseAsset(assetRefs[i]);}}});self.addListener=function(type,listener){if(typeof listeners[type]=="undefined"){listeners[type]=[];}listeners[type].push(listener);};function fireEvent(event,paramObj){if(typeof event=="string"){event={type:event};}if(!event.target){event.target=paramObj;}if(!event.type){throw new Error("Event object missing 'type' property.");}if(listeners[event.type]instanceof Array){var localListeners=listeners[event.type];for(var i=0,len=localListeners.length;i<len;i++){localListeners[i].call(self,paramObj);}}};self.removeListener=function(type,listener){if(self._listeners[type]instanceof Array){var localListeners=listeners[type];for(var i=0,len=localListeners.length;i<len;i++){if(localListeners[i]===listener){localListeners.splice(i,1);break;}}}};function setupCmbListeners(global){global.registerListener("ggPM",self);global._listeners.addListener("updateCmbAssetIds",handleUpdateOfAssets);global._listeners.addListener("removeCmbAssetId",removeAsset);global._listeners.addListener("tick",globalTickUpdate);global._listeners.addListener("dcrHeartbeat",emitAssetEvents);global._listeners.addListener("flushQueue",self.emptyQueue);self.GLCFG=global;};self.ggPM=function(func,_param1,_param2,_param3,_param4){if(!self.initialized){return;}var paramObj={};paramObj.eventType=func;paramObj.param1=_param1;paramObj.param2=_param2;paramObj.param3=_param3;paramObj.param4=_param4;if(self.modules.PLCMB==2||self.modules.PLDPR==2){self.emptyQueue();fireEvent("ggPM",{evtInfo:paramObj,id:_id});}else{ggEventQue.push(paramObj);}};self.getConfigParams=function(){return configParams;};self.emptyQueue=function(){if(ggEventQue.length<=0){return}if(self.modules.PLCMB||self.modules.PLDPR){for(var i=0,len=ggEventQue.length;i<len;i+=1){fireEvent("ggPM",{evtInfo:ggEventQue[i],id:_id});}ggEventQue=[];}};self.getContainer=function(){return container;};self.ggInitialize=function(_ggParams,_instanceName,_uid,_oldFlashDetect,_detectBrowser,_container){var fxml,xn,lim,sfCode="us";container=_container;configParams={ggParams:_ggParams,uid:_uid,oldFlashDetect:_oldFlashDetect,detectBrowser:_detectBrowser,playerId:_id};if(typeof _ggParams==typeof String()){fxml=$.loadXmlString("<vi>"+_ggParams+"</vi>");xn=fxml.firstChild.firstChild;lim=0;_ggParams={};while(xn!=undefined&&lim<20){if(xn.firstChild!=null){_ggParams[xn.nodeName]=xn.firstChild.nodeValue;}xn=xn.nextSibling;lim++;}configParams.ggParams=_ggParams;}self.Initialized(true);configGlobalVer=_ggParams.nsdkv||configGlobalVer;sfCode=_ggParams.sfcode||sfCode;collectionAddress=_ggParams.coreaddress||webProtocol+addressPrefix+sfCode+baseaddr;$.loadLib("GLCFG",collectionAddress+"novms/js/2/configs/"+configGlobalFile+"?rnd="+Math.floor(Date.now()/cacheBusterRefreshMilliseconds),self,setupCmbListeners);};return self;}(function(){var libs={};$.loadLib=function(name,url,parent,callback){if(libs[name]){if(libs[name].body){window.setTimeout(function(){callback(libs[name].body(parent));},0);return;}libs[name].callbacks.push({func:callback,arg:parent});}else{libs[name]={callbacks:[]};libs[name].callbacks.push({func:callback,arg:parent});var script=window.document.createElement("script");script.src=url;window.document.getElementsByTagName('head')[0].appendChild(script);}};$.registerLib=function(name,body){var lib=libs[name];lib.body=body;var cb=lib.callbacks.shift();while(cb){cb.func(lib.body(cb.arg));cb=lib.callbacks.shift();}}})();if(window.gg_nol_FlashCallBack){for(var i=0,ele,len=window.gg_nol_FlashCallBack.length;i<len;i+=1){if(window.gg_nol_FlashCallBack[i].hasOwnProperty("callBack")){ele=document.getElementById(window.gg_nol_FlashCallBack[i].swfId);if(ele){ele[window.gg_nol_FlashCallBack[i].callBack]();}}}window.gg_nol_FlashCallBack=undefined;}$.GLCFG={PLDPR:{initFromConfig:function(config){for(var i in __instance){if(__instance[i].GLCFG&&__instance[i].GLCFG.PLDPR){__instance[i].GLCFG.PLDPR.initFromConfig(config);}}}},updateReceiver:function(data){for(var i in __instance){if(__instance[i].GLCFG){__instance[i].GLCFG.updateReceiver(data);}}}};if(!isBuilt){isBuilt=true;startGlobalTime=currentGlobalTime=Date.now();$.BUILDVERSION=BUILDVERSION;}return $;})(window.NOLCMB=window.NOLCMB||{},window);