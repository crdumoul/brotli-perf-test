dojo.require("wc.service.common");ServicesDeclarationJS={langId:"-1",storeId:"",catalogId:"",setCommonParameters:function(langId,storeId,catalogId){this.langId=langId;this.storeId=storeId;this.catalogId=catalogId;}};function nullCartTotalCookie(orderId){dojo.cookie("WC_CartTotal_"+orderId,null,{expires:-1,path:"/"});
var cookies=document.cookie.split(";");for(var i=0;i<cookies.length;i++){var index=cookies[i].indexOf("=");var name=cookies[i].substr(0,index);var value=cookies[i].substr(index+1);name=name.replace(/^\s+|\s+$/g,"");value=value.replace(/^\s+|\s+$/g,"");if(value==orderId){dojo.cookie(name,null,{expires:-1,path:"/"});
break;}}}wc.service.declare({id:"AjaxInterestItemAddAndDeleteFromCart",actionId:"AjaxInterestItemAddAndDeleteFromCart",url:getAbsoluteURL()+"AjaxInterestItemAdd",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();requestSubmitted=false;CheckoutHelperJS.deleteFromCart(serviceResponse.orderItemId,true);
MessageHelper.displayStatusMessage(MessageHelper.messages["WISHLIST_ADDED"]);},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);
}}cursor_clear();}}),wc.service.declare({id:"AjaxMattelProcessOrderTrack",actionId:"AjaxMattelProcessOrderTrack",url:"AjaxMattelOrderTrackControllerCmd",formId:"",successHandler:function(serviceResponse){},failureHandler:function(serviceResponse){}}),wc.service.declare({id:"saveBillingAndPaymentReview",actionId:"AjaxMattelSaveBillingAndPaymentCmd",url:getAbsoluteURL()+"AjaxMattelSaveBillingAndPaymentCmd",formId:"MattelCheckoutBillingForm",successHandler:function(serviceResponse){document.location.href="MattelOrderSummaryReviewView?catalogId="+CheckOutSubmit.catalogId+"&langId="+CheckOutSubmit.langId+"&storeId="+CheckOutSubmit.storeId+"&orderId="+serviceResponse.orderId+"&billingAddressId="+serviceResponse.billingAddressId;
},failureHandler:function(serviceResponse){$("#loader").css("display","none");resetRequest();var frompageName="Billing";if(serviceResponse.errorMessageKey=="_ERR_ADDR_CHILDADDR_INVALID"){document.getElementById("childAddress_err").innerHTML=serviceResponse.errorMessageParam[0];}if(serviceResponse.errorMessageKey=="_SUPC_CODE_ALREADY_REDEEMED"){var codes=serviceResponse.errorMessageParam;
if(codes!=null&&codes!=undefined&&codes.length>0){CheckoutHelperJS.shoppingCartOrdercalculateForSUPC(codes[0],codes[1]);}}else{if(serviceResponse.errorMessageKey=="_ERR_CARD_DETAILS"){MessageHelper.displayErrorMessage(MessageHelper.messages["ERROR_PAYEMENT_CARD_INVALID"]);}else{if(serviceResponse.errorMessageKey=="_DBG_API_PAY_BAD_LEN_OR_PREFIX"){MessageHelper.displayErrorMessage(MessageHelper.messages["ERROR_PAYEMENT_CARD_INVALID"]);
}else{if(serviceResponse.errorMessageKey=="_DBG_API_DO_PAYMENT_BAD_XDATE"){MessageHelper.displayErrorMessage(MessageHelper.messages["ERROR_PAYEMENT_CARD_INVALID"]);}else{if(serviceResponse.errorMessageKey=="_ERR_INVENTORY_OUT_OF_STOCK"){document.location.href="AjaxOrderItemDisplayView?storeId="+CheckoutHelper.storeId+"&catalogId="+CheckoutHelper.catalogId+"&langId="+CheckoutHelper.langId+"&errorMessageKey="+serviceResponse.errorMessageKey+"&productName="+serviceResponse.errorMessageParam[0]+"&frompageName="+frompageName;
}else{if(serviceResponse.errorMessageKey=="PLUGIN_COMMUNICATION_FAILED"){MessageHelper.displayErrorMessage(MessageHelper.messages["PLUGIN_COMMUNICATION_FAILED"]);}else{if(serviceResponse.errorMessageKey=="_ERR_CREDIT_CARD_TOKENIZATION_UNAVAILABLE"){MessageHelper.displayErrorMessage(MessageHelper.messages["_ERR_CREDIT_CARD_TOKENIZATION_UNAVAILABLE"]);
}else{if(serviceResponse.errorMessageKey=="TOKEN_ERROR"){MessageHelper.displayErrorMessage(MessageHelper.messages["_ERR_CREDIT_CARD_TOKENIZATION_UNAVAILABLE"]);}else{if(serviceResponse.errorMessageKey=="_ERR_SYSTEM_NOT_AVAILABLE"){MessageHelper.displayErrorMessage(MessageHelper.messages["_ERR_SYSTEM_NOT_AVAILABLE"]);
}else{if(serviceResponse.errorMessageKey=="_ERR_CREDIT_CARD_TOKENIZATION_UNAVAILABLE"){MessageHelper.displayErrorMessage(MessageHelper.messages["ERROR_PAYEMENT_CREDIT_TOKEN"]);}else{if(serviceResponse.errorMessageKey=="_ERR_COMMAND_EXCEPTION"){var arr=serviceResponse.errorMessage.split(/[\n]+/);var Map={};
var strng="";for(var i=0;i<arr.length;i++){var str=arr[i].split(/[=]+/);var indexCurrentAddress=str[0].indexOf("currentAddressJsonObj");var indexSuggAddress=str[0].indexOf("suggestedAddressJsonObj");if(indexCurrentAddress!=-1||indexSuggAddress!=-1){if(indexCurrentAddress!=-1){strng="c";}else{strng="s";
}Map[strng+str[1]]=str[2];}else{Map[strng+str[0]]=str[1];}}document.getElementById("avsExection").value="success";document.getElementById("ICurrentAddress1").innerHTML=Map["caddress1"];document.getElementById("ICurrentAddress2").innerHTML=Map["caddress2"];document.getElementById("ICurrentCity").innerHTML=Map["ccity"];
document.getElementById("ICurrentState").innerHTML=Map["cstate"];document.getElementById("ICurrentZipCode").innerHTML=Map["czipCode"];document.getElementById("ICurrentCountry").innerHTML=Map["ccountry"];document.getElementById("CurrentAddress1").innerHTML=Map["caddress1"];document.getElementById("CurrentAddress2").innerHTML=Map["caddress2"];
document.getElementById("CurrentCity").innerHTML=Map["ccity"];document.getElementById("CurrentState").innerHTML=Map["cstate"];document.getElementById("CurrentZipCode").innerHTML=Map["czipCode"];document.getElementById("CurrentCountry").innerHTML=Map["ccountry"];document.getElementById("commonFirstName").value=Map["cfirstName"];
document.getElementById("commonLastName").value=document.getElementById("lastNameCheck").value;document.getElementById("commonShippingGeoCode").value=Map["cshippingGeoCode"];document.getElementById("commonPhone1").value=Map["cphone1"];document.getElementById("commonPhone2").value=Map["cphone2"];document.getElementById("commonPhone1Type").value=Map["cphone1Type"];
document.getElementById("commonPhone2Type").value=Map["cphone2Type"];document.getElementById("commonEmail").value=Map["cemail1"];document.getElementById("selectedDefaultAddress").value=Map["caddressField3"];document.getElementById("enteredAddress1").value=Map["caddress1"];document.getElementById("enteredAddress2").value=Map["caddress2"];
document.getElementById("enteredCity").value=Map["ccity"];document.getElementById("enteredState").value=Map["cstate"];document.getElementById("enteredZipCode").value=Map["czipCode"];document.getElementById("enteredCountry").value=Map["ccountry"];if(Map["caddressValidationType"].match("InvalidAddress")){document.getElementById("typeOfAddress").value="InvalidAddress";
$("#modal2").lightbox_me({centered:true,overlayCSS:{background:"black",opacity:0.5}});}else{if(Map["caddressValidationType"].match("SuggestedAddress")){document.getElementById("typeOfAddress").value="SuggestedAddress";document.getElementById("sugAddress1").innerHTML=Map["saddress1"];document.getElementById("sugAddress2").innerHTML=Map["saddress2"];
document.getElementById("sugCity").innerHTML=Map["scity"];document.getElementById("sugState").innerHTML=Map["sstate"];document.getElementById("sugZipCode").innerHTML=Map["szipCode"];document.getElementById("sugCountry").innerHTML=Map["scountry"];$("#CurrentAddress1").removeClass("error");$("#CurrentAddress2").removeClass("error");
$("#CurrentCity").removeClass("error");$("#CurrentState").removeClass("error");$("#CurrentZipCode").removeClass("error");$("#CurrentCountry").removeClass("error");if(Map["saddress1"]!=undefined){if(Map["caddress1"].toLowerCase()!=Map["saddress1"].toLowerCase()){$("#CurrentAddress1").addClass("error");
}}if(Map["saddress2"]!=undefined){if(Map["caddress2"].toLowerCase()!=Map["saddress2"].toLowerCase()){$("#CurrentAddress2").addClass("error");}}if(Map["scity"]!=undefined){if(Map["ccity"].toLowerCase()!=Map["scity"].toLowerCase()){$("#CurrentCity").addClass("error");}}if(Map["sstate"]!=undefined){if(Map["cstate"].toLowerCase()!=Map["sstate"].toLowerCase()){$("#CurrentState").addClass("error");
}}if(Map["szipCode"]!=undefined){if(Map["czipCode"].toLowerCase()!=Map["szipCode"].toLowerCase()){$("#CurrentZipCode").addClass("error");}}if(Map["scountry"]!=undefined){if(Map["ccountry"].toLowerCase()!=Map["scountry"].toLowerCase()){$("#CurrentCountry").addClass("error");}}$("#modal1").lightbox_me({centered:true,overlayCSS:{background:"black",opacity:0.5}});
}}}else{if(serviceResponse.errorMessageKey=="CREDIT_CARD_NOT_ENTERED"){Mattel.Analytics.publishFormErrors();$("#errMsgDiv").show();MessageHelper.displayErrorMessage(MessageHelper.messages["CREDIT_CARD_NOT_ENTERED"]);}else{if(serviceResponse.errorMessageKey=="_ERR_MORE_THAN_MAXIMUM_MEMBERSHIP_PRODUCT_PURCHASE"){Mattel.Analytics.publishFormErrors();
$("#errMsgDiv").show();MessageHelper.displayErrorMessage(MessageHelper.messages["_ERR_MORE_THAN_MAXIMUM_MEMBERSHIP_PRODUCT_PURCHASE"]);}}}}}}}}}}}}}}}),wc.service.declare({id:"saveBillingAndPayment",actionId:"AjaxMattelSaveBillingAndPaymentCmd",url:getAbsoluteURL()+"AjaxMattelSaveBillingAndPaymentCmd",formId:"MattelCheckoutBillingForm",successHandler:function(serviceResponse){document.location.href="MattelOrderSummaryView?catalogId="+CheckoutHelper.catalogId+"&langId="+CheckoutHelper.langId+"&storeId="+CheckoutHelper.storeId+"&orderId="+serviceResponse.orderId+"&billingAddressId="+serviceResponse.billingAddressId;
},failureHandler:function(serviceResponse){$("#loader").css("display","none");resetRequest();var frompageName="Billing";if(serviceResponse.errorMessageKey=="_ERR_ADDR_CHILDADDR_INVALID"){document.getElementById("childAddress_err").innerHTML=serviceResponse.errorMessageParam[0];}if(serviceResponse.errorMessageKey=="_SUPC_CODE_ALREADY_REDEEMED"){var codes=serviceResponse.errorMessageParam;
if(codes!=null&&codes!=undefined&&codes.length>0){CheckoutHelperJS.shoppingCartOrdercalculateForSUPC(codes[0],codes[1]);}}else{if(serviceResponse.errorMessageKey=="_ERR_CARD_DETAILS"){MessageHelper.displayErrorMessage(MessageHelper.messages["ERROR_PAYEMENT_CARD_INVALID"]);}else{if(serviceResponse.errorMessageKey=="_DBG_API_PAY_BAD_LEN_OR_PREFIX"){MessageHelper.displayErrorMessage(MessageHelper.messages["ERROR_PAYEMENT_CARD_INVALID"]);
}else{if(serviceResponse.errorMessageKey=="_DBG_API_DO_PAYMENT_BAD_XDATE"){MessageHelper.displayErrorMessage(MessageHelper.messages["ERROR_PAYEMENT_CARD_INVALID"]);}else{if(serviceResponse.errorMessageKey=="_ERR_INVENTORY_OUT_OF_STOCK"){document.location.href="AjaxOrderItemDisplayView?storeId="+CheckoutHelper.storeId+"&catalogId="+CheckoutHelper.catalogId+"&langId="+CheckoutHelper.langId+"&errorMessageKey="+serviceResponse.errorMessageKey+"&productName="+serviceResponse.errorMessageParam[0]+"&frompageName="+frompageName;
}else{if(serviceResponse.errorMessageKey=="PLUGIN_COMMUNICATION_FAILED"){MessageHelper.displayErrorMessage(MessageHelper.messages["PLUGIN_COMMUNICATION_FAILED"]);}else{if(serviceResponse.errorMessageKey=="_ERR_CREDIT_CARD_TOKENIZATION_UNAVAILABLE"){MessageHelper.displayErrorMessage(MessageHelper.messages["_ERR_CREDIT_CARD_TOKENIZATION_UNAVAILABLE"]);
}else{if(serviceResponse.errorMessageKey=="TOKEN_ERROR"){MessageHelper.displayErrorMessage(MessageHelper.messages["_ERR_CREDIT_CARD_TOKENIZATION_UNAVAILABLE"]);}else{if(serviceResponse.errorMessageKey=="_ERR_SYSTEM_NOT_AVAILABLE"){MessageHelper.displayErrorMessage(MessageHelper.messages["_ERR_SYSTEM_NOT_AVAILABLE"]);
}else{if(serviceResponse.errorMessageKey=="_ERR_CREDIT_CARD_TOKENIZATION_UNAVAILABLE"){MessageHelper.displayErrorMessage(MessageHelper.messages["ERROR_PAYEMENT_CREDIT_TOKEN"]);}else{if(serviceResponse.errorMessageKey=="_ERR_COMMAND_EXCEPTION"){var arr=serviceResponse.errorMessage.split(/[\n]+/);var Map={};
var strng="";for(var i=0;i<arr.length;i++){var str=arr[i].split(/[=]+/);var indexCurrentAddress=str[0].indexOf("currentAddressJsonObj");var indexSuggAddress=str[0].indexOf("suggestedAddressJsonObj");if(indexCurrentAddress!=-1||indexSuggAddress!=-1){if(indexCurrentAddress!=-1){strng="c";}else{strng="s";
}Map[strng+str[1]]=str[2];}else{Map[strng+str[0]]=str[1];}}document.getElementById("avsExection").value="success";document.getElementById("ICurrentAddress1").innerHTML=Map["caddress1"];document.getElementById("ICurrentAddress2").innerHTML=Map["caddress2"];document.getElementById("ICurrentCity").innerHTML=Map["ccity"];
document.getElementById("ICurrentState").innerHTML=Map["cstate"];document.getElementById("ICurrentZipCode").innerHTML=Map["czipCode"];document.getElementById("ICurrentCountry").innerHTML=Map["ccountry"];document.getElementById("CurrentAddress1").innerHTML=Map["caddress1"];document.getElementById("CurrentAddress2").innerHTML=Map["caddress2"];
document.getElementById("CurrentCity").innerHTML=Map["ccity"];document.getElementById("CurrentState").innerHTML=Map["cstate"];document.getElementById("CurrentZipCode").innerHTML=Map["czipCode"];document.getElementById("CurrentCountry").innerHTML=Map["ccountry"];document.getElementById("commonFirstName").value=Map["cfirstName"];
document.getElementById("commonLastName").value=document.getElementById("lastNameCheck").value;document.getElementById("commonShippingGeoCode").value=Map["cshippingGeoCode"];document.getElementById("commonPhone1").value=Map["cphone1"];document.getElementById("commonPhone2").value=Map["cphone2"];document.getElementById("commonPhone1Type").value=Map["cphone1Type"];
document.getElementById("commonPhone2Type").value=Map["cphone2Type"];document.getElementById("commonEmail").value=Map["cemail1"];document.getElementById("selectedDefaultAddress").value=Map["caddressField3"];document.getElementById("enteredAddress1").value=Map["caddress1"];document.getElementById("enteredAddress2").value=Map["caddress2"];
document.getElementById("enteredCity").value=Map["ccity"];document.getElementById("enteredState").value=Map["cstate"];document.getElementById("enteredZipCode").value=Map["czipCode"];document.getElementById("enteredCountry").value=Map["ccountry"];if(Map["caddressValidationType"].match("InvalidAddress")){document.getElementById("typeOfAddress").value="InvalidAddress";
$("#verifyPopup2").lightbox_me({centered:true,overlayCSS:{background:"black",opacity:0.5}});}else{if(Map["caddressValidationType"].match("SuggestedAddress")){document.getElementById("typeOfAddress").value="SuggestedAddress";document.getElementById("sugAddress1").innerHTML=Map["saddress1"];document.getElementById("sugAddress2").innerHTML=Map["saddress2"];
document.getElementById("sugCity").innerHTML=Map["scity"];document.getElementById("sugState").innerHTML=Map["sstate"];document.getElementById("sugZipCode").innerHTML=Map["szipCode"];document.getElementById("sugCountry").innerHTML=Map["scountry"];$("#CurrentAddress1").removeClass("error");$("#CurrentAddress2").removeClass("error");
$("#CurrentCity").removeClass("error");$("#CurrentState").removeClass("error");$("#CurrentZipCode").removeClass("error");$("#CurrentCountry").removeClass("error");if(Map["saddress1"]!=undefined){if(Map["caddress1"].toLowerCase()!=Map["saddress1"].toLowerCase()){$("#CurrentAddress1").addClass("error");
}}if(Map["saddress2"]!=undefined){if(Map["caddress2"].toLowerCase()!=Map["saddress2"].toLowerCase()){$("#CurrentAddress2").addClass("error");}}if(Map["scity"]!=undefined){if(Map["ccity"].toLowerCase()!=Map["scity"].toLowerCase()){$("#CurrentCity").addClass("error");}}if(Map["sstate"]!=undefined){if(Map["cstate"].toLowerCase()!=Map["sstate"].toLowerCase()){$("#CurrentState").addClass("error");
}}if(Map["szipCode"]!=undefined){if(Map["czipCode"].toLowerCase()!=Map["szipCode"].toLowerCase()){$("#CurrentZipCode").addClass("error");}}if(Map["scountry"]!=undefined){if(Map["ccountry"].toLowerCase()!=Map["scountry"].toLowerCase()){$("#CurrentCountry").addClass("error");}}$("#verifyPopup1").lightbox_me({centered:true,overlayCSS:{background:"black",opacity:0.5}});
}}}else{if(serviceResponse.errorMessageKey=="CREDIT_CARD_NOT_ENTERED"){Mattel.Analytics.publishFormErrors();$("#errMsgDiv").show();MessageHelper.displayErrorMessage(MessageHelper.messages["CREDIT_CARD_NOT_ENTERED"]);}}}}}}}}}}}}}}),wc.service.declare({id:"AjaxAddOrderItem",actionId:"AjaxAddOrderItem",url:getAbsoluteURL()+"AjaxOrderChangeServiceItemAdd",formId:"",successHandler:function(serviceResponse){resetRequest();
if($("#pageName").val()=="SHOPPING_CART"&&$("#isAset").val()=="true"){console.info("Inside Add order item of Style Header Set...");var params_set=[];var addedServices=false;var oldOrderItemId=$("#oldOrderItem").val();if($("#addedServicesFlag_"+oldOrderItemId).val()!=null){var addedServices=$("#addedServicesFlag_"+oldOrderItemId).val();
}if(addedServices){params_set.currentOrderItemId=oldOrderItemId;params_set.orderId=serviceResponse.orderId;params_set.newOrderItemId=serviceResponse.orderItemId.sort()[0];params_set.updatePAttrOrderItemIdForStyleHeaderSet=true;wc.service.invoke("mattelEditStyleHeaderSet",params_set);}else{ServicesEventMapping.setCartChangeEvent("cart_remove");
CheckoutHelperJS.deleteFromCart(oldOrderItemId,"",true);$.v_modal.close();MessageHelper.displayMattelErrorMessage("The item has been successfully added to your shopping cart");}}var emailPromoCookie=getCookie("WC_EmailPromoCode_"+ServicesDeclarationJS.storeId);console.info("emailPromoCookie :"+emailPromoCookie);
if(emailPromoCookie!=undefined&&emailPromoCookie!=null&&emailPromoCookie!=""){var params=[];params.storeId=ServicesDeclarationJS.storeId;params.catalogId=ServicesDeclarationJS.catalogId;params.langId=ServicesDeclarationJS.langId;params.orderId=serviceResponse.orderId;wc.service.invoke("applyEmailPromotion",params);
}},failureHandler:function(serviceResponse){$("#addTocartLoadIcon").css("display","none");$("#addTocartLoadIconADD").css("display","none");$("#addTocartLoadIconQV").css("display","none");resetRequest();var storeName=Mattel.storeName;var templateType=Mattel.templateType;console.info("Store Name :"+storeName);
console.info("Store TemplateType : "+templateType);if(templateType=="AGTemplate"){if(serviceResponse.errorMessage){if(serviceResponse.errorMessageKey=="_ERR_NO_ELIGIBLE_TRADING"){MessageHelper.displayMattelErrorMessage(MessageHelper.messages["ERROR_CONTRACT_EXPIRED_GOTO_ORDER"]);}else{if(serviceResponse.errorMessageKey=="_ERR_RETRIEVE_PRICE"){MessageHelper.displayMattelErrorMessage(MessageHelper.messages["ERROR_RETRIEVE_PRICE"]);
}else{if(serviceResponse.errorMessageKey=="_ERR_ADDTOCART_INVALID_THRESHOLD_QUANTITY"){document.location.href="AjaxOrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&thersholdQty="+serviceResponse.errorMessageParam[0]+"&productName="+serviceResponse.errorMessageParam[1]+"&errorMessageKey="+serviceResponse.errorMessageKey;
}else{if(serviceResponse.errorMessageKey=="_ERR_INVALID_THRESHOLD_QUANTITY"){document.location.href="AjaxOrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&thersholdQty="+serviceResponse.errorMessageParam[0]+"&productName="+serviceResponse.errorMessageParam[1]+"&errorMessageKey="+serviceResponse.errorMessageKey;
}else{if(serviceResponse.errorMessageKey=="_ERR_INVALID_QUANTITY"){url="AjaxOrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&errorMessageKey="+serviceResponse.errorMessageKey+"&cartQtyLimit="+serviceResponse.errorMessageParam[0];
document.location.href=url;}else{if(serviceResponse.errorMessageKey=="_ERR_TOTAL_CART_LINE_ITEM_LIMIT_EXCEEDS"){document.location.href="AjaxOrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&errorMessageKey="+serviceResponse.errorMessageKey+"&cartQtyLimit="+serviceResponse.errorMessageParam[0];
}else{if(serviceResponse.errorMessageKey=="_ERR_CATALOG_ENTRY_MARK_FOR_DELETE"){document.location.href="AjaxOrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&errorMessageKey="+serviceResponse.errorMessageKey+"&mattelErrorMessage="+serviceResponse.errorMessage;
}else{if(serviceResponse.errorMessageKey=="_ERR_QUANTITY_NOT_AVAILABLE_ATP_KILLSWITCHED"){document.location.href="AjaxOrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&errorMessageKey="+serviceResponse.errorMessageKey+"&Catqty="+serviceResponse.errorMessageParam;
}else{if(serviceResponse.errorMessageKey=="_ERR_REQUESTED_QUANTITY_NOT_AVAILABLE"){document.location.href="AjaxOrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&errorMessageKey="+serviceResponse.errorMessageKey+"&availableQty="+serviceResponse.errorMessageParam[0]+"&catEntryId="+serviceResponse.errorMessageParam[2];
}}}}}}}}}}}else{if(serviceResponse.errorMessage){if(serviceResponse.errorMessageKey=="_ERR_NO_ELIGIBLE_TRADING"){MessageHelper.displayMattelErrorMessage(MessageHelper.messages["ERROR_CONTRACT_EXPIRED_GOTO_ORDER"]);}else{if(serviceResponse.errorMessageKey=="_ERR_RETRIEVE_PRICE"){MessageHelper.displayMattelErrorMessage(MessageHelper.messages["ERROR_RETRIEVE_PRICE"]);
}else{if(serviceResponse.errorMessageKey=="_ERR_INVALID_THRESHOLD_QUANTITY"){document.location.href="OrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&thersholdQty="+serviceResponse.errorMessageParam[0]+"&productName="+serviceResponse.errorMessageParam[1]+"&errorMessageKey="+serviceResponse.errorMessageKey;
}else{if(serviceResponse.errorMessageKey=="_ERR_ADDTOCART_INVALID_THRESHOLD_QUANTITY"){document.location.href="OrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&thersholdQty="+serviceResponse.errorMessageParam[0]+"&productName="+serviceResponse.errorMessageParam[1]+"&errorMessageKey="+serviceResponse.errorMessageKey;
}else{if(serviceResponse.errorMessageKey=="_ERR_INVALID_QUANTITY"){url="OrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&errorMessageKey="+serviceResponse.errorMessageKey+"&cartQtyLimit="+serviceResponse.errorMessageParam[0];
document.location.href=url;}else{if(serviceResponse.errorMessageKey=="_ERR_TOTAL_CART_LINE_ITEM_LIMIT_EXCEEDS"){document.location.href="OrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&errorMessageKey="+serviceResponse.errorMessageKey+"&cartQtyLimit="+serviceResponse.errorMessageParam[0];
}else{if(serviceResponse.errorMessageKey=="_ERR_CATALOG_ENTRY_MARK_FOR_DELETE"){document.location.href="OrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&errorMessageKey="+serviceResponse.errorMessageKey+"&mattelErrorMessage="+serviceResponse.errorMessage;
}else{if(serviceResponse.errorMessageKey=="_ERR_QUANTITY_NOT_AVAILABLE_ATP_KILLSWITCHED"){document.location.href="OrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&errorMessageKey="+serviceResponse.errorMessageKey+"&Catqty="+serviceResponse.errorMessageParam;
}else{if(serviceResponse.errorMessageKey=="_ERR_REQUESTED_QUANTITY_NOT_AVAILABLE"){document.location.href="OrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&errorMessageKey="+serviceResponse.errorMessageKey+"&availableQty="+serviceResponse.errorMessageParam[0]+"&catEntryId="+serviceResponse.errorMessageParam[2];
}else{if(serviceResponse.errorMessageKey=="_ERR_ACCOUNT_PURCHASE_LIMIT_FAILURE"){document.location.href="OrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&errorMessageKey="+serviceResponse.errorMessageKey+"&quantityLimit="+serviceResponse.errorMessageParam[0];
}}}}}}}}}}}}cursor_clear();}}),wc.service.declare({id:"mattelEditStyleHeaderSet",actionId:"mattelEditStyleHeaderSet",url:getAbsoluteURL()+"MattelAddOnServiceAndGiftOptionSaveCmd",formId:"",successHandler:function(serviceResponse){console.info("In success handler for update Pattribute...");var oldOrderItemId=$("#oldOrderItem").val();
ServicesEventMapping.setCartChangeEvent("cart_remove");CheckoutHelperJS.deleteFromCart(oldOrderItemId,"",true);$.v_modal.close();MessageHelper.displayMattelErrorMessage("The item has been successfully added to your shopping cart");},failureHandler:function(serviceResponse){console.info("In failure handler for update Pattribute...");
}}),wc.service.declare({id:"AjaxMattelCsrOrderEntryUtilCmd",actionId:"AjaxMattelCsrOrderEntryUtilCmd",url:getAbsoluteURL()+"AjaxMattelCsrOrderEntryUtilCmd",formId:"",successHandler:function(serviceResponse){MattelCsr.updateDropBox(serviceResponse.jsonObj.DropDownValues);},failureHandler:function(serviceResponse){alert("failure");
}}),wc.service.declare({id:"AjaxMattelPriceOverrideCmd",actionId:"AjaxMattelPriceOverrideCmd",url:getAbsoluteURL()+"AjaxMattelPriceOverrideCmd",formId:"",successHandler:function(serviceResponse){alert(serviceResponse.orderItemId);},failureHandler:function(serviceResponse){alert("failure");}}),wc.service.declare({id:"AjaxMattelShipChargeOverrideCmd",actionId:"AjaxMattelShipChargeOverrideCmd",url:getAbsoluteURL()+"AjaxMattelShipChargeOverrideCmd",formId:"",successHandler:function(serviceResponse){alert(serviceResponse.orderId);
},failureHandler:function(serviceResponse){alert("failure");}}),wc.service.declare({id:"AjaxAddOrderItem_shopCart",actionId:"AjaxAddOrderItem",url:getAbsoluteURL()+"AjaxOrderChangeServiceItemAdd",formId:"",successHandler:function(serviceResponse){document.location.href="AjaxOrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId;
},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){if(serviceResponse.errorMessageKey=="_ERR_NO_ELIGIBLE_TRADING"){MessageHelper.displayErrorMessage(MessageHelper.messages["ERROR_CONTRACT_EXPIRED_GOTO_ORDER"]);}else{if(serviceResponse.errorMessageKey=="_ERR_RETRIEVE_PRICE"){MessageHelper.displayErrorMessage(MessageHelper.messages["ERROR_RETRIEVE_PRICE"]);
}else{if(serviceResponse.errorMessageKey=="_ERR_ACCOUNT_PURCHASE_LIMIT_FAILURE"){document.location.href="OrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&errorMessageKey="+serviceResponse.errorMessageKey+"&quantityLimit="+serviceResponse.errorMessageParam[0];
}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}}}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxDeleteOrderItem",actionId:"AjaxDeleteOrderItem",url:getAbsoluteURL()+"AjaxOrderChangeServiceItemDelete",formId:"",successHandler:function(serviceResponse){resetRequest();
var renderContext=wc.render.getContextById("MattelMSOrderDetailContext");if(renderContext!=undefined&&renderContext!=null){wc.render.updateContext("MattelMSOrderDetailContext",{"updateContextFlag":true});}},failureHandler:function(serviceResponse){resetRequest();if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);
}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}Mattel.Analytics.publishFormErrors();cursor_clear();}}),wc.service.declare({id:"AjaxDeleteOrderItemForShippingBillingPage",actionId:"AjaxDeleteOrderItemForShippingBillingPage",url:getAbsoluteURL()+"AjaxOrderChangeServiceItemDelete",formId:"",successHandler:function(serviceResponse){resetRequest();
var renderContext=wc.render.getContextById("MattelMSOrderDetailContext");if(renderContext!=undefined&&renderContext!=null){wc.render.updateContext("MattelMSOrderDetailContext",{"updateContextFlag":true});}},failureHandler:function(serviceResponse){resetRequest();if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);
}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}Mattel.Analytics.publishFormErrors();cursor_clear();}}),wc.service.declare({id:"AjaxDeleteOrderItemFromCart",actionId:"AjaxDeleteOrderItem",url:getAbsoluteURL()+"AjaxOrderChangeServiceItemDelete",formId:"",successHandler:function(serviceResponse){resetRequest();
},failureHandler:function(serviceResponse){resetRequest();if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}Mattel.Analytics.publishFormErrors();
cursor_clear();}}),wc.service.declare({id:"AjaxDeleteOrderItem1",actionId:"AjaxDeleteOrderItem",url:getAbsoluteURL()+"AjaxOrderChangeServiceItemDelete",formId:"",successHandler:function(serviceResponse){resetRequest();if(!CheckoutHelperJS.pendingOrderDetailsPage){setDeleteCartCookie();}else{cursor_clear();
}},failureHandler:function(serviceResponse){resetRequest();if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}Mattel.Analytics.publishFormErrors();
cursor_clear();}}),wc.service.declare({id:"AjaxUpdateOrderItem",actionId:"AjaxUpdateOrderItem",url:getAbsoluteURL()+"AjaxOrderChangeServiceItemUpdate",formId:"",successHandler:function(serviceResponse){CommonControllersDeclarationJS.updateCommonFlag=true;var renderContext=wc.render.getContextById("MattelMSOrderDetailContext");
if(renderContext!=undefined&&renderContext!=null){wc.render.updateContext("MattelMSOrderDetailContext",{"updateContextFlag":true});}wc.render.updateContext("MattelOrderBillingContext",{"fromPage":"billingPage"});dojo.byId("MattelErrorMessageText").innerHTML="";if(null!=dojo.byId("MattelErrorMessageDiv")){dojo.byId("MattelErrorMessageDiv").style.display="none";
}cursor_clear();},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){if(serviceResponse.errorMessageKey=="_ERR_RETRIEVE_PRICE"){MessageHelper.displayErrorMessage(MessageHelper.messages["ERROR_RETRIEVE_PRICE_QTY_UPDATE"]);}else{if(serviceResponse.errorMessageKey=="_ERR_INVALID_THRESHOLD_QUANTITY"){MessageHelper.setThersholdQty(serviceResponse.errorMessageParam);
MessageHelper.displayMattelErrorMessage(MessageHelper.messages["ERROR_ITEM_THERSHOLD_QUANTITY_EXCEED"]);}else{if(serviceResponse.errorMessageKey=="_ERR_REQUESTED_QUANTITY_NOT_AVAILABLE"){MessageHelper.displayLimitedQtyErrorMessage(MessageHelper.messages["ERROR_REQUESTED_QUANTITY_NOT_AVAILABLE_VAR"],serviceResponse.errorMessageParam[0],serviceResponse.errorMessageParam[1]);
}else{if(serviceResponse.errorMessageKey=="_ERR_INVALID_QUANTITY"){MessageHelper.displayCartErrorMessage(MessageHelper.messages["ERROR_CART_ITEM_QUANTITY_EXCEED_1000"],serviceResponse.errorMessageParam[0]);}else{if(serviceResponse.errorMessageKey=="_ERR_QUANTITY_NOT_AVAILABLE_ATP_KILLSWITCHED"){var templateType=Mattel.templateType;
console.info("Store TemplateType : "+templateType);if(templateType!="AGTemplate"){document.location.href="OrderItemDisplayView?catalogId="+ServicesDeclarationJS.catalogId+"&errorViewName=OrderItemDisplayView&langId="+ServicesDeclarationJS.langId+"&storeId="+ServicesDeclarationJS.storeId+"&URL=OrderItemDisplayView"+"&Catqty="+serviceResponse.errorMessageParam+"&errorMessageKey="+serviceResponse.errorMessageKey;
}else{document.location.href="AjaxOrderItemDisplayView?catalogId="+ServicesDeclarationJS.catalogId+"&errorViewName=AjaxOrderItemDisplayView&langId="+ServicesDeclarationJS.langId+"&storeId="+ServicesDeclarationJS.storeId+"&URL=AjaxOrderItemDisplayView"+"&Catqty="+serviceResponse.errorMessageParam+"&errorMessageKey="+serviceResponse.errorMessageKey;
}}else{if(serviceResponse.errorMessageKey=="_ERR_ACCOUNT_PURCHASE_LIMIT_FAILURE"){document.location.href="OrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&errorMessageKey="+serviceResponse.errorMessageKey+"&quantityLimit="+serviceResponse.errorMessageParam[0];
}else{MessageHelper.displayMattelErrorMessage(serviceResponse.errorMessage);}}}}}}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}wc.render.updateContext("ShopCartPaginationDisplay_Context",{"itemThersholdError":true});var renderContext=wc.render.getContextById("MattelMSOrderDetailContext");
if(renderContext!=undefined&&renderContext!=null){wc.render.updateContext("MattelMSOrderDetailContext",{"updateContextFlag":true});}Mattel.Analytics.publishFormErrors();cursor_clear();}}),wc.service.declare({id:"AjaxUpdateOrderItemForSplit",actionId:"AjaxUpdateOrderItemForSplit",url:getAbsoluteURL()+"AjaxManageShopCart",formId:"",successHandler:function(serviceResponse){CheckoutHelperJS.splitCartLineItemAdd(serviceResponse.splitItemSequence,serviceResponse.orderId);
CheckoutHelperJS.splitItemSequence=serviceResponse.splitItemSequence;console.info("splitItemSequence :"+serviceResponse.splitItemSequence);MessageHelper.hideAndClearMessage();cursor_clear();},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){if(serviceResponse.errorMessageKey=="_ERR_RETRIEVE_PRICE"){MessageHelper.displayErrorMessage(MessageHelper.messages["ERROR_RETRIEVE_PRICE_QTY_UPDATE"]);
}else{if(serviceResponse.errorMessageKey=="_ERR_INVALID_THRESHOLD_QUANTITY"){MessageHelper.setThersholdQty(serviceResponse.errorMessageParam);MessageHelper.displayMattelErrorMessage(MessageHelper.messages["ERROR_ITEM_THERSHOLD_QUANTITY_EXCEED"]);}else{if(serviceResponse.errorMessageKey=="_ERR_INVALID_QUANTITY"){MessageHelper.displayMattelErrorMessage(MessageHelper.messages["ERROR_CART_ITEM_QUANTITY_EXCEED_1000"]);
}else{MessageHelper.displayMattelErrorMessage(serviceResponse.errorMessage);}}}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}Mattel.Analytics.publishFormErrors();cursor_clear();}}),wc.service.declare({id:"AddOrderItemdForSplit",actionId:"AddOrderItemdForSplit",url:getAbsoluteURL()+"AjaxManageShopCart",formId:"",successHandler:function(serviceResponse){if(CheckoutHelperJS.splitItem){CheckoutHelperJS.splitCartLineItemAddServices(serviceResponse.orderItemId);
}else{var renderContext=wc.render.getContextById("MattelMSOrderDetailContext");if(renderContext!=undefined&&renderContext!=null){wc.render.updateContext("MattelMSOrderDetailContext",{"updateContextFlag":true});}}},failureHandler:function(serviceResponse){var templateType=Mattel.templateType;console.info("Store Name :"+storeName);
console.info("Store TemplateType : "+templateType);if(serviceResponse.errorMessage){if(serviceResponse.errorMessageKey=="_ERR_NO_ELIGIBLE_TRADING"){}else{if(serviceResponse.errorMessageKey=="_ERR_RETRIEVE_PRICE"){var tempString=storeNLS["GENERICERR_MAINTEXT"];tempString=dojo.string.substitute(tempString,{0:storeNLS["GENERICERR_CONTACT_US"]});
}else{if(serviceResponse.errorMessageKey=="_ERR_ADDTOCART_INVALID_THRESHOLD_QUANTITY"){document.location.href="OrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&thersholdQty="+serviceResponse.errorMessageParam[0]+"&productName="+serviceResponse.errorMessageParam[1]+"&errorMessageKey="+serviceResponse.errorMessageKey;
}else{if(serviceResponse.errorMessageKey=="_ERR_INVALID_QUANTITY"){document.location.href="OrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&errorMessageKey="+serviceResponse.errorMessageKey;}else{if(serviceResponse.errorMessageKey=="_ERR_TOTAL_CART_LINE_ITEM_LIMIT_EXCEEDS"){document.location.href="OrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&errorMessageKey="+serviceResponse.errorMessageKey;
}else{if(serviceResponse.errorMessageKey=="_ERR_INVALID_THRESHOLD_QUANTITY"){document.location.href="OrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&thersholdQty="+serviceResponse.errorMessageParam[0]+"&productName="+serviceResponse.errorMessageParam[1]+"&errorMessageKey="+serviceResponse.errorMessageKey;
}else{}}}}}}}else{if(templateType=="AGTemplate"){if(serviceResponse.errorMessageKey=="_ERR_TOTAL_CART_LINE_ITEM_LIMIT_EXCEEDS"){document.location.href="AjaxOrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&errorMessageKey="+serviceResponse.errorMessageKey+"&cartQtyLimit="+serviceResponse.errorMessageParam[0];
}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}}else{if(serviceResponse.errorMessageKey=="_ERR_TOTAL_CART_LINE_ITEM_LIMIT_EXCEEDS"){document.location.href="OrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&errorMessageKey="+serviceResponse.errorMessageKey+"&cartQtyLimit="+serviceResponse.errorMessageParam[0];
}else{if(serviceResponse.errorMessageKey=="_ERR_INVALID_THRESHOLD_QUANTITY"){document.location.href="OrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&thersholdQty="+serviceResponse.errorMessageParam[0]+"&productName="+serviceResponse.errorMessageParam[1]+"&errorMessageKey="+serviceResponse.errorMessageKey;
}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}}}}cursor_clear();}}),wc.service.declare({id:"AjaxUpdateOrderItemForSplitMS",actionId:"AjaxUpdateOrderItemForSplit",url:getAbsoluteURL()+"AjaxManageShopCart",formId:"",successHandler:function(serviceResponse){CheckoutHelperJS.splitCartLineItemAddMS(serviceResponse.splitItemSequence,serviceResponse.orderId);
CheckoutHelperJS.splitItemSequence=serviceResponse.splitItemSequence;console.info("splitItemSequence :"+serviceResponse.splitItemSequence);MessageHelper.hideAndClearMessage();cursor_clear();},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){if(serviceResponse.errorMessageKey=="_ERR_RETRIEVE_PRICE"){MessageHelper.displayErrorMessage(MessageHelper.messages["ERROR_RETRIEVE_PRICE_QTY_UPDATE"]);
}else{if(serviceResponse.errorMessageKey=="_ERR_INVALID_THRESHOLD_QUANTITY"){MessageHelper.setThersholdQty(serviceResponse.errorMessageParam);MessageHelper.displayMattelErrorMessage(MessageHelper.messages["ERROR_ITEM_THERSHOLD_QUANTITY_EXCEED"]);}else{if(serviceResponse.errorMessageKey=="_ERR_INVALID_QUANTITY"){MessageHelper.displayMattelErrorMessage(MessageHelper.messages["ERROR_CART_ITEM_QUANTITY_EXCEED_1000"]);
}else{MessageHelper.displayMattelErrorMessage(serviceResponse.errorMessage);}}}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxUpdateOrderItem1",actionId:"AjaxUpdateOrderItem",url:getAbsoluteURL()+"AjaxOrderChangeServiceItemUpdate",formId:"",successHandler:function(serviceResponse){if(!CheckoutHelperJS.pendingOrderDetailsPage){if(CheckoutHelperJS.shoppingCartPage){document.location.href="OrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId;
}}else{cursor_clear();}},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){if(serviceResponse.errorMessageKey=="_ERR_RETRIEVE_PRICE"){MessageHelper.displayErrorMessage(MessageHelper.messages["ERROR_RETRIEVE_PRICE_QTY_UPDATE"]);}else{if(serviceResponse.errorMessageKey=="_ERR_ACCOUNT_PURCHASE_LIMIT_FAILURE"){document.location.href="OrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&errorMessageKey="+serviceResponse.errorMessageKey+"&quantityLimit="+serviceResponse.errorMessageParam[0];
}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}Mattel.Analytics.publishFormErrors();cursor_clear();}}),wc.service.declare({id:"AjaxUpdateOrderShippingInfo",actionId:"AjaxUpdateOrderShippingInfo",url:getAbsoluteURL()+"AjaxOrderChangeServiceShipInfoUpdate",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();
cursor_clear();},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxPrepareOrderForSubmit",actionId:"AjaxPrepareOrderForSubmit",url:getAbsoluteURL()+"AjaxOrderProcessServiceOrderPrepare",formId:"",successHandler:function(serviceResponse){CheckoutHelperJS.setOrderPrepared("true");
CheckoutHelperJS.checkoutOrder(CheckoutHelperJS.getSavedParameter("tempOrderId"),CheckoutHelperJS.getSavedParameter("tempUserType"),CheckoutHelperJS.getSavedParameter("tempEmailAddresses"),CheckoutHelperJS.getSavedParameter("tempIsQuote"));},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);
}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxSubmitOrder",actionId:"AjaxSubmitOrder",url:getAbsoluteURL()+"AjaxOrderProcessServiceOrderSubmit",formId:"",successHandler:function(serviceResponse){nullCartTotalCookie(serviceResponse.orderId);
var shipmentTypeId=CheckoutHelperJS.getShipmentTypeId();document.location.href="OrderShippingBillingConfirmationView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&orderId="+serviceResponse.orderId+"&shipmentTypeId="+shipmentTypeId;
},failureHandler:function(serviceResponse){if(serviceResponse.errorMessageKey=="_SUPC_CODE_ALREADY_REDEEMED"){var codes=serviceResponse.errorMessageParam;if(codes!=null&&codes!=undefined&&codes.length>0){CheckoutHelperJS.shoppingCartOrdercalculateForSUPC(codes[0],codes[1]);}}else{if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);
}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}}cursor_clear();}}),wc.service.declare({id:"AjaxSubmitQuote",actionId:"AjaxSubmitQuote",url:getAbsoluteURL()+"AjaxSubmitQuote",formId:"",successHandler:function(serviceResponse){var redirectURL="OrderShippingBillingConfirmationView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&orderId="+CheckoutHelperJS.getOrderId()+"&shipmentTypeId="+CheckoutHelperJS.getShipmentTypeId()+"&isQuote=true"+"&quoteId="+serviceResponse.outOrderId;
if(serviceResponse.outExternalQuoteId!=undefined&&serviceResponse.outExternalQuoteId!=null){redirectURL+=redirectURL+"&externalQuoteId="+serviceResponse.outExternalQuoteId;}document.location.href=redirectURL;},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);
}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxAddAddressForPerson",actionId:"AjaxAddAddressForPerson",url:getAbsoluteURL()+"AjaxPersonChangeServiceAddressAdd",formId:"",successHandler:function(serviceResponse){AddressHelper.updateOrderAfterAddressUpdate();
MessageHelper.hideAndClearMessage();cursor_clear();},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();
}}),wc.service.declare({id:"AjaxUpdateAddressForPerson",actionId:"AjaxUpdateAddressForPerson",url:getAbsoluteURL()+"AjaxPersonChangeServiceAddressUpdate",formId:"",successHandler:function(serviceResponse){AddressHelper.updateOrderAfterAddressUpdate();MessageHelper.hideAndClearMessage();cursor_clear();
},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxUpdateOrderAfterAddressUpdate",actionId:"AjaxUpdateOrderAfterAddressUpdate",url:getAbsoluteURL()+"AjaxOrderChangeServiceItemUpdate",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();
cursor_clear();},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxInterestItemAdd",actionId:"AjaxInterestItemAdd",url:getAbsoluteURL()+"AjaxInterestItemAdd",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();
cursor_clear();MessageHelper.displayStatusMessage(MessageHelper.messages["WISHLIST_ADDED"]);if(categoryDisplayJS){categoryDisplayJS.selectedAttributes=[];}},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);
}}cursor_clear();}}),wc.service.declare({id:"AjaxInterestItemAdd_shopCart",actionId:"AjaxInterestItemAdd",url:getAbsoluteURL()+"AjaxInterestItemAdd",formId:"",successHandler:function(serviceResponse){document.location.href="AjaxOrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId;
},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxInterestItemDelete",actionId:"AjaxInterestItemDelete",url:getAbsoluteURL()+"AjaxInterestItemDelete",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();
},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxInterestItemListMessage",actionId:"AjaxInterestItemListMessage",url:getAbsoluteURL()+"AjaxInterestItemListMessage",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();
},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxPromotionCodeManage",actionId:"AjaxPromotionCodeManage",url:getAbsoluteURL()+"AjaxPromotionCodeManage",formId:"",successHandler:function(serviceResponse){var params=[];
params.storeId=serviceResponse.storeId;params.catalogId=serviceResponse.catalogId;params.langId=serviceResponse.langId;params.orderId=".";if(CheckoutHelperJS.shoppingCartPage){params.calculationUsage="-1,-2,-5,-6,-7";}else{params.calculationUsage="-1,-2,-3,-4,-5,-6,-7";}wc.service.invoke("AjaxUpdateOrderItem",params);
if(serviceResponse.taskType!=undefined&&serviceResponse.taskType=="R"){}else{Mattel.Analytics.addEvent("loadApplyPromoEvent");}},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){var errMsg=serviceResponse.systemMessage;if(serviceResponse.errorMessageKey=="ERR_PROMOTION_CODE_INVALID"){MessageHelper.displayPromoCodeErrorMessage("Invalid Offer Code - may be case sensitive");
}else{if(serviceResponse.errorMessageKey=="ERR_PROMOTION_NOT_AVAILABLE_AT_THIS_TIME"){MessageHelper.displayPromoCodeErrorMessage("Offer Code has expired");}else{if(serviceResponse.errorMessageKey=="ERR_PROMOTION_CODE_DUPLICATED"){MessageHelper.displayPromoCodeErrorMessage("Offer Code already applied to this order");
}else{if((serviceResponse.errorMessageKey=="_ERR_GENERIC")&&errMsg!=null&&(errMsg.indexOf("invalid")>-1)){MessageHelper.displayPromoCodeErrorMessage("We're sorry, the code entered has already been used");}else{if(serviceResponse.errorMessageKey=="_ERR_ACCESS_CHECK_FAILED"){MessageHelper.displayPromoCodeErrorMessage("Invalid Offer Code - may be case sensitive");
}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}}}}}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayPromoCodeErrorMessage(serviceResponse.errorMessageKey);}}Mattel.Analytics.publishFormErrors();cursor_clear();}}),wc.service.declare({id:"AjaxCouponsAddRemove",actionId:"AjaxCouponsAddRemove",url:getAbsoluteURL()+"AjaxCouponsAddRemove",formId:"",successHandler:function(serviceResponse){var params=[];
params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.orderId=serviceResponse.orderId;if(CheckoutHelperJS.shoppingCartPage){params.calculationUsage="-1,-2,-5,-6,-7";}else{params.calculationUsage="-1,-2,-3,-4,-5,-6,-7";}wc.service.invoke("AjaxUpdateOrderItem",params);
},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AddBillingAddress",actionId:"AddBillingAddress",url:getAbsoluteURL()+"AjaxPersonChangeServiceAddressAdd",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();
},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"ScheduleOrder",actionId:"ScheduleOrder",url:getAbsoluteURL()+"AjaxOrderProcessServiceOrderSchedule",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();
var originalOrderId=document.getElementById("orderIdToSchedule").value;var newOrderId=serviceResponse.orderId;nullCartTotalCookie(serviceResponse.orderId);var shipmentTypeId=CheckoutHelperJS.getShipmentTypeId();var purchaseOrderNumber="";if(document.forms["purchaseOrderNumberInfo"].purchase_order_number.value!=null){purchaseOrderNumber=document.forms["purchaseOrderNumberInfo"].purchase_order_number.value;
}var url="OrderProcessServiceOrderCancel?orderId="+originalOrderId+"&storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&URL=OrderShippingBillingConfirmationView%3ForderId%3D"+newOrderId+"%26originalOrderId%3D"+originalOrderId+"%26shipmentTypeId%3D"+shipmentTypeId+"%26purchaseOrderNumber%3D"+purchaseOrderNumber;
document.location.href=url;},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"SubmitRecurringOrder",actionId:"SubmitRecurringOrder",url:getAbsoluteURL()+"AjaxOrderProcessServiceRecurringOrderSubmit",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();
nullCartTotalCookie(serviceResponse.orderId);var shipmentTypeId=CheckoutHelperJS.getShipmentTypeId();var url="OrderShippingBillingConfirmationView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&orderId="+serviceResponse.orderId+"&shipmentTypeId="+shipmentTypeId;
document.location.href=url;cursor_clear();},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();
}}),wc.service.declare({id:"AjaxUpdateRewardOption",actionId:"AjaxUpdateRewardOption",url:getAbsoluteURL()+"AjaxOrderChangeServiceRewardOptionUpdate",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();cursor_clear();},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);
}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxOrderCreate",actionId:"AjaxOrderCreate",url:getAbsoluteURL()+"AjaxOrderCreate",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();
MessageHelper.displayStatusMessage(MessageHelper.messages["ORDER_CREATED"]);cursor_clear();},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){if(serviceResponse.errorCode=="CMN0409E"){MessageHelper.displayErrorMessage(MessageHelper.messages["ORDER_NOT_CREATED"]);}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);
}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxSingleOrderCancel",actionId:"AjaxSingleOrderCancel",url:getAbsoluteURL()+"AjaxOrderProcessServiceOrderCancel",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();
MessageHelper.displayStatusMessage(MessageHelper.messages["ORDERS_CANCELLED"]);cursor_clear();},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){if(serviceResponse.errorCode=="CMN0409E"){MessageHelper.displayErrorMessage(MessageHelper.messages["ORDER_NOT_CANCELLED"]);}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);
}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxOrderCancel",actionId:"AjaxOrderCancel",url:getAbsoluteURL()+"AjaxOrderProcessServiceOrderCancel",formId:"",successHandler:function(serviceResponse){savedOrdersJS.cancelSavedOrder(false);
},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){if(serviceResponse.errorCode=="CMN0409E"){MessageHelper.displayErrorMessage(MessageHelper.messages["ORDER_NOT_CANCELLED"]);}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);
}}cursor_clear();}}),wc.service.declare({id:"AjaxSingleOrderSave",actionId:"AjaxSingleOrderSave",url:getAbsoluteURL()+"AjaxOrderCopy",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();if(savedOrdersJS.isOrderDetailsPageValue){MessageHelper.displayStatusMessage(MessageHelper.messages["PENDING_ORDER_SAVED"]);
}else{MessageHelper.displayStatusMessage(MessageHelper.messages["ORDERS_SAVED"]);}var inputElement=document.getElementById("OrderDescription_input");if(inputElement!=null&&inputElement!="undefined"){dojo.removeClass(inputElement,"savedOrderDetailsInputBorderWarning");dojo.addClass(inputElement,"savedOrderDetailsInputBorder");
document.getElementById("OldOrderDescription").value=inputElement.value;}cursor_clear();if(savedOrdersJS.updateCartRequired){savedOrdersJS.updateCartRequired=false;CheckoutHelperJS.updateShoppingCart(document.ShopCartForm);}},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){if(serviceResponse.errorCode=="CMN0409E"||serviceResponse.errorCode=="CMN1024E"){if(serviceResponse.errorCode=="CMN1024E"&&serviceResponse.systemMessage!=""){MessageHelper.displayErrorMessage(serviceResponse.systemMessage);
}else{if(savedOrdersJS.isOrderDetailsPageValue){MessageHelper.displayStatusMessage(MessageHelper.messages["PENDING_ORDER_NOT_SAVED"]);}else{MessageHelper.displayErrorMessage(MessageHelper.messages["ORDER_NOT_SAVED"]);}}}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);
}}cursor_clear();}}),wc.service.declare({id:"AjaxOrderSave",actionId:"AjaxOrderSave",url:getAbsoluteURL()+"AjaxOrderCopy",formId:"",successHandler:function(serviceResponse){savedOrdersJS.saveOrder(false);},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){if(serviceResponse.errorCode=="CMN0409E"){MessageHelper.displayErrorMessage(MessageHelper.messages["ORDER_NOT_SAVED"]);
}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxSetPendingOrder",actionId:"AjaxSetPendingOrder",url:getAbsoluteURL()+"AjaxSetPendingOrder",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();
MessageHelper.displayStatusMessage(MessageHelper.messages["ORDER_SET_CURRENT"]);savedOrdersJS.determinePageForward("AjaxSetPendingOrder");cursor_clear();},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){if(serviceResponse.errorCode=="CMN0409E"||serviceResponse.errorCode=="CMN1024E"){MessageHelper.displayErrorMessage(MessageHelper.messages["ORDER_NOT_SET_CURRENT"]);
}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxUpdatePendingOrder",actionId:"AjaxUpdatePendingOrder",url:getAbsoluteURL()+"AjaxSetPendingOrder",formId:"",successHandler:function(serviceResponse){savedOrdersJS.determinePageForward("AjaxUpdatePendingOrder");
cursor_clear();},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){if(serviceResponse.errorCode=="CMN0409E"){MessageHelper.displayErrorMessage(MessageHelper.messages["ORDER_NOT_SET_CURRENT"]);}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);
}}cursor_clear();}}),wc.service.declare({id:"AjaxSingleOrderCopy",actionId:"AjaxSingleOrderCopy",url:getAbsoluteURL()+"AjaxOrderCopy",formId:"",successHandler:function(serviceResponse){var params=[];params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.URL="";params.updatePrices="1";
params.orderId=serviceResponse.orderId;params.calculationUsageId="-1";wc.service.invoke("AjaxSingleOrderCalculate",params);MessageHelper.hideAndClearMessage();},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){if(serviceResponse.errorCode=="CMN0409E"){MessageHelper.displayErrorMessage(MessageHelper.messages["ORDER_NOT_COPIED"]);
}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxOrderCopy",actionId:"AjaxOrderCopy",url:getAbsoluteURL()+"AjaxOrderCopy",formId:"",successHandler:function(serviceResponse){var params=[];
params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.URL="";params.updatePrices="1";params.orderId=serviceResponse.orderId;params.calculationUsageId="-1";wc.service.invoke("AjaxOrderCalculate",params);MessageHelper.hideAndClearMessage();},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){if(serviceResponse.errorCode=="CMN0409E"){MessageHelper.displayErrorMessage(MessageHelper.messages["ORDER_NOT_COPIED"]);
}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxSingleOrderCalculate",actionId:"AjaxSingleOrderCalculate",url:getAbsoluteURL()+"AjaxOrderCalculate",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();
MessageHelper.displayStatusMessage(MessageHelper.messages["ORDER_COPIED"]);cursor_clear();},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){if(serviceResponse.errorCode=="CMN0409E"){MessageHelper.displayErrorMessage(MessageHelper.messages["ORDER_NOT_COPIED"]);}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);
}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxCurrentOrderCalculate",actionId:"AjaxCurrentOrderCalculate",url:getAbsoluteURL()+"AjaxOrderCalculate",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();
MessageHelper.displayStatusMessage(MessageHelper.messages["ORDER_SET_CURRENT"]);cursor_clear();},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){if(serviceResponse.errorCode=="CMN0409E"){MessageHelper.displayErrorMessage(MessageHelper.messages["ORDER_NOT_COPIED"]);}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);
}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxOrderCalculate",actionId:"AjaxOrderCalculate",url:getAbsoluteURL()+"AjaxOrderCalculate",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();
savedOrdersJS.copyOrder(false);},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){if(serviceResponse.errorCode=="CMN0409E"){MessageHelper.displayErrorMessage(MessageHelper.messages["ORDER_NOT_COPIED"]);}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);
}}cursor_clear();}}),wc.service.declare({id:"AjaxPunchoutPay",actionId:"AjaxPunchoutPay",url:"PunchoutPaymentRepay",formId:"",successHandler:function(serviceResponse){PunchoutJS.handleResponse(serviceResponse.orderId);MessageHelper.hideAndClearMessage();cursor_clear();},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);
}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxCategorySubscribe",actionId:"AjaxCategorySubscribe",url:"AjaxMarketingTriggerProcessServiceEvaluate",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();
MessageHelper.displayStatusMessage(MessageHelper.messages["SUBSCRIPTION_UPDATED"]);},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);
}}cursor_clear();}}),wc.service.declare({id:"MattelGiftCardDetailsCmd",actionId:"MattelGiftCardDetailsCmd",url:getAbsoluteURL()+"GiftCardAddCmd",formId:"MattelCheckoutBillingForm",successHandler:function(serviceResponse){CommonControllersDeclarationJS.updateCommonFlag=true;wc.render.updateContext("MattelOrderBillingContext",{"fromPage":"billingPage"});
wc.render.updateContext("MattelOrderGiftDetailsContext",{"orderId":serviceResponse.orderId});document.getElementById("pinNumber").value="";document.getElementById("cardNumber").value="";$("#MattelErrorMessageDiv").hide();},failureHandler:function(serviceResponse){if(serviceResponse.errorMessageKey=="_ERR_GIFT_CARD_SYSTEM_UNAVAILABLE"){MessageHelper.displayErrorMessage(MessageHelper.messages["ERROR_PAYEMENT_SERVICE_DOWN"]);
}else{if(serviceResponse.errorMessageKey=="_ERR_GIFT_CARD_EXIST"){MessageHelper.displayErrorMessage(MessageHelper.messages["ERR_GIFT_CARD_EXIST"]);}else{if(serviceResponse.errorMessageKey=="_ERR_PROD_NOT_EXISTING"){MessageHelper.displayErrorMessage(MessageHelper.messages["ERROR_PAYEMENT_CARD_NOT_EXIST"]);
}else{if(serviceResponse.errorMessageKey=="_ERR_GC_ZERO_AVAILABLE_BALANCE"){MessageHelper.displayErrorMessage(MessageHelper.messages["ERR_GC_ZERO_AVAILABLE_BALANCE"]);}else{if(serviceResponse.errorMessageKey=="_ERR_GC_NEGATIVE_AVAILABLE_BALANCE"){MessageHelper.displayErrorMessage(MessageHelper.messages["ERR_GC_NEGATIVE_AVAILABLE_BALANCE"]);
}else{if(serviceResponse.errorMessageKey=="_ERR_PAY_CARD_NUMBER_INVALID"){MessageHelper.displayErrorMessage(MessageHelper.messages["ERROR_PAYEMENT_CARD_INVALID"]);}else{if(serviceResponse.errorMessageKey=="_ERR_CREDIT_CARD_TOKENIZATION_UNAVAILABLE"){MessageHelper.displayErrorMessage(MessageHelper.messages["_ERR_CREDIT_CARD_TOKENIZATION_UNAVAILABLE"]);
}}}}}}}Mattel.Analytics.publishFormErrors();}}),wc.service.declare({id:"MattelRemoveGiftCard",actionId:"MattelRemoveGiftCard",url:"MattelRemoveGiftCardCmd",formId:"",successHandler:function(serviceResponse){CommonControllersDeclarationJS.updateCommonFlag=true;wc.render.updateContext("MattelOrderBillingContext",{"fromPage":"billingPage"});
wc.render.updateContext("MattelOrderGiftDetailsContext",{"orderId":serviceResponse.orderId});},failureHandler:function(serviceResponse){alert("Error while removing the payment instuction");Mattel.Analytics.publishFormErrors();}}),wc.service.declare({id:"HQEnableId",actionId:"MattelHQEnableCmd",url:getAbsoluteURL()+"MattelHQEnableCmd",formId:"",successHandler:function(serviceResponse){alert(serviceResponse.viewTaskName.enabled);
document.getElementById("storesEnable").checked="true";},failureHandler:function(serviceResponse){document.getElementById("errorId").innerHTML=serviceResponse.errorMessage;}}),wc.service.declare({id:"AjaxCartErrorValidation",actionId:"AjaxCartErrorValidation",url:getAbsoluteURL()+"AjaxCartErrorValidation",formId:"",successHandler:function(serviceResponse){var storeName=Mattel.storeName;
var templateType=Mattel.templateType;if(templateType=="AGTemplate"){if(CheckoutHelperJS.mattelUserType=="G"){document.location.href="OrderCalculate?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&URL="+"MattelGlobalCheckoutLogonView"+"&errorViewName="+"AjaxOrderItemDisplayView"+"&updatePrices="+"1"+"&calculationUsageId="+"-1"+"&orderId="+".";
}else{if(serviceResponse.isDefaultShippingAndShipMode&&!serviceResponse.isShippingAddressInvalid){document.location.href="OrderCalculate?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&URL="+"MattelCheckoutPaymentsAndBillingAddressView"+"&errorViewName="+"AjaxOrderItemDisplayView"+"&updatePrices="+"1"+"&calculationUsageId="+"-1"+"&orderId="+".";
}else{if(serviceResponse.isDefaultShippingAndShipMode&&serviceResponse.isShippingAddressInvalid){document.location.href="OrderCalculate?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&URL="+"MattelOrderShippingView"+"&errorViewName="+"AjaxOrderItemDisplayView"+"&updatePrices="+"1"+"&calculationUsageId="+"-1"+"&orderId="+"."+"&isShippingAddressInvalid="+serviceResponse.isShippingAddressInvalid;
}else{document.location.href="OrderCalculate?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&URL="+"MattelOrderShippingView"+"&errorViewName="+"AjaxOrderItemDisplayView"+"&updatePrices="+"1"+"&calculationUsageId="+"-1"+"&orderId="+".";
}}}}else{if(CheckoutHelperJS.mattelUserType=="G"){document.location.href="OrderCalculate?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&URL="+"CheckoutLogonView"+"&errorViewName="+"AjaxOrderItemDisplayView"+"&updatePrices="+"1"+"&calculationUsageId="+"-1"+"&orderId="+".";
}else{if(serviceResponse.isDefaultShippingAndShipMode&&!serviceResponse.isShippingAddressInvalid){document.location.href="OrderCalculate?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&URL="+"MattelCheckoutPaymentsAndBillingAddressView"+"&errorViewName="+"AjaxOrderItemDisplayView"+"&updatePrices="+"1"+"&calculationUsageId="+"-1"+"&orderId="+".";
}else{if(serviceResponse.isDefaultShippingAndShipMode&&serviceResponse.isShippingAddressInvalid){document.location.href="OrderCalculate?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&URL="+"OrderShippingView"+"&errorViewName="+"AjaxOrderItemDisplayView"+"&updatePrices="+"1"+"&calculationUsageId="+"-1"+"&orderId="+"."+"&isShippingAddressInvalid="+serviceResponse.isShippingAddressInvalid;
}else{document.location.href="OrderCalculate?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&URL="+"OrderShippingView"+"&errorViewName="+"AjaxOrderItemDisplayView"+"&updatePrices="+"1"+"&calculationUsageId="+"-1"+"&orderId="+".";
}}}}},failureHandler:function(serviceResponse){if(serviceResponse.errorMessageKey=="_ERR_INVALID_THRESHOLD_QUANTITY"){document.location.href="AjaxOrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&thersholdQty="+serviceResponse.errorMessageParam[0]+"&productName="+serviceResponse.errorMessageParam[1]+"&errorMessageKey="+serviceResponse.errorMessageKey;
}else{if(serviceResponse.errorMessageKey=="_ERR_INVALID_QUANTITY"){document.location.href="AjaxOrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&errorMessageKey="+serviceResponse.errorMessageKey;}else{if(serviceResponse.errorMessageKey=="_ERR_TOTAL_CART_LINE_ITEM_LIMIT_EXCEEDS"){document.location.href="AjaxOrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&errorMessageKey="+serviceResponse.errorMessageKey;
}}}Mattel.Analytics.publishFormErrors();}}),wc.service.declare({id:"AjaxThresholdQtyCheck",actionId:"AjaxThresholdQtyCheck",url:getAbsoluteURL()+"AjaxCartErrorValidation",formId:"",successHandler:function(serviceResponse){},failureHandler:function(serviceResponse){if(serviceResponse.errorMessageKey=="_ERR_INVALID_THRESHOLD_QUANTITY"){MessageHelper.setThersholdQty(serviceResponse.errorMessageParam);
MessageHelper.displayItemThresholdError(MessageHelper.messages["MAXIMUM_ITEM_THERSHOLD_QTY_LIMIT"]);}Mattel.Analytics.publishFormErrors();}}),wc.service.declare({id:"AajaxCheckOutOrdercalculate",actionId:"AajaxCheckOutOrdercalculate",url:getAbsoluteURL()+"AjaxOrderCalculate",formId:"",successHandler:function(serviceResponse){var storeName=Mattel.storeName;
var templateType=Mattel.templateType;var orderShippingUrl="";var exprssCheckout="N";var isSUPCCodeRemoved=serviceResponse.isSUPCCodeRemoved;if(serviceResponse.userType=="R"){var expressChekoutObj=document.getElementById("addItem01");if(expressChekoutObj==null||expressChekoutObj==undefined){exprssCheckout="N";
}else{expressChekoutObj=expressChekoutObj.checked;if(expressChekoutObj==true){exprssCheckout="Y";}else{exprssCheckout="N";}}}if(document.getElementById("orderShippingUrl")!=null&&document.getElementById("orderShippingUrl")!=undefined){orderShippingUrl=document.getElementById("orderShippingUrl").value;
}else{if(templateType=="AGTemplate"){orderShippingUrl="MattelOrderShippingView?";}else{orderShippingUrl="OrderShippingView?";}}var checkoutLogonUrl=document.getElementById("checkoutLogonUrl");console.info("isValidShippingAddress :"+serviceResponse.isValidShippingAddress);console.info("addressTypefield2 :"+serviceResponse.addressTypefield2);
if(templateType=="AGTemplate"){if(serviceResponse.userType=="G"){if(isSUPCCodeRemoved!=null&&isSUPCCodeRemoved!="undefined"&&isSUPCCodeRemoved){document.location.href="AjaxOrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&isSUPCCodeRemoved="+isSUPCCodeRemoved+"&redeemedSUPCCodes="+serviceResponse.redeemedSUPCCodes;
}else{if(checkoutLogonUrl!=null&&checkoutLogonUrl!=undefined){document.location.href=checkoutLogonUrl.value+"storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&errorViewName="+"AjaxOrderItemDisplayView";}else{document.location.href="MattelGlobalCheckoutLogonView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&errorViewName="+"AjaxOrderItemDisplayView";
}}}else{if(isSUPCCodeRemoved!=null&&isSUPCCodeRemoved!="undefined"&&isSUPCCodeRemoved){document.location.href="AjaxOrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&isSUPCCodeRemoved="+isSUPCCodeRemoved+"&redeemedSUPCCodes="+serviceResponse.redeemedSUPCCodes;
}else{if(serviceResponse.isValidShippingAddress&&serviceResponse.addressTypefield2!="KeepAddress"){document.location.href="MattelCheckoutPaymentsAndBillingAddressView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&URL="+"MattelCheckoutPaymentsAndBillingAddressView"+"&errorViewName="+"AjaxOrderItemDisplayView&orderPrepare=true&exprssCheckout="+exprssCheckout;
}else{if(serviceResponse.addressTypefield2=="InvalidAddress"||serviceResponse.addressTypefield2=="KeepAddress"){document.location.href="MattelOrderShippingView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&URL="+"MattelOrderShippingView"+"&errorViewName="+"AjaxOrderItemDisplayView"+"&isShippingAddressInvalid="+serviceResponse.isShippingAddressInvalid;
}else{document.location.href=orderShippingUrl+"storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&URL="+"MattelOrderShippingView"+"&errorViewName="+"AjaxOrderItemDisplayView";}}}}}else{if(serviceResponse.userType=="G"){setTimeout(function(){if(isSUPCCodeRemoved!=null&&isSUPCCodeRemoved!="undefined"&&isSUPCCodeRemoved){document.location.href="OrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&isSUPCCodeRemoved="+isSUPCCodeRemoved+"&redeemedSUPCCodes="+serviceResponse.redeemedSUPCCodes;
}else{if(checkoutLogonUrl!=null&&checkoutLogonUrl!=undefined&&checkoutLogonUrl!=""){document.location.href=checkoutLogonUrl.value+"storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&errorViewName="+"OrderItemDisplayView";}else{document.location.href="CheckoutLogonView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&errorViewName="+"OrderItemDisplayView";
}}},500);}else{if(isSUPCCodeRemoved!=null&&isSUPCCodeRemoved!="undefined"&&isSUPCCodeRemoved){document.location.href="OrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&isSUPCCodeRemoved="+isSUPCCodeRemoved+"&redeemedSUPCCodes="+serviceResponse.redeemedSUPCCodes;
}else{if(serviceResponse.isValidShippingAddress||serviceResponse.addressTypefield2=="SuggestedAddress"){document.location.href="CheckoutPaymentsAndBillingAddressView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&URL="+"CheckoutPaymentsAndBillingAddressView"+"&errorViewName="+"OrderItemDisplayView&orderPrepare=true&exprssCheckout="+exprssCheckout;
}else{if(serviceResponse.addressTypefield2=="InvalidAddress"||serviceResponse.addressTypefield2=="KeepAddress"){document.location.href="OrderShippingView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&URL="+"OrderShippingView"+"&errorViewName="+"OrderItemDisplayView"+"&isShippingAddressInvalid="+serviceResponse.isShippingAddressInvalid;
}else{document.location.href=orderShippingUrl+"storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&URL="+"OrderShippingView"+"&errorViewName="+"OrderItemDisplayView";}}}}}cursor_clear();},failureHandler:function(serviceResponse){var storeName=Mattel.storeName;
var templateType=Mattel.templateType;if(serviceResponse.errorMessageKey=="_SUPC_CODE_ALREADY_REDEEMED"){var codes=serviceResponse.errorMessageParam;if(codes!=null&&codes!=undefined&&codes.length>0){CheckoutHelperJS.shoppingCartOrdercalculateForSUPC(codes[0],codes[1]);}}else{if(!CheckoutHelperJS.shoppingCartPage){if(templateType=="AGTemplate"){if(serviceResponse.errorMessageKey=="_ERR_INVALID_THRESHOLD_QUANTITY"){document.location.href="AjaxOrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&thersholdQty="+serviceResponse.errorMessageParam[0]+"&productName="+serviceResponse.errorMessageParam[1]+"&errorMessageKey="+serviceResponse.errorMessageKey;
}else{if(serviceResponse.errorMessageKey=="_ERR_INVALID_QUANTITY"){document.location.href="AjaxOrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&errorMessageKey="+serviceResponse.errorMessageKey+"&cartQtyLimit="+serviceResponse.errorMessageParam[0];
}else{if(serviceResponse.errorMessageKey=="_ERR_TOTAL_CART_LINE_ITEM_LIMIT_EXCEEDS"){document.location.href="AjaxOrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&errorMessageKey="+serviceResponse.errorMessageKey+"&cartQtyLimit="+serviceResponse.errorMessageParam[0];
}else{if(serviceResponse.errorMessageKey=="_ERR_PRODUCT_MARK_FOR_DELETED"){document.location.href="AjaxOrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&errorMessageKey="+serviceResponse.errorMessageKey+"&mattelErrorMessage="+serviceResponse.errorMessage;
}else{document.location.href="AjaxOrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&errorMessageKey="+serviceResponse.errorMessageKey+"&mattelErrorMessage="+serviceResponse.errorMessage;}}}}}else{if(serviceResponse.errorMessageKey=="_ERR_INVALID_THRESHOLD_QUANTITY"){document.location.href="OrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&thersholdQty="+serviceResponse.errorMessageParam[0]+"&productName="+serviceResponse.errorMessageParam[1]+"&errorMessageKey="+serviceResponse.errorMessageKey;
}else{if(serviceResponse.errorMessageKey=="_ERR_INVALID_QUANTITY"){url="OrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&errorMessageKey="+serviceResponse.errorMessageKey+"&cartQtyLimit="+serviceResponse.errorMessageParam[0];
document.location.href=url;}else{if(serviceResponse.errorMessageKey=="_ERR_TOTAL_CART_LINE_ITEM_LIMIT_EXCEEDS"){document.location.href="OrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&errorMessageKey="+serviceResponse.errorMessageKey+"&cartQtyLimit="+serviceResponse.errorMessageParam[0];
}else{if(serviceResponse.errorMessageKey=="_ERR_PRODUCT_MARK_FOR_DELETED"){document.location.href="OrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&errorMessageKey="+serviceResponse.errorMessageKey+"&mattelErrorMessage="+serviceResponse.errorMessage;
}else{document.location.href="OrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&errorMessageKey="+serviceResponse.errorMessageKey+"&mattelErrorMessage="+serviceResponse.errorMessage;}}}}}}else{if(serviceResponse.errorMessageKey=="_ERR_INVALID_THRESHOLD_QUANTITY"){MessageHelper.setThersholdQty(serviceResponse.errorMessageParam);
MessageHelper.displayMattelErrorMessage(MessageHelper.messages["ERROR_ITEM_THERSHOLD_QUANTITY_EXCEED"]);}else{if(serviceResponse.errorMessageKey=="_ERR_INVALID_QUANTITY"){MessageHelper.displayCartErrorMessage(MessageHelper.messages["ERROR_CART_ITEM_QUANTITY_EXCEED_1000"],serviceResponse.errorMessageParam[0]);
}else{if(serviceResponse.errorMessageKey=="_ERR_TOTAL_CART_LINE_ITEM_LIMIT_EXCEEDS"){MessageHelper.displayCartErrorMessage(MessageHelper.messages["ERROR_CART_LINE_ITEM_LIMIT_EXCEED_100"],serviceResponse.errorMessageParam[0]);}else{if(serviceResponse.errorMessageKey=="_ERR_PRODUCT_MARK_FOR_DELETED"){MessageHelper.displayCartErrorMessage(MessageHelper.messages["ERROR_PRODUCT_MARK_FOR_DELETED"],serviceResponse.errorMessageParam);
}else{if(serviceResponse.errorMessageKey=="_ERR_NON_SHIPPABLE"){MessageHelper.displayMattelErrorMessage(MessageHelper.messages["_ERR_NON_SHIPPABLE"]);}else{if(serviceResponse.errorMessageKey){MessageHelper.displayMattelErrorMessage(serviceResponse.errorMessageKey);}}}}}}}}Mattel.Analytics.publishFormErrors();
cursor_clear();}}),wc.service.declare({id:"shoppingCartOrdercalculate",actionId:"shoppingCartOrdercalculate",url:getAbsoluteURL()+"AjaxOrderCalculate",formId:"",successHandler:function(serviceResponse){var storeName=Mattel.storeName;var templateType=Mattel.templateType;var url=document.getElementById("orderItemDisplayUrl");
var isSUPCCodeRemoved=serviceResponse.isSUPCCodeRemoved;var promoCodesRedeemed=false;if(isSUPCCodeRemoved!=null&&isSUPCCodeRemoved!="undefined"&&isSUPCCodeRemoved){promoCodesRedeemed=serviceResponse.redeemedSUPCCodes;}if(serviceResponse.redirectToMultiShipping==true||serviceResponse.redirectToMultiShipping=="true"){cursor_wait();
CheckoutPayments.setCommonParameters(SBServicesDeclarationJS.langId,SBServicesDeclarationJS.storeId,SBServicesDeclarationJS.catalogId);CheckoutPayments.showBillingPage(CheckoutHelperJS.getShipmentTypeId());}else{if(templateType=="AGTemplate"){if(url!=null&&url!=undefined){document.location.href=url.value+"storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&isSUPCCodeRemoved="+isSUPCCodeRemoved+"&redeemedSUPCCodes="+promoCodesRedeemed;
}else{document.location.href="AjaxOrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&isSUPCCodeRemoved="+isSUPCCodeRemoved+"&redeemedSUPCCodes="+promoCodesRedeemed;}}else{if(url!=null&&url!=undefined){document.location.href=url.value+"storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&isSUPCCodeRemoved="+isSUPCCodeRemoved+"&redeemedSUPCCodes="+promoCodesRedeemed;
}else{document.location.href="OrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&isSUPCCodeRemoved="+isSUPCCodeRemoved+"&redeemedSUPCCodes="+promoCodesRedeemed;}}}cursor_clear();},failureHandler:function(serviceResponse){if(serviceResponse.errorMessageKey=="_SUPC_CODE_ALREADY_REDEEMED"){var codes=serviceResponse.errorMessageParam;
if(codes!=null&&codes!=undefined&&codes.length>0){CheckoutHelperJS.shoppingCartOrdercalculateForSUPC(codes[0],codes[1]);}}else{if(templateType=="AGTemplate"){if(serviceResponse.errorMessage){document.location.href="AjaxOrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId;
MessageHelper.displayMattelErrorMessage(serviceResponse.errorMessage);}else{document.location.href="AjaxOrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId;MessageHelper.displayMattelErrorMessage(serviceResponse.errorMessageKey);
}}else{if(serviceResponse.errorMessage){document.location.href="OrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId;MessageHelper.displayMattelErrorMessage(serviceResponse.errorMessage);}else{document.location.href="OrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId;
MessageHelper.displayMattelErrorMessage(serviceResponse.errorMessageKey);}}}cursor_clear();}}),wc.service.declare({id:"AjaxPrepareSubOrderForAddons",actionId:"AjaxPrepareSubOrderForAddons",url:getAbsoluteURL()+"AjaxOrderProcessServiceOrderPrepare",formId:"",successHandler:function(serviceResponse){cursor_clear();
console.info("Success in service AjaxPrepareSubOrderForAddons");},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);
}}cursor_clear();}}),wc.service.declare({id:"mattelAddOnServiceGiftOptionsSave",actionId:"mattelAddOnServiceGiftOptionsSave",url:getAbsoluteURL()+"MattelAddOnServiceAndGiftOptionSaveCmd",formId:"",successHandler:function(serviceResponse){var renderContext=wc.render.getContextById("ShopCartPaginationDisplay_Context");
var isRefreshReqd=true;if(serviceResponse.isRefreshReqd!=undefined){isRefreshReqd=serviceResponse.isRefreshReqd;}if("true"==$("#isCSROrderEntry").val()){$("#giftServicesOverlay").trigger("close");$("#MyAGProductServices").trigger("close");updateRefreshContext({URL:"MattelCsrOrderEntryView","orderId":serviceResponse.orderId});
}else{if((renderContext!=undefined&&renderContext!=null)&&isRefreshReqd){}}var renderContextMS=wc.render.getContextById("MattelMSOrderDetailContext");var page=dojo.byId("currentPage");console.info("page: "+page);console.info("isRefreshReqd: "+isRefreshReqd);console.info("renderContextMS: "+renderContextMS);
if((renderContextMS!=undefined&&renderContextMS!=null)&&isRefreshReqd&&(page!=undefined||page!=null)){console.info("pagevalue: "+page.value);if(page.value=="MattelMSOrderItemDetails"){var params=[];params.orderId=".";params["storeId"]=CheckoutHelperJS.storeId;params["catalogId"]=CheckoutHelperJS.catalogId;
params["langId"]=CheckoutHelperJS.langId;wc.service.invoke("AjaxPrepareSubOrderForAddons",params);}}wc.render.updateContext("ShopCartPaginationDisplay_Context");console.info("Success in Command: mattelAddOnServiceGiftOptionsSave");if($.v_modal){$.v_modal.close();$("#vmClose").click();}cursor_clear();
},failureHandler:function(serviceResponse){$("#addTocartLoadIcon").css("display","none");$("#addTocartLoadIconADD").css("display","none");$("#addTocartLoadIconQV").css("display","none");console.info("failure in Command: mattelAddOnServiceGiftOptionsSave");mattelResetRequest();Mattel.Analytics.publishFormErrors();
cursor_clear();}}),wc.service.declare({id:"mattelAddOnServicesSave",actionId:"mattelAddOnServicesSave",url:getAbsoluteURL()+"MattelAddOnServicesCmd",formId:"",successHandler:function(serviceResponse){var isRefreshReqd=true;if(serviceResponse.isRefreshReqd!=undefined){isRefreshReqd=serviceResponse.isRefreshReqd;
}if("true"==$("#isCSROrderEntry").val()){$("#giftServicesOverlay").trigger("close");$("#MyAGProductServices").trigger("close");updateRefreshContext({URL:"MattelCsrOrderEntryView","orderId":serviceResponse.orderId});}var shipPageObj=document.getElementById("shipFlag");if(isRefreshReqd&&(shipPageObj!=null)){var params=[];
params.orderId=".";params["storeId"]=CheckoutHelperJS.storeId;params["catalogId"]=CheckoutHelperJS.catalogId;params["langId"]=CheckoutHelperJS.langId;wc.service.invoke("AjaxPrepareSubOrderForAddons",params);wc.render.updateContext("MattelMSOrderDetailContext",{"updateContextFlag":true});}console.info("Success in Command: mattelAddOnServicesSave");
cursor_clear();},failureHandler:function(serviceResponse){console.info("failure in Command: mattelAddOnServicesSave");$("#addTocartLoadIcon").css("display","none");$("#addTocartLoadIconQV").css("display","none");$("#addTocartLoadIconADD").css("display","none");var storeName=Mattel.storeName;var templateType=Mattel.templateType;
if(serviceResponse!=null&&serviceResponse!="undefined"&&serviceResponse.errorMessageKey!=null&&serviceResponse.errorMessageKey!="undefined"&&serviceResponse.errorMessageKey!=""){if(templateType=="AGTemplate"){if(serviceResponse.errorMessageKey=="_ERR_NO_ELIGIBLE_TRADING"){MessageHelper.displayMattelErrorMessage(MessageHelper.messages["ERROR_CONTRACT_EXPIRED_GOTO_ORDER"]);
}else{if(serviceResponse.errorMessageKey=="_ERR_RETRIEVE_PRICE"){MessageHelper.displayMattelErrorMessage(MessageHelper.messages["ERROR_RETRIEVE_PRICE"]);}else{if(serviceResponse.errorMessageKey=="_ERR_ADDTOCART_INVALID_THRESHOLD_QUANTITY"){document.location.href="AjaxOrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&thersholdQty="+serviceResponse.errorMessageParam[0]+"&productName="+serviceResponse.errorMessageParam[1]+"&errorMessageKey="+serviceResponse.errorMessageKey;
}else{if(serviceResponse.errorMessageKey=="_ERR_INVALID_THRESHOLD_QUANTITY"){document.location.href="AjaxOrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&thersholdQty="+serviceResponse.errorMessageParam[0]+"&productName="+serviceResponse.errorMessageParam[1]+"&errorMessageKey="+serviceResponse.errorMessageKey;
}else{if(serviceResponse.errorMessageKey=="_ERR_INVALID_QUANTITY"){url="AjaxOrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&errorMessageKey="+serviceResponse.errorMessageKey+"&cartQtyLimit="+serviceResponse.errorMessageParam[0];
document.location.href=url;}else{if(serviceResponse.errorMessageKey=="_ERR_TOTAL_CART_LINE_ITEM_LIMIT_EXCEEDS"){document.location.href="AjaxOrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&errorMessageKey="+serviceResponse.errorMessageKey+"&cartQtyLimit="+serviceResponse.errorMessageParam[0];
}else{if(serviceResponse.errorMessageKey=="_ERR_CATALOG_ENTRY_MARK_FOR_DELETE"){document.location.href="AjaxOrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&errorMessageKey="+serviceResponse.errorMessageKey+"&mattelErrorMessage="+serviceResponse.errorMessage;
}else{if(serviceResponse.errorMessageKey=="_ERR_QUANTITY_NOT_AVAILABLE_ATP_KILLSWITCHED"){document.location.href="AjaxOrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&errorMessageKey="+serviceResponse.errorMessageKey+"&Catqty="+serviceResponse.errorMessageParam;
}else{if(serviceResponse.errorMessageKey=="_ERR_REQUESTED_QUANTITY_NOT_AVAILABLE"){document.location.href="AjaxOrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&errorMessageKey="+serviceResponse.errorMessageKey+"&availableQty="+serviceResponse.errorMessageParam[0]+"&catEntryId="+serviceResponse.errorMessageParam[2];
}else{if(serviceResponse.errorMessageKey=="_ERR_ORDER_IS_LOCKED"){document.location.href="AjaxOrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId;}}}}}}}}}}}else{if(serviceResponse.errorMessageKey=="_ERR_NO_ELIGIBLE_TRADING"){MessageHelper.displayMattelErrorMessage(MessageHelper.messages["ERROR_CONTRACT_EXPIRED_GOTO_ORDER"]);
}else{if(serviceResponse.errorMessageKey=="_ERR_RETRIEVE_PRICE"){MessageHelper.displayMattelErrorMessage(MessageHelper.messages["ERROR_RETRIEVE_PRICE"]);}else{if(serviceResponse.errorMessageKey=="_ERR_INVALID_THRESHOLD_QUANTITY"){document.location.href="OrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&thersholdQty="+serviceResponse.errorMessageParam[0]+"&productName="+serviceResponse.errorMessageParam[1]+"&errorMessageKey="+serviceResponse.errorMessageKey;
}else{if(serviceResponse.errorMessageKey=="_ERR_ADDTOCART_INVALID_THRESHOLD_QUANTITY"){document.location.href="OrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&thersholdQty="+serviceResponse.errorMessageParam[0]+"&productName="+serviceResponse.errorMessageParam[1]+"&errorMessageKey="+serviceResponse.errorMessageKey;
}else{if(serviceResponse.errorMessageKey=="_ERR_INVALID_QUANTITY"){url="OrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&errorMessageKey="+serviceResponse.errorMessageKey+"&cartQtyLimit="+serviceResponse.errorMessageParam[0];
document.location.href=url;}else{if(serviceResponse.errorMessageKey=="_ERR_TOTAL_CART_LINE_ITEM_LIMIT_EXCEEDS"){document.location.href="OrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&errorMessageKey="+serviceResponse.errorMessageKey+"&cartQtyLimit="+serviceResponse.errorMessageParam[0];
}else{if(serviceResponse.errorMessageKey=="_ERR_CATALOG_ENTRY_MARK_FOR_DELETE"){document.location.href="OrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&errorMessageKey="+serviceResponse.errorMessageKey+"&mattelErrorMessage="+serviceResponse.errorMessage;
}else{if(serviceResponse.errorMessageKey=="_ERR_QUANTITY_NOT_AVAILABLE_ATP_KILLSWITCHED"){document.location.href="OrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&errorMessageKey="+serviceResponse.errorMessageKey+"&Catqty="+serviceResponse.errorMessageParam;
}else{if(serviceResponse.errorMessageKey=="_ERR_REQUESTED_QUANTITY_NOT_AVAILABLE"){document.location.href="OrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&errorMessageKey="+serviceResponse.errorMessageKey+"&availableQty="+serviceResponse.errorMessageParam[0]+"&catEntryId="+serviceResponse.errorMessageParam[2];
}else{if(serviceResponse.errorMessageKey=="_ERR_ORDER_IS_LOCKED"){document.location.href="OrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId;}}}}}}}}}}}}Mattel.Analytics.publishFormErrors();mattelResetRequest();
cursor_clear();}}),wc.service.declare({id:"AjaxAddBirthDateCheckout",actionId:"AjaxAddBirthDateCheckout",url:getAbsoluteURL()+"AjaxAddressAddCmd",formId:"MattelCheckoutBillingForm",successHandler:function(serviceResponse){CommonControllersDeclarationJS.updateBirthDate=true;wc.render.updateContext("MattelDisplayMultipleBirthDatesRefreshContext","");
},failureHandler:function(serviceResponse){Mattel.Analytics.publishFormErrors();}}),wc.service.declare({id:"RemoveBirthDate",actionId:"RemoveBirthDate",url:getAbsoluteURL()+"AjaxAddressDeleteCmd",formId:"MattelCheckoutBillingForm",successHandler:function(serviceResponse){CommonControllersDeclarationJS.updateBirthDate=true;
wc.render.updateContext("MattelDisplayMultipleBirthDatesRefreshContext","");},failureHandler:function(serviceResponse){Mattel.Analytics.publishFormErrors();}});wc.service.declare({id:"ShoppingListServiceAddItemToGiftList",actionId:"ShoppingListServiceAddItemToGiftList",url:"AjaxGiftListServiceAddItem",formId:"",successHandler:function(serviceResponse){cursor_clear();
CheckoutHelperJS.splitItem=true;var count="";var partNumber="";var styleHeader="";if(serviceResponse.count!=null){count=serviceResponse.count;}if(serviceResponse.partNumber!=null){partNumber=serviceResponse.partNumber;}if(serviceResponse.styleHeader!=null){styleHeader=serviceResponse.styleHeader;}if(count!=""&&partNumber!=""){if((null!=dojo.byId("wantIt_"+count))&&dojo.byId("wantIt_"+count).value==1){MultipleWishLists.removeItemWishList(dojo.byId("wishListsToRemove_"+count).value,dojo.byId("giftItemIdWishList_"+count).value,partNumber,ServicesDeclarationJS.storeId,count,styleHeader);
}else{var params=[];params["partNumber"]=partNumber;params["catEntryIdentifier"]=count;params["isItem"]="";params["styleHeader"]=styleHeader;wc.render.updateContext("MattelHaveItWantItContext",params);}}},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);
}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();if($.v_modal){$.v_modal.close();}}}),wc.service.declare({id:"ShoppingListServiceAddItemToWishList",actionId:"ShoppingListServiceAddItemToWishList",url:"AjaxGiftListServiceAddItem",formId:"",successHandler:function(serviceResponse){CheckoutHelperJS.splitItem=true;
cursor_clear();var count="";var partNumber="";var styleHeader="";if(serviceResponse.count!=null){count=serviceResponse.count;}if(serviceResponse.partNumber!=null){partNumber=serviceResponse.partNumber;}if(serviceResponse.styleHeader!=null){styleHeader=serviceResponse.styleHeader;}if(count!=null){if(count!=""&&partNumber!=""){if((null!=dojo.byId("haveIt_"+count))&&dojo.byId("haveIt_"+count).value==1){shoppingListJS.removeItemFromAllUserLists(dojo.byId("collectionListsToRemove_"+count).value,dojo.byId("partNumber_"+count).value,ServicesDeclarationJS.storeId,count,styleHeader);
}else{var params=[];params["partNumber"]=partNumber;params["catEntryIdentifier"]=count;params["isItem"]="";params["styleHeader"]=styleHeader;wc.render.updateContext("MattelHaveItWantItContext",params);}}}},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);
}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();if($.v_modal){$.v_modal.close();$("#vmClose").click();}}}),wc.service.declare({id:"ShoppingListServiceAddItemToWishListMultiple",actionId:"ShoppingListServiceAddItemToWishListMultiple",url:"AjaxGiftListServiceAddItem",formId:"",successHandler:function(serviceResponse){cursor_clear();
if(dojo.byId("selectedElementNumber")){dojo.byId("giftItemIdWishList"+dojo.byId("selectedElementNumber").value).value=serviceResponse.giftListItemId;dojo.byId("wantIt"+dojo.byId("selectedElementNumber").value).value=1;dojo.byId("divWantItAdd"+dojo.byId("selectedElementNumber").value).style.display="none";
dojo.byId("divWantItRemove"+dojo.byId("selectedElementNumber").value).style.display="block";}},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);
}}cursor_clear();}}),wc.service.declare({id:"ShoppingListServiceRemoveItemFromAllUserLists",actionId:"ShoppingListServiceRemoveItemFromAllUserLists",url:"AjaxGiftListServiceRemoveItemFromAllUserLists",formId:"",successHandler:function(serviceResponse){CheckoutHelperJS.splitItem=true;var count="";var partNumber="";
var styleHeader="";if(serviceResponse.count!=null){count=serviceResponse.count;}if(serviceResponse.partNumber!=null){partNumber=serviceResponse.partNumber;}if(serviceResponse.styleHeader!=null){styleHeader=serviceResponse.styleHeader;}cursor_clear();if(count!=""&&partNumber!=""){var params=[];params["partNumber"]=partNumber;
params["catEntryIdentifier"]=count;params["isItem"]="";params["styleHeader"]=styleHeader;var renderContext=wc.render.getContextById("MattelHaveItWantItContext");if(renderContext!=undefined&&renderContext!=null){wc.render.updateContext("MattelHaveItWantItContext",params);}}},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);
}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();if($.v_modal){$.v_modal.close();$("#vmClose").click();}}}),wc.service.declare({id:"ShoppingListServiceRemoveItemFromWishList",actionId:"ShoppingListServiceRemoveItemFromWishList",url:"AjaxGiftListServiceUpdateItem",formId:"",successHandler:function(serviceResponse){CheckoutHelperJS.splitItem=true;
var count="";var partNumber="";var styleHeader="";if(serviceResponse.count!=null){count=serviceResponse.count;}if(serviceResponse.partNumber!=null){partNumber=serviceResponse.partNumber;}if(serviceResponse.styleHeader!=null){styleHeader=serviceResponse.styleHeader;}cursor_clear();if(count!=""&&partNumber!=""){var params=[];
params["partNumber"]=partNumber;params["catEntryIdentifier"]=count;params["isItem"]="";params["styleHeader"]=styleHeader;var renderContext=wc.render.getContextById("MattelHaveItWantItContext");if(renderContext!=undefined&&renderContext!=null){wc.render.updateContext("MattelHaveItWantItContext",params);
}}},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();if($.v_modal){$.v_modal.close();$("#vmClose").click();
}}}),wc.service.declare({id:"MattelGetCatalogEntryDetailsByID",actionId:"MattelGetCatalogEntryDetailsByID",url:getAbsoluteURL()+"MattelGetCatalogEntryDetailsByIDView",formId:"",successHandler:function(serviceResponse){QuickInfoJS.setItemDetails(serviceResponse,null);},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);
}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"MattelGetCatalogEntryDetailsByIDAddOns",actionId:"MattelGetCatalogEntryDetailsByIDAddOns",url:getAbsoluteURL()+"MattelGetCatalogEntryDetailsByIDView",formId:"",successHandler:function(serviceResponse){console.info("catEntry Id: "+serviceResponse.catalogEntry);
console.info(serviceResponse);MattelAddOnServicesJS.updateAddOnPrice(serviceResponse.catalogEntry,serviceResponse.counter);},failureHandler:function(serviceResponse){console.info(serviceResponse);if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);
}}cursor_clear();}}),wc.service.declare({id:"AjaxPrepareOrderBeforeForExpressCheckout",actionId:"AjaxPrepareOrderBeforeForExpressCheckout",url:"AjaxOrderProcessServiceOrderPrepare",formId:"",successHandler:function(serviceResponse){wc.render.updateContext("MattelOrderBillingContext",{"fromPage":"billingPage","updateContextFlag":true});
},failureHandler:function(serviceResponse){}}),wc.service.declare({id:"ContactUsCustomerService",actionId:"ContactUsCustomerService",url:getAbsoluteURL()+"ContactUsServiceCmd",formId:"",successHandler:function(serviceResponse){console.info("SUCESS*******************************");wc.render.updateContext("MattelContactUsEmailConfirmationContext",{Email:serviceResponse.email,Message:serviceResponse.msgContent,EmailSubject:serviceResponse.emailSubject});
},failureHandler:function(serviceResponse){console.info(serviceResponse);if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"RetailContactUsCustomerService",actionId:"RetailContactUsCustomerService",url:getAbsoluteURL()+"RetailContactUsServiceCmd",formId:"",successHandler:function(serviceResponse){console.info("SUCESS*******************************");
wc.render.updateContext("MattelRetailContactUsEmailConfirmationContext",{Email:serviceResponse.email,Message:serviceResponse.msgContent,EmailSubject:serviceResponse.emailSubject});},failureHandler:function(serviceResponse){console.info(serviceResponse);if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);
}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxRemoveCartItem",actionId:"AjaxRemoveCartItemId",url:getAbsoluteURL()+"MattelAjaxRemoveAllCartItemsCmd",formId:"",successHandler:function(ServiceResponse){var orderIdCookie=getCookie("WC_CartOrderId_"+ServicesDeclarationJS.storeId);
dojo.cookie("WC_CartTotal_"+orderIdCookie,null,{expires:-1,path:"/"});if(ServiceResponse.storeIdentifier=="AGStore"){$("#AgeValidationPopUpCheckoutScreen").hide();$("#showErrorMessagePopupCheckoutScreen").show();$("#sign_up").lightbox_me({centered:true,overlayCSS:{background:"white",opacity:0.5}});}else{$("#AgeValidationPopUpScreen").hide();
$("#showErrorMessagePopup").show();$("#birthDatePopup").lightbox_me({centered:true,overlayCSS:{background:"white",opacity:0.5}});}},failureHandler:function(serviceResponse){}});wc.service.declare({id:"mattelOrderBillingAddressUpdate",actionId:"mattelOrderBillingAddressUpdate",url:getAbsoluteURL()+"MattelOrderBillingAddressUpdate",formId:"",successHandler:function(serviceResponse){CommonControllersDeclarationJS.refreshBilling=true;
var addressId=serviceResponse.addressId;wc.render.updateContext("MattelOrderAddressDetailsContext",{"addressId":addressId});wc.render.updateContext("AjaxPhoneEmailUpdateContext",{action:"",countryGlobal:serviceResponse.countryGlobal});},failureHandler:function(serviceResponse){console.debug("Failure while execution of service  - mattelOrderBillingAddressUpdate");
console.info(serviceResponse);if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}}});wc.service.declare({id:"ContactMediaReqService",actionId:"ContactUsCustomerService",url:getAbsoluteURL()+"ContactMediaReqCmd",formId:"",successHandler:function(serviceResponse){console.info("SUCESS*******************************");
wc.render.updateContext("MattelContactUsEmailConfirmationContext",{Email:serviceResponse.email,Message:serviceResponse.msgContent,EmailSubject:serviceResponse.emailSubject});},failureHandler:function(serviceResponse){console.info(serviceResponse);if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);
}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}});wc.service.declare({id:"PersonalShopperReqService",actionId:"PersonalShopperReqService",url:getAbsoluteURL()+"PersonalShopperReqCmd",formId:"",successHandler:function(serviceResponse){console.info("SUCESS*******************************");
wc.render.updateContext("MattelContactUsEmailConfirmationContext",{Email:serviceResponse.email,Message:serviceResponse.msgContent,EmailSubject:serviceResponse.emailSubject});},failureHandler:function(serviceResponse){console.info(serviceResponse);if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);
}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}});wc.service.declare({id:"DynamicEndecaProductSearchForDoll",actionId:"DynamicEndecaProductSearchForDoll",url:"AjaxDynamicEndecaProductSearch",formId:"",successHandler:function(serviceResponse){cursor_clear();
try{var inner="";var result=serviceResponse.result;var criteria=serviceResponse.criteria;console.info("result: "+result);var customResultSet="";if(result&&result.length>0){var options=result.split("@||@");for(i=1;i<options.length;i++){var attrs=options[i].split("@|@");var parameterID=attrs[0];var nameAndCatentryId=attrs[1];
console.info("parameterID = "+parameterID);console.info("nameAndCatentryId = "+nameAndCatentryId);var nameAndCatentryIdArr=nameAndCatentryId.split("@|||@");var endecaProductDescription=nameAndCatentryIdArr[0];var endecaProductID=nameAndCatentryIdArr[1];var criteriaUP=criteria.toUpperCase();var optionUP=endecaProductDescription.toUpperCase();
var textToReplace="";if(optionUP.indexOf(criteriaUP)!=-1){endecaProductDesc=endecaProductDescription;customResultSet=customResultSet+","+endecaProductDescription.replace(/^\s+|\s+$/g,"")+",";endecaProductDesc=endecaProductDesc.replace(/'/g,"|apos|");console.info("endecaProductDesc: "+endecaProductDesc);
var head='<div class="endecaSearch" onclick="javascript:CheckoutHelperJS.addEndecaProduct(\''+endecaProductID+"','"+endecaProductDesc+"');\">";textToReplace=endecaProductDescription.substring(optionUP.indexOf(criteriaUP),optionUP.indexOf(criteriaUP)+criteria.length);var inner=inner+head;inner=inner+"<input type='hidden' id='endSearch"+i+"' value='"+endecaProductDescription+"' />";
inner=inner+endecaProductDescription.replace(textToReplace,"<strong>"+textToReplace+"</strong>");inner=inner+"</div>";}}console.info("customResultSet: "+customResultSet);if(dojo.byId("searchResultsforFavDoll")){dojo.byId("searchResultsforFavDoll").value=customResultSet;}dojo.byId("MattelEndecaProductSearchResultListPopUp").style.width="400px";
dojo.place(inner,"MattelEndecaProductSearchResultListPopUp","only");CheckoutHelperJS.openEndecaProductResultPopUp();}}catch(e){console.error("Error while setting search results for Fav Doll - "+e);}},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);
}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}});wc.service.declare({id:"GuestOrderStatusSearch",actionId:"GuestOrderStatusSearch",url:"AjaxMattelOrderSearchControllerCmd",formId:"",successHandler:function(serviceResponse){document.getElementById("GuestUserErrMSg").innerHTML="";
document.getElementById("ordTrackNum").innerHTML="";if(null!=serviceResponse.errorMessage1){document.getElementById("GuestUserErrMSg").innerHTML=serviceResponse.errorMessage1;}else{if(null!=serviceResponse.errorMessage2){document.getElementById("GuestUserErrMSg").innerHTML=serviceResponse.errorMessage2;
}else{if(null!=serviceResponse.errorMessage3){document.getElementById("GuestUserErrMSg").innerHTML=serviceResponse.errorMessage3;}else{document.getElementById("guestUserFormOrd").style.display="none";document.getElementById("guestOrdStats").style.display="block";document.getElementById("ordNum").innerHTML=serviceResponse.orderData.orderNumber;
if(null!=serviceResponse.orderData.orderStatusText){document.getElementById("OrdStat").innerHTML=serviceResponse.orderData.orderStatusText;}else{document.getElementById("OrdStat").innerHTML=serviceResponse.orderData.orderStatusValue;}if(null!=serviceResponse.orderData.orderItemDetails){for(i=0;i<=serviceResponse.orderData.orderItemDetails.length;
i++){var adiv=document.getElementById("ordTrackNum");var aTag=document.createElement("a");aTag.setAttribute("href",serviceResponse.orderData.orderItemDetails[i].trackingURL);aTag.innerHTML=serviceResponse.orderData.orderItemDetails[i].trackingNumber+"</br>";adiv.appendChild(aTag);}}}}}},failureHandler:function(serviceResponse){document.getElementById("GuestUserErrMSg").innerHTML="Please be sure you've included the Order Number and its related Billing Zip Code.";
}});