if(typeof(MessageHelper)=="undefined"||!MessageHelper||!MessageHelper.topicNamespace){MessageHelper={messages:{},identifier:"",getCurrentYear:function(){return new Date().getFullYear();},getCurrentMonth:function(){return new Date().getMonth()+1;},getCurrentDay:function(){return new Date().getDate();},getRenderContextProperty:function(context,propertyName){console.debug("enter getRenderContextProperty with propertyName = "+propertyName);
if(context==null){console.debug("context is null. Return null...");return null;}var result=context.properties[propertyName];console.debug("the found property value is: "+result);return result;},setMessage:function(key,msg){this.messages[key]=msg;},showHideMessageArea:function(topOffset){cursor_clear();
if(topOffset==null||topOffset==undefined){topOffset=0;}var node=dojo.byId("MessageArea");var fadeInAnimArgsArray=new Array();fadeInAnimArgsArray["node"]=node;fadeInAnimArgsArray["duration"]=200;fadeInAnimArgsArray["delay"]=0;var fadeOutAnimArgsArray=new Array();fadeOutAnimArgsArray["node"]=node;fadeOutAnimArgsArray["duration"]=500;
fadeOutAnimArgsArray["delay"]=7000;fadeOutAnimArgsArray["onEnd"]=function(){dojo.style(node,"display","none");dojo.style(node,"opacity",100);};dojo.style(node,"opacity",0);dojo.style(node,"display","block");var fadeInAnim=dojo.fadeIn(fadeInAnimArgsArray);var fadeOutAnim=dojo.fadeOut(fadeOutAnimArgsArray);
dojo.fx.chain([fadeInAnim,fadeOutAnim]).play();var messageNode=dojo.byId("msgpopup_content_wrapper");var shadowNode=new dojox.fx.Shadow({node:messageNode});shadowNode.startup();},hideMessageArea:function(){cursor_clear();var node=dojo.byId("MessageArea");var fadeOutAnimArgsArray=new Array();fadeOutAnimArgsArray["node"]=node;
fadeOutAnimArgsArray["duration"]=500;fadeOutAnimArgsArray["onEnd"]=function(){dojo.style(node,"display","none");dojo.style(node,"opacity",100);};dojo.fadeOut(fadeOutAnimArgsArray).play();dojo.byId("ErrorMessageText").innerHTML="";},displayErrorMessage:function(msg,topOffset,showType){if(topOffset==null||topOffset==undefined){topOffset=0;
}if(msg!=null&&msg!=undefined&&msg=="Please enter a valid payment method."){var ccerrorparam=[];ccerrorparam["orderId"]=document.getElementById("orderId").value;ccerrorparam["eventType"]="Payment";wc.service.invoke("AjaxMattelProcessOrderTrack",ccerrorparam);}if(showType==undefined||showType==null||showType==true){if(this.messages["ERROR_MESSAGE_TYPE"]!=null&&this.messages["ERROR_MESSAGE_TYPE"]!="undefined"){var MsgType=this.messages["ERROR_MESSAGE_TYPE"];
msg=MsgType+msg;}}console.info("msg "+msg);if(dojo.byId("MattelErrorMessageText")!=null&&dojo.byId("MattelErrorMessageText")!=undefined){dojo.byId("MattelErrorMessageText").innerHTML=msg;dojo.byId("MattelErrorMessageText").style.display="inline";}if(dojo.byId("MattelErrorMessageDiv")!=null&&dojo.byId("MattelErrorMessageDiv")!=undefined){dojo.byId("MattelErrorMessageDiv").style.display="inline";
}},insertinroXordtrack:function(){console.info("Inserting entry into Xordtrack table for payment instruction erro");var ccerrorparam=[];ccerrorparam["orderId"]=document.getElementById("orderId").value;ccerrorparam["eventType"]="Payment";wc.service.invoke("AjaxMattelProcessOrderTrack",ccerrorparam);},displayPromoCodeErrorMessage:function(msg,topOffset,showType){if(topOffset==null||topOffset==undefined){topOffset=0;
}if(showType==undefined||showType==null||showType==true){if(this.messages["ERROR_MESSAGE_TYPE"]!=null&&this.messages["ERROR_MESSAGE_TYPE"]!="undefined"){var MsgType=this.messages["ERROR_MESSAGE_TYPE"];msg=MsgType+msg;}}this.setMessageAreaStyle("error_icon");dojo.byId("MattelPromoCodeErrorMessageText").innerHTML=msg;
this.showHideMessageArea(topOffset);dojo.byId("clickableErrorMessageImg").focus();setTimeout("dojo.byId('MattelPromoCodeErrorMessageText').focus()",1000);},displayAddToCartErrorMessage:function(msg,topOffset,showType){if(topOffset==null||topOffset==undefined){topOffset=0;}if(showType==undefined||showType==null||showType==true){if(this.messages["ERROR_MESSAGE_TYPE"]!=null&&this.messages["ERROR_MESSAGE_TYPE"]!="undefined"){var MsgType=this.messages["ERROR_MESSAGE_TYPE"];
msg=MsgType+msg;}}msg=msg.replace("{0}",this.getThersholdQty());dojo.byId("MattelAddToCartErrorMessageText").innerHTML=msg;dojo.byId("MattelAddToCartErrorMessageText").style.display="inline";this.showHideMessageArea(topOffset);setTimeout("dojo.byId('MattelAddToCartErrorMessageText').focus()",1000);},errorMessageParams:[],setThersholdQty:function(errorMessage){this.errorMessageParams=errorMessage;
},getThersholdQty:function(){for(var index=0;index<this.errorMessageParams.length;index++){return this.errorMessageParams[0];}},getBuyableQty:function(){for(var index=0;index<this.errorMessageParams.length;index++){return this.errorMessageParams[1];}},displayMattelErrorMessage:function(msg,topOffset,showType){if(topOffset==null||topOffset==undefined){topOffset=0;
}if(showType==undefined||showType==null||showType==true){if(this.messages["ERROR_MESSAGE_TYPE"]!=null&&this.messages["ERROR_MESSAGE_TYPE"]!="undefined"){var MsgType=this.messages["ERROR_MESSAGE_TYPE"];msg=MsgType+msg;}}msg=msg.replace("{1}",this.getThersholdQty());msg=msg.replace("{0}",this.errorMessageParams[1]);
dojo.byId("MattelErrorMessageText").innerHTML=msg;dojo.byId("MattelErrorMessageDiv").style.display="inline";setTimeout("dojo.byId('MattelErrorMessageText').focus()",1000);document.location.href="#MattelErrorMessageDiv";},displayCartErrorMessage:function(msg,errorMsg,topOffset,showType){if(topOffset==null||topOffset==undefined){topOffset=0;
}if(showType==undefined||showType==null||showType==true){if(this.messages["ERROR_MESSAGE_TYPE"]!=null&&this.messages["ERROR_MESSAGE_TYPE"]!="undefined"){var MsgType=this.messages["ERROR_MESSAGE_TYPE"];msg=MsgType+msg;}}if(errorMsg.indexOf("||")!=-1){var arr=errorMsg.split("||");msg=msg.replace("{0}",arr[0]);
msg=msg.replace("{1}",arr[1]);}else{msg=msg.replace("{0}",errorMsg);}dojo.byId("MattelErrorMessageText").innerHTML=msg;dojo.byId("MattelErrorMessageDiv").style.display="inline";setTimeout("dojo.byId('MattelErrorMessageText').focus()",1000);},displayMattelRequisitionErrorMessage:function(msg,topOffset,showType){if(topOffset==null||topOffset==undefined){topOffset=0;
}if(showType==undefined||showType==null||showType==true){if(this.messages["ERROR_MESSAGE_TYPE"]!=null&&this.messages["ERROR_MESSAGE_TYPE"]!="undefined"){var MsgType=this.messages["ERROR_MESSAGE_TYPE"];msg=MsgType+msg;}}msg=msg.replace("{1}",this.errorMessageParams[0]);msg=msg.replace("{0}",this.errorMessageParams[1]);
dojo.byId("MattelErrorMessageText").innerHTML=msg;dojo.byId("MattelErrorMessageDiv").style.display="inline";this.showHideMessageArea(topOffset);setTimeout("dojo.byId('MattelErrorMessageText').focus()",1000);},displayMattelItemLevelErrorMessage:function(msg,topOffset,showType){if(topOffset==null||topOffset==undefined){topOffset=0;
}if(showType==undefined||showType==null||showType==true){if(this.messages["ERROR_MESSAGE_TYPE"]!=null&&this.messages["ERROR_MESSAGE_TYPE"]!="undefined"){var MsgType=this.messages["ERROR_MESSAGE_TYPE"];msg=MsgType+msg;}}msg=msg.replace("{0}",this.getBuyableQty());dojo.byId("MattelItemErrorMessageText").innerHTML=msg;
dojo.byId("MattelItemErrorMessageText").style.display="inline";setTimeout("dojo.byId('MattelErrorMessageText').focus()",1000);},displayLimitedQtyErrorMessage:function(msg,qty,catEntry){msg=msg.replace("{0}",catEntry);msg=msg.replace("{1}",qty);dojo.byId("MattelErrorMessageText").innerHTML=msg;dojo.byId("MattelErrorMessageDiv").style.display="inline";
setTimeout("dojo.byId('MattelErrorMessageText').focus()",1000);},mattelQtyFormErrorHandleClient:function(msg,orderItemId,showType){if(showType==undefined||showType==null||showType==true){if(this.messages["ERROR_MESSAGE_TYPE"]!=null&&this.messages["ERROR_MESSAGE_TYPE"]!="undefined"){var MsgType=this.messages["ERROR_MESSAGE_TYPE"];
msg=MsgType+msg;}}dojo.byId("MattelItemErrorMessageText_"+orderItemId).innerHTML=msg;dojo.byId("MattelItemErrorMessageText_"+orderItemId).style.display="inline";setTimeout("dojo.byId('MattelErrorMessageText').focus()",1000);},displayItemThresholdError:function(msg,topOffset,showType){if(topOffset==null||topOffset==undefined){topOffset=0;
}if(showType==undefined||showType==null||showType==true){if(this.messages["ERROR_MESSAGE_TYPE"]!=null&&this.messages["ERROR_MESSAGE_TYPE"]!="undefined"){var MsgType=this.messages["ERROR_MESSAGE_TYPE"];msg=MsgType+msg;}}console.info(msg);console.info("qty :"+this.getThersholdQty());msg=msg.replace("{0}",this.getThersholdQty());
console.info(msg);dojo.byId("MattelItemThresholdErrorMessageText").innerHTML=msg;dojo.byId("MattelItemThresholdErrorMessageText").style.display="inline";setTimeout("dojo.byId('MattelItemThresholdErrorMessageText').focus()",1000);},setMessageAreaStyle:function(styleId){},displayStatusMessage:function(msg,topOffset){if(topOffset==null||topOffset==undefined){topOffset=0;
}this.setMessageAreaStyle("success_icon");dojo.byId("ErrorMessageText").innerHTML=msg;this.showHideMessageArea(topOffset);dojo.byId("clickableErrorMessageImg").focus();setTimeout("dojo.byId('ErrorMessageText').focus()",1000);},displayMattelStatusMessage:function(msg,topOffset){if(topOffset==null||topOffset==undefined){topOffset=0;
}dojo.byId("MattelErrorMessageText").innerHTML=msg;dojo.byId("MattelErrorMessageDiv").style.display="inline";this.showHideMessageArea(topOffset);setTimeout("dojo.byId('MattelErrorMessageDiv').style.display = 'none'",10000);},hideAndClearMessage:function(){},adjustCoordinates:function(topOffset){if(dojo.style("MessageArea","display")!="none"){var page=dojo.byId("page");
var node=dojo.byId("MessageArea");if(page!=null&&node!=null){var coords=dojo.coords(page,true);var width=coords.w;if(dojo.isSafari){width=dojo.style("page","width");}if(topOffset==null||topOffset==undefined){topOffset=0;}dojo.style(node,{"width":width+20+"px","left":coords.x-10+"px","top":(coords.y+topOffset)+"px"});
}}},formErrorHandle:function(serviceResponse,formName){this.FormErrorHandleClient(serviceResponse.errorMessageParam,serviceResponse.errorMessage);},mattelformErrorHandle:function(serviceResponse,formName){this.mattelFormErrorHandleClient(serviceResponse.errorMessageParam,serviceResponse.errorMessage);
},formErrorHandleClient:function(id,errorMessage){var element=dojo.byId(id);if(errorMessage==null){console.debug("formErrorHandleClient: The error message is null.");return;}if(element){if(this.identifier!=(id+"_tooltip")){this.identifier=id+"_tooltip";var node=document.createElement("span");var imgDirPath=getImageDirectoryPath();
if(dojo.isIE<7){node.innerHTML=errorMessage+"<iframe id='errorMessageIFrame' scrolling='no' frameborder='0' src='"+imgDirPath+"images/empty.gif'></iframe>";}else{node.innerHTML=errorMessage;}var tooltip=new dijit.Tooltip({connectId:[id]},node);tooltip.startup();console.log("created",tooltip,tooltip.id);
element.focus();var err_container=document.createElement("div");err_container.setAttribute("class","spanacce");err_container.setAttribute("role","alert");err_container.setAttribute("id","alert");var err_msg=document.createTextNode(errorMessage);err_container.appendChild(err_msg);document.body.appendChild(err_container);
element.setAttribute("aria-invalid","true");tooltip.open(element);dojo.connect(element,"onblur",tooltip,"close");dojo.connect(element,"onblur",tooltip,"destroy");dojo.connect(element,"onblur",this,"clearCurrentIdentifier");tooltip._onMouseOver=this.emptyFunc;}}},mattelFormErrorHandleClient:function(id,errorMessage){console.info("id: "+id+" ;error: "+errorMessage);
var element=dojo.byId(id);if(errorMessage==null){console.debug("formErrorHandleClient: The error message is null, for id - "+id);return;}if(element){var errNode=dojo.byId(id+"_err");if(dojo.isIE<7){node.innerHTML=errorMessage+"<iframe id='errorMessageIFrame' scrolling='no' frameborder='0' src='"+imgDirPath+"images/empty.gif'></iframe>";
}else{errNode.innerHTML=errorMessage;}}},clearCurrentIdentifier:function(){this.identifier="";},emptyFunc:function(event){},containsDoubleByte:function(target){var str=new String(target);var oneByteMax=127;for(var i=0;i<str.length;i++){chr=str.charCodeAt(i);if(chr>oneByteMax){return true;}}return false;
},isValidEmail:function(strEmail){if(this.containsDoubleByte(strEmail)){return false;}if(strEmail.length==0){return true;}else{if(strEmail.length<5){return false;}else{if(strEmail.indexOf(" ")>0){return false;}else{if(strEmail.indexOf("@")<1){return false;}else{if(strEmail.lastIndexOf(".")<(strEmail.indexOf("@")+2)){return false;
}else{if(strEmail.lastIndexOf(".")>=strEmail.length-2){return false;}}}}}}return true;},isValidUTF8length:function(UTF16String,maxlength){if(this.utf8StringByteLength(UTF16String)>maxlength){return false;}else{return true;}},utf8StringByteLength:function(UTF16String){if(UTF16String===null){return 0;}var str=String(UTF16String);
var oneByteMax=127;var twoByteMax=2047;var byteSize=str.length;for(i=0;i<str.length;i++){chr=str.charCodeAt(i);if(chr>oneByteMax){byteSize=byteSize+1;}if(chr>twoByteMax){byteSize=byteSize+1;}}return byteSize;},IsNumeric:function(text,allowDot){if(allowDot){var ValidChars="0123456789.";}else{var ValidChars="0123456789";
}var IsNumber=true;var Char;for(i=0;i<text.length&&IsNumber==true;i++){Char=text.charAt(i);if(ValidChars.indexOf(Char)==-1){IsNumber=false;}}return IsNumber;},IsValidPhone:function(text){var ValidChars="0123456789()-+ ";var IsValid=true;var Char;for(i=0;i<text.length&&IsValid==true;i++){Char=text.charAt(i);
if(ValidChars.indexOf(Char)==-1){IsValid=false;}}return IsValid;}};}