dojo.require("wc.render.common");CommonControllersDeclarationJS={langId:"-1",updateAddressFlag:false,updateCommonFlag:false,updateBirthDate:false,CreditCardFlag:false,fromPage:false,refreshBilling:false,CreditCardFlag:false,refreshCreditCard:false,miniShopCartLoaded:false,storeId:"",catalogId:"",ajaxCheckOut:true,setCommonParameters:function(langId,storeId,catalogId){this.langId=langId;
this.storeId=storeId;this.catalogId=catalogId;},setControllerURL:function(controllerId,url){wc.render.getRefreshControllerById(controllerId).url=url;}};wc.render.declareRefreshController({id:"CategoryDisplay_Controller",renderContext:wc.render.getContextById("CategoryDisplay_Context"),url:"",formId:"",renderContextChangedHandler:function(message,widget){var controller=this;
var renderContext=this.renderContext;categoryDisplayJS.contextChanged=true;widget.refresh(renderContext.properties);},postRefreshHandler:function(widget){var controller=this;var renderContext=this.renderContext;if(categoryDisplayJS.contextChanged&&(!categoryDisplayJS.isHistory)){var identifier="&identifier="+(new Date()).getTime();
var historyObject=new categoryDisplayJS.HistoryTracker("CategoryDisplay_Widget",controller.url+identifier);dojo.back.addToHistory(historyObject);categoryDisplayJS.contextChanged=false;categoryDisplayJS.isHistory=false;}cursor_clear();try{if(typeof(ceadojo)!="undefined"){ceadojo.publish("/wc/collaboration/CategoryDisplayRefreshed",[]);
}}catch(err){console.log(err);}}}),wc.render.declareRefreshController({id:"SubCategoryDisplay_Controller",renderContext:wc.render.getContextById("SubCategoryDisplay_Context"),url:"",formId:"",renderContextChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;
categoryDisplayJS.contextChanged=true;widget.refresh(renderContext.properties);},postRefreshHandler:function(widget){var controller=this;var renderContext=this.renderContext;if(categoryDisplayJS.contextChanged&&(!categoryDisplayJS.isHistory)){var identifier="&identifier="+(new Date()).getTime();var historyObject=new categoryDisplayJS.HistoryTracker("SubCategoryDisplay_Widget",controller.url+identifier);
dojo.back.addToHistory(historyObject);categoryDisplayJS.contextChanged=false;categoryDisplayJS.isHistory=false;}cursor_clear();}}),wc.render.declareRefreshController({id:"ShopCartDisplayController",renderContext:wc.render.getContextById("ShopCartDisplay_Context"),url:"",formId:"",renderContextChangedHandler:function(message,widget){var renderContext=this.renderContext;
if(renderContext.properties["updateContextFlag"]){console.info("In RCH - ShopCartDisplayController: "+message.actionId);widget.refresh(renderContext.properties);}},modelChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;var cartChangeEvent=ServicesEventMapping.cartChangeEvent;
console.info("Map value :"+ServicesEventMapping.cart_changed[cartChangeEvent]);console.info("controller.id :"+controller.id);if((message.actionId==ServicesEventMapping.cart_changed[cartChangeEvent])&&(controller.id in ServicesEventMapping.cart_controllers[cartChangeEvent])){console.info("In MCH - ShopCartDisplayController: "+message.actionId);
widget.refresh(this.renderContext.properties);submitRequest();}},postRefreshHandler:function(widget){resetRequest();var controller=this;var renderContext=this.renderContext;renderContext.properties["updateContextFlag"]=false;Mattel.init();if(typeof(savedOrdersJS)!=null&&typeof(savedOrdersJS)!="undefined"){savedOrdersJS.isCurrentOrderPage(true);
}if(typeof(CheckoutHelperJS)!=null&&typeof(CheckoutHelperJS)!="undefined"){CheckoutHelperJS.splitItem=false;}var controller=this;if(document.getElementById("discountDetailsSection")!=null){document.getElementById("discountDetailsSection").style.display="block";}if(document.getElementById("appliedPromotionCodes")!=null){document.getElementById("appliedPromotionCodes").style.display="block";
}if(!CheckoutHelperJS.isAjaxCheckOut()){CheckoutHelperJS.setFieldDirtyFlag(false);CheckoutHelperJS.initDojoEventListenerShoppingCartPage();}var orderId=renderContext.properties["orderId"];if(document.getElementById("currentOrderId")){orderId=document.getElementById("currentOrderId").value;}ShipmodeSelectionExtJS.displaySavedShipmentTypeForOrder(orderId);
if(document.getElementById("OrderFirstItemId")){ShipmodeSelectionExtJS.orderItemId=document.getElementById("OrderFirstItemId").value;}var orderQuantityObj=document.getElementById("orderQuantityShopCart");var orderAmoutObj=document.getElementById("orderAmountValueShopCart");var orderIdObj=document.getElementById("currentOrderId");
var orderAmountCurrencyObj=document.getElementById("orderAmountCurrencyShopCart");var orderLangIdObj=document.getElementById("orderlangIdhopCart");console.info("orderQuantityObj:  "+orderQuantityObj);console.info("orderAmoutObj:  "+orderAmoutObj);if(undefined!=orderQuantityObj&&undefined!=orderAmoutObj&&undefined!=orderIdObj&&undefined!=orderAmountCurrencyObj&&undefined!=orderLangIdObj){console.info("orderQuantityObj:  "+orderQuantityObj.value);
console.info("orderAmoutObj:  "+orderAmoutObj.value);updateCartCookie(orderQuantityObj.value,orderAmoutObj.value,orderIdObj.value,orderAmountCurrencyObj.value,orderLangIdObj.value);}dojo.query('div[id^="shoppingListScript_"]').forEach(function(node,index,nodelist){dojo.eval(node.innerHTML);});cursor_clear();
}}),wc.render.declareRefreshController({id:"ShopCartPaginationDisplayController",renderContext:wc.render.getContextById("ShopCartPaginationDisplay_Context"),url:"",formId:"",renderContextChangedHandler:function(message,widget){console.info("In RCH - ShopCartPaginationDisplayController: "+message.actionId);
var controller=this;var renderContext=this.renderContext;console.info(controller);console.info(renderContext);if(controller.testForChangedRC(["beginIndex"])){widget.refresh(renderContext.properties);}else{if(this.renderContext.properties["isLastRQItem"]){widget.refresh(renderContext.properties);}else{if(renderContext.properties["itemThersholdError"]){widget.refresh(renderContext.properties);
}else{if(renderContext.properties["updateContextFlag"]){widget.refresh(renderContext.properties);}}}}},modelChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;var cartChangeEvent=ServicesEventMapping.cartChangeEvent;console.info("controller.id :"+controller.id);
if((message.actionId==ServicesEventMapping.cart_changed[cartChangeEvent])&&(controller.id in ServicesEventMapping.cart_controllers[cartChangeEvent])){console.info("In MCH - ShopCartPaginationDisplayController: "+message.actionId);widget.refresh(renderContext.properties);}},postRefreshHandler:function(widget){var controller=this;
var renderContext=this.renderContext;cursor_clear();if(!CheckoutHelperJS.isAjaxCheckOut()){CheckoutHelperJS.setFieldDirtyFlag(false);CheckoutHelperJS.initDojoEventListenerShoppingCartPage();}var cartChangeEvent=ServicesEventMapping.cartChangeEvent;console.info("cartChangeEvent: "+cartChangeEvent);if(undefined!=cartChangeEvent&&null!=cartChangeEvent){var actionId=ServicesEventMapping.cart_changed[cartChangeEvent];
console.info("MESSAGE: "+actionId);closeAddTocartLoadIcon(actionId);}var orderId=renderContext.properties["orderId"];if(document.getElementById("currentOrderId")){orderId=document.getElementById("currentOrderId").value;}ShipmodeSelectionExtJS.displaySavedShipmentTypeForOrder(orderId);if(renderContext.properties["itemThersholdError"]){}if(renderContext.properties["itemDeleteMsg"]){MessageHelper.displayMattelStatusMessage(MessageHelper.messages["SHOPCART_REMOVEITEM"]);
}if($("#isAset").val()=="true"&&actionId=="AjaxAddOrderItemForUpdate"){$("#MattelErrorMessageDiv").css("display","none");$("#MattelErrorMessageText").text("");}Mattel.init();}}),wc.render.declareRefreshController({id:"ShopCartPaginationDisplayController1",renderContext:wc.render.getContextById("ShopCartPaginationDisplay_Context1"),url:"",formId:"",renderContextChangedHandler:function(message,widget){var controller=this;
var renderContext=this.renderContext;if(controller.testForChangedRC(["beginIndex"])){widget.refresh(renderContext.properties);}},postRefreshHandler:function(widget){var controller=this;var renderContext=this.renderContext;cursor_clear();if(!CheckoutHelperJS.isAjaxCheckOut()){CheckoutHelperJS.setFieldDirtyFlag(false);
CheckoutHelperJS.initDojoEventListenerShoppingCartPage();}var orderId=renderContext.properties["orderId"];if(document.getElementById("currentOrderId")){orderId=document.getElementById("currentOrderId").value;}ShipmodeSelectionExtJS.displaySavedShipmentTypeForOrder(orderId);}}),wc.render.declareRefreshController({id:"PendingOrderPaginationDisplayController",renderContext:wc.render.getContextById("PendingOrderPaginationDisplay_Context"),url:"",formId:"",renderContextChangedHandler:function(message,widget){var controller=this;
var renderContext=this.renderContext;if(controller.testForChangedRC(["beginIndex"])){widget.refresh(renderContext.properties);}},postRefreshHandler:function(widget){var controller=this;var renderContext=this.renderContext;cursor_clear();}}),wc.render.declareRefreshController({id:"OrderItemPaginationDisplayController",renderContext:wc.render.getContextById("OrderItemPaginationDisplay_Context"),url:"",formId:"",renderContextChangedHandler:function(message,widget){var controller=this;
var renderContext=this.renderContext;if(controller.testForChangedRC(["beginIndex"])){widget.refresh(renderContext.properties);}},postRefreshHandler:function(widget){var controller=this;var renderContext=this.renderContext;cursor_clear();}}),wc.render.declareRefreshController({id:"SSFSOrderItemPaginationDisplayController",renderContext:wc.render.getContextById("OrderItemPaginationDisplay_Context"),url:"",formId:"",renderContextChangedHandler:function(message,widget){var controller=this;
var renderContext=this.renderContext;if(controller.testForChangedRC(["beginIndex"])){widget.refresh(renderContext.properties);}},postRefreshHandler:function(widget){var controller=this;var renderContext=this.renderContext;var orderStr=document.getElementById("jsonOrderStr").innerHTML;var beginIndex=this.renderContext.properties["beginIndex"];
var pageSize=this.renderContext.properties["pageSize"];sterlingIntegrationJS.populateOrderLineInfoForSingleShipment(orderStr,beginIndex,pageSize);cursor_clear();}}),wc.render.declareRefreshController({id:"MSOrderItemPaginationDisplayController",renderContext:wc.render.getContextById("MSOrderItemPaginationDisplay_Context"),url:"",formId:"",renderContextChangedHandler:function(message,widget){var controller=this;
var renderContext=this.renderContext;if(controller.testForChangedRC(["beginIndex"])){widget.refresh(renderContext.properties);}},postRefreshHandler:function(widget){var controller=this;var renderContext=this.renderContext;cursor_clear();}}),wc.render.declareRefreshController({id:"SSFSMSOrderItemPaginationDisplayController",renderContext:wc.render.getContextById("MSOrderItemPaginationDisplay_Context"),url:"",formId:"",renderContextChangedHandler:function(message,widget){var controller=this;
var renderContext=this.renderContext;if(controller.testForChangedRC(["beginIndex"])){widget.refresh(renderContext.properties);}},postRefreshHandler:function(widget){var controller=this;var renderContext=this.renderContext;var orderStr=document.getElementById("jsonOrderStr").innerHTML;var beginIndex=this.renderContext.properties["beginIndex"];
var pageSize=this.renderContext.properties["pageSize"];sterlingIntegrationJS.populateOrderLineInfoForMultipleShipment(orderStr,beginIndex,pageSize);cursor_clear();}}),wc.render.declareRefreshController({id:"CouponDisplay_Controller",renderContext:wc.render.getContextById("CouponDisplay_Context"),url:"",formId:"",modelChangedHandler:function(message,widget){var controller=this;
var renderContext=this.renderContext;if(message.actionId=="AjaxCouponsAddRemove"||message.actionId=="AjaxWalletItemProcessServiceDelete"){widget.refresh(renderContext.properties);}}}),wc.render.declareRefreshController({id:"PromotionFreeGifts_Controller",renderContext:wc.render.getContextById("PromotionFreeGifts_Context"),url:"",formId:"",modelChangedHandler:function(message,widget){var controller=this;
var renderContext=this.renderContext;},renderContextChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;widget.refresh(renderContext.properties);},postRefreshHandler:function(widget){var controller=this;var renderContext=this.renderContext;cursor_clear();PromotionChoiceOfFreeGiftsJS.showFreeGiftsDialog();
}}),wc.render.declareRefreshController({id:"ListOrdersDisplay_Controller",renderContext:wc.render.getContextById("ListOrdersDisplay_Context"),url:"",formId:"",modelChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;if(message.actionId in listorders_changed){if((message.actionId=="AjaxOrderCreate"||message.actionId=="AjaxSingleOrderCalculate")&&this.renderContext.properties["startNumber"]!=0){wc.render.updateContext("ListOrdersDisplay_Context",{"startNumber":0});
}else{widget.refresh(renderContext.properties);}}},renderContextChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;if(controller.testForChangedRC(["startNumber"])){widget.refresh(renderContext.properties);}},postRefreshHandler:function(widget){var controller=this;
var renderContext=this.renderContext;if(savedOrdersJS.updateCurrentOrder){savedOrdersJS.initializeCurrentOrder();savedOrdersJS.updateCurrentOrder=false;}savedOrdersJS.updateToolbar();savedOrdersJS.checkAllIfNeeded();}}),wc.render.declareRefreshController({id:"PendingOrderDisplayController",renderContext:wc.render.getContextById("PendingOrderPaginationDisplay_Context"),url:"",formId:"",modelChangedHandler:function(message,widget){var controller=this;
var renderContext=this.renderContext;if(message.actionId in order_updated){this.currentDesc=document.getElementById("OrderDescription_input").value;widget.refresh(renderContext.properties);}},postRefreshHandler:function(widget){var controller=this;cursor_clear();if(this.currentDesc!=document.getElementById("OldOrderDescription").value){var inputElement=document.getElementById("OrderDescription_input");
if(inputElement!=null&&inputElement!="undefined"){inputElement.value=this.currentDesc;dojo.removeClass(inputElement,"savedOrderDetailsInputBorder");dojo.addClass(inputElement,"savedOrderDetailsInputBorderWarning");}}}}),wc.render.declareRefreshController({id:"BrowsingHistoryController",renderContext:wc.render.getContextById("BrowsingHistoryContext"),url:"",formId:"",renderContextChangedHandler:function(message,widget){var controller=this;
var renderContext=this.renderContext;if(controller.testForChangedRC(["status"])){widget.refresh(renderContext.properties);}},postRefreshHandler:function(widget){if(!document.getElementById("WC_ScrollingProductsESpot_EmptyImgContainer_BrowsingHistory")){document.getElementById("WC_LeftSidebarDisplay_div_5").style.display="block";
}}}),wc.render.declareRefreshController({id:"BrowsingHistoryDisplay_Controller",renderContext:wc.render.getContextById("BrowsingHistoryDisplay_Context"),url:"",formId:"",renderContextChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;if(controller.testForChangedRC(["currentPage"])||controller.testForChangedRC(["pageView"])){widget.refresh(renderContext.properties);
}},postRefreshHandler:function(widget){cursor_clear();}}),wc.render.declareRefreshController({id:"CategorySubscriptionController",renderContext:wc.render.getContextById("CategorySubscriptionContext"),url:"",formId:"",modelChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;
if(message.actionId=="AjaxCategorySubscribe"){widget.refresh(renderContext.properties);}},postRefreshHandler:function(widget){cursor_clear();if(dojo.byId("CategorySubscriptionImage")==null){dojo.animateProperty({node:dojo.byId("CategorySubscriptionLink"),duration:1500,properties:{backgroundColor:{start:"yellow",end:dojo.style("CategorySubscriptionLink","backgroundColor")}}}).play();
}}}),wc.render.declareRefreshController({id:"RecurringOrderDisplayController",renderContext:wc.render.getContextById("RecurringOrderDisplay_Context"),url:"",formId:"",modelChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;if(message.actionId=="AjaxCancelSubscription"){controller.url=wc.render.getRefreshControllerById("RecurringOrderDisplayController").url;
widget.refresh(renderContext.properties);}},renderContextChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;if(controller.testForChangedRC(["beginIndex"])){widget.refresh(renderContext.properties);}},postRefreshHandler:function(widget){var controller=this;
var renderContext=this.renderContext;cursor_clear();}}),wc.render.declareRefreshController({id:"SubscriptionDisplayController",renderContext:wc.render.getContextById("SubscriptionDisplay_Context"),url:"",formId:"",modelChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;
if(message.actionId=="AjaxCancelSubscription"){controller.url=wc.render.getRefreshControllerById("SubscriptionDisplayController").url;widget.refresh(renderContext.properties);}},renderContextChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;if(controller.testForChangedRC(["beginIndex"])){widget.refresh(renderContext.properties);
}},postRefreshHandler:function(widget){var controller=this;var renderContext=this.renderContext;cursor_clear();}}),wc.render.declareRefreshController({id:"RecentRecurringOrderDisplayController",renderContext:wc.render.getContextById("RecentRecurringOrderDisplay_Context"),url:"",formId:"",modelChangedHandler:function(message,widget){var controller=this;
var renderContext=this.renderContext;if(message.actionId=="AjaxCancelSubscription"){controller.url=wc.render.getRefreshControllerById("RecurringOrderDisplayController").url;widget.refresh(renderContext.properties);}},postRefreshHandler:function(widget){var controller=this;var renderContext=this.renderContext;
cursor_clear();}}),wc.render.declareRefreshController({id:"RecentSubscriptionDisplayController",renderContext:wc.render.getContextById("RecentSubscriptionDisplay_Context"),url:"",formId:"",modelChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;if(message.actionId=="AjaxCancelSubscription"){controller.url=wc.render.getRefreshControllerById("SubscriptionDisplayController").url;
widget.refresh(renderContext.properties);}},postRefreshHandler:function(widget){var controller=this;var renderContext=this.renderContext;cursor_clear();}}),wc.render.declareRefreshController({id:"RecurringOrderChildOrdersDisplayController",renderContext:wc.render.getContextById("RecurringOrderChildOrdersDisplay_Context"),url:"",formId:"",renderContextChangedHandler:function(message,widget){var controller=this;
var renderContext=this.renderContext;if(controller.testForChangedRC(["beginIndex"])){widget.refresh(renderContext.properties);}},postRefreshHandler:function(widget){var controller=this;var renderContext=this.renderContext;cursor_clear();}}),wc.render.declareRefreshController({id:"SubscriptionChildOrdersDisplayController",renderContext:wc.render.getContextById("SubscriptionChildOrdersDisplay_Context"),url:"",formId:"",renderContextChangedHandler:function(message,widget){var controller=this;
var renderContext=this.renderContext;if(controller.testForChangedRC(["beginIndex"])){widget.refresh(renderContext.properties);}},postRefreshHandler:function(widget){var controller=this;var renderContext=this.renderContext;cursor_clear();}}),wc.render.declareRefreshController({id:"QuickInfoDetailsController",renderContext:wc.render.getContextById("QuickInfoContext"),url:"",formId:"",renderContextChangedHandler:function(message,widget){widget.refresh(this.renderContext.properties);
},postRefreshHandler:function(widget){if(dojo.byId("QuickInfostoreParams")){var storeParams=dojo.byId("QuickInfostoreParams").value;if(dojo.byId("catEntryParamsForJS")){var catEntryParams=dojo.byId("catEntryParamsForJS").value;}var shoppingListNames=dojo.byId("QuickInfoshoppingListNames").value;shoppingListJSQuickInfo=new ShoppingListJS(dojo.fromJson(storeParams),dojo.fromJson(catEntryParams),dojo.fromJson(shoppingListNames),"shoppingListJSQuickInfo");
var catEntryId=dojo.fromJson(catEntryParams).id;if(null!=catEntryId&&""!=catEntryId){wc.render.updateContext("QuickInfoDiscountDetailsContext",{productId:dojo.fromJson(catEntryParams).id});}}if(dojo.byId("catEntryParamsForJS")){QuickInfoJS.catEntryParams=dojo.fromJson(dojo.byId("catEntryParamsForJS").value);
}var quickInfoPopup=dijit.byId("quickInfoPopup");if(quickInfoPopup!=null){quickInfoPopup.closeButtonNode.style.display="none";closeAllDialogs();if(QuickInfoJS.itemId==""){QuickInfoJS.setCatEntryQuantity(1);QuickInfoJS.selectDefaultSwatch();}else{QuickInfoJS.selectCurrentAttributes();}quickInfoPopup.show();
}else{console.debug("quickInfoPopup does not exist");}cursor_clear();}}),wc.render.declareRefreshController({id:"DiscountDetailsController",renderContext:wc.render.getContextById("DiscountDetailsContext"),url:"DiscountDetailsView",formId:"",renderContextChangedHandler:function(message,widget){widget.refresh(this.renderContext.properties);
},postRefreshHandler:function(widget){cursor_clear();}}),wc.render.declareRefreshController({id:"QuickInfoDiscountDetailsController",renderContext:wc.render.getContextById("QuickInfoDiscountDetailsContext"),url:"DiscountDetailsView",formId:"",renderContextChangedHandler:function(message,widget){widget.refresh(this.renderContext.properties);
},postRefreshHandler:function(widget){cursor_clear();}}),wc.render.declareRefreshController({id:"DoubleContentAreaESpot_Controller",renderContext:wc.render.getContextById("DoubleContentAreaESpot_Context"),url:"",formId:"",renderContextChangedHandler:function(message,widget){if(this.testForChangedRC(["emsName"])){widget.refresh(this.renderContext.properties);
}},postRefreshHandler:function(widget){cursor_clear();}}),wc.render.declareRefreshController({id:"ScrollableESpot_Controller",renderContext:wc.render.getContextById("ScrollableESpot_Context"),url:"",formId:"",renderContextChangedHandler:function(message,widget){if(this.testForChangedRC(["emsName"])){widget.refresh(this.renderContext.properties);
}},postRefreshHandler:function(widget){cursor_clear();}}),wc.render.declareRefreshController({id:"TopCategoriesESpot_Controller",renderContext:wc.render.getContextById("TopCategoriesESpot_Context"),url:"",formId:"",renderContextChangedHandler:function(message,widget){if(this.testForChangedRC(["emsName"])){widget.refresh(this.renderContext.properties);
}},postRefreshHandler:function(widget){cursor_clear();}}),wc.render.declareRefreshController({id:"CategoryFeaturedProductsESpot_Controller",renderContext:wc.render.getContextById("CategoryFeaturedProductsESpot_Context"),url:"",formId:"",renderContextChangedHandler:function(message,widget){if(this.testForChangedRC(["emsName"])){widget.refresh(this.renderContext.properties);
}},postRefreshHandler:function(widget){cursor_clear();}}),wc.render.declareRefreshController({id:"HomeHeroESpot_Controller",renderContext:wc.render.getContextById("HomeHeroESpot_Context"),url:"",formId:"",renderContextChangedHandler:function(message,widget){if(this.testForChangedRC(["emsName"])){widget.refresh(this.renderContext.properties);
}},postRefreshHandler:function(widget){cursor_clear();}}),wc.render.declareRefreshController({id:"HomeLeftESpot_Controller",renderContext:wc.render.getContextById("HomeLeftESpot_Context"),url:"",formId:"",renderContextChangedHandler:function(message,widget){if(this.testForChangedRC(["emsName"])){widget.refresh(this.renderContext.properties);
}},postRefreshHandler:function(widget){cursor_clear();}}),wc.render.declareRefreshController({id:"HomeRightTopESpot_Controller",renderContext:wc.render.getContextById("HomeRightTopESpot_Context"),url:"",formId:"",renderContextChangedHandler:function(message,widget){if(this.testForChangedRC(["emsName"])){widget.refresh(this.renderContext.properties);
}},postRefreshHandler:function(widget){cursor_clear();}}),wc.render.declareRefreshController({id:"HomeRightBottomESpot_Controller",renderContext:wc.render.getContextById("HomeRightBottomESpot_Context"),url:"",formId:"",renderContextChangedHandler:function(message,widget){if(this.testForChangedRC(["emsName"])){widget.refresh(this.renderContext.properties);
}},postRefreshHandler:function(widget){cursor_clear();}}),wc.render.declareRefreshController({id:"TallDoubleContentAreaESpot_Controller",renderContext:wc.render.getContextById("TallDoubleContentAreaESpot_Context"),url:"",formId:"",renderContextChangedHandler:function(message,widget){if(this.testForChangedRC(["emsName"])){widget.refresh(this.renderContext.properties);
}},postRefreshHandler:function(widget){cursor_clear();}}),wc.render.declareRefreshController({id:"TopCategoryHeroESpot_Controller",renderContext:wc.render.getContextById("TopCategoryHeroESpot_Context"),url:"",formId:"",renderContextChangedHandler:function(message,widget){if(this.testForChangedRC(["emsName"])){widget.refresh(this.renderContext.properties);
}},postRefreshHandler:function(widget){cursor_clear();}}),wc.render.declareRefreshController({id:"TopCategoryTallDoubleESpot_Controller",renderContext:wc.render.getContextById("TopCategoryTallDoubleESpot_Context"),url:"",formId:"",renderContextChangedHandler:function(message,widget){if(this.testForChangedRC(["emsName"])){widget.refresh(this.renderContext.properties);
}},postRefreshHandler:function(widget){cursor_clear();}}),wc.render.declareRefreshController({id:"MattelSceneController",renderContext:wc.render.getContextById("MattelSceneContext"),url:"",formId:"",renderContextChangedHandler:function(message,widget){widget.refresh(this.renderContext.properties);},postRefreshHandler:function(widget){cursor_clear();
}}),wc.render.declareRefreshController({id:"AttachmentPagination_Controller",renderContext:wc.render.getContextById("AttachmentPagination_Context"),url:"",formId:"",renderContextChangedHandler:function(message,widget){if(this.testForChangedRC(["beginIndex"])){widget.refresh(this.renderContext.properties);
}},postRefreshHandler:function(widget){cursor_clear();}}),wc.render.declareRefreshController({id:"MattelMiniShoppingCartController",renderContext:wc.render.getContextById("MattelMiniShoppingCartContext"),url:"",formId:"",modelChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;
if(message.actionId=="AjaxAddOrderItem"||message.actionId=="AddOrderItem"||message.actionId=="AjaxDeleteOrderItemForShippingBillingPage"||message.actionId=="mattelAddOnServiceGiftOptionsSave"||message.actionId=="mattelAddOnServicesSave"){var param=[];if(message.actionId=="AjaxAddOrderItem"||message.actionId=="AddOrderItem"||message.actionId=="mattelAddOnServiceGiftOptionsSave"||message.actionId=="mattelAddOnServicesSave"){param.addedOrderItemId=message.orderItemId+"";
}var countArr=param.addedOrderItemId.split(",");var count=countArr.length;if(count==1&&undefined!=document.getElementById("WC_QuickInfo_input_quantity")&&null!=document.getElementById("WC_QuickInfo_input_quantity").value){count=document.getElementById("WC_QuickInfo_input_quantity").value;}$(".popup.dijitContentPane").show();
$("#addTocartLoadIcon").css("display","none");$("#addTocartLoadIconADD").css("display","none");$("#addTocartLoadIconQV").css("display","none");var url=dojo.byId("MattelMiniShopCartDisplayViewURL").value;url=url+"&MattelAddedOrderItemId="+param.addedOrderItemId+"&AddedOrderItemCount="+count+"&parentCatentryId="+message.parentCatentryId;
console.info("url: "+url);$.v_modal({transition:"elastic",speed:0,fadeOut:10,href:url,onComplete:function(){$(this).v_modal.resize();}});if($("#miniShopCartDiv").length){$("#vmClose").click(function(){$("#miniShopCartDiv").trigger("close");});}}},postRefreshHandler:function(widget){loadMiniShopCartPageView();
Mattel.Analytics.addEvent("loadMiniShopCartEvent");Mattel.Analytics.addEvent("loadMiniShopCartCheckoutEvent");Mattel.Analytics.addEvent("loadMiniShopCartTotalItemEvent");cursor_clear();}}),wc.render.declareRefreshController({id:"MattelMiniCartWidgetController",renderContext:wc.render.getContextById("MattelMiniCartWidgetContext"),url:"",formId:"",modelChangedHandler:function(message,widget){console.info("CheckoutHelperJS.splitItem: "+CheckoutHelperJS.splitItem);
if(!CheckoutHelperJS.splitItem&&message.actionId!="MattelGetCatalogEntryDetailsByID"){var storeIdentifier=document.getElementById("storeIdtfr").value;if(storeIdentifier=="AGStore"||storeIdentifier=="AGCAStore"){if($("#shopCartFromPage").val()==null||$("#shopCartFromPage").val()==undefined||$("#shopCartFromPage").val()==""){widget.refresh(this.renderContext.properties);
}}else{widget.refresh(this.renderContext.properties);}}},postRefreshHandler:function(widget){Mattel.init();cursor_clear();}}),wc.render.declareRefreshController({id:"RequisitionListTableDetail_Controller",renderContext:wc.render.getContextById("RequisitionListDetailContext"),url:"",formId:"",modelChangedHandler:function(message,widget){var controller=this;
var cartChangeEvent=ServicesEventMapping.cartChangeEvent;console.info("controller.id :"+controller.id);console.info("Action for RQ :"+message.actionId);console.info("controller from map :"+ServicesEventMapping.cart_controllers[cartChangeEvent]);if((message.actionId==ServicesEventMapping.cart_changed[cartChangeEvent])&&(controller.id in ServicesEventMapping.cart_controllers[cartChangeEvent])){console.info("In MCH - RequisitionListTableDetail_Controller: "+message.actionId);
widget.refresh(this.renderContext.properties);}},postRefreshHandler:function(widget){Mattel.init();}}),wc.render.declareRefreshController({id:"MattelOrderBillingController",renderContext:wc.render.getContextById("MattelOrderBillingContext"),url:"",formId:"",renderContextChangedHandler:function(message,widget){var renderContext=this.renderContext;
console.info(renderContext.properties["updateContextFlag"]);if(renderContext.properties["updateContextFlag"]){widget.refresh(renderContext.properties);}},modelChangedHandler:function(message,widget){if(CommonControllersDeclarationJS.updateCommonFlag==true){widget.refresh(this.renderContext.properties);
}}}),wc.render.declareRefreshController({id:"MattelRefreshAddressDetailsId",renderContext:wc.render.getContextById("MattelOrderAddressDetailsContext"),url:"",formId:"",renderContextChangedHandler:function(message,widget){if(CommonControllersDeclarationJS.refreshBilling==true){var renderContext=this.renderContext;
widget.refresh(renderContext.properties);renderContext.properties["refreshBilling"]=false;}},modelChangedHandler:function(message,widget){if((CommonControllersDeclarationJS.updateAddressFlag==true)&&message.actionId!="mattelOrderBillingAddressUpdate"){widget.refresh(this.renderContext.properties);}},postRefreshHandler:function(widget){if(null!=dojo.byId("MattelShopCartAddressDetails")&&undefined!=dojo.byId("MattelShopCartAddressDetails")){var div=dojo.byId("MattelShopCartAddressDetails");
dojo.empty(div);}Mattel.init();if(CommonControllersDeclarationJS.refreshBilling||CommonControllersDeclarationJS.fromPage){CommonControllersDeclarationJS.refreshBilling=false;CommonControllersDeclarationJS.fromPage=true;}}}),wc.render.declareRefreshController({id:"MattelStandardGiftCardController",renderContext:wc.render.getContextById("MattelOrderGiftDetailsContext"),url:"",formId:"",renderContextChangedHandler:function(message,widget){var renderContext=this.renderContext;
if(renderContext.properties["refreshGiftFaultCard"]){widget.refresh(renderContext.properties);renderContext.properties["refreshGiftFaultCard"]=false;}},modelChangedHandler:function(message,widget){if(CommonControllersDeclarationJS.updateCommonFlag==true){widget.refresh(this.renderContext.properties);
}}}),wc.render.declareRefreshController({id:"MattelRefreshCreditCardId",renderContext:wc.render.getContextById("MattelCreditCardRefreshContext"),url:"",formId:"",renderContextChangedHandler:function(message,widget){var renderContext=this.renderContext;if(CommonControllersDeclarationJS.CreditCardFlag==true||renderContext.properties["refreshCreditCard"]){widget.refresh(renderContext.properties);
renderContext.properties["refreshCreditCard"]=false;}},modelChangedHandler:function(message,widget){if(CommonControllersDeclarationJS.updateCardFlag==true){widget.refresh(this.renderContext.properties);}},postRefreshHandler:function(widget){Mattel.init();$("#creditCardSelect .selectList dl dd").click(function(ev){ev.preventDefault();
itemSelected=parseInt($(this).attr("class").replace("itm-","").replace(" hovered",""));valueSelected=$(this).closest(".selectList").parent().find("select option")[itemSelected].value;idSelected=$(this).closest(".selectList").parent().find("select option")[itemSelected].id;var selectedAddress=idSelected.split("_");
CheckOutSubmit.displayCardDetails(valueSelected);});}}),wc.render.declareRefreshController({id:"RequisitionListDisplay_Controller",renderContext:wc.render.getContextById("RequisitionListDisplayContext"),url:"",formId:"",renderContextChangedHandler:function(message,widget){var renderContext=this.renderContext;
if(this.renderContext.properties["requisitionListId"]!=null){console.info("In RCH - RequisitionListDisplay_Controller: "+message.actionId);widget.refresh(this.renderContext.properties);}if(this.renderContext.properties["isLastRQItem"]){wc.render.updateContext("ShopCartPaginationDisplay_Context",{"isLastRQItem":true});
RequisitionList.isLastRQItem=false;}},modelChangedHandler:function(message,widget){var cartChangeEvent=ServicesEventMapping.cartChangeEvent;var controller=this;console.info("controller.id :"+controller.id);if((message.actionId==ServicesEventMapping.cart_changed[cartChangeEvent])&&(controller.id in ServicesEventMapping.cart_controllers[cartChangeEvent])){if(!RequisitionList.isLastRQItem){console.info("In MCH - RequisitionListDisplay_Controller: "+message.actionId);
widget.refresh(this.renderContext.properties);}}},postRefreshHandler:function(widget){if(RequisitionList.splitItem){RequisitionList.splitItem=false;}Mattel.init();}}),wc.render.declareRefreshController({id:"MattelShopCartOrderTotalsAreaController",renderContext:wc.render.getContextById("shopCartOrderTotal_Context"),url:"",formId:"",renderContextChangedHandler:function(message,widget){widget.refresh(this.renderContext.properties);
},modelChangedHandler:function(message,widget){console.info("action Id: "+message.actionId);var controller=this;var renderContext=this.renderContext;var cartChangeEvent=ServicesEventMapping.cartChangeEvent;console.info("Map value :"+ServicesEventMapping.cart_changed[cartChangeEvent]);console.info("controller.id :"+controller.id);
if((message.actionId==ServicesEventMapping.cart_changed[cartChangeEvent])&&(controller.id in ServicesEventMapping.cart_controllers[cartChangeEvent])){console.info("In MCH - MattelShopCartOrderTotalsAreaController: "+message.actionId);widget.refresh(renderContext.properties);cursor_clear();}if(message.actionId=="AjaxUpdateOrderItem"){widget.refresh(renderContext.properties);
cursor_clear();}}}),wc.render.declareRefreshController({id:"FPBirthAddressController",renderContext:wc.render.getContextById("MattelFPBirthAddressUpdateContext"),url:"",formId:"",renderContextChangedHandler:function(message,widget){widget.refresh(this.renderContext.properties);},postRefreshHandler:function(widget){Mattel.init();
parseWidget("AjaxAddChildBirthDate");}}),wc.render.declareRefreshController({id:"MattelDisplayMultipleBirthDatesController",renderContext:wc.render.getContextById("MattelDisplayMultipleBirthDatesRefreshContext"),url:"",formId:"",modelChangedHandler:function(message,widget){if(CommonControllersDeclarationJS.updateBirthDate==true){widget.refresh(this.renderContext.properties);
}},postRefreshHandler:function(widget){$(".formContainerFull.halfSpaceTop select").each(function(){$(this).find("option").eq(0).attr("selected","true");$(this).parent().find(".selectedValue").text($(this).find("option:selected").text());$(this).parent().find("dd.selected").removeClass("selected");$(this).parent().find("dd.itm-0").addClass("selected");
});Mattel.init();}}),wc.render.declareRefreshController({id:"AjaxPhoneEmailUpdateController",renderContext:wc.render.getContextById("AjaxPhoneEmailUpdateContext"),url:"",formId:"",renderContextChangedHandler:function(message,widget){widget.refresh(this.renderContext.properties);},postRefreshHandler:function(widget){Mattel.init();
}}),wc.render.declareRefreshController({id:"MattelCreditCardDetails",renderContext:wc.render.getContextById("MattelCardDetailsContext"),url:"",formId:"",renderContextChangedHandler:function(message,widget){var renderContext=this.renderContext;if(renderContext.properties["closeCreditFlag"]||renderContext.properties["refreshCreditCard"]){widget.refresh(renderContext.properties);
renderContext.properties["refreshCreditCard"]=false;renderContext.properties["closeCreditFlag"]=false;renderContext.properties["actionType"]=null;renderContext.properties["creditCardId"]=null;}},modelChangedHandler:function(message,widget){if(CommonControllersDeclarationJS.updateBirthDate==true){widget.refresh(this.renderContext.properties);
}},postRefreshHandler:function(widget){Mattel.init();}}),wc.render.declareRefreshController({id:"MattelContactUsEmailConfirmationController",renderContext:wc.render.getContextById("MattelContactUsEmailConfirmationContext"),url:"",formId:"",renderContextChangedHandler:function(message,widget){widget.refresh(this.renderContext.properties);
},postRefreshHandler:function(widget){Mattel.init();}}),wc.render.declareRefreshController({id:"CompleteYourCollectionDisplayController",renderContext:wc.render.getContextById("MattelCompleteYourCollectionContext"),url:"MattelCompleteYourCollectionView",formId:"",renderContextChangedHandler:function(message,widget){var renderContext=this.renderContext;
if(renderContext.properties["onPageLoadRefresh"]){console.info("Calling widget refresh started complete your collection");widget.refresh(renderContext.properties);console.info("Calling widget refresh completed complete your collection");}},postRefreshHandler:function(widget){CheckoutHelperJS.showCompleteCollection();
setTimeout(function(){Mattel.ProductCarousels.update();},2000);}}),wc.render.declareRefreshController({id:"AjaxHaveItWantItDisplayController",renderContext:wc.render.getContextById("MattelHaveItWantItContext"),url:"MattelHaveItWantItView",formId:"",renderContextChangedHandler:function(message,widget){var renderContext=this.renderContext;
if(renderContext.properties["onPageLoadRefresh"]){console.info("Calling widget refresh started Have It Want IT");widget.refresh(renderContext.properties);console.info("Calling widget refresh completed Have It Want IT");}else{if($.v_modal){$.v_modal.close();}}},postRefreshHandler:function(widget){Mattel.init();
var renderContext=this.renderContext;var catentryId=renderContext.properties["catEntryIdentifier"];var divLength=$("#PIP_HaveItWantIt").length;console.info("divLength: "+divLength);if(divLength>0){$("#PIP_HaveItWantIt").html($("#AjaxHaveItWantItDisplay").html()).show();}CheckoutHelperJS.splitItem=false;
var userType=$("#haveItWantItUserType").val();if(userType=="G"){$("[name='guestUserMbrShpBuy']").css("display","inline-block");$(".guestCommentLink").css("display","inline-block");$(".registerCommentLink").css("display","none");$("#like-copy-hand").css("display","none");if($("#pluck_collector_comments #beTheFirstComment").length==0){getProductCommentsGuest();
}}else{$("[name='regUserMbrShpBuy']").css("display","inline-block");$(".guestCommentLink").css("display","none");$(".registerCommentLink").css("display","inline-block");$("#like-copy-hand").css("display","inline-block");$("#like-copy-login").css("display","none");$("#photo-upload-div").css("display","inline-block");
}getProductComments();cursor_clear();}}),wc.render.declareRefreshController({id:"MattelRetailContactUsEmailConfirmationController",renderContext:wc.render.getContextById("MattelRetailContactUsEmailConfirmationContext"),url:"",formId:"",renderContextChangedHandler:function(message,widget){widget.refresh(this.renderContext.properties);
},postRefreshHandler:function(widget){Mattel.init();}}),wc.render.declareRefreshController({id:"MattelShopCartAddressDetails",renderContext:wc.render.getContextById("MattelShopCartAddressDetailsRefreshContext"),url:"",formId:"",renderContextChangedHandler:function(message,widget){if(CommonControllersDeclarationJS.closeAddress==true||CommonControllersDeclarationJS.ShopCartDeatils==true){var renderContext=this.renderContext;
if(undefined!=renderContext.properties["cancelFlag"]&&renderContext.properties["cancelFlag"]){renderContext.properties["addressId"]=null;renderContext.properties["actionType"]=null;renderContext.properties["cancelFlag"]=false;renderContext.properties["refreshState"]=null;renderContext.properties["refreshCountry"]=null;
}console.info("inside RCH for MattelShopCartAddressDetails");widget.refresh(renderContext.properties);}},modelChangedHandler:function(message,widget){if((CommonControllersDeclarationJS.ShopCartDeatils==true)&&(message.actionId!="mattelOrderBillingAddressUpdate")){console.info("inside MCH for MattelShopCartAddressDetails");
var renderContext=this.renderContext;widget.refresh(this.renderContext.properties);}},postRefreshHandler:function(widget){Mattel.init();var renderContext=this.renderContext;var state=null;var country=null;if(undefined!=renderContext.properties["refreshState"]&&undefined!=renderContext.properties["refreshCountry"]){state=renderContext.properties["refreshState"];
country=renderContext.properties["refreshCountry"];}if(state!=null&&country!=null){MattelAddressHelper.loadSelectedStatesRefresh("MattelCheckoutBillingForm","","select-state0","state0","",state,country,"");}else{MattelAddressHelper.loadSelectedStatesRefresh("MattelCheckoutBillingForm","","select-state0","state0","","","US","");
}$(".countryTest .customSelect .selectList dl dd").click(function(){itemSelected=parseInt($(this).attr("class").replace("itm-","").replace(" hovered",""));valueSelected=$(this).closest(".selectList").parent().find("select option")[itemSelected].value;idSelected=$(this).closest(".selectList").parent().find("select option")[itemSelected].id;
var selectedAddress=idSelected.split("_");MattelAddressHelper.loadSelectedStatesRefresh("MattelCheckoutBillingForm","","select-state0","state0","","",valueSelected,"");});$(".countryTest .customSelect .selectedValue").bind("DOMSubtreeModified",function(){valueSelected=$(this).parent().parent().find("select option:selected").val();
idSelected=$(this).parent().parent().find("select option:selected").attr("id");MattelAddressHelper.loadSelectedStatesNonAGUI("MattelCheckoutBillingForm","","select-state0_","state0_","","",valueSelected,"");});$(".countryTest .customSelect .selectedValue").bind("propertychange",function(){valueSelected=$(this).parent().parent().find("select option:selected").val();
idSelected=$(this).parent().parent().find("select option:selected").attr("id");MattelAddressHelper.loadSelectedStatesNonAGUI("MattelCheckoutBillingForm","","select-state0_","state0_","","",valueSelected,"");});}}),wc.render.declareRefreshController({id:"GiftOptionsDisplayController",renderContext:wc.render.getContextById("MattelShopCartGiftOptionsDetailsContext"),url:"",formId:"",renderContextChangedHandler:function(message,widget){var renderContext=this.renderContext;
var requestPage=renderContext.properties["requestPage"];console.info("requestPage: "+requestPage);var widgetId="GiftOptionsDisplayWidget_"+renderContext.properties["count"];console.info("widgetId: "+widgetId);if(widget.id==widgetId){widget.refresh(renderContext.properties);}},postRefreshHandler:function(widget){Mattel.init();
MattelGiftOptionsJSGlobal.isOpen=this.renderContext.properties["count"];MattelGiftOptionsJSGlobal.loadGiftMessageDropDown();}}),wc.render.declareRefreshController({id:"clubSearchNavigation_controller",renderContext:wc.render.getContextById("clubSearchNavigationContext"),url:"",formId:"",renderContextChangedHandler:function(message,widget){var controller=this;
var renderContext=this.renderContext;widget.refresh(renderContext.properties);},postRefreshHandler:function(widget){Mattel.init();}}),wc.service.declare({id:"RLCForumRedirectUrl",actionId:"RLCForumRedirectUrl",url:"AjaxGiftListServiceCheckItem",formId:"",successHandler:function(serviceResponse){var isRLC=serviceResponse.isRLC;
var isForumRedirect=serviceResponse.isRLC;if(isRLC){if(document.getElementById("HWCRLCForumsURL")){var HWCRLCForumsURL=document.getElementById("HWCRLCForumsURL").value;window.location.href=HWCRLCForumsURL;}}else{if(document.getElementById("HWCForumsURL")){var HWCForumsURL=document.getElementById("HWCForumsURL").value;
window.location.href=HWCForumsURL;}}},failureHandler:function(serviceResponse){}});function updateCartCookie(cartQuantity,cartAmount,cartOrderId,cartCurrency,cartLanguage){if(document.getElementById("currentOrderQuantity")!=null&&document.getElementById("currentOrderAmount")!=null&&document.getElementById("currentOrderCurrency")!=null&&document.getElementById("currentOrderId")!=null&&document.getElementById("currentOrderLanguage")!=null){var cookieExpiryDays=30;
if(undefined==cartCurrency||null==cartCurrency){cartCurrency=document.getElementById("currentOrderCurrency").value;}if(undefined==cartLanguage||null==cartLanguage){cartLanguage=document.getElementById("currentOrderLanguage").value;}var rememberMeCookie=getCookie("WC_REMEMBER_ME_"+WCParamJS.storeId);var welcomeNameCookie=getCookie("WC_WELCOMEMSG_"+WCParamJS.storeId);
if(document.getElementById("cookieExpiryDays")&&(""!=document.getElementById("cookieExpiryDays").value)){cookieExpiryDays=parseInt(document.getElementById("cookieExpiryDays").value);}console.info("cartQuantity : "+cartQuantity+" cartAmount : "+cartAmount+" cartCurrency : "+cartCurrency+" cartLanguage : "+cartLanguage+" cartOrderId : "+cartOrderId+" cookieExpiryDays : "+cookieExpiryDays);
var orderIdCookie=getCookie("WC_CartOrderId_"+WCParamJS.storeId);var rememberMeCookie=getCookie("WC_REMEMBER_ME_"+WCParamJS.storeId);if(orderIdCookie!=null){dojo.cookie("WC_CartOrderId_"+WCParamJS.storeId,null,{expires:-1,path:"/"});var cartTotalCookie=getCookie("WC_CartTotal_"+orderIdCookie);if(cartTotalCookie!=null){dojo.cookie("WC_CartTotal_"+orderIdCookie,null,{expires:-1,path:"/"});
}}console.info("WCParamJS.storeId:"+WCParamJS.storeId);if(cartOrderId!=""){if(null!=document.getElementById("orderQuantity")){document.getElementById("orderQuantity").innerHTML=cartQuantity;}document.getElementById("currentOrderId").value=cartOrderId;document.getElementById("currentOrderQuantity").value=cartQuantity;
document.getElementById("currentOrderAmount").value=cartAmount;document.getElementById("currentOrderCurrency").value=cartCurrency;document.getElementById("currentOrderLanguage").value=cartLanguage;if(welcomeNameCookie!=null&&welcomeNameCookie.trim()!=""){var userLoginStatus=welcomeNameCookie.substring((welcomeNameCookie.length-1),welcomeNameCookie.length);
welcomeNameCookie=welcomeNameCookie.substring(0,welcomeNameCookie.length-1);if(userLoginStatus=="R"){if(rememberMeCookie!=null&&rememberMeCookie=="true"){dojo.cookie("WC_CartOrderId_"+WCParamJS.storeId,cartOrderId,{expires:cookieExpiryDays,path:"/"});dojo.cookie("WC_CartTotal_"+cartOrderId,cartQuantity+";"+cartAmount+";"+cartCurrency+";"+cartLanguage,{expires:cookieExpiryDays,path:"/"});
}else{dojo.cookie("WC_CartOrderId_"+WCParamJS.storeId,cartOrderId,{path:"/"});dojo.cookie("WC_CartTotal_"+cartOrderId,cartQuantity+";"+cartAmount+";"+cartCurrency+";"+cartLanguage,{path:"/"});}}}else{console.info("WCParamJS.storeId: "+WCParamJS.storeId);console.info("cartOrderId: "+cartOrderId);dojo.cookie("WC_CartOrderId_"+WCParamJS.storeId,cartOrderId,{expires:cookieExpiryDays,path:"/"});
dojo.cookie("WC_CartTotal_"+cartOrderId,cartQuantity+";"+cartAmount+";"+cartCurrency+";"+cartLanguage,{expires:cookieExpiryDays,path:"/"});}}}}function loadMiniCart(contextCurrency,langId){var updateCart=false;var orderIdCookie=getCookie("WC_CartOrderId_"+WCParamJS.storeId);var itemsKey=storeNLS["MSC_ITEMS"];
if(checkDeleteCartCookie()){updateCart=true;}else{if(orderIdCookie!=undefined&&orderIdCookie==""){var items=document.getElementById("orderQuantity");if(items!=null){var itemsMsg=document.getElementById("currentOrderQuantity").value;if(itemsKey!=null){itemsMsg=dojo.string.substitute(itemsKey,{0:document.getElementById("currentOrderQuantity").value});
}items.innerHTML=itemsMsg;}}else{if(orderIdCookie!=undefined&&orderIdCookie!=""){var cartCookie=getCookie("WC_CartTotal_"+orderIdCookie);if(cartCookie!=undefined&&cartCookie!=null&&cartCookie!=""){var orderInfo=cartCookie.split(";");if(orderInfo!=null&&orderInfo.length==4){console.info("orderInfo: "+orderInfo);
console.info("contextCurrency: "+contextCurrency);console.info("langId: "+langId);if(orderInfo[2]==contextCurrency&&orderInfo[3]==langId){var itemsMiniCart=document.getElementById("minicart_orderQuantity");console.info("itemsMiniCart: "+itemsMiniCart);if(itemsMiniCart!=null){var itemsMsg=orderInfo[0].toString();
console.info("itemsMsg: "+itemsMsg);if(itemsKey!=null){itemsMsg=dojo.string.substitute(itemsKey,{0:orderInfo[0].toString()});}console.info("itemsMsg: "+itemsMsg);itemsMiniCart.innerHTML=itemsMsg;}var subtotal=document.getElementById("minishopcart_subtotal");if(subtotal!=null){var formattedSubtotal=null;
if(dojo.locale=="iw-il"){formattedSubtotal=dojo.currency.format(orderInfo[1].toString(),{symbol:"symbol",currency:contextCurrency,locale:"he"});}else{formattedSubtotal=dojo.currency.format(orderInfo[1].toString(),{symbol:"symbol",currency:contextCurrency});}if(formattedSubtotal!=null){formattedSubtotal=formattedSubtotal.replace("symbol",shoppingActionsJS.currencySymbol);
}else{formattedSubtotal=orderInfo[1].toString();}console.info("formattedSubtotal: "+formattedSubtotal);subtotal.innerHTML=formattedSubtotal;}var items=document.getElementById("orderQuantity");if(items!=null){var itemsMsg=orderInfo[0].toString();if(itemsKey!=null){itemsMsg=dojo.string.substitute(itemsKey,{0:orderInfo[0].toString()});
}items.innerHTML=itemsMsg;}}else{updateCart=true;}}else{updateCart=true;}}else{updateCart=true;}}else{updateCart=true;}}}if(updateCart==true){console.info("updateCart");wc.render.updateContext("MattelMiniShoppingCartContext",{"status":"load"});}}function closeAddTocartLoadIcon(serviceName){console.info("serviceName: "+serviceName);
if(undefined!=serviceName&&null!=serviceName&&(serviceName=="mattelAddOnServicesSave")){if($.v_modal){$.v_modal.close();}if($("#addTocartLoadIcon")){$("#addTocartLoadIcon").css("display","none");}if($("#addTocartLoadIconADD")){$("#addTocartLoadIconADD").css("display","none");}if($("#addTocartLoadIconQV")){$("#addTocartLoadIconQV").css("display","none");
}}}function setDeleteCartCookie(){dojo.cookie("WC_DeleteCartCookie_"+WCParamJS.storeId,true,{path:"/"});}function checkDeleteCartCookie(){var deleteCartCookieVal=getCookie("WC_DeleteCartCookie_"+WCParamJS.storeId);if(deleteCartCookieVal!=undefined&&deleteCartCookieVal!=""){if(deleteCartCookieVal=="true"){return true;
}}return false;}function resetDeleteCartCookie(){var deleteCartCookieVal=getCookie("WC_DeleteCartCookie_"+WCParamJS.storeId);if(deleteCartCookieVal!=null){dojo.cookie("WC_DeleteCartCookie_"+WCParamJS.storeId,null,{expires:-1,path:"/"});}}$("#hwcforumslink").click(function(){var params={};params["isForumRedirect"]="true";
params["storeId"]=WCParamJS.storeId;cursor_wait();wc.service.invoke("RLCForumRedirectUrl",params);});