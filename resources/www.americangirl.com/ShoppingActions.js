shoppingActionsJS={langId:"-1",storeId:"",catalogId:"",userType:"",baseItemAddedToCart:false,entitledItems:[],entitledItemJsonObject:null,selectedAttributesList:new Object(),moreInfoUrl:"",isPopup:false,displayPriceRange:true,itemPriceJsonOject:[],allSwatchesArrayList:new Object(),csrOrderType:null,csrOrderSource:null,csrGlCode:null,skuImageId:"",cookieKeyPrefix:"CompareItems_",cookieDelimiter:";",maxNumberProductsAllowedToCompare:4,minNumberProductsAllowedToCompare:2,baseCatalogEntryId:0,selectedProducts:new Object(),productList:new Object(),catEntryQuantity:1,productListArr:new Array(),productItemListArr:new Array(),itemListArr:new Array(),bundleListArr:new Array(),currencySymbol:"",compareReturnName:"",searchTerm:"",refreshAreaFlag:false,bookWithEngine:null,bookWithEngineComment:null,destination:null,destinationComment:null,setBookWithEngine:function(id,comment){if(id==undefined){this.bookWithEngine=null;
this.bookWithEngineComment=null;}else{this.bookWithEngine=id;this.bookWithEngineComment=comment;}},setDestination:function(id,comment){if(id==undefined){this.destination=null;this.destinationComment=null;}else{this.destination=id;this.destinationComment=comment;}},changeImages:function(prodNamePlaceHolder,prodName,shortDescPlaceHolder,shortDesc){dojo.byId(prodNamePlaceHolder).innerHTML=prodName;
dojo.byId(shortDescPlaceHolder).innerHTML=shortDesc;},addCreatASet2ShopCartAjax:function(productCatentryId){var childCats="";var childCatentryIds=[];var personalizeArray=[];var comment=[];var params=[];params["productId"]=document.getElementById("productId").value;params["categoryId"]=document.getElementById("categoryId").value;
params["catEntryId_2"]=document.getElementById("catEntryId_2").value;params["catEntryId_3"]=document.getElementById("catEntryId_3").value;params["catEntryId_4"]=document.getElementById("catEntryId_4").value;params["catEntryId_5"]=document.getElementById("catEntryId_5").value;params["storeId"]=this.storeId;
params["catalogId"]=this.catalogId;params["langId"]=this.langId;var comment_1="parentCatentryId="+params["productId"];var comment_2="";var childCatentryIdsForSet=""+params["catEntryId_2"]+"_"+params["catEntryId_3"]+"_"+params["catEntryId_4"]+"";var productoperationType="wcsset";var actioncode="create";
document.location.href=getAbsoluteURL()+"OrderItemAdd?storeId="+this.storeId+"&catalogId="+this.catalogId+"&catEntryId_1="+params["productId"]+"&quantity_1=1&comment_1=parentCatentryId=19501;childCatentryIdsForSet=20001_20009_20010;productoperationType=wcsset;actioncode=create&catEntryId_2="+params["catEntryId_2"]+"&quantity_2=1&comment_2=19501:20001&catEntryId_3="+params["catEntryId_3"]+"&quantity_3=1&comment_3=19501:20002:20004:20009&catEntryId_4="+params["catEntryId_4"]+"&quantity_4=1&comment_4=19501:20002:20004:20010&catEntryId_5="+params["catEntryId_5"]+"&quantity_5=1&URL=AjaxOrderItemDisplayView";
},setCompareReturnName:function(compareReturnName){this.compareReturnName=compareReturnName;},setSearchTerm:function(searchTerm){this.searchTerm=searchTerm;},setOrderType:function(orderType){if(orderType!=undefined&&orderType.length>0){this.csrOrderType=orderType;}else{this.csrOrderType=$("#csrOrderType").val();
}},setOrderSource:function(orderSource){if(orderSource!=undefined&&orderSource.length>0){this.csrOrderSource=orderSource;}else{this.csrOrderSource=$("#csrOrderSource").val();}},setGlCode:function(csrGlCode){if(csrGlCode!=undefined&&csrGlCode.length>0){this.csrGlCode=csrGlCode;}else{this.csrGlCode=$("#csrGlCode").val();
}},setCommonParameters:function(langId,storeId,catalogId,userType,currencySymbol){this.langId=langId;this.storeId=storeId;this.catalogId=catalogId;this.userType=userType;this.currencySymbol=currencySymbol;},setEntitledItems:function(entitledItemArray){this.entitledItems=entitledItemArray;},getCatalogEntryId:function(entitledItemId){var attributeArray=[];
var selectedAttributes=this.selectedAttributesList[entitledItemId];for(attribute in selectedAttributes){attributeArray.push(attribute+"_"+selectedAttributes[attribute]);}return this.resolveSKU(attributeArray);},getCatalogEntryIdforProduct:function(selectedAttributes){var attributeArray=[];for(attribute in selectedAttributes){attributeArray.push(attribute+"_"+selectedAttributes[attribute]);
}return this.resolveSKU(attributeArray);},getEntitledItemJsonObject:function(){return this.entitledItemJsonObject;},resolveSKU:function(attributeArray){console.debug("Resolving SKU >> "+attributeArray+">>"+this.entitledItems);var catentry_id="";var attributeArrayCount=attributeArray.length;if(this.entitledItems.length==1){return this.entitledItems[0].catentry_id;
}for(x in this.entitledItems){var catentry_id=this.entitledItems[x].catentry_id;var Attributes=this.entitledItems[x].Attributes;var attributeCount=0;for(index in Attributes){attributeCount++;}if(attributeArrayCount==0&&attributeCount==0){return catentry_id;}if(attributeCount!=0&&attributeArrayCount>=attributeCount){var matchedAttributeCount=0;
for(attributeName in attributeArray){var attributeValue=attributeArray[attributeName];if(attributeValue in Attributes){matchedAttributeCount++;}}if(attributeCount==matchedAttributeCount){console.debug("CatEntryId:"+catentry_id+" for Attribute: "+attributeArray);return catentry_id;}}}return null;},setSelectedAttribute:function(selectedAttributeName,selectedAttributeValue,entitledItemId,skuImageId,imageField){console.debug(selectedAttributeName+" : "+selectedAttributeValue);
var selectedAttributes=this.selectedAttributesList[entitledItemId];if(selectedAttributes==null){selectedAttributes=new Object();}selectedAttributes[selectedAttributeName]=selectedAttributeValue;this.moreInfoUrl=this.moreInfoUrl+"&"+selectedAttributeName+"="+selectedAttributeValue;this.selectedAttributesList[entitledItemId]=selectedAttributes;
this.changeProdImage(entitledItemId,selectedAttributeName,selectedAttributeValue,skuImageId,imageField);},setSelectedAttributeOfProduct:function(productId,selectedAttributeName,selectedAttributeValue,isSingleSKU){var selectedAttributesForProduct=null;if(this.selectedProducts[productId]){selectedAttributesForProduct=this.selectedProducts[productId];
}else{selectedAttributesForProduct=new Object();}if(null!=selectedAttributeName&&""!=selectedAttributeName){selectedAttributesForProduct[selectedAttributeName]=selectedAttributeValue;}this.selectedProducts[productId]=selectedAttributesForProduct;var entitledItemJSON=eval("("+dojo.byId("entitledItem_"+productId).innerHTML+")");
this.setEntitledItems(entitledItemJSON);var catalogEntryId=this.getCatalogEntryIdforProduct(selectedAttributesForProduct);if(catalogEntryId==null){catalogEntryId=0;}else{this.changePrice("entitledItem_"+productId,false,true,productId);}var productDetails=null;if(this.productList[productId]){productDetails=this.productList[productId];
}else{productDetails=new Object();this.productList[productId]=productDetails;productDetails.baseItemId=productId;}productDetails.id=catalogEntryId;if(productDetails.quantity){dojo.publish("quantityChanged",[dojo.toJson(productDetails)]);}if(!isSingleSKU){dojo.publish("attributesChanged_"+productId,[dojo.toJson(selectedAttributesForProduct)]);
}},Add2ShopCartAjax:function(entitledItemId,quantity,isPopup,customParams){var entitledItemJSON;if(dojo.byId(entitledItemId)!=null){entitledItemJSON=eval("("+dojo.byId(entitledItemId).innerHTML+")");}else{entitledItemJSON=this.getEntitledItemJsonObject();}this.setEntitledItems(entitledItemJSON);var catalogEntryId=this.getCatalogEntryId(entitledItemId);
if(catalogEntryId!=null){this.AddItem2ShopCartAjax(catalogEntryId,quantity,customParams);this.baseItemAddedToCart=true;if(dijit.byId("second_level_category_popup")!=null){hidePopup("second_level_category_popup");}}else{if(isPopup==true){dojo.byId("second_level_category_popup").style.zIndex="1";MessageHelper.formErrorHandleClient("addToCartLinkAjax",storeNLS["ERR_RESOLVING_SKU"]);
}else{MessageHelper.displayErrorMessage(storeNLS["ERR_RESOLVING_SKU"]);this.baseItemAddedToCart=false;}}},AddItem2ShopCartAjax:function(catEntryIdentifier,quantity,customParams){var params=[];params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.orderId=".";params.calculationUsage="-1,-2,-5,-6,-7";
params.calculateOrder="1";params.inventoryValidation="true";var ajaxShopCartService="AddOrderItem";if(dojo.isArray(catEntryIdentifier)&&dojo.isArray(quantity)){for(var i=0;i<catEntryIdentifier.length;i++){if(!isPositiveInteger(quantity[i])){return;}params["catEntryId_"+(i+1)]=catEntryIdentifier[i];params["quantity_"+(i+1)]=quantity[i];
}}else{if(!isPositiveInteger(quantity)){return;}params.catEntryId=catEntryIdentifier;params.quantity=quantity;}if(customParams!=null&&customParams!="undefined"){for(i in customParams){params[i]=customParams[i];}if(customParams["catalogEntryType"]=="dynamicKit"){ajaxShopCartService="AddPreConfigurationToCart";
}}var contractIdElements=document.getElementsByName("contractSelectForm_contractId");if(contractIdElements!=null&&contractIdElements!="undefined"){for(i=0;i<contractIdElements.length;i++){if(contractIdElements[i].checked){params.contractId=contractIdElements[i].value;break;}}}if(!submitRequest()){return;
}cursor_wait();wc.service.invoke(ajaxShopCartService,params);this.baseItemAddedToCart=true;if(document.getElementById("headerShopCartLink")&&document.getElementById("headerShopCartLink").style.display!="none"){document.getElementById("headerShopCart").focus();}else{if(document.getElementById("headerShopCart1")){document.getElementById("headerShopCart1").focus();
}}},seletedItem:function(productId,bundleIndex){var AddOnServicesURL=$("#AddOnServicesURL").val();var addOnBundleComponent=$("#addOnBundleComponent").val();var hasAddOnServices=$("#hasAddOnServices").val();if(hasAddOnServices!=undefined){if($(".selectItem_"+addOnBundleComponent).is(":checked")==true){this.addtoCartUrl=$(".button").attr("href");
this.mainurl=AddOnServicesURL;if(document.location.protocol==="http:"){if(this.mainurl.indexOf("https")>-1){this.mainurl=this.mainurl.replace("https","http");}}else{if(this.mainurl.indexOf("https")>-1){this.mainurl=this.mainurl;}else{this.mainurl=this.mainurl.replace("http","https");}}if(addOnBundleComponent==productId&&hasAddOnServices=="true"){$(".button").attr("href",this.mainurl).addClass("ajaxContent").addClass("vmElement");
}}else{$(".button").attr("href","javascript:shoppingActionsJS.MattelAddBundle2ShopCart();").removeClass("ajaxContent").removeClass("vmElement");}}var catalogEntryId=productId;if(catalogEntryId==null){catalogEntryId=0;}if(this.itemListArr==undefined){this.itemListArr=new Array();}if(this.itemListArr.indexOf(productId)!=-1){this.itemListArr.splice(this.itemListArr.indexOf(productId),1);
}else{this.itemListArr.push(productId);}},seletedBundleId:function(bundleId){var AddOnServicesURL=$("#AddOnServicesURL").val();var addOnBundleComponent=$("#addOnBundleComponent").val();var hasAddOnServices=$("#hasAddOnServices").val();if(hasAddOnServices!=undefined){if($(".selectItem_"+addOnBundleComponent).is(":checked")==true){this.addtoCartUrl=$(".button").attr("href");
this.mainurl=AddOnServicesURL;if(document.location.protocol==="http:"){if(this.mainurl.indexOf("https")>-1){this.mainurl=this.mainurl.replace("https","http");}}else{if(this.mainurl.indexOf("https")>-1){this.mainurl=this.mainurl;}else{this.mainurl=this.mainurl.replace("http","https");}}if(addOnBundleComponent==bundleId&&hasAddOnServices=="true"){$(".button").attr("href",this.mainurl).addClass("ajaxContent").addClass("vmElement");
}}else{$(".button").attr("href","javascript:shoppingActionsJS.MattelAddBundle2ShopCart();").removeClass("ajaxContent").removeClass("vmElement");}}if(this.bundleListArr==undefined){this.bundleListArr=new Array();}if(this.bundleListArr.indexOf(bundleId)!=-1){this.bundleListArr.splice(this.bundleListArr.indexOf(bundleId),1);
}else{this.bundleListArr.push(bundleId);}console.info("bundleListArr: "+this.bundleListArr);},resolvedSeletedProductItems:function(){this.productItemListArr=new Array();if(this.bundleListArr!=null&&this.bundleListArr.length!=0){for(var i=0;i<this.bundleListArr.length;i++){var bundleId=this.bundleListArr[i];
var obj="resolvedCatentryId"+bundleId;var bundleComponentId=dojo.byId(obj).innerHTML;this.productItemListArr.push(bundleComponentId);}}console.info("productItemListArr: "+this.productItemListArr);},setProductListArr:function(){this.resolvedSeletedProductItems();if(this.itemListArr!=null&&this.itemListArr.length!=0&&this.productItemListArr!=null&&this.productItemListArr.length!=0){this.productListArr=this.itemListArr.concat(this.productItemListArr);
}else{if(this.itemListArr==null||this.itemListArr.length==0){this.productListArr=this.productItemListArr;}else{if(this.productItemListArr==null||this.productItemListArr.length==0){this.productListArr=this.itemListArr;}}}console.info("productListArr :"+this.productListArr);},setBundleId:function(){var bundleID=document.getElementById("addOnBundleComponent").value;
if(this.bundleListArr.indexOf(bundleID)==-1){this.bundleListArr.push(bundleID);}this.setProductListArr();},MattelAddBundle2ShopCart:function(){var ajaxShopCartService="AddOrderItem";var params=[];var childCats="";params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.orderId=".";
params.calculationUsage="-1,-2,-5,-6,-7";params.calculateOrder="1";params.inventoryValidation="true|Standard Orders";params.mattelOrderType="Standard Orders";this.setProductListArr();this.productListArr=$.grep(this.productListArr,function(n){return(n);});if(document.getElementById("errorMsgSelectItem")!=undefined){document.getElementById("errorMsgSelectItem").style.display="none";
}if(this.productListArr.length==0){if(document.getElementById("errorMsgSelectItem")!=undefined){document.getElementById("errorMsgSelectItem").style.display="block";this.scroll();}return;}console.debug("Final array after add 4543:"+this.productListArr.toString());var idx=1;for(var i=0;i<this.productListArr.length;
i++){var productCatentryId=this.productListArr[i];var quantity=1;if(productCatentryId==0){return;}params["catEntryId_"+idx]=productCatentryId;params["quantity_"+idx]=quantity;idx++;var childCatentryId="childCatentryIds_"+productCatentryId;if(null!=document.getElementById(childCatentryId)&&document.getElementById(childCatentryId)!=undefined){var childCatentryIds=document.getElementById(childCatentryId).value;
var childCatentryIdsArray=childCatentryIds.split("_");if(childCatentryIdsArray!=undefined&&childCatentryIdsArray!=null&&childCatentryIdsArray.length>0){for(var j=0;j<childCatentryIdsArray.length;j++){params["catEntryId_"+idx]=childCatentryIdsArray[j];params["quantity_"+idx]=quantity;childCats=childCatentryIdsArray+childCatentryIdsArray[j];
if(j<childCatentryIds.length-1){childCats=childCats+"_";}idx++;}params["parentCatentryId"]=productCatentryId;params["childCatentryIdsForSet"]=childCatentryIds;params["productoperationType"]="wcsset";params["actioncode"]="create";}}this.baseItemAddedToCart=true;}if(!submitRequest()){return;}$.v_modal.close();
$("#addTocartLoadIcon").css("display","block");wc.service.invoke(ajaxShopCartService,params);},scroll:function(){$("html, body").animate({scrollTop:0},"fast");},setCatEntryQty:function(quantityBox){this.catEntryQuantity=quantityBox.value;console.info("qty :"+this.catEntryQuantity);},MattelCsrAddBundle2ShopCart:function(){var ajaxShopCartService="AjaxCsrAddOrderItem";
var params=[];var childCats="";params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;if($("#currentlyEditedOrderId")!=undefined&&$("#currentlyEditedOrderId").val()!=undefined&&$("#currentlyEditedOrderId").val().length>0){params["orderId"]=$("#currentlyEditedOrderId").val();
}this.setProductListArr();if(this.productListArr.length==0){console.debug("No items selected");return;}console.debug("Final array after add 123 :"+this.productListArr.toString());var idx=1;for(productId in this.productListArr){var productCatentryId=this.productListArr[productId];if(/^[0-9]+$/i.test(productCatentryId)){var quantity=1;
if(productCatentryId==0){return;}params["catEntryId_"+idx]=productCatentryId;params["quantity_"+idx]=quantity;idx++;var childCatentryId="childCatentryIds_"+productCatentryId;if(null!=document.getElementById(childCatentryId)&&document.getElementById(childCatentryId)!=undefined){var childCatentryIds=document.getElementById(childCatentryId).value;
var childCatentryIdsArray=childCatentryIds.split("_");if(childCatentryIdsArray!=undefined&&childCatentryIdsArray!=null&&childCatentryIdsArray.length>0){for(var i=0;i<childCatentryIdsArray.length;i++){params["catEntryId_"+idx]=childCatentryIdsArray[i];params["quantity_"+idx]=quantity;childCats=childCatentryIdsArray+childCatentryIdsArray[i];
if(i<childCatentryIds.length-1){childCats=childCats+"_";}idx++;}params["parentCatentryId"]=productCatentryId;params["childCatentryIdsForSet"]=childCatentryIds;params["productoperationType"]="wcsset";params["actioncode"]="create";}}this.baseItemAddedToCart=true;}}if(this.csrOrderSource!=null){params["orderSource"]=this.csrOrderSource;
}if(this.csrOrderType!=null){params["orderType"]=this.csrOrderType;}if(this.csrGlCode!=null){params["glCode"]=this.csrGlCode;}params["calculateOrder"]="1";params["calculationUsage"]="-1,-5,-6,-7";cursor_wait();wc.service.invoke(ajaxShopCartService,params);},MattelCSRAddItem2ShopCart:function(productId,quantity){var ajaxShopCartService="AjaxCsrAddOrderItem";
var params=[];if(quantity==""||quantity==null||quantity==undefined){var quantity=1;}params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.calculateOrder="1";params["calculationUsage"]="-1,-5,-6,-7";if($("#currentlyEditedOrderId")!=undefined&&$("#currentlyEditedOrderId").val()!=undefined&&$("#currentlyEditedOrderId").val().length>0){params["orderId"]=$("#currentlyEditedOrderId").val();
}params["catEntryId"]=productId;params["quantity"]=quantity;if(this.csrOrderSource!=null){params["orderSource"]=this.csrOrderSource;}if(this.csrOrderType!=null){params["orderType"]=this.csrOrderType;}if(this.csrGlCode!=null){params["glCode"]=this.csrGlCode;}this.baseItemAddedToCart=true;cursor_wait();
wc.service.invoke(ajaxShopCartService,params);},MattelAddItem2ShopCart:function(productId,checkAddtoCart,checkCoordinatingItem){if(undefined!=document.getElementById("actionType")){document.getElementById("actionType").value=checkAddtoCart;}var quickSellItems=null;if(undefined!=document.getElementById("quickSellSelectedItems")){quickSellItems=document.getElementById("quickSellSelectedItems").value;
}if(undefined!=checkCoordinatingItem&&null!=checkCoordinatingItem&&checkCoordinatingItem!=""&&checkCoordinatingItem=="true"){quickSellItems=null;}var ajaxShopCartService="AddOrderItem";var params=[];params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.orderId=".";
params.calculationUsage="-1,-2,-5,-6,-7,-21";params.calculateOrder="1";params.inventoryValidation="true|Standard Orders";params.mattelOrderType="StandardOrders";var idx=1;this.catEntryQuantity=1;if(quickSellItems!=null&&quickSellItems!=""){params["catEntryId_"+idx]=productId;params["quantity_"+idx]=this.catEntryQuantity;
var quickSellItemsArr=[];quickSellItemsArr=quickSellItems.split("|");for(i in quickSellItemsArr){params["catEntryId_"+(i+1)+idx]=quickSellItemsArr[i];params["quantity_"+(i+1)+idx]=this.catEntryQuantity;}}else{if(document.getElementById("qty_"+1)!=null&&document.getElementById("qty_"+1)!=undefined){this.catEntryQuantity=document.getElementById("qty_"+1).value;
}else{if(document.getElementById("WC_QuickInfo_input_quantity")!=null&&document.getElementById("WC_QuickInfo_input_quantity")!=undefined){this.catEntryQuantity=document.getElementById("WC_QuickInfo_input_quantity").value;}}if(this.catEntryQuantity==0){return;}else{params["catEntryId"]=productId;params["quantity"]=this.catEntryQuantity;
}}this.baseItemAddedToCart=true;this.productListArr=new Array();this.itemListArr=new Array();$("#addTocartLoadIcon").css("display","block");$("#addTocartLoadIconQV").css("display","block");wc.service.invoke(ajaxShopCartService,params);},MattelAddQuickSellItem:function(catentryId){var quickSellItems=null;
if(undefined!=document.getElementById("quickSellSelectedItems")){quickSellItems=document.getElementById("quickSellSelectedItems").value;if(quickSellItems.indexOf(catentryId)!=-1){if(quickSellItems.indexOf(catentryId)==0){if(quickSellItems.indexOf(catentryId+"|")!=-1){quickSellItems=quickSellItems.replace(catentryId+"|","");
}else{quickSellItems=quickSellItems.replace(catentryId,"");}}else{if(quickSellItems.indexOf("|"+catentryId)!=-1){quickSellItems=quickSellItems.replace("|"+catentryId,"");}else{quickSellItems=quickSellItems.replace(catentryId,"");}}}else{if(quickSellItems!=null&&quickSellItems!=""){quickSellItems=quickSellItems.concat("|"+catentryId);
}else{quickSellItems=quickSellItems.concat(catentryId);}}document.getElementById("quickSellSelectedItems").value=quickSellItems;}},MattelAddonBundleComp:function(catentryId,index){var quickSellItems=null;catentryId=$("#resolvedaddonBundleCatentryId"+index).text();if(undefined!=document.getElementById("quickSellSelectedItems")){quickSellItems=document.getElementById("quickSellSelectedItems").value;
if(quickSellItems.indexOf(catentryId)!=-1){if(quickSellItems.indexOf(catentryId)==0){if(quickSellItems.indexOf(catentryId+"|")!=-1){quickSellItems=quickSellItems.replace(catentryId+"|","");}else{quickSellItems=quickSellItems.replace(catentryId,"");}}else{if(quickSellItems.indexOf("|"+catentryId)!=-1){quickSellItems=quickSellItems.replace("|"+catentryId,"");
}else{quickSellItems=quickSellItems.replace(catentryId,"");}}}else{if(quickSellItems!=null&&quickSellItems!=""){quickSellItems=quickSellItems.concat("|"+catentryId);}else{quickSellItems=quickSellItems.concat(catentryId);}}document.getElementById("quickSellSelectedItems").value=quickSellItems;}},MattelAddItem2CSRShopCart:function(productId,orderSource,orderType,glCode){if(orderSource==null||orderSource.length==0){orderSource=$("#csrOrderSource").val();
}if(orderType==null||orderType.length==0){orderType=$("#csrOrderType").val();}if(glCode==null||glCode.length==0){glCode=$("#csrGlCode").val();}var params=[];params.storeId=WCParamJS.storeId;params.catalogId=WCParamJS.catalogId;params.langId=WCParamJS.langId;params.calculateOrder="1";params["calculationUsage"]="-1,-5,-6,-7";
var quickSellItems=null;if(undefined!=document.getElementById("quickSellSelectedItems")){quickSellItems=document.getElementById("quickSellSelectedItems").value;}if(typeof checkCoordinatingItem!="undefined"&&null!=checkCoordinatingItem&&checkCoordinatingItem!=""&&checkCoordinatingItem=="true"){quickSellItems=null;
}params["catEntryId_1"]=productId;params["quantity_1"]=this.catEntryQuantity;var idx=2;if(quickSellItems!=null&&quickSellItems!=""){var quickSellItemsArr=[];quickSellItemsArr=quickSellItems.split("|");for(var i=0;i<quickSellItemsArr.length;i++,idx++){params["catEntryId_"+idx]=quickSellItemsArr[i];params["quantity_"+idx]=this.catEntryQuantity;
}}params["orderType"]=orderType;params["orderSource"]=orderSource;params["glCode"]=glCode;if($("#currentlyEditedOrderId")!=undefined&&$("#currentlyEditedOrderId").val()!=undefined&&$("#currentlyEditedOrderId").val().length>0){params["orderId"]=$("#currentlyEditedOrderId").val();}wc.service.invoke("AjaxCsrAddOrderItem",params);
},MattelAddBundle2ShopCartAjax:function(childCatentryIds){var ajaxShopCartService="AddOrderItem";var params=[];var childCats="";params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.orderId=".";params.calculationUsage="-1,-2,-5,-6,-7,-21";params.calculateOrder="1";
params.inventoryValidation="true|Standard Orders";params.mattelOrderType="Standard Orders";this.setProductListArr();if(this.productListArr.length==0){$("#errorMsgSelectItem").show();$("#errorMsgSelectQtyItem").hide();return;}else{$("#errorMsgSelectItem").hide();}var quickSellItems=null;if(undefined!=document.getElementById("quickSellSelectedItems")){quickSellItems=document.getElementById("quickSellSelectedItems").value;
}var idx=1;for(i=0;i<this.productListArr.length;i++){var productCatentryId=this.productListArr[i];var quantity=1;if(undefined!=document.getElementById("qty_"+1)){quantity=document.getElementById("qty_"+1).value;if(quantity<=0){$("#errorMsgSelectQtyItem").show();return;}else{$("#errorMsgSelectQtyItem").hide();
}}if(productCatentryId==0){return;}params["catEntryId_"+idx]=productCatentryId;params["quantity_"+idx++]=quantity;if(dojo.isArray(childCatentryIds)){for(var i=0;i<childCatentryIds.length;i++){params["catEntryId_"+(i+idx)]=childCatentryIds[i];params["quantity_"+(i+idx)]=quantity;childCats=childCats+childCatentryIds[i];
if(i<childCatentryIds.length-1){childCats=childCats+"_";}}params["parentCatentryId"]=productCatentryId;params["childCatentryIdsForSet"]=childCats;params["productoperationType"]="wcsset";params["actioncode"]="create";}this.baseItemAddedToCart=true;}if(quickSellItems!=null&&quickSellItems!=""){var quickSellItemsArr=[];
quickSellItemsArr=quickSellItems.split("|");var idx1=this.productListArr.length+childCatentryIds.length+1;for(i in quickSellItemsArr){params["catEntryId_"+idx1]=quickSellItemsArr[i];params["quantity_"+idx1++]=this.catEntryQuantity;}}console.info("Child items array :"+childCatentryIds);if(childCatentryIds!=undefined){this.productListArr=new Array();
this.itemListArr=new Array();}cursor_wait();wc.service.invoke(ajaxShopCartService,params);},MattelAddSetToCSRShopCart:function(childCatentryIds){var ajaxShopCartService="AjaxCsrAddOrderItem";var params=[];var childCats="";params.storeId=WCParamJS.storeId;params.catalogId=WCParamJS.catalogId;params.langId=WCParamJS.langId;
params.orderId=".";params.calculationUsage="-1,-2,-5,-6,-7";params.calculateOrder="1";params.inventoryValidation="true|Standard Orders";params.mattelOrderType="Standard Orders";var orderSource=$("#csrOrderSource").val();var orderType=$("#csrOrderType").val();var glCode=$("#csrGlCode").val();params["orderType"]=orderType;
params["orderSource"]=orderSource;params["glCode"]=glCode;this.setProductListArr();if(this.productListArr.length==0){$("#errorMsgSelectItem").show();$("#errorMsgSelectQtyItem").hide();return;}else{$("#errorMsgSelectItem").hide();}var quickSellItems=null;if(undefined!=document.getElementById("quickSellSelectedItems")){quickSellItems=document.getElementById("quickSellSelectedItems").value;
}if(typeof checkCoordinatingItem!="undefined"&&null!=checkCoordinatingItem&&checkCoordinatingItem!=""&&checkCoordinatingItem=="true"){quickSellItems=null;}var idx=1;for(i=0;i<this.productListArr.length;i++){var productCatentryId=this.productListArr[i];var quantity=1;if(undefined!=document.getElementById("qty_"+1)){quantity=document.getElementById("qty_"+1).value;
if(quantity<=0){$("#errorMsgSelectQtyItem").show();return;}else{$("#errorMsgSelectQtyItem").hide();}}if(productCatentryId==0){return;}params["catEntryId_"+idx]=productCatentryId;params["quantity_"+idx++]=quantity;if(dojo.isArray(childCatentryIds)){for(var i=0;i<childCatentryIds.length;i++){params["catEntryId_"+(i+idx)]=childCatentryIds[i];
params["quantity_"+(i+idx)]=quantity;childCats=childCats+childCatentryIds[i];if(i<childCatentryIds.length-1){childCats=childCats+"_";}}params["parentCatentryId"]=productCatentryId;params["childCatentryIdsForSet"]=childCats;params["productoperationType"]="wcsset";params["actioncode"]="create";}this.baseItemAddedToCart=true;
}if(quickSellItems!=null&&quickSellItems!=""){var quickSellItemsArr=[];quickSellItemsArr=quickSellItems.split("|");var idx1=this.productListArr.length+1;for(i in quickSellItemsArr){params["catEntryId_"+idx1]=quickSellItemsArr[i];params["quantity_"+idx1++]=this.catEntryQuantity;}}if($("#currentlyEditedOrderId")!=undefined&&$("#currentlyEditedOrderId").val()!=undefined&&$("#currentlyEditedOrderId").val().length>0){params["orderId"]=$("#currentlyEditedOrderId").val();
}console.info("Child items array :"+childCatentryIds);if(childCatentryIds!=undefined){this.productListArr=new Array();this.itemListArr=new Array();}cursor_wait();wc.service.invoke(ajaxShopCartService,params);},MattelAddSet2ShopCartAjax:function(childCatentryIds){var ajaxShopCartService="AddOrderItem";
var params=[];var childCats="";params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.orderId=".";params.calculationUsage="-1,-2,-5,-6,-7";params.calculateOrder="1";params.inventoryValidation="true|Standard Orders";params.mattelOrderType="Standard Orders";this.setProductListArr();
if(this.productListArr.length==0){return;}var quickSellItems=null;if(undefined!=document.getElementById("quickSellSelectedItems")){quickSellItems=document.getElementById("quickSellSelectedItems").value;}var idx=1;for(productId in this.productListArr){var productCatentryId=this.productListArr[productId];
var quantity=1;if(productCatentryId==0){return;}params["catEntryId_"+idx]=productCatentryId;params["quantity_"+idx++]=quantity;if(dojo.isArray(childCatentryIds)){for(var i=0;i<childCatentryIds.length;i++){params["catEntryId_"+(idx)]=childCatentryIds[i];params["quantity_"+(idx++)]=quantity;childCats=childCats+childCatentryIds[i];
if(i<childCatentryIds.length-1){childCats=childCats+"_";}}params["parentCatentryId"]=productCatentryId;params["childCatentryIdsForSet"]=childCats;params["productoperationType"]="wcsset";params["actioncode"]="create";}this.baseItemAddedToCart=true;}if(quickSellItems!=null&&quickSellItems!=""){var quickSellItemsArr=[];
quickSellItemsArr=quickSellItems.split("|");for(i in quickSellItemsArr){params["catEntryId_"+idx]=quickSellItemsArr[i];params["quantity_"+idx++]=this.catEntryQuantity;}}this.productListArr=new Array();this.itemListArr=new Array();cursor_wait();wc.service.invoke(ajaxShopCartService,params);},AddBundle2ShopCartAjax:function(){var ajaxShopCartService="AddOrderItem";
var params=[];params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.orderId=".";params.calculationUsage="-1,-2,-5,-6,-7";params.inventoryValidation="true";var idx=1;for(productId in this.productList){var productDetails=this.productList[productId];if(productDetails.id==0){MessageHelper.displayErrorMessage(storeNLS["ERR_RESOLVING_SKU"]);
return;}var quantity=dojo.number.parse(productDetails.quantity);if(isNaN(quantity)||quantity<=0){MessageHelper.displayErrorMessage(storeNLS["QUANTITY_INPUT_ERROR"]);return;}params["catEntryId_"+idx]=productDetails.id;params["quantity_"+idx++]=quantity;this.baseItemAddedToCart=true;}if(!submitRequest()){return;
}cursor_wait();wc.service.invoke(ajaxShopCartService,params);},setSKUImageId:function(skuImageId){this.skuImageId=skuImageId;},getImageForSKU:function(entitledItemId,imageField){var attributeArray=[];var selectedAttributes=this.selectedAttributesList[entitledItemId];for(attribute in selectedAttributes){attributeArray.push(attribute+"_"+selectedAttributes[attribute]);
}return this.resolveImageForSKU(attributeArray,imageField);},resolveImageForSKU:function(attributeArray,imageField){console.debug("Resolving SKU >> "+attributeArray+">>"+this.entitledItems);var imagePath="";var attributeArrayCount=attributeArray.length;for(x in this.entitledItems){if(null!=imageField){var imagePath=this.entitledItems[x][imageField];
}else{var imagePath=this.entitledItems[x].ItemImage467;}var Attributes=this.entitledItems[x].Attributes;var attributeCount=0;for(index in Attributes){attributeCount++;}if(attributeArrayCount==0&&attributeCount==0){return imagePath;}if(attributeCount!=0&&attributeArrayCount>=attributeCount){var matchedAttributeCount=0;
for(attributeName in attributeArray){var attributeValue=attributeArray[attributeName];if(attributeValue in Attributes){matchedAttributeCount++;}}if(attributeCount==matchedAttributeCount){console.debug("ItemImage:"+imagePath+" for Attribute: "+attributeArray);var imageArray=[];imageArray.push(imagePath);
imageArray.push(this.entitledItems[x].ItemThumbnailImage);if(this.entitledItems[x].ItemAngleThumbnail!=null&&this.entitledItems[x].ItemAngleThumbnail!=undefined){imageArray.push(this.entitledItems[x].ItemAngleThumbnail);imageArray.push(this.entitledItems[x].ItemAngleFullImage);}return imageArray;}}}return null;
},changeViewImages:function(itemAngleThumbnail,itemAngleFullImage){var imageCount=0;for(x in itemAngleThumbnail){var prodAngleCount=imageCount;imageCount++;if(null!=dojo.byId("WC_CachedProductOnlyDisplay_images_1_"+imageCount)){dojo.byId("WC_CachedProductOnlyDisplay_images_1_"+imageCount).src=itemAngleThumbnail[x];
}if(null!=dojo.byId("WC_CachedProductOnlyDisplay_links_1_"+imageCount)){dojo.byId("WC_CachedProductOnlyDisplay_links_1_"+imageCount).href="JavaScript:changeThumbNail('productAngleLi"+prodAngleCount+"','"+itemAngleFullImage[x]+"');";}if(null!=dojo.byId("productAngleLi"+prodAngleCount)&&dojo.byId("productAngleLi"+prodAngleCount).className=="selected"){changeThumbNail("productAngleLi"+prodAngleCount,itemAngleFullImage[x]);
}}},changeProdImage:function(entitledItemId,swatchAttrName,swatchAttrValue,skuImageId,imageField){if(dojo.byId(entitledItemId)!=null){entitledItemJSON=eval("("+dojo.byId(entitledItemId).innerHTML+")");}this.setEntitledItems(entitledItemJSON);var skuImage=null;var imageArr=shoppingActionsJS.getImageForSKU(entitledItemId,imageField);
if(imageArr!=null){skuImage=imageArr[0];}if(skuImageId!=undefined){this.setSKUImageId(skuImageId);}if(skuImage!=null){if(dojo.byId(this.skuImageId)!=null){document.getElementById(this.skuImageId).src=skuImage;var itemAngleThumbnail=imageArr[2];var itemAngleFullImage=imageArr[3];if(itemAngleThumbnail!=null&&itemAngleThumbnail!=undefined){shoppingActionsJS.changeViewImages(itemAngleThumbnail,itemAngleFullImage);
}}}else{var imageFound=false;for(x in this.entitledItems){var Attributes=this.entitledItems[x].Attributes;if(null!=imageField){var itemImage=this.entitledItems[x][imageField];}else{var itemImage=this.entitledItems[x].ItemImage467;}var itemAngleThumbnail=this.entitledItems[x].ItemAngleThumbnail;var itemAngleFullImage=this.entitledItems[x].ItemAngleFullImage;
for(y in Attributes){var index=y.indexOf("_");var entitledSwatchName=y.substring(0,index);var entitledSwatchValue=y.substring(index+1);if(entitledSwatchName==swatchAttrName&&entitledSwatchValue==swatchAttrValue){if(null!=dojo.byId(this.skuImageId)){dojo.byId(this.skuImageId).src=itemImage;}if(itemAngleThumbnail!=null&&itemAngleThumbnail!=undefined){shoppingActionsJS.changeViewImages(itemAngleThumbnail,itemAngleFullImage);
}imageFound=true;break;}}if(imageFound){break;}}}},updateSwatchListView:function(){var swatchArray=dojo.query("a[id^='swatch_array_']");for(var i=0;i<swatchArray.length;i++){var swatchArrayElement=swatchArray[i];eval(dojo.attr(swatchArrayElement,"href"));}var swatchSkuImage=dojo.query("a[id^='swatch_setSkuImage_']");
for(var i=0;i<swatchSkuImage.length;i++){var swatchSkuImageElement=swatchSkuImage[i];eval(dojo.attr(swatchSkuImageElement,"href"));}var swatchDefault=dojo.query("a[id^='swatch_selectDefault_']");for(var i=0;i<swatchDefault.length;i++){var swatchDefaultElement=swatchDefault[i];eval(dojo.attr(swatchDefaultElement,"href"));
}},selectSwatch:function(selectedAttributeName,selectedAttributeValue,entitledItemId,doNotDisable,skuImageId,imageField){if(dojo.hasClass("swatch_"+entitledItemId+"_"+selectedAttributeValue,"color_swatch_disabled")){return;}var selectedAttributes=this.selectedAttributesList[entitledItemId];for(attribute in selectedAttributes){if(attribute==selectedAttributeName){if(selectedAttributes[attribute]!=selectedAttributeValue){var swatchElement=dojo.byId("swatch_"+entitledItemId+"_"+selectedAttributes[attribute]);
swatchElement.className="color_swatch";swatchElement.src=swatchElement.src.replace("_disabled.png","_enabled.png");dojo.byId("swatch_link_"+entitledItemId+"_"+selectedAttributes[attribute]).title=swatchElement.alt;}}if(document.getElementById("swatch_link_"+entitledItemId+"_"+selectedAttributes[attribute])!=null){document.getElementById("swatch_link_"+entitledItemId+"_"+selectedAttributes[attribute]).setAttribute("aria-checked","false");
}}this.makeSwatchSelection(selectedAttributeName,selectedAttributeValue,entitledItemId,doNotDisable,skuImageId,imageField);},makeSwatchSelection:function(swatchAttrName,swatchAttrValue,entitledItemId,doNotDisable,skuImageId,imageField){this.setSelectedAttribute(swatchAttrName,swatchAttrValue,entitledItemId,skuImageId,imageField);
document.getElementById("swatch_"+entitledItemId+"_"+swatchAttrValue).className="color_swatch_selected";document.getElementById("swatch_link_"+entitledItemId+"_"+swatchAttrValue).setAttribute("aria-checked","true");document.getElementById("swatch_selection_label_"+entitledItemId+"_"+swatchAttrName).className="header color_swatch_label left";
if(document.getElementById("swatch_selection_"+entitledItemId+"_"+swatchAttrName).style.display=="none"){document.getElementById("swatch_selection_"+entitledItemId+"_"+swatchAttrName).style.display="inline";}document.getElementById("swatch_selection_"+entitledItemId+"_"+swatchAttrName).innerHTML=swatchAttrValue;
this.updateSwatchImages(swatchAttrName,entitledItemId,doNotDisable,imageField);},addToAllSwatchsArray:function(swatchName,swatchValue,swatchImg1,entitledItemId){var swatchList=this.allSwatchesArrayList[entitledItemId];if(swatchList==null){swatchList=new Array();}if(!this.existInAllSwatchsArray(swatchName,swatchValue,swatchList)){var swatchRecord=new Array();
swatchRecord[0]=swatchName;swatchRecord[1]=swatchValue;swatchRecord[2]=swatchImg1;swatchRecord[4]=document.getElementById("swatch_link_"+entitledItemId+"_"+swatchValue).onclick;swatchList.push(swatchRecord);this.allSwatchesArrayList[entitledItemId]=swatchList;}},existInAllSwatchsArray:function(swatchName,swatchValue,swatchList){for(var i=0;
i<swatchList.length;i++){var attrName=swatchList[i][0];var attrValue=swatchList[i][1];if(attrName==swatchName&&attrValue==swatchValue){return true;}}return false;},makeDefaultSwatchSelection:function(entitledItemId,doNotDisable){if(this.entitledItems.length==0){if(dojo.byId(entitledItemId)!=null){entitledItemJSON=eval("("+dojo.byId(entitledItemId).innerHTML+")");
}this.setEntitledItems(entitledItemJSON);}for(x in this.entitledItems){var Attributes=this.entitledItems[x].Attributes;for(y in Attributes){var index=y.indexOf("_");var swatchName=y.substring(0,index);var swatchValue=y.substring(index+1);this.makeSwatchSelection(swatchName,swatchValue,entitledItemId,doNotDisable,imageField);
}break;}},updateSwatchImages:function(selectedAttrName,entitledItemId,doNotDisable,imageField){var swatchToUpdate=new Array();var selectedAttributes=this.selectedAttributesList[entitledItemId];var selectedAttrValue=selectedAttributes[selectedAttrName];var swatchList=this.allSwatchesArrayList[entitledItemId];
for(var i=0;i<swatchList.length;i++){var attrName=swatchList[i][0];var attrValue=swatchList[i][1];var attrImg1=swatchList[i][2];var attrImg2=swatchList[i][3];var attrOnclick=swatchList[i][4];if(attrName!=doNotDisable&&attrName!=selectedAttrName){var swatchRecord=new Array();swatchRecord[0]=attrName;swatchRecord[1]=attrValue;
swatchRecord[2]=attrImg1;swatchRecord[4]=attrOnclick;swatchRecord[5]=false;swatchToUpdate.push(swatchRecord);}}for(x in this.entitledItems){var Attributes=this.entitledItems[x].Attributes;for(y in Attributes){var index=y.indexOf("_");var entitledSwatchName=y.substring(0,index);var entitledSwatchValue=y.substring(index+1);
if(entitledSwatchName==selectedAttrName&&entitledSwatchValue==selectedAttrValue){for(z in Attributes){var index2=z.indexOf("_");var entitledSwatchName2=z.substring(0,index2);var entitledSwatchValue2=z.substring(index2+1);if(y!=z){for(i in swatchToUpdate){var swatchToUpdateName=swatchToUpdate[i][0];var swatchToUpdateValue=swatchToUpdate[i][1];
if(entitledSwatchName2==swatchToUpdateName&&entitledSwatchValue2==swatchToUpdateValue){swatchToUpdate[i][5]=true;}}}}}}}var disabledAttributes=[];for(i in swatchToUpdate){var swatchToUpdateName=swatchToUpdate[i][0];var swatchToUpdateValue=swatchToUpdate[i][1];var swatchToUpdateImg1=swatchToUpdate[i][2];
var swatchToUpdateImg2=swatchToUpdate[i][3];var swatchToUpdateOnclick=swatchToUpdate[i][4];var swatchToUpdateEnabled=swatchToUpdate[i][5];if(swatchToUpdateEnabled){if(document.getElementById("swatch_"+entitledItemId+"_"+swatchToUpdateValue).className!="color_swatch_selected"){var swatchElement=dojo.byId("swatch_"+entitledItemId+"_"+swatchToUpdateValue);
swatchElement.className="color_swatch";swatchElement.src=swatchElement.src.replace("_disabled.png","_enabled.png");dojo.byId("swatch_link_"+entitledItemId+"_"+swatchToUpdateValue).title=swatchElement.alt;}document.getElementById("swatch_link_"+entitledItemId+"_"+swatchToUpdateValue).setAttribute("aria-disabled","false");
document.getElementById("swatch_link_"+entitledItemId+"_"+swatchToUpdateValue).onclick=swatchToUpdateOnclick;}else{if(swatchToUpdateName!=doNotDisable){var swatchElement=dojo.byId("swatch_"+entitledItemId+"_"+swatchToUpdateValue);var swatchLinkElement=dojo.byId("swatch_link_"+entitledItemId+"_"+swatchToUpdateValue);
swatchElement.className="color_swatch_disabled";swatchLinkElement.onclick=null;swatchElement.src=swatchElement.src.replace("_enabled.png","_disabled.png");var titleText=storeNLS["INV_ATTR_UNAVAILABLE"];swatchLinkElement.title=dojo.string.substitute(titleText,{0:swatchElement.alt});document.getElementById("swatch_link_"+entitledItemId+"_"+swatchToUpdateValue).setAttribute("aria-disabled","true");
if(selectedAttributes[swatchToUpdateName]==swatchToUpdateValue){disabledAttributes.push(swatchToUpdate[i]);}}}}for(i in disabledAttributes){var disabledAttributeName=disabledAttributes[i][0];var disabledAttributeValue=disabledAttributes[i][1];for(i in swatchToUpdate){var swatchToUpdateName=swatchToUpdate[i][0];
var swatchToUpdateValue=swatchToUpdate[i][1];var swatchToUpdateEnabled=swatchToUpdate[i][5];if(swatchToUpdateName==disabledAttributeName&&swatchToUpdateValue!=disabledAttributeValue&&swatchToUpdateEnabled){this.makeSwatchSelection(swatchToUpdateName,swatchToUpdateValue,entitledItemId,doNotDisable,imageField);
break;}}}},changePrice:function(entitledItemId,isPopup,displayPriceRange,productId){this.displayPriceRange=displayPriceRange;this.isPopup=isPopup;var entitledItemJSON;if(dojo.byId(entitledItemId)!=null&&!this.isPopup){entitledItemJSON=eval("("+dojo.byId(entitledItemId).innerHTML+")");}else{entitledItemJSON=this.getEntitledItemJsonObject();
}var catalogEntryId=null;this.setEntitledItems(entitledItemJSON);if(this.selectedProducts[productId]){var catalogEntryId=this.getCatalogEntryIdforProduct(this.selectedProducts[productId]);}else{var catalogEntryId=this.getCatalogEntryId(entitledItemId);}if(catalogEntryId!=null){if(this.itemPriceJsonOject[catalogEntryId]!=null&&this.itemPriceJsonOject[catalogEntryId]!="undefined"){this.displayPrice(this.itemPriceJsonOject[catalogEntryId].catalogEntry,productId);
console.debug("ShoppingActions.changePrice: using stored json object.");}else{var parameters={};parameters.storeId=this.storeId;parameters.langId=this.langId;parameters.catalogId=this.catalogId;parameters.catalogEntryId=catalogEntryId;parameters.productId=productId;dojo.xhrPost({url:getAbsoluteURL()+"GetCatalogEntryDetailsByIDView",handleAs:"json-comment-filtered",content:parameters,service:this,load:shoppingActionsJS.displayPriceServiceResponse,error:function(errObj,ioArgs){console.debug("ShoppingActions.changePrice: Unexpected error occurred during an xhrPost request.");
}});}}else{console.debug("ShoppingActions.changePrice: all attributes are not selected.");}},displayPriceServiceResponse:function(serviceResponse,ioArgs){var productId=ioArgs["args"].content["productId"];shoppingActionsJS.itemPriceJsonOject[serviceResponse.catalogEntry.catalogEntryIdentifier.uniqueID]=serviceResponse;
shoppingActionsJS.displayPrice(serviceResponse.catalogEntry,productId);},displayPrice:function(catEntry,productId){var tempString;var popup=shoppingActionsJS.isPopup;if(popup==true){document.getElementById("productPrice").innerHTML=catEntry.offerPrice;document.getElementById("productName").innerHTML=catEntry.description[0].name;
document.getElementById("productSKUValue").innerHTML=catEntry.catalogEntryIdentifier.externalIdentifier.partNumber;}if(popup==false){var innerHTML="";var listPrice=dojo.currency.parse(catEntry.listPrice,{symbol:this.currencySymbol});var offerPrice=dojo.currency.parse(catEntry.offerPrice,{symbol:this.currencySymbol});
this.setPriceInProductList(productId,offerPrice);if(!catEntry.listPriced||listPrice<=offerPrice){innerHTML="<span id='offerPrice_"+catEntry.catalogEntryIdentifier.uniqueID+"' class='price'>"+catEntry.offerPrice+"</span>";}else{innerHTML="<span id='listPrice_"+catEntry.catalogEntryIdentifier.uniqueID+"' class='old_price'>"+catEntry.listPrice+"</span>"+"<span id='offerPrice_"+catEntry.catalogEntryIdentifier.uniqueID+"' class='price'>"+catEntry.offerPrice+"</span>";
}document.getElementById("price_display_"+productId).innerHTML=innerHTML;innerHTML="";if(shoppingActionsJS.displayPriceRange==true){for(var i in catEntry.priceRange){if(catEntry.priceRange[i].endingNumberOfUnits==catEntry.priceRange[i].startingNumberOfUnits){tempString=storeNLS["PQ_PRICE_X"];innerHTML=innerHTML+"<p>"+dojo.string.substitute(tempString,{0:catEntry.priceRange[i].startingNumberOfUnits});
}else{if(catEntry.priceRange[i].endingNumberOfUnits!="null"){tempString=storeNLS["PQ_PRICE_X_TO_Y"];innerHTML=innerHTML+"<p>"+dojo.string.substitute(tempString,{0:catEntry.priceRange[i].startingNumberOfUnits,1:catEntry.priceRange[i].endingNumberOfUnits});}else{tempString=storeNLS["PQ_PRICE_X_OR_MORE"];
innerHTML=innerHTML+"<p>"+dojo.string.substitute(tempString,{0:catEntry.priceRange[i].startingNumberOfUnits});}}innerHTML=innerHTML+" <span class='price'>"+catEntry.priceRange[i].localizedPrice+"</span></p>";}}var quantityDiscount=dojo.byId("productLevelPriceRange_"+productId);var itemQuantityDiscount=dojo.byId("itemLevelPriceRange_"+productId);
if(null!=quantityDiscount&&null==itemQuantityDiscount){dojo.style(quantityDiscount,"display","");}else{if(""!=innerHTML&&null!=itemQuantityDiscount){innerHTML=storeNLS["PQ_PURCHASE"]+innerHTML;itemQuantityDiscount.innerHTML=innerHTML;dojo.style(itemQuantityDiscount,"display","");if(null!=quantityDiscount){dojo.style(quantityDiscount,"display","none");
}}else{if(""==innerHTML){if(null!=itemQuantityDiscount){dojo.style(itemQuantityDiscount,"display","none");}if(null!=quantityDiscount){dojo.style(quantityDiscount,"display","");}}}}var productNameLink=dojo.query("#product_name_"+productId+" > a");if(productNameLink.length==1){productNameLink[0].innerHTML=catEntry.description[0].name;
}else{if(dojo.byId("product_name_"+productId)){dojo.byId("product_name_"+productId).innerHTML=catEntry.description[0].name;}}if(document.getElementById("product_shortdescription_"+productId)){document.getElementById("product_shortdescription_"+productId).innerHTML=catEntry.description[0].shortDescription;
}if(document.getElementById("product_SKU_"+productId)){document.getElementById("product_SKU_"+productId).innerHTML=storeNLS["SKU"]+" "+catEntry.catalogEntryIdentifier.externalIdentifier.partNumber;}}},showWCDialogPopup:function(widgetId){var popup=dijit.byId(widgetId);if(popup!=null){popup.closeButtonNode.style.display="none";
popup.show();}else{console.debug(widgetId+" does not exist");}},notifyAttributeChange:function(catalogEntryID){this.baseCatalogEntryId=catalogEntryID;var selectedAttributes=this.selectedAttributesList["entitledItem_"+catalogEntryID];dojo.publish("attributesChanged_"+catalogEntryID,[dojo.toJson(selectedAttributes)]);
dojo.publish("attributesChanged",[dojo.toJson(selectedAttributes)]);},notifyQuantityChange:function(quantity){dojo.publish("quantityChanged",[quantity]);},initCompare:function(fromPage){if(fromPage=="compare"){this.checkForCompare();}else{var cookieKey=this.cookieKeyPrefix+this.storeId;var newCookieValue="";
dojo.cookie(cookieKey,newCookieValue,{path:"/"});}},changeCompareBox:function(cbox,catEntryIdentifier){box=document.getElementById(cbox);box.checked=!box.checked;this.addOrRemoveFromCompare(catEntryIdentifier,box.checked);},addOrRemoveFromCompare:function(catEntryIdentifier,checked){if(checked){this.addToCompare(catEntryIdentifier);
}else{this.removeFromCompare(catEntryIdentifier);}},addToCompare:function(catEntryIdentifier){var cookieKey=this.cookieKeyPrefix+this.storeId;var cookieValue=dojo.cookie(cookieKey);if(cookieValue!=null){if(cookieValue.indexOf(catEntryIdentifier)!=-1||catEntryIdentifier==null){MessageHelper.displayErrorMessage(storeNLS["COMPARE_ITEM_EXISTS"]);
return;}}var currentNumberOfItemsInCompare=0;if(cookieValue!=null&&cookieValue!=""){currentNumberOfItemsInCompare=cookieValue.split(this.cookieDelimiter).length;}if(currentNumberOfItemsInCompare<parseInt(this.maxNumberProductsAllowedToCompare)){var newCookieValue="";if(cookieValue==null||cookieValue==""){newCookieValue=catEntryIdentifier;
}else{newCookieValue=cookieValue+this.cookieDelimiter+catEntryIdentifier;}dojo.cookie(cookieKey,newCookieValue,{path:"/"});document.getElementById("compare_"+catEntryIdentifier).style.visibility="visible";console.debug("Product added to cookie");currentNumberOfItemsInCompare=currentNumberOfItemsInCompare+1;
if(currentNumberOfItemsInCompare==this.minNumberProductsAllowedToCompare){var compareButtonDisabled=document.getElementById("compare_button_disabled");var compareButtonEnabled=document.getElementById("compare_button_enabled");compareButtonDisabled.style.display="none";compareButtonEnabled.style.display="block";
dojo.removeClass("compare_button","disabled");}}else{this.showWCDialogPopup("widget_product_comparison_popup");document.getElementById("comparebox_"+catEntryIdentifier).checked=false;console.debug("You can only compare up to 4 products");}},removeFromCompare:function(catEntryIdentifier){var cookieKey=this.cookieKeyPrefix+this.storeId;
var cookieValue=dojo.cookie(cookieKey);var currentNumberOfItemsInCompare=0;if(cookieValue!=null){if(dojo.trim(cookieValue)==""){dojo.cookie(cookieKey,null,{expires:-1});}else{var cookieArray=cookieValue.split(this.cookieDelimiter);var newCookieValue="";for(index in cookieArray){if(cookieArray[index]!=catEntryIdentifier){if(newCookieValue==""){newCookieValue=cookieArray[index];
}else{newCookieValue=newCookieValue+this.cookieDelimiter+cookieArray[index];}}}dojo.cookie(cookieKey,newCookieValue,{path:"/"});currentNumberOfItemsInCompare=newCookieValue.split(this.cookieDelimiter).length;}document.getElementById("compare_"+catEntryIdentifier).removeAttribute("style");console.debug("Product removed from cookie");
if(currentNumberOfItemsInCompare<this.minNumberProductsAllowedToCompare){var compareButtonDisabled=document.getElementById("compare_button_disabled");var compareButtonEnabled=document.getElementById("compare_button_enabled");compareButtonDisabled.style.display="inline";compareButtonEnabled.style.display="none";
dojo.addClass("compare_button","disabled");}}},compareProducts:function(categoryIds){var url="CompareProductsDisplayView?storeId="+this.storeId+"&catalogId="+this.catalogId+"&langId="+this.langId+"&compareReturnName="+this.compareReturnName+"&searchTerm="+this.searchTerm;if(""!=categoryIds.top_category){url=url+"&top_category="+categoryIds.top_category;
}if(""!=categoryIds.parent_category_rn){url=url+"&parent_category_rn="+categoryIds.parent_category_rn;}if(""!=categoryIds.categoryId){url=url+"&categoryId="+categoryIds.categoryId;}var cookieKey=this.cookieKeyPrefix+this.storeId;var cookieValue=dojo.cookie(cookieKey);if(cookieValue!=null&&dojo.trim(cookieValue)!=""){url=url+"&catentryId="+cookieValue;
}var returnUrl=location.href;if(returnUrl.indexOf("?")==-1){returnUrl=returnUrl+"?fromPage=compare";}else{if(returnUrl.indexOf("fromPage=compare")==-1){returnUrl=returnUrl+"&fromPage=compare";}}url=url+"&returnUrl="+encodeURIComponent(returnUrl);location.href=getAbsoluteURL()+url;},setProductQuantity:function(catalogEntryType,catalogEntryId,quantity,price){var productDetails=null;
if(this.productList[catalogEntryId]){productDetails=this.productList[catalogEntryId];}else{productDetails=new Object();this.productList[catalogEntryId]=productDetails;productDetails.baseItemId=catalogEntryId;if("item"==catalogEntryType){productDetails.id=catalogEntryId;}else{productDetails.id=0;}}productDetails.quantity=quantity;
dojo.publish("quantityChanged",[dojo.toJson(productDetails)]);productDetails.price=dojo.number.parse(price);},quantityChanged:function(catalogEntryId,quantity){if(this.productList[catalogEntryId]){var productDetails=this.productList[catalogEntryId];productDetails.quantity=dojo.trim(quantity);dojo.publish("quantityChanged",[dojo.toJson(productDetails)]);
}},setPriceInProductList:function(catalogEntryId,price){var productDetails=this.productList[catalogEntryId];if(productDetails){productDetails.price=price;}},selectBundleItemSwatch:function(catalogEntryId,swatchName,swatchValue,doNotDisable){if(dojo.hasClass("swatch_"+catalogEntryId+"_"+swatchName+"_"+swatchValue,"color_swatch_disabled")){return false;
}if(dojo.byId("entitledItem_"+catalogEntryId)!=null){var entitledItemJSON;var currentSwatchkey=swatchName+"_"+swatchValue;entitledItemJSON=dojo.fromJson(dojo.byId("entitledItem_"+catalogEntryId).innerHTML);var validSwatchArr=new Array();for(idx in entitledItemJSON){var validItem=false;var entitledItem=entitledItemJSON[idx];
for(attribute in entitledItem.Attributes){if(currentSwatchkey==attribute){validItem=true;break;}}if(validItem){for(attribute in entitledItem.Attributes){var currentSwatch=attribute.substring(0,attribute.lastIndexOf("_"));if(currentSwatch!=doNotDisable&&currentSwatch!=swatchName){validSwatchArr.push(attribute);
}}}}var swatchesDisabled=new Array();var selectedSwatches=new Array();for(idx in entitledItemJSON){var entitledItem=entitledItemJSON[idx];for(attribute in entitledItem.Attributes){var currentSwatch=attribute.substring(0,attribute.lastIndexOf("_"));if(currentSwatch!=doNotDisable&&currentSwatch!=swatchName){var swatchId="swatch_"+catalogEntryId+"_"+attribute;
var swatchLinkId=swatchId.replace("swatch_","swatch_link_");if(dojo.indexOf(validSwatchArr,attribute)>-1){if(!dojo.hasClass(swatchId,"color_swatch_selected")){dojo.byId(swatchId).className="color_swatch";dojo.byId(swatchId).src=dojo.byId(swatchId).src.replace("_disabled.png","_enabled.png");dojo.byId(swatchLinkId).title=dojo.byId(swatchId).alt;
document.getElementById(swatchLinkId).setAttribute("aria-disabled","false");}}else{if(dojo.indexOf(swatchesDisabled,attribute)==-1){swatchesDisabled.push(attribute);if(dojo.hasClass(swatchId,"color_swatch_selected")){selectedSwatches.push(swatchId);}dojo.byId(swatchId).className="color_swatch_disabled";
dojo.byId(swatchId).src=dojo.byId(swatchId).src.replace("_enabled.png","_disabled.png");var titleText=storeNLS["INV_ATTR_UNAVAILABLE"];var altText=dojo.byId(swatchId).alt;dojo.byId(swatchLinkId).title=dojo.string.substitute(titleText,{0:altText});document.getElementById(swatchLinkId).setAttribute("aria-disabled","true");
}}}if(document.getElementById("swatch_link_"+catalogEntryId+"_"+attribute)!=null){document.getElementById("swatch_link_"+catalogEntryId+"_"+attribute).setAttribute("aria-checked","false");}}}for(idx in selectedSwatches){var selectedSwatch=selectedSwatches[idx];var idSelector=selectedSwatch.substring(0,selectedSwatch.lastIndexOf("_"));
var swatchSelected=false;dojo.query("[id^='"+idSelector+"']").forEach(function(node,index,arr){if(!swatchSelected&&dojo.hasClass(node,"color_swatch")){var values=node.id.split("_");shoppingActionsJS.selectBundleItemSwatch(values[1],values[2],values[3],doNotDisable);shoppingActionsJS.setSelectedAttributeOfProduct(values[1],values[2],values[3],false);
swatchSelected=true;}});}}if(dojo.byId("swatch_selection_"+catalogEntryId+"_"+swatchName).style.display=="none"){dojo.byId("swatch_selection_"+catalogEntryId+"_"+swatchName).style.display="inline";}dojo.byId("swatch_selection_"+catalogEntryId+"_"+swatchName).innerHTML=swatchValue;var swatchItem="swatch_"+catalogEntryId+"_"+swatchName+"_";
var swatchItemLink="swatch_link_"+catalogEntryId+"_"+swatchName+"_";dojo.query("img[id^='"+swatchItem+"']").forEach(function(node,index,arr){if(dojo.hasClass(node,"color_swatch_disabled")){dojo.removeClass(node,"color_swatch");}else{dojo.addClass(node,"color_swatch");}dojo.removeClass(node,"color_swatch_selected");
});dojo.byId(swatchItem+swatchValue).className="color_swatch_selected";document.getElementById(swatchItemLink+swatchValue).setAttribute("aria-checked","true");this.setSelectedAttributeOfProduct(catalogEntryId,swatchName,swatchValue,false);this.changeBundleItemImage(catalogEntryId,swatchName,swatchValue,"productThumbNailImage_"+catalogEntryId);
},changeBundleItemImage:function(catalogEntryId,swatchAttrName,swatchAttrValue,skuImageId){var entitledItemId="entitledItem_"+catalogEntryId;if(dojo.byId(entitledItemId)!=null){entitledItemJSON=eval("("+dojo.byId(entitledItemId).innerHTML+")");}this.setEntitledItems(entitledItemJSON);var skuImage=null;
var imageArr=shoppingActionsJS.getImageForBundleItem(catalogEntryId);if(imageArr!=null){skuImage=imageArr[1];}if(skuImageId!=undefined){this.setSKUImageId(skuImageId);}if(skuImage!=null){if(dojo.byId(this.skuImageId)!=null){document.getElementById(this.skuImageId).src=skuImage;}}else{var imageFound=false;
for(x in this.entitledItems){var Attributes=this.entitledItems[x].Attributes;var itemImage=this.entitledItems[x].ItemThumbnailImage;for(y in Attributes){var index=y.indexOf("_");var entitledSwatchName=y.substring(0,index);var entitledSwatchValue=y.substring(index+1);if(entitledSwatchName==swatchAttrName&&entitledSwatchValue==swatchAttrValue){document.getElementById(this.skuImageId).src=itemImage;
imageFound=true;break;}}if(imageFound){break;}}}},getImageForBundleItem:function(entitledItemId){var attributeArray=[];var selectedAttributes=this.selectedProducts[entitledItemId];for(attribute in selectedAttributes){attributeArray.push(attribute+"_"+selectedAttributes[attribute]);}return this.resolveImageForSKU(attributeArray);
},checkForCompare:function(){var cookieKey=this.cookieKeyPrefix+this.storeId;var cookieValue=dojo.cookie(cookieKey);var currentNumberOfItemsInCompare=0;if(cookieValue!=null){var catEntryIds=cookieValue.split(this.cookieDelimiter);for(idx=0;idx<catEntryIds.length;idx++){var catEntryIdentifier=catEntryIds[idx];
if(null!=dojo.byId("compare_"+catEntryIdentifier)){dojo.byId("comparebox_"+catEntryIdentifier).checked=true;dojo.byId("compare_"+catEntryIdentifier).style.visibility="visible";}if(++currentNumberOfItemsInCompare==this.minNumberProductsAllowedToCompare){var compareButtonDisabled=dojo.byId("compare_button_disabled");
var compareButtonEnabled=dojo.byId("compare_button_enabled");compareButtonDisabled.style.display="none";compareButtonEnabled.style.display="block";dojo.removeClass("compare_button","disabled");}}}},replaceItemAjaxHelper:function(catalogEntryId,qty,removeOrderItemId,addressId,shipModeId,physicalStoreId,sequence){console.info("Address Id: "+addressId);
console.info("shipMode Id: "+shipModeId);var addedServices=false;if(document.getElementById("addedServicesFlag_"+removeOrderItemId)!=null){addedServices=document.getElementById("addedServicesFlag_"+removeOrderItemId).value;}console.info("addedServices: "+addedServices);var params=[];params.storeId=WCParamJS.storeId;
params.catalogId=WCParamJS.catalogId;params.langId=WCParamJS.langId;params.orderItemId=removeOrderItemId;params.orderId=".";params.itemSequence=sequence;if(CheckoutHelperJS.shoppingCartPage){params.calculationUsage="-1,-2,-5,-6,-7";}else{params.calculationUsage="-1,-2,-3,-4,-5,-6,-7";}var params2=[];
params2.storeId=WCParamJS.storeId;params2.catalogId=WCParamJS.catalogId;params2.langId=WCParamJS.langId;params2.catEntryId=catalogEntryId;params2.quantity=qty;params2.orderId=".";params2.mattelOrderType="Standard Orders";params2.inventoryValidation="true|Standard Orders";params2.itemSequence=sequence;
params2.updateAction="replaceCartItem";params2.calculateOrder="1";if(CheckoutHelperJS.shoppingCartPage){params2.calculationUsage="-1,-2,-5,-6,-7";}else{params2.calculationUsage="-1,-2,-3,-4,-5,-6,-7";}var params3=[];params3.storeId=WCParamJS.storeId;params3.catalogId=WCParamJS.catalogId;params3.langId=WCParamJS.langId;
params3.orderId=".";params3.itemSequence=sequence;if(CheckoutHelperJS.shoppingCartPage){params3.calculationUsage="-1,-2,-5,-6,-7";}else{params3.calculationUsage="-1,-2,-3,-4,-5,-6,-7";}var shipInfoUpdateNeeded=false;var orderItemReqd=true;if(addressId!=null&&addressId!=""){params3.addressId=addressId;
}if(shipModeId!=null&&shipModeId!=""){params3.shipModeId=shipModeId;}if(physicalStoreId!=null&&physicalStoreId!=""){params3.physicalStoreId=physicalStoreId;orderItemReqd=false;}if(params3.shipModeId!=null&&(params3.addressId!=null||params3.physicalStoreId!=null)){shipInfoUpdateNeeded=true;}if(orderItemReqd){params3.allocate="***";
params3.backorder="***";params3.remerge="***";params3.check="*n";}wc.service.declare({id:"mattelAddOnServiceGiftOptionsSave1",actionId:"mattelAddOnServiceGiftOptionsSave1",url:getAbsoluteURL()+"MattelAddOnServiceAndGiftOptionSaveCmd",formId:"",successHandler:function(serviceResponse){console.info("In success handler for add on serivce");
wc.service.invoke("AjaxReplaceItem",params);cursor_clear();},failureHandler:function(serviceResponse){console.info("failure in Command: mattelAddOnServiceGiftOptionsSave");Mattel.Analytics.publishFormErrors();cursor_clear();}});wc.service.declare({id:"AjaxReplaceItem",actionId:"AjaxReplaceItem",url:"AjaxOrderChangeServiceItemDelete",formId:"",successHandler:function(serviceResponse){if(!shipInfoUpdateNeeded&&!addedServices){wc.service.invoke("AjaxAddOrderItemForUpdate",params2);
}else{if(addedServices){if(shipInfoUpdateNeeded){console.info("invoking address Update");this.refreshAreaFlag=true;wc.service.invoke("OrderItemAddressShipMethodUpdate",params3);}else{var renderContext=wc.render.getContextById("ShopCartPaginationDisplay_Context");if((renderContext!=undefined&&renderContext!=null)){wc.render.updateContext("ShopCartPaginationDisplay_Context",{"updateContextFlag":true});
}}}else{wc.service.invoke("AjaxAddOrderItemTemp",params2);}}},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){MessageHelper.displayMattelErrorMessage(serviceResponse.errorMessage);}else{if(serviceResponse.errorMessageKey){MessageHelper.displayMattelErrorMessage(serviceResponse.errorMessageKey);
}}cursor_clear();}});wc.service.declare({id:"AjaxAddOrderItemTemp",actionId:"AjaxAddOrderItemTemp",url:"AjaxManageShopCart",formId:"",successHandler:function(serviceResponse){if(orderItemReqd&&!addedServices){params3.orderItemId=serviceResponse.orderItemId;console.info("serviceResponse.orderItemId: "+serviceResponse.orderItemId);
wc.service.invoke("OrderItemAddressShipMethodUpdate",params3);}else{if(orderItemReqd&&addedServices){console.info("Inside Add On service call");var params_addOn=[];params_addOn.currentOrderItemId=removeOrderItemId;params_addOn.newOrderItemId=serviceResponse.orderItemId;params_addOn.updatePAttrOrderItemId=true;
params3.orderItemId=serviceResponse.orderItemId;wc.service.invoke("mattelAddOnServiceGiftOptionsSave1",params_addOn);}}if(MessageHelper.messages["SHOPCART_ADDED"]!=undefined){MessageHelper.displayMattelErrorMessage(MessageHelper.messages["SHOPCART_ADDED"]);}},failureHandler:function(serviceResponse){MessageHelper.displayMattelErrorMessage(serviceResponse.errorMessageKey);
}});wc.service.declare({id:"AjaxAddOrderItemForUpdate",actionId:"AjaxAddOrderItemForUpdate",url:getAbsoluteURL()+"AjaxManageShopCart",formId:"",successHandler:function(serviceResponse){if(MessageHelper.messages["SHOPCART_ADDED"]!=undefined){MessageHelper.displayMattelErrorMessage(MessageHelper.messages["SHOPCART_ADDED"]);
}var renderContext=wc.render.getContextById("ShopCartPaginationDisplay_Context");if(renderContext!=undefined&&renderContext!=null){wc.render.updateContext("ShopCartPaginationDisplay_Context",{"updateContextFlag":true});}cursor_clear();},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){if(serviceResponse.errorMessageKey=="_ERR_NO_ELIGIBLE_TRADING"){MessageHelper.displayMattelErrorMessage(MessageHelper.messages["ERROR_CONTRACT_EXPIRED_GOTO_ORDER"]);
}else{if(serviceResponse.errorMessageKey=="_ERR_RETRIEVE_PRICE"){MessageHelper.displayMattelErrorMessage(MessageHelper.messages["ERROR_RETRIEVE_PRICE"]);}else{MessageHelper.displayMattelErrorMessage(serviceResponse.errorMessage);}}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayMattelErrorMessage(serviceResponse.errorMessageKey);
}}cursor_clear();}}),cursor_wait();if(addedServices){console.info("inside addedServices");ServicesEventMapping.setCartChangeEvent("cart_addon_edit_attr");wc.service.invoke("AjaxAddOrderItemTemp",params2);}else{wc.service.invoke("AjaxReplaceItem",params);}},customizeDynamicKit:function(catEntryIdentifier,quantity,customParams){var params=[];
params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.catEntryId=catEntryIdentifier;params.quantity=quantity;if(!isPositiveInteger(quantity)){MessageHelper.displayErrorMessage(storeNLS["QUANTITY_INPUT_ERROR"]);return;}var contractIdElements=document.getElementsByName("contractSelectForm_contractId");
if(contractIdElements!=null&&contractIdElements!="undefined"){for(i=0;i<contractIdElements.length;i++){if(contractIdElements[i].checked){params.contractId=contractIdElements[i].value;break;}}}if(customParams!=null&&customParams!="undefined"){for(i in customParams){params[i]=customParams[i];}}if(!submitRequest()){return;
}cursor_wait();var configureURL="ConfigureView";var i=0;for(param in params){configureURL+=((i++==0)?"?":"&")+param+"="+params[param];}document.location.href=getAbsoluteURL()+configureURL;},memberShipProductAdd:function(){$("#agreementAccept_errmsg").html("");if($("#agreementAccept").is(":checked")){closeModelA();
var productId=$("#parentProductId").val();var childcatentIds=new Array();var chcatentId=$("#mChildCatentryIds").val();var splitcatent=chcatentId.split(",");for(var i=0;i<splitcatent.length;i++){childcatentIds[i]=splitcatent[i].replace(/[^0-9.]/g,"").replace(/[^0-9.]/g,"");}this.seletedItem(productId);
this.MattelAddBundle2ShopCartAjax(childcatentIds);}else{$("#agreementAccept_errmsg").html("Please Select the licence Agreement");}},memberShipProductAddReg:function(productId,childcatentIds){if($("#vmClose")!=null){$("#vmClose").click();}$("#agreementAccept_errmsg").html("");$("#parentProductId").val(productId);
$("#mChildCatentryIds").val(childcatentIds);document.getElementById("termsA").scrollTop=0;document.getElementsByName("agreementAccept")[0].disabled=true;$("[name='agreementAccept']").attr("checked",false);$("#membershipAgreementmodel").lightbox_me({centered:true,overlayCSS:{background:"black",opacity:0.5}});
}};