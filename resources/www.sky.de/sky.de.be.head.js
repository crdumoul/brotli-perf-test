// last built on Fri Apr 24 13:03:39 CEST 2015 function getURLParameter(e){return decodeURI((RegExp(e+"=(.+?)(&|$)").exec(location.search)||[,null])[1])}function isJSDebuggerActive(){return"null"!=getURLParameter("debuggerJS")&&"true"==getURLParameter("debuggerJS")?!0:!1}function namespace(){var e,t,n=$;return n.each(arguments,function(r,a){t=a.split("."),e=window[t[0]]=window[t[0]]||{},e.__name__=t[0],e.__namespace__=!0,e.toString=function(){return this.__name__},n.each(t.slice(1),function(n,r){e=e[r]=e[r]||{};var a=t.slice(0,n+2).join(".");e.__name__=a,e.__namespace__=!0,e.toString=function(){return this.__name__}})}),e}!function(e){"use strict";function t(e){var t=S.apply(w,x.call(arguments,1)),n=[];return y(e,function(e,r){-1==v(r,t)&&n.push(r)}),n}function n(e){return jQuery.fn.isPrototypeOf(e)?e:jQuery(e)}function r(e,t){var n={};return y(e,function(e,r){if(0==e.indexOf(t)){var a=e.substring(t.length);n[a]=r}}),n}function a(e,t){var n=e.find('option[value="'+t+'"]');J(1==n.length),n.attr("selected",!0)}function i(t,n){if(t.length){var r=t[0].tagName;if("SELECT"==r)a(t,n);else if("INPUT"==r&&"radio"==t.attr("type")){var i=t.parentsUntil("form").parent();n?i.find('input[type=radio][value="'+n+'"]').prop("checked",!0):i.find("input[type=radio]").prop("checked",!1)}else"INPUT"==r&&"checkbox"==t.attr("type")?(t.prop("checked",n),e(t).on("change",function(){var t=e(this);t.next().toggleClass("isChecked",t.prop("checked"))}).triggerHandler("change")):t.val(n);return t}}function o(e,t){var n="formField_"+e+"_"+t,r='[name^="'+n+'"]';return r}function s(t,n){var r=o(t,n),a=e(r);return J(a.length<2,"more than one elements for ",t,n,r),J(a.length,"no element for ",t,n,r),a}function c(e){var t=jQuery.fn,n=t[e];n||(t=jQuery,n=t[e]),J(n,e,"is note a JQuery function"),t[e]=function(){var t;try{throw new Error("")}catch(r){t=r.stack}return console.log("jQuery."+e,t),this&&this.selector&&console.log(this.selector,b(arguments)),n.apply(this,b(arguments))}}function l(e){return e?parseFloat(e.replace(",",".")):void 0}function u(t,r){var a=n(t);return a.removeClass(function(t,n){var a=[],i=n.split(/\b\s+/);return e.each(i,function(e,t){0==t.indexOf(r)&&a.push(t)}),a.join(" ")}),a}function p(e,t,n){return u(e,t).addClass(n)}namespace("skybe");var f=skybe;f.namespace=namespace;var d,_,h,m=e,v=e.inArray,y=e.each,g=jQuery.isFunction,b=e.makeArray,k=e.proxy,w=(e.extend,e.ajax,Array.prototype),S=w.concat,x=w.slice,j=skybe.publishAPI=function(e,t){J(e.__namespace__,e," is not a namespace");var n;try{throw Exception("")}catch(r){r.stack&&(n=r.stack.split("\n")[2])}return y(t,function(t,r){J(!e[t],t,"already defined"),e[t]=r,g(r)&&(r.__name__||(r.__name__=t),r.__js_line__||(r.__js_line__=n))}),e};d=_=h=m.noop,-1!=window.location.href.indexOf("showbuttons=true")&&(d=function(){var e=b(arguments);console.log.apply(console,e)},_=function(){var e=b(arguments);console.warn.apply(console,e)},h=function(){var e=b(arguments);console.error.apply(console,e)}),f.log=d,f.warn=_,f.error=h;var E,C=function(e){var t,r=n(e),a=r[0].tagName;if("INPUT"==a)if("radio"==r.attr("type")){var i=r.parentsUntil("form").last().parent(),o=i.find("input[name="+r.attr("name")+"]:checked");o.length&&(t=o.val())}else if("checkbox"==r.attr("type")){if(r.prop("checked"))return r.attr("custom-value")?r.prop("value"):r.prop("checked")}else t=r.val();else t=r.val();return t},O=namespace("skybe.utils"),A=function(e){//var showButtons = window.location.href.indexOf("showbuttons=true")!=-1;
var t=!0;if(t){E||(O.theButtons=E=m('<div data-skybe-test-buttons="true" style="position:fixed;bottom:30px;max-width: 200px;right:10px;z-index:10000;"></div>'),m("body").append(E));var n=E;y(e,function(e,t){var r=e,a=m('<button style="min-width:150px;">'+r+"</button>");a.on("click",t),n.append(a)})}},P=function(e){function t(e,t){if(e=e.toLowerCase(),document.styleSheets)for(var n=0;n<document.styleSheets.length;n++){var r=document.styleSheets[n],a=0,i=!1;do{if(i=r.cssRules?r.cssRules[a]:r.rules[a],i&&i.selectorText&&i.selectorText.toLowerCase()==e)return"delete"==t?(r.cssRules?r.deleteRule(a):r.removeRule(a),!0):i;a++}while(i)}return!1}var n=t(".fieldValid");n.style.display="",e.siblings(".fieldValid").attr("style",n)},F=function(e){var t=n(e);J(1==t.length,"showError must be called only for one well determined dom element",t.selector);var r;r="FORM"==t[0].tagName?t:t.parents("form:first");var a=r.validate();a.resetForm(),r.find("*").removeClass("fieldBlock--error"),t.siblings(".fieldValid").hide()},T=function(t){e.extend(e.expr[":"],{emptyField:function(t){return""===e(t).val()}});var r=n(t);r.each(function(t,r){var a=e(r).find("input[required!=].j-requiredonsubmit, select[required!=].j-requiredonsubmit"),i=e(r).find("input:emptyField[novalidate!=]"),o=e(r).find("select[novalidate!=] option:selected.fieldBlock__placeholderItem").parent(),s=e().add(i).add(o);s.attr("novalidate","novalidate"),a.prop("required",!0),n(this).validate().form(),a.prop("required",!1),s.removeAttr("novalidate")})},N=function(e,t){var r=n(e);J(1==r.length,"showError must be called only for one well determined dom element",r.selector);var a=r.attr("name"),i=r.attr("id"),o=r.parents("form:first").validate(),s={};s[a]=t,o.showErrors(s),waSky.form.setError("invalid-data-entry",t,i)},L=function(t,n,r,a,i){var o,s=0;i&&!isNaN(i)&&(s=i);var c=e("<section/>").addClass("mod notification tra one").append(e("<div/>").addClass("moduleWrap").append(e("<div/>").addClass("module").append(e("<div/>").addClass("notification--divider  notification--bkg").append(e("<div/>").addClass("notification__lev2").append(e("<h2/>").addClass("informationIcon").html(t)).append(e("<p/>").html(n))))));""==r&&(r=".tplHeader"),a||"before"===a?(e(c).insertBefore(r).hide().fadeIn(500),o=e(c).position()):(e(c).insertAfter(r).hide().fadeIn(500),o=e(r).position()),e(window).scrollTop(o.top+s)},Q=function(t){""==t&&(t="section.mod.notification.tra.one");e(t).fadeOut(500)},I=function(t){e.each(t,function(t,n){var r=t.split("."),a=r[0],i=r[1];a&&i&&N(e('[name="formField_'+a+"_"+i+'"], [name="formfield_'+a+"_"+i+'"]'),n)})},R=function(){function e(){}function t(){var e;return e=(new Date).getTime(),e-this.t>=this._delay?(clearInterval(this.id),delete this.id,this.func.apply(this,this.args)):void 0}return e=function(e,t){this.func=e,this.args=t},e.prototype.call=function(e){return this.func.apply(this,e||this.args)},e.prototype.delay=function(e){var n,r;return(this._delay||this.id)&&this.cancel(),this._delay=e,this.t=(new Date).getTime(),n=b(arguments).slice(1),this.id?void 0:(r=k(t,this),this.id=setInterval(r,this._delay))},e.prototype.cancel=function(){return this.id?(clearInterval(this.id),delete this.id):void 0},e}(),$=e("body"),U=function(e){return!!$.find(e).length};e.fn.domDetach=function(){return this.each(function(){var t=e(this);U(t)&&t.data("prev",t.prev()).data("next",t.next()).data("parent",t.parent()).detach()})},e.fn.domAttach=function(){return this.each(function(){var t,n=e(this);U(n)||(U(t=e(this).data("prev"))?n.insertAfter(t):U(t=e(this).data("next"))?n.insertBefore(t):n.appendTo(e(this).data("parent")))})};var V=function(e){var t=n(e);t.show()},D=function(e){var t=n(e);t.hide()},J=skybe.assert=function(t){if(!t){var n=e.makeArray(arguments);throw n=n.join(" "),console.error(n),new Error("assertion failed "+n)}};j(skybe,{extract:r,difference:t,getJQueryObj:n,getElementValue:C,setElementValue:i,showSuccess:P,clearForm:F,checkPrefilledFields:T,showError:N,showNotification:L,hideNotification:Q,showErrorsMap:I,DelayedTask:R,js_line_property:"__js_line__",property_name:"__name__",package_property:"__package__",debug_info:!0,current_package_property:"__current_package_name__",showModule:V,hideModule:D});{var B=function(e){return"string"==typeof e},q=function(e){return"undefined"==typeof e},M=function(e){return!q(e)};skybe.getErrorStack=function(e){return e.stack?e.stack:"unkown\nunkown\nunkown\nunkown"},skybe.get=function(e,t){var n;return 2==arguments.length?(n=e[t],J(M(n),"undefined ",t," in ",e)):(n=e,J(M(n),"undefined property")),n}}skybe.expose=function(e,t){J(!window[e],e,"already exposed"),window[e]=t},O.trim=function(e){return e.replace(/^\s+|\s+$/g,"")},O.ltrim=function(e){return e.replace(/^\s+/,"")},O.rtim=function(e){return e.replace(/\s+$/,"")};var z=function(t,n,r){for(var a=s(n,r),i=0;i<t.length;i++)a.append(e("<option>").val(t[i]).text(t[i]))},H=function(e,t){var n=document.createElement("form");n.method="post",n.action=e;for(var r in t){var a=document.createElement("input");a.setAttribute("name",r),a.setAttribute("value",t[r]),n.appendChild(a)}document.body.appendChild(n),n.submit(),document.body.removeChild(n)};j(O,{createButtons:A,fillChoices:z}),j(f,{isString:B,postwith:H,parseCommaFloat:l,removeAllClassesAndAddOne:p,removeAllClasses:u,isUndefined:q,isDefined:M,traceJQuery:c})}(jQuery),function(e,t,n,r){"use strict";function a(e){var t=[];return x(e,function(e){t.push(e)}),t}function i(e,t){for(var n in t){var r=t[n];e[n]=r}return e}function o(e,t){if(e[X])return e[X](t);var n;if(P(t))n=t.prototype;else{if(!s(t))return!1;n=t.constructor.prototype}var r;if(P(e))r=e.prototype;else{if(!s(e))return!1;r=e}return n.isPrototypeOf(r)}function s(e){return e===Object(e)}function c(e){var t=e;if(P(e)&&(t=e.prototype),S(P(this)),t==this.prototype||t.isPrototypeOf(this.prototype))return!0;var n=this.__interfaces__;if(n)for(var r=n.length,a=0;r>a;a++){var i=n[a];if(t==i||t.isPrototypeOf(i))return!0}return!1}function l(e){var t=e;try{if(t.status||(t=$.parseJSON(e)),"REDIRECT"==t.status)return r.location.href=t.redirect_url,void 0}catch(n){}}function u(e,t){var n,r;return tt&&e.bind===tt?tt.apply(e,nt.call(arguments,1)):(S(P(e)),n=nt.call(arguments,2),r=function(){if(!(this instanceof r))return e.apply(t,n.concat(nt.call(arguments)));ctor.prototype=e.prototype;var a=new ctor;ctor.prototype=null;var i=e.apply(a,n.concat(nt.call(arguments)));return Object(i)===i?i:a})}function p(){return at.subclass.apply(at,j(arguments))}function f(e){if(w(e)){for(var t,n=e.split("."),a=n.length,i=r,o=0;a>o;o++){var s=n[o];o==a-1?t=i[s]:i=i[s]}return S(t,e,"not found"),t}return e}function d(e,t){for(var n in t)e=e.replace(new RegExp("{"+n+"}","g"),t[n]);return e}function _(e,t){var n=q(e),r=n[0].outerHTML,a=d(r,t),i=$(a);return i.css("display",""),i.removeAttr("data-skybe-name"),i}function h(e,t){var n;n=e?q(e):q("body");var r=n.data("type")||it,a=f(r),i=new a(n,t);return i}function m(e,t,n){var r,t=t||{};r=e?q(e):$("html");var a="[data-"+_t+"]";return r.find(a).each(function(e,r){var a=$(r),i=a.data(dt);if(C(i)){var o=a.data(_t),s=f(o),c=new s(a,n);a.data(dt,c);var l=a.data(ht);//if ((!name)&&(page == skybe))
l&&(S(!t[l],l,"already defined"),t[l]=c)}}),t}function v(e,n){var r=t(e).find(n);return S(r.length,n+" not found"),r}function y(){}var g=["constructor","__implements__","__js_line__","__interfaces__","__super__","__subclasses__"],b=e.get,k=b(e,"publishAPI"),w=(b(e,"namespace"),b(e,"isString")),S=b(e,"assert"),x=b(t,"each"),j=b(t,"makeArray"),E=b(e,"isDefined"),C=b(e,"isUndefined"),O=b(t,"inArray"),A=Object.prototype,P=b(t,"isFunction"),F=b(e,"getErrorStack"),T=b(e,"js_line_property"),N=(b(e,"property_name"),b(e,"debug_info")),L=b(e.package_property),Q=b(e.current_package_property),I=b(e.getElementValue),S=b(e.assert),R=b(e.log),U=b(t.ajax),V=b(t.extend),D=b(skybe.setElementValue),J=b(e.warn),B=b(jQuery.isPlainObject),q=(b(e.showErrorsMap),b(e.getJQueryObj)),M=Array.prototype,z=M.slice,H=e,W="__interfaces__",G="__init__class__",K="__subclasses__",X="__implements__",Y="__super__",Z=Array.prototype,et=Function.prototype,tt=et.bind,nt=Z.slice,rt=function(){function t(){}var n="missing new operator",r=t.prototype;return r.subclass=function(t,r){var o,s=r,l=t,p=2,f=3,d=z.call(arguments,p),_=A.constructor,h=s.constructor,m=function(){};m.prototype=l.prototype;var v=new m;if(h==_)o=this._createFirstConstructor(_,v,n),h=o;else{var y=h;o=this._createConstructor(y,v,n),h=o}if(h.prototype=v,i(v,s),x(d,function(e,t){var n=t;P(t)&&(n=t.prototype),C(h[W])&&(h[W]=[],h[X]||(h[X]=c,v[X]=u(c,h))),h[W].push(n);var r={};x(a(n),function(e,t){-1==O(t,g)&&(r[t]=n[t])});for(var i in r)v[i]||(v[i]=r[i])}),v.constructor=h,h[Y]=l.prototype,v[G]&&v[G].call(h),N)try{throw new Error("")}catch(b){var k=F(b);v[T]=k.split("\n")[f],h[T]=v[T]}return l.prototype!=Object.prototype&&(C(l[K])&&(l[K]=[]),l[K].push(h)),h[L]=e[Q],h},r._createFirstConstructor=function(e,t,n){return S(e),S(t),S(n),function(){S(t.isPrototypeOf(this),n),e.apply(this,arguments)}},r._createConstructor=function(e,t,n){return S(e),S(t),S(n),function(){S(t.isPrototypeOf(this),n),e.apply(this,arguments)}},t}(),at=new rt;k(H,{subclass:p,Subclasser:rt,super_property:Y,isObject:s,bind:u,implements_:o});var it=function(){function e(e,t){S(e,"an element must given");var n=q(e);this._theElement=n,this._prefix=n.data("prefix"),t&&(this._prefix=t)}function t(e){var t=this._theElement,n=this._propertyName(e),r=t.find("["+this._attr_name+"="+n+"]");return r.length?R(n,"set in",t.selector):J(n,"not found in ",t),r}function n(e){return(this._prefix||"")+e}function r(e,t,n){D(e,n)}function a(e,t){var n=(this._theElement,this);x(e,function(e,r){var a=n._selectField(e);t(a,e,r)})}function i(e){a.call(this,e,u(this._setElementValue,this))}function o(){var e={},t=this._theElement,n=this;return t.find(this._fieldSelector()).each(function(t,r){var a=n._elementName(r);if(a){var i=n._elementValue(r);E(i)&&(e[a]=i)}}),e}function s(e){var t=q(e),n=t.attr(this._attr_name),r=this._prefix||"";return 0==n.indexOf(r)?n.slice(r.length):void 0}function c(e){var t=q(e);return I(t)}function l(){return"["+this._attr_name+"]"}function f(e){a.call(this,e,u(this._showError,this))}function d(e,t,n){skybe.showError(e,n)}return p(Object,{_attr_name:"name",constructor:e,serialize:o,deserialize:i,_setElementValue:r,_selectField:t,_showError:d,_propertyName:n,_fieldSelector:l,_elementValue:c,_elementName:s,showErrors:f})}();H.getFormData=function(e,t){return h(e,t).serialize()};H.setFormData=function(e,t,n){h(e,n).deserialize(t)};skybe.callServer=function(e,t,n,r){throw Exception("Obsolete")};var ot=function(){function e(e){if(console.log("startSpinner"),"noSpinner"!=e)if(console.log(e),"undefined"!=typeof e&&e.length>1)for(var t=0;t<e.length;t++){for(var n="",r=0;r<e[t].classList.length;r++)n+="."+e[t].classList[r];helpers.createSpinner($(n)),n=""}else helpers.createSpinner(e)}function t(){return $("body > *").eq(0)}function n(){if(!this.__loader){var e=this._getLoderContainer();this.__loader=new ge21(e)}return this.__loader}function r(e){if(console.log("endSpinner"),"noSpinner"!=e)if("undefined"!=typeof e&&e.length>1)for(var t=0;t<e.length;t++){for(var n="",r=0;r<e[t].classList.length;r++)n+="."+e[t].classList[r];helpers.destroySpinner($(n)),n=""}else helpers.destroySpinner(e)}return p(Object,{start:e,_getLoader:n,_getLoderContainer:t,end:r})}(),st=function(){function e(){var e=this._getArguments(j(arguments)),t=e.url,n=e.method,r=e.params,a=e.success_callback,i=(e.error_callback,e.spinnerSelector);S(t);var o=this,s=this._doCallService(t,n,r,function(){try{l(j(arguments)[0]),a&&a.apply(o,j(arguments))}catch(e){console.error(e)}},i),o=this;return s.always(function(){}),s}function t(){var e=j(arguments);this.__error_callback.apply(this,e)}function n(e){S(e),this.__error_callback=e}function r(e){S(e),this.__endcall_callback=e}function a(e){S(e),this.__beforecall_callback=e}function i(e){var t,n,r,a,i,o;return x(e,function(e,s){P(s)?C(a)?a=s:i=s:w(s)?C(t)?t=s:C(n)?n=s:o=s:B(s)?r=s:jQuery.prototype.isPrototypeOf(s)&&(o=s)}),o&&"noSpinner"!=o&&(o=q(o),S(o.length,"invalid selector",o.selector)),{url:t,method:n,params:r,success_callback:a,error_callback:i,spinnerSelector:o}}return p(Object,{_type:"POST",spinner:new ot,__beforecall_callback:function(){this.spinner.start(selectorSpinner)},__endcall_callback:function(){this.spinner.end(selectorSpinner)},_onEndCall:function(){this.__endcall_callback.apply(this,j(arguments))},_onBeforeCall:function(){this.__beforecall_callback.apply(this,j(arguments))},_onError:t,error:n,_getArguments:i,endcall:r,beforecall:a,__error_callback:function(){},_doCallService:function(e,t){return U({type:this._type,data:t,dataType:"json"})},callService:e})}(),ct=new st,lt=function(){function e(e,t,n,r,a){var i=this._getArguments(j(arguments)),o=i.url,s=i.method,c=i.params,l=i.success_callback,u=i.error_callback,p=i.spinnerSelector;S(C(c.action),"'action' param name is reserved");var t=s,n=c,r=l,a=u;s&&!w(s)&&(t="",n=s,r=c,a=l);r=r||function(){},a=a||function(){};var f=this.spinner;return f.start(p),U({type:"POST",contentType:"application/json",url:o,data:JSON.stringify(this._prepareParams(t,n)),dataType:"json",success:function(e){f.end(p),r(e)},error:function(e){f.end(p),a(e)}})}function t(e,t){return V({action:e},t)}return p(st,{_doCallService:e,_prepareParams:t})}(),ut=new lt,pt=function(){function e(){var e=this._getArguments(j(arguments)),t=e.url,n=e.method,r=e.params,a=e.success_callback,i=(e.error_callback,e.spinnerSelector);console.log(i);var o=this.spinner;return o.start(i),U({type:"POST",url:t,data:V({action:n},r),success:function(){var e=j(arguments);return o.end(i),a.apply(this,e)},error:function(){o.end(i);j(arguments)}})}return p(st,{_doCallService:e})}(),ft=new pt;k(skybe,{htmlServer:ft,jsonServer:ut,server:ct,getClass:f,SkySpinner:ot,FormSerializer:it,JSONServer:lt,HTMLServer:pt,formServer:ct,Server:st,templateHelper:d,prepareBluePrint:_});var dt="skybe-cmp",_t="skybe-type",ht="skybe-name",mt=skybe,mt={};k(skybe,{safeFind:v,page:mt,initComponents:m,addQueryStringParam:y}),$(n).ready(function(){m(void 0,mt)})}(skybe,jQuery,document,window);
